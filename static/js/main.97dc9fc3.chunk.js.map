{"version":3,"sources":["reducers/metadata.js","reducers/vehicles.js","reducers/filter.js","reducers/authentication.js","reducers/index.js","components/IconButtons.jsx","components/Menu.jsx","actions/authentication.js","actions/actionTypes.js","components/Map/layers/index.js","components/Map/layers/vehicles-heatmap.js","components/Map/layers/vehicles-point.js","components/Map/layers/vehicles-heatmap-city-level.js","components/Map/Map.jsx","pages/Map.jsx","pages/logo.svg","customHooks/useInterval.js","pages/Demo.jsx","pages/Login.jsx","components/Filterbar/ModalBox.jsx","components/Filterbar/FilteritemGebieden.jsx","components/Filterbar/FilteritemDatum.jsx","components/Filterbar/FilteritemAanbieders.jsx","components/Filterbar/FilteritemZones.jsx","components/Filterbar/Filterbar.jsx","poll-api/pollMetadataGebiedenAanbieders.js","poll-api/pollMetadataZones.js","App.js","AppProvider.js","reportWebVitals.js","index.js"],"names":["md5","require","initialState","aanbieders","gebieden","zones","zones_geodata","data","visible","gebied","datum","Date","toISOString","user_data","combineReducers","metadata","state","action","type","current","payload","console","log","vehicles","vehicle","uuid","filtered","filter","x","push","split","ex","includes","join","item","authentication","user","IconButtonClose","props","className","height","id","version","viewBox","width","d","IconButtonFilter","xmlns","Menu","dispatch","useDispatch","isLoggedIn","useSelector","showfilter","to","onClick","e","layers","Map","mapContainer","useState","lng","lat","zoom","counter","setCounter","map","useRef","useEffect","maplibregl","container","style","accessToken","process","center","addControl","NavigationControl","on","isStyleLoaded","getSource","addSource","setTimeout","addDataSources","getStyle","forEach","indexOf","removeLayer","getLayer","addLayer","addLayers","setLayers","useInterval","callback","delay","savedCallback","setInterval","clearInterval","Demo","url","json","setJson","timestamp","setTimestamp","fetch","then","response","catch","error","src","logo","alt","Object","keys","length","toLocaleTimeString","href","target","rel","Login","emailaddress","setEmailaddress","password","setPassword","recoverPassword","setRecoverPassword","loggedIn","setLoggedIn","login","preventDefault","loginId","applicationId","method","body","JSON","stringify","headers","res","message","recover","htmlFor","autoCapitalize","placeholder","name","required","onChange","value","ModalBox","closeFunction","children","stopPropagation","FilteritemGebieden","filterGebied","showSelect","setShowSelect","setFilterGebied","find","gm_code","a","renderSelectGebieden","Filterbar","filterDatum","showSelectDatum","setShowSelectDatum","setFilterDatum","valid","toLocaleString","ISOString","date","ten","i","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","toDatetimeLocal","renderSelectDatum","FilteritemAanbieders","filterAanbieders","aanbiedertxt","aantal","system_id","aanbieder","renderSelectAanbieders","FilteritemZones","filterZones","zonetxt","zone_id","zone","renderZoneZones","FilteritemDatum","cPublicAanbieders","cPublicGebieden","store_gebiedenaanbieders","undefined","timerid_gebiedenaanbieders","updateGebiedenAanbieders","getState","options","token","ok","municipalities","operators","forceUpdateGebiedenAanbieders","clearTimeout","store_zones","timerid_zones","updateZones","url_zones","forceUpdateZones","App","userdata","aanbiedersfilter","ts","replace","fetchVehiclesInPublicSpace","park_events","geoJson","current_time","moment","v","duration","in_public_space_since","start_time","minutes","diff","color","feature","location","latitude","longitude","features","store","_store","path","ref","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","persistedState","localStorage","getItem","parse","createStore","appReducer","applyMiddleware","thunk","subscribe","storeState","storeStateToSaveInLocalStorage","lastUpdate","unix","setItem","AppProvider","content","this","Component","WrappedComponent","args","ConnectedWrappedComponent","connect","connectWithStore","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"kZAAMA,EAAMC,EAAQ,IAEdC,EAAe,CACnBC,WAAY,GACZC,SAAU,GACVC,MAAO,GACPC,cAAe,ICNjB,IAAMJ,EAAe,CACnBK,KAAM,MCDR,IAAML,EAAe,CACnBM,SAAS,EACTC,OAAQ,GACRJ,MAAO,GACPK,OAAQ,IAAIC,MAAQC,cACpBT,WAAY,ICLd,IAAMD,EAAe,CACnBW,UAAW,MCKEC,kBAAgB,CAC7BC,SJEa,WAA+C,IAA/BC,EAA8B,uDAAtBd,EAAce,EAAQ,uCAC3D,OAAOA,EAAOC,MACZ,IAAK,iBACH,IAAIC,EAAUH,EAAMb,WAAaa,EAAMb,WAAY,GAEnD,OAAGH,EAAImB,KAAWnB,EAAIiB,EAAOG,SAAmBJ,EAEzC,2BACFA,GADL,IAEEb,WAAYc,EAAOG,UAGvB,IAAK,eACH,IAAID,EAAUH,EAAMZ,SAAWY,EAAMZ,SAAU,GAE/C,OAAGJ,EAAImB,KAAWnB,EAAIiB,EAAOG,SAAmBJ,EAEzC,2BACFA,GADL,IAEEZ,SAAUa,EAAOG,UAIrB,IAAK,YACH,IAAID,EAAUH,EAAMX,MAAQW,EAAMX,MAAO,GAEzC,OAAGL,EAAImB,KAAWnB,EAAIiB,EAAOG,SAAmBJ,GAChDK,QAAQC,IAAI,oBAAqBL,EAAOG,SAEjC,2BACAJ,GADP,IAEIX,MAAOY,EAAOG,WAIpB,IAAK,oBACH,IAAID,EAAUH,EAAMV,cAAgBU,EAAMV,cAAe,GAEzD,OAAGN,EAAImB,KAAWnB,EAAIiB,EAAOG,SAAmBJ,EAEzC,2BACAA,GADP,IAEIV,cAAeW,EAAOG,UAI5B,QACE,OAAOJ,IIhDXO,SHJa,WAAiD,IAA/BP,EAA8B,uDAAtBd,EAAce,EAAQ,uCAC7D,OAAOA,EAAOC,MACZ,IAAK,eACH,IAAMK,EAAWN,EAAOG,QACxB,MAAO,CACLb,KAAMgB,GAGV,IAAK,cACH,IAAMC,EAAUP,EAAOG,QAEvB,IAAKI,EAAQC,KACX,MAAO,GAGT,IAAMC,EAAWV,EAAMT,KAAKoB,QAAO,SAASC,GAC1C,OAAOA,EAAEH,OAASD,EAAQC,QAK5B,OAFAC,EAASG,KAAKL,GAEP,CAAEjB,KAAMmB,GAEjB,IAAK,iBACH,MAAO,CACLnB,KAAM,IAGV,QACE,OAAOS,IGxBXW,OFDa,WAA+C,IAA/BX,EAA8B,uDAAtBd,EAAce,EAAQ,uCAC3D,OAAOA,EAAOC,MACZ,IAAK,qBAEH,OADAG,QAAQC,IAAI,uCAAwCL,EAAOG,SACpD,2BACAJ,GADP,IAEIR,QAASS,EAAOG,UAGtB,IAAK,oBAEH,OADAC,QAAQC,IAAI,kCAAmCL,EAAOG,SAC/C,2BACAJ,GADP,IAEIP,OAAQQ,EAAOG,QACff,MAAO,KAIb,IAAK,mBAEH,OADAgB,QAAQC,IAAI,iCAAkCL,EAAOG,SAC9C,2BACAJ,GADP,IAEIN,MAAOO,EAAOG,UAGpB,IAAK,sBACHC,QAAQC,IAAI,iCAAkCL,EAAOG,QAASJ,GAC9D,IAAIX,EAAQ,GACZ,GAAGW,EAAMX,MACP,IACEA,EAAQW,EAAMX,MAAMyB,MAAM,MAAQ,GAClC,MAAMC,GACN1B,EAAQ,GAOZ,OAJIA,EAAM2B,SAASf,EAAOG,UACxBf,EAAMwB,KAAKZ,EAAOG,SAGb,2BACAJ,GADP,IAEIX,MAAOA,EAAM4B,KAAK,OAGxB,IAAK,2BACHZ,QAAQC,IAAI,iCAAkCL,EAAOG,SACrD,IAAIf,EAAQW,EAAMX,MAAMyB,MAAM,MAAQ,GAGtC,OAFAzB,EAAQA,EAAMsB,QAAO,SAACO,GAAW,OAAOA,IAASjB,EAAOG,WAEjD,2BACAJ,GADP,IAEIX,MAAOA,EAAM4B,KAAK,OAGxB,IAAK,qBAGH,OAFAZ,QAAQC,IAAI,sBAEL,2BACAN,GADP,IAEIX,MAAO,KAGb,IAAK,2BACHgB,QAAQC,IAAI,sCAAuCL,EAAOG,QAASJ,GACnE,IAAIb,EAAa,GAQjB,OAPGa,EAAMb,aACPA,EAAaa,EAAMb,WAAW2B,MAAM,MAAQ,IAE1C3B,EAAW6B,SAASf,EAAOG,UAC7BjB,EAAW0B,KAAKZ,EAAOG,SAGlB,2BACAJ,GADP,IAEIb,WAAYA,EAAW8B,KAAK,OAGlC,IAAK,gCACHZ,QAAQC,IAAI,sCAAuCL,EAAOG,SAC1D,IAAIjB,EAAaa,EAAMb,WAAW2B,MAAM,MAAQ,GAGhD,OAFA3B,EAAaA,EAAWwB,QAAO,SAACO,GAAW,OAAOA,IAASjB,EAAOG,WAE3D,2BACAJ,GADP,IAEIb,WAAYA,EAAW8B,KAAK,OAGlC,IAAK,0BAGH,OAFAZ,QAAQC,IAAI,2BAEL,2BACAN,GADP,IAEIb,WAAY,KAGlB,QACE,OAAOa,IE9FXmB,eDNa,WAAiD,IAA/BnB,EAA8B,uDAAtBd,EAAce,EAAQ,uCAC3D,OAAOA,EAAOC,MACV,IAAK,WACD,IAAMkB,EAAOnB,EAAOG,QACpB,MAAO,CACHP,UAAWuB,GAGnB,IAAK,aACD,MAAO,CAAEvB,UAAW,MAExB,QACI,OAAOG,M,8BEdZ,SAASqB,EAAgBC,GAC9B,OACE,+CACMA,GADN,IAEEC,UAAU,qOAFZ,SAIE,qBACEC,OAAO,OACPC,GAAG,UACHC,QAAQ,MACRC,QAAQ,cACRC,MAAM,OALR,SAOE,sBAAMC,EAAE,sVAKT,SAASC,EAAiBR,GAC/B,OACE,+CACMA,GADN,IAEEC,UAAU,qQAFZ,SAIE,qBAAKQ,MAAM,6BAA6BJ,QAAQ,kBAAhD,SACE,sBAAME,EAAE,uVCyCDG,MA7Df,WACE,IAAMC,EAAWC,cAEXC,EAAaC,aAAY,SAAApC,GAC7B,QAAOA,EAAMmB,eAAetB,aAUxBwC,EAAaD,aAAY,SAAApC,GAC7B,QAAOA,EAAMW,QAASX,EAAMW,OAAOnB,WAUrC,OACE,qBAAK+B,UAAU,sBAAf,SACE,sBAAKA,UAAU,sCAAf,UACE,cAAC,IAAD,CAAMA,UAAU,YAAYe,GAAG,IAA/B,kBAGA,cAAC,IAAD,CAAMf,UAAU,YAAYe,GAAG,QAA/B,kBAGA,cAAC,IAAD,CAAMf,UAAU,YAAYe,GAAG,YAA/B,yBAGCH,EACG,qBAAKZ,UAAU,YAAf,SACE,cAACO,EAAD,CAAmBS,QArBV,SAAAC,GACnBP,EAAS,CACP/B,KAAM,qBACNE,SAAUiC,SAqBJ,KACHF,EAEC,cAAC,IAAD,CAAMZ,UAAU,iCAAiCgB,QAtC1C,WACTJ,GACFF,ECT0B,CAC9B/B,KCDwB,aDExBE,QAAS,QD2CiEkC,GAAG,IAArE,qBAIA,cAAC,IAAD,CAAMf,UAAU,iCAAiCe,GAAG,SAApD,0B,wBGpDGG,G,MAAS,CACpB,mBCLa,CACb,GAAM,mBACN,KAAQ,UACR,OAAU,WACV,QAAW,EACX,MAAS,CAEP,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,MAAO,OACR,EACA,EACA,EACA,GAIF,oBAAqB,CACnB,cACA,CAAC,UACD,CAAC,QACD,EACA,EACA,EACA,GAKF,gBAAiB,CACf,cACA,CAAC,UACD,CAAC,mBACD,EACA,qBACA,GACA,mBACA,GACA,mBACA,GACA,mBACA,GACA,kBACA,EACA,kBAGF,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,QACD,EACA,EACA,EACA,IAGF,kBAAmB,CACjB,cACA,CAAC,UACD,CAAC,QACD,EACA,EACA,EACA,KD3DJ,iBENa,CACb,GAAM,iBACN,KAAQ,SACR,OAAU,WACV,QAAW,EACX,MAAS,CAET,gBAAiB,CACf,cAAe,CAAC,UAAW,CAAC,QAC5B,GAAI,EACJ,GAAI,CAAC,IAAK,EAAG,CAAC,MAAO,YAuBrB,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,QACD,EACA,EACA,EACA,GAEF,eAAgB,CAAC,MAAO,WFnC1B,8BGPa,CACb,GAAM,8BACN,KAAQ,UACR,OAAU,WACV,MAAS,CAEP,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,MAAO,OACR,EACA,EACA,EACA,GAIF,oBAAqB,CACnB,cACA,CAAC,UACD,CAAC,QACD,EACA,EACA,EACA,GAMF,gBAAiB,CACf,cACA,CAAC,UACD,CAAC,mBACD,EACA,qBACA,GACA,YACA,GACA,OACA,GACA,OACA,GACA,SACA,EACA,OAIF,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,QACD,EACA,EACA,EACA,QC/CN,SAASC,EAAIpB,GAEX,IAAMf,EAAW6B,aAAY,SAAApC,GAC3B,OAAOA,EAAMO,SAAWP,EAAMO,SAAShB,KAAO,QAG1CoD,EAAerB,EAAMqB,aANT,EAOJC,mBAAS,WAAhBC,EAPW,sBAQJD,mBAAS,YAAhBE,EARW,sBASHF,mBAAS,IAAjBG,EATW,sBAUYH,mBAAS,GAVrB,mBAUXI,EAVW,KAUFC,EAVE,KAWdC,EAAMC,iBAAO,MAiFjB,OA9EAC,qBAAU,WAGFF,EAAI/C,UACR+C,EAAI/C,QAAU,IAAIkD,IAAWX,IAAI,CAC/BY,UAAWX,EAAaxC,QACxBoD,MAAO,qCACPC,YAAaC,6FACbC,OAAQ,CAACb,EAAKC,GACdC,KAAMA,IAGRG,EAAI/C,QAAQwD,WAAW,IAAIN,IAAWO,kBAAqB,gBAE3DV,EAAI/C,QAAQ0D,GAAG,QAAQ,WACrBZ,EAAWD,EAAU,SAIxB,CAACzC,EAAUsC,EAAKC,EAAKC,EAAMC,EAASL,IAEvCS,qBAAU,YACe,SAAC7C,GAChB2C,EAAI/C,SAAa+C,EAAI/C,QAAQ2D,gBAO7BvD,IAIkB2C,EAAI/C,QAAQ4D,UAAU,aAK5Cb,EAAI/C,QAAQ6D,UAAU,WAAY,CAChC,KAAQ,UACR,KAAQzD,KAhBV0D,YAAW,WACThB,EAAWD,EAAU,KACpB,KAkBPkB,CAAe3D,KACd,CAACA,EAAUyC,IAEdI,qBAAU,YACU,SAAC7C,GACX2C,EAAI/C,SAAa+C,EAAI/C,QAAQ2D,gBAM7BvD,IAGY2C,EAAI/C,QAAQgE,WAAW1B,OAC/B2B,SAAQ,SAAAxD,GAEbA,EAAEa,GAAG4C,QAAQ,cAAgB,GAE9BnB,EAAI/C,QAAQmE,YAAY1D,EAAEa,OAI9BH,EAAMmB,OAAO2B,SAAQ,SAAAxD,GAChBU,EAAMmB,OAAO4B,QAAQzD,KAAO,IACNsC,EAAI/C,QAAQoE,SAAS3D,IACvBsC,EAAI/C,QAAQqE,SAAS/B,EAAO7B,SApBnDqD,YAAW,WACThB,EAAWD,EAAU,KACpB,KAsBPyB,CAAUlE,KACT,CAACA,EAAUyC,EAAS1B,EAAMmB,SAErB,KC3DKC,MAvCf,SAAapB,GAAQ,IAAD,EACUsB,mBAAS,CACnC,mBACA,mBAHgB,mBACXH,EADW,KACHiC,EADG,KASlB,OACE,sBAAKnD,UAAU,gBAAf,UACE,sBAAKA,UAAU,YAAf,sBAEE,wBAAQgB,QAAS,WACfmC,EAAU,CACR,mBACA,oBAHJ,sBAFF,KAUE,wBAAQnD,UAAU,GAAGgB,QAAS,WAC5BmC,EAAU,CACR,iCAFJ,qBAMS,0BAEX,qBAAKnD,UAAU,oBAAf,SACE,cAAC,EAAD,CAAcoB,aAAcrB,EAAMqB,aAChCF,OAAQA,UClCH,MAA0B,iCCsB1BkC,MApBf,SAAqBC,EAAUC,GAC7B,IAAMC,EAAgB3B,mBAGtBC,qBAAU,WACR0B,EAAc3E,QAAUyE,IACvB,CAACA,IAGJxB,qBAAU,WAIR,GAAc,OAAVyB,EAAgB,CAClB,IAAIpD,EAAKsD,aAJX,WACED,EAAc3E,YAGa0E,GAC3B,OAAO,kBAAMG,cAAcvD,OAE5B,CAACoD,K,MC6BSI,MA1Cf,WACE,IAAMC,EAAM,kFADE,EAGQtC,oBAAS,GAHjB,mBAGTuC,EAHS,KAGHC,EAHG,OAIkBxC,oBAAS,GAJ3B,mBAITyC,EAJS,KAIEC,EAJF,KAsBd,OAhBAX,GAAY,WAERY,MAAML,GAAKM,MAAK,SAASC,GACvBA,EAASN,OAAOK,MAAK,SAASL,GAC5BC,EAAQD,GACRG,EAAa,IAAI3F,SAChB+F,OAAM,SAAA3E,GACPV,QAAQsF,MAAM,yBACdP,GAAQ,SAETM,OAAM,SAAA3E,GACPV,QAAQsF,MAAM,6CAA8CT,GAC5DE,GAAQ,QAET,KAGH,qBAAK7D,UAAU,OAAf,SACE,yBAAQA,UAAU,cAAlB,UACE,qBAAKqE,IAAKC,EAAMtE,UAAU,YAAYuE,IAAI,SAC1C,qCACOC,OAAOC,KAAKb,GAAMc,OADzB,gBAC8CZ,EAAYA,EAAUa,qBAAuB,SAE3F,mBACE3E,UAAU,YACV4E,KAAK,sBACLC,OAAO,SACPC,IAAI,sBAJN,+BCuGOC,EAnID,WAAO,IAAD,EACsB1D,mBAAS,IAD/B,mBACX2D,EADW,KACGC,EADH,OAEc5D,mBAAS,IAFvB,mBAEX6D,EAFW,KAEDC,EAFC,OAG4B9D,oBAAS,GAHrC,mBAGX+D,EAHW,KAGMC,EAHN,OAIchE,oBAAS,GAJvB,mBAIXiE,EAJW,KAIDC,EAJC,KAKZ7E,EAAWC,cAEX6E,EAAQ,SAAAvE,GAEZA,EAAEwE,iBAEF,IACIzH,EAAO,CACP0H,QAASV,EACTE,SAAUA,EACVS,cAAezD,wCAGnB8B,MAPY9B,+CAOD,CACT0D,OAAQ,OACRC,KAAMC,KAAKC,UAAU/H,GACrBgI,QAAS,CACP,eAAgB,sBAEjB/B,MAAK,SAAAgC,GAAG,OAAIA,EAAIrC,UAChBK,MAAK,SAAAC,GACJxD,EX/B0B,CAChC/B,KCGsB,WDFtBE,QW6BwBqF,IAClBqB,GAAY,MACXpB,OAAM,SAAAC,GACPtF,QAAQsF,MAAM,qBAAsBA,EAAM8B,SAC1CX,GAAY,OAIZY,EAAU,SAAAlF,GACdA,EAAEwE,iBAEF,IACIzH,EAAO,CACT0H,QAASV,GAGX,OAAOhB,MALK9B,8DAKM,CAChB0D,OAAQ,OACRC,KAAMC,KAAKC,UAAU/H,GACrBgI,QAAS,CACP,eAAgB,sBAEjB/B,MAAK,SAAAgC,GAAG,OAAIA,EAAIrC,UAChBK,MAAK,SAAAC,GAEJ,OADApF,QAAQC,IAAImF,IACL,KACNC,OAAM,SAAAC,GACP,OAAO,MAuEb,OAAIkB,EAJE,cAAC,IAAD,CAAUvE,GAAG,MAQZqE,EAhCH,qBAAKpF,UAAU,4DAAf,SACE,sBAAKA,UAAU,8CAAf,UACE,oBAAIA,UAAU,iCAAd,mCACA,iCACE,uBAAOA,UAAU,QAAQoG,QAAQ,eAAjC,mBACA,uBACEpG,UAAU,8FACVqG,eAAe,MACfC,YAAY,QACZC,KAAK,eACLC,UAAQ,EACRC,SAAU,SAAAxF,GAAC,OAAIgE,EAAgBhE,EAAE4D,OAAO6B,UAG1C,sBAAK1G,UAAU,sCAAf,UACI,wBAAQA,UAAU,0EAA0EgB,QAASmF,EAArG,qBACA,wBAAQnG,UAAU,qEAAqEgB,QAAS,kBAAIqE,GAAmB,IAAvH,iCAnDV,qBAAKrF,UAAU,4DAAf,SACE,sBAAKA,UAAU,8CAAf,UACE,oBAAIA,UAAU,iCAAd,mBACA,iCACE,uBAAOA,UAAU,QAAQoG,QAAQ,eAAjC,mBACA,uBACEpG,UAAU,8FACVqG,eAAe,MACfC,YAAY,QACZC,KAAK,eACLC,UAAQ,EACRC,SAAU,SAAAxF,GAAC,OAAIgE,EAAgBhE,EAAE4D,OAAO6B,UAG1C,uBAAO1G,UAAU,QAAQoG,QAAQ,WAAjC,wBACA,uBACEpG,UAAU,8FACVrB,KAAK,WACL2H,YAAY,aACZC,KAAK,WACLC,UAAQ,EACRC,SAAU,SAAAxF,GAAC,OAAIkE,EAAYlE,EAAE4D,OAAO6B,UAGtC,sBAAK1G,UAAU,sCAAf,UACI,wBAAQA,UAAU,0EAA0EgB,QAASwE,EAArG,mBACA,wBAAQxF,UAAU,qEAAqEgB,QAAS,kBAAIqE,GAAmB,IAAvH,6C,MC5EDsB,MAff,YAA8C,IAA3BC,EAA0B,EAA1BA,cAAeC,EAAW,EAAXA,SAChC,OACE,qBAAK7G,UAAU,cAAcgB,QAAS,kBAAM4F,GAAc,IAA1D,SACE,sBAAK5G,UAAU,WAAWgB,QAAS,SAAAC,GAAC,OAAEA,EAAE6F,mBAAxC,UACE,qBAAK9G,UAAU,kCAAf,SACE,cAACF,EAAD,CAAiBkB,QAAS,kBAAM4F,GAAc,QAEhD,qBAAK5G,UAAU,cAAf,SACI6G,UC4CGE,MAlDf,WACE,IAAMrG,EAAWC,cAEX9C,EAAWgD,aAAY,SAAApC,GAC3B,OAAQA,EAAMD,UAAYC,EAAMD,SAASX,SAAYY,EAAMD,SAASX,SAAW,MAG3EmJ,EAAenG,aAAY,SAAApC,GAC/B,OAAOA,EAAMW,OAASX,EAAMW,OAAOlB,OAAS,MARlB,EAWMmD,oBAAS,GAXf,mBAWvB4F,EAXuB,KAWXC,EAXW,KAatBC,EAAkB,SAACjJ,GACvBwC,EAAS,CACP/B,KAAM,oBACNE,QAASX,KAuBTwI,EAAQ7I,EAASuJ,MAAK,SAAAzH,GAAI,OAAEA,EAAK0H,UAAUL,MAAiB,GAEhE,OACI,sBAAKhH,UAAU,cAAcgB,QAAS,SAAAC,GAAIiG,GAAeD,IAAzD,UACE,qBAAKjH,UAAU,eAAf,sBACA,qBAAKA,UAAU,eAAf,SAA+B0G,EAAMH,OACnCU,EAzBqB,SAACpJ,GAC5B,OACE,cAAC,EAAD,CAAU+I,cAAeM,EAAzB,SACE,sBAAKlH,UAAU,uBAAf,UACE,qBAAKA,UAAU,oBAAf,8BACE,qBAAKA,UAAU,qBAAf,SACInC,EAAS8D,KAAI,SAAA2F,GACX,OAAGN,IAAiBM,EAAED,QACZ,qBAA6BrH,UAAU,+BAA+BgB,QAAS,SAAAC,GAAIiG,GAAc,GAAOC,EAAgBG,EAAED,UAA1H,SAAsIC,EAAEf,MAA9H,QAAQe,EAAED,SAEpB,qBAA6BrH,UAAU,YAAYgB,QAAS,SAAAC,GAAIiG,GAAc,GAAOC,EAAgBG,EAAED,UAAvG,SAAoHC,EAAEf,MAA5G,QAAQe,EAAED,mBAezBE,CAAqB1J,GAAY,SCsBzC2J,MAnEf,WACE,IAAM9G,EAAWC,cAEX8G,EAAc5G,aAAY,SAAApC,GAC9B,OAAOA,EAAMW,OAASX,EAAMW,OAAOjB,OAAQ,IAAIC,MAAOC,iBAJrC,EAOyBgD,oBAAS,GAPlC,mBAOdqG,EAPc,KAOGC,EAPH,KASbC,EAAiB,SAAA3G,GACrBA,EAAEwE,iBAEGxE,EAAE4D,OAAF,SAAqBgD,QAE1B1J,EAAS,IAAIC,KAAK6C,EAAE4D,OAAO6B,OAAQrI,cACnCqC,EAAS,CACP/B,KAAM,mBACNE,QAASV,MAqCTA,EAAQ,IAAIC,KAAKqJ,GAAaK,iBAElC,OACE,qCACE,sBAAK9H,UAAU,cAAcgB,QAAS,SAAAC,GAAI0G,GAAoBD,IAA9D,UACE,qBAAK1H,UAAU,eAAf,mBACA,qBAAKA,UAAU,eAAf,SAA+B7B,OAE/BuJ,EAvBoB,WACxB,IAAMhB,EAlBR,SAAyBqB,GACvB,IAAMC,EAAO,IAAI5J,KAAK2J,GAEpBE,EAAM,SAAUC,GACd,OAAQA,EAAI,GAAK,IAAM,IAAMA,GASjC,OAPSF,EAAKG,cAOA,IANPF,EAAID,EAAKI,WAAa,GAMJ,IALlBH,EAAID,EAAKK,WAKoB,IAJ7BJ,EAAID,EAAKM,YAKF,IAJPL,EAAID,EAAKO,cAIS,IAHlBN,EAAID,EAAKQ,cAOFC,CAAgBhB,GAC9B,OACG,cAAC,EAAD,CAAUzH,UAAU,eAAe4G,cAAee,EAAlD,SACA,sBAAK3H,UAAU,uBAAf,UACE,qBAAKA,UAAU,oBAAf,6BACA,uBAAMA,UAAU,mFAAhB,UACE,uBAAOA,UAAU,kCAAkCrB,KAAK,iBAAiB+H,MAAOA,EAAOD,SAAUmB,IACjG,qBAAK5H,UAAU,cAEjB,qBAAKA,UAAU,yCAAyCgB,QAAS,SAAAC,GAAC,OAAE0G,GAAmB,IAAvF,qBAaiBe,GAAsB,SCEjCC,MAhEf,WACE,IAAMjI,EAAWC,cAEX/C,EAAaiD,aAAY,SAAApC,GAC7B,OAAQA,EAAMD,UAAYC,EAAMD,SAASZ,WAAca,EAAMD,SAASZ,WAAa,MAG/EgL,EAAmB/H,aAAY,SAAApC,GACnC,OAAOA,EAAMW,OAASX,EAAMW,OAAOxB,WAAa,MARpB,EAWIyD,oBAAS,GAXb,mBAWzB4F,EAXyB,KAWbC,EAXa,KAyC1B2B,EAAe,GACnB,IACE,IAAIC,EAASF,EAAiBrJ,MAAM,KAAKmF,OACtCoE,EAAO,GAAKA,EAAOlL,EAAW8G,OAC/BmE,EAAeD,EAAiBrJ,MAAM,KAAKmF,OAAS,cAChC,IAAXoE,IACTD,EAAeD,GAEjB,MAAMpJ,GACNqJ,EAAe,GAKjB,MAFkB,KAAfA,IAAqBA,EAAe,mBAGnC,sBAAK7I,UAAU,cAAcgB,QAAS,SAAAC,GAAIiG,GAAeD,IAAzD,UACE,qBAAKjH,UAAU,eAAf,wBACA,qBAAKA,UAAU,eAAf,SAA+B6I,IAC7B5B,EAvCuB,SAACrJ,GAC9B,OACE,cAAC,EAAD,CAAUgJ,cAAeM,EAAzB,SACE,sBAAKlH,UAAU,uBAAf,UACI,qBAAKA,UAAU,oBAAf,kCACA,qBAAKA,UAAU,qBAAf,SACEpC,EAAW+D,KAAI,SAAC2F,EAAEY,GAEhB,OADiBU,EAAiBnJ,SAAS6H,EAAEyB,WAEnC,qBAA+B/I,UAAU,+BAA+BgB,QAAS,SAAAC,GAbtE,IAAC+H,EAa0E/H,EAAE6F,kBAb5EkC,EAa0H1B,EAAEyB,UAZ9JrI,EAAS,CAAE/B,KAAM,gCAAiCE,QAASmK,KAYrC,SAAsJ1B,EAAEf,MAA9I,QAAQe,EAAEyB,WAEpB,qBAA+B/I,UAAU,YAAYgB,QAAS,SAAAC,GAlBxD,IAAC+H,EAkB4D/H,EAAE6F,kBAlB9DkC,EAkBuG1B,EAAEyB,UAjBtIrI,EAAS,CAAE/B,KAAM,2BAA4BE,QAASmK,KAiBhC,SAA8H1B,EAAEf,MAAtH,QAAQe,EAAEyB,qBA4BvBE,CAAuBrL,GAAc,SCK7CsL,MAjEf,WACE,IAAMxI,EAAWC,cAEX7C,EAAQ+C,aAAY,SAAApC,GACxB,OAAQA,EAAMD,UAAYC,EAAMD,SAASV,MAASW,EAAMD,SAASV,MAAQ,MAIrEqL,EAActI,aAAY,SAAApC,GAC9B,OAAOA,EAAMW,OAASX,EAAMW,OAAOtB,MAAQ,KATpB,EAYSuD,oBAAS,GAZlB,mBAYpB4F,EAZoB,KAYRC,EAZQ,KA0CrBkC,EAAU,GACd,IACE,IAAIN,EAASK,EAAY5J,MAAM,KAAKmF,OACjCoE,EAAO,GAAKA,EAAOhL,EAAM4G,OAC1B0E,EAAUD,EAAY5J,MAAM,KAAKmF,OAAS,SACtB,IAAXoE,IACTM,EAAUD,GAEZ,MAAM3J,GACN4J,EAAU,GAKZ,MAFa,KAAVA,IAAgBA,EAAU,cAGzB,sBAAKpJ,UAAU,cAAcgB,QAAS,SAAAC,GAAIiG,GAAeD,IAAzD,UACE,qBAAKjH,UAAU,eAAf,mBACA,qBAAKA,UAAU,eAAf,SAA+BoJ,IAC7BnC,EAtCgB,SAACnJ,GACvB,OACE,cAAC,EAAD,CAAU8I,cAAeM,EAAzB,SACE,sBAAKlH,UAAU,uBAAf,UACE,qBAAKA,UAAU,oBAAf,4BACE,qBAAKA,UAAU,qBAAf,SACIlC,EAAM6D,KAAI,SAAA2F,GAER,OADiB6B,EAAY1J,SAAS6H,EAAE+B,SAE9B,qBAA6BrJ,UAAU,+BAA+BgB,QAAS,SAAAC,GAd3E,IAACqI,EAc+ErI,EAAE6F,kBAdjFwC,EAc0HhC,EAAE+B,QAbzJ3I,EAAS,CAAE/B,KAAM,2BAA4BE,QAASyK,KAa9B,SAA6IhC,EAAEf,MAArI,QAAQe,EAAE+B,SAEpB,qBAA6BrJ,UAAU,YAAYgB,QAAS,SAAAC,GAnB7D,IAACqI,EAmBiErI,EAAE6F,kBAnBnEwC,EAmBuGhC,EAAE+B,QAlBjI3I,EAAS,CAAE/B,KAAM,sBAAuBE,QAASyK,KAkBzB,SAAqHhC,EAAEf,MAA7G,QAAQe,EAAE+B,mBA2BzBE,CAAgBzL,GAAS,SC7CjC0J,MAbf,WACE,OACE,qBAAKxH,UAAU,sBAAf,SACE,sBAAKA,UAAU,gEAAf,UACE,cAAC,EAAD,IACA,cAAC,EAAD,IACA,cAACwJ,EAAD,IACA,cAAC,EAAD,UCbFC,EAAoB,CACtB,CAAE/C,MAAM,OAAQH,KAAK,QACrB,CAAEG,MAAM,YAAaH,KAAK,aAC1B,CAAEG,MAAM,SAAUH,KAAK,UACvB,CAAEG,MAAM,SAAUH,KAAK,UACvB,CAAEG,MAAM,MAAOH,KAAK,OACpB,CAAEG,MAAM,YAAaH,KAAK,MAC1B,CAAEG,MAAM,QAASH,KAAK,SACtB,CAAEG,MAAM,QAASH,KAAK,SACtB,CAAEG,MAAM,qBAAsBH,KAAK,aACnC,CAAEG,MAAM,UAAWH,KAAK,WACxB,CAAEG,MAAM,OAAQH,KAAK,QACrB,CAAEG,MAAM,QAASH,KAAK,SACtB,CAAEG,MAAM,WAAYH,KAAK,YACzB,CAAEG,MAAM,cAAeH,KAAK,eAC5B,CAAEG,MAAM,OAAQH,KAAK,SAGnBmD,EAAkB,CACtB,CAAErC,QAAQ,GAAId,KAAK,iBAAmB,CAAEc,QAAQ,SAAUd,KAAK,iBAAmB,CAAEc,QAAQ,SAAUd,KAAK,oBAAsB,CAAEc,QAAQ,SAAUd,KAAK,iBAAmB,CAAEc,QAAQ,SAAUd,KAAK,UAAY,CAAEc,QAAQ,SAAUd,KAAK,UAAY,CAAEc,QAAQ,SAAUd,KAAK,uBAAyB,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,UAAY,CAAEc,QAAQ,SAAUd,KAAK,SAAW,CAAEc,QAAQ,SAAUd,KAAK,eAAiB,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,QAAU,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,eAAiB,CAAEc,QAAQ,SAAUd,KAAK,SAAW,CAAEc,QAAQ,SAAUd,KAAK,UAAY,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,0BAA4B,CAAEc,QAAQ,SAAUd,KAAK,WAAa,CAAEc,QAAQ,SAAUd,KAAK,kBAAoB,CAAEc,QAAQ,SAAUd,KAAK,SAAW,CAAEc,QAAQ,SAAUd,KAAK,YAAc,CAAEc,QAAQ,SAAUd,KAAK,UAAY,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,OAAS,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,YAAc,CAAEc,QAAQ,SAAUd,KAAK,OAAS,CAAEc,QAAQ,SAAUd,KAAK,kBAAoB,CAAEc,QAAQ,SAAUd,KAAK,gBAAkB,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,WAAa,CAAEc,QAAQ,SAAUd,KAAK,kBAAoB,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,UAAY,CAAEc,QAAQ,SAAUd,KAAK,WAAa,CAAEc,QAAQ,SAAUd,KAAK,WAAa,CAAEc,QAAQ,SAAUd,KAAK,gBAAkB,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,eAAiB,CAAEc,QAAQ,SAAUd,KAAK,UAAY,CAAEc,QAAQ,SAAUd,KAAK,0BAA4B,CAAEc,QAAQ,SAAUd,KAAK,iBAAmB,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,yBAA2B,CAAEc,QAAQ,SAAUd,KAAK,WAAa,CAAEc,QAAQ,SAAUd,KAAK,gBAAkB,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,mBAAqB,CAAEc,QAAQ,SAAUd,KAAK,oBAAsB,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,WAAa,CAAEc,QAAQ,SAAUd,KAAK,YAAc,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,iCAAmC,CAAEc,QAAQ,SAAUd,KAAK,YAAc,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,YAAc,CAAEc,QAAQ,SAAUd,KAAK,sBAAwB,CAAEc,QAAQ,SAAUd,KAAK,UAAY,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,YAAc,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,YAAc,CAAEc,QAAQ,SAAUd,KAAK,kBAAoB,CAAEc,QAAQ,SAAUd,KAAK,WAAa,CAAEc,QAAQ,SAAUd,KAAK,YAAc,CAAEc,QAAQ,SAAUd,KAAK,WAAa,CAAEc,QAAQ,SAAUd,KAAK,uBAAyB,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,eAAiB,CAAEc,QAAQ,SAAUd,KAAK,SAAW,CAAEc,QAAQ,SAAUd,KAAK,UAAY,CAAEc,QAAQ,SAAUd,KAAK,YAAc,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,aAAe,CAAEc,QAAQ,SAAUd,KAAK,eAAiB,CAAEc,QAAQ,SAAUd,KAAK,YAAc,CAAEc,QAAQ,SAAUd,KAAK,cAAgB,CAAEc,QAAQ,SAAUd,KAAK,eAAiB,CAAEc,QAAQ,SAAUd,KAAK,WAG59GoD,OAA2BC,EAM3BC,OAA6BD,EAE3BE,EAA2B,SAA3BA,IACJ,IAAIxG,EAAQ,IACZ,IACE,QAAGsG,IAAYD,EAEb,OADA7K,QAAQC,IAAI,4DACL,EAGT,IAAMN,EAAQkL,EAAyBI,WACvC,GAfe,SAACtL,GAClB,QAAOA,EAAMmB,eAAetB,UActBsC,CAAWnC,GAMR,CACL,IACIuL,EAAU,CAAEhE,QAAU,CAAE,cAAiB,UAAYvH,EAAMmB,eAAetB,UAAU2L,QAqBtF,OAnBFjG,MAHQ,2DAGGgG,GAAS/F,MAAK,SAACC,GACxB,IAAIA,EAASgG,GAEX,OADApL,QAAQsF,MAAM,sBAAuBF,IAC9B,EAGTA,EAASN,OACNK,MAAK,SAACzF,GAGLmL,EAAyBjJ,SAAS,CAAE/B,KAAM,eAAgBE,QAASL,EAAS2L,iBAI5ER,EAAyBjJ,SAAS,CAAE/B,KAAM,iBAAkBE,QAASL,EAAS4L,kBAE/EjG,OAAM,SAAA3E,GACPV,QAAQsF,MAAM,6BAET,EA3BTuF,EAAyBjJ,SAAS,CAAE/B,KAAM,eAAgBE,QAAS6K,IAGnEC,EAAyBjJ,SAAS,CAAE/B,KAAM,iBAAkBE,QAAS4K,IA0BvE,MAAMjK,GAIN,OAHAV,QAAQsF,MAAM,4BAA6B5E,GAC3C8D,EAAQ,KAED,EA1CT,QA4CEuG,EAA6BnH,WAAWoH,EAA0BxG,KAIzD+G,EAAgC,gBACxCT,IAAYC,GAA8BS,aAAaT,GAC1DC,KAOFO,ICzFA,IAAIE,OAAcX,EAMdY,OAAgBZ,EAEda,EAAc,SAAdA,IACJ,IAAInH,EAAQ,IACZ,IACE,QAAGsG,IAAYW,EAEb,OADAzL,QAAQC,IAAI,4DACL,EAGT,IAAMN,EAAQ8L,EAAYR,WAC1B,GAfe,SAACtL,GAClB,QAAOA,EAAMmB,eAAetB,UActBsC,CAAWnC,IAA8B,KAAtBA,EAAMW,OAAOlB,OAG7B,CAEL,IAAIwM,EAAU,iEAAiEjM,EAAMW,OAAOlB,OAGxF8L,EAAU,CAAEhE,QAAU,CAAE,cAAiB,UAAYvH,EAAMmB,eAAetB,UAAU2L,QAExFjG,MAAM0G,EAAWV,GAAS/F,MAAK,SAACC,GAC9B,IAAIA,EAASgG,GAEX,OADApL,QAAQsF,MAAM,sBAAuBF,IAC9B,EAGTA,EAASN,OACNK,MAAK,SAACzF,GAEL+L,EAAY7J,SAAS,CAAE/B,KAAM,YAAaE,QAASL,EAASV,cAE7DqG,OAAM,SAAA3E,GACPV,QAAQsF,MAAM,iCArBlBmG,EAAY7J,SAAS,CAAE/B,KAAM,iBAAkBE,QAAS,KACxD0L,EAAY7J,SAAS,CAAE/B,KAAM,oBAAqBE,QAAS,KAuB7D,MAAMW,GACNV,QAAQsF,MAAM,yBAA0B5E,GACxC8D,EAAQ,IAlCV,QAoCEkH,EAAgB9H,WAAW+H,EAAanH,KAI/BqH,GAAmB,gBAC3Bf,IAAYY,GAAiBF,aAAaE,GAC7CC,KAQFE,K,MCiIeC,OAtKf,WACE,IAAMxJ,EAAeQ,iBAAO,MAEtBlB,EAAWC,cAIXC,EAAaC,aAAY,SAAApC,GAC7B,QAAOA,EAAMmB,eAAetB,aAGxBuM,EAAWhK,aAAY,SAAApC,GAC3B,OAAOA,EAAMmB,eAAetB,aAGxBc,EAASyB,aAAY,SAAApC,GACzB,OAAImC,GAAanC,EAAMW,OAIhBX,EAAMW,OAHJ,QAML0B,EAAaD,aAAY,SAAApC,GAC7B,QAAOA,EAAMW,QAASX,EAAMW,OAAOnB,WAgBjC0F,EAAM,kFACNqG,EAAU,GACd,GAAG,OAAO5K,EAAQ,CAChB,IAAI0L,EAAuC,KAApB1L,EAAOxB,WAAgB,cAAgBwB,EAAOxB,WAAW,GAE5EmN,GAAK,IAAI3M,MAAOC,cAAc2M,QAAQ,UAAW,KAErDrH,EAAM,yEAAyEoH,EAAGD,EAClFd,EAAU,CAAEhE,QAAU,CAAE,cAAiB,UAAY6E,EAASZ,QAGhE,IAAMgB,EAA6B,WACjCjH,MAAML,EAAKqG,GAAS/F,MAAK,SAASC,GAChC,IAAIA,EAASgG,GAEX,OADApL,QAAQsF,MAAM,sBAAuBF,IAC9B,EAGTA,EAASN,OAAOK,MAAK,SAASjF,GACzB4B,IACD5B,EAAWA,EAASkM,aAEtB,IAAIC,EAAU,CACX,KAAO,oBACP,IAAM,CACH,KAAO,OACP,WAAa,CACV,KAAO,kCAGb,SAAW,IAGR1N,EAAMC,EAAQ,IAChB0N,EAAeC,MACnBrM,EAAS6D,SAAQ,SAAAyI,GACf,IAjDwBC,EAiDpBC,EAAwB5K,EAAa0K,EAAEG,WAAaH,EAAEE,sBAEtDE,EAAUN,EAAaO,KAAKN,IAAOG,GAAwB,WACzDI,GApDkBL,EAoDaG,IAnD3B,GACP,UAELH,GAAY,KACP,UAELA,GAAY,KACP,UAEF,UA4CGM,EAAU,CACX,KAAO,UACP,WAAa,CACV,GAAKpO,EAAI6N,EAAEQ,SAASC,SAAST,EAAEQ,SAASE,WACxC,UAAaV,EAAEvC,UACf,sBAAyByC,EACzB,MAASI,GAEZ,SAAW,CACR,KAAO,QACP,YAAc,CACXN,EAAEQ,SAASE,UACXV,EAAEQ,SAASC,SACX,KAKTZ,EAAQc,SAAS3M,KAAKuM,MAQxBnL,EAAS,CACP/B,KAAM,eACNE,QAASsM,OAKVhH,OAAM,SAAA3E,GACPV,QAAQsF,MAAM,+BAGfD,OAAM,SAAA3E,GACPV,QAAQsF,MAAM,6CAA8CT,OAuBhE,OAlBA9B,qBAAU,WF7DV8H,EE8D+BuC,GAC7B7B,OAGFxI,qBAAU,WDjGmB,IAACsK,ICkGZD,GDjGlBpN,QAAQC,IAAI,mBACZwL,EAAc4B,ECiGZxB,QAGFvH,GAAY,WACV6H,MACC,KAEHpJ,qBAAU,SAAAxC,GACR4L,OAIA,cAAC,IAAD,UACG,sBAAKjL,UAAU,MAAf,UACG,sBAAKA,UAAU,YAAf,UACE,cAAC,EAAD,IACEY,GAAcE,EAAa,cAAC,EAAD,IAAgB,KAC7C,eAAC,IAAD,WACE,cAAC,IAAD,CAAOsL,KAAK,QAAZ,SACC,cAAC,EAAD,MAED,cAAC,IAAD,CAAOA,KAAK,SAAZ,SACG,cAAC,EAAD,MAEH,cAAC,IAAD,CAAOA,KAAK,IAAZ,SACC,cAAC,EAAD,CAAKhL,aAAcA,YAIxB,qBAAKiL,IAAKjL,EAAcpB,UAAU,oBC3KtCsM,GAAmBC,OAAOC,sCAAwCC,IAGlEC,GAAiBC,aAAaC,QAAQ,qBACxC9G,KAAK+G,MAAMF,aAAaC,QAAQ,sBAChC,GAGSV,GAAQY,YACnBC,EACAL,GACAJ,GAAiBU,YAAgBC,OAInCf,GAAMgB,WAAU,WACd,IAAMC,EAAajB,GAAMnC,WACnBqD,EAAiC,CACrCC,WAAYhC,MAASiC,OACrB1N,eAAgBuN,EAAWvN,eAC3BR,OAAQ+N,EAAW/N,QAErBuN,aAAaY,QAAQ,oBAAqBzH,KAAKC,UAAUqH,O,IAGrDI,G,4JACJ,WACE,OACE,cAAC,IAAD,CAAUtB,MAAOA,GAAjB,SACE,cAAC,GAAD,CAAKuB,QAASC,KAAK3N,MAAM0N,gB,GAJPE,aA6BXH,UAnBf,SAA0BtB,EAAO0B,GAA4B,IAAD,uBAANC,EAAM,iCAANA,EAAM,kBAC1D,IAAIC,EAA4BC,IAAO,WAAP,EAAWF,EAAXE,CAAiBH,GACjD,OAAO,SAAU7N,GACf,OAAO,cAAC+N,EAAD,2BAA+B/N,GAA/B,IAAsCmM,MAAOA,MAgB3B8B,CAC3B9B,GACAsB,IAdF,SAAyB/O,GACvB,MAAO,MAKT,SAA4BiC,GAC1B,MAAO,MCjDMuN,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBlK,MAAK,YAAkD,IAA/CmK,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BZ,O","file":"static/js/main.97dc9fc3.chunk.js","sourcesContent":["const md5 = require('md5');\n\nconst initialState = {\n  aanbieders: [],\n  gebieden: [],\n  zones: [],\n  zones_geodata: [],\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_AANBIEDERS': {\n      let current = state.aanbieders ? state.aanbieders: [];\n      \n      if(md5(current)===md5(action.payload)) { return state; }\n      \n      return {\n        ...state,\n        aanbieders: action.payload\n      }\n    }\n    case 'SET_GEBIEDEN': {\n      let current = state.gebieden ? state.gebieden: [];\n    \n      if(md5(current)===md5(action.payload)) { return state; }\n    \n      return {\n        ...state,\n        gebieden: action.payload,\n      }\n    }\n    \n    case 'SET_ZONES': {\n      let current = state.zones ? state.zones: [];\n    \n      if(md5(current)===md5(action.payload)) { return state; }\n      console.log(\"ACTION: set zones\", action.payload)\n\n      return {\n          ...state,\n          zones: action.payload,\n      };\n    }\n\n    case 'SET_ZONES_GEODATA': {\n      let current = state.zones_geodata ? state.zones_geodata: [];\n    \n      if(md5(current)===md5(action.payload)) { return state; }\n\n      return {\n          ...state,\n          zones_geodata: action.payload,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  data: null\n}\n\nexport default function vehicles(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_VEHICLES': {\n      const vehicles = action.payload\n      return {\n        data: vehicles\n      }\n    }\n    case 'SET_VEHICLE': {\n      const vehicle = action.payload\n      // Validate input\n      if(! vehicle.uuid) {\n        return {}\n      }\n      // Remove changed vehicle\n      const filtered = state.data.filter(function(x) {\n        return x.uuid !== vehicle.uuid;\n      });\n      // Add vehicle to vehicles set\n      filtered.push(vehicle)\n      // Set store\n      return { data: filtered }\n    }\n    case 'CLEAR_VEHICLES': {\n      return {\n        data: []\n      }\n    }\n    default:\n      return state;\n  }\n\n}\n","const initialState = {\n  visible: false,\n  gebied: \"\",\n  zones: \"\",\n  datum: (new Date()).toISOString(),\n  aanbieders: \"\"\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_FILTER_VISIBLE': {\n      console.log('reducer filter set filter visible %s', action.payload)\n      return {\n          ...state,\n          visible: action.payload\n      };\n    }\n    case 'SET_FILTER_GEBIED': {\n      console.log('reducer filter set gebied to %s', action.payload)\n      return {\n          ...state,\n          gebied: action.payload,\n          zones: \"\"\n      };\n    }\n\n    case 'SET_FILTER_DATUM': {\n      console.log('reducer filter set datum to %s', action.payload)\n      return {\n          ...state,\n          datum: action.payload\n      };\n    }\n    case 'ADD_TO_FILTER_ZONES': {\n      console.log('add item %s to zones filter %o', action.payload, state)\n      let zones = [];\n      if(state.zones) {\n        try {\n          zones = state.zones.split(\",\") || []\n        } catch(ex) {\n          zones = [];\n        }\n      }\n      if(!zones.includes(action.payload)) {\n        zones.push(action.payload);\n      }\n\n      return {\n          ...state,\n          zones: zones.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_ZONES': {\n      console.log('remove item %s to zones filter', action.payload)\n      let zones = state.zones.split(\",\") || [];\n      zones = zones.filter((item) => { return item !== action.payload });\n\n      return {\n          ...state,\n          zones: zones.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_ZONES': {\n      console.log('clear zones filter')\n\n      return {\n          ...state,\n          zones: []\n      };\n    }\n    case 'ADD_TO_FILTER_AANBIEDERS': {\n      console.log('add item %s to aanbieders filter %o', action.payload, state)\n      let aanbieders = [];\n      if(state.aanbieders) {\n        aanbieders = state.aanbieders.split(\",\") || []\n      }\n      if(!aanbieders.includes(action.payload)) {\n        aanbieders.push(action.payload);\n      }\n    \n      return {\n          ...state,\n          aanbieders: aanbieders.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_AANBIEDERS': {\n      console.log('remove item %s to aanbieders filter', action.payload)\n      let aanbieders = state.aanbieders.split(\",\") || [];\n      aanbieders = aanbieders.filter((item) => { return item !== action.payload });\n    \n      return {\n          ...state,\n          aanbieders: aanbieders.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_AANBIEDERS': {\n      console.log('clear aanbieders filter')\n    \n      return {\n          ...state,\n          aanbieders: []\n      };\n    }\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  user_data: null\n}\n  \nexport default function vehicles(state = initialState, action) {\n    switch(action.type) {\n        case 'SET_USER': {\n            const user = action.payload\n            return {\n                user_data: user\n            }\n        }\n        case 'CLEAR_USER': {\n            return { user_data: null }\n        }\n        default:\n            return state;\n    }\n}","import { combineReducers } from 'redux';\nimport metadata from './metadata';\nimport vehicles from './vehicles';\nimport filter from './filter';\nimport authentication from './authentication';\n\nexport default combineReducers({\n  metadata,\n  vehicles,\n  filter,\n  authentication\n})","import React from 'react';\n\nexport function IconButtonClose(props) {\n  return (\n    <div\n      {...props}\n      className=\"w-16 h-16 flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline\"\n    >\n      <svg\n        height=\"100%\"\n        id=\"Layer_1\"\n        version=\"1.1\"\n        viewBox=\"0 0 512 512\"\n        width=\"100%\"\n        >\n        <path d=\"M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z\"/>\n      </svg>\n    </div>);\n}\n\nexport function IconButtonFilter(props) {\n  return (\n    <div\n      {...props}\n      className=\"w-12 h-8 box-border border-2 border-black flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline\"\n    >\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22.13 15.72\">\n        <path d=\"M7.16 0a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h2.71a3.7 3.7 0 0 0 7.2 0h10.52a.85.85 0 0 0 0-1.7H10.76A3.7 3.7 0 0 0 7.16 0zm0 5.72a2 2 0 1 1 2-2 2 2 0 0 1-2 2zM15 8.3a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h10.52a3.7 3.7 0 0 0 7.2 0h2.71a.85.85 0 0 0 0-1.7h-2.71A3.7 3.7 0 0 0 15 8.3zm0 5.7a2 2 0 1 1 2-2 2 2 0 0 1-2 2z\"></path>\n      </svg>\n    </div>);\n}\n\n","import React from 'react';\nimport { Link } from \"react-router-dom\";\nimport { clearUser } from '../actions/authentication';\nimport './Menu.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { IconButtonFilter } from './IconButtons.jsx';\n\nfunction Menu() {\n  const dispatch = useDispatch();\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n\n  const logOut = () => {\n    if (isLoggedIn) {\n      dispatch( clearUser() );\n    }\n  }\n\n  //Get the value of a State variable, and store it to a const, to use it later\n  const showfilter = useSelector(state => {\n    return state.filter ? state.filter.visible : false;\n  });\n\n  const toggleFilter = e => {\n    dispatch({\n      type: 'SET_FILTER_VISIBLE',\n      payload: !showfilter\n    })\n  }\n\n  return (\n    <div className=\"box-border p-2 pb-0\">\n      <div className=\"flex bg-white rounded-lg w-full p-4\">\n        <Link className=\"text-menu\" to=\"/\">\n          Home\n        </Link>\n        <Link className=\"text-menu\" to=\"/demo\">\n          Demo\n        </Link>\n        <Link className=\"text-menu\" to=\"/map/park\">\n          Parkeerdata\n        </Link>\n        {isLoggedIn ?\n            <div className=\"text-menu\">\n              <IconButtonFilter  onClick={toggleFilter} />\n            </div>\n            :\n            null }\n        {isLoggedIn\n          ?\n          <Link className=\"text-menu flex-grow text-right\" onClick={logOut} to=\"/\">\n            Log uit\n          </Link>\n          :\n          <Link className=\"text-menu flex-grow text-right\" to=\"/login\">\n            Log in\n          </Link>\n        }\n      </div>\n    </div>\n  )\n\n  // <nav class=\"flex items-center justify-around flex-wrap bg-teal-500 p-6\">\n  // </nav>\n}\n\nexport default Menu;\n\n","import { SET_USER, CLEAR_USER } from \"./actionTypes\";\n\nexport const setUser = (user) => ({\n  type: SET_USER,\n  payload: user\n})\n\nexport const clearUser = () => ({\n  type: CLEAR_USER,\n  payload: null\n})\n","// vehicles\nexport const SET_VEHICLES = 'SET_VEHICLES';\nexport const SET_VEHICLE = 'SET_VEHICLE';\nexport const CLEAR_VEHICLES = 'CLEAR_VEHICLES';\n\n// authentication\nexport const SET_USER = 'SET_USER';\nexport const CLEAR_USER = 'CLEAR_USER';\n","import vehiclesPoint from './vehicles-point.js';\nimport vehiclesHeatmap from './vehicles-heatmap.js';\nimport vehiclesHeatmapCityLevel from './vehicles-heatmap-city-level.js';\n\nexport const layers = {\n  'vehicles-heatmap': vehiclesHeatmap,\n  'vehicles-point': vehiclesPoint,\n  'vehicles-heatmap-city-level': vehiclesHeatmapCityLevel\n}\n","export default {\n  'id': 'vehicles-heatmap',\n  'type': 'heatmap',\n  'source': 'vehicles',\n  'maxzoom': 9,\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0,\n      0,\n      6,\n      1\n    ],\n    // Increase the heatmap color weight weight by zoom level\n    // heatmap-intensity is a multiplier on top of heatmap-weight\n    'heatmap-intensity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0,\n      1,\n      9,\n      3\n    ],\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0,\n      'rgba(33,102,172,0)',\n      0.2,\n      'rgb(103,169,207)',\n      0.4,\n      'rgb(209,229,240)',\n      0.6,\n      'rgb(253,219,199)',\n      0.8,\n      'rgb(239,138,98)',\n      1,\n      'rgb(178,24,43)'\n    ],\n    // Adjust the heatmap radius by zoom level\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0,\n      2,\n      9,\n      20\n    ],\n    // Transition from heatmap to circle layer by zoom level\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7,\n      1,\n      9,\n      0\n    ]\n  }\n}","export default {\n  'id': 'vehicles-point',\n  'type': 'circle',\n  'source': 'vehicles',\n  'minzoom': 7,\n  'paint': {\n  // Size circle radius by earthquake magnitude and zoom level\n  'circle-radius': [\n    'interpolate', ['linear'], ['zoom'],\n    12, 1,\n    16, ['*', 2, ['get', 'amount']]\n  ],\n  // Color circle by earthquake magnitude\n  // 'circle-color': [\n  //   'interpolate',\n  //   ['linear'],\n  //   ['get', 'mag'],\n  //   1,\n  //   'rgba(33,102,172,0)',\n  //   2,\n  //   'rgb(103,169,207)',\n  //   3,\n  //   'rgb(209,229,240)',\n  //   4,\n  //   'rgb(253,219,199)',\n  //   5,\n  //   'rgb(239,138,98)',\n  //   6,\n  //   'rgb(178,24,43)'\n  // ],\n  // 'circle-stroke-color': 'white',\n  // 'circle-stroke-width': 1,\n  // Transition from heatmap to circle layer by zoom level\n    'circle-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7,\n      0,\n      8,\n      1\n    ],\n    'circle-color': ['get', 'color']\n  }\n}","export default {\n  'id': 'vehicles-heatmap-city-level',\n  'type': 'heatmap',\n  'source': 'vehicles',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0,\n      0,\n      6,\n      1\n    ],\n    // Increase the heatmap color weight weight by zoom level\n    // heatmap-intensity is a multiplier on top of heatmap-weight\n    'heatmap-intensity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0,\n      1,\n      9,\n      3\n    ],\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0,\n      'rgba(0, 0, 255, 0)',\n      0.1,\n      'royalblue',\n      0.3,\n      'cyan',\n      0.5,\n      'lime',\n      0.7,\n      'yellow',\n      1,\n      'red'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0,\n      2,\n      9,\n      20\n    ],\n    // 'heatmap-opacity': [\n    //   'interpolate',\n    //   ['linear'],\n    //   ['zoom'],\n    //   7,\n    //   1,\n    //   9,\n    //   4\n    // ]\n  }\n}","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport maplibregl from 'maplibre-gl';\n\nimport './Map.css';\n\nimport {layers} from './layers';\n// import {sources} from './sources.js';\n\nfunction Map(props) {\n  //Get the value of a State variable, and store it to a const, to use it later\n  const vehicles = useSelector(state => {\n    return state.vehicles ? state.vehicles.data : null;\n  });\n\n  const mapContainer = props.mapContainer;\n  const [lng] = useState(4.4671854);\n  const [lat] = useState(51.9250836);\n  const [zoom] = useState(15);\n  const [counter, setCounter] = useState(0);\n  let map = useRef(null);\n\n  // Docs: https://maptiler.zendesk.com/hc/en-us/articles/4405444890897-Display-MapLibre-GL-JS-map-using-React-JS\n  useEffect(() => {\n    // Init MapLibre map\n    const initMap = () => {\n      if (map.current) return;\n      map.current = new maplibregl.Map({\n        container: mapContainer.current,\n        style: 'mapbox://styles/mapbox/streets-v11',\n        accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n        center: [lng, lat],\n        zoom: zoom\n      });\n      // Add controls\n      map.current.addControl(new maplibregl.NavigationControl(), 'bottom-right');\n  \n      map.current.on('load', function() {\n        setCounter(counter + 1)\n      })\n    }\n    initMap();\n  }, [vehicles, lng, lat, zoom, counter, mapContainer])\n\n  useEffect(() => {\n    const addDataSources = (vehicles) => {\n      if (! map.current || ! map.current.isStyleLoaded()) {\n        // Refresh state, so that addDataSources runs again\n        setTimeout(() => {\n          setCounter(counter + 1)\n        }, 250)\n        return;\n      }\n      if (! vehicles) {\n        return;\n      }\n      // Check if source exists\n      const doesSourceExist = map.current.getSource('vehicles');\n      if(doesSourceExist) {\n        // console.log('source does exist. setting vehicles', vehicles)\n        // map.current.getSource('vehicles').setData(vehicles);\n      } else {\n        map.current.addSource('vehicles', {\n          'type': 'geojson',\n          'data': vehicles\n        });\n      }\n    }\n    addDataSources(vehicles);\n  }, [vehicles, counter])\n\n  useEffect(() => {\n    const addLayers = (vehicles) => {\n      if (! map.current || ! map.current.isStyleLoaded()) {\n        setTimeout(() => {\n          setCounter(counter + 1)\n        }, 250)\n        return;\n      }\n      if (! vehicles) return;\n\n      // Remove 'old' layers\n      const allLayers = map.current.getStyle().layers;\n      allLayers.forEach(x => {\n        // Check if this is one of our layers\n        if(x.id.indexOf('vehicles-') > -1) {\n          // If so, remove\n          map.current.removeLayer(x.id)\n        }\n      })\n      // Add selected layers to the map\n      props.layers.forEach(x => {\n        if(props.layers.indexOf(x) >= -1) {\n          const doesLayerExist = map.current.getLayer(x);\n          if(! doesLayerExist) map.current.addLayer(layers[x]);\n        }\n      })\n    }\n    addLayers(vehicles);\n  }, [vehicles, counter, props.layers]);\n\n  return (null)\n}\n\nexport {Map};\n","import React, {useState} from 'react';\nimport {Map as MapComponent} from '../components/Map/Map.jsx';\n\nfunction Map(props) {\n  const [layers, setLayers] = useState([\n    'vehicles-heatmap',\n    'vehicles-point'\n  ]);\n  // const [sources, setSources] = useState([\n  //   'vehicles'\n  // ]);\n  \n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"flex-none\">\n        Map type:\n        <button onClick={() => {\n          setLayers([\n            'vehicles-heatmap',\n            'vehicles-point',\n          ])\n        }}>\n          Vehicles\n        </button> |\n        <button className=\"\" onClick={() => {\n          setLayers([\n            'vehicles-heatmap-city-level'\n          ])\n        }}>\n          Heatmap\n        </button><br />\n      </div>\n      <div className=\"flex-1 bg-red-400\">\n        <MapComponent mapContainer={props.mapContainer}\n          layers={layers}\n        />\n      </div>\n  </div>);\n  \n  \n}\n\nexport default Map;\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import { useEffect, useRef } from 'react';\n\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport default useInterval;","import { useState } from 'react';\n\nimport logo from './logo.svg';\nimport useInterval from '../customHooks/useInterval.js';\nimport './Demo.css';\n\nfunction Demo() {\n  const url = \"https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space\";\n  \n  let [json, setJson] = useState(false);\n  let [timestamp, setTimestamp] = useState(false);\n  \n  useInterval(() => {\n      // Your custom logic here\n      fetch(url).then(function(response) {\n        response.json().then(function(json) {\n          setJson(json);\n          setTimestamp(new Date());\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n          setJson(false);\n        });\n      }).catch(ex=>{\n        console.error(\"fetch error - unable to fetch JSON from %s\", url);\n        setJson(false);\n      });\n    }, 5000);\n      \n  return (\n    <div className=\"Demo\">\n      <header className=\"Demo-header\">\n        <img src={logo} className=\"Demo-logo\" alt=\"logo\" />\n        <p>\n          Got {Object.keys(json).length} vehicles at {timestamp ? timestamp.toLocaleTimeString() : '-/-'}\n        </p>\n        <a\n          className=\"Demo-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Learn React\n        </a>\n      </header>\n    </div>\n  );\n}\n\nexport default Demo;\n","import React, { useState } from 'react';\nimport { setUser } from '../actions/authentication';\nimport { useDispatch } from 'react-redux';\nimport {\n  Redirect\n } from \"react-router-dom\";\n\nconst Login = () => {\n  const [emailaddress, setEmailaddress] = useState('');\n  const [password, setPassword] = useState('');\n  const [recoverPassword, setRecoverPassword] = useState(false);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const dispatch = useDispatch();\n\n  const login = e => {\n    \n    e.preventDefault();\n\n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + \"/login\";\n    var data = {\n        loginId: emailaddress,\n        password: password,\n        applicationId: process.env.REACT_APP_FUSIONAUTH_APPLICATION_ID\n    };\n    \n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        dispatch( setUser(response) );\n        setLoggedIn(true);\n      }).catch(error => {\n        console.error(\"Login failed! (%s)\", error.message);\n        setLoggedIn(false);\n    });\n  };\n  \n  const recover = e => {\n    e.preventDefault();\n    \n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + \"/user/forgot-password\"\n    var data = {\n      loginId: emailaddress,\n    };\n\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        console.log(response);\n        return true;\n      }).catch(error => {\n        return false;\n      });\n\n    // do login here\n  };\n\n  const renderLogin = () => {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\n        <div className=\"px-8 py-6 mt-4 text-left bg-white shadow-lg\">\n          <h3 className=\"text-2xl font-bold text-center\">Login</h3>\n          <form>\n            <label className=\"block\" htmlFor=\"emailaddress\">Email</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              autoCapitalize=\"off\"\n              placeholder=\"email\"\n              name=\"emailaddress\"\n              required\n              onChange={e => setEmailaddress(e.target.value)}\n            />\n\n            <label className=\"block\" htmlFor=\"password\">Wachtwoord</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              type=\"password\"\n              placeholder=\"Wachtwoord\"\n              name=\"password\"\n              required\n              onChange={e => setPassword(e.target.value)}\n            />\n          \n            <div className=\"flex items-baseline justify-between\">\n                <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={login}>Login</button>\n                <button className=\"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={()=>setRecoverPassword(true)}>Wachtwoord vergeten</button>\n            </div>\n          </form>\n        </div>\n      </div>)\n  }\n  \n  const renderRecoverPassword = () => {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\n        <div className=\"px-8 py-6 mt-4 text-left bg-white shadow-lg\">\n          <h3 className=\"text-2xl font-bold text-center\">Wachtwoord herstellen</h3>\n          <form>\n            <label className=\"block\" htmlFor=\"emailaddress\">Email</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              autoCapitalize=\"off\"\n              placeholder=\"Email\"\n              name=\"emailaddress\"\n              required\n              onChange={e => setEmailaddress(e.target.value)}\n            />\n          \n            <div className=\"flex items-baseline justify-between\">\n                <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={recover}>Herstel</button>\n                <button className=\"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={()=>setRecoverPassword(false)}>Annuleer</button>\n            </div>\n          </form>\n        </div>\n      </div>)\n  }\n  const renderRedirect = () => {\n    return (\n        <Redirect to=\"/\" />\n    );\n  }\n \n  if (loggedIn) {\n    return renderRedirect();\n  }\n\n  return recoverPassword ? renderRecoverPassword() : renderLogin();\n};\n\nexport default Login;","import './Filterbar.css';\nimport { IconButtonClose } from '../IconButtons.jsx';\n\nfunction ModalBox({closeFunction, children}) {\n  return (\n    <div className=\"modalbox-bg\" onClick={() => closeFunction(false)}>\n      <div className=\"modalbox\" onClick={e=>e.stopPropagation()}>\n        <div className=\"absolute absolute top-0 right-0\">\n          <IconButtonClose onClick={() => closeFunction(false)} />\n        </div>\n        <div className=\"grid-cols-4\" >\n          { children }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ModalBox;","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ModalBox from './ModalBox.jsx';\nimport './Filterbar.css';\n\nfunction FilteritemGebieden() {\n  const dispatch = useDispatch()\n\n  const gebieden = useSelector(state => {\n    return (state.metadata && state.metadata.gebieden) ? state.metadata.gebieden : [];\n  });\n  \n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : \"\";\n  });\n  \n  let [showSelect, setShowSelect] = useState(false);\n  \n  const setFilterGebied = (gebied) => {\n    dispatch({\n      type: 'SET_FILTER_GEBIED',\n      payload: gebied\n    })\n  }\n  \n  const renderSelectGebieden = (gebieden) => {\n    return (\n      <ModalBox closeFunction={setShowSelect}>\n        <div className=\"filter-form-selectie\">\n          <div className=\"filter-form-title\">Selecteer Gebied</div>\n            <div className=\"filter-form-values\">\n              { gebieden.map(a=>{\n                  if(filterGebied === a.gm_code) {\n                    return (<div key={'item-'+a.gm_code} className=\"form-item-selected form-item\" onClick={e=>{setShowSelect(false);setFilterGebied(a.gm_code)}}>{a.name}</div>)\n                  } else {\n                    return (<div key={'item-'+a.gm_code} className=\"form-item\" onClick={e=>{setShowSelect(false);setFilterGebied(a.gm_code);}}>{a.name}</div>)\n                  }\n                })\n              }\n          </div>\n        </div>\n      </ModalBox>)\n  }\n  \n  let value = gebieden.find(item=>item.gm_code===filterGebied) || \"\";\n\n  return (\n      <div className=\"filter-item\" onClick={e=>{setShowSelect(!showSelect)}}>\n        <div className=\"filter-title\">Gebieden</div>\n        <div className=\"filter-value\">{value.name}</div>\n        { showSelect ? renderSelectGebieden(gebieden) : null }\n      </div>\n    )\n}\n\nexport default FilteritemGebieden;\n","import { useState } from 'react';\nimport './Filterbar.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ModalBox from './ModalBox.jsx';\n\nfunction Filterbar() {\n  const dispatch = useDispatch()\n  \n  const filterDatum = useSelector(state => {\n    return state.filter ? state.filter.datum : new Date().toISOString();\n  });\n  \n  let [showSelectDatum, setShowSelectDatum] = useState(false);\n  \n  const setFilterDatum = e => {\n    e.preventDefault();\n    \n    if (!e.target['validity'].valid) return;\n    \n    datum = (new Date(e.target.value)).toISOString();\n    dispatch({\n      type: 'SET_FILTER_DATUM',\n      payload: datum\n    })\n  }\n  \n  // https://webreflection.medium.com/using-the-input-datetime-local-9503e7efdce\n  function toDatetimeLocal(ISOString) {\n    const date = new Date(ISOString)\n    const\n      ten = function (i) {\n        return (i < 10 ? '0' : '') + i;\n      },\n      YYYY = date.getFullYear(),\n      MM = ten(date.getMonth() + 1),\n      DD = ten(date.getDate()),\n      HH = ten(date.getHours()),\n      II = ten(date.getMinutes()),\n      SS = ten(date.getSeconds())\n    ;\n    return YYYY + '-' + MM + '-' + DD + 'T' +\n             HH + ':' + II + ':' + SS;\n  };\n  \n  const renderSelectDatum = () => {\n    const value = toDatetimeLocal(filterDatum);\n    return (\n       <ModalBox className=\"min-width-48\" closeFunction={setShowSelectDatum}>\n       <div className=\"filter-form-selectie\">\n         <div className=\"filter-form-title\">Selecteer Datum</div>\n         <form className=\"h-12 w-auto flex flex-row border-solid border-4 border-light-blue-500 box-border\">\n           <input className=\"bg-transparent flex-2 flex-grow\" type=\"datetime-local\" value={value} onChange={setFilterDatum} />\n           <div className=\"flex-2\"/>\n         </form>\n         <div className=\"flex-none closebutton text-center mt-4\" onClick={e=>setShowSelectDatum(false)}>OK</div>\n       </div>\n      </ModalBox>);\n  }\n\n  let datum = new Date(filterDatum).toLocaleString();\n  \n  return (\n    <>\n      <div className=\"filter-item\" onClick={e=>{setShowSelectDatum(!showSelectDatum)}}>\n        <div className=\"filter-title\">Datum</div>\n        <div className=\"filter-value\">{datum}</div>\n      </div>\n      { showSelectDatum ? renderSelectDatum() : null }\n    </>\n  )\n}\n\nexport default Filterbar;\n","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ModalBox from './ModalBox.jsx';\nimport './Filterbar.css';\n\nfunction FilteritemAanbieders() {\n  const dispatch = useDispatch()\n  \n  const aanbieders = useSelector(state => {\n    return (state.metadata && state.metadata.aanbieders) ? state.metadata.aanbieders : [];\n  });\n  \n  const filterAanbieders = useSelector(state => {\n    return state.filter ? state.filter.aanbieders : \"\";\n  });\n  \n  let [showSelect, setShowSelect] = useState(false);\n  \n  const addToFilterAanbieders = (aanbieder) => {\n    dispatch({ type: 'ADD_TO_FILTER_AANBIEDERS', payload: aanbieder })\n  }\n  const removeFromFilterAanbieders = (aanbieder) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_AANBIEDERS', payload: aanbieder })\n  }\n  \n  const renderSelectAanbieders = (aanbieders) => {\n    return (\n      <ModalBox closeFunction={setShowSelect}>\n        <div className=\"filter-form-selectie\">\n            <div className=\"filter-form-title\">Selecteer Aanbieders</div>\n            <div className=\"filter-form-values\">\n            { aanbieders.map((a,i)=>{\n                let isSelected = filterAanbieders.includes(a.system_id);\n                if(isSelected) {\n                  return (<div key={'item-'+a.system_id} className=\"form-item-selected form-item\" onClick={e=>{ e.stopPropagation(); removeFromFilterAanbieders(a.system_id)}}>{a.name}</div>)\n                } else {\n                  return (<div key={'item-'+a.system_id} className=\"form-item\" onClick={e=>{ e.stopPropagation(); addToFilterAanbieders(a.system_id)}}>{a.name}</div>)\n                }\n              })\n            }\n            </div>\n        </div>\n      </ModalBox>\n    );\n  }\n  \n  let aanbiedertxt = \"\"\n  try {\n    let aantal = filterAanbieders.split(',').length\n    if(aantal>1 && aantal<aanbieders.length ) {\n      aanbiedertxt = filterAanbieders.split(\",\").length + \" aanbieders\";\n    } else if( aantal === 1) {\n      aanbiedertxt = filterAanbieders;\n    }\n  } catch(ex) {\n    aanbiedertxt = \"\";\n  }\n  \n  if(aanbiedertxt===\"\") { aanbiedertxt = \"Alle Aanbieders\" }\n  \n  return (\n      <div className=\"filter-item\" onClick={e=>{setShowSelect(!showSelect)}}>\n        <div className=\"filter-title\">Aanbieders</div>\n        <div className=\"filter-value\">{aanbiedertxt}</div>\n        { showSelect ? renderSelectAanbieders(aanbieders) : null }\n      </div>\n    )\n}\n\nexport default FilteritemAanbieders;\n","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ModalBox from './ModalBox.jsx';\n\nfunction FilteritemZones() {\n  const dispatch = useDispatch()\n  \n  const zones = useSelector(state => {\n    return (state.metadata && state.metadata.zones) ? state.metadata.zones : [];\n  });\n  \n\n  const filterZones = useSelector(state => {\n    return state.filter ? state.filter.zones : 0;\n  });\n  \n  let [showSelect, setShowSelect] = useState(false);\n  \n  const addToFilterZones = (zone) => {\n    dispatch({ type: 'ADD_TO_FILTER_ZONES', payload: zone })\n  }\n  const removeFromFilterZones = (zone) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_ZONES', payload: zone })\n  }\n  \n  \n  const renderZoneZones = (zones) => {\n    return (\n      <ModalBox closeFunction={setShowSelect}>\n        <div className=\"filter-form-selectie\">\n          <div className=\"filter-form-title\">Selecteer Zone</div>\n            <div className=\"filter-form-values\">\n              { zones.map(a=>{\n                  let isSelected = filterZones.includes(a.zone_id);\n                  if(isSelected) {\n                    return (<div key={'item-'+a.zone_id} className=\"form-item-selected form-item\" onClick={e=>{ e.stopPropagation(); removeFromFilterZones(a.zone_id)}}>{a.name}</div>)\n                  } else {\n                    return (<div key={'item-'+a.zone_id} className=\"form-item\" onClick={e=>{ e.stopPropagation(); addToFilterZones(a.zone_id)}}>{a.name}</div>)\n                  }\n                })\n              }\n          </div>\n        </div>\n      </ModalBox>)\n  }\n  \n  let zonetxt = \"\"\n  try {\n    let aantal = filterZones.split(',').length\n    if(aantal>1 && aantal<zones.length ) {\n      zonetxt = filterZones.split(\",\").length + \" zones\";\n    } else if( aantal === 1) {\n      zonetxt = filterZones;\n    }\n  } catch(ex) {\n    zonetxt = \"\";\n  }\n  \n  if(zonetxt===\"\") { zonetxt = \"Alle Zones\" }\n  \n  return (\n      <div className=\"filter-item\" onClick={e=>{setShowSelect(!showSelect)}}>\n        <div className=\"filter-title\">Zones</div>\n        <div className=\"filter-value\">{zonetxt}</div>\n        { showSelect ? renderZoneZones(zones) : null }\n      </div>\n    )\n}\n\nexport default FilteritemZones;","import './Filterbar.css';\nimport FilteritemGebieden from './FilteritemGebieden.jsx';\nimport FilteritemDatum from './FilteritemDatum.jsx';\nimport FilteritemAanbieders from './FilteritemAanbieders.jsx';\nimport FilteritemZones from './FilteritemZones.jsx';\n\nfunction Filterbar() {\n  return (\n    <div className=\"box-border p-2 pb-0\">\n      <div className=\"flex bg-gray-400 rounded-lg p-2 w-full grid grid-cols-4 gap-4\">\n        <FilteritemGebieden />\n        <FilteritemZones />\n        <FilteritemDatum />\n        <FilteritemAanbieders />\n      </div>\n    </div>\n    )\n}\n\nexport default Filterbar;\n","const cPublicAanbieders = [\n    { value:\"cykl\", name:\"Cykl\" },\n    { value:\"flickbike\", name:\"Flickbike\" },\n    { value:\"donkey\", name:\"Donkey\" },\n    { value:\"mobike\", name:\"Mobike\" },\n    { value:\"htm\", name:\"HTM\" },\n    { value:\"gosharing\", name:\"GO\" },\n    { value:\"check\", name:\"CHECK\" },\n    { value:\"felyx\", name:\"Felyx\" },\n    { value:\"deelfietsnederland\", name:\"Deelfiets\" },\n    { value:\"keobike\", name:\"Keobike\" },\n    { value:\"lime\", name:\"Lime\" },\n    { value:\"baqme\", name:\"BAQME\" },\n    { value:\"cargoroo\", name:\"Cargoroo\" },\n    { value:\"uwdeelfiets\", name:\"uwdeelfiets\" },\n    { value:\"hely\", name:\"Hely\" }\n  ];\n  \nconst cPublicGebieden = [\n  { gm_code:\"\", name:\"Alle Gebieden\" }, { gm_code:\"GM0518\", name:\"'s-Gravenhage\" }, { gm_code:\"GM0796\", name:\"'s-Hertogenbosch\" }, { gm_code:\"GM0613\", name:\"Albrandswaard\" }, { gm_code:\"GM0141\", name:\"Almelo\" }, { gm_code:\"GM0034\", name:\"Almere\" }, { gm_code:\"GM0484\", name:\"Alphen aan den Rijn\" }, { gm_code:\"GM0307\", name:\"Amersfoort\" }, { gm_code:\"GM0362\", name:\"Amstelveen\" }, { gm_code:\"GM0363\", name:\"Amsterdam\" }, { gm_code:\"GM0200\", name:\"Apeldoorn\" }, { gm_code:\"GM0202\", name:\"Arnhem\" }, { gm_code:\"GM0106\", name:\"Assen\" }, { gm_code:\"GM0489\", name:\"Barendrecht\" }, { gm_code:\"GM0203\", name:\"Barneveld\" }, { gm_code:\"GM0373\", name:\"Bergen (NH\" }, { gm_code:\"GM0753\", name:\"Best\" }, { gm_code:\"GM0375\", name:\"Beverwijk\" }, { gm_code:\"GM0377\", name:\"Bloemendaal\" }, { gm_code:\"GM0758\", name:\"Breda\" }, { gm_code:\"GM0312\", name:\"Bunnik\" }, { gm_code:\"GM0313\", name:\"Bunschoten\" }, { gm_code:\"GM0502\", name:\"Capelle aan den IJssel\" }, { gm_code:\"GM0310\", name:\"De Bilt\" }, { gm_code:\"GM0736\", name:\"De Ronde Venen\" }, { gm_code:\"GM0503\", name:\"Delft\" }, { gm_code:\"GM0150\", name:\"Deventer\" }, { gm_code:\"GM0384\", name:\"Diemen\" }, { gm_code:\"GM0505\", name:\"Dordrecht\" }, { gm_code:\"GM0228\", name:\"Ede\" }, { gm_code:\"GM0772\", name:\"Eindhoven\" }, { gm_code:\"GM0153\", name:\"Enschede\" }, { gm_code:\"GM0232\", name:\"Epe\" }, { gm_code:\"GM1771\", name:\"Geldrop-Mierlo\" }, { gm_code:\"GM1942\", name:\"Gooise Meren\" }, { gm_code:\"GM0014\", name:\"Groningen\" }, { gm_code:\"GM0392\", name:\"Haarlem\" }, { gm_code:\"GM0394\", name:\"Haarlemmermeer\" }, { gm_code:\"GM0243\", name:\"Harderwijk\" }, { gm_code:\"GM0246\", name:\"Heerde\" }, { gm_code:\"GM0794\", name:\"Helmond\" }, { gm_code:\"GM0164\", name:\"Hengelo\" }, { gm_code:\"GM0798\", name:\"Hilvarenbeek\" }, { gm_code:\"GM0402\", name:\"Hilversum\" }, { gm_code:\"GM0353\", name:\"IJsselstein\" }, { gm_code:\"GM0166\", name:\"Kampen\" }, { gm_code:\"GM0542\", name:\"Krimpen aan den IJssel\" }, { gm_code:\"GM1621\", name:\"Lansingerland\" }, { gm_code:\"GM0080\", name:\"Leeuwarden\" }, { gm_code:\"GM1916\", name:\"Leidschendam-Voorburg\" }, { gm_code:\"GM0327\", name:\"Leusden\" }, { gm_code:\"GM0809\", name:\"Loon op Zand\" }, { gm_code:\"GM0556\", name:\"Maassluis\" }, { gm_code:\"GM1842\", name:\"Midden-Delfland\" }, { gm_code:\"GM1952\", name:\"Midden-Groningen\" }, { gm_code:\"GM0356\", name:\"Nieuwegein\" }, { gm_code:\"GM0267\", name:\"Nijkerk\" }, { gm_code:\"GM0268\", name:\"Nijmegen\" }, { gm_code:\"GM1930\", name:\"Nissewaard\" }, { gm_code:\"GM0820\", name:\"Nuenen, Gerwen en Nederwetten\" }, { gm_code:\"GM0302\", name:\"Nunspeet\" }, { gm_code:\"GM0826\", name:\"Oosterhout\" }, { gm_code:\"GM0431\", name:\"Oostzaan\" }, { gm_code:\"GM1926\", name:\"Pijnacker-Nootdorp\" }, { gm_code:\"GM0273\", name:\"Putten\" }, { gm_code:\"GM0597\", name:\"Ridderkerk\" }, { gm_code:\"GM0603\", name:\"Rijswijk\" }, { gm_code:\"GM1674\", name:\"Roosendaal\" }, { gm_code:\"GM0599\", name:\"Rotterdam\" }, { gm_code:\"GM0606\", name:\"Schiedam\" }, { gm_code:\"GM0848\", name:\"Son en Breugel\" }, { gm_code:\"GM0855\", name:\"Tilburg\" }, { gm_code:\"GM1730\", name:\"Tynaarlo\" }, { gm_code:\"GM0344\", name:\"Utrecht\" }, { gm_code:\"GM1581\", name:\"Utrechtse Heuvelrug\" }, { gm_code:\"GM0861\", name:\"Veldhoven\" }, { gm_code:\"GM0622\", name:\"Vlaardingen\" }, { gm_code:\"GM0865\", name:\"Vught\" }, { gm_code:\"GM0866\", name:\"Waalre\" }, { gm_code:\"GM0867\", name:\"Waalwijk\" }, { gm_code:\"GM0289\", name:\"Wageningen\" }, { gm_code:\"GM0629\", name:\"Wassenaar\" }, { gm_code:\"GM1960\", name:\"West Betuwe\" }, { gm_code:\"GM1783\", name:\"Westland\" }, { gm_code:\"GM0637\", name:\"Zoetermeer\" }, { gm_code:\"GM0642\", name:\"Zwijndrecht\" }, { gm_code:\"GM0193\", name:\"Zwolle\" }\n]\n\nvar store_gebiedenaanbieders = undefined;\n\nconst isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nvar timerid_gebiedenaanbieders = undefined;\n\nconst updateGebiedenAanbieders = ()  => {\n  let delay = 5 * 1000;\n  try {\n    if(undefined===store_gebiedenaanbieders) {\n      console.log(\"no redux state available yet - skipping metadata update\");\n      return false;\n    }\n    \n    const state = store_gebiedenaanbieders.getState();\n    if(!isLoggedIn(state)) {\n      // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n      store_gebiedenaanbieders.dispatch({ type: 'SET_GEBIEDEN', payload: cPublicGebieden});\n      \n      // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n      store_gebiedenaanbieders.dispatch({ type: 'SET_AANBIEDERS', payload: cPublicAanbieders});\n    } else {\n      let url=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\";\n      let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      \n      fetch(url, options).then((response) => {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n\n        response.json()\n          .then((metadata) => {\n            // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n            // console.log(\"dispatch gebieden \", metadata.municipalities);\n            store_gebiedenaanbieders.dispatch({ type: 'SET_GEBIEDEN', payload: metadata.municipalities});\n            \n            // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n            // console.log(\"dispatch aanbieders \", metadata.operators);\n            store_gebiedenaanbieders.dispatch({ type: 'SET_AANBIEDERS', payload: metadata.operators});\n          })\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n        });\n        return true;\n      }\n  } catch(ex) {\n    console.error(\"Unable to update gebieden\", ex)\n    delay = 5 * 1000;\n    \n    return false;\n  } finally {\n    timerid_gebiedenaanbieders = setTimeout(updateGebiedenAanbieders, delay);\n  }\n}\n\nexport const forceUpdateGebiedenAanbieders = () => {\n  if(undefined!==timerid_gebiedenaanbieders) { clearTimeout(timerid_gebiedenaanbieders); }\n  updateGebiedenAanbieders();\n}\n\nexport const initUpdateGebiedenAanbieders = (_store) => {\n  store_gebiedenaanbieders = _store;\n}\n\nforceUpdateGebiedenAanbieders();\n\n","var store_zones = undefined;\n\nconst isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nvar timerid_zones = undefined;\n\nconst updateZones = ()  => {\n  let delay = 5 * 1000;\n  try {\n    if(undefined===store_zones) {\n      console.log(\"no redux state available yet - skipping metadata update\");\n      return false;\n    }\n    \n    const state = store_zones.getState();\n    if(!isLoggedIn(state)||state.filter.gebied===\"\") {\n      store_zones.dispatch({ type: 'SET_ZONES_LIST', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_GEODATA', payload: []});\n    } else {\n      // https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=GM0518\n      let url_zones=\"https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=\"+state.filter.gebied;\n      // let url_geodata=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\"\n      // https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=34217&include_geojson=true\n      let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      \n      fetch(url_zones, options).then((response) => {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n\n        response.json()\n          .then((metadata) => {\n            // items: { \"municipality\": \"GM0785\", \"name\": \"Goirle\", \"owner\": null, \"zone_id\": 34278, \"zone_type\": \"municipality\"}\n            store_zones.dispatch({ type: 'SET_ZONES', payload: metadata.zones});\n          })\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n        });\n      }\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n    delay = 5 * 1000;\n  } finally {\n    timerid_zones = setTimeout(updateZones, delay);\n  }\n}\n\nexport const forceUpdateZones = () => {\n  if(undefined!==timerid_zones) { clearTimeout(timerid_zones); }\n  updateZones();\n}\n\nexport const initUpdateZones = (_store) => {\n  console.log(\"initUpdateZones\")\n  store_zones = _store;\n}\n\nforceUpdateZones();\n\n","import { useEffect, useRef } from 'react';\nimport {\n BrowserRouter as Router,\n Switch,\n Route\n} from \"react-router-dom\";\n\nimport Menu from './components/Menu.jsx';\nimport Map from './pages/Map.jsx';\nimport Demo from './pages/Demo.jsx';\nimport Login from './pages/Login.jsx';\nimport Filterbar from './components/Filterbar/Filterbar.jsx';\nimport moment from 'moment';\nimport { store } from './AppProvider.js';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport useInterval from './customHooks/useInterval.js';\n\nimport { initUpdateGebiedenAanbieders, forceUpdateGebiedenAanbieders } from './poll-api/pollMetadataGebiedenAanbieders.js';\nimport { initUpdateZones, forceUpdateZones } from './poll-api/pollMetadataZones.js';\n\nimport './App.css';\n\nfunction App() {\n  const mapContainer = useRef(null);\n\n  const dispatch = useDispatch()\n  \n  // let [json, setJson] = useState(false);\n  // let [timestamp, setTimestamp] = useState(false);\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  const userdata = useSelector(state => {\n    return state.authentication.user_data ;\n  });\n\n  const filter = useSelector(state => {\n    if(!isLoggedIn||!state.filter)  {\n      return null;\n    }\n    \n    return state.filter;\n  });\n\n  const showfilter = useSelector(state => {\n    return state.filter ? state.filter.visible : false;\n  });\n\n  const convertDurationToColor = (duration) => {\n    if (duration <= 60) {\n      return \"#38ff71\";\n    }\n    if (duration <= 24 * 60) {\n      return \"#008c28\";\n    }\n    if (duration <= 24 * 60 * 4) {\n      return \"#fff700\";\n    }\n    return \"#cc0000\";\n  }\n\n  let url = \"https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space\";\n  let options = {};\n  if(null!==filter) {\n    let aanbiedersfilter = filter.aanbieders!==\"\"?\"&operators=\" + filter.aanbieders:\"\";\n    \n    let ts = new Date().toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    // url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp=2021-10-22T15:46:20Z\"+aanbiedersfilter; // + \"&zone_ids=34234\";\n    url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp=\"+ts+aanbiedersfilter; // + \"&zone_ids=34234\";\n    options = { headers : { \"authorization\": \"Bearer \" + userdata.token }}\n  }\n\n  const fetchVehiclesInPublicSpace = () => {\n    fetch(url, options).then(function(response) {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n\n      response.json().then(function(vehicles) {\n        if(isLoggedIn) {\n          vehicles = vehicles.park_events\n        }\n        let geoJson = {\n           \"type\":\"FeatureCollection\",\n           \"crs\":{\n              \"type\":\"name\",\n              \"properties\":{\n                 \"name\":\"urn:ogc:def:crs:OGC:1.3:CRS84\"\n              }\n           },\n           \"features\":[]\n        }\n        \n        const md5 = require('md5');\n        var current_time = moment();\n        vehicles.forEach(v => {\n          let in_public_space_since = isLoggedIn ? v.start_time : v.in_public_space_since;\n\n          var minutes = current_time.diff(moment(in_public_space_since), 'minutes');\n          const color = convertDurationToColor(minutes);\n          \n          let feature = {\n             \"type\":\"Feature\",\n             \"properties\":{\n                \"id\":md5(v.location.latitude+v.location.longitude),\n                \"system_id\": v.system_id,\n                \"in_public_space_since\": in_public_space_since,\n                \"color\": color\n             },\n             \"geometry\":{\n                \"type\":\"Point\",\n                \"coordinates\":[\n                   v.location.longitude,\n                   v.location.latitude,\n                   0.0\n                ]\n             }\n          }\n\n          geoJson.features.push(feature);\n          // new maplibregl.Marker({color: \"#FF0000\"})\n          //   .setLngLat([x.location.longitude, x.location.latitude])\n          //   .addTo(map.current);\n          //\n          // return;\n        })\n        \n        dispatch({\n          type: 'SET_VEHICLES',\n          payload: geoJson\n        })\n        \n        // setJson(json);\n        // setTimestamp(new Date());\n      }).catch(ex=>{\n        console.error(\"unable to decode JSON\");\n        // setJson(false);\n      });\n    }).catch(ex=>{\n      console.error(\"fetch error - unable to fetch JSON from %s\", url);\n      // setJson(false);\n    });\n  }\n  \n  useEffect(()=>{\n    initUpdateGebiedenAanbieders(store);\n    forceUpdateGebiedenAanbieders();\n  });\n  \n  useEffect(()=>{\n    initUpdateZones(store);\n    forceUpdateZones();\n  });\n\n  useInterval(() => {\n    fetchVehiclesInPublicSpace();\n  }, 30 * 1000);// every 30 seconds\n\n  useEffect(x => {\n    fetchVehiclesInPublicSpace();\n  })\n  \n  return (\n    <Router>\n       <div className=\"app\">\n          <div className=\"gui-layer\">\n            <Menu />\n            { isLoggedIn && showfilter ? <Filterbar /> : null }\n            <Switch>\n              <Route path=\"/demo\">\n               <Demo />\n              </Route>\n              <Route path=\"/login\">\n                 <Login />\n              </Route>\n              <Route path=\"/\">\n               <Map mapContainer={mapContainer}/>\n              </Route>\n            </Switch>\n          </div>\n          <div ref={mapContainer} className=\"map-layer\"></div>\n        </div>\n     </Router>\n  );\n}\n\nexport default App;\n","import React, { Component } from 'react';\n// import { bindActionCreators } from 'redux';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { connect } from 'react-redux';\n\nimport moment from 'moment';\nimport thunk from 'redux-thunk';\n\nimport appReducer from './reducers';\nimport App from './App';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n// Get persistentState from localStorage\nconst persistedState = localStorage.getItem('CROWDD_reduxState')\n  ? JSON.parse(localStorage.getItem('CROWDD_reduxState'))\n  : {}\n\n\nexport const store = createStore(\n  appReducer,\n  persistedState,\n  composeEnhancers(applyMiddleware(thunk)),\n);\n\n// Store Redux state into localStorage\nstore.subscribe(() => {\n  const storeState = store.getState();\n  const storeStateToSaveInLocalStorage = {\n    lastUpdate: moment().unix(),\n    authentication: storeState.authentication,\n    filter: storeState.filter\n  }\n  localStorage.setItem('CROWDD_reduxState', JSON.stringify(storeStateToSaveInLocalStorage))\n})\n\nclass AppProvider extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <App content={this.props.content} />\n      </Provider>\n    )\n  }\n}\n\nfunction connectWithStore(store, WrappedComponent, ...args) {\n  let ConnectedWrappedComponent = connect(...args)(WrappedComponent)\n  return function (props) {\n    return <ConnectedWrappedComponent {...props} store={store} />\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    // config: getConfig(state),\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    // actions: bindActionCreators(actions, dispatch),\n  }\n}\n\nexport default AppProvider = connectWithStore(\n  store,\n  AppProvider,\n  mapStateToProps,\n  mapDispatchToProps\n)\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppProvider from './AppProvider';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}