(this["webpackJsonpdashboarddeelmobiliteit-app"]=this["webpackJsonpdashboarddeelmobiliteit-app"]||[]).push([[0],{44:function(e,t,n){},51:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(17),o=n.n(a),i=(n(44),n(23)),l=n(33),s=n(34),u=n(39),d=n(38),b=n(6),h=n(12),j=n(14),f=n.n(j),p=n(36),O={data:null};var m={user_data:null};var x=Object(h.b)({vehicles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VEHICLES":var n=t.payload;return{data:n};case"SET_VEHICLE":var c=t.payload;if(!c.uuid)return{};var r=e.data.filter((function(e){return e.uuid!==c.uuid}));return r.push(c),{data:r};case"CLEAR_VEHICLES":return{data:[]};default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":var n=t.payload;return{user_data:n};case"CLEAR_USER":return{user_data:null};default:return e}}}),g=n(10),v=n(3),_=(n(51),n(1));var S=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return!!e.authentication.user_data}));return Object(_.jsxs)("ul",{className:"flex",children:[Object(_.jsx)("li",{className:"mr-6",children:Object(_.jsx)(g.b,{className:"text-blue-500 hover:text-blue-800",to:"/",children:"Home"})}),Object(_.jsx)("li",{className:"mr-6",children:Object(_.jsx)(g.b,{className:"text-blue-500 hover:text-blue-800",to:"/demo",children:"Demo"})}),Object(_.jsx)("li",{className:"mr-6",children:Object(_.jsx)(g.b,{className:"text-blue-500 hover:text-blue-800",to:"/map/park",children:"Parkeerdata"})}),t?Object(_.jsx)("li",{className:"mr-6",children:Object(_.jsx)(g.b,{className:"text-blue-500 hover:text-blue-800",onClick:function(){t&&e({type:"CLEAR_USER",payload:null})},to:"/",children:"Log uit"})}):Object(_.jsx)("li",{className:"mr-6",children:Object(_.jsx)(g.b,{className:"text-blue-500 hover:text-blue-800",to:"/login",children:"Log in"})})]})},E=n(9),y=n(22),C=n.n(y);n(74);var N=function(e){var t=Object(b.d)((function(e){return e.vehicles?e.vehicles.data:null})),n=Object(c.useRef)(null),r=Object(c.useState)(5.102406),a=Object(E.a)(r,1)[0],o=Object(c.useState)(52.0729252),i=Object(E.a)(o,1)[0],l=Object(c.useState)(14),s=Object(E.a)(l,1)[0],u=Object(c.useRef)(null);return Object(c.useEffect)((function(){u.current||(u.current=new C.a.Map({container:n.current,style:"mapbox://styles/mapbox/streets-v11",accessToken:"pk.eyJ1Ijoic3ZlbjRhbGwiLCJhIjoiY2t2MHR0YnZhMGh3NzJ2cGFuYWI3ZzVnaCJ9.lvPcFN0y5Z25UPt5xB9rFw",center:[a,i],zoom:s}),u.current.addControl(new C.a.NavigationControl,"top-right"),u.current.on("load",(function(){})))}),[t,a,i,s]),Object(c.useEffect)((function(){!function(e){u.current&&(e&&(u.current.getSource("vehicles")||u.current.addSource("vehicles",{type:"geojson",data:e})))}(t)}),[t]),Object(c.useEffect)((function(){!function(e){u.current&&(e&&(u.current.getLayer("vehicles-heatmap")||(u.current.addLayer({id:"vehicles-heatmap",type:"heatmap",source:"vehicles",maxzoom:9,paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}}),u.current.addLayer({id:"vehicles-point",type:"circle",source:"vehicles",minzoom:7,paint:{"circle-radius":["interpolate",["linear"],["zoom"],12,1,16,["*",2,["get","amount"]]],"circle-opacity":["interpolate",["linear"],["zoom"],7,0,8,1],"circle-color":["get","color"]}}),console.log("MAP layers added"))))}(t)}),[t]),Object(_.jsx)("div",{className:"Map",children:Object(_.jsx)("div",{ref:n,className:"map"})})},T=n.p+"static/media/logo.6ce24c58.svg";var R=function(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])};n(75);var P=function(){var e="https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space",t=Object(c.useState)(!1),n=Object(E.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=Object(E.a)(o,2),l=i[0],s=i[1];return R((function(){fetch(e).then((function(e){e.json().then((function(e){a(e),s(new Date)})).catch((function(e){console.error("unable to decode JSON"),a(!1)}))})).catch((function(t){console.error("fetch error - unable to fetch JSON from %s",e),a(!1)}))}),5e3),Object(_.jsx)("div",{className:"Demo",children:Object(_.jsxs)("header",{className:"Demo-header",children:[Object(_.jsx)("img",{src:T,className:"Demo-logo",alt:"logo"}),Object(_.jsxs)("p",{children:["Got ",Object.keys(r).length," vehicles at ",l?l.toLocaleTimeString():"-/-"]}),Object(_.jsx)("a",{className:"Demo-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},w=function(){var e=Object(c.useState)(""),t=Object(E.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),o=Object(E.a)(a,2),i=o[0],l=o[1],s=Object(c.useState)(!1),u=Object(E.a)(s,2),d=u[0],h=u[1],j=Object(c.useState)(!1),f=Object(E.a)(j,2),p=f[0],O=f[1],m=Object(b.c)(),x=function(e){e.preventDefault();var t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic3ZlbjRhbGwiLCJhIjoiY2t2MHR0YnZhMGh3NzJ2cGFuYWI3ZzVnaCJ9.lvPcFN0y5Z25UPt5xB9rFw"}).REACT_APP_FUSIONAUTH_SERVER+"/login",c={loginId:n,password:i,applicationId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic3ZlbjRhbGwiLCJhIjoiY2t2MHR0YnZhMGh3NzJ2cGFuYWI3ZzVnaCJ9.lvPcFN0y5Z25UPt5xB9rFw"}).REACT_APP_FUSIONAUTH_APPLICATION_ID};fetch(t,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){m({type:"SET_USER",payload:e}),O(!0)})).catch((function(e){O(!1)}))},g=function(e){e.preventDefault();var t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic3ZlbjRhbGwiLCJhIjoiY2t2MHR0YnZhMGh3NzJ2cGFuYWI3ZzVnaCJ9.lvPcFN0y5Z25UPt5xB9rFw"}).REACT_APP_FUSIONAUTH_SERVER+"/user/forgot-password",c={loginId:n};return fetch(t,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),!0})).catch((function(e){return!1}))};return p?Object(_.jsx)(v.a,{to:"/"}):d?Object(_.jsx)("div",{class:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(_.jsxs)("div",{class:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(_.jsx)("h3",{class:"text-2xl font-bold text-center",children:"Wachtwoord herstellen"}),Object(_.jsxs)("form",{children:[Object(_.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(_.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"Email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value)}}),Object(_.jsxs)("div",{class:"flex items-baseline justify-between",children:[Object(_.jsx)("button",{class:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:g,children:"Herstel"}),Object(_.jsx)("button",{class:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){return h(!1)},children:"Annuleer"})]})]})]})}):Object(_.jsx)("div",{class:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(_.jsxs)("div",{class:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(_.jsx)("h3",{class:"text-2xl font-bold text-center",children:"Login"}),Object(_.jsxs)("form",{children:[Object(_.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(_.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value)}}),Object(_.jsx)("label",{class:"block",htmlFor:"password",children:"Wachtwoord"}),Object(_.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",type:"password",placeholder:"Wachtwoord",name:"password",required:!0,onChange:function(e){return l(e.target.value)}}),Object(_.jsxs)("div",{class:"flex items-baseline justify-between",children:[Object(_.jsx)("button",{class:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:x,children:"Login"}),Object(_.jsx)("button",{class:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){return h(!0)},children:"Wachtwoord vergeten"})]})]})]})})};n(76);var I=function(){var e="https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space",t=Object(b.c)(),r=function(){fetch(e).then((function(e){e.json().then((function(e){var c={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},r=n(77),a=f()();e.forEach((function(e){var t,n=a.diff(f()(e.in_public_space_since),"minutes"),o=(t=n)<=60?"#38ff71":t<=1440?"#008c28":t<=5760?"#fff700":"#cc0000",i={type:"Feature",properties:{id:r(e.location.latitude+e.location.longitude),systemid:e.systemid,in_public_space_since:e.in_public_space_since,color:o},geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude,0]}};c.features.push(i)})),t({type:"SET_VEHICLES",payload:c})})).catch((function(e){console.error("unable to decode JSON")}))})).catch((function(t){console.error("fetch error - unable to fetch JSON from %s",e)}))};return R((function(){r()}),3e4),Object(c.useEffect)((function(e){r()})),Object(_.jsx)(g.a,{children:Object(_.jsxs)("div",{className:"App",children:[Object(_.jsx)(S,{}),Object(_.jsxs)(v.d,{children:[Object(_.jsx)(v.b,{path:"/demo",children:Object(_.jsx)(P,{})}),Object(_.jsx)(v.b,{path:"/login",children:Object(_.jsx)(w,{})}),Object(_.jsx)(v.b,{path:"/",children:Object(_.jsx)(N,{})})]})]})})},A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.c,D=localStorage.getItem("CROWDD_reduxState")?JSON.parse(localStorage.getItem("CROWDD_reduxState")):{},F=Object(h.d)(x,D,A(Object(h.a)(p.a)));F.subscribe((function(){var e=F.getState(),t={lastUpdate:f()().unix(),authentication:e.authentication};localStorage.setItem("CROWDD_reduxState",JSON.stringify(t))}));var L=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(_.jsx)(b.a,{store:F,children:Object(_.jsx)(I,{content:this.props.content})})}}]),n}(c.Component);var J=L=function(e,t){for(var n=arguments.length,c=new Array(n>2?n-2:0),r=2;r<n;r++)c[r-2]=arguments[r];var a=b.b.apply(void 0,c)(t);return function(t){return Object(_.jsx)(a,Object(i.a)(Object(i.a)({},t),{},{store:e}))}}(F,L,(function(e){return{}}),(function(e){return{}})),H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))};o.a.render(Object(_.jsx)(r.a.StrictMode,{children:Object(_.jsx)(J,{})}),document.getElementById("root")),H()}},[[80,1,2]]]);
//# sourceMappingURL=main.ed6b9538.chunk.js.map