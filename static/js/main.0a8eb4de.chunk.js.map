{"version":3,"sources":["reducers/metadata.js","reducers/vehicles.js","reducers/filter.js","reducers/authentication.js","reducers/zones_geodata.js","reducers/index.js","reducers/last_update.js","components/IconButtons.jsx","components/Menu.jsx","components/Map/layers/index.js","components/Map/layers/vehicles-heatmap.js","components/Map/layers/vehicles-point.js","components/Map/layers/vehicles-clusters.js","components/Map/layers/vehicles-clusters-count.js","components/Map/layers/vehicles-clusters-point.js","components/Map/layers/vehicles-heatmap-city-level.js","components/Map/layers/zones-geodata.js","components/Map/sources.js","components/Map/vehicle_marker.js","components/Map/Map.jsx","components/SlideBox/SlideBox.jsx","components/SelectLayer/SelectLayer.jsx","pages/Map.jsx","pages/Login.jsx","actions/authentication.js","actions/actionTypes.js","helpers/parkEvents.js","pages/Monitoring.jsx","components/Filterbar/ModalBox.jsx","components/Filterbar/FilteritemGebieden.jsx","images/calendar.svg","components/Filterbar/FilteritemDatum.jsx","components/Filterbar/FilteritemInterval.jsx","components/Filterbar/FilteritemAanbieders.jsx","components/Filterbar/FilteritemZones.jsx","components/Filterbar/FilteritemMarkers.jsx","components/Filterbar/FilteritemVoertuigTypes.jsx","components/Filterbar/Filterbar.jsx","components/Topbar/Topbar.jsx","poll-api/pollMetadataAccessControlList.js","poll-api/pollMetadataZonesgeodata.js","poll-api/pollMetadataZones.js","poll-api/pollTools.js","poll-api/pollParkingData.js","poll-api/pollTripData.js","App.js","AppProvider.js","reportWebVitals.js","index.js"],"names":["md5","require","initialState","aanbieders","gebieden","zones","vehicle_types","generateHslaColors","amount","colors","huedelta","Math","trunc","i","hue","lightness","saturation","push","data","visible","gebied","datum","Date","toISOString","intervalstart","intervalend","aanbiedersexclude","markersexclude","voertuigtypesexclude","user_data","filter","combineReducers","last_update","state","action","type","payload","metadata","current","length","map","aanbieder","idx","Object","assign","color","vehicles","vehicle","uuid","filtered","x","console","log","split","ex","includes","join","item","toString","authentication","user","zones_geodata","currentdata","IconButtonClose","props","className","height","id","version","viewBox","width","d","IconButtonFilter","xmlns","Menu","useState","document","location","pathname","pathName","setPathName","dispatch","useDispatch","isLoggedIn","useSelector","showfilter","useLocation","React","useEffect","to","onClick","e","layers","paint","layout","sources","initialMarker2","operatorColor","a","markers","durationIndicationColor","styleVehicleMarker","marker","svgElement","createElementNS","innerHTML","svg","setAttribute","value","canvas","createElement","XMLSerializer","serializeToString","win","window","URL","webkitURL","img","Image","blob","Blob","url","createObjectURL","src","decode","context","getContext","drawImage","revokeObjectURL","Uint8Array","getImageData","buffer","getVehicleMarkers","moment","locale","localization","subtract","fromNow","Map","mapContainer","lng","lat","zoom","counter","setCounter","zonesGeodataHash","setZonesGeodataHash","sourceHash","setSourceHash","useRef","maplibregl","container","style","accessToken","process","center","addControl","NavigationControl","showCompass","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","on","dragRotate","disable","touchZoomRotate","disableRotation","addImage","test","addOrUpdateSource","sourceName","sourceData","isStyleLoaded","doesSourceExist","getSource","hash","features","newSourceHashArray","setData","source","addSource","setTimeout","activeSource","getStyle","forEach","indexOf","removeLayer","getLayer","addLayer","addLayers","currentMap","layerName","vehicleProperties","properties","coordinates","geometry","slice","description","abs","lngLat","Popup","setLngLat","setHTML","system_id","in_public_space_since","format","addTo","getCanvas","cursor","initPopupLogic","SlideBox","containerRef","isHidden","setIsHidden","direction","ref","children","SelectLayer","setLayers","setActiveSource","data-type","Login","emailaddress","setEmailaddress","password","setPassword","recoverPassword","setRecoverPassword","errorMessage","setErrorMessage","loggedIn","setLoggedIn","login","preventDefault","loginId","applicationId","fetch","method","body","JSON","stringify","headers","then","res","json","response","catch","error","message","recover","htmlFor","autoCapitalize","placeholder","name","required","onChange","target","role","fetchParkEvents","provider","dateTime","formattedDateTime","options","token","ok","park_events","numberOfUniqueVehiclesAfterXIterations","getUniqueVehicleIds","dataset","uniqueVehicleIds","bike_id","Monitoring","fetchMultipleMomentsInTime","collectedParkEvents","val","key","ModalBox","closeFunction","stopPropagation","FilteritemGebieden","filterGebied","showSelect","setShowSelect","filterSearch","setFilterSearch","setFilterGebied","changeSearchText","clearSearchText","find","gm_code","filteredGebieden","toLowerCase","renderSelectGebieden","FilterItemDatum","filterDatum","setFilterDatum","newdt","clearIcon","calendarIcon","alt","add","title","FilterItemInterval","filterIntervalStart","filterIntervalEnd","useIntervalStart","setUseIntervalStart","showSelectInterval","setShowSelectInterval","setFilterInterval","valid","intervalStart","toLocaleString","intervalEnd","isStart","ISOString","date","ten","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","toDatetimeLocal","renderSelectInterval","FilteritemAanbieders","filterAanbiedersExclude","addTofilterAanbiedersExclude","excluded","handler","removeFromfilterAanbiedersExclude","cx","cy","r","fill","FilteritemZones","filterZones","removeFromFilterZones","zone","selectedzones","zonetxt","aantal","thezone","zone_id","isActive","filteredZones","renderSelectZones","FilteritemMarkers","fillcolor","filterMarkersExclude","addToFilterMarkersExclude","removeFromFilterMarkersExclude","FilteritemVoertuigTypes","voertuigtypes","filterVoertuigTypesExclude","Array","isArray","addToFilterVoertuigTypesExclude","voertuigtype","removeFromFilterVoertuigTypesExclude","baseClassName","extraclass","Filterbar","showinterval","left","FilteritemInterval","Topbar","cPublicAanbieders","cPublicGebieden","cPublicVoertuigTypes","store_accesscontrollist","undefined","timerid_gebiedenaanbieders","updateAccessControlList","delay","getState","municipalities","operators","types","forceUpdateAccessControlList","clearTimeout","store_zonesgeodata","timerid_zonesgeodata","updateZonesGeodata","url_zonesgeodata","geojson","zonedata","feature","forceUpdateZonesgeodata","store_zones","timerid_zones","updateZones","url_zones","forceUpdateZones","createFilterparameters","isParkingData","filterparams","candidates","municipality","filteritems","selectedaanbieders","ts","replace","ts1","ts2","isInvalid","store_parkingdata","timerid_parkingdata","recursive","updateParkingData","authenticationdata","geoJson","current_time","v","duration","start_time","minutes","diff","latitude","longitude","forceUpdateParkingData","store_tripdata","timerid_tripdata","updateTripData","trips","t","start_location","feature2","end_location","forceUpdateTripData","App","store","_store","initUpdateZonesgeodata","initUpdateAccessControlList","initUpdateParkingData","initUpdateTripData","renderMapElements","from","exact","path","showParkingData","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","persistedState","localStorage","getItem","parse","createStore","appReducer","applyMiddleware","thunk","subscribe","storeState","storeStateToSaveInLocalStorage","unix","setItem","AppProvider","content","this","Component","WrappedComponent","args","ConnectedWrappedComponent","connect","connectWithStore","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.0a8eb4de.chunk.js","sourcesContent":["const md5 = require('md5');\n\nconst initialState = {\n  aanbieders: [],\n  gebieden: [],\n  zones: [],\n  vehicle_types: [],\n}\n\n// utility function that creates a color palette\n// background: https://mika-s.github.io/javascript/colors/hsl/2017/12/05/generating-random-colors-in-javascript.html\nconst generateHslaColors = (amount) => {\n  \n  let colors = []\n  let huedelta = Math.trunc(360 / (amount+1))\n  let alpha = 1.0\n\n  for (let i = 0; i < amount; i++) {\n    let hue = i * huedelta\n    let lightness = i % 2 === 0 ? 35 : 65;\n    let saturation = i % 2 === 1 ? 40 : 60;\n    colors.push(`hsla(${hue},${saturation}%,${lightness}%,${alpha})`)\n  }\n\n  return colors\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_AANBIEDERS': {\n      let current = state.aanbieders ? state.aanbieders: [];\n      \n      // add colors (will be supplied by the API later)\n      const colors = generateHslaColors(action.payload.length)\n      const aanbieders = action.payload.map((aanbieder,idx)=>{\n        return Object.assign(aanbieder, {color: colors[idx]});\n      })\n      \n      if(md5(current)===md5(aanbieders)) { return state; }\n      \n      return {\n        ...state,\n        aanbieders\n      }\n    }\n    case 'SET_GEBIEDEN': {\n      let current = state.gebieden ? state.gebieden: [];\n    \n      if(md5(current)===md5(action.payload)) { return state; }\n    \n      return {\n        ...state,\n        gebieden: action.payload,\n      }\n    }\n    \n    case 'SET_ZONES': {\n      let current = state.zones ? state.zones: [];\n    \n      if(md5(current)===md5(action.payload)) { return state; }\n\n      return {\n          ...state,\n          zones: action.payload,\n      };\n    }\n\n    case 'SET_VEHICLE_TYPES': {\n      let current = state.vehicle_types ? state.vehicle_types: [];\n    \n      if(md5(current)===md5(action.payload)) { return state; }\n\n      return {\n          ...state,\n          vehicle_types: action.payload,\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  data: null\n}\n\nexport default function vehicles(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_VEHICLES': {\n      // console.log(\"Set Vehicles %o\", action.payload);\n      const vehicles = action.payload\n      return {\n        data: vehicles\n      }\n    }\n    case 'SET_VEHICLE': {\n      const vehicle = action.payload\n      // Validate input\n      if(! vehicle.uuid) {\n        return {}\n      }\n      // Remove changed vehicle\n      const filtered = state.data.filter(function(x) {\n        return x.uuid !== vehicle.uuid;\n      });\n      // Add vehicle to vehicles set\n      filtered.push(vehicle)\n      // Set store\n      return { data: filtered }\n    }\n    case 'CLEAR_VEHICLES': {\n      return {\n        data: []\n      }\n    }\n    default:\n      return state;\n  }\n\n}\n","const initialState = {\n  visible: false,\n  gebied: \"\",\n  zones: \"\",\n  datum: (new Date()).toISOString(),\n  intervalstart: (new Date()).toISOString(),\n  intervalend: (new Date()).toISOString(),\n  aanbiedersexclude: \"\",\n  markersexclude: \"\",\n  voertuigtypesexclude: \"\",\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_FILTER_VISIBLE': {\n      console.log('reducer filter set filter visible %s', action.payload)\n      return {\n          ...state,\n          visible: action.payload\n      };\n    }\n    case 'SET_FILTER_GEBIED': {\n      console.log('reducer filter set gebied to %s', action.payload)\n      return {\n          ...state,\n          gebied: action.payload,\n          zones: \"\"\n      };\n    }\n    case 'SET_FILTER_DATUM': {\n      console.log('reducer filter set datum to %s', action.payload)\n      return {\n          ...state,\n          datum: action.payload\n      };\n    }\n    case 'SET_FILTER_INTERVAL_START': {\n      console.log('reducer filter set interval start to %s', action.payload)\n      return {\n          ...state,\n          intervalstart: action.payload\n      };\n    }\n    case 'SET_FILTER_INTERVAL_END': {\n      console.log('reducer filter set interval end to %s', action.payload)\n      return {\n          ...state,\n          intervalend: action.payload\n      };\n    }\n    case 'ADD_TO_FILTER_ZONES': {\n      console.log('add item %s to zones filter %o', action.payload, state)\n      let zones = [];\n      if(state.zones) {\n        try {\n          zones = state.zones.split(\",\") || []\n        } catch(ex) {\n          zones = [];\n        }\n      }\n      if(!zones.includes(action.payload)) {\n        zones.push(action.payload);\n      }\n\n      return {\n        ...state,\n        zones: zones.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_ZONES': {\n      console.log('remove item %o from zones filter', action.payload)\n      let zones = state.zones.split(\",\") || [];\n      zones = zones.filter((item) => {return item.toString() !== action.payload.toString() });\n\n      return {\n          ...state,\n          zones: zones.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_ZONES': {\n      console.log('clear zones filter')\n\n      return {\n          ...state,\n          zones: ''\n      };\n    }\n    case 'ADD_TO_FILTER_MARKERS_EXCLUDE': {\n      let markersexclude = [];\n      try {\n        console.log('add item %s to markersexclude filter %o', action.payload, state)\n        if(state.markersexclude) {\n          try {\n            markersexclude = state.markersexclude.split(\",\") || []\n          } catch(ex) {\n            markersexclude = [];\n          }\n        }\n        if(!markersexclude.includes(action.payload)) {\n          markersexclude.push(action.payload);\n        }\n      } catch(ex) {\n        markersexclude = [];\n      }\n\n      return {\n        ...state,\n        markersexclude: markersexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_MARKERS_EXCLUDE': {\n      console.log('remove item %o from markersexclude filter', action.payload)\n      let markersexclude = [];\n      try {\n        markersexclude = state.markersexclude.split(\",\") || [];\n        markersexclude = markersexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        markersexclude = [];\n      }\n\n      return {\n          ...state,\n          markersexclude: markersexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_MARKERS_EXCLUDE': {\n      console.log('clear markersexclude filter')\n\n      return {\n          ...state,\n          markersexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      let voertuigtypesexclude = [];\n      try {\n        console.log('add item %s to voertuigtypesexclude filter %o', action.payload, state)\n        if(state.voertuigtypesexclude) {\n          try {\n            voertuigtypesexclude = state.voertuigtypesexclude.split(\",\") || []\n          } catch(ex) {\n            voertuigtypesexclude = [];\n          }\n        }\n        if(!voertuigtypesexclude.includes(action.payload)) {\n          voertuigtypesexclude.push(action.payload);\n        }\n      } catch(ex) {\n        voertuigtypesexclude = [];\n      }\n\n      return {\n        ...state,\n        voertuigtypesexclude: voertuigtypesexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      console.log('remove item %o from voertuigtypesexclude filter', action.payload)\n      let voertuigtypesexclude = [];\n      try {\n        voertuigtypesexclude = state.voertuigtypesexclude.split(\",\") || [];\n        voertuigtypesexclude = voertuigtypesexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        voertuigtypesexclude = [];\n      }\n\n      return {\n          ...state,\n          voertuigtypesexclude: voertuigtypesexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      console.log('clear voertuigtypesexclude filter')\n\n      return {\n          ...state,\n          voertuigtypesexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_AANBIEDERS_EXCLUDE': {\n      // console.log('add item %s to aanbiedersexclude filter %o', action.payload, state)\n      let aanbiedersexclude = [];\n      try {\n        if(state.aanbiedersexclude) {\n          aanbiedersexclude = state.aanbiedersexclude.split(\",\") || []\n        }\n        if(!aanbiedersexclude.includes(action.payload)) {\n          aanbiedersexclude.push(action.payload);\n        }\n      } catch(ex) {\n        aanbiedersexclude = [];\n      }\n    \n      return {\n          ...state,\n          aanbiedersexclude: aanbiedersexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE': {\n      console.log('remove item %s from aanbiedersexclude filter', action.payload)\n      let aanbiedersexclude = [];\n      try {\n        aanbiedersexclude = state.aanbiedersexclude.split(\",\") || [];\n        aanbiedersexclude = aanbiedersexclude.filter((item) => { return item !== action.payload });\n      } catch(ex) {\n        aanbiedersexclude = [];\n      }\n    \n      return {\n          ...state,\n          aanbiedersexclude: aanbiedersexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_AANBIEDERS_EXCLUDE': {\n      console.log('clear aanbiedersexclude filter')\n    \n      return {\n          ...state,\n          aanbiedersexclude: ''\n      };\n    }\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  user_data: null\n}\n  \nexport default function vehicles(state = initialState, action) {\n    switch(action.type) {\n        case 'SET_USER': {\n            const user = action.payload\n            return {\n                user_data: user\n            }\n        }\n        case 'CLEAR_USER': {\n            return { user_data: null }\n        }\n        default:\n            return state;\n    }\n}","const md5 = require('md5');\n\nconst initialState = {\n  data: [],\n  filter: \"\"\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_ZONES_GEODATA': {\n      let currentdata = state.data ? state.data: [];\n    \n      //console.log(\"filter - %o / %o\", currentdata, action.payload.data)\n      if(md5(currentdata)===md5(action.payload.data)&&\n         state.filter===action.payload.filter) {\n        // console.log('SET_ZONES_GEODATA - no changes')\n        return state;\n      }\n      \n      // if(md5(currentdata)!==md5(action.payload.data)) { console.log('SET_ZONES_GEODATA - data changed')}\n      // if(state.filter!==action.payload.filter) { console.log('SET_ZONES_GEODATA - filter changed')}\n      \n      return {\n          ...state,\n          data: action.payload.data,\n          filter: action.payload.filter\n      };\n    }\n\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport last_update from './last_update';\nimport metadata from './metadata';\nimport vehicles from './vehicles';\nimport filter from './filter';\nimport authentication from './authentication';\nimport zones_geodata from './zones_geodata';\n\nexport default combineReducers({\n  last_update,\n  metadata,\n  vehicles,\n  filter,\n  authentication,\n  zones_geodata\n})","export default function lastUpdate(state = false, action) {\n  switch(action.type) {\n    case 'SET_LAST_UPDATE': {\n      return action.payload;\n    }\n\n    default:\n      return state;\n  }\n}\n","import React from 'react';\n\nexport function IconButtonClose(props) {\n  return (\n    <div\n      {...props}\n      className=\"w-16 h-16 flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline\"\n    >\n      <svg\n        height=\"100%\"\n        id=\"Layer_1\"\n        version=\"1.1\"\n        viewBox=\"0 0 512 512\"\n        width=\"100%\"\n        >\n        <path d=\"M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z\"/>\n      </svg>\n    </div>);\n}\n\nexport function IconButtonFilter(props) {\n  return (\n    <div\n      {...props}\n      className=\"w-12 h-8 box-border border-2 border-black flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline\"\n    >\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22.13 15.72\">\n        <path d=\"M7.16 0a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h2.71a3.7 3.7 0 0 0 7.2 0h10.52a.85.85 0 0 0 0-1.7H10.76A3.7 3.7 0 0 0 7.16 0zm0 5.72a2 2 0 1 1 2-2 2 2 0 0 1-2 2zM15 8.3a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h10.52a3.7 3.7 0 0 0 7.2 0h2.71a.85.85 0 0 0 0-1.7h-2.71A3.7 3.7 0 0 0 15 8.3zm0 5.7a2 2 0 1 1 2-2 2 2 0 0 1-2 2z\"></path>\n      </svg>\n    </div>);\n}\n\n","import React, { useState } from 'react';\n// import moment from 'moment';\nimport { Link, useLocation } from \"react-router-dom\";\n\nimport './Menu.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { IconButtonFilter } from './IconButtons.jsx';\n\nfunction Menu() {\n  const [pathName, setPathName] = useState(document.location.pathname);\n  const dispatch = useDispatch();\n  // let dateToShow = moment(moment().format('2021-11-06 06:00'));\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n\n  //Get the value of a State variable, and store it to a const, to use it later\n  const showfilter = useSelector(state => {\n    return state.filter ? state.filter.visible : false;\n  });\n\n  const toggleFilter = e => {\n    dispatch({\n      type: 'SET_FILTER_VISIBLE',\n      payload: !showfilter\n    })\n  }\n\n  // Log pathname on navigate\n  // https://v5.reactrouter.com/web/api/Hooks\n  let location = useLocation();\n  React.useEffect(() => {\n    setPathName(document.location.pathname);\n  }, [location]);\n\n  return (\n    <div className=\"Menu fixed b-0\">\n      <div className=\"Menu-inner px-4 py-3 flex m-4 mb-1 mx-auto bg-white box-border rounded-3xl w-full shadow-lg\">\n        <Link className={`text-menu ${pathName === '/' || pathName === '/map/park' ? 'is-active' : ''}`} to=\"/map/park\">\n          Parkeerdata\n        </Link>\n\n        {/*<Link className={`text-menu ${pathName === '/map/trip' ? 'is-active' : ''}`} to=\"/map/trip\">\n          Tripdata\n        </Link>*/}\n\n        {isLoggedIn ?\n            <div className=\"text-menu\">\n              <IconButtonFilter  onClick={toggleFilter} />\n            </div>\n            :\n            null }\n\n        {isLoggedIn && false && <Link className={`text-menu ${pathName === '/monitoring' ? 'is-active' : ''}`} to=\"/monitoring\">\n          Monitor\n        </Link>}\n\n        {/*<Link to=\"/\" className={`text-menu ${pathName === '' ? 'is-active' : ''}`} onClick={(e) => {\n          e.preventDefault();\n          dispatch({\n            type: 'SET_FILTER_DATUM',\n            payload: dateToShow.toISOString()\n          })\n          clearInterval(TO_interval);\n          TO_interval = setInterval(x => {\n            dateToShow.add(30, 'minutes');\n            dispatch({\n              type: 'SET_FILTER_DATUM',\n              payload: dateToShow.toISOString()\n            })\n          }, 1200);\n          // Stop after 10 minutes\n          setTimeout(x => {\n            clearInterval(TO_interval);\n          }, 60 * 1000 * 10);\n        }}>\n          \n        </Link>*/}\n\n      </div>\n    </div>\n  )\n\n  // <nav class=\"flex items-center justify-around flex-wrap bg-teal-500 p-6\">\n  // </nav>\n}\n\nexport default Menu;\n\n","import vehiclesPoint from './vehicles-point.js';\nimport vehiclesHeatmap from './vehicles-heatmap.js';\nimport vehiclesHeatmapCityLevel from './vehicles-heatmap-city-level.js';\nimport vehiclesClusters from './vehicles-clusters.js';\nimport vehiclesClustersCount from './vehicles-clusters-count.js';\nimport vehiclesClustersPoint from './vehicles-clusters-point.js';\nimport zonesGeodata from './zones-geodata.js';\n\nexport const layers = {\n  'vehicles-heatmap': vehiclesHeatmap,// Unused\n  'vehicles-point': vehiclesPoint,\n  'vehicles-clusters': vehiclesClusters,\n  'vehicles-clusters-count': vehiclesClustersCount,\n  'vehicles-clusters-point': vehiclesClustersPoint,\n  'vehicles-heatmap-city-level': vehiclesHeatmapCityLevel,// Only one used\n  'zones-geodata': zonesGeodata\n}\n","const layer = {\n  'id': 'vehicles-heatmap',\n  'type': 'heatmap',\n  'source': 'vehicles',\n  'maxzoom': 9,\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0,\n      0,\n      6,\n      1\n    ],\n    // Increase the heatmap color weight weight by zoom level\n    // heatmap-intensity is a multiplier on top of heatmap-weight\n    'heatmap-intensity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0,\n      1,\n      9,\n      3\n    ],\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0,\n      'rgba(33,102,172,0)',\n      0.2,\n      'rgb(103,169,207)',\n      0.4,\n      'rgb(209,229,240)',\n      0.6,\n      'rgb(253,219,199)',\n      0.8,\n      'rgb(239,138,98)',\n      1,\n      'rgb(178,24,43)'\n    ],\n    // Adjust the heatmap radius by zoom level\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0,\n      2,\n      9,\n      20\n    ],\n    // Transition from heatmap to circle layer by zoom level\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7,\n      1,\n      9,\n      0\n    ]\n  }\n}\n\nexport default layer;\n","const layer = {\n  'id': 'vehicles-point',\n  'type': 'symbol',\n  'source': 'vehicles',\n  'layout': {\n    'icon-image': 'gradient',\n    'icon-size': 1,\n    'icon-allow-overlap': true,\n  },\n  'minzoom': 7,\n  // 'paint': {\n  // // Size circle radius by earthquake magnitude and zoom level\n  // 'circle-radius': [\n  //   'interpolate', ['linear'], ['zoom'],\n  //   12, 2,\n  //   16, ['*', 2, ['get', 'amount']]\n  // ],\n  // Color circle by earthquake magnitude\n  // 'circle-color': [\n  //   'interpolate',\n  //   ['linear'],\n  //   ['get', 'mag'],\n  //   1,\n  //   'rgba(33,102,172,0)',\n  //   2,\n  //   'rgb(103,169,207)',\n  //   3,\n  //   'rgb(209,229,240)',\n  //   4,\n  //   'rgb(253,219,199)',\n  //   5,\n  //   'rgb(239,138,98)',\n  //   6,\n  //   'rgb(178,24,43)'\n  // ],\n  // 'circle-stroke-color': 'white',\n  // 'circle-stroke-width': 1,\n  // Transition from heatmap to circle layer by zoom level\n    // 'circle-opacity': [\n    //   'interpolate',\n    //   ['linear'],\n    //   ['zoom'],\n    //   7,\n    //   0,\n    //   8,\n    //   1\n    // ],\n    // 'circle-color': ['get', 'color']\n  //}\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'vehicles-clusters',\n  'type': 'circle',\n  'source': 'vehicles-clusters',\n  filter: ['has', 'point_count'],\n  paint: {\n    // Use step expressions (https://maplibre.org/maplibre-gl-js-docs/style-spec/#expressions-step)\n    // with three steps to implement three types of circles:\n    //   * Blue, 20px circles when point count is less than 100\n    //   * Yellow, 30px circles when point count is between 100 and 750\n    //   * Pink, 40px circles when point count is greater than or equal to 750\n    'circle-color': [\n      'step',\n      ['get', 'point_count'],\n      '#ffd837',\n      100, '#48e248',\n      750, '#1fa024'\n    ],\n    'circle-radius': [\n      'step',\n      ['get', 'point_count'],\n      20, 100,\n      30, 750,\n      40\n    ]\n  }\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'vehicles-clusters-count',\n  'type': 'symbol',\n  'source': 'vehicles-clusters',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': 12\n  }\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'vehicles-clusters-point',\n  'type': 'circle',\n  'source': 'vehicles-clusters',\n  filter: ['!', ['has', 'point_count']],\n  paint: {\n    'circle-color': '#11b4da',\n    'circle-radius': 4,\n    'circle-stroke-width': 1,\n    'circle-stroke-color': '#fff'\n  }\n}\n\nexport default layer;\n","const layer = {\n  'id': 'vehicles-heatmap-city-level',\n  'type': 'heatmap',\n  'source': 'vehicles',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0, 0.0001,\n      10, 1\n    ],\n\n    'heatmap-intensity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 0.0025,\n      5, 0.005,\n      7.5, 0.01,\n      10, 0.05,\n      12, 0.075,/* city level */\n      15, 0.1,\n      20, 1,\n    ],\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0, 'rgba(0, 0, 255, 0)',\n      0.25, '#ffd837',\n      0.5, '#fe862e',\n      0.75, '#fd3e48',\n      1, '#9a231f'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    // Groter = grotere radius = duidelijker waar het druk is\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 10,\n      10, 12,\n      12, 20,\n      15, 40,\n      20, 60,\n      30, 100,\n      40, 100\n    ],\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7, 1,\n      9, 0.8\n    ]\n  }\n}\n\nexport default layer;\n","const layer = {\n  'id': 'zones-geodata',\n  'type': 'fill',\n  'source': 'zones-geodata',\n  'paint': {\n    'fill-color': '#1010e0',\n    'fill-opacity': 0.6\n  },\n}\n// 'filter': ['==', '$type', 'MultiPolygon'],\n// 'minzoom': 1,\n\nexport default layer;","export const sources = {\n  'vehicles': {\n    'type': 'geojson',\n  },\n  'vehicles-clusters': {\n    'type': 'geojson',\n    'cluster': true,\n    'clusterMaxZoom': 14, // Max zoom to cluster points on\n    'clusterRadius': 50 // Radius of each cluster when clustering points (defaults to 50)\n  }\n}\n","const initialMarker = `<svg id=\"Pointer_Green_met_Aanbieder\" data-name=\"Pointer Green met Aanbieder\" xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=200\" viewBox=\"0 0 24 24\">\n    <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\"/>\n    <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n        <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\"/>\n        <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\"/>\n    </g>\n    <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#1f3ff0\"/>\n</svg>\n`;\n\nconst testMarker = `\n<svg id=\"Pointer_Green_met_Aanbieder\" data-name=\"Pointer Green met Aanbieder\" xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"932\" viewBox=\"0 0 24 24\">\n        <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\"/>\n            <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n                <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\"/>\n                <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\"/>\n            </g>\n        <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#44ff33\"/>\n        </svg>`;\n\nconst testMarker2 = `\n<svg id=\"Pointer_Green_met_Aanbieder\" data-name=\"Pointer Green met Aanbieder\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"200\" height=\"200\">\n    <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\"/>\n    <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n        <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\"/>\n        <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\"/>\n    </g>\n    <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#1f3ff0\"/>\n</svg>`;\n\nconst compare = `<svg xmlns=\"http://www.w3.org/1999/xhtml\" viewbox=\"0 0 24 24\" width=\"200\" height=\"200\">\n<circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\">\n<g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n    <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\">\n    <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\">\n</circle></circle></g>\n<circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#1f3ff0\">\n</circle></circle></svg>\n\n`\n\nconst initialMarker2 = `\n    <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\"></circle>\n    <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n        <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\"></circle>\n        <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\"></circle>\n    </g>\n    <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#1f3ff0\"></circle>\n`;\n\nasync function getVehicleMarkers(operatorColor) {\n    var gradients = ['#000000'];\n    var markers = [];\n    for (const durationIndicationColor of gradients) {\n        var marker = await styleVehicleMarker(operatorColor,  durationIndicationColor);\n        markers.push(marker);\n    }   \n    return markers;\n}\n\nasync function styleVehicleMarker(operatorColor, durationIndicationColor) {\n    var xmlns = \"http://www.w3.org/2000/svg\";\n    var svgElement = document.createElementNS(xmlns, \"svg\");\n    svgElement.innerHTML = initialMarker2;\n    var svg = svgElement;\n    var width = {};\n    var height = {};\n    // var test = svg.getElementById(\"Ellipse_192\");\n    // test.setAttribute(\"fill\", \"#44ff33\");\n    // console.log(svg.firstChild.tagName);\n    svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n    \n    console.log(svg);\n    // svg = svg.querySelector('svg');\n    width.value = 25;\n    height.value = 25;\n    \n    var canvas = document.createElement('canvas');\n    svg.setAttribute('width', width.value);\n    svg.setAttribute('height', height.value);\n    canvas.width = width.value;\n    canvas.height = height.value;\n    var data = new XMLSerializer().serializeToString(svg);\n    var win = window.URL || window.webkitURL || window;\n    var img = new Image();\n    var blob = new Blob([data], { type: 'image/svg+xml' });\n\n    var url = win.createObjectURL(blob);\n    img.src = url;\n    await img.decode();\n    console.log(\"test2\");\n    var context = canvas.getContext('2d');\n    context.drawImage(img, 0, 0);\n    win.revokeObjectURL(url);\n \n    return new Uint8Array(context.getImageData(0, 0, img.width, img.height).data.buffer);\n}\n\nexport default getVehicleMarkers;\n\n\n    ","import { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport maplibregl from 'maplibre-gl';\nimport moment from 'moment';\n// import 'moment/min/moment-with-locales'\nimport localization from 'moment/locale/nl'\n\nimport './Map.css';\n\nimport {layers} from './layers';\nimport {sources} from './sources.js';\nimport getVehicleMarkers from './../Map/vehicle_marker.js';\n\nconst md5 = require('md5');\n\n// Set language for momentJS\nmoment.locale('nl', localization);\nconsole.log(moment().locale('nl').subtract(1, 'day').fromNow());\n\nconst initPopupLogic = (currentMap) => {\n  // Docs: https://maplibre.org/maplibre-gl-js-docs/example/popup-on-click/\n  const layerName = 'vehicles-point';\n\n  // When a click event occurs on a feature in the places layer, open a popup at the\n  // location of the feature, with description HTML from its properties.\n  currentMap.on('click', layerName, function (e) {\n    const vehicleProperties = e.features[0].properties;\n\n    var coordinates = e.features[0].geometry.coordinates.slice();\n    var description = e.features[0].properties.description;\n     \n    // Ensure that if the map is zoomed out such that multiple\n    // copies of the feature are visible, the popup appears\n    // over the copy being pointed to.\n    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n      coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n    }\n     \n    new maplibregl.Popup()\n      .setLngLat(coordinates)\n      .setHTML(`\n        <h1 class=\"mb-2\">\n          <span\n            class=\"rounded-full inline-block w-4 h-4\"\n            style=\"background-color: ${vehicleProperties.color}\">\n          </span>\n          <span class=\"Map-popup-title ml-2\">\n            ${vehicleProperties.system_id} VEHICLE TYPE\n          </span>\n        </h1>\n        <div class=\"Map-popup-body\">\n          Staat hier sinds ${moment(vehicleProperties.in_public_space_since).locale('nl').fromNow()}<br />\n          Geparkeerd sinds: ${moment(vehicleProperties.in_public_space_since).format('DD-MM-YYYY HH:mm')}\n        </div>\n      `)\n      .addTo(currentMap);\n  });\n   \n  // Change the cursor to a pointer when the mouse is over the places layer.\n  currentMap.on('mouseenter', layerName, function () {\n    currentMap.getCanvas().style.cursor = 'pointer';\n  });\n   \n  // Change it back to a pointer when it leaves.\n  currentMap.on('mouseleave', layerName, function () {\n  currentMap.getCanvas().style.cursor = '';\n  });\n}\n\nfunction Map(props) {\n\n  // Get vehicles from store\n  const vehicles = useSelector(state => {\n    return state.vehicles || null;\n  });\n\n  const zones_geodata = useSelector(state => {\n    if(!state||!state.zones_geodata) {\n      return null;\n    }\n\n    return state.zones_geodata;\n  });\n  \n  const mapContainer = props.mapContainer;\n  const [lng] = useState(4.4671854);\n  const [lat] = useState(51.9250836);\n  const [zoom] = useState(15);\n  const [counter, setCounter] = useState(0);\n  const [zonesGeodataHash, setZonesGeodataHash] = useState(\"\");\n  const [sourceHash, setSourceHash] = useState([]);\n  let map = useRef(null);\n\n  // Init MapLibre map\n  // Docs: https://maptiler.zendesk.com/hc/en-us/articles/4405444890897-Display-MapLibre-GL-JS-map-using-React-JS\n  useEffect(() => {\n    const initMap = () => {\n      \n      if (map.current) return;\n      map.current = new maplibregl.Map({\n        container: mapContainer.current,\n        // style: 'mapbox://styles/mapbox/streets-v11',\n        style: 'mapbox://styles/nine3030/ckv9ni7rj0xwq15qsekqwnlz5',//TODO: Move to CROW\n        accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n        center: [lng, lat],\n        zoom: zoom\n      });\n\n      // Add controls\n      map.current.addControl(new maplibregl.NavigationControl({\n        showCompass: false\n      }), 'bottom-right');\n\n      // Add 'current location' button\n      map.current.addControl(\n        new maplibregl.GeolocateControl({\n          positionOptions: {\n            enableHighAccuracy: true\n          },\n          trackUserLocation: true\n      }), 'bottom-right');\n  \n      // Do a state update if map is loaded\n      map.current.on('load', function() {\n        setCounter(counter + 1)\n      });\n      \n      // Disable rotating\n      map.current.dragRotate.disable();\n      map.current.touchZoomRotate.disableRotation();\n\n      var test = async() => {\n        var value = await getVehicleMarkers(\"#000000\");\n        map.current.addImage('gradient', { width: 25, height: 25, data: value[0]});\n        console.log(value[0]);\n      };\n      test();\n\n    }\n    initMap();\n  }, [vehicles, zones_geodata, lng, lat, zoom, counter, mapContainer])\n\n  const addOrUpdateSource = (sourceName, sourceData) => {\n\n    // If map is not loaded: refresh state after .25 seconds\n    if (! map.current || ! map.current.isStyleLoaded()) {\n      setTimeout(() => {\n        setCounter(counter + 1)\n      }, 250)\n      return;\n    }\n\n    // If no source data is given -> stop\n    if (! sourceData) {\n      return;\n    }\n\n    // Check if source exists\n    const doesSourceExist = map.current.getSource(sourceName);\n    // Get md5 hash of the data\n    let hash = sourceData.data && sourceData.data.features ? md5(sourceData.data.features) : md5('No data yet');\n    // If source does exist: update data\n    if(doesSourceExist) {\n      if(! sourceHash || sourceHash[sourceName] !== hash) {\n        // Set hash\n        let newSourceHashArray = sourceHash;\n        newSourceHashArray[sourceName] = hash;\n        setSourceHash(newSourceHashArray);\n        // Update data\n        map.current.getSource(sourceName).setData(sourceData.data);\n        // console.log(\"Update source zones-geodata %o\", zones_geodata)\n      } else {\n        // console.log(\"Skip update source zones-geodata %o\", zonesGeodataHash, hash)\n      }\n    }\n\n    // If source does not exist: add source\n    else {\n      // console.log(\"Add source zones-geodata %o\", zones_geodata)\n      if(sourceData) {\n        // Set hash\n        let newSourceHashArray = sourceHash;\n        newSourceHashArray[sourceName] = hash;\n        setSourceHash(newSourceHashArray);\n\n        // Set data\n        let source = Object.assign({}, {\n          'type': 'geojson',\n          'data': sourceData.data,\n        }, sources[sourceName] ? sources[sourceName] : {});\n        map.current.addSource(sourceName, source);\n      }\n    }\n  }\n\n  useEffect(() => {\n    addOrUpdateSource('vehicles', vehicles);\n    addOrUpdateSource('zones-geodata', zones_geodata);\n    addOrUpdateSource('vehicles-clusters', vehicles);\n  }, [\n    vehicles ? (vehicles.data ? vehicles.data.features : vehicles.data) : vehicles,\n    zones_geodata,\n    zonesGeodataHash,\n    counter,\n    props.activeSource\n  ])\n\n  // Add layers\n  useEffect(() => {\n    const addLayers = (vehicles, zones_geodata) => {\n      if (! map.current || ! map.current.isStyleLoaded()) {\n        setTimeout(() => {\n          setCounter(counter + 1)\n        }, 250)\n        return;\n      }\n      if (!vehicles||!zones_geodata) return;\n\n      // Remove 'old' layers\n      const allLayers = map.current.getStyle().layers;\n      allLayers.forEach(x => {\n        // Check if this is one of our layers\n        if(x.id.indexOf('vehicles-') > -1) {\n          // If so, remove\n          map.current.removeLayer(x.id)\n        }\n        if(x.id.indexOf('zones-geodata') > -1) {\n          // If so, remove\n          map.current.removeLayer(x.id)\n          setZonesGeodataHash(\"\");\n        }\n      })\n      // Add selected layers to the map\n      props.layers.forEach(x => {\n        if(props.layers.indexOf(x) >= -1) {\n          const doesLayerExist = map.current.getLayer(x);\n          if(! doesLayerExist) { map.current.addLayer(layers[x]); }\n        }\n      })\n    }\n    addLayers(vehicles, zones_geodata);\n    initPopupLogic(map.current)\n  }, [vehicles, zones_geodata, counter, props.layers]);\n\n  return null;\n}\n\nexport {\n  Map\n};\n","import React, { useRef, useState } from 'react';\n\nimport './SlideBox.css';\n\nfunction SlideBox(props) {\n  const containerRef = useRef(null);\n\n  const [isHidden, setIsHidden] = useState(false)\n\n  // Show/hide slidebox on toggle click\n  const toggleSlideBox = () => {\n    setIsHidden(! isHidden);\n  };\n\n  return <div className={`\n      SlideBox\n      direction-${props.direction}\n      relative\n      ${isHidden ? 'is-hidden' : ''}\n    `} ref={containerRef}>\n    <div className=\"\n      SlideBox-inner\n      relative\n      px-1\n    \">\n      {props.children}\n    </div>\n    <div className={`SlideBox-toggle`} onClick={() => toggleSlideBox()}>\n      <span>\n        Lagen\n      </span>\n    </div>\n  </div>\n}\n\nexport default SlideBox;\n","import React from 'react';\n\nimport SlideBox from '../SlideBox/SlideBox.jsx';\n\nimport './SelectLayer.css';\n\nfunction SelectLayer(props) {\n  const {setLayers, setActiveSource} = props;\n\n  return <div className={`\n      SelectLayer\n      absolute\n      mt-3\n      right-0\n      z-10\n    `}>\n      <SlideBox direction=\"right\">\n        <div data-type=\"heat-map\" className=\"\n          layer\n          relative inline-block my-3 mx-1\" onClick={() => {\n          setLayers([\n            'vehicles-heatmap-city-level',\n            'zones-geodata',\n          ]);\n          setActiveSource(\n            'vehicles'\n          );\n        }}>\n          <span className=\"\n            layer-title\n            block\n            absolute\n            bottom-0\n            left-0\n            w-full\n            h-6\n            flex\n            flex-col\n            justify-center\n          \">\n            Heat map\n          </span>\n        </div>\n\n        <div data-type=\"pointers\" className=\"layer\n          relative inline-block my-3 mx-1\" onClick={() => {\n          setLayers([\n            'vehicles-clusters',\n            'vehicles-clusters-count',\n            'vehicles-clusters-point',\n            'zones-geodata',\n          ]);\n          setActiveSource(\n            'vehicles-clusters'\n          );\n        }}>\n          <span className=\"\n            layer-title\n            block\n            absolute\n            bottom-0\n            left-0\n            w-full\n            h-6\n            flex\n            flex-col\n            justify-center\n          \">\n            Clusters\n          </span>\n        </div>\n\n        <div data-type=\"vehicles\" className=\"\n          layer\n          relative inline-block my-3 mx-1\" onClick={() => {\n          setLayers([\n            'vehicles-point',\n            'zones-geodata',\n          ]);\n          setActiveSource(\n            'vehicles'\n          );\n        }}>\n          <span className=\"\n            layer-title\n            block\n            absolute\n            bottom-0\n            left-0\n            w-full\n            h-6\n            flex\n            flex-col\n            justify-center\n          \">\n            Voertuigen\n          </span>\n        </div>\n    </SlideBox>\n  </div>\n}\n\nexport {\n  SelectLayer\n}","import React, {useState} from 'react';\nimport {Map as MapComponent} from '../components/Map/Map.jsx';\nimport {SelectLayer} from '../components/SelectLayer/SelectLayer.jsx';\n\nimport './Map.css';\n\nfunction Map(props) {\n  const [layers, setLayers] = useState([\n    'vehicles-heatmap',\n    'vehicles-point',\n    'zones-geodata'\n  ]);\n  const [activeSource, setActiveSource] = useState('vehicles');\n  \n  return (\n    <div className=\"flex flex-col\">\n      <SelectLayer\n        setLayers={setLayers}\n        setActiveSource={setActiveSource}\n      />\n      <div className=\"flex-1 bg-red-400\">\n        <MapComponent\n          mapContainer={props.mapContainer}\n          layers={layers}\n          activeSource={activeSource}\n        />\n      </div>\n  </div>);\n  \n  \n}\n\nexport default Map;\n","import React, { useState } from 'react';\nimport { setUser } from '../actions/authentication';\nimport { useDispatch } from 'react-redux';\nimport {\n  Redirect\n } from \"react-router-dom\";\n\nconst Login = () => {\n  const [emailaddress, setEmailaddress] = useState('');\n  const [password, setPassword] = useState('');\n  const [recoverPassword, setRecoverPassword] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const dispatch = useDispatch();\n\n  const login = e => {\n    \n    e.preventDefault();\n\n    // Clear error message\n    setErrorMessage(null);\n\n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + \"/login\";\n    var data = {\n      loginId: emailaddress,\n      password: password,\n      applicationId: process.env.REACT_APP_FUSIONAUTH_APPLICATION_ID\n    };\n    \n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        dispatch( setUser(response) );\n        setLoggedIn(true);\n      }).catch(error => {\n        console.error(\"Login failed! (%s)\", error.message);\n        setErrorMessage('Login mislukt. Heb je het juiste e-mailadres en wachtwoord ingevuld?');\n        setLoggedIn(false);\n    });\n  };\n  \n  const recover = e => {\n    e.preventDefault();\n\n    // Clear error message\n    setErrorMessage(null);\n\n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + \"/user/forgot-password\"\n    var data = {\n      loginId: emailaddress,\n    };\n\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        console.log(response);\n        return true;\n      }).catch(error => {\n        console.log(error)\n        // setErrorMessage('Controleer of je e-mailadres klopt. Mocht het daarna nog steeds niet lukken, neem dan contact op met info@deelfietsdashboard.nl');\n        setErrorMessage('Dank voor je verzoek voor een wachtwoord-resetmail. Het opvragen van je wachtwoord werkt nog niet in dit nieuwe Dashboard. Stuur alsjeblieft een mail aan info@deelfietsdashboard.nl met je e-mailadres, dan zorgen wij dat je een wachtwoord-herstel-link ontvangt. Dank!');\n        return false;\n      });\n\n    // do login here\n  };\n\n  const renderLogin = () => {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\n        <div className=\"px-8 py-6 mt-4 text-left bg-white shadow-lg\">\n          <h3 className=\"text-2xl font-bold text-center\">Login</h3>\n          <form>\n            <label className=\"block\" htmlFor=\"emailaddress\">Email</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              autoCapitalize=\"off\"\n              placeholder=\"email\"\n              name=\"emailaddress\"\n              required\n              onChange={e => setEmailaddress(e.target.value)}\n            />\n\n            <label className=\"mt-4 block\" htmlFor=\"password\">Wachtwoord</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              type=\"password\"\n              placeholder=\"Wachtwoord\"\n              name=\"password\"\n              required\n              onChange={e => setPassword(e.target.value)}\n            />\n          \n            {errorMessage && <div className=\"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n              <span className=\"block sm:inline\">{errorMessage}</span>\n            </div>}\n\n            <div className=\"flex items-baseline justify-between\">\n                <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={login}>Login</button>\n                <button className=\"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={() => setRecoverPassword(true)}>Wachtwoord vergeten</button>\n            </div>\n          </form>\n        </div>\n      </div>)\n  }\n  \n  const renderRecoverPassword = () => {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\n        <div className=\"px-8 py-6 mt-4 text-left bg-white shadow-lg\">\n          <h3 className=\"text-2xl font-bold text-center\">Wachtwoord herstellen</h3>\n          <form>\n            <label className=\"block\" htmlFor=\"emailaddress\">Email</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              autoCapitalize=\"off\"\n              placeholder=\"Email\"\n              name=\"emailaddress\"\n              required\n              onChange={e => setEmailaddress(e.target.value)}\n            />\n     \n            {errorMessage && <div className=\"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n              <span className=\"block sm:inline\">{errorMessage}</span>\n            </div>}\n\n            <div className=\"flex items-baseline justify-between\">\n                <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={recover}>Herstel</button>\n                <button className=\"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={() => {\n                  setErrorMessage(null);\n                  setRecoverPassword(false);\n                }}>Annuleer</button>\n            </div>\n          </form>\n        </div>\n      </div>)\n  }\n  const renderRedirect = () => {\n    return (\n        <Redirect to=\"/\" />\n    );\n  }\n \n  if (loggedIn) {\n    return renderRedirect();\n  }\n\n  return recoverPassword ? renderRecoverPassword() : renderLogin();\n};\n\nexport default Login;","import { SET_USER, CLEAR_USER } from \"./actionTypes\";\n\nexport const setUser = (user) => ({\n  type: SET_USER,\n  payload: user\n})\n\nexport const clearUser = () => ({\n  type: CLEAR_USER,\n  payload: null\n})\n","// vehicles\nexport const SET_VEHICLES = 'SET_VEHICLES';\nexport const SET_VEHICLE = 'SET_VEHICLE';\nexport const CLEAR_VEHICLES = 'CLEAR_VEHICLES';\n\n// authentication\nexport const SET_USER = 'SET_USER';\nexport const CLEAR_USER = 'CLEAR_USER';\n","import moment from 'moment';\n\nexport const fetchParkEvents = async (authentication, provider, dateTime) => {\n  if(! authentication || ! authentication.user_data || ! dateTime) {\n    return;\n  }\n  if(! provider) {\n    return;\n  }\n\n  const formattedDateTime = moment(dateTime).format('YYYY-MM-DDTHH:mm:ss[Z]');\n  let url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp=\"+formattedDateTime+\"&operators=\"+provider;\n  let options = { headers : { \"authorization\": \"Bearer \" + authentication.user_data.token }}\n\n  const response = await fetch(url, options);\n\n  if(! response.ok) {\n    console.error(\"unable to fetch: %o\", response);\n    return false;\n  }\n\n  const json = await response.json();\n\n  return json.park_events || false;\n}","import React, {useEffect} from 'react';\nimport {useSelector} from 'react-redux';\nimport moment from 'moment';\n\nimport {fetchParkEvents} from '../helpers/parkEvents.js';\n\nconst numberOfSnapshots = 4*5;//4*5\nconst provider = 'htm';//4*5\nlet numberOfUniqueVehiclesAfterXIterations = [];\n\nconst getUniqueVehicleIds = (dataset) => {\n  let uniqueVehicleIds = [];\n  dataset.map(x => {\n    if(uniqueVehicleIds.indexOf(x.bike_id) <= -1) {\n      uniqueVehicleIds.push(x.bike_id);\n    }\n    return x;\n  });\n  return uniqueVehicleIds;\n}\n\nfunction Monitoring(props) {\n\n  // Get state.authentication\n  const authentication = useSelector(state => {\n    return state.authentication ? state.authentication : false;\n  });\n\n  // Function that gets parking data for a specific provider, for a specific date/time\n  const fetchMultipleMomentsInTime = async () => {\n    let dateTime = moment().toISOString(), parkEvents = [];\n    // Get 4*5=20 snapshots (= 5 days) of parking data\n    let collectedParkEvents = [];\n    for(let i = 0; i <= numberOfSnapshots; i++) {\n      dateTime = moment(dateTime).subtract(6, 'hours').toISOString();\n      // Get park events for date time\n      parkEvents = await fetchParkEvents(authentication, provider, dateTime);\n      // Add park events to existing allParkEvents array\n      parkEvents.map(x => {\n        collectedParkEvents.push(x);\n        return x;\n      });\n      // Get cumulative unique vehicle IDs\n      numberOfUniqueVehiclesAfterXIterations[i] = getUniqueVehicleIds(collectedParkEvents);\n    }\n    return collectedParkEvents;\n  }\n\n  // On load, get parking data of different moments in time\n  useEffect(async (x) => {\n    fetchMultipleMomentsInTime();\n  }, [authentication]);\n\n  return (\n    <div className=\"mt-12\">\n      <h1 className=\"text-2xl my-2\">\n        Monitoring\n      </h1>\n\n      <p className=\"py-2\">\n        Voor {provider} willen we controleren hoeveel unieke voertuig-IDs er zijn door te de tijd heen.\n      </p>\n\n      <p className=\"py-2\">\n        Op deze manier kunnen we afleiden of er aan de standaard wordt voldaan. Er moeten statische voertuig-IDs zijn. Als dit niet het geval is, zul je zien dat er na verloop van tijd veel meer voertuig-IDs zijn geregistreerd dan het aantal voertuigen dat de aanbieder heeft. Op die manier weet je dat denog niet voldaan wordt aan de gevraagde datastandaard.\n      </p>\n\n      <p className=\"py-2\">\n        De snapshots zijn steeds gemaakt met 6 uur ertussen.\n      </p>\n\n      <pre>\n        {numberOfUniqueVehiclesAfterXIterations ? numberOfUniqueVehiclesAfterXIterations.map((val, key) => {\n          return <div key={key}>Number of UUIDs after <b>{key} snapshots</b>: <b>{val.length}</b></div>\n        }) : ''}\n      </pre>\n\n      <table className=\"table-auto bg-white hidden\">\n        <thead>\n          <tr>\n            <th>Datum/tijd</th>\n            <th>Cumulatief aantal voertuig-IDs</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>datumtijd</td>\n            <td>aantal</td>\n          </tr>\n        </tbody>\n      </table>\n\n    </div>\n  );\n  \n  \n}\n\nexport default Monitoring;\n","import './css/Filterbar.css';\nimport { IconButtonClose } from '../IconButtons.jsx';\n\nfunction ModalBox({closeFunction, children}) {\n  return (\n    <div className=\"modalbox-bg\" onClick={() => closeFunction(false)}>\n      <div className=\"modalbox\" onClick={e=>e.stopPropagation()}>\n        <div className=\"absolute absolute top-0 right-0\">\n          <IconButtonClose onClick={() => closeFunction(false)} />\n        </div>\n        <div className=\"grid-cols-4\" >\n          { children }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ModalBox;","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ModalBox from './ModalBox.jsx';\nimport './css/FilteritemGebieden.css';\n\nfunction FilteritemGebieden() {\n  const dispatch = useDispatch()\n\n  const gebieden = useSelector(state => {\n    return (state.metadata && state.metadata.gebieden) ? state.metadata.gebieden : [];\n  });\n  \n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : \"\";\n  });\n  \n  let [showSelect, setShowSelect] = useState(false);\n  let [filterSearch, setFilterSearch] = useState(\"\");\n  \n  const unselectGebied = e => {\n    e.preventDefault();\n    \n    dispatch({\n      type: 'SET_FILTER_GEBIED',\n      payload: \"\"\n    })\n  }\n  \n  const setFilterGebied = (gebied) => {\n    dispatch({\n      type: 'SET_FILTER_GEBIED',\n      payload: gebied\n    })\n  }\n  \n  const changeSearchText = e => { setFilterSearch(e.target.value) }\n\n  const clearSearchText = e => { setFilterSearch(\"\") }\n  \n  const renderSelectGebieden = (gebieden) => {\n    const filteredGebieden = gebieden.filter(gebied=>{\n      return filterSearch===''|| gebied.name.toLowerCase().includes(filterSearch.toLowerCase())\n    })\n    return (\n      <ModalBox closeFunction={setShowSelect}>\n        <div className=\"filter-form-selectie\">\n          <div className=\"filter-form-search-container mb-3\">\n            <div className=\"filter-form-title\">Selecteer Plaats</div>\n            <div className=\"filter-form-search-container-2\">\n            <input type=\"text\"\n              className=\"filter-form-search\"\n              onChange={changeSearchText}\n              value={filterSearch}\n              placeholder={\"zoek\"}/>\n            <div className=\"ml-3 flex flex-col justify-center h-full\">\n              {  filterSearch!==\"\" ?\n                    <div className=\"filter-plaats-img-cancel\" onClick={clearSearchText} />\n                  :\n                    <div className=\"filter-plaats-img-search\" />\n              }\n            </div>\n            </div>\n            <div>&nbsp;</div>\n          </div>\n          <div className=\"filter-form-values\">\n            { filterGebied === \"\"?\n                <div key={'item-alle'} className=\"form-item-selected form-item\" onClick={e=>{setShowSelect(false)}}>Alle Gebieden</div>\n                :\n                <div key={'item-alle'} className=\"form-item\" onClick={e=>{setShowSelect(false);setFilterGebied(\"\")}}>Alle Gebieden</div>\n            }\n            { filteredGebieden.map(a=>{\n                if(filterGebied === a.gm_code) {\n                  return (<div key={'item-'+a.gm_code} className=\"form-item-selected form-item\" onClick={e=>{setShowSelect(false);setFilterGebied(\"\")}}>{a.name}</div>)\n                } else {\n                  return (<div key={'item-'+a.gm_code} className=\"form-item\" onClick={e=>{setShowSelect(false);setFilterGebied(a.gm_code);}}>{a.name}</div>)\n                }\n              })\n            }\n          </div>\n        </div>\n      </ModalBox>\n    )\n  }\n  \n  let value = gebieden.find(item=>item.gm_code===filterGebied) || \"\";\n  \n  return (\n    <div className=\"filter-plaats-container\">\n      <div className=\"filter-plaats-title\" onClick={e=>{setShowSelect(!showSelect)}}>Plaats</div>\n      <div className=\"filter-plaats-box-row cursor-pointer flex flex-col justify-center\">\n        <div className=\"filter-plaats-value\" onClick={e=>{setShowSelect(!showSelect)}}>{value===\"\"?\"Alle Gebieden\":value.name}</div>\n        { showSelect ? renderSelectGebieden(gebieden) : null }\n        {  filterGebied!==\"\" ?\n              <div className=\"filter-plaats-img-cancel\" onClick={unselectGebied} />\n            :\n              null\n        }\n        <div className=\"flex flex-col justify-center h-full\">\n          <div className=\"filter-plaats-img-search\" onClick={e=>{setShowSelect(!showSelect)}} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemGebieden;\n","export default __webpack_public_path__ + \"static/media/calendar.0fe3dc2a.svg\";","// import { useState } from 'react';\nimport './css/FilteritemDatum.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\nimport './css/FilteritemDatum-Timepicker.css';\nimport './css/FilteritemDatum-Calendar.css';\nimport './css/FilteritemDatum-Clock.css';\n\n// using https://github.com/wojtekmaj/react-datetime-picker with custom styling\nimport DateTimePicker from 'react-datetime-picker/dist/entry.nostyle'; //\nimport calendarIcon from '../../images/calendar.svg';\n\nfunction FilterItemDatum() {\n  const dispatch = useDispatch()\n  \n  const filterDatum = useSelector(state => {\n    return state.filter ? state.filter.datum : new Date().toISOString();\n  });\n  \n  const setFilterDatum = newdt => {\n    dispatch({\n      type: 'SET_FILTER_DATUM',\n      payload: newdt.toISOString()\n    })\n  }\n\n  return (\n    <div className=\"filter-datum-container\">\n      <div className=\"filter-datum-title\">Datum</div>\n      <div className=\"filter-datum-box-row\">\n        <div className=\"filter-datum-box-1\">\n            <div\n              className=\"filter-datum-caret\"\n              onClick={() => {\n                setFilterDatum(\n                  moment(filterDatum).subtract(1, 'hours')\n                )\n              }}>\n              &lsaquo;\n            </div>\n              <div className=\"filter-datum-dtpicker\">\n                <DateTimePicker\n                  onChange={setFilterDatum}\n                  value={new Date(filterDatum)}\n                  clearIcon={null}\n                  calendarIcon={<img src={calendarIcon} alt=\"Logo\" />}\n                  format={\"y-MM-dd H:mm\"}/>\n              </div>\n            <div\n              className=\"filter-datum-caret\"\n              onClick={() => {\n                setFilterDatum(\n                  moment(filterDatum).add(1, 'hours')\n                )\n              }}\n              >&rsaquo;</div>\n        </div>\n        <div className=\"filter-datum-box-2\" onClick={() => {\n          setFilterDatum(new Date())\n        }} title=\"Toon huidige datum en tijd\">\n          <div className=\"filter-datum-img-play\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FilterItemDatum;\n","import { useState } from 'react';\nimport './css/Filterbar.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ModalBox from './ModalBox.jsx';\n\nfunction FilterItemInterval() {\n  const dispatch = useDispatch()\n  \n  const filterIntervalStart = useSelector(state => {\n    return state.filter ? state.filter.intervalstart : new Date().toISOString();\n  });\n  \n  const filterIntervalEnd = useSelector(state => {\n    return state.filter ? state.filter.intervalend : new Date().toISOString();\n  });\n  \n  let [useIntervalStart, setUseIntervalStart] = useState(false);\n  let [showSelectInterval, setShowSelectInterval] = useState(false);\n  \n  const setFilterInterval = e => {\n    e.preventDefault();\n    \n    if (!e.target['validity'].valid) return;\n    \n    const datum = (new Date(e.target.value)).toISOString();\n    dispatch({\n      type: useIntervalStart ? 'SET_FILTER_INTERVAL_START':'SET_FILTER_INTERVAL_END',\n      payload: datum\n    })\n  }\n  \n  // https://webreflection.medium.com/using-the-input-datetime-local-9503e7efdce\n  function toDatetimeLocal(ISOString) {\n    const date = new Date(ISOString)\n    const\n      ten = function (i) {\n        return (i < 10 ? '0' : '') + i;\n      },\n      YYYY = date.getFullYear(),\n      MM = ten(date.getMonth() + 1),\n      DD = ten(date.getDate()),\n      HH = ten(date.getHours()),\n      II = ten(date.getMinutes()),\n      SS = ten(date.getSeconds())\n    ;\n    return YYYY + '-' + MM + '-' + DD + 'T' +\n             HH + ':' + II + ':' + SS;\n  };\n  \n  const renderSelectInterval = (isStart) => {\n    const value = toDatetimeLocal(isStart ? filterIntervalStart : filterIntervalEnd);\n    return (\n      <ModalBox className=\"min-width-48\" closeFunction={setShowSelectInterval}>\n        <div className=\"filter-form-selectie\">\n          <div className=\"filter-form-title\">Selecteer Datum</div>\n          <form key=\"f-end\" className=\"h-12 w-auto flex flex-row border-solid border-4 border-light-blue-500 box-border\">\n            <input className=\"bg-transparent flex-2 flex-grow\" type=\"datetime-local\" value={value} onChange={setFilterInterval} />\n            <div className=\"flex-2\"/>\n          </form>\n          <div className=\"flex-none closebutton text-center mt-4\" onClick={e=>setShowSelectInterval(false)}>OK</div>\n        </div>\n     </ModalBox>);\n  }\n\n  let intervalStart = new Date(filterIntervalStart).toLocaleString();\n  let intervalEnd = new Date(filterIntervalEnd).toLocaleString();\n  // console.log(\"got interval %s - %s\", intervalStart, intervalEnd);\n\n    //  onClick={e=>{setShowSelectInterval(!showSelectInterval)}}\n  return (\n    <>\n    <div className=\"filter-item\" onClick={e=>{setUseIntervalStart(true); setShowSelectInterval(true)}}>\n        <div className=\"filter-title\">Start</div>\n        <div className=\"filter-value\">{intervalStart}</div>\n      </div>\n      <div className=\"filter-item\" onClick={e=>{setUseIntervalStart(false); setShowSelectInterval(true)}}>\n        <div className=\"filter-title\">Eind</div>\n        <div className=\"filter-value\">{intervalEnd}</div>\n      </div>\n      { showSelectInterval ?  renderSelectInterval() : null }\n    </>\n  )\n}\n\nexport default FilterItemInterval;\n","import { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemAanbieders.css';\n\nfunction FilteritemAanbieders() {\n  const dispatch = useDispatch()\n  \n  const aanbieders = useSelector(state => {\n    return (state.metadata && state.metadata.aanbieders) ? state.metadata.aanbieders : [];\n  });\n  \n  const filterAanbiedersExclude = useSelector(state => {\n    return state.filter ? state.filter.aanbiedersexclude : [];\n  });\n  \n  const addTofilterAanbiedersExclude = (aanbieder) => {\n    const nexcluded = (filterAanbiedersExclude || '').split(\",\").length;\n    if(nexcluded===aanbieders.length-1) {\n      // console.log(\"needs at least one provider\")\n      return;\n    }\n\n    dispatch({ type: 'ADD_TO_FILTER_AANBIEDERS_EXCLUDE', payload: aanbieder.system_id })\n  }\n  \n  const removeFromfilterAanbiedersExclude = (aanbieder) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE', payload: aanbieder.system_id })\n  }\n  \n  const clearFilterAanbiedersExclude = e => {\n    dispatch({ type: 'CLEAR_FILTER_AANBIEDERS_EXCLUDE', payload: '' })\n  }\n\n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = provider => {\n    // If no filters were set, only show this provider and hide all others\n    if(filterAanbiedersExclude===\"\") {\n      // Disable all but the selected provider\n      aanbieders.map(x => {\n        if(x.system_id !== provider.system_id) {\n          addTofilterAanbiedersExclude(x)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addTofilterAanbiedersExclude(provider)\n    }\n    \n  }\n\n  return (\n    <div className=\"filter-aanbieders-container\">\n      <div className=\"filter-aanbieders-title-row\">\n        <div className=\"filter-aanbieders-title\">Aanbieders</div>\n        { filterAanbiedersExclude!==''?\n            <div className=\"filter-aanbieders-reset cursor-pointer\" onClick={clearFilterAanbiedersExclude}>\n              reset\n            </div>\n            :\n            null\n        }\n      </div>\n      <div className=\"filter-aanbieders-box-row\">\n        {\n          aanbieders.map((aanbieder, idx) => {\n            let excluded = filterAanbiedersExclude ? filterAanbiedersExclude.includes(aanbieder.system_id) : '';\n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromfilterAanbiedersExclude(aanbieder)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(aanbieder); };\n            \n            return (\n              <div\n                className={`filter-aanbieders-item ${excluded ? ' not-active' : ''}`}\n                onClick={handler}\n                key={aanbieder.system_id}\n                >\n                <div className=\"filter-aanbieders-marker\">\n                  <svg viewBox='0 0 30 30' >\n                    <circle cx={'50%'} cy={'50%'} r={'40%'} fill={\"#000000\"} />\n                    <circle cx={'50%'} cy={'50%'} r={'35%'} fill={\"#FFFFFF\"} />\n                    <circle cx={'70%'} cy={'25%'} r={'25%'} fill={aanbieder.color.toString()} />\n                  </svg>\n                </div>\n                <div className=\"filter-aanbieders-itemlabel\">\n                  { aanbieder.name }\n                </div>\n              </div>\n            )\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemAanbieders;\n","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ModalBox from './ModalBox.jsx';\nimport './css/FilteritemZones.css';\n\nfunction FilteritemZones() {\n  const dispatch = useDispatch()\n  \n  const zones = useSelector(state => {\n    return (state.metadata && state.metadata.zones) ? state.metadata.zones : [];\n  });\n  \n  const filterZones = useSelector(state => {\n    return state.filter ? state.filter.zones : 0;\n  });\n  \n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : 0;\n  });\n  \n  let [showSelect, setShowSelect] = useState(false);\n  let [filterSearch, setFilterSearch] = useState(\"\");\n  \n  const addToFilterZones = (zone) => {\n    dispatch({ type: 'ADD_TO_FILTER_ZONES', payload: zone })\n  }\n  \n  const removeFromFilterZones = (zone) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_ZONES', payload: zone })\n  }\n  \n  const clearFilterZones = () => {\n    dispatch({ type: 'CLEAR_FILTER_ZONES', payload: null })\n  }\n\n  const changeSearchText = e => { setFilterSearch(e.target.value) }\n\n  const clearSearchText = e => { setFilterSearch(\"\") }\n\n  const renderSelectZones = (zones) => {\n    const filteredZones = zones.filter(zone=>{\n      return filterSearch===''|| zone.name.toLowerCase().includes(filterSearch.toLowerCase())\n    })\n    \n    return (\n      <ModalBox closeFunction={setShowSelect}>\n        <div className=\"filter-form-selectie\">\n            <div className=\"filter-form-search-container mb-3\">\n              <div className=\"filter-form-title\">Selecteer Zones</div>\n              <div className=\"filter-form-search-container-2\">\n              <input type=\"text\"\n                className=\"filter-form-search\"\n                onChange={changeSearchText}\n                value={filterSearch}\n                placeholder={\"zoek\"}/>\n              <div className=\"ml-3 flex flex-col justify-center h-full\">\n                {  filterSearch!==\"\" ?\n                      <div className=\"filter-zones-img-cancel cursor-pointer\" onClick={clearSearchText} />\n                    :\n                      <div className=\"filter-zones-img-search cursor-pointer\" />\n                }\n              </div>\n              </div>\n              <div>&nbsp;</div>\n            </div>\n            <div className=\"filter-form-values\">\n              { filteredZones.map(a=>{\n                  let isSelected = filterZones.includes(a.zone_id);\n                  if(isSelected) {\n                    return (<div key={'item-'+a.zone_id} className=\"\n                      form-item-selected\n                      form-item\n                      cursor-pointer\n                    \" onClick={e=>{ e.stopPropagation(); removeFromFilterZones(a.zone_id)}}>{a.name}</div>)\n                  } else {\n                    return (<div key={'item-'+a.zone_id} className=\"\n                      form-item\n                      cursor-pointer\n                    \" onClick={e=>{ e.stopPropagation(); addToFilterZones(a.zone_id)}}>{a.name}</div>)\n                  }\n                })\n              }\n          </div>\n        </div>\n      </ModalBox>)\n  }\n  \n  let selectedzones = [];\n  let zonetxt = \"\"\n  try {\n    selectedzones = filterZones.split(',')\n    let aantal = selectedzones.length;\n    if(aantal>1) {\n      zonetxt = aantal + \" zones\";\n    } else {\n      let thezone = zones.find(zone=>(zone.zone_id.toString()===selectedzones[0]));\n      zonetxt = (thezone && thezone.name) || '';\n    }\n  } catch(ex) {\n    zonetxt = \"\";\n  }\n  \n  if(zonetxt===\"\") { zonetxt = \"Alle Zones\" }\n  \n  let isActive = filterGebied!=='' && zones.length > 0;\n  \n  const filteredZones = zones.filter(zone=>{\n    return selectedzones.includes(zone.zone_id.toString())\n  })\n  \n  if(! isActive) {\n    return <></>\n  }\n\n  return (\n    <div className={`filter-zones-container ${isActive===true ? '':'not-active'}`}>\n      <div className=\"filter-zones-title\" onClick={e=>{isActive && setShowSelect(!showSelect)}}>Zones</div>\n      <div className=\"filter-zones-box-row\">\n        <div\n          className=\"filter-zones-value flex flex-col justify-center cursor-pointer h-full\"\n          onClick={e=>{isActive && setShowSelect(!showSelect)}}\n          >\n          {zonetxt}\n        </div>\n        {  filterZones!==\"\" ?\n              <div className=\"filter-zones-img-cancel\" onClick={clearFilterZones}></div>\n            :\n              null\n        }\n        { showSelect ? renderSelectZones(zones) : null }\n        <div className=\"ml-3 flex flex-col justify-center h-full\">\n          <div className=\"filter-zones-img-search cursor-pointer\" onClick={e=>{setShowSelect(!showSelect)}} />\n        </div>\n      </div>\n      <div className=\"filter-zones-zonelist\">\n      {\n        filteredZones.map(zone => {\n          return (\n            <div className=\"filter-zones-zoneitem\" key={zone.zone_id}>\n              { zone.name}\n              <div className=\"filter-zones-img-zoneitem-cancel\" onClick={e=>{ e.stopPropagation(); removeFromFilterZones(zone.zone_id)}}></div>\n            </div>\n          )\n        })\n      }\n      </div>\n    </div>\n  )\n  \n  // return (\n  //     <div className=\"filter-item\" onClick={e=>{setShowSelect(!showSelect)}}>\n  //       <div className=\"filter-title\">Zones</div>\n  //       <div className=\"filter-value\">{zonetxt}</div>\n  //       { showSelect ? renderSelectZones(zones) : null }\n  //     </div>\n  //   )\n}\n\nexport default FilteritemZones;","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemMarkers.css';\n\nfunction FilteritemMarkers() {\n  const dispatch = useDispatch()\n\n  const markers = useSelector(state => {\n    return [\n      { id: 0, color: '#1FA024', fillcolor: '#1FA024', name: '< 24 uur'},\n      { id: 1, color: '#48E248', fillcolor: '#FFFFFF', name: '< 48 uur'},\n      { id: 2, color: '#FFD837', fillcolor: '#FFFFFF', name: '< 72 uur'},\n      { id: 3, color: '#FE862E', fillcolor: '#FE862E', name: '< 5 d'},\n      { id: 4, color: '#FD3E48', fillcolor: '#FD3E48', name: '> 7 d'},\n    ];\n  });\n  \n  const filterMarkersExclude = useSelector(state => {\n    return state.filter ? state.filter.markersexclude : '';\n  }) || '';\n  \n  const addToFilterMarkersExclude = (marker) => {\n    dispatch({ type: 'ADD_TO_FILTER_MARKERS_EXCLUDE', payload: marker })\n  }\n  \n  const removeFromFilterMarkersExclude = (marker) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_MARKERS_EXCLUDE', payload: marker })\n  }\n  \n  const clearFilterMarkersExclude = () => {\n    dispatch({ type: 'CLEAR_FILTER_MARKERS_EXCLUDE', payload: null })\n  }\n  \n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = id => {\n    console.log(\"clickfilter [%s]<\", filterMarkersExclude);\n    // If no filters were set, only show this provider and hide all others\n    if(filterMarkersExclude===\"\") {\n      // Disable all but the selected provider\n      markers.map(x => {\n        if(x.id !== id) {\n          addToFilterMarkersExclude(x.id)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addToFilterMarkersExclude(id)\n    }\n  }\n  \n  \n  return (\n    <div className=\"filter-markers-container\">\n    <div className=\"filter-markers-title-row\">\n      <div className=\"filter-markers-title\">Parkeerduur</div>\n      { filterMarkersExclude!==''?\n          <div className=\"filter-markers-reset cursor-pointer\" onClick={clearFilterMarkersExclude}>\n            reset\n          </div>\n          :\n          null\n      }\n    </div>\n      <div className=\"filter-markers-box-row\">\n        {\n          markers.map(marker => {\n            let excluded = filterMarkersExclude.split(\",\").includes(marker.id.toString());\n            \n            let className = excluded ? \"filter-markers-item-excluded\": \"filter-markers-item\";\n            \n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromFilterMarkersExclude(marker.id)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(marker.id)};\n                \n            return (\n              <div className={className} key={marker.id}>\n                <div className=\"filter-markers-marker\" onClick={handler}>\n                  <svg viewBox='0 0 30 30' >\n                    <circle cx={'50%'} cy={'50%'} r={'40%'} fill={marker.color} />\n                    <circle cx={'50%'} cy={'50%'} r={'34%'} fill={marker.fillcolor} />\n                  </svg>\n                </div>\n                <div className=\"filter-markers-itemlabel\">\n                  { marker.name }\n                </div>\n              </div>)\n          })\n        }\n      </div>\n    </div>\n  )\n  \n  // return (\n  //     <div className=\"filter-item\" onClick={e=>{setShowSelect(!showSelect)}}>\n  //       <div className=\"filter-title\">Markers</div>\n  //       <div className=\"filter-value\">{zonetxt}</div>\n  //       { showSelect ? renderSelectMarkers(zones) : null }\n  //     </div>\n  //   )\n}\n\nexport default FilteritemMarkers;","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemVoertuigTypes.css';\n\nfunction FilteritemVoertuigTypes() {\n  const dispatch = useDispatch()\n\n  const voertuigtypes = useSelector(state => {\n    return [\n      { id: 'bicycle', name: 'Fiets'},\n      { id: 'cargo-bicycle', name: 'Bakfiets'},\n      { id: 'scooter', name: 'Scooter'},\n      { id: 'car', name: 'Auto'},\n      { id: 'other', name: 'Onbekend'},\n    ];\n  });\n  \n  const filterVoertuigTypesExclude = useSelector(state => {\n    if(Array.isArray(state.filter.voertuigtypesexclude)) {\n      return '';\n    }\n    \n    return state.filter ? state.filter.voertuigtypesexclude : '';\n  }) || '';\n  \n  const addToFilterVoertuigTypesExclude = (voertuigtype) => {\n    const nexcluded = (filterVoertuigTypesExclude || '').split(\",\").length;\n    if(nexcluded===voertuigtypes.length-1) {\n      // console.log(\"needs at least one provider\")\n      return;\n    }\n\n    dispatch({ type: 'ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE', payload: voertuigtype })\n  }\n  \n  const removeFromFilterVoertuigTypesExclude = (voertuigtype) => {\n    console.log('REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE %s', voertuigtype)\n    dispatch({ type: 'REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE', payload: voertuigtype })\n  }\n  \n  const clearFilterVoertuigTypesExclude = () => {\n    dispatch({ type: 'CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE', payload: null })\n  }\n  \n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = type => {\n    console.log(\"clickfilter [%s]<\", filterVoertuigTypesExclude);\n    // If no filters were set, only show this provider and hide all others\n    if(filterVoertuigTypesExclude===\"\") {\n      // Disable all but the selected provider\n      voertuigtypes.map(x => {\n        if(x.id !== type) {\n          addToFilterVoertuigTypesExclude(x.id)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addToFilterVoertuigTypesExclude(type)\n    }\n  }\n  \n  return (\n    <div className=\"filter-voertuigtypes-container\">\n      <div className=\"filter-voertuigtypes-title-row\">\n        <div className=\"filter-voertuigtypes-title\">Vervoerstype</div>\n        { filterVoertuigTypesExclude!==''?\n            <div className=\"filter-voertuigtypes-reset cursor-pointer\" onClick={clearFilterVoertuigTypesExclude}>\n              reset\n            </div>\n            :\n            null\n        }\n      </div>\n      <div className=\"filter-voertuigtypes-box-row\">\n        {\n          voertuigtypes.map((voertuigtype,idx) => {\n            let excluded = (filterVoertuigTypesExclude ? filterVoertuigTypesExclude: '').split(\",\").includes(voertuigtype.id);\n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromFilterVoertuigTypesExclude(voertuigtype.id)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(voertuigtype.id)};\n              \n            let baseClassName = `${excluded ? \"filter-voertuigtypes-item-excluded\": \"filter-voertuigtypes-item\"}`;\n            let extraclass = \"\";\n            switch(voertuigtype.id) {\n              case \"bicycle\": extraclass = \"filter-voertuigtypes-icon-bicycle\"; break;\n              case \"cargo-bicycle\": extraclass = \"filter-voertuigtypes-icon-cargo-bicycle\"; break;\n              case \"scooter\": extraclass = \"filter-voertuigtypes-icon-scooter\"; break;\n              case \"car\": extraclass = \"filter-voertuigtypes-icon-car\"; break;\n              case \"other\" : extraclass = \"filter-voertuigtypes-icon-other\"; break;\n              default:\n                break;\n            }\n                \n            return (\n              <div className={`${baseClassName}${idx===voertuigtypes.length-1?' filter-voertuigtypes-item-last':''}`} key={voertuigtype.id} onClick={handler}>\n                <div className={`filter-voertuigtypes-icon ${extraclass}`} onClick={handler} />\n                <div className=\"filter-voertuigtypes-itemlabel\">\n                  { voertuigtype.name }\n                </div>\n              </div>)\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemVoertuigTypes;","import './css/Filterbar.css';\n// import SlideBox from '../SlideBox/SlideBox.jsx';\nimport FilteritemGebieden from './FilteritemGebieden.jsx';\nimport FilteritemDatum from './FilteritemDatum.jsx';\nimport FilteritemInterval from './FilteritemInterval.jsx';\nimport FilteritemAanbieders from './FilteritemAanbieders.jsx';\nimport FilteritemZones from './FilteritemZones.jsx';\nimport FilteritemMarkers from './FilteritemMarkers.jsx';\nimport FilteritemVoertuigTypes from './FilteritemVoertuigTypes.jsx';\n\nfunction Filterbar({showinterval=false, visible=false}) {\n  // console.log(\"show interval %s\", showinterval)\n    {/*<div className=\"filter-bar\" style={{left: visible ? '0':'-324px'}}>*/}\n  return (\n    <div className=\"filter-bar\" style={{left: visible ? '0':'-324px'}}>\n      { showinterval\n        ? <FilteritemInterval />\n        : <FilteritemDatum />\n      }\n      <FilteritemGebieden />\n      <FilteritemZones />\n      <FilteritemMarkers />\n      <FilteritemVoertuigTypes />\n      <FilteritemAanbieders />\n    </div>\n  )\n}\n\nexport default Filterbar;\n","import './Topbar.css';\nimport { Link, useLocation } from \"react-router-dom\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { clearUser } from '../../actions/authentication';\n\nfunction Topbar() {\n  const dispatch = useDispatch();\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n\n  const logOut = () => {\n    if (isLoggedIn) {\n      dispatch( clearUser() );\n    }\n  }\n\n  return (\n    <div className=\"topbar flex justify-between\">\n      <div className=\"topbar-logo\" />\n      {isLoggedIn\n        ? <Link className=\"text-right\" onClick={logOut} to=\"/\">\n            Log uit\n          </Link>\n        : <Link className=\"text-right\" to=\"/login\">\n            Log in\n          </Link>\n      }\n    </div>\n  )\n}\n\n        \n\n\nexport default Topbar;\n","const cPublicAanbieders = [\n    { value:\"cykl\", name:\"Cykl\" },\n    { value:\"flickbike\", name:\"Flickbike\" },\n    { value:\"donkey\", name:\"Donkey\" },\n    { value:\"mobike\", name:\"Mobike\" },\n    { value:\"htm\", name:\"HTM\" },\n    { value:\"gosharing\", name:\"GO\" },\n    { value:\"check\", name:\"CHECK\" },\n    { value:\"felyx\", name:\"Felyx\" },\n    { value:\"deelfietsnederland\", name:\"Deelfiets\" },\n    { value:\"keobike\", name:\"Keobike\" },\n    { value:\"lime\", name:\"Lime\" },\n    { value:\"baqme\", name:\"BAQME\" },\n    { value:\"cargoroo\", name:\"Cargoroo\" },\n    { value:\"uwdeelfiets\", name:\"uwdeelfiets\" },\n    { value:\"hely\", name:\"Hely\" }\n  ];\n  \nconst cPublicGebieden = [\n  { gm_code:\"\", name:\"Alle Gebieden\" }, { gm_code:\"GM0518\", name:\"'s-Gravenhage\" }, { gm_code:\"GM0796\", name:\"'s-Hertogenbosch\" }, { gm_code:\"GM0613\", name:\"Albrandswaard\" }, { gm_code:\"GM0141\", name:\"Almelo\" }, { gm_code:\"GM0034\", name:\"Almere\" }, { gm_code:\"GM0484\", name:\"Alphen aan den Rijn\" }, { gm_code:\"GM0307\", name:\"Amersfoort\" }, { gm_code:\"GM0362\", name:\"Amstelveen\" }, { gm_code:\"GM0363\", name:\"Amsterdam\" }, { gm_code:\"GM0200\", name:\"Apeldoorn\" }, { gm_code:\"GM0202\", name:\"Arnhem\" }, { gm_code:\"GM0106\", name:\"Assen\" }, { gm_code:\"GM0489\", name:\"Barendrecht\" }, { gm_code:\"GM0203\", name:\"Barneveld\" }, { gm_code:\"GM0373\", name:\"Bergen (NH\" }, { gm_code:\"GM0753\", name:\"Best\" }, { gm_code:\"GM0375\", name:\"Beverwijk\" }, { gm_code:\"GM0377\", name:\"Bloemendaal\" }, { gm_code:\"GM0758\", name:\"Breda\" }, { gm_code:\"GM0312\", name:\"Bunnik\" }, { gm_code:\"GM0313\", name:\"Bunschoten\" }, { gm_code:\"GM0502\", name:\"Capelle aan den IJssel\" }, { gm_code:\"GM0310\", name:\"De Bilt\" }, { gm_code:\"GM0736\", name:\"De Ronde Venen\" }, { gm_code:\"GM0503\", name:\"Delft\" }, { gm_code:\"GM0150\", name:\"Deventer\" }, { gm_code:\"GM0384\", name:\"Diemen\" }, { gm_code:\"GM0505\", name:\"Dordrecht\" }, { gm_code:\"GM0228\", name:\"Ede\" }, { gm_code:\"GM0772\", name:\"Eindhoven\" }, { gm_code:\"GM0153\", name:\"Enschede\" }, { gm_code:\"GM0232\", name:\"Epe\" }, { gm_code:\"GM1771\", name:\"Geldrop-Mierlo\" }, { gm_code:\"GM1942\", name:\"Gooise Meren\" }, { gm_code:\"GM0014\", name:\"Groningen\" }, { gm_code:\"GM0392\", name:\"Haarlem\" }, { gm_code:\"GM0394\", name:\"Haarlemmermeer\" }, { gm_code:\"GM0243\", name:\"Harderwijk\" }, { gm_code:\"GM0246\", name:\"Heerde\" }, { gm_code:\"GM0794\", name:\"Helmond\" }, { gm_code:\"GM0164\", name:\"Hengelo\" }, { gm_code:\"GM0798\", name:\"Hilvarenbeek\" }, { gm_code:\"GM0402\", name:\"Hilversum\" }, { gm_code:\"GM0353\", name:\"IJsselstein\" }, { gm_code:\"GM0166\", name:\"Kampen\" }, { gm_code:\"GM0542\", name:\"Krimpen aan den IJssel\" }, { gm_code:\"GM1621\", name:\"Lansingerland\" }, { gm_code:\"GM0080\", name:\"Leeuwarden\" }, { gm_code:\"GM1916\", name:\"Leidschendam-Voorburg\" }, { gm_code:\"GM0327\", name:\"Leusden\" }, { gm_code:\"GM0809\", name:\"Loon op Zand\" }, { gm_code:\"GM0556\", name:\"Maassluis\" }, { gm_code:\"GM1842\", name:\"Midden-Delfland\" }, { gm_code:\"GM1952\", name:\"Midden-Groningen\" }, { gm_code:\"GM0356\", name:\"Nieuwegein\" }, { gm_code:\"GM0267\", name:\"Nijkerk\" }, { gm_code:\"GM0268\", name:\"Nijmegen\" }, { gm_code:\"GM1930\", name:\"Nissewaard\" }, { gm_code:\"GM0820\", name:\"Nuenen, Gerwen en Nederwetten\" }, { gm_code:\"GM0302\", name:\"Nunspeet\" }, { gm_code:\"GM0826\", name:\"Oosterhout\" }, { gm_code:\"GM0431\", name:\"Oostzaan\" }, { gm_code:\"GM1926\", name:\"Pijnacker-Nootdorp\" }, { gm_code:\"GM0273\", name:\"Putten\" }, { gm_code:\"GM0597\", name:\"Ridderkerk\" }, { gm_code:\"GM0603\", name:\"Rijswijk\" }, { gm_code:\"GM1674\", name:\"Roosendaal\" }, { gm_code:\"GM0599\", name:\"Rotterdam\" }, { gm_code:\"GM0606\", name:\"Schiedam\" }, { gm_code:\"GM0848\", name:\"Son en Breugel\" }, { gm_code:\"GM0855\", name:\"Tilburg\" }, { gm_code:\"GM1730\", name:\"Tynaarlo\" }, { gm_code:\"GM0344\", name:\"Utrecht\" }, { gm_code:\"GM1581\", name:\"Utrechtse Heuvelrug\" }, { gm_code:\"GM0861\", name:\"Veldhoven\" }, { gm_code:\"GM0622\", name:\"Vlaardingen\" }, { gm_code:\"GM0865\", name:\"Vught\" }, { gm_code:\"GM0866\", name:\"Waalre\" }, { gm_code:\"GM0867\", name:\"Waalwijk\" }, { gm_code:\"GM0289\", name:\"Wageningen\" }, { gm_code:\"GM0629\", name:\"Wassenaar\" }, { gm_code:\"GM1960\", name:\"West Betuwe\" }, { gm_code:\"GM1783\", name:\"Westland\" }, { gm_code:\"GM0637\", name:\"Zoetermeer\" }, { gm_code:\"GM0642\", name:\"Zwijndrecht\" }, { gm_code:\"GM0193\", name:\"Zwolle\" }\n]\n\nconst cPublicVoertuigTypes = [\n  { id: 0, name:\"Alle voertuigtypes\" },\n  { id: 1, name:\"Onbekend\" },\n  { id: 2, name: \"Fiets\" }\n]\n\nvar store_accesscontrollist = undefined;\n\nconst isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nvar timerid_gebiedenaanbieders = undefined;\n\nconst updateAccessControlList = ()  => {\n  let delay = 5 * 1000;\n  try {\n    if(undefined===store_accesscontrollist) {\n      // console.log(\"no redux state available yet - skipping metadata update\");\n      return false;\n    }\n    \n    const state = store_accesscontrollist.getState();\n    if(!isLoggedIn(state)) {\n      // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n      store_accesscontrollist.dispatch({ type: 'SET_GEBIEDEN', payload: cPublicGebieden});\n      \n      // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n      store_accesscontrollist.dispatch({ type: 'SET_AANBIEDERS', payload: cPublicAanbieders});\n    } else {\n      let url=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\";\n      let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      \n      fetch(url, options).then((response) => {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n\n        response.json()\n          .then((metadata) => {\n            // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n            // console.log(\"dispatch gebieden \", metadata.municipalities);\n            store_accesscontrollist.dispatch({ type: 'SET_GEBIEDEN', payload: metadata.municipalities});\n            \n            // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n            store_accesscontrollist.dispatch({ type: 'SET_AANBIEDERS', payload: metadata.operators});\n\n            // items -> {\"id\": 1, \"name\": \"asdfasdfadfa\" }\n            let types = cPublicVoertuigTypes; // TODO: get from ACL once implemented\n            store_accesscontrollist.dispatch({ type: 'SET_VEHICLE_TYPES', payload: types});\n          })\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n        });\n        return true;\n      }\n  } catch(ex) {\n    console.error(\"Unable to update gebieden\", ex)\n    delay = 5 * 1000;\n    \n    return false;\n  } finally {\n    timerid_gebiedenaanbieders = setTimeout(updateAccessControlList, delay);\n  }\n}\n\nexport const forceUpdateAccessControlList = () => {\n  if(undefined!==timerid_gebiedenaanbieders) { clearTimeout(timerid_gebiedenaanbieders); }\n  updateAccessControlList();\n}\n\nexport const initUpdateAccessControlList = (_store) => {\n  store_accesscontrollist = _store;\n}\n\nforceUpdateAccessControlList();\n\n","var store_zonesgeodata = undefined;\n\nconst isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nvar timerid_zonesgeodata = undefined;\n\n// const cTestFeatureNL = {\n//    \"type\":\"Feature\",\n//    \"geometry\": {\n//      \"type\": \"Polygon\",\n//      \"coordinates\":\n//       [\n//         [[4,53],[6, 53],[6, 52],[4,52],[4,53]]\n//       ]\n//   }\n// }\n\nexport const getEmptyZonesGeodataPayload = () => {\n  return  {\n    \"data\": {\n      \"type\":\"FeatureCollection\",\n      \"features\":[]\n    },\n    \"filter\": \"\"\n  }\n}\n\nconst updateZonesGeodata = ()  => {\n  let delay = 5 * 1000;\n  try {\n    if(undefined===store_zonesgeodata) {\n      console.log(\"no redux state available yet - skipping zones geodata update\");\n      return false;\n    }\n    \n    const state = store_zonesgeodata.getState();\n    if(!isLoggedIn(state)||!state||state.filter.gebied===\"\"||state.filter.zones.length===0) {\n      store_zonesgeodata.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n    } else {\n      // https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=GM0518\n      let url_zonesgeodata=\"https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=\"+state.filter.zones+\"&&include_geojson=true\";\n      // let url_geodata=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\"\n      // https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=34217&include_geojson=true\n      let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      fetch(url_zonesgeodata, options).then((response) => {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n      \n        response.json()\n          .then((metadata) => {\n            // convert to standard geojson here\n            let geojson = {\n               \"type\":\"FeatureCollection\",\n               \"features\":[]\n            }\n\n            metadata.zones.forEach(zonedata => {\n              // console.log(\"got zonedatas\", zonedata)\n              \n              switch(zonedata.geojson.type) {\n                case \"MultiPolygon\":\n                case \"Polygon\":\n                  let feature = {\n                     \"type\":\"Feature\",\n                     \"geometry\": zonedata.geojson\n                  }\n                  geojson.features.push(feature);\n                  break;\n                default:\n                  console.log(\"pollMetadataZonesgeodata - don't know how to handle %s\", zonedata.type, zonedata);\n                  break\n              }\n            })\n            \n            let payload = { data: geojson, filter: state.filter.zones};\n            store_zonesgeodata.dispatch({ type: 'SET_ZONES_GEODATA', payload});\n          }).catch(ex=>{ console.error(\"unable to decode JSON\", ex); });\n        }).catch(ex=>{ console.error(\"unable to fetch zone geodata\"); });\n      }\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n    delay = 5 * 1000;\n  } finally {\n    timerid_zonesgeodata = setTimeout(updateZonesGeodata, delay);\n  }\n}\n\nexport const forceUpdateZonesgeodata = () => {\n  if(undefined!==timerid_zonesgeodata) { clearTimeout(timerid_zonesgeodata); }\n  updateZonesGeodata();\n}\n\nexport const initUpdateZonesgeodata = (_store) => {\n  store_zonesgeodata = _store;\n}\n","import { getEmptyZonesGeodataPayload } from './pollMetadataZonesgeodata';\nvar store_zones = undefined;\n\nconst isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nvar timerid_zones = undefined;\n\nconst updateZones = ()  => {\n  let delay = 5 * 1000;\n  try {\n    if(undefined===store_zones) {\n      // console.log(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n    \n    const state = store_zones.getState();\n    if(!isLoggedIn(state)||!state||state.filter.gebied===\"\") {\n      store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n    } else {\n      // https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=GM0518\n      let url_zones=\"https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=\"+state.filter.gebied;\n      // let url_geodata=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\"\n      // https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=34217&include_geojson=true\n      let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      \n      fetch(url_zones, options).then((response) => {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n\n        response.json()\n          .then((metadata) => {\n            // items: { \"municipality\": \"GM0785\", \"name\": \"Goirle\", \"owner\": null, \"zone_id\": 34278, \"zone_type\": \"municipality\"}\n            store_zones.dispatch({ type: 'SET_ZONES', payload: metadata.zones});\n          })\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n        });\n      }\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n    delay = 5 * 1000;\n  } finally {\n    timerid_zones = setTimeout(updateZones, delay);\n  }\n}\n\nexport const forceUpdateZones = () => {\n  if(undefined!==timerid_zones) { clearTimeout(timerid_zones); }\n  updateZones();\n}\n\nexport const initUpdateZones = (_store) => {\n  // console.log(\"initUpdateZones\")\n  store_zones = _store;\n  forceUpdateZones();\n}\n","export const createFilterparameters = (isParkingData=true, filter, metadata) => {\n  // add zones\n  let filterparams = [];\n  if(filter.zones!==\"\") {\n    filterparams.push(\"zone_ids=\"+filter.zones);\n  } else if(filter.gebied!==\"\") {\n    // create zone filter\n    let candidates = [];\n    let municipality = metadata.gebieden.find(gebied=>gebied.gm_code===filter.gebied);\n    if(undefined!==municipality) {\n      candidates = metadata.zones.filter(zone=>(zone.municipality===municipality.gm_code&&zone.name===municipality.name));\n    } else {\n    }\n    if(candidates.length===1) {\n      filterparams.push(\"zone_ids=\"+candidates[0].zone_id);\n    } else {\n      console.error(\"zero or multiple multiple zones found for a single municipality (%s)\", filter.gebied);\n    }\n    \n  }\n\n  if(filter.aanbiedersexclude!==\"\" && filter.aanbiedersexclude!==undefined) {\n    let filteritems = filter.aanbiedersexclude.split(\",\");\n    let selectedaanbieders = metadata.aanbieders\n      .filter(aanbieder=>(filteritems.includes(aanbieder.system_id)===false))\n      .map(aanbieder=>aanbieder.system_id).join(\",\");\n\n    filterparams.push(\"operators=\" + selectedaanbieders);\n  }\n\n  if(isParkingData) {\n    let ts = new Date().toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    if(filter.datum!==\"\") {\n      ts = new Date(filter.datum).toISOString().replace(/.\\d+Z$/g, \"Z\");\n    }\n    filterparams.push(\"timestamp=\"+ts)\n  }\n  else {\n    let ts1 = new Date().toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    let ts2 = ts1;\n    const isInvalid = () => {\n      return ! filter\n          || filter.intervalstart === \"\"\n          || filter.intervalend === \"\"\n          || filter.intervalstart === undefined\n          || filter.intervalend === undefined;\n    }\n    if(! isInvalid()) {\n      ts1 = new Date(filter.intervalstart).toISOString().replace(/.\\d+Z$/g, \"Z\");\n      ts2 = new Date(filter.intervalend).toISOString().replace(/.\\d+Z$/g, \"Z\");\n    }\n    filterparams.push(\"start_time=\" + ts1 + \"&end_time=\" + ts2)\n  }\n  \n  return filterparams;\n}\n\nexport const isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nexport const convertDurationToColor = (duration) => {\n  if (duration <= 60) {\n    return \"#38ff71\";\n  }\n  if (duration <= 24 * 60) {\n    return \"#008c28\";\n  }\n  if (duration <= 24 * 60 * 4) {\n    return \"#fff700\";\n  }\n  return \"#cc0000\";\n}\n\n","import moment from 'moment';\nimport { createFilterparameters, isLoggedIn, convertDurationToColor } from './pollTools.js';\n\nvar store_parkingdata = undefined;\n\nvar timerid_parkingdata = undefined;\n\nvar recursive = 0;\n\nconst updateParkingData = ()  => {\n  recursive += 1;\n  if(recursive>1) {\n    console.log(\"recursive updateparkingdata call (level %s)\", recursive);\n    return false;\n  }\n\n  // console.log(\"updateParkingData\")\n  let delay = 5 * 1000;\n  try {\n    if(undefined===store_parkingdata) {\n      // console.log(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n    \n    const state = store_parkingdata.getState();\n    const canfetchdata = isLoggedIn(state)&&state&&state.filter&&state.authentication.user_data.token;\n    if(!canfetchdata) {\n      store_parkingdata.dispatch({type: 'SET_PARKINGDATA', payload: []});\n    } else {\n      let url = \"https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space\";\n      let options = {};\n      if(null!==state.filter&&null!==state.authenticationdata) {\n        // url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp=2021-10-22T15:46:20Z\"+aanbiedersfilter; // + \"&zone_ids=34234\";\n        url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events\";\n        let filterparams = createFilterparameters(true, state.filter, state.metadata);\n        if(filterparams.length>0) {\n          url += \"?\" + filterparams.join(\"&\");\n        }\n        options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      }\n      fetch(url, options).then(function(response) {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n        \n        response.json().then(function(vehicles) {\n          if(isLoggedIn) {\n            vehicles = vehicles.park_events\n          }\n          let geoJson = {\n             \"type\":\"FeatureCollection\",\n             \"features\":[]\n          }\n      \n          const md5 = require('md5');\n          var current_time = moment();\n          vehicles.forEach(v => {\n            let in_public_space_since = isLoggedIn ? v.start_time : v.in_public_space_since;\n      \n            var minutes = current_time.diff(moment(in_public_space_since), 'minutes');\n            const color = convertDurationToColor(minutes);\n      \n            let feature = {\n               \"type\":\"Feature\",\n               \"properties\":{\n                  \"id\":md5(v.location.latitude+v.location.longitude),\n                  \"system_id\": v.system_id,\n                  \"in_public_space_since\": in_public_space_since,\n                  \"color\": color\n               },\n               \"geometry\":{\n                  \"type\":\"Point\",\n                  \"coordinates\":[\n                     v.location.longitude,\n                     v.location.latitude,\n                     0.0\n                  ]\n               }\n            }\n      \n            geoJson.features.push(feature);\n            // new maplibregl.Marker({color: \"#FF0000\"})\n            //   .setLngLat([x.location.longitude, x.location.latitude])\n            //   .addTo(map.current);\n            //\n            // return;\n          })\n      \n          store_parkingdata.dispatch({\n            type: 'SET_VEHICLES',\n            payload: geoJson\n          })\n      \n          // setJson(json);\n          // setTimestamp(new Date());\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n          // setJson(false);\n        });\n      }).catch(ex=>{\n        console.error(\"fetch error - unable to fetch JSON from %s\", url);\n        // setJson(false);\n      });\n    }\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n    delay = 5 * 1000;\n  } finally {\n    recursive -= 1;\n    timerid_parkingdata = setTimeout(updateParkingData, delay);\n  }\n}\n\nexport const forceUpdateParkingData = () => {\n  if(undefined!==timerid_parkingdata) { clearTimeout(timerid_parkingdata); }\n  updateParkingData();\n}\n\nexport const initUpdateParkingData = (_store) => {\n  // console.log(\"initUpdateParkingData\")\n  store_parkingdata = _store;\n  forceUpdateParkingData();\n}\n","// import moment from 'moment';\nimport { createFilterparameters, isLoggedIn } from './pollTools.js';\n\nvar store_tripdata = undefined;\nvar timerid_tripdata = undefined;\n\n// Function that gets trip data and saves it into store\nconst updateTripData = ()  => {\n  let delay = 5 * 1000;\n  try {\n    if(undefined===store_tripdata) {\n      console.log(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n\n    const state = store_tripdata.getState();\n    const canfetchdata = isLoggedIn(state)&&state&&state.filter&&state.authentication.user_data.token;\n    if(!canfetchdata) {\n      store_tripdata.dispatch({ type: 'SET_TRIPDATA', payload: []});\n    } else {\n      let url = \"https://api.deelfietsdashboard.nl/dashboard-api/public/trips_in_public_space\";\n      let options = {};\n      if(null!==state.filter&&null!==state.authenticationdata) {\n        url = \"https://api.deelfietsdashboard.nl/dashboard-api/trips\";\n        let filterparams = createFilterparameters(false, state.filter, state.metadata);\n        if(filterparams.length>0) {\n          url += \"?\" + filterparams.join(\"&\");\n        }\n        options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      }\n      fetch(url, options).then(function(response) {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n        \n        response.json().then(function(data) {\n          // console.log(data);\n          // return;\n          \n          let trips = [];\n          if(isLoggedIn) {\n            trips = data.trips\n          }\n          let geoJson = {\n             \"type\":\"FeatureCollection\",\n             \"features\":[]\n          }\n      \n          const md5 = require('md5');\n          // var current_time = moment();\n          trips.forEach(t => {\n            // let in_public_space_since = isLoggedIn ? v.start_time : v.in_public_space_since;\n            //\n            // var minutes = current_time.diff(moment(in_public_space_since), 'minutes');\n            // const color = convertDurationToColor(minutes);\n            \n            // {\n            //     \"bike_id\": \"check:e2b733e9-ac8f-459e-9904-19775ff730d7\",\n            //     \"end_location\": {\n            //         \"latitude\": 51.92392,\n            //         \"longitude\": 4.46867\n            //     },\n            //     \"end_time\": \"2021-11-01T18:13:01.927898Z\",\n            //     \"start_location\": {\n            //         \"latitude\": 51.91227,\n            //         \"longitude\": 4.46921\n            //     },\n            //     \"start_time\": \"2021-11-01T17:52:31.595659Z\",\n            //     \"system_id\": \"check\",\n            //     \"trip_id\": 17179722\n            // }\n      \n            let feature = {\n               \"type\":\"Feature\",\n               \"properties\":{\n                  \"id\":md5(t.start_location.latitude+t.start_location.longitude),\n                  \"system_id\": t.system_id,\n                  // \"in_public_space_since\": in_public_space_since,\n                  \"color\": \"#38ff71\" // color\n               },\n               \"geometry\":{\n                  \"type\":\"Point\",\n                  \"coordinates\":[\n                     t.start_location.longitude,\n                     t.start_location.latitude,\n                     0.0\n                  ]\n               }\n            }\n      \n            geoJson.features.push(feature);\n\n            let feature2 = {\n               \"type\":\"Feature\",\n               \"properties\":{\n                  \"id\":md5(t.end_location.latitude+t.end_location.longitude),\n                  \"system_id\": t.system_id,\n                  // \"in_public_space_since\": in_public_space_since,\n                  \"color\": \"#cc0000\" // color\n               },\n               \"geometry\":{\n                  \"type\":\"Point\",\n                  \"coordinates\":[\n                     t.end_location.longitude,\n                     t.end_location.latitude,\n                     0.0\n                  ]\n               }\n            }\n      \n            geoJson.features.push(feature2);\n            // new maplibregl.Marker({color: \"#FF0000\"})\n            //   .setLngLat([x.location.longitude, x.location.latitude])\n            //   .addTo(map.current);\n            //\n            // return;\n          })\n      \n          store_tripdata.dispatch({\n            type: 'SET_TRIPS',\n            payload: geoJson\n          })\n        \n          // setJson(json);\n          // setTimestamp(new Date());\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n          // setJson(false);\n        });\n      }).catch(ex=>{\n        console.error(\"fetch error - unable to fetch JSON from %s\", url);\n        // setJson(false);\n      });\n    }\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n    delay = 5 * 1000;\n  } finally {\n    timerid_tripdata = setTimeout(updateTripData, delay);\n  }\n}\n\nexport const forceUpdateTripData = () => {\n  if(undefined!==timerid_tripdata) { clearTimeout(timerid_tripdata); }\n  updateTripData();\n}\n\nexport const initUpdateTripData = (_store) => {\n  // console.log(\"initUpdateTripData\")\n  store_tripdata = _store;\n  forceUpdateTripData();\n}\n","import { useEffect, useRef } from 'react';\nimport {\n BrowserRouter as Router,\n Switch,\n Route,\n Redirect\n} from \"react-router-dom\";\nimport { store } from './AppProvider.js';\n\nimport Menu from './components/Menu.jsx';\nimport Map from './pages/Map.jsx';\nimport Login from './pages/Login.jsx';\nimport Monitoring from './pages/Monitoring.jsx';\nimport Filterbar from './components/Filterbar/Filterbar.jsx';\nimport Topbar from './components/Topbar/Topbar.jsx';\n\nimport { useSelector } from 'react-redux';\n\nimport { initUpdateAccessControlList, forceUpdateAccessControlList } from './poll-api/pollMetadataAccessControlList.js';\nimport { initUpdateZones, forceUpdateZones } from './poll-api/pollMetadataZones.js';\nimport { initUpdateParkingData, forceUpdateParkingData } from './poll-api/pollParkingData.js';\nimport { initUpdateTripData, forceUpdateTripData } from './poll-api/pollTripData.js';\nimport { initUpdateZonesgeodata, forceUpdateZonesgeodata } from './poll-api/pollMetadataZonesgeodata.js';\n\nimport './App.css';\n\nfunction App() {\n  const mapContainer = useRef(null);\n\n  // let [json, setJson] = useState(false);\n  // let [timestamp, setTimestamp] = useState(false);\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  const showfilter = useSelector(state => {\n    return state.filter ? state.filter.visible : false;\n  });\n\n  const filter = useSelector(state => {\n    return state.filter;\n  });\n\n  // Init polling scripts\n  useEffect(() => {\n    initUpdateZones(store);\n    initUpdateZonesgeodata(store);\n    initUpdateAccessControlList(store);\n    initUpdateParkingData(store);\n    initUpdateTripData(store);\n    forceUpdateZones();\n    forceUpdateZonesgeodata();\n    forceUpdateAccessControlList();\n  });\n\n  // update scripts\n  useEffect(() => {\n    forceUpdateTripData();\n    forceUpdateParkingData();\n  }, [filter]);\n\n  const renderMapElements = () => {\n    return <>\n      <div ref={mapContainer} className=\"map-layer\"></div>\n      <Filterbar visible={isLoggedIn && showfilter} showinterval={false}/>\n    </>\n  }\n\n  return (\n    <Router>\n\n       <Redirect from=\"/\" exact to=\"/map/park\" />\n\n       <div className=\"app\">\n          <div className=\"gui-layer\">\n\n            <Switch>\n              <Route path=\"/login\">\n                <Login />\n              </Route>\n              <Route path=\"/map/trip\">\n                <Map mapContainer={mapContainer} showParkingData={false}/>\n                {renderMapElements()}\n              </Route>\n              <Route path=\"/map/park\">\n                <Map mapContainer={mapContainer} showParkingData={true}/>\n                {renderMapElements()}\n              </Route>\n              <Route path=\"/monitoring\">\n                <Monitoring />\n              </Route>\n            </Switch>\n\n            <Topbar />\n            <Menu />\n\n          </div>\n        </div>\n     </Router>\n  );\n}\n\nexport default App;\n","import React, { Component } from 'react';\n// import { bindActionCreators } from 'redux';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { connect } from 'react-redux';\n\nimport moment from 'moment';\nimport thunk from 'redux-thunk';\n\nimport appReducer from './reducers';\nimport App from './App';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n// Get persistentState from localStorage\nconst persistedState = localStorage.getItem('CROWDD_reduxState')\n  ? JSON.parse(localStorage.getItem('CROWDD_reduxState'))\n  : {}\n\nexport const store = createStore(\n  appReducer,\n  persistedState,\n  composeEnhancers(applyMiddleware(thunk)),\n);\n\n// Store Redux state into localStorage\nstore.subscribe(() => {\n  const storeState = store.getState();\n  const storeStateToSaveInLocalStorage = {\n    last_update: moment().unix(),\n    authentication: storeState.authentication,\n    filter: storeState.filter\n  }\n  localStorage.setItem('CROWDD_reduxState', JSON.stringify(storeStateToSaveInLocalStorage))\n})\n\nclass AppProvider extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <App content={this.props.content} />\n      </Provider>\n    )\n  }\n}\n\nfunction connectWithStore(store, WrappedComponent, ...args) {\n  let ConnectedWrappedComponent = connect(...args)(WrappedComponent)\n  return function (props) {\n    return <ConnectedWrappedComponent {...props} store={store} />\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    // config: getConfig(state),\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    // actions: bindActionCreators(actions, dispatch),\n  }\n}\n\nexport default AppProvider = connectWithStore(\n  store,\n  AppProvider,\n  mapStateToProps,\n  mapDispatchToProps\n)\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppProvider from './AppProvider';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}