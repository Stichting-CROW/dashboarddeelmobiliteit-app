{"version":3,"sources":["poll-api/metadataZonesgeodata.js","reducers/layers.js","helpers/stats/parking-data.ts","actions/actionTypes.js","actions/authentication.js","components/Chart/CustomizedTooltip.jsx","components/Section/Section.tsx","components/Form/Button.jsx","components/Map/sources.js","components/Chart/chartTools.js","pages/ContentPage.jsx","components/PillMenu/PillMenu.tsx","components/Misc/Misc.jsx","components/Map/MapUtils/layers.js","helpers/vehicleTypes.ts","components/Chart/BeschikbareVoertuigenChart.jsx","components/InfoTooltip/InfoTooltip.tsx","components/FormInput/FormInput.tsx","components/SlideBox/MobileSlideBox.jsx","components/Filterbar/FilterbarExtended.jsx","components/Filterbar/FilteritemGebieden.jsx","images/calendar.svg","components/Filterbar/FilteritemDatum.jsx","components/Filterbar/FilteritemDatumVanTot.jsx","components/Filterbar/FilteritemDuur.jsx","components/Filterbar/FilteritemAanbieders.jsx","components/Filterbar/FilteritemZones.jsx","components/Filterbar/FilteritemMarkers.jsx","components/Filterbar/FilteritemHerkomstBestemming.jsx","components/Filterbar/FilteritemVoertuigTypes.jsx","components/Tag/Tag.tsx","components/Button/Button.tsx","components/Text/Text.tsx","components/Modal/Modal.jsx","components/Filterbar/FilterbarZones.tsx","components/Filterbar/Filterbar.jsx","components/Map/MapUtils/sources.js","components/Map/vehicle_marker.js","components/About/About.jsx","components/Tour/Tour.jsx","App.js","components/Menu.jsx","components/Menu/MenuSecondary.jsx","components/Map/MapComponent.jsx","components/Map/MapUtils/popups.js","components/Map/MapUtils/clusters.js","pages/Login.jsx","pages/SetPassword.jsx","components/Filterbar/FilterbarDesktop.jsx","components/Filterbar/FilterbarMobile.jsx","components/Faq/Faq.tsx","components/Profile/Profile.tsx","components/SelectLayer/SelectLayerMobile.jsx","components/LoadingIndicator/LoadingIndicator.jsx","poll-api/metadataAccessControlList.js","poll-api/metadataZones.js","poll-api/pollParkingData.js","poll-api/pollVerhuringenData.js","helpers/notify.ts","components/SelectLayer/SelectLayer.jsx","api/parkEventsStats.js","components/MetaStats/MetaStats.jsx","components/HubStatsWidget/HubStatsWidget.tsx","pages/MapPage.jsx","components/Chart/VerhuringenChart.tsx","components/TimeGrid/TimeGrid.tsx","components/TimeGrid/TimeGrid_VehicleAvailability.tsx","pages/StatsPage.jsx","components/DateFromTo/DateFromTo.jsx","components/FormSelect/FormSelect.jsx","components/Export/Export.tsx","helpers/parkEvents.js","pages/Monitoring.jsx","api/isochrones.ts","components/IsochroneTools/IsochroneTools.tsx","themes.ts","components/Map/MapUtils/zones.js","helpers/stats/index.ts","poll-api/pollTools.js","helpers/providers.js","components/Logo.jsx","helpers/authentication.js","components/IconButtons.jsx","reportWebVitals.js","index.js","api/zones.ts","components/Map/MapStyles/nine3030.js","components/Map/MapUtils/map.js","components/Chart/CustomizedAxisTick.jsx","api/aggregatedStats.js","components/Overlay/Overlay.jsx","components/SlideBox/SlideBox.jsx","components/Map/layers/vehicles-point.js","components/Map/layers/common.js","components/Map/layers/vehicles-heatmap.js","components/Map/layers/rentals-origins-heatmap.js","components/Map/layers/rentals-destinations-heatmap.js","components/Map/layers/index.js","components/Map/layers/zones-geodata.js","components/Map/layers/zones-geodata-border.js","components/Map/layers/vehicles-clusters.js","components/Map/layers/vehicles-clusters-count.js","components/Map/layers/vehicles-clusters-point.js","components/Map/layers/rentals-origins-point.js","components/Map/layers/rentals-origins-clusters.js","components/Map/layers/rentals-origins-clusters-count.js","components/Map/layers/rentals-origins-clusters-point.js","components/Map/layers/rentals-destinations-point.js","components/Map/layers/rentals-destinations-clusters.js","components/Map/layers/rentals-destinations-clusters-count.js","components/Map/layers/rentals-destinations-clusters-point.js","components/Map/layers/zones-metrics-public.js","components/Map/layers/zones-metrics-public-border.js","components/Map/layers/zones-isochrones.js","reducers/metadata.js","reducers/vehicles.js","reducers/rentals.js","reducers/filter.js","reducers/authentication.js","reducers/zones_geodata.js","reducers/ui.js","reducers/statsreducer.js","reducers/index.js","reducers/created.js","reducers/last_update.js","AppProvider.js"],"names":["getEmptyZonesGeodataPayload","updateZonesgeodata","store","undefined","state","getState","metadata","zones_loaded","zone_ids","filter","gebied","zones","zone","zone_type","map","zone_id","join","length","list_g","gebieden","gm_code","includes","municipality","dispatch","type","payload","url_zonesgeodata","isLoggedIn","options","headers","authentication","user_data","token","fetch","then","response","ok","console","error","json","st","require","geojson","fullextent","forEach","zonedata","idx","feature","features","push","extent","Math","min","max","warn","data","bounds","catch","ex","finally","DISPLAYMODE_PARK","DISPLAYMODE_RENTALS","DISPLAYMODE_ZONES_ADMIN","DISPLAYMODE_ZONES_PUBLIC","DISPLAYMODE_OTHER","DISPLAYMODE_PARKEERDATA_HEATMAP","DISPLAYMODE_PARKEERDATA_CLUSTERS","DISPLAYMODE_PARKEERDATA_VOERTUIGEN","DISPLAYMODE_VERHUURDATA_HEATMAP","DISPLAYMODE_VERHUURDATA_CLUSTERS","DISPLAYMODE_VERHUURDATA_VOERTUIGEN","initialState","zones_visible","displaymode","view_park","view_rentals","mapextent","md5","action","map_style","JSON","stringify","zoom","layers","getAggregatedVehicleData","aggregationLevel","ontwikkelingaggregatie","aggregationTime","ontwikkelingaggregatie_tijd","aggregationFunction","ontwikkelingaggregatie_function","doShowDetailledAggregatedData","getAggregatedStats_timescaleDB","aggregatedVehicleData","getAggregatedStats","availability_stats","available_vehicles_aggregated_stats","getAggregatedChartData","vehiclesData","prepareAggregatedStatsData_timescaleDB","aanbiedersexclude","prepareAggregatedStatsData","getTotalsPerHour","timeIntervalData","time","totalVehiclesForTimeInterval","Object","keys","key","total","round","getSummedTotalsPerWeekdayAndHour","aggregatedTotals","weekDay","moment","replace","day","hour","setUser","user","clearUser","CustomizedTooltip","obj","active","label","className","sort","reverse","x","i","style","color","fill","name","parseInt","value","res","sumValue","variants","open","opacity","maxHeight","transition","paddingTop","paddingBottom","duration","closed","Section","title","children","useState","isOpen","setIsOpen","maxWidth","h3","onClick","whileHover","textDecoration","whileTap","scale","div","animate","Button","classes","href","sources","getOperatorStatsForChart","aanbieders","operators","a","system_id","row","ContentPage","props","isFilterBarVisible","useSelector","ui","FILTERBAR","forceFullWidth","overflowY","zIndex","PillMenu","items","link","to","Misc","doRenderRedirect","setDoRenderRedirect","width","position","right","top","Logo","addLayers","U","addLayer","activateLayers","allLayers","layersToShow","l","show","indexOf","hide","getVehicleIconUrl","vehicleType","getPrettyVehicleTypeName","BeschikbareVoertuigenChart","config","useDispatch","setVehiclesData","useEffect","values","fetchData","ontwikkelingvan","ontwikkelingtot","chartData","chartDataWithNiceDates","dateFormat","getDateFormat","format","getChartDataWithNiceDates","renderAggregationFunctionButton","numberOfPointsOnXAxis","preparedData","prepareDataForCsv","filename","downloadCsv","src","alt","aggregationFunctionButtonsToRender","height","margin","left","bottom","strokeDasharray","vertical","dataKey","tick","content","sumTotal","getUniqueProviderNames","providerColor","getProviderColor","stackId","stroke","isAnimationActive","InfoTooltip","buttonRef","useRef","counter","setCounter","button","current","toggleHandler","event","classList","log","contains","remove","add","addEventListener","removeEventListener","ref","FormInput","defaultValue","placeholder","disabled","id","autoComplete","onChange","themes","MobileSlideBox","isVisible","closeHandler","FilterbarExtended","closeFunction","e","stopPropagation","setQueryParam","val","searchParams","URLSearchParams","window","location","search","set","delete","history","replaceState","url","protocol","host","pathname","toString","path","FilteritemGebieden","filterGebied","filterBarExtendedView","filterSearch","setFilterSearch","setFilterGebied","changeSearchText","target","clearSearchText","toggleGebieden","visibility","find","item","filteredGebieden","toLowerCase","autoFocus","renderSelectGebieden","preventDefault","FilterItemDatum","TO_date","filterDatum","intervalend","Date","toISOString","datum","displayMode","setFilterDatum","useCallback","newdt","clearTimeout","setTimeout","isInFuture","unix","subtract","clearIcon","calendarIcon","disableClock","FilterItemDatumVanTot","filterOntwikkelingVan","toDate","filterOntwikkelingTot","filterOntwikkelingAggregatie","startDate","setStartDate","endDate","setEndDate","updateFilter","start","end","aggregatie","van","toDateString","tot","dates","moveFilterDatum","movestart","addDays","addMonths","setView","view","agg","today","tyear","getFullYear","lyear","selected","selectsRange","inline","c1Hour","FilterItemInterval","filterDuration","intervalduur","cAnnotations","anchor","pos","elements","y","textAnchor","ticks","currentDurationIdx","findIndex","v","step","role","xmlns","FilteritemAanbieders","operatorstats","stats","vehicles","rentals","herkomstbestemming","statsreducer","operatorstats_verhuringenchart","operatorstats_beschikbarevoertuigenchart","filterAanbiedersExclude","addTofilterAanbiedersExclude","aanbieder","split","viewBox","x1","y1","x2","y2","excluded","handler","removeFromfilterAanbiedersExclude","provider","cx","cy","r","FilteritemZones","zonesToShow","filterZones","removeFromFilterZones","toggleZones","zone_groups","zone_groups_filtered","zoneType","renderSelectZonesGroup","group","groupZones","sortedZones","b","localeCompare","selectedzones","zonetxt","aantal","thezone","isActive","filteredZones","renderSelectZones","FilteritemMarkersParkeerduur","FilteritemMarkers","filtername","markers","fillcolor","addmarker","removemarker","clearmarkers","FilteritemMarkersAfstand","filterMarkersExclude","addToFilterMarkersExclude","marker","removeFromFilterMarkersExclude","FilteritemHerkomstBestemming","setFilterHerkomstBestemming","classNameHerkomst","classNameBestemming","FilteritemVoertuigTypes","voertuigtypes","vehicle_types","filterVoertuigTypesExclude","Array","isArray","voertuigtypesexclude","addToFilterVoertuigTypesExclude","voertuigtype","removeFromFilterVoertuigTypesExclude","baseClassName","extraclass","Tag","backgroundColor","beforeHtml","borderBottom","boxShadow","borderRadius","dangerouslySetInnerHTML","__html","theme","Text","Modal","button1Title","button1Handler","button2Title","button2Handler","hideModalHandler","display","tabIndex","ModalityRow","imageUrl","backgroundImage","backgroundSize","backgroundPosition","FilterbarZones","hideLogo","zoneTemplate","geography_type","zone_availability","published","viewMode","setViewMode","didInitEventHandlers","setDidInitEventHandlers","drawedArea","setDrawedArea","adminZones","setAdminZones","activeZone","setActiveZone","lastClickedZone","setLastClickedZone","didChangeZoneConfig","setDidChangeZoneConfig","limitType","setLimitType","document","setPathName","doShowModal","setDoShowModal","doShowImportModal","setDoShowImportModal","labelClassNames","useLocation","ddMap","on","eventHandler","selectMapFeature","zoneId","CROW_DD","theDraw","get","changeMode","featureId","detail","skipConfirmation","getMode","selectFeature","updateZoneStateToDatabaseValues","getAdminZones","fetchAdminZones","getPublicZones","fetchPublicZones","getZonesFunc","TO_local","TO_local_interval","setInterval","clearInterval","foundZone","getZoneById","setAdminZoneUrl","geography_id","zoneToSet","area","description","stop","capacity","bicycle","moped","scooter","cargo_bicycle","car","other","combined","status","control_automatic","is_returning","disableDrawingPolygons","changeHandler","updatedZoneData","getRequestData","assign","getRequestDataForStop","generateStopObject","getRequestDataForNoParking","no_parking","getCapacity","getStatus","is_installed","is_renting","stop_id","center","saveZone","notify","requestData","putZone","updatedZone","alert","properties","geometry","coordinates","postZone","createdZone","deleteAllLocalZones","deleteZoneHandler","confirm","deleteZone","allDraws","getAll","getLocalDrawsOnly","cancelButtonHandler","isNewZone","trash","originalZone","accept","R","getDraftFeatureId","CustomEvent","dispatchEvent","fitBounds","padding","setPublicZoneUrl","backgroundColors","monitoring","primaryColor","numPlacesAvailable","getNumPlacesAvailable","numVehiclesAvailable","getNumVehiclesAvailable","realtime_data","getIndicatorColor","getBeforeHtml","renderZoneTag","saveHandlerUNEXISTING","Filterbar","visible","ispark","isrentals","iszonesadmin","iszonespublic","isontwikkeling","showdatum","showduur","showparkeerduur","showafstand","showherkomstbestemming","showvantot","showvervoerstype","doShowCustomZones","minWidth","addSources","addGeoJSON","getVehicleMarkers","operatorColor","durationIndicationColor","styleVehicleMarker","getVehicleMarkers_rentals","svgElement","createElementNS","circle_1","setAttribute","appendChild","inner_circle","child_circle_1","child_circle_2","small_circle","canvas","createElement","XMLSerializer","serializeToString","win","URL","webkitURL","img","Image","blob","Blob","createObjectURL","decode","context","getContext","drawImage","revokeObjectURL","Uint8Array","getImageData","buffer","About","marked","parse","slideImages","slice","sliderProperties","transitionDuration","pauseOnHover","infinite","arrows","indicators","oldIndex","newIndex","Tour","slideRef","keyDownHandler","code","goBack","goNext","rel","Notification","doShowNotification","setDoShowNotification","isFilterBarOpen","initial","exit","drag","dragConstraints","innerWidth","cursor","strokeLinecap","strokeLinejoin","strokeWidth","d","App","pathName","uriParams","setUriParams","delayTimeout","setDelayTimeout","mapContainer","exportState","msg","showNotification","importstate","decodeURIComponent","filterDate","isLayersMobileVisible","params","isFilterDateMoreThan10MinutesAgo","diff","initAccessControlList","process","DEBUG","metadata_loaded","updateZones","initUpdateParkingData","initUpdateVerhuringenData","renderMapElements","exact","MenuItem","icon","text","SubMenuItem","showMessage","setShowMessage","message","Menu","subMenuIsActive","exportStateToClipboard","clipboardData","setData","queryCommandSupported","textarea","textContent","body","select","execCommand","prompt","removeChild","copyToClipboard","encodeURIComponent","menuClassName","MenuSecondaryItem","MenuSecondary","setVisibility","MapComponent","stateLayers","providers","zones_geodata","publicZones","setPublicZones","didMapLoad","setDidMapLoad","setDidMapDrawLoad","lng","lat","didInitSourcesAndLayers","setDidInitSourcesAndLayers","didAddPublicZones","setDidAddPublicZones","didAddAdminZones","setDidAddAdminZones","userData","registerMapView","theMap","getBounds","_sw","_ne","getZoom","mapStyles","getMapStyles","maplibregl","Map","container","base","accessToken","maxZoom","attributionControl","addControl","NavigationControl","showCompass","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","dragRotate","disable","touchZoomRotate","disableRotation","init","initMap","geographyId","navigateToGeography","triggerGeographyClick","initMapDrawLogic","setMapStyle","satelite","initZonesMap","isStyleLoaded","deleteAll","addAdminZonesToMap","addPublicZonesToMap","activeSources","sourceName","showSource","isSourceLoaded","hideSource","getSource","origins","destinations","initPopupLogic","email","registrations","roles","initClusters","addProviderImage","baselabel","hasImage","addImage","updateLocale","localization","jsConfetti","JSConfetti","showConfetti","addConfetti","emojis","emojiSize","confettiNumber","removeExistingPopups","existingPopups","getElementsByClassName","canSeeVehicleId","popup","layerName","clickHandler","vehicleProperties","abs","lngLat","providerWebsiteUrl","getProviderWebsiteUrl","prettyVehicleTypeName","form_factor","Popup","setLngLat","setHTML","getPrettyProviderName","in_public_space_since","locale","from","distance_in_meters","vehicle_id","addTo","off","getCanvas","queryRenderedFeatures","point","clusterId","cluster_id","getClusterExpansionZoom","err","easeTo","Login","emailaddress","setEmailaddress","password","setPassword","recoverPassword","setRecoverPassword","errorMessage","setErrorMessage","successMessage","setSuccessMessage","loggedIn","setLoggedIn","isPasswordVisible","setIsPasswordVisible","login","loginId","applicationId","method","recover","htmlFor","autoCapitalize","required","trim","SetPassword","changePasswordCode","useParams","FilterbarDesktop","isFilterBarExtendedVisible","direction","FilterbarMobile","Faq","Profile","SelectLayerMobile","showZoneOnOff","zonesVisible","viewPark","viewRentals","LoadingIndicator","showloading","cPublicAanbieders","cPublicGebieden","cPublicVoertuigTypes","store_accesscontrollist","municipalities","types","store_zones","url_zones","zonesGeoDataResult","zonesGeoDataJson","filter_values","store_parkingdata","activeVehicles","existingFilter","theFetch","processVehiclesResult","geoJson","operatorcolors","o","start_time","minutes","duration_bin","convertDurationToBin","latitude","longitude","bike_id","parkeerduurexclude","markerVisible","doApiCall","callback","canfetchdata","filterparams","createFilterparameters","authenticationdata","abort","abortableFetch","ready","park_events","vehicles_in_public_space","updateParkingData","doFetchVehicles","shouldFetchVehicles","_store","activeRentals","store_verhuringendata","processRentalsResult","distance_bin","convertDistanceToBin","arrival_time","departure_time","afstandexclude","toUpperCase","updateVerhuringenData","doFetchRentals","theType","TO_notificationDuration","setStateFunc","SelectLayer","SlideBox","activeEventStats","getParkEventsStats","shouldFetchVehicleStats","filterParams","fetchOptions","responseJson","StatRow","MetaStats","metaStatsData","setMetaStatsData","result","gogogo","park_event_stats","minHeight","HubStatsWidget","ontwikkelingVan","setOntwikkelingVan","ontwikkelingTot","setOntwikkelingTot","chartArrows","newOntwikkelingVan","newOntwikkelingTot","zoneStatsDiv","zoneIdAsNumber","zoneIdAsString","foundZoneId","getZoneIdAsNumber","pathParts","getZoneIdFromPath","chartFilter","getZoneStats","mode","showZones","rentalsKey","VerhuringenChart","rentalsData","setRentalsData","rentals_aggregated_stats","chartdata","chartdataWithNiceDates","getchartDataWithNiceDates","ResponsiveContainer","AreaChart","CartesianGrid","XAxis","YAxis","Tooltip","Legend","Area","BarChart","Bar","weekDays","getOpacityForCount","count","maxCount","toFixed","getHourlyCount","renderHourlyCounts","html","hourlyCount","opacityForCount","borderLeft","renderHours","TimeGrid","showIt","setShowIt","onMouseOverHour","$","css","addClass","onMouseOutHour","removeClass","getHighestCount","renderWeekDay","TimeGrid_VehicleAvailability","totalsPerWeekdayAndHour","setTotalsPerWeekdayAndHour","customFilter","vehicleData","totals","StatsPage","setAggregationLevel","newlevel","userDidSelectCustomZone","daysInSelectedPeriod","decideOnAggregationLevel","didSelectAtLeastOneCustomZone","aggregationButtonsToRender","ret","doShow15m","doShowHour","getAggregationButtonsToRender","pop","DateFromTo","down","FormSelect","Export","isVerified","setIsVerified","municipalityCode","setMunicipalityCode","places","acl","isAdmin","is_admin","isContactPerson","is_contact_person_municipality","handleDownloadReportClick","downloadReport","handleDownloadRawDataClick","downloadRawData","isDateRangeMoreThanOneMonth","fetchParkEvents","dateTime","formattedDateTime","numberOfUniqueVehiclesAfterXIterations","getUniqueVehicleIds","dataset","uniqueVehicleIds","Monitoring","fetchMultipleMomentsInTime","collectedParkEvents","table","didFetchSucceed","getIsochronesForFootWalking","locations","addIsochronesToMap","featureCollection","addIsochronesForMarkers","IsochroneTools","isochroneMarkers","setIsochroneMarkers","isFilterbarOpen","addIsochroneMarker","getCenter","Marker","draggable","getLngLat","onDragEnd","white","borderColor","red","green","greenHighlighted","quiet","moderate","busy","stateObj","pushState","realtimeData","num_places_available","num_vehicles_available","parked","pct","isNaN","calculateGradient","generatePopupHtml","layer","isControlledAutomatically","isManuallySetToOpen","percentageOfVehiclesAvailable","numVehicles","numPlaces","renderVisualIndicator","modalityName","parkedVehiclesForModality","modality","getParkedVehiclesForModality","capacityForModality","getCapacityForModality","availableForModality","getAvailableForModality","modalityNameToModalityTitle","renderModalityRows","zoneToGeoJson","initAdminView","modes","MapboxDraw","MapboxDrawWaypoint","static","StaticMode","publicStyles","adminStyles","draw","displayControlsDefault","userProperties","styles","initSelectToEdit","groupZonesPerGeographyType","featuresInThisGroup","sortZonesInPreferedOrder","groupedZones","groupedZonesToReturn","draws","localDraws","zonesFromDb","number_of_vehicles","perc","g","perc2color","adminZone","getColor","getBorderColor","allZones","fire","LngLat","openPopup","providersToRemoveFromData","archivedProviders","start_interval","rest","exclude","tz","csvRows","header","click","AbortController","isParkingData","isRentalData","isOntwikkelingData","includeOperators","candidates","filteritems","selectedaanbieders","selectedtypes","vtype","ts","ts1","ts2","setDate","getDate","request","opts","controller","signal","newFilter","providerName","found","objects","uniqueProviderNames","providerPrettyNames","providerWebsiteUrls","getProviderColors","font","IconButtonClose","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","AppProvider","getElementById","getFetchOptions","version","composite","attribution","tiles","sprite","glyphs","nine3030Style","mapStyleHash","styleUrlOrObject","newMapStyleHash","currentStyle","getStyle","newStyle","appLayers","el","concat","setStyle","CustomizedXAxisTick","this","transform","dy","fontSize","PureComponent","CustomizedYAxisTick","responseBlob","saveAs","containerRef","NAME","heatmapIntensity","clustersPointLayer","paint","layout","vehiclesHeatmap","rentalsOriginsHeatmap","rentalsDestinationsHeatmapCityLevel","generateHslaColors","amount","colors","huedelta","trunc","hue","lightness","saturation","origins_operatorstats","destinations_operatorstats","municipalitiesWithLotsOfVehicles","floor","random","randomInitialMunicipality","SELECTLAYER","SHOWLOADING","operatorstats_parkeerduurchart","combineReducers","created","last_update","providerColors","intervalstart","currentdata","datachanged","filterchanged","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","theState","localStorage","getItem","persistedState","createStore","appReducer","applyMiddleware","thunk","subscribe","storeState","oldFilterHash","newFilterHash","setItem","storeStateToSaveInLocalStorage","Component","WrappedComponent","args","ConnectedWrappedComponent","connect","connectWithStore"],"mappings":"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","file":"static/js/main.0982062b.chunk.js","sourcesContent":["import {isLoggedIn} from '../helpers/authentication.js';\n\nexport const getEmptyZonesGeodataPayload = () => {\n  return  {\n    \"data\": {\n      \"type\":\"FeatureCollection\",\n      \"features\":[]\n    },\n    \"filter\": \"\"\n  }\n}\n\nexport const updateZonesgeodata = (store)  => {\n  try {\n    if(undefined===store) {\n      // console.log(\"no redux state available yet - skipping zones geodata update\");\n      return false;\n    }\n    \n    const state = store.getState();\n    if(state.metadata.zones_loaded===false) {\n      // console.log(\"no zone metadata available yet - skipping zones geodata update\");\n      return false;\n    }\n\n    let zone_ids=\"\";\n    // if((!isLoggedIn(state))||!state) {\n    if(!state) {\n      // no filter data available\n      zone_ids = \"\";\n    } else if (state.filter.gebied===\"\") {\n      // get bounds of all municipalities\n      // console.log(\"set empty zones payload (gebied leeg)\")\n      zone_ids = state.metadata.zones.filter(zone=>(zone.zone_type===\"municipality\")).map(zone=>zone.zone_id).join(\",\");\n    } else if (state.filter.zones.length===0) {\n      // get bounds of single municipality zone\n      let list_g = state.metadata.gebieden.filter(gebied=>gebied.gm_code===state.filter.gebied).map(gebied=>gebied.gm_code);\n      let list_z = state.metadata.zones.filter(zone=>(zone.zone_type===\"municipality\"&&list_g.includes(zone.municipality)));\n      // console.log(\"set empty zones payload (zones length 0)\", list_g, list_z)\n      zone_ids = list_z.map(zone=>zone.zone_id).join(\",\");\n      // console.log('zone_ids', zone_ids)\n    } else {\n      // console.log(\"set empty zones payload (selected zones\")\n      // get bounds of all selected zones\n      zone_ids = state.filter.zones; // use selected zones\n    }\n\n    if(zone_ids===\"\") {\n      store.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n      return;\n    }\n\n    store.dispatch({type: 'SHOW_LOADING', payload: true});\n\n    // https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=GM0518\n    let url_zonesgeodata = isLoggedIn(state) \n      ? \"https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=\"+zone_ids+\"&include_geojson=true\"\n      : \"https://api.deelfietsdashboard.nl/dashboard-api/public/zones?zone_ids=\"+zone_ids+\"&include_geojson=true\";\n\n    let options = isLoggedIn(state) ? { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }} : {}\n\n    fetch(url_zonesgeodata, options).then((response) => {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n\n      response.json()\n        .then((metadata) => {\n          // console.log(\"got zones geodata for \", state.filter.zones||'all zones')\n          const st = require('geojson-bounds');\n          \n          // convert to standard geojson here\n          let geojson = {\n             \"type\":\"FeatureCollection\",\n             \"features\":[]\n          }\n          \n          let fullextent = undefined;\n\n          metadata.zones.forEach((zonedata, idx) => {\n            switch(zonedata.geojson.type) {\n              case \"MultiPolygon\":\n              case \"Polygon\":\n                let feature = {\n                   \"type\":\"Feature\",\n                   \"geometry\": zonedata.geojson\n                }\n                geojson.features.push(feature);\n                \n                let extent = st.extent(feature)\n                if(undefined===fullextent) {\n                  fullextent=extent;\n                } else {\n                  fullextent[0]=Math.min(extent[0],fullextent[0]);\n                  fullextent[1]=Math.min(extent[1],fullextent[1]);\n                  fullextent[2]=Math.max(extent[2],fullextent[2]);\n                  fullextent[3]=Math.max(extent[3],fullextent[3]);\n                }\n\n                break;\n              default:\n                console.warn(\"metadataZonesgeodata - don't know how to handle %s\", zonedata.type, zonedata);\n                break\n            }\n          })\n          \n          let payload = { data: geojson, filter: state.filter.zones, bounds: fullextent};\n          store.dispatch({ type: 'SET_ZONES_GEODATA', payload});\n          store.dispatch({ type: 'LAYER_SET_ZONES_EXTENT', payload: fullextent })\n        })\n        .catch(ex=>{ console.error(\"unable to decode JSON\", ex); })\n        .finally(()=>{ store.dispatch({type: 'SHOW_LOADING', payload: false});\n      })\n        \n      }).catch(ex=>{ console.error(\"unable to fetch zone geodata\"); });\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n  }\n}\n","\nexport const DISPLAYMODE_PARK = 'displaymode-park';\nexport const DISPLAYMODE_RENTALS = 'displaymode-rentals';\nexport const DISPLAYMODE_ZONES_ADMIN = 'displaymode-zones-admin';\nexport const DISPLAYMODE_ZONES_PUBLIC = 'displaymode-zones-public';\nexport const DISPLAYMODE_OTHER = 'displaymode-other';\n\nexport const DISPLAYMODE_PARKEERDATA_HEATMAP = 'parkeerdata-heatmap';\nexport const DISPLAYMODE_PARKEERDATA_CLUSTERS = 'parkeerdata-clusters';\nexport const DISPLAYMODE_PARKEERDATA_VOERTUIGEN = 'parkeerdata-voertuigen';\nexport const DISPLAYMODE_VERHUURDATA_HEATMAP = 'verhuurdata-heatmap';\nexport const DISPLAYMODE_VERHUURDATA_CLUSTERS = 'verhuurdata-clusters';\nexport const DISPLAYMODE_VERHUURDATA_VOERTUIGEN = 'verhuurdata-voertuigen';\n\nexport const DATASOURCE_VOERTUIGEN = 'vehicles';\nexport const DATASOURCE_VERHUUR = 'rentals';\n\nconst initialState = {\n  zones_visible: false,\n  displaymode: DISPLAYMODE_PARK,\n  view_park: DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  view_rentals: DISPLAYMODE_VERHUURDATA_VOERTUIGEN,\n  extent: [],\n  mapextent: [],\n}\n\nconst md5 = require('md5');\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'LAYER_SET_DISPLAYMODE': {\n      if(state.displaymode===action.payload) { return state }\n      \n      // console.log('reducer layer set view_park %s', action.payload)\n      return {\n          ...state,\n          displaymode: action.payload\n      };\n    }\n    case 'LAYER_SET_VIEW_PARK': {\n      if(state.view_park===action.payload) { return state }\n\n      // console.log('reducer layer set view_park %s', action.payload)\n      return {\n          ...state,\n          view_park: action.payload\n      };\n    }\n    case 'LAYER_SET_VIEW_RENTALS': {\n      if(state.view_rentals===action.payload) { return state }\n\n      // console.log('reducer layer set view_rentals %s', action.payload)\n      return {\n        ...state,\n        view_rentals: action.payload\n      };\n    }\n    case 'LAYER_TOGGLE_ZONES_VISIBLE': {\n      // console.log('reducer layer set zones visible %s', !state.zones_visible)\n      return {\n        ...state,\n        zones_visible: !state.zones_visible\n      };\n    }\n    case 'LAYER_SET_MAP_STYLE': {\n      return {\n        ...state,\n        map_style: action.payload\n      };\n    }\n    case 'LAYER_SET_ZONES_EXTENT': {\n      if(md5(JSON.stringify(action.payload||[]))!==md5(JSON.stringify(state.extent||[]))) {\n        // console.log(\"set extent to %o\", action.payload)\n        return {\n          ...state,\n          extent: action.payload||[]\n        };\n      } else {\n        // console.log(\"set extent - not changed\")\n        return state;\n      }\n    }\n    case 'LAYER_SET_MAP_EXTENT': {\n      if(md5(JSON.stringify(action.payload))!==md5(JSON.stringify(state.mapextent||false))) {\n        // console.log(\"set extent to %o\", action.payload)\n        return {\n          ...state,\n          mapextent: action.payload\n        };\n      } else {\n        // console.log(\"set extent - not changed\")\n        return state;\n      }\n    }\n    case 'LAYER_SET_MAP_ZOOM': {\n      if(md5(JSON.stringify(action.payload))!==md5(JSON.stringify(state.zoom||false))) {\n        // console.log(\"set zoom to %o\", action.payload)\n        return {\n          ...state,\n          zoom: action.payload\n        };\n      } else {\n        // console.log(\"set zoom - not changed\")\n        return state;\n      }\n    }\n    case 'IMPORT_STATE': {\n      return {\n        ...state,\n        ...action.payload.layers\n      }\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      // console.log('login/logout - reset layer info')      \n      return initialState;\n    }\n    default:\n      return state;\n  }\n}\n","import moment from 'moment-timezone';\nimport {getAggregatedStats, getAggregatedStats_timescaleDB} from '../../api/aggregatedStats';\n\nimport {\n  prepareAggregatedStatsData,\n  prepareAggregatedStatsData_timescaleDB,\n  sumAggregatedStats,\n  doShowDetailledAggregatedData,\n  didSelectAtLeastOneCustomZone,\n  aggregationFunctionButtonsToRender,\n  getDateFormat,\n  prepareDataForCsv,\n  downloadCsv\n} from './index';\n\nexport const getAggregatedVehicleData = async (token, filter, zones, metadata) => {\n  let aggregatedVehicleData;\n  const options = {\n    filter: filter,\n    metadata: metadata,\n    aggregationLevel: filter.ontwikkelingaggregatie,\n    aggregationTime: filter.ontwikkelingaggregatie_tijd,\n    aggregationFunction: filter.ontwikkelingaggregatie_function\n  }\n  if(doShowDetailledAggregatedData(filter, zones)) {\n    aggregatedVehicleData = await getAggregatedStats_timescaleDB(token, 'available_vehicles', options);\n  } else {\n    aggregatedVehicleData = await getAggregatedStats(token, 'available_vehicles', options);\n  }\n\n  // Return if no stats are available\n  if(! aggregatedVehicleData || (! aggregatedVehicleData.availability_stats && ! aggregatedVehicleData.available_vehicles_aggregated_stats)) {\n    return;\n  }\n\n  return aggregatedVehicleData;\n}\n\nexport const getAggregatedChartData = (vehiclesData, filter, zones) => {\n  if(doShowDetailledAggregatedData(filter, zones)) {\n    return prepareAggregatedStatsData_timescaleDB('available_vehicles', vehiclesData, filter.ontwikkelingaggregatie, filter.aanbiedersexclude)\n  } else {\n    return prepareAggregatedStatsData('available_vehicles', vehiclesData, filter.ontwikkelingaggregatie, filter.aanbiedersexclude)\n  }\n}\n\nexport const getTotalsPerHour = (data: object) => {\n  return data.map(timeIntervalData => {\n    let totalVehiclesForTimeInterval = 0, time;\n    Object.keys(timeIntervalData).forEach(key => {\n      if(key === 'time') {\n        // Get the time\n        time = timeIntervalData[key];\n        // Do not continue as there's nothing to count\n        return;\n      }\n      // Increment total vehicles count\n      totalVehiclesForTimeInterval += timeIntervalData[key];\n    })\n    return {\n      time: time,\n      total: Math.round(totalVehiclesForTimeInterval)\n    }\n  });\n}\n\nexport const getSummedTotalsPerWeekdayAndHour = (data: object) => {\n  let aggregatedTotals = [];\n  // Loop all data rows and group per weekday and time\n  for(let key in data) {\n    // Get weekday, 1 = Monday\n    // TODO Fix Z timezone\n    const weekDay = moment(data[key].time.replace('Z', '')).day();\n    // Get hour\n    const hour = moment(data[key].time.replace('Z', '')).hour();\n    // Store in array\n    if(aggregatedTotals[`day-${weekDay}`] === undefined) {\n      aggregatedTotals[`day-${weekDay}`] = [];\n      aggregatedTotals[`day-${weekDay}`][`hour-${hour}`] = data[key].total;\n    }\n    else if(aggregatedTotals[`day-${weekDay}`][`hour-${hour}`] === undefined) {\n      aggregatedTotals[`day-${weekDay}`][`hour-${hour}`] = data[key].total;\n    }\n    else {\n      aggregatedTotals[`day-${weekDay}`][`hour-${hour}`] += data[key].total;\n    }\n  }\n  return aggregatedTotals;\n}","// vehicles\nexport const SET_VEHICLES = 'SET_VEHICLES';\nexport const SET_VEHICLE = 'SET_VEHICLE';\nexport const CLEAR_VEHICLES = 'CLEAR_VEHICLES';\n\n// authentication\nexport const SET_USER = 'SET_USER';\nexport const CLEAR_USER = 'CLEAR_USER';\n","import { SET_USER, CLEAR_USER } from \"./actionTypes\";\n\nexport const setUser = (user) => ({\n  type: SET_USER,\n  payload: user\n})\n\nexport const clearUser = () => ({\n  type: CLEAR_USER,\n  payload: null\n})\n","// import {PureComponent } from 'react';\n\nimport './CustomizedTooltip.css';\n\nconst CustomizedTooltip = ({ active, payload, label }) => {\n  if (active && payload && payload.length) {\n\n    const arrayReverseObj = obj => Object.keys(obj).sort().reverse().map(key=> ({ ...obj[key], key }) );\n\n    const sumValue = () => {\n      let res = 0;\n      payload.forEach(x => {\n        res += parseInt(x.value);\n      })\n      return res;\n    }\n\n    return (\n      <div className=\"CustomizedTooltip\">\n        <div className=\"my-0\">\n          <b>{`${label}`}</b>\n        </div>\n        <ul className=\"my-0 py-0\">\n          {arrayReverseObj(payload).map((x,i) => {\n            return <li key={'c-'+i} style={{color: x.fill}}>\n              {x.name}: {parseInt(x.value)}\n            </li>\n          })}\n        </ul>\n        <div className=\"my-0\">\n          Totaal: {sumValue()}<br />\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport {\n  CustomizedTooltip\n}\n","import {useState, useEffect} from 'react';\nimport {motion} from 'framer-motion/dist/framer-motion'\n\nconst variants = {\n  open: {\n    opacity: 1,\n    // x: 0,\n    maxHeight: '9999px',\n    transition: 'easeOut',\n    paddingTop: '1.0rem',\n    paddingBottom: '1.0rem',\n    duration: 0.3\n  },\n  closed: {\n    opacity: 0,\n    // y: \"-100%\",\n    maxHeight: '0px',\n    transition: 'easeOut',\n    paddingTop: 0,\n    paddingBottom: 0,\n    duration: 0.3\n  },\n}\n\nfunction Section({title, children}: {title: string, children: any}) {\n  const [isOpen, setIsOpen] = useState(false)\n\n  return <section className=\"\n    my-0 py-2\n    border-b\n    border-solid border-gray-200\n  \" style={{\n    maxWidth: '100%',\n    // width: '320px',\n  }}\n  >\n    <motion.h3 className=\"\n      mt-4 mb-4\n      text-xl font-bold\n      cursor-pointer\n    \" onClick={() => setIsOpen(! isOpen)}\n    whileHover={{ textDecoration: 'underline' }}\n    whileTap={{ scale: 0.98 }}\n    >\n      {title}\n    </motion.h3>\n    <motion.div\n      animate={isOpen ? 'open' : 'closed'}\n      variants={variants}\n      className=\"overflow-y-hidden\" \n     >\n      {children}\n    </motion.div>\n  </section>\n}\n\nexport default Section;\n","export default function Button({\n  classes,\n  href,\n  onClick,\n  color,\n  children,\n}) {\n  return <button className={`\n    px-6 py-2 my-4 rounded-lg\n    transition-all\n    duration-100\n    ${color === 'blue' ? 'bg-theme-blue hover:bg-black text-white' : ''}\n    ${color === 'gray' ? 'bg-gray-300 hover:bg-gray-400 text-white' : ''}\n    ${classes}\n  `}\n  href={href}\n  onClick={onClick}\n  >\n    {children}\n  </button>\n}\n","export const sources = {\n  'vehicles': {\n    'type': 'geojson',\n  },\n  'vehicles-clusters': {\n    'type': 'geojson',\n    'cluster': true,\n    // 'clusterMaxZoom': 18,// Max zoom to cluster points on\n    'clusterRadius': 50 // Radius of each cluster when clustering points (defaults to 50)\n  },\n  'vehicles-heatmap': {\n    'type': 'geojson'\n  },\n\n  'rentals-origins': {\n    'type': 'geojson',\n  },\n  'rentals-origins-clusters': {\n    'type': 'geojson',\n    'cluster': true,\n    'clusterRadius': 50 // Radius of each cluster when clustering points (defaults to 50)\n  },\n  'rentals-origins-heatmap': {\n    'type': 'geojson',\n  },\n\n  'rentals-destinations': {\n    'type': 'geojson',\n  },\n  'rentals-destinations-clusters': {\n    'type': 'geojson',\n    'cluster': true,\n    'clusterRadius': 50 // Radius of each cluster when clustering points (defaults to 50)\n  },\n  'rentals-destinations-heatmap': {\n    'type': 'geojson',\n  },\n\n  'zones-geodata': {\n    'type': 'geojson',\n  },\n\n  'zones-metrics-public': {\n    'type': 'geojson',\n  },\n\n  'zones-isochrones': {\n    'type': 'geojson',\n  },\n}\n","export const getOperatorStatsForChart = (data, aanbieders) => {\n  let operators = {};\n  aanbieders.forEach(a=>{ operators[a.system_id]=0 })\n  data.forEach(row=> {\n    Object.keys(row).forEach(key=>{\n      if(key!=='start_interval') {\n        if(key in operators === false) { operators[key]=0; }\n        operators[key]++;\n      }\n    })\n  });\n  \n  return operators;\n}\n","import './ContentPage.css'\nimport { useSelector } from 'react-redux';\n\nexport default function ContentPage(props) {\n  const isFilterBarVisible = useSelector(state => {\n    return state.ui ? state.ui.FILTERBAR : false;\n  });\n\n  return (\n    <div\n      className={`ContentPage relative bg-white h-full pb-20 ${isFilterBarVisible && ! props.forceFullWidth ? '' : 'full-page'}`}\n      style={{\n        overflowY: 'auto',\n        zIndex: 1,\n      }}\n    >\n      <div className=\"ContentPage-inner py-3 sm:py-8 pl-3 pr-3 sm:pl-12 sm:pr-12 pb-20\">\n        {props.children}\n      </div>\n    </div>\n  );\n}\n","import { Link, NavLink } from \"react-router-dom\";\n\nimport './PillMenu.css';\n\ninterface Item {\n  title: '',\n  icon: '',\n  link: '',\n  isActive: false\n}\n\ninterface PillMenuProps {\n  items: any\n}\n\nfunction PillMenu({\n  items,\n}: PillMenuProps) {\n  return (\n    <div className=\"PillMenu px-5\">\n      <ul className=\"flex\">\n        {items.map(x => {\n          return (\n            <li key={x.title}>\n              {typeof x.link === 'function' ? <div onClick={x.link}>\n                {x.title}\n              </div> : <Link to={x.link}>\n                {x.title}\n              </Link>}\n            </li>\n          )\n        })}\n      </ul>\n    </div>\n  )\n}\n\nexport default PillMenu;\n","import { useState } from 'react';\nimport { Redirect } from \"react-router-dom\";\n\nimport Logo from '../Logo.jsx';\nimport PillMenu from '../PillMenu/PillMenu';\nimport { IconButtonClose } from '../IconButtons.jsx';\n\nexport default function Misc({children}) {\n  const [doRenderRedirect, setDoRenderRedirect] = useState(false);\n\n  const renderRedirect = () => {\n    return (\n      <Redirect to=\"/\" />\n    );\n  }\n\n  if (doRenderRedirect) {\n    return renderRedirect();\n  }\n\n  const pillMenuItems = [\n    {\n      title: 'Profiel',\n      link: '/profile'\n    },\n    {\n      title: 'FAQ',\n      link: '/faq'\n    },\n    {\n      title: 'Exporteer',\n      link: '/export'\n    }\n  ];\n\n  return (\n    <div className=\"\n      px-4\n      min-h-screen\n      sm:flex sm:justify-center\n      sm:px-0\n    \">\n      <div className=\"mx-auto py-8\" style={{\n        width: '500px',\n        maxWidth: '100%'\n      }}>\n\n        <IconButtonClose\n          onClick={() => setDoRenderRedirect(true)}\n          style={{position: 'absolute', right: '30px', top: '18px'}}\n        />\n\n        <Logo title=\"Extra\" />\n\n        <div className=\"mt-8\">\n          <PillMenu items={pillMenuItems} />\n        </div>\n\n        <div className=\"\n          mt-8\n        \">\n          {children}\n        </div>\n\n      </div>\n    </div>\n  );\n}\n","import {layers} from '../layers';\n\nexport const addLayers = (map) => {\n  Object.keys(layers).forEach((key, idx) => {\n    map.U.addLayer(layers[key]);\n  })\n}\n\nexport const activateLayers = (map, allLayers, layersToShow) => {\n  if(! layersToShow) {\n    return;\n  }\n\n  // Show given layers\n  layersToShow.forEach(l => {\n    map.U.show(l);\n  });\n\n  // Hide all other layersToShow\n  Object.keys(allLayers).forEach((key, idx) => {\n    if(layersToShow.indexOf(key) <= -1) {\n      map.U.hide(key);\n    }\n  })\n}\n","\nexport const getVehicleIconUrl = (vehicleType) => {\n  if(vehicleType === 'bicycle') {\n    return '/components/MapComponent/vehicle-type-bicycle.svg';\n  }\n  else if(vehicleType === 'cargo_bicycle') {\n    return '/components/MapComponent/vehicle-type-cargo_bicycle.svg';\n  }\n  else if(vehicleType === 'moped') {\n    return '/components/MapComponent/vehicle-type-moped.svg';\n  }\n  else if(vehicleType === 'car') {\n    return '/components/MapComponent/vehicle-type-car.svg';\n  }\n  else if(vehicleType === 'other') {\n    return '/components/MapComponent/vehicle-type-other.svg';\n  }\n}\n\nexport const getPrettyVehicleTypeName = (vehicleType) => {\n  if(vehicleType === 'bicycle') {\n    return 'fiets';\n  }\n  else if(vehicleType === 'cargo_bicycle') {\n    return 'bakfiets';\n  }\n  else if(vehicleType === 'moped') {\n    return 'scooter';\n  }\n  else if(vehicleType === 'car') {\n    return 'auto';\n  }\n  else if(vehicleType === 'other') {\n    return '';\n  }\n  else {\n    return null;\n  }\n}\n","import React, {useEffect, useState } from 'react';\n\nimport { getOperatorStatsForChart } from './chartTools.js';\n\nimport {\n  useDispatch,\n  useSelector\n} from 'react-redux';\n\nimport moment from 'moment';\n\nimport {\n  AreaChart,\n  // LineChart,\n  Area,\n  BarChart,\n  Bar,\n  // Line,\n  XAxis,\n  Legend,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\n\nimport {getAggregatedStats, getAggregatedStats_timescaleDB} from '../../api/aggregatedStats';\nimport {\n  getProviderColor,\n  getUniqueProviderNames\n} from '../../helpers/providers.js';\nimport {\n  prepareAggregatedStatsData,\n  prepareAggregatedStatsData_timescaleDB,\n  sumAggregatedStats,\n  doShowDetailledAggregatedData,\n  didSelectAtLeastOneCustomZone,\n  aggregationFunctionButtonsToRender,\n  getDateFormat,\n  prepareDataForCsv,\n  downloadCsv,\n  getAggregatedVehicleData,\n  getAggregatedChartData\n} from '../../helpers/stats/index';\n\nimport {CustomizedXAxisTick, CustomizedYAxisTick} from '../Chart/CustomizedAxisTick.jsx';\nimport {CustomizedTooltip} from '../Chart/CustomizedTooltip.jsx';\nimport {InfoTooltip} from '../InfoTooltip/InfoTooltip';\n\nfunction BeschikbareVoertuigenChart({filter, config, title}) {\n  const dispatch = useDispatch()\n\n  // Get authentication token\n  const token = useSelector(state => (state.authentication.user_data && state.authentication.user_data.token)||null)\n\n  // Get metadata\n  const metadata = useSelector(state => state.metadata)\n\n  // Get all zones\n  const zones = useSelector(state => {\n    return (state.metadata && state.metadata.zones) ? state.metadata.zones : [];\n  });\n\n  // Define state variables\n  const [vehiclesData, setVehiclesData] = useState([])\n\n  // On updated filter: re-fetch data\n  useEffect(() => {\n    // Do not reload chart until you have 'zones'\n    if(! metadata || ! metadata.zones || metadata.zones.length <= 0) return;\n\n    async function fetchData() {\n      // Get aggregated vehicle data\n      const aggregatedVehicleData = await getAggregatedVehicleData(token, filter, zones, metadata);\n      if(! aggregatedVehicleData) return;\n\n      // Set state\n      setVehiclesData(aggregatedVehicleData);\n\n      // Sum amount of vehicles per operator, used in FilteritemAanbieders component\n      let operators;\n      if(aggregatedVehicleData && aggregatedVehicleData.available_vehicles_aggregated_stats) {\n        operators = getOperatorStatsForChart(aggregatedVehicleData.available_vehicles_aggregated_stats.values, metadata.aanbieders);\n      }\n      else {\n        operators = getOperatorStatsForChart(aggregatedVehicleData.availability_stats.values, metadata.aanbieders);\n      }\n      dispatch({type: 'SET_OPERATORSTATS_BESCHIKBAREVOERTUIGENCHART', payload: operators });\n    }\n    fetchData();\n  }, [\n    filter.ontwikkelingvan,\n    filter.ontwikkelingtot,\n    filter.ontwikkelingaggregatie,\n    filter.ontwikkelingaggregatie_function,\n    filter.zones,\n    metadata,\n    token,\n    dispatch\n  ]);\n  \n  // Populate chart data\n  let chartData = getAggregatedChartData(vehiclesData, filter, zones);\n\n  const getChartDataWithNiceDates = (data) => {\n    const aggregationLevel = filter.ontwikkelingaggregatie;\n    const dateFormat = getDateFormat(aggregationLevel);\n    return data.map(x => {\n      return {...x, ...{ time: moment(x.time ? x.time : x.name).format(dateFormat) }}\n    })\n  }\n  const chartDataWithNiceDates = getChartDataWithNiceDates(chartData)\n\n  const setAggregationFunction = (value) => {\n    dispatch({\n      type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE_FUNCTION',\n      payload: value\n    })\n  }\n\n  const renderAggregationFunctionButton = (name, title) => {\n    return (\n      <div key={`agg-level-`+name} className={\"agg-button \" + (filter.ontwikkelingaggregatie_function === name ? \" agg-button-active\":\"\")} onClick={() => { setAggregationFunction(name) }}>\n        {title}\n      </div>\n    )\n  }\n\n  // if(config && config.sumTotal === true) {\n  //   chartData = sumAggregatedStats(chartData);\n  // }\n  // console.log(chartData);\n\n  const numberOfPointsOnXAxis = chartData ? Object.keys(chartData).length : 0;\n\n  // Function that renders the chart\n  const renderChart = () => {\n\n    // Render area line chart \n    if(numberOfPointsOnXAxis > 24 && filter.ontwikkelingaggregatie !== '15m' && filter.ontwikkelingaggregatie !== '5m' && filter.ontwikkelingaggregatie !== 'hour') {\n      return <AreaChart\n        data={chartDataWithNiceDates}\n        margin={{\n          top: 10,\n          right: 30,\n          left: 0,\n          bottom: 0,\n        }}\n      >\n        <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n        <XAxis dataKey=\"time\" tick={<CustomizedXAxisTick />} />\n        <YAxis tick={<CustomizedYAxisTick />} />\n        <Tooltip content={<CustomizedTooltip />} />\n        {config && config.sumTotal === true ? '' : <Legend />}\n        {getUniqueProviderNames(chartDataWithNiceDates).map(x => {\n          const providerColor = getProviderColor(metadata.aanbieders, x)\n          if(x === 'time') return;\n          return (\n            <Area\n              key={x}\n              stackId=\"1\"\n              type=\"monotone\"\n              dataKey={x}\n              stroke={providerColor}\n              fill={providerColor}\n              isAnimationActive={false}\n            />\n          )\n        })}\n      </AreaChart>\n    }\n\n    // Or render bar chart\n    return <BarChart\n      data={chartDataWithNiceDates}\n      margin={{\n        top: 10,\n        right: 30,\n        left: 0,\n        bottom: 0,\n      }}\n    >\n      <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n      <XAxis dataKey=\"time\" tick={<CustomizedXAxisTick />} />\n      <YAxis tick={<CustomizedYAxisTick />} />\n      <Tooltip content={<CustomizedTooltip />} />\n      {config && config.sumTotal === true ? '' : <Legend />}\n      {getUniqueProviderNames(chartDataWithNiceDates).map(x => {\n        const providerColor = getProviderColor(metadata.aanbieders, x)\n        if(x === 'time') return;\n        return (\n          <Bar\n            key={x}\n            stackId=\"1\"\n            type=\"monotone\"\n            dataKey={x}\n            stroke={providerColor}\n            fill={providerColor}\n            isAnimationActive={false}\n          />\n        )\n      })}\n    </BarChart>\n  }\n\n  return (\n    <div className=\"relative\">\n      \n      <div className=\"flex justify-between my-2\">\n        <div className=\"flex flex-start\">\n\n          {title && <h2 className=\"text-4xl my-2\">\n            {title}\n          </h2>}\n\n          {chartData && chartData.length > 0 && <div className=\"flex justify-center flex-col ml-2\">\n            <button onClick={() => {\n              const preparedData = prepareDataForCsv(chartData);\n              const filename = `${moment(filter.ontwikkelingvan).format('YYYY-MM-DD')}_to_${moment(filter.ontwikkelingvan).format('YYYY-MM-DD')}`;\n              downloadCsv(preparedData, filename);\n            }} className=\"opacity-50 cursor-pointer\">\n              <img src=\"/components/StatsPage/icon-download-to-csv.svg\" width=\"30`\" alt=\"Download to CSV\" title=\"Download to CSV\" />\n            </button>\n          </div>}\n\n        </div>\n\n        {doShowDetailledAggregatedData(filter, zones) && <div className={\"text-sm flex flex-col justify-center\"}>\n          <div className=\"flex\">\n            {doShowDetailledAggregatedData(filter, zones) && (\n              <InfoTooltip className=\"mx-2 inline-block\">\n                Zie in ieder tijdsinterval wat de minimale bezetting was, de gemiddelde bezetting of juist de maximale bezetting.\n              </InfoTooltip>\n            )}\n\n            {aggregationFunctionButtonsToRender.map(x => renderAggregationFunctionButton(x.name, x.title))}\n          </div>\n        </div>}\n\n      </div>\n\n      <div className=\"relative\" style={{ width: '100%', height: '400px' }}>\n        <ResponsiveContainer>\n          {renderChart()}\n        </ResponsiveContainer>\n      </div>\n\n    </div>\n  )\n}\n\nexport default BeschikbareVoertuigenChart;\n","// import {themes} from '../../themes';\n\nimport {useEffect, useState, useRef} from 'react';\n\nimport './InfoTooltip.css';\n\nfunction InfoTooltip({\n  className,\n  children\n}) {\n\n  const buttonRef = useRef(null);\n\n  const [counter, setCounter] = useState(0)\n\n  useEffect(x => {\n\n    let mouseMoved = false;\n    // let button = document.querySelector('.infoButton');\n    let button = buttonRef.current;\n\n    const toggleHandler = event => {    \n      const classes = button.classList;\n      console.log('toggleHandler', button.classList)\n      if (classes.contains('infoButton_isActive')) {\n          classes.remove('infoButton_isActive');\n      } else {\n          classes.add('infoButton_isActive');\n      }\n      setCounter(counter+1);\n    }\n\n    // button.onmousemove = toggleHandler;\n    button.addEventListener('click', toggleHandler);\n\n    return () => {\n      button.removeEventListener('click', toggleHandler);\n    }\n\n  }, [])\n\n  return (\n    <button className={`infoButton ${className}`} ref={buttonRef}>\n      <div className=\"infoButton-btn\">\n        <span className=\"infoButton-btn-text\">i</span>\n      </div>\n      <div className=\"infoButton-container\">\n        <div className=\"infoButton-container-message\">\n          {children}\n        </div>\n      </div>\n    </button>\n  )\n}\n\nexport {\n  InfoTooltip\n}\n\nexport default InfoTooltip;\n","import {themes} from '../../themes';\n\nfunction FormInput({\n  type,\n  name,\n  defaultValue,\n  value,\n  placeholder,\n  min,\n  disabled,\n  id,\n  autoComplete,\n  classes,\n  onChange,\n}, ref) {\n  return <div className=\"FormInput\">\n    <input\n      type={type}\n      name={name}\n      autoComplete={autoComplete}\n      id={id}\n      value={value}\n      defaultValue={defaultValue}\n      onChange={onChange}\n      placeholder={placeholder}\n      disabled={disabled}\n      min={min}\n      className={`\n        rounded-lg\n        inline-block\n        border-solid border-2\n        px-2\n        py-2\n        mr-2\n        mb-2\n        text-sm\n        ${classes}\n      `}\n      style={themes['white']}\n    />\n  </div>\n}\n\nexport default FormInput;\n","import {\n  // useDispatch,\n  // useSelector\n} from 'react-redux';\n\nimport './MobileSlideBox.css';\nimport { IconButtonClose } from '../IconButtons.jsx';\n\nfunction MobileSlideBox(props) {\n  return (\n    <div className={`\n      MobileSlideBox w-full sm:hidden fixed left-0\n      ${props.isVisible ? 'is-visible' : ''}\n      ${props.classes}\n    `} style={props.style}>\n\n      <header className=\"flex justify-between\">\n        <h1 className=\"\">{props.title}</h1>\n        <IconButtonClose onClick={props.closeHandler} />\n      </header>\n\n      <div className=\"w-full\">\n        {props.children}\n      </div>\n\n    </div>\n  )\n}\n\nexport default MobileSlideBox;\n","import { IconButtonClose } from '../IconButtons.jsx';\n\nimport './css/FilterbarExtended.css';\n\nfunction FilterbarExtended({closeFunction, title, children}) {\n  return (\n    <div className=\"FilterbarExtended\" onClick={() => closeFunction(false)}>\n      <div className=\"\" onClick={e => e.stopPropagation()}>\n        <div className=\"flex justify-between\">\n          <h1 className=\"title flex flex-col justify-center\">\n            {title||''}\n          </h1>\n          <div className=\"FilterbarExtended-close-button-wrapper\">\n            <IconButtonClose onClick={() => closeFunction(false)} />\n          </div>\n        </div>\n        <div className=\"grid-cols-4\" >\n          { children }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FilterbarExtended;\n","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport FilterbarExtended from './FilterbarExtended.jsx';\nimport './css/FilteritemGebieden.css';\n\nconst setQueryParam = (key, val) => {\n  let searchParams = new URLSearchParams(window.location.search);\n  if(! val) {\n    searchParams.delete(key);\n  } else {\n    searchParams.set(key, val);\n  }\n  if (window.history.replaceState) {\n    const url = window.location.protocol \n                + \"//\" + window.location.host \n                + window.location.pathname \n                + (searchParams.toString() ? \"?\" : \"\")\n                + searchParams.toString();\n    window.history.replaceState({ path: url }, \"\", url)\n  }\n}\n\nfunction FilteritemGebieden() {\n  const dispatch = useDispatch()\n\n  const gebieden = useSelector(state => {\n    return (state.metadata && state.metadata.gebieden) ? state.metadata.gebieden : [];\n  });\n  \n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : \"\";\n  });\n\n  const filterBarExtendedView = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR_EXTENDED'] : false;\n  });\n\n  let [filterSearch, setFilterSearch] = useState(\"\");\n  \n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  const unselectGebied = e => {\n    e.preventDefault();\n\n    // Reset query param\n    setQueryParam('gm_code', null);\n    \n    dispatch({\n      type: 'SET_FILTER_GEBIED',\n      payload: \"\"\n    })\n  }\n  \n  const setFilterGebied = (gebied) => {\n    // Set query param\n    setQueryParam('gm_code', gebied);\n    // Call action\n    dispatch({\n      type: 'SET_FILTER_GEBIED',\n      payload: gebied\n    })\n  }\n  \n  const changeSearchText = e => { setFilterSearch(e.target.value) }\n\n  const clearSearchText = e => {\n    // Reset query param\n    setQueryParam('gm_code', null);\n    // Clear search query\n    setFilterSearch('')\n  }\n  \n  const toggleGebieden = (val) => {\n    setVisibility('FILTERBAR_EXTENDED', val)\n  }\n\n  const renderSelectGebieden = (gebieden) => {\n    const filteredGebieden = gebieden.filter(gebied=>{\n      return filterSearch===''|| gebied.name.toLowerCase().includes(filterSearch.toLowerCase())\n    })\n    return (\n      <FilterbarExtended\n        title=\"Selecteer een plaats\"\n        closeFunction={() => toggleGebieden(false)}\n        >\n        <div className=\"filter-form-selectie\">\n          <div className=\"filter-form-search-container mb-3\">\n            <div className=\"filter-form-search-container-2\">\n            <input type=\"text\"\n              className=\"filter-form-search\"\n              onChange={changeSearchText}\n              value={filterSearch}\n              autoFocus={true}\n              placeholder={\"zoek\"}/>\n            <div className=\"ml-3 flex flex-col justify-center h-full\">\n              { filterSearch !== \"\" ?\n                <div className=\"filter-plaats-img-cancel\" onClick={clearSearchText} />\n                :\n                <div className=\"filter-plaats-img-search\" />\n              }\n            </div>\n            </div>\n            <div>&nbsp;</div>\n          </div>\n          <div className=\"filter-form-values\">\n            { filterGebied === \"\"?\n                <div key={'item-alle'} className=\"form-item-selected form-item\" onClick={e=>{toggleGebieden(false)}}>\n                  Alle plaatsen\n                </div>\n                :\n                <div key={'item-alle'} className=\"form-item\" onClick={e=>{toggleGebieden(false);setFilterGebied(\"\")}}>\n                  Alle plaatsen\n                </div>\n            }\n            { filteredGebieden.map(a=>{\n                if(filterGebied === a.gm_code) {\n                  return (<div key={'item-'+a.gm_code} className=\"form-item-selected form-item\" onClick={e=>{toggleGebieden(false);setFilterGebied(\"\")}}>{a.name}</div>)\n                } else {\n                  return (<div key={'item-'+a.gm_code} className=\"form-item\" onClick={e=>{toggleGebieden(false);setFilterGebied(a.gm_code);}}>{a.name}</div>)\n                }\n              })\n            }\n          </div>\n        </div>\n      </FilterbarExtended>\n    )\n  }\n  \n  let value = gebieden.find(item=>item.gm_code===filterGebied) || \"\";\n  if(gebieden.length===1) {\n    return (\n      <div className=\"filter-plaats-container filter-plaats-not-active\">\n        <div className=\"filter-plaats-title\" onClick={e=>{toggleGebieden('places')}}>Plaats</div>\n        <div className=\"filter-plaats-box-row flex flex-col justify-center\">\n          <div className=\"filter-plaats-value \" >{value===\"\"?\"Alle plaatsen\":value.name}</div>\n        </div>\n      </div>\n    )\n  }\n  \n  return (\n    <div className=\"filter-plaats-container\">\n      <div className=\"filter-plaats-title\" onClick={e=>{toggleGebieden('places')}}>Plaats</div>\n      <div className=\"filter-plaats-box-row flex flex-col justify-center\">\n        <div className={`filter-plaats-value ${value === \"\" ? 'text-black' : ''}`} onClick={e=>{toggleGebieden('places')}}>\n          {value === \"\" ? \"Alle plaatsen\" : value.name}\n        </div>\n        { filterBarExtendedView === 'places' ? renderSelectGebieden(gebieden) : null }\n        {  filterGebied!==\"\" ?\n              <div className=\"filter-plaats-img-cancel\" onClick={unselectGebied} />\n            :\n              null\n        }\n        <div className=\"flex flex-col justify-center h-full\">\n          <div className=\"filter-plaats-img-search\" onClick={e=>{toggleGebieden('places')}} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemGebieden;\n","export default __webpack_public_path__ + \"static/media/calendar.0fe3dc2a.svg\";","import { useEffect, useCallback, useRef } from 'react';\nimport './css/FilteritemDatum.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\nimport './css/FilteritemDatum-Timepicker.css';\nimport './css/FilteritemDatum-Calendar.css';\nimport './css/FilteritemDatum-Clock.css';\n\n// using https://github.com/wojtekmaj/react-datetime-picker with custom styling\nimport DateTimePicker from 'react-datetime-picker/dist/entry.nostyle'; //\nimport calendarIcon from '../../images/calendar.svg';\n\nfunction FilterItemDatum({disabled}) {\n  const dispatch = useDispatch()\n\n  // Variable that stores timeout for delaying setting date \n  let TO_date = useRef(null), TIMEOUT_IN_MS = 0;\n\n  const filterDatum = useSelector(state => {\n    if(state.layers.displaymode === 'displaymode-rentals') {\n      return state.filter && state.filter.intervalend ? state.filter.intervalend : new Date().toISOString();\n    } else {\n      return state.filter && state.filter.datum ? state.filter.datum : new Date().toISOString();\n    }\n  });\n\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : null;\n  });\n\n  const setFilterDatum = useCallback(newdt => {\n    if(TO_date && TO_date.current) clearTimeout(TO_date.current);\n\n    TO_date.current = setTimeout(x => {\n      if(displayMode === 'displaymode-rentals') {\n        dispatch({\n          type: 'SET_FILTER_INTERVAL_END',\n          payload: newdt.toISOString()\n        })\n        return;\n      }\n      dispatch({\n        type: 'SET_FILTER_DATUM',\n        payload: newdt.toISOString()\n      })\n    }, TIMEOUT_IN_MS)\n  }, [TIMEOUT_IN_MS, displayMode])\n\n  // On Component load: set filter datum if filterdatum is undefined\n  useEffect(x => {\n    setFilterDatum(new Date(filterDatum));\n  }, [filterDatum])\n\n  // Check if filterDatum is in future\n  const isInFuture = moment(filterDatum).unix() > moment().unix();\n\n  return (\n    <div className=\"filter-datum-container\">\n      <div className=\"filter-datum-title\">\n        {displayMode === 'displaymode-rentals' ? 'Eindtijd' : 'Datum/tijd'}\n      </div>\n      <div className=\"filter-datum-box-row\">\n        <div className=\"filter-datum-box-1\">\n          <div className={`flex flex-col justify-center ${disabled ? 'invisible' : ''}`}><div\n            className=\"filter-datum-caret\"\n            onClick={() => {\n              setFilterDatum(\n                moment(filterDatum).subtract(1, 'hours')\n              )\n            }}>\n            &lsaquo;\n          </div></div>\n          <div className=\"filter-datum-dtpicker\">\n            <DateTimePicker\n              onChange={setFilterDatum}\n              value={new Date(filterDatum)}\n              clearIcon={null}\n              disabled={disabled}\n              calendarIcon={<img src={calendarIcon} alt=\"Logo\" />}\n              format={\"y-MM-dd H:mm\"}\n              disableClock={true}\n            />\n          </div>\n          <div className={`flex flex-col justify-center ${disabled ? 'invisible' : ''}`}><div\n            className=\"filter-datum-caret\"\n            onClick={() => {\n              setFilterDatum(\n                moment(filterDatum).add(1, 'hours')\n              )\n            }}\n            >&rsaquo;</div></div>\n        </div>\n        <div className=\"filter-datum-box-2\" onClick={() => {\n          setFilterDatum(new Date())\n          window['notify']('Datum/tijd geupdate')\n        }} title=\"Toon huidige datum en tijd\">\n          <div className=\"filter-datum-img-now\" />\n        </div>\n      </div>\n      <div>\n        {isInFuture && <div className=\"my-2 text-red-500 text-sm\">\n          Let op: de ingestelde datum/tijd is in de toekomst\n        </div>}\n      </div>\n    </div>\n  )\n}\n\nexport default FilterItemDatum;\n","import { useState } from 'react';\nimport './css/FilteritemDatumVanTot.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport DatePicker from 'react-datepicker';\nimport { format, addDays, addMonths } from 'date-fns';\nimport moment from 'moment';\n\nfunction FilterItemDatumVanTot() {\n  const dispatch = useDispatch()\n\n  const filterOntwikkelingVan = useSelector(state => {\n    return state.filter && state.filter.ontwikkelingvan ? new Date(state.filter.ontwikkelingvan) : moment().subtract(30, 'days').toDate();\n  });\n  \n  const filterOntwikkelingTot = useSelector(state => {\n    return state.filter && state.filter.ontwikkelingtot ? new Date(state.filter.ontwikkelingtot) : new Date();\n  });\n\n  const filterOntwikkelingAggregatie = useSelector(state => {\n    return state.filter && state.filter.ontwikkelingaggregatie ? state.filter.ontwikkelingaggregatie : 'day';\n  });\n\n  const [startDate, setStartDate] = useState(filterOntwikkelingVan);\n  const [endDate, setEndDate] = useState(filterOntwikkelingTot);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const setAggregationLevel = (newlevel) => {\n    dispatch({\n      type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE',\n      payload: newlevel\n    })\n  }\n\n  const updateFilter = (start, end, aggregatie=false) => {\n    // strip hours\n    const van = new Date(start.toDateString());\n\n    // strip hours, add 24 h\n    let tot = new Date(end.toDateString());\n    // tot.setDate(tot.getDate() + 1);\n    dispatch({\n      type: 'SET_FILTER_ONTWIKKELING_VANTOT',\n      payload: { van: van.toISOString(), tot: tot.toISOString() }\n    })\n    \n    if(aggregatie!==false) {\n      dispatch({\n        type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE',\n        payload: aggregatie\n      })\n    }\n  }\n  const onChange = (dates) => {\n    const [start, end] = dates;\n    setStartDate(start);\n    setEndDate(end);\n    \n    if(null!==end) {\n      updateFilter(start, end);\n      setIsOpen(!isOpen);\n    }\n  };\n  \n  const handleClick = (e) => {\n    e.preventDefault();\n    \n    if(isOpen && endDate===null) {\n      setStartDate(filterOntwikkelingVan)\n      setEndDate(filterOntwikkelingTot)\n    }\n    \n    setIsOpen(!isOpen);\n  };\n  \n  const moveFilterDatum = (movestart) => {\n    let start = startDate;\n    let end = endDate;\n    if(movestart) {\n      switch(filterOntwikkelingAggregatie) {\n        case 'week':\n          start = addDays(startDate, -7);\n          break;\n        case 'month':\n          start = addMonths(startDate, -1);\n          break;\n        case 'day':\n        default:\n          start = addDays(startDate, -1);\n          break;\n      }\n    } else {\n      switch(filterOntwikkelingAggregatie) {\n        case 'week':\n          end = addDays(endDate, 7);\n          break;\n        case 'month':\n          end = addMonths(endDate, 1);\n          break;\n        case 'day':\n        default:\n          end = addDays(endDate, 1);\n          break;\n      }\n    }\n    \n    setStartDate(start)\n    setEndDate(end)\n    \n    updateFilter(start, end);\n  }\n  \n  \n  const setView = (view) => {\n    // strip hours\n    const today = new Date((new Date()).toDateString());\n\n    let start;\n    let end;\n    let agg;\n    switch(view) {\n      case 'vandaag':\n        start = today;\n        end = today;\n        agg='15m';\n        break;\n      case 'laatste2dagen':\n        start = addDays(today,-1);\n        end = today;\n        agg='15m';\n        break;\n      case 'laatste7dagen':\n        start = addDays(today,-6);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste30dagen':\n        start = addDays(today,-30);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste90dagen':\n        start = addDays(today,-90);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste12maanden':\n        start = addDays(today,-365);\n        end = today;\n        agg='week';\n        break;\n      case 'ditjaar':\n        let tyear= today.getFullYear();\n        start = new Date(tyear.toString() + '/1/1');\n        end = today;\n        agg='month';\n        break;\n      case 'vorigjaar':\n        let lyear= today.getFullYear()-1;\n        start = new Date(lyear.toString() + '/1/1');\n        end = new Date(lyear.toString() + '/12/31');\n        agg='month';\n        break;\n      default:\n        return; // do nothing\n    }\n    \n    setAggregationLevel(agg);\n\n    setStartDate(start)\n    setEndDate(end)\n    \n    updateFilter(start, end, agg);\n  }\n\n  const renderPickerInline = () => {\n    return (\n      <div className=\"filter-datum-van-tot-pickercontainer\">\n        <DatePicker\n          key=\"dp-van-tot\"\n          className=\"filter-datum-van-tot-picker\"\n          selected={startDate}\n          onChange={onChange}\n          startDate={startDate}\n          endDate={endDate}\n          dateFormat=\"yyyy-MM-dd\"\n          selectsRange\n          inline\n        />\n        <div className=\"filter-datum-van-tot-picker-options\">\n          <div key=\"fdvt-po1\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('vandaag')}}>Vandaag</div>\n          <div key=\"fdvt-po2\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste2dagen')}}>Laatste 2 dagen</div>\n          <div key=\"fdvt-po3\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste7dagen')}}>Laatste 7 dagen</div>\n          <div key=\"fdvt-po4\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste30dagen')}}>Laatste 30 dagen</div>\n          <div key=\"fdvt-po5\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste90dagen')}}>Laatste 90 dagen</div>\n          <div key=\"fdvt-po6\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste12maanden')}}>Laatste 12 maanden</div>\n          <div key=\"fdvt-po7\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('ditjaar')}}>Dit jaar</div>\n          <div key=\"fdvt-po8\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('vorigjaar')}}>Vorig jaar </div>\n        </div>\n      </div>\n    )\n  }\n    \n  return (\n    <div className=\"filter-datum-van-tot-container\">\n      <div className=\"filter-datum-van-tot-title\">Periode</div>\n      <div className=\"filter-datum-van-tot-box-row\">\n        <div className=\"flex flex-col justify-center\"><div\n          className=\"filter-datum-caret\"\n          onClick={() => {moveFilterDatum(true)}}>\n          &lsaquo;\n        </div></div>\n        <div className=\"filter-datum-van-tot-input\"\n          onClick={handleClick}\n          >\n          {startDate!==null?format(startDate, \"yyyy-MM-dd\"):\"\"}\n          &nbsp;t/m&nbsp;\n          {endDate!==null?format(endDate, \"yyyy-MM-dd\"):\"\"} </div>\n        <div className=\"flex flex-col justify-center\"><div\n          className=\"filter-datum-caret\"\n          onClick={() => {moveFilterDatum(false)}}\n          >\n          &rsaquo;\n        </div></div>\n      </div>\n      { isOpen && renderPickerInline() }\n    </div>\n  )\n}\n\nexport default FilterItemDatumVanTot;\n","import './css/Filterbar.css';\nimport './css/FilteritemDuur.css';\nimport { useDispatch, useSelector } from 'react-redux';\n\nconst c1Hour = 60 * 60 * 1000;\n\nfunction FilterItemInterval() {\n  const dispatch = useDispatch()\n  \n  const filterDuration = useSelector(state => {\n    return state.filter ? state.filter.intervalduur : c1Hour;\n  });\n  \n  const cAnnotations = [\n    { label:'1h', anchor: 'start', pos: '0%', value: c1Hour },\n    { label:'4h', anchor: 'middle', pos: '15%', value: c1Hour * 4},\n    { label:'8h', anchor: 'middle', pos: '26.5%', value: c1Hour * 8},\n    { label:'12h', anchor: 'middle', pos: '39%', value: c1Hour * 12},\n    { label:'16h', anchor: 'middle', pos: '50%', value: c1Hour * 16},\n    { label:'20h', anchor: 'middle', pos: '62%', value: c1Hour * 20},\n    { label:'24h', anchor: 'middle', pos: '73.5%', value: c1Hour * 24},\n    { label:'2d', anchor: 'middle', pos: '85.5%', value: c1Hour * 24 * 2},\n    { label:'3d', anchor: 'middle', pos: '96%', value: c1Hour * 24 * 3}\n  ];\n  let elements = cAnnotations.map(\n    (e,i) => (<text key={'fide-'+i} className=\"filter-duur-annotation\" x={e.pos} y=\"14\" textAnchor={e.anchor}>{e.label}</text>)\n  );\n  \n  let ticks = cAnnotations.map(\n    (e,i) => (<rect key={'fidt-'+i} className=\"filter-duur-tickmark\" x={e.pos} y=\"0\" width=\"1\" height=\"20\"></rect>)\n  );\n  \n  const handleSetDuration = e => {\n    dispatch({\n      type: 'SET_FILTER_INTERVAL_DUUR',\n      payload: cAnnotations[e.target.value].value\n    })\n  }\n  \n  let currentDurationIdx = cAnnotations.findIndex(v=>(v.value===filterDuration));\n  if(currentDurationIdx===-1) { currentDurationIdx = 4 }\n  \n  return (\n    <div className=\"filter-duur-container\">\n      <div className=\"filter-datum-title\">\n        Periode\n      </div>\n      <div className=\"filter-duur-box-row\">\n        <input className=\"filter-duur-range\" width=\"100%\" type=\"range\" min=\"0\" max={cAnnotations.length-1} step=\"1\" onChange={handleSetDuration} value={currentDurationIdx}/>\n        <svg className=\"filter-duur-tickmarks\" role=\"presentation\" width=\"100%\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n          { ticks }\n        </svg>\n        <svg className=\"filter-duur-elements\" role=\"presentation\" width=\"100%\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n          { elements }\n        </svg>\n      </div>\n    </div>\n  )\n}\n\nexport default FilterItemInterval;\n","import { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemAanbieders.css';\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER,\n} from '../../reducers/layers.js';\n\nfunction FilteritemAanbieders() {\n  const dispatch = useDispatch()\n  \n  const aanbieders = useSelector(state => {\n    return (state.metadata && state.metadata.aanbieders) ? state.metadata.aanbieders : [];\n  });\n  \n  const operatorstats = useSelector(state => {\n    let stats = undefined;\n\n    if(state.layers) {\n      switch(state.layers.displaymode) {\n        case DISPLAYMODE_PARK:\n          stats = (state.vehicles&& state.vehicles.operatorstats) ? state.vehicles.operatorstats : false;\n          break;\n        case DISPLAYMODE_RENTALS:\n          if(state.filter && state.rentals) {\n            const key = (state.filter.herkomstbestemming === 'bestemming' ? 'destinations' : 'origins');\n            stats = state.rentals[`${key}_operatorstats`] ? state.rentals[`${key}_operatorstats`] : undefined;\n          }\n          break;\n        case DISPLAYMODE_OTHER:\n          if(state.metadata && state.filter && state.statsreducer) {\n            // Calculate total stats (operator can appear in any of the charts)\n            let stats = {};\n            state.metadata.aanbieders.forEach(a=>{ stats[a.system_id] = 0 });\n            Object.keys(stats).forEach(key=>{\n              if(key in state.statsreducer.operatorstats_verhuringenchart === true) {\n                stats[key] += state.statsreducer.operatorstats_verhuringenchart[key];\n              }\n              if(key in state.statsreducer.operatorstats_beschikbarevoertuigenchart === true) {\n                stats[key] += state.statsreducer.operatorstats_beschikbarevoertuigenchart[key];\n              }\n            })\n            \n            // console.log('stats', stats)\n            return stats;\n          }\n          break;\n        default:\n          ;\n      }\n    }\n    \n    return stats;\n  });\n\n  const filterAanbiedersExclude = useSelector(state => {\n    return state.filter ? state.filter.aanbiedersexclude : [];\n  });\n  \n  const addTofilterAanbiedersExclude = (aanbieder) => {\n    const nexcluded = (filterAanbiedersExclude || '').split(\",\").length;\n    if(nexcluded===aanbieders.length-1) {\n      // console.log(\"needs at least one provider\")\n      return;\n    }\n\n    dispatch({ type: 'ADD_TO_FILTER_AANBIEDERS_EXCLUDE', payload: aanbieder.system_id })\n  }\n  \n  const removeFromfilterAanbiedersExclude = (aanbieder) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE', payload: aanbieder.system_id })\n  }\n  \n  const clearFilterAanbiedersExclude = e => {\n    dispatch({ type: 'CLEAR_FILTER_AANBIEDERS_EXCLUDE', payload: '' })\n  }\n\n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = provider => {\n    // If no filters were set, only show this provider and hide all others\n    if(filterAanbiedersExclude===\"\") {\n      // Disable all but the selected provider\n      aanbieders.map(x => {\n        if(x.system_id !== provider.system_id) {\n          addTofilterAanbiedersExclude(x)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addTofilterAanbiedersExclude(provider)\n    }\n    \n  }\n\n  return (\n    <div className=\"filter-aanbieders-container\">\n      <div className=\"filter-aanbieders-title-row\">\n        <div className=\"filter-aanbieders-title\">Aanbieders</div>\n        { filterAanbiedersExclude!==''\n            ?\n            <div className=\"filter-aanbieders-reset cursor-pointer\" onClick={clearFilterAanbiedersExclude}>\n              reset\n            </div>\n            :\n            null\n        }\n      </div>\n      <div className=\"filter-aanbieders-box-row\">\n        {\n          aanbieders.map((aanbieder, idx) => {\n            if(operatorstats!==undefined) {\n              const notavailable = (operatorstats.length===0 || operatorstats[aanbieder.system_id]===0);\n              if(notavailable) {\n                return (\n                  <div\n                    className={`filter-aanbieders-item filter-aanbieders-item-not-active`}\n                    key={aanbieder.name} >\n                    <div className=\"filter-aanbieders-marker\">\n                      <svg viewBox='0 0 30 30' >\n                        <line x1={'20%'} y1={'20%'} x2={'80%'} y2={'80%'} stroke=\"#000000\" />\n                        <line x1={'20%'} y1={'80%'} x2={'80%'} y2={'20%'} stroke=\"#000000\" />\n                      </svg>\n                    </div>\n                    <div className=\"filter-aanbieders-itemlabel\">\n                      { aanbieder.name }\n                    </div>\n                  </div>\n                )\n              }\n            }\n            \n            let excluded = filterAanbiedersExclude ? filterAanbiedersExclude.includes(aanbieder.system_id) : false;\n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromfilterAanbiedersExclude(aanbieder)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(aanbieder); };\n                \n            return (\n              <div\n                className={`filter-aanbieders-item ${excluded ? 'filter-aanbieders-item-not-active' : ''}`}\n                onClick={handler}\n                key={aanbieder.name}\n                >\n                <div className=\"filter-aanbieders-marker\">\n                  <svg viewBox='0 0 30 30' >\n                    <circle cx={'50%'} cy={'50%'} r={'40%'} fill={\"#000000\"} />\n                    <circle cx={'50%'} cy={'50%'} r={'35%'} fill={\"#FFFFFF\"} />\n                    <circle cx={'70%'} cy={'25%'} r={'25%'} fill={aanbieder.color.toString()} />\n                  </svg>\n                </div>\n                <div className=\"filter-aanbieders-itemlabel\">\n                  { aanbieder.name }\n                </div>\n              </div>\n            )\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemAanbieders;\n","import { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport FilterbarExtended from './FilterbarExtended.jsx';\nimport './css/FilteritemZones.css';\n\nfunction FilteritemZones({\n  zonesToShow\n}) {\n  const dispatch = useDispatch()\n  \n  const zones = useSelector(state => {\n    return (state.metadata && state.metadata.zones) ? state.metadata.zones : [];\n  });\n  \n  const filterZones = useSelector(state => {\n    return state.filter ? state.filter.zones : 0;\n  });\n  \n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : 0;\n  });\n  \n  const filterBarExtendedView = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR_EXTENDED'] : false;\n  });\n\n  let [filterSearch, setFilterSearch] = useState(\"\");\n\n  const addToFilterZones = (zone) => {\n    dispatch({ type: 'ADD_TO_FILTER_ZONES', payload: zone })\n  }\n  \n  const removeFromFilterZones = (zone) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_ZONES', payload: zone })\n  }\n  \n  const clearFilterZones = () => {\n    dispatch({ type: 'CLEAR_FILTER_ZONES', payload: null })\n  }\n\n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  const toggleZones = (val) => {\n    setVisibility('FILTERBAR_EXTENDED', val)\n  }\n  \n  const changeSearchText = e => { setFilterSearch(e.target.value) }\n\n  const clearSearchText = e => { setFilterSearch(\"\") }\n  \n  const zone_groups = [\n    {name: 'Stadsdelen', zone_type: 'residential_area'},\n    {name: 'Maatwerkzones', zone_type: 'custom'},\n    {name: 'Wijken', zone_type: 'neighborhood'},\n    // {name: 'Anders', zone_type: 'municipality'},\n  ];\n\n  let zone_groups_filtered = [];\n  (zonesToShow || [\n      'residential_area',\n      'custom',\n      'neighborhood'\n  ]).forEach(zoneType => {\n    const zone = zone_groups.filter(x => x.zone_type === zoneType);\n    if(zone) zone_groups_filtered.push(zone[0]);\n  })\n  \n  const renderSelectZonesGroup = (group, zones) => {\n    const groupZones = zones.filter(zone=>zone.zone_type===group.zone_type);\n    \n    if(groupZones.length===0) { return null }\n    \n    const sortedZones = groupZones.sort((a,b) => a.name.localeCompare(b.name));\n\n    return (\n      <div key={'zg-'+group.zone_type} className=\"zone-group-container\">\n        <span key={'zgn-'+group.zone_type} className=\"zone-group-title\">{group.name}</span>\n        <div key={'zgi-'+group.zone_type} className=\"filter-zones-zonelist\">\n        { sortedZones.map(a=>{\n            let isSelected = filterZones.includes(a.zone_id);\n            if(isSelected) {\n              return (<div key={'item-'+a.zone_id} className=\"\n                form-item-selected\n                form-item\n                cursor-pointer\n              \" onClick={e=>{ e.stopPropagation(); removeFromFilterZones(a.zone_id)}}>{a.name}</div>)\n            } else {\n              return (<div key={'item-'+a.zone_id} className=\"\n                form-item\n                cursor-pointer\n              \" onClick={e=>{ e.stopPropagation(); addToFilterZones(a.zone_id)}}>{a.name}</div>)\n            }\n          })\n        }\n        </div>\n      </div>\n    )\n  }\n\n  const renderSelectZones = (zones) => {\n    const filteredZones = zones.filter(zone=>{\n      return filterSearch===''|| zone.name.toLowerCase().includes(filterSearch.toLowerCase())\n    })\n    \n    return (\n      <FilterbarExtended\n        title=\"Selecteer een zone\"\n        closeFunction={(val) => toggleZones(false)}\n      >\n        <div className=\"filter-form-selectie\">\n            <div className=\"filter-form-search-container mb-3\">\n              <div className=\"filter-form-search-container-2\">\n              <input type=\"text\"\n                className=\"filter-form-search\"\n                onChange={changeSearchText}\n                value={filterSearch}\n                autoFocus={true}\n                placeholder={\"zoek\"}/>\n              <div className=\"ml-3 flex flex-col justify-center h-full\">\n                { filterSearch!==\"\" ?\n                  <div className=\"filter-zones-img-cancel cursor-pointer\" onClick={clearSearchText} />\n                  :\n                  <div className=\"filter-zones-img-search cursor-pointer\" />\n                }\n              </div>\n            </div>\n            <div>&nbsp;</div>\n          </div>\n          <div className=\"filter-form-values\">\n            { zone_groups_filtered.map(group=>{\n                return renderSelectZonesGroup(group, filteredZones);\n              })}\n          </div>\n        </div>\n      </FilterbarExtended>)\n  }\n  \n  let selectedzones = [];\n  let zonetxt = \"\"\n  try {\n    selectedzones = filterZones.split(',')\n    let aantal = selectedzones.length;\n    if(aantal>1) {\n      zonetxt = aantal + \" zones\";\n    } else {\n      let thezone = zones.find(zone=>(zone.zone_id.toString()===selectedzones[0]));\n      zonetxt = (thezone && thezone.name) || '';\n    }\n  } catch(ex) {\n    zonetxt = \"\";\n  }\n  \n  if(zonetxt===\"\") { zonetxt = \"Alle Zones\" }\n  \n  let isActive = filterGebied !== '';\n  \n  const filteredZones = zones.filter(zone=>{\n    return selectedzones.includes(zone.zone_id.toString())\n  })\n\n  if(! isActive) {\n    return <></>\n  }\n\n  return (\n    <div className={`filter-zones-container ${isActive===true ? '':'filter-zones-item-not-active'}`}>\n      <div className=\"filter-zones-title\" onClick={e=>{isActive && toggleZones('zones')}}>Zones</div>\n      <div className=\"filter-zones-box-row\">\n        <div\n          className={`\n            filter-zones-value flex flex-col justify-center cursor-pointer h-full\n            ${zonetxt === \"Alle Zones\" ? 'text-black' : ''}\n          `}\n          onClick={e=>{isActive && toggleZones('zones')}}\n          >\n          {zonetxt}\n        </div>\n        {  filterZones!==\"\" ?\n              <div className=\"filter-zones-img-cancel\" onClick={clearFilterZones}></div>\n            :\n              null\n        }\n        { filterBarExtendedView === 'zones' ? renderSelectZones(zones) : null }\n        <div className=\"ml-3 flex flex-col justify-center h-full\">\n          <div className=\"filter-zones-img-search cursor-pointer\" onClick={e=>{toggleZones('zones')}} />\n        </div>\n      </div>\n      <div className=\"filter-zones-zonelist\">\n      {\n        filteredZones.map(zone => {\n          return (\n            <div className=\"filter-zones-zoneitem\" key={zone.zone_id}>\n              { zone.name}\n              <div className=\"filter-zones-img-zoneitem-cancel\" onClick={e=>{ e.stopPropagation(); removeFromFilterZones(zone.zone_id)}}></div>\n            </div>\n          )\n        })\n      }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemZones;","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemMarkers.css';\n\nexport function FilteritemMarkersParkeerduur() {\n  const markers = useSelector(state => {\n    return [\n      { id: 0, color: '#1FA024', fillcolor: '#1FA024', name: '< 1 uur'},\n      { id: 1, color: '#48E248', fillcolor: '#48E248', name: '< 24 uur'},\n      { id: 2, color: '#FFD837', fillcolor: '#FFD837', name: '< 4 d'},\n      { id: 3, color: '#FD3E48', fillcolor: '#FD3E48', name: '> 4 d'}\n    ];\n  });\n  \n  return FilteritemMarkers({\n    label: 'Parkeerduur',\n    filtername: 'parkeerduurexclude',\n    markers,\n    addmarker: 'ADD_TO_FILTER_MARKERS_EXCLUDE',\n    removemarker: 'REMOVE_FROM_FILTER_MARKERS_EXCLUDE',\n    clearmarkers: 'CLEAR_FILTER_MARKERS_EXCLUDE'\n  });\n}\n\nexport function FilteritemMarkersAfstand() {\n  const markers = useSelector(state => {\n    return [\n      { id: 0, color: '#48E248', fillcolor: '#48E248', name: '1km'},\n      { id: 1, color: '#44BD48', fillcolor: '#44BD48', name: '2km'},\n      { id: 2, color: '#3B7747', fillcolor: '#3B7747', name: '5km'},\n      { id: 3, color: '#343E47', fillcolor: '#343E47', name: '> 5km'}\n    ];\n  });\n  \n  return FilteritemMarkers({\n    label: 'Afstand',\n    filtername: 'afstandexclude',\n    markers,\n    addmarker: 'ADD_TO_FILTER_AFSTAND_EXCLUDE',\n    removemarker: 'REMOVE_FROM_FILTER_AFSTAND_EXCLUDE',\n    clearmarkers: 'CLEAR_FILTER_AFSTAND_EXCLUDE'\n  });\n}\n\nfunction FilteritemMarkers({label, filtername, markers, addmarker, removemarker, clearmarkers}) {\n  const dispatch = useDispatch()\n\n  const filterMarkersExclude = useSelector(state => {\n    return state.filter ? state.filter[filtername] : '';\n  }) || '';\n  \n  const addToFilterMarkersExclude = (marker) => {\n    console.log(\"addtofilter %s -> %s\", filtername, marker)\n    dispatch({ type: addmarker, payload: marker })\n  }\n  \n  const removeFromFilterMarkersExclude = (marker) => {\n    console.log(\"removefromfilter %s -> %s\", filtername, marker)\n    dispatch({ type: removemarker, payload: marker })\n  }\n  \n  const clearFilterMarkersExclude = () => {\n    console.log(\"clearfilter %s\", filtername)\n    dispatch({ type: clearmarkers, payload: null })\n  }\n  \n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = id => {\n    console.log(\"clickfilter [%s]<\", filterMarkersExclude);\n    // If no filters were set, only show this provider and hide all others\n    if(filterMarkersExclude===\"\") {\n      // Disable all but the selected provider\n      markers.map(x => {\n        if(x.id !== id) {\n          addToFilterMarkersExclude(x.id)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addToFilterMarkersExclude(id)\n    }\n  }\n  \n  \n  return (\n    <div className=\"filter-markers-container\">\n    <div className=\"filter-markers-title-row\">\n      <div className=\"filter-markers-title\">{label}</div>\n      { filterMarkersExclude!==''?\n          <div className=\"filter-markers-reset cursor-pointer\" onClick={clearFilterMarkersExclude}>\n            reset\n          </div>\n          :\n          null\n      }\n    </div>\n      <div className=\"filter-markers-box-row\">\n        {\n          markers.map(marker => {\n            let excluded = filterMarkersExclude.split(\",\").includes(marker.id.toString());\n            \n            let className = excluded ? \"filter-markers-item-excluded\": \"filter-markers-item\";\n            \n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromFilterMarkersExclude(marker.id)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(marker.id)};\n                \n            return (\n              <div className={className} key={marker.id}>\n                <div className=\"filter-markers-marker\" onClick={handler}>\n                  <svg viewBox='0 0 30 30' >\n                    <circle cx={'50%'} cy={'50%'} r={'40%'} fill={marker.color} />\n                    <circle cx={'50%'} cy={'50%'} r={'34%'} fill={marker.fillcolor} />\n                  </svg>\n                </div>\n                <div className=\"filter-markers-itemlabel\">\n                  { marker.name }\n                </div>\n              </div>)\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemHerkomstBestemming.css';\n\nexport default function FilteritemHerkomstBestemming() {\n  const dispatch = useDispatch()\n\n  const filterHerkomstBestemming = useSelector(state => {\n    let value = 'herkomst';\n    if(state.filter) {\n      value=state.filter.herkomstbestemming==='bestemming' ? 'bestemming':'herkomst';\n    }\n    return value;\n  });\n  \n  const setFilterHerkomstBestemming = (value) => e => {\n    dispatch({ type: 'SET_FILTER_HERKOMSTBESTEMMING', payload: value })\n  }\n  \n  let classNameHerkomst = 'filter-herkomst-bestemming-button'\n  let classNameBestemming = 'filter-herkomst-bestemming-button'\n  if(filterHerkomstBestemming==='bestemming') {\n    classNameBestemming+=' filter-herkomst-bestemming-button-active'\n  } else {\n    classNameHerkomst+=' filter-herkomst-bestemming-button-active'\n  }\n  \n  return (\n    <div className=\"filter-herkomst-bestemming-container\">\n      <div className=\"filter-herkomst-bestemming-box-row\">\n        <div className={classNameHerkomst} onClick={setFilterHerkomstBestemming('herkomst')}>Herkomst</div>\n        <div className={classNameBestemming} onClick={setFilterHerkomstBestemming('bestemming')}>Bestemming</div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemVoertuigTypes.css';\n\nfunction FilteritemVoertuigTypes() {\n  const dispatch = useDispatch()\n\n  const voertuigtypes = useSelector(state => {\n    return state.metadata.vehicle_types ? state.metadata.vehicle_types || [] : [];\n  });\n  \n  const filterVoertuigTypesExclude = useSelector(state => {\n    if(Array.isArray(state.filter.voertuigtypesexclude)) {\n      return '';\n    }\n    \n    return state.filter ? state.filter.voertuigtypesexclude : '';\n  }) || '';\n  \n  const addToFilterVoertuigTypesExclude = (voertuigtype) => {\n    const nexcluded = (filterVoertuigTypesExclude || '').split(\",\").length;\n    if(nexcluded===voertuigtypes.length-1) {\n      // console.log(\"needs at least one provider\")\n      return;\n    }\n\n    dispatch({ type: 'ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE', payload: voertuigtype })\n  }\n  \n  const removeFromFilterVoertuigTypesExclude = (voertuigtype) => {\n    // console.log('REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE %s', voertuigtype)\n    dispatch({ type: 'REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE', payload: voertuigtype })\n  }\n  \n  const clearFilterVoertuigTypesExclude = () => {\n    dispatch({ type: 'CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE', payload: null })\n  }\n  \n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = type => {\n    // console.log(\"clickfilter [%s]<\", filterVoertuigTypesExclude);\n    // If no filters were set, only show this provider and hide all others\n    if(filterVoertuigTypesExclude===\"\") {\n      // Disable all but the selected provider\n      voertuigtypes.map(x => {\n        if(x.id !== type) {\n          addToFilterVoertuigTypesExclude(x.id)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addToFilterVoertuigTypesExclude(type)\n    }\n  }\n  \n  return (\n    <div className=\"filter-voertuigtypes-container\">\n      <div className=\"filter-voertuigtypes-title-row\">\n        <div className=\"filter-voertuigtypes-title\">Vervoerstype</div>\n        { filterVoertuigTypesExclude!==''?\n            <div className=\"filter-voertuigtypes-reset cursor-pointer\" onClick={clearFilterVoertuigTypesExclude}>\n              reset\n            </div>\n            :\n            null\n        }\n      </div>\n      <div className=\"filter-voertuigtypes-box-row\">\n        {\n          voertuigtypes.map((voertuigtype,idx) => {\n            let excluded = (filterVoertuigTypesExclude ? filterVoertuigTypesExclude: '').split(\",\").includes(voertuigtype.id);\n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromFilterVoertuigTypesExclude(voertuigtype.id)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(voertuigtype.id)};\n              \n            let baseClassName = `${excluded ? \"filter-voertuigtypes-item-excluded\": \"filter-voertuigtypes-item\"}`;\n            let extraclass = \"\";\n            switch(voertuigtype.id) {\n              case \"bicycle\": extraclass = \"filter-voertuigtypes-icon-bicycle\"; break;\n              case \"cargo_bicycle\": extraclass = \"filter-voertuigtypes-icon-cargo-bicycle\"; break;\n              case \"moped\": extraclass = \"filter-voertuigtypes-icon-scooter\"; break;\n              case \"car\": extraclass = \"filter-voertuigtypes-icon-car\"; break;\n              case \"unknown\" : extraclass = \"filter-voertuigtypes-icon-other\"; break;\n              default:\n                break;\n            }\n                \n            return (\n              <div className={`${baseClassName}${idx===voertuigtypes.length-1?' filter-voertuigtypes-item-last':''}`} key={voertuigtype.id} onClick={handler}>\n                <div className={`filter-voertuigtypes-icon ${extraclass}`} onClick={handler} />\n                <div className=\"filter-voertuigtypes-itemlabel\">\n                  { voertuigtype.name }\n                </div>\n              </div>)\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemVoertuigTypes;","import {themes} from '../../themes';\nimport {\n  getIndicatorColor,\n  getNumVehiclesAvailable,\n  getNumPlacesAvailable\n} from '../Map/MapUtils/zones.js';\nimport {motion} from 'framer-motion/dist/framer-motion'\n\nfunction Tag({\n  title,\n  backgroundColor,\n  beforeHtml,\n  onClick,\n  isActive\n}) {\n  return (\n    <motion.div\n      className={`\n        inline-block\n        rounded\n        text-white\n        px-2\n        py-2\n        pb-1\n        mr-2\n        mb-2\n        text-sm\n        relative\n        ${onClick ? 'cursor-pointer' : ''}\n      `}\n      style={{\n        backgroundColor: isActive ? '#fff' : backgroundColor,\n        color: isActive ? '#000' : false,\n        borderBottom: isActive ? 'solid #000 3px' : 'solid transparent 3px',\n        boxShadow: isActive ? '0px -3px 0px #003' : 'none',\n        opacity: isActive ? '0.8' : '1',\n        borderRadius: isActive ? 0 : false,\n        top: isActive ? '2px' : false\n      }}\n      onClick={onClick}\n      whileHover={{ scale: 1.05 }}\n      whileTap={{ scale: 1.01 }}\n    >\n      <div className=\"inline-block\" dangerouslySetInnerHTML={{ __html: beforeHtml}} />\n      {title}\n    </motion.div>\n  )\n}\n\nexport const renderZoneTag = (\n  {\n    zone_id,\n    name,\n    geography_type,\n    stop,\n    onClick\n  },\n  isActive,\n  viewMode\n) => {\n  const backgroundColors = {\n    'monitoring': themes.zone.monitoring.primaryColor,\n    'stop': themes.zone.stop.primaryColor,\n    'no_parking': themes.zone.no_parking.primaryColor\n  }\n  // Function that adds some HTML to the tag\n  const getBeforeHtml = (stop) => {\n    if(! stop) return '';\n    // 1. If manually closed: show this is the case\n    if(stop.status.control_automatic ===  false && stop.status.is_returning === false) {\n      return '<div class=\"mr-1\"></div>';\n    }\n    // 2. Set color that represents how full the zone is\n    // Don't show color indicator if in admin mode\n    if(viewMode !== 'readonly') return;\n    // Check if stop has capacity property\n    if(stop && stop.capacity) {\n      const numPlacesAvailable = getNumPlacesAvailable(stop)\n      const numVehiclesAvailable = getNumVehiclesAvailable(stop.realtime_data)\n      return `<div class=\"\n        rounded-full w-3 h-3 mr-2\n        border border-2 border-white\n      \" style=\"background-color: ${getIndicatorColor(numVehiclesAvailable, numPlacesAvailable)}\" />`\n    }\n    return '';\n  }\n  return <Tag\n    key={zone_id}\n    title={name}\n    backgroundColor={backgroundColors[geography_type] || '#000'}\n    beforeHtml={getBeforeHtml(stop)}\n    onClick={onClick}\n    isActive={isActive}\n  >\n    {name}\n  </Tag>\n}\n\nexport default Tag;\n","import {themes} from '../../themes';\n\nfunction Button({\n  theme,\n  children,\n  onClick\n}) {\n  return (\n    <div\n      className=\"\n        rounded-lg\n        inline-block\n        border-solid border-2\n        px-2\n        py-2\n        mr-2\n        mb-2\n        text-sm\n        cursor-pointer\n      \"\n      onClick={onClick}\n      style={themes[theme]}\n    >\n      {children}\n    </div>\n  )\n}\n\nexport {\n  Button\n}\n\nexport default Button;\n","import {themes} from '../../themes';\n\nfunction Text({\n  theme,\n  children,\n  onClick,\n  classes\n}) {\n  return (\n    <div\n      className={`\n        inline-block\n        py-2\n        mb-2\n        text-sm\n        cursor-pointer\n        ${classes}\n      `}\n      onClick={onClick}\n      style={{\n        color: themes[theme].color\n      }}\n    >\n      {children}\n    </div>\n  )\n}\n\nexport {\n  Text\n}\n\nexport default Text;\n","const Modal = ({\n  isVisible,\n  title,\n  children,\n  button1Title,\n  button1Handler,\n  button2Title,\n  button2Handler,\n  hideModalHandler,\n}) => {\n  return (\n    <>\n      <div className={`modal-backdrop fade ${isVisible ? 'show' : ''}`} style={{display: isVisible ? 'block' : 'none'}}></div>\n      <div className={`modal fade ${isVisible ? 'show' : ''} fixed top-0 left-0 w-full h-full outline-none overflow-x-hidden overflow-y-auto`}\n      style={{'display': isVisible ? 'block' : 'none'}}\n        id=\"exampleModalCenteredScrollable\" tabIndex=\"-1\" aria-labelledby=\"exampleModalCenteredScrollable\" aria-modal=\"true\" role=\"dialog\">\n        <div className=\"modal-dialog modal-dialog-centered modal-dialog-scrollable relative w-auto pointer-events-none\">\n          <div className=\"modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-md outline-none text-current\">\n            <div className=\"modal-header flex flex-shrink-0 items-center justify-between p-4 border-b border-gray-200 rounded-t-md\">\n              <h5 className=\"text-xl leading-normal text-gray-800 font-semibold\" id=\"exampleModalCenteredScrollableLabel\">\n                {title}\n              </h5>\n              <button type=\"button\"\n                className=\"btn-close box-content w-4 h-4 p-1 text-black border-none rounded-none opacity-50 focus:shadow-none focus:outline-none focus:opacity-100 hover:text-black hover:opacity-75 hover:no-underline\"\n                data-bs-dismiss=\"modal\" aria-label=\"Close\"\n                onClick={hideModalHandler}\n                ></button>\n            </div>\n            {children && <div className=\"modal-body relative p-4\">\n              {children}\n            </div>}\n            <div\n              className=\"modal-footer flex flex-shrink-0 flex-wrap items-center justify-end p-4 border-t border-gray-200 rounded-b-md\">\n              {button1Title && <button type=\"button\"\n                className=\"inline-block px-6 py-2.5 bg-gray-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-gray-700 hover:shadow-lg focus:bg-gray-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-gray-800 active:shadow-lg transition duration-150 ease-in-out cursor-pointer\"\n                data-bs-dismiss=\"modal\"\n                onClick={button1Handler}>\n                {button1Title}\n              </button>}\n              <button type=\"button\"\n                className=\"inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out ml-1 cursor-pointer\"\n                onClick={button2Handler}>\n                {button2Title}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\n\nexport default Modal;\n","import './css/FilterbarZones.css';\nimport React, {\n  useEffect,\n  useState,\n  useCallback,\n  // useRef\n} from 'react';\nimport {useLocation} from \"react-router-dom\";\nimport md5 from 'md5';\nimport {useSelector} from 'react-redux';\n// import { motion } from \"framer-motion\";\n// import moment from 'moment';\nimport st from 'geojson-bounds';\nimport { Link } from \"react-router-dom\";\nimport * as R from 'ramda';\nimport center from '@turf/center'\nimport FilteritemGebieden from './FilteritemGebieden.jsx';\n// import FilteritemVoertuigTypes from './FilteritemVoertuigTypes.jsx';\n\nimport Logo from '../Logo.jsx';\nimport {renderZoneTag} from '../Tag/Tag';\nimport Button from '../Button/Button';\nimport Text from '../Text/Text';\nimport FormInput from '../FormInput/FormInput';\nimport Modal from '../Modal/Modal.jsx';\nimport FilteritemDatum from './FilteritemDatum.jsx';\n\nimport {\n  setPublicZoneUrl,\n  setAdminZoneUrl,\n  getAdminZones,\n  // getPublicZones,\n  getZoneById,\n  sortZonesInPreferedOrder,\n  getLocalDrawsOnly,\n  getDraftFeatureId,\n  fetchAdminZones,\n  fetchPublicZones\n} from '../Map/MapUtils/zones.js';\n\n// Import API functions\nimport {\n  postZone,\n  putZone,\n  deleteZone\n} from '../../api/zones';\n\nfunction ModalityRow({\n  children,\n  imageUrl,\n  onChange,\n  name,\n  value\n}) {\n  return <div className=\"\n    bg-no-repeat\n    pl-12\n    h-8\n    flex\n    w-full\n  \" style={{\n    backgroundImage: `url('${imageUrl}')`,\n    backgroundSize: '30px',\n    backgroundPosition: 'center left'\n  }}>\n    <input\n      name={name}\n      className=\"flex-1\"\n      width=\"100%\"\n      type=\"range\"\n      min=\"0\"\n      max=\"250\"\n      step=\"1\"\n      onChange={onChange}\n      value={value}\n      style={{width: \"calc(100% - 48px)\"}}\n    />\n    <div className=\"text-xs ml-2 h-8 flex justify-center flex-col\">\n      {value ? value : ''}\n    </div>\n    {children}\n  </div>\n}\n\nfunction FilterbarZones({\n  hideLogo,\n  view\n}) {\n  const zoneTemplate = {\n    geography_type: 'monitoring',\n    zone_availability: 'auto',\n    published: true\n  }\n\n  const [viewMode, setViewMode] = useState(view || 'adminView');// Possible modes: readonly|adminView|adminEdit\n  const [didInitEventHandlers, setDidInitEventHandlers] = useState(false);\n  const [counter, setCounter] = useState(0);\n  const [drawedArea, setDrawedArea] = useState(null);\n  const [adminZones, setAdminZones] = useState(null);\n  const [activeZone, setActiveZone] = useState(zoneTemplate);\n  const [lastClickedZone, setLastClickedZone] = useState();\n  const [didChangeZoneConfig, setDidChangeZoneConfig] = useState(false);\n  const [limitType, setLimitType] = useState('modality');\n  const [pathName, setPathName] = useState(document.location.pathname);\n  const [doShowModal, setDoShowModal] = useState(false);\n  const [doShowImportModal, setDoShowImportModal] = useState(false);\n\n  const labelClassNames = 'mb-2 text-sm';\n\n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : null;\n  });\n\n  const token = useSelector(state => {\n    if(state.authentication && state.authentication.user_data) {\n      return state.authentication.user_data.token;\n    }\n    return null;\n  });\n\n  // Store window location in a local variable\n  let location = useLocation();\n  useEffect(() => {\n    setPathName(location ? location.pathname : null);\n  }, [location]);\n\n  // Do something if admin changes zone boundaries\n  useEffect(() => {\n    if(! drawedArea) return;\n    setDidChangeZoneConfig(true);\n  }, [drawedArea])\n\n  // If viewMode prop changed: update state\n  useEffect(() => {\n    setViewMode(view);\n  }, [view]);\n\n  // Set map event handlers\n  useEffect(() => {\n    if(! window.ddMap) {\n      return;\n    }\n    if(didInitEventHandlers) {\n      return;\n    }\n\n    window.ddMap.on('draw.create', function (e) {\n      if(! e.features || ! e.features[0]) return;\n      setDrawedArea(e.features[0]);\n      setDidChangeZoneConfig(true);\n    });\n\n    window.ddMap.on('draw.update', function (e) {\n      if(! e.features || ! e.features[0]) return;\n      setDrawedArea(e.features[0]);\n      setDidChangeZoneConfig(true);\n    });\n\n    setDidInitEventHandlers(true);\n  }, [window.ddMap])\n\n  // Call function if polygon is selected (for editting zones)\n  useEffect(() => {\n    window.addEventListener('setSelectedZone', eventHandler)\n    return () => {\n      window.removeEventListener('setSelectedZone', eventHandler);\n    }\n  }, [\n    viewMode,\n    // Update on adminZones, as we need to be able to read the db values\n    adminZones,\n    // Update on didChangeZoneConfig, as we need to know if a zone was edited\n    didChangeZoneConfig,\n    // Update on activeZone, so we can compare zone_id\n    activeZone,\n  ])\n\n  const selectMapFeature = (zoneId) => {\n    // Check if dependencies are present\n    if(! window.ddMap || ! zoneId) return;\n    // Get feature\n    const feature = window.CROW_DD.theDraw.get(zoneId);\n    // Check if feature was found\n    if(! feature) return;\n    // Select after a few milliseconds\n    // setTimeout(() => {\n      window.CROW_DD.theDraw.changeMode('direct_select', {\n        featureId: zoneId\n      });\n    // }, 5)\n  }\n\n  const eventHandler = async (e, config) => {\n    if(viewMode !== 'adminView' && viewMode !== 'adminEdit') return;\n\n    const zoneId = e.detail;\n    if(\n      zoneId === activeZone.zone_id// Currently edited zone\n      || typeof zoneId === 'string'// New zone\n    ) {\n      // Do nothing\n      return;\n    }\n\n    // Store clicked zone (ID) in state\n    setLastClickedZone(zoneId);\n\n    // If a second zone is selected, but the active one is not saved yet:\n    const skipConfirmation = config && config.skipConfirmation;\n    if(didChangeZoneConfig && ! skipConfirmation) {\n      // Ask for confirmation\n      setDoShowModal(true);\n      // Stop executing rest of script\n      return;\n    }\n\n    // Set didChangeZoneConfig to false\n    setDidChangeZoneConfig(false);\n\n    // Don't do anything if zone was selected already\n    if(zoneId === activeZone.zone_id && window.CROW_DD.theDraw.getMode() === 'direct_select') {\n      console.log('Stopped executing as zone was selected already')\n      return;\n    }\n\n    // Select selected feature on the map\n    selectFeature(zoneId);\n\n    // Update state\n    const didZoneUpdate = updateZoneStateToDatabaseValues(zoneId);\n\n    // Enable edit mode\n    if(didZoneUpdate) {\n      setViewMode('adminEdit');\n    }\n\n    return true;\n  }\n\n  const getAdminZones = async () => {\n    const sortedZones = await fetchAdminZones(token, filterGebied);\n    setAdminZones(sortedZones);\n\n    return sortedZones;\n  }\n\n  const getPublicZones = async () => {\n    const sortedZones = await fetchPublicZones(filterGebied);\n\n    setAdminZones(sortedZones);\n  }\n\n  // Get public zones on component load, and keep refreshing\n  useEffect(() => {\n    // Decide on the function to call (admin or public)\n    const getZonesFunc = token ? getAdminZones : getPublicZones;\n    // On load: get zones\n    let TO_local = setTimeout(async () => {\n      getZonesFunc();\n    }, 5);\n    // Set an interval: refresh data every 60s\n    let TO_local_interval = setInterval(async () => {\n      getZonesFunc();\n    }, 60*1000);\n    // Cleanup\n    return () => {\n      clearTimeout(TO_local);\n      clearInterval(TO_local_interval);\n    }\n  }, [\n    filterGebied\n  ])\n\n  const autoSaveZone = async () => {\n    return await saveZone();\n  }\n\n  const updateZoneStateToDatabaseValues = (zoneId) => {\n    // Get zone info from database\n    const foundZone = getZoneById(adminZones, zoneId);\n\n    if(foundZone) {\n      // Change URL\n      setAdminZoneUrl(foundZone.geography_id)\n      // Set zone data\n      let zoneToSet = zoneTemplate;\n      zoneToSet.zone_id = foundZone.zone_id;\n      zoneToSet.area = foundZone.area;\n      zoneToSet.name = foundZone.name;\n      zoneToSet.municipality = foundZone.municipality;\n      zoneToSet.geography_type = foundZone.geography_type || zoneTemplate.geography_type;\n      zoneToSet.geography_id = foundZone.geography_id;\n      zoneToSet.description = foundZone.description;\n      zoneToSet.published = true;//foundZone.published || zoneTemplate.published;\n      if(foundZone.stop) {\n        zoneToSet.stop = foundZone.stop;\n        zoneToSet['vehicles-limit.bicycle'] = foundZone.stop.capacity.bicycle || 0;\n        zoneToSet['vehicles-limit.moped'] = foundZone.stop.capacity.moped || 0;\n        zoneToSet['vehicles-limit.scooter'] = foundZone.stop.capacity.scooter || 0;\n        zoneToSet['vehicles-limit.cargo_bicycle'] = foundZone.stop.capacity.cargo_bicycle || 0;\n        zoneToSet['vehicles-limit.car'] = foundZone.stop.capacity.car || 0;\n        zoneToSet['vehicles-limit.other'] = foundZone.stop.capacity.other || 0;\n        zoneToSet['vehicles-limit.combined'] = foundZone.stop.capacity.combined || 0;\n        // Set zone availability\n        if(foundZone.stop.status.control_automatic === true) {\n          zoneToSet.zone_availability = 'auto';\n        } else if(! foundZone.stop.status.control_automatic && foundZone.stop.status.is_returning === true) {\n          zoneToSet.zone_availability = 'open';\n        } else if(! foundZone.stop.status.control_automatic && foundZone.stop.status.is_returning === false) {\n          zoneToSet.zone_availability = 'closed';\n        }\n        // Set limit type\n        if(zoneToSet['vehicles-limit.combined'] && zoneToSet['vehicles-limit.combined'] > 0) {\n          setLimitType('combined');\n        } else {\n          setLimitType('modality');\n        }\n      }\n      setActiveZone(zoneToSet);\n    }\n\n    return foundZone;\n  }\n\n  const selectFeature = (zoneId) => {\n    if(window.ddMap && zoneId) {\n      const feature = window.CROW_DD.theDraw.get(zoneId);\n      if(feature) {\n        // Select\n        window.CROW_DD.theDraw.changeMode('direct_select', {\n          featureId: zoneId\n        });\n      }\n    }\n  }\n\n  const enableDrawingPolygons = () => {\n    // Check if the map is initiated and draw is available\n    if(! window.CROW_DD.theDraw) return;\n    // Change mode to 'draw polygon'\n    window.CROW_DD.theDraw.changeMode('draw_polygon');\n    // Clear data\n    setActiveZone(zoneTemplate);\n    // Set view mode to 'adminEdit'\n    setViewMode('adminEdit');\n  }\n\n  const disableDrawingPolygons = () => {\n    // Check if the map is initiated and draw is available\n    if(! window.CROW_DD.theDraw) return;\n    // Change mode to 'draw polygon'\n    // window.CROW_DD.theDraw.changeMode('static', []);\n    window.CROW_DD.theDraw.changeMode('simple_select', []);\n    // Set view mode to 'adminView'\n    setViewMode('adminView');\n  }\n\n  const changeHandler = (e) => {\n    if(! e.target) return;\n    if(! e.target.name) return;\n\n    // Set didChangeZoneConfig to true\n    setDidChangeZoneConfig(true);\n\n    // Update active zone data\n    let updatedZoneData = activeZone;\n    updatedZoneData[e.target.name] = e.target.value;\n    setActiveZone(updatedZoneData);\n    setCounter(counter+1);// Because above var is referenced and doesn't trigger a re-render\n  }\n\n  const getRequestData = () => {\n    // If zone has been updated:\n    if(activeZone.geography_id) {\n      return {\n        geography_id: activeZone.geography_id,\n        geography_type: activeZone.geography_type,\n        municipality: activeZone.municipality,\n        name: activeZone.name,\n        description: activeZone.description,\n        published: activeZone.published,\n        zone_availability: activeZone.zone_availability,\n        zone_id: activeZone.zone_id,\n        area: drawedArea || activeZone.area\n      }\n    }\n    // If zone is newly created:\n    else {\n      return Object.assign({\n        geography_id: activeZone.geography_id,\n        geography_type: activeZone.geography_type,\n        name: activeZone.name,\n        published: activeZone.published,\n        zone_availability: activeZone.zone_availability\n      }, {\n        municipality: filterGebied,\n        area: drawedArea,\n        description: 'Zone'\n      })\n    }\n  }\n\n  const getRequestDataForMonitoring = () => {\n    return getRequestData();\n  }\n  const getRequestDataForStop = () => {\n    let data = getRequestData();\n    data.geography_type = 'stop';\n    data.stop = generateStopObject();\n    return data;\n  }\n  const getRequestDataForNoParking = () => {\n    let data = getRequestData();\n    data.no_parking = activeZone.no_parking || {}\n    return data;\n  }\n\n  // Generates the data object for 'stops'\n  const generateStopObject = () => {\n    const getCapacity = () => {\n      if(limitType === 'combined') {\n        if(! activeZone['vehicles-limit.combined'] || activeZone['vehicles-limit.combined'] <= 0) {\n          return {}\n        }\n        return {\n          \"combined\": parseInt(activeZone['vehicles-limit.combined'])\n        }\n      }\n      let capacity = {};\n      if(parseInt(activeZone['vehicles-limit.cargo_bicycle']) > 0) capacity.cargo_bicycle = parseInt(activeZone['vehicles-limit.cargo_bicycle']);\n      if(parseInt(activeZone['vehicles-limit.scooter']) > 0) capacity.scooter = parseInt(activeZone['vehicles-limit.scooter']);\n      if(parseInt(activeZone['vehicles-limit.bicycle']) > 0) capacity.bicycle = parseInt(activeZone['vehicles-limit.bicycle']);\n      if(parseInt(activeZone['vehicles-limit.car']) > 0) capacity.car = parseInt(activeZone['vehicles-limit.car']);\n      if(parseInt(activeZone['vehicles-limit.other']) > 0) capacity.other = parseInt(activeZone['vehicles-limit.other']);\n      if(parseInt(activeZone['vehicles-limit.moped']) > 0) capacity.moped = parseInt(activeZone['vehicles-limit.moped']);\n      return capacity;\n    }\n    const getStatus = () => {\n      return {\n        \"control_automatic\": activeZone && activeZone.zone_availability === 'auto',\n        \"is_returning\": activeZone && (activeZone.zone_availability === 'auto' || activeZone.zone_availability === 'open'),\n        \"is_installed\": activeZone && activeZone.stop && activeZone.stop.status ? activeZone.stop.status.is_installed : false,\n        \"is_renting\": activeZone && activeZone.stop && activeZone.stop.status ? activeZone.stop.status.is_renting : false,\n      }\n    }\n    if(activeZone && activeZone.stop && activeZone.stop_id) {\n      return {\n        stop_id: activeZone.stop.stop_id,\n        location: activeZone.stop.location,\n        status: getStatus(),\n        capacity: getCapacity()\n      }\n    }\n    return {\n      location: activeZone.area ? center(activeZone.area) : center(drawedArea),\n      status: getStatus(),\n      capacity: getCapacity()\n    }\n  }\n\n  const saveZone = async () => {\n    if(! activeZone.area && ! drawedArea) {\n      notify('Teken eerst een zone voordat je deze opslaat')\n      return;\n    }\n\n    // Save zone\n    let requestData = getRequestDataForMonitoring();\n    if(activeZone.geography_type === 'stop') requestData = getRequestDataForStop();\n    else if(activeZone.geography_type === 'no_parking') requestData = getRequestDataForNoParking();\n\n    // If existing: update/put zone\n    if(activeZone.geography_id) {\n      const updatedZone = await putZone(token, requestData);\n      // Error handling\n      if(! updatedZone || ! updatedZone.zone_id) {\n        console.error(updatedZone);\n        alert('Er ging iets fout bij het opslaan van de zone.')\n        return;\n      }\n      // Set updated zone in states\n      setActiveZone(updatedZone);\n      // Remove old drawed area\n      window.CROW_DD.theDraw.delete(activeZone.zone_id);\n      // Add new drawed area\n      var feature = {\n        id: updatedZone.zone_id,\n        type: 'Feature',\n        properties: {\n          geography_type: updatedZone.geography_type\n        },\n        geometry: { type: 'Polygon', coordinates: updatedZone.area.geometry.coordinates }\n      };\n      var featureIds = window.CROW_DD.theDraw.add(feature);\n      // After updating zone: reload adminZones\n      getAdminZones();\n    }\n    // If new: post zone\n    else {\n      const createdZone = await postZone(token, requestData)\n      // After creating new zone: reload adminZones\n      getAdminZones();\n      // After creating new zone: set polygon data\n      if(! createdZone || ! createdZone.area) return;\n      const feature = {\n        id: createdZone.zone_id,\n        type: 'Feature',\n        properties: {\n          geography_type: createdZone.geography_type\n        },\n        geometry: { type: 'Polygon', coordinates: createdZone.area.geometry.coordinates }\n      };\n      const featureIds = window.CROW_DD.theDraw.add(feature);\n    }\n\n    // Set map to normal again\n    disableDrawingPolygons();\n\n    // Reset 'activeZone'\n    setActiveZone(zoneTemplate);   \n\n    // Delete all local zones from map\n    deleteAllLocalZones();\n\n    setDidChangeZoneConfig(false);\n\n    return true;\n  }\n\n  const newZoneButtonHandler = () => {\n    enableDrawingPolygons();\n  }\n\n  const deleteZoneHandler = async () => {\n\n    if(! window.confirm('Weet je zeker dat je deze zone wilt verwijderen?')) return;\n\n    if(! activeZone || ! activeZone.geography_id) return;\n    await deleteZone(token, activeZone.geography_id)\n\n    // Reload adminZones\n    getAdminZones();\n\n    // Delete polygon from map\n    window.CROW_DD.theDraw.delete(activeZone.zone_id);\n\n    // Set map to normal again\n    disableDrawingPolygons();\n  }\n  \n  const deleteAllLocalZones = () => {\n    const allDraws = window.CROW_DD.theDraw.getAll();\n    getLocalDrawsOnly(allDraws.features).map(x => {\n      window.CROW_DD.theDraw.delete(x.id);\n    })\n  }\n\n  const cancelButtonHandler = async ({skipConfirmation}) => {\n    // Only ask for a confirmation if the area was changed\n    const isNewZone = ! activeZone.geography_id;\n    if(drawedArea && isNewZone && ! skipConfirmation) {\n      if(! window.confirm('Weet je zeker dat je het tekenen van de zone wilt annuleren?')) {\n        return;\n      }\n    }\n    // Cleanup\n    // - Revert changes to existing polygons\n    window.CROW_DD.theDraw.trash();\n    setDrawedArea(null);\n    // - Delete local polygons\n    deleteAllLocalZones();\n    // Disable drawing mode\n    disableDrawingPolygons();\n    // Reset 'activeZone'\n    setActiveZone(zoneTemplate);\n    // Reload adminZones\n    await getAdminZones();\n    // Set active to back to default (unedited) data\n    if(! isNewZone) {\n      const originalZone = getZoneById(adminZones, activeZone.zone_id);\n      if(! originalZone) {\n        console.error('originalZone was not found while executing cancelButtonHandler')\n        return;\n      }\n\n      const feature = {\n        id: activeZone.zone_id,\n        type: 'Feature',\n        properties: {\n          geography_type: originalZone.geography_type\n        },\n        geometry: { type: 'Polygon', coordinates: originalZone.area.geometry.coordinates }\n      };\n      const featureIds = window.CROW_DD.theDraw.add(feature);\n    }\n    //\n    setDidChangeZoneConfig(false);\n  }\n\n  const isNewZone = ! activeZone.geography_id;\n\n  return (\n    <div className=\"filter-bar-inner py-2\">\n\n      {! hideLogo && <Link to=\"/\"><Logo /></Link>}\n      \n      <FilteritemDatum disabled={true} />\n\n      <div className=\"mt-0\">\n        <FilteritemGebieden />\n      </div>\n\n      {! filterGebied && false && <div>\n        Selecteer een plaats.\n      </div>}\n\n      {(viewMode === 'readonly' && token) && <>\n        <div className={labelClassNames}>\n          &nbsp;\n        </div>\n        <div className=\"flex justify-end -mr-2\">\n          <Link to=\"/map/zones\">\n            <Button\n              theme=\"white\"\n            >\n              \n            </Button>\n          </Link>\n          \n          <Link to=\"/admin/zones\">\n            <Button\n              theme=\"white\"\n            >\n              \n            </Button>\n          </Link>\n        </div>\n      </>}\n\n      {viewMode === 'adminView' && <div>\n        <div className={labelClassNames}>\n          Nieuwe zone\n        </div>\n        <div>\n          {viewMode === 'adminView' && <div className=\"flex justify-between\">\n            <div className=\"flex\">\n              <Button\n                theme=\"white\"\n                onClick={newZoneButtonHandler}\n              >\n                Teken zone\n              </Button>\n\n              <Button\n                theme=\"white\"\n                title=\"Importeer zone vanuit een GIS-bestand\"\n                onClick={() => {\n                  setDoShowImportModal(true)\n                }}\n              >\n                \n              </Button>\n\n              <Modal\n                isVisible={doShowImportModal}\n                title=\"Importeer een GIS-bestand\"\n                button1Title={'Annuleer'}\n                button1Handler={(e) => {\n                  setDoShowImportModal(false);\n                }}\n                button2Title={\"Importeer\"}\n                button2Handler={(e) => {\n                  e.preventDefault();\n                  setTimeout(x => {\n                    // Hide modal\n                    setDoShowImportModal(false);\n                  }, 1500)\n                }}\n                hideModalHandler={() => {\n                  setDoShowImportModal(false);\n                }}\n              >\n                <p className=\"mb-4\">\n                  Importeer een SPH-bestand met zone-polygonen middels onderstaande upload-functie. Tip: importeer niet te veel zones, maar enkel de zones waar je analyses op gaat doen.\n                </p>\n\n                <p className=\"mt-4\">\n                  <input type=\"file\" name=\"file\" accept=\".sph\" />\n                </p>\n              </Modal>\n            </div>\n            \n            <div className=\"flex -mr-2\">\n              <Link to=\"/map/zones\">\n                <Button\n                  theme=\"white\"\n                >\n                  \n                </Button>\n              </Link>\n              \n              <Link to=\"/admin/zones\">\n                <Button\n                  theme=\"white\"\n                >\n                  \n                </Button>\n              </Link>\n            </div>\n\n          </div>}\n          {viewMode === 'adminEdit' && <Button\n            theme=\"white\"\n            onClick={cancelButtonHandler}\n          >\n            Annuleer\n          </Button>}\n        </div>\n      </div>}\n\n      {viewMode === 'adminEdit' && <div>\n        <div className={labelClassNames}>\n          Zone {isNewZone ? 'toevoegen' : 'wijzigen'}\n        </div>\n        <div className=\"flex justify-between\">\n          <Button\n            theme={didChangeZoneConfig ? `greenHighlighted` : `green`}\n            onClick={saveZone}\n          >\n            Opslaan\n          </Button>\n\n          <div className=\"-mr-2\">\n            {! isNewZone && <Button\n              onClick={deleteZoneHandler}\n            >\n              \n            </Button>}\n\n            <Button\n              theme=\"white\"\n              onClick={cancelButtonHandler}\n            >\n              Annuleer\n            </Button>\n          </div>\n        </div>\n        <div>\n          <FormInput\n            type=\"text\"\n            placeholder=\"Naam van de zone\"\n            name=\"name\"\n            autoComplete=\"off\"\n            id=\"js-FilterbarZones-name-input\"\n            value={activeZone.name || \"\"}\n            onChange={changeHandler}\n            classes=\"w-full\"\n          />\n        </div>\n\n        <div className=\"\n          mt-0\n        \">\n          <div className=\"\n            flex\n            rounded-lg bg-white\n            border-solid\n            border\n            border-gray-400\n            text-sm\n          \">\n            {R.map(x => {\n              return <div className={`\n                ${activeZone.geography_type === x.name ? 'Button-orange' : ''}\n                cursor-pointer\n                flex-1\n                \n                rounded-lg\n                text-gray-500\n                text-center\n                h-10\n                flex\n                flex-col\n                justify-center\n              `}\n              style={{\n                backgroundColor: `${activeZone.geography_type === x.name ? x.color : ''}`\n              }}\n              key={x.name}\n              onClick={(e) => {\n                 e.preventDefault();\n\n                 // Save state\n                 changeHandler({\n                  target: {\n                    name: 'geography_type',\n                    value: x.name\n                  }\n                })\n\n                // Update map feature props (geography_type)\n                let zoneId = activeZone.zone_id;\n                // If not in edit mode: check if there's 1 newly created polygon\n                if(! zoneId) {\n                  zoneId = getDraftFeatureId();\n                }\n\n                if(zoneId) {\n                  // Force rerender of Draw, so that polygon color updates\n                  const forceMapRerenderForFeature = (featureId) => {\n                    window.CROW_DD.theDraw.changeMode('simple_select', []);\n                    // NOTE: This had a side effect which is re-calling eventHandler()\n                    // NOTE: The side effect is that if creating new zone: name is discarted\n                    window.CROW_DD.theDraw.changeMode('direct_select', {\n                      featureId: featureId\n                    });\n                  }\n                  forceMapRerenderForFeature(zoneId);\n                }\n\n              }}>\n                {x.title}\n              </div>\n            }, [\n              {name: 'monitoring', title: 'Analyse', color: '#15aeef'},\n              {name: 'stop', title: 'Parking', color: '#fd862e'},\n              {name: 'no_parking', title: 'No parking', color: '#fd3e48'}\n            ])}\n          </div>\n        </div>\n\n        <div className={`\n          py-2\n          ${activeZone.geography_type === 'stop' ? 'visible' : 'invisible'}\n        `}>\n          <div className=\"\n            flex\n            rounded-lg bg-white\n            border-solid\n            border\n            border-gray-400\n            text-sm\n          \">\n            {/*\n            Availability zit verstopt in status.\n            is_enabled = true is open, is_enabled = false is gesloten\n            control_automatic=true\n            */}\n            {R.map(x => {\n              return <div className={`\n                ${activeZone.zone_availability === x.name ? 'Button-blue' : ''}\n                cursor-pointer\n                flex-1\n                rounded-lg\n                text-gray-500\n                text-center\n                border-gray-500\n                h-10\n                flex\n                flex-col\n                justify-center\n              `}\n              key={x.name}\n              onClick={(e) => {\n                 e.preventDefault();\n\n                 changeHandler({\n                  target: {\n                    name: 'zone_availability',\n                    value: x.name\n                  }\n                })\n              }}>\n                {x.title}\n              </div>\n            }, [\n              {name: 'auto', title: 'Automatisch'},\n              {name: 'open', title: 'Open'},\n              {name: 'closed', title: 'Gesloten'}\n            ])}\n          </div>\n        </div>\n\n        <div className={activeZone.geography_type === 'stop' ? 'visible' : 'invisible'}>\n          <p className=\"mb-2 text-sm\">\n            Limiet <a onClick={() => setLimitType('modality')} className={`\n              ${limitType === 'modality' ? 'underline' : ''}\n              cursor-pointer\n            `}>\n              per modaliteit\n            </a> | <a onClick={() => setLimitType('combined')} className={`\n              ${limitType === 'combined' ? 'underline' : ''}\n              cursor-pointer\n            `}>\n              totaal\n            </a>\n          </p>\n\n          <div className=\"\n            rounded-lg\n            bg-white\n            border-solid\n            border\n            border-gray-400\n            p-4\n          \">\n            {limitType === 'combined' && <ModalityRow\n              imageUrl=\"\"\n              name=\"vehicles-limit.combined\"\n              value={activeZone['vehicles-limit.combined']}\n              onChange={changeHandler}\n            />}\n            {limitType === 'modality' && <>\n              <ModalityRow\n                imageUrl=\"https://i.imgur.com/IF05O8u.png\"\n                name=\"vehicles-limit.bicycle\"\n                value={activeZone['vehicles-limit.bicycle']}\n                onChange={changeHandler}\n              />\n              <ModalityRow\n                imageUrl=\"https://i.imgur.com/FdVBJaZ.png\"\n                name=\"vehicles-limit.cargo_bicycle\"\n                value={activeZone['vehicles-limit.cargo_bicycle']}\n                onChange={changeHandler}\n              />\n              <ModalityRow\n                imageUrl=\"https://i.imgur.com/h264sb2.png\"\n                name=\"vehicles-limit.moped\"\n                value={activeZone['vehicles-limit.moped']}\n                onChange={changeHandler}\n              />\n              <ModalityRow\n                imageUrl=\"https://i.imgur.com/7Y2PYpv.png\"\n                name=\"vehicles-limit.car\"\n                value={activeZone['vehicles-limit.car']}\n                onChange={changeHandler}\n              />\n            </>}\n          </div>\n        </div>\n\n      </div>}\n\n      {(false && ! isNewZone && viewMode === 'adminEdit') && <div className=\"my-2 text-center\">\n        <Text\n          theme=\"red\"\n          onClick={deleteZoneHandler}\n          classes=\"text-xs\"\n        >\n          Verwijder zone\n        </Text>\n      </div>}\n\n      <div className=\"mt-6\">\n        <div className={labelClassNames}>\n          Zones\n        </div>\n        <div>\n          {adminZones ? R.map((x) => {\n            // Add onClick handler\n            const zoneId = x.zone_id;\n            if(viewMode === 'adminView') {\n              x.onClick = () => {\n                // Trigger setSelectedZone custom event (see FilterbarZones.tsx)\n                const event = new CustomEvent('setSelectedZone', {\n                  detail: zoneId\n                });\n                window.dispatchEvent(event);\n                // Zoom in into zone\n                if(x.area && x.area.geometry && x.area.geometry.coordinates && x.area.geometry.coordinates[0]) {\n                  if(! window.ddMap) return;\n                  // Get extent\n                  const extent = st.extent(x.area)\n                  window.ddMap.fitBounds(extent, {\n                    padding: {top: 25, bottom: 25, left: 350, right: 25},\n                    duration: 1.4*1000 // in ms\n                  });\n                }\n                // Change URL\n                setAdminZoneUrl(x.geography_id)\n              };\n            }\n            if(viewMode === 'readonly') {\n              x.onClick = () => {\n                // Zoom in into zone\n                if(x.area && x.area.geometry && x.area.geometry.coordinates && x.area.geometry.coordinates[0]) {\n                  if(! window.ddMap) return;\n                  // Get extent\n                  const extent = st.extent(x.area)\n                  window.ddMap.fitBounds(extent, {\n                    padding: {top: 25, bottom: 25, left: 350, right: 25},\n                    duration: 1.4*1000 // in ms\n                  });\n                }\n                // Change URL\n                setPublicZoneUrl(x.geography_id)\n              };\n            }\n            return renderZoneTag(x, x.zone_id === activeZone.zone_id, viewMode);\n          }, adminZones) : <div />}\n        </div>\n      </div>\n\n      <Modal\n        isVisible={doShowModal}\n        title=\"Wil je doorgaan zonder opslaan?\"\n        button1Title={false}\n        button1Handler={(e) => {\n          setDoShowModal(false);\n          selectMapFeature(activeZone.zone_id);\n        }}\n        button2Title={\"Doorgaan\"}\n        button2Handler={(e) => {\n          e.preventDefault();\n          // Hide modal\n          setDoShowModal(false);\n          // Cancel all changes\n          cancelButtonHandler({ skipConfirmation: true })\n          // Re-click zone that was clicked by user\n          // selectMapFeature(lastClickedZone);\n          eventHandler({detail: lastClickedZone}, {\n            skipConfirmation: true\n          })\n        }}\n        saveHandlerUNEXISTING={async (e) => {\n          e.preventDefault();\n          // Hide modal\n          setDoShowModal(false);\n          // Wait until zone is saved\n          await saveZone();\n          // Click zone that was clicked by user\n          selectMapFeature(lastClickedZone);\n        }}\n        hideModalHandler={() => {\n          setDoShowModal(false);\n          selectMapFeature(activeZone.zone_id);\n        }}\n      >\n        <p className=\"mb-4\">\n          Je hebt nog onopgeslagen wijzigingen.\n        </p>\n        <p className=\"my-4\">\n          Sluit dit venster om je wijzigingen te behouden. Je kunt dan zelf de wijzigingen opslaan.\n        </p>\n        <p className=\"mt-4\">\n          Je kunt ook <b>Doorgaan</b> zonder op te slaan.\n        </p>\n      </Modal>\n\n    </div>\n  )\n}\n\nexport default FilterbarZones;\n","import './css/Filterbar.css';\n// import {\n//   useEffect,\n//   useState,\n//   useRef\n// } from 'react';\nimport { Link } from \"react-router-dom\";\nimport {useSelector} from 'react-redux';\nimport moment from 'moment';\n// import * as R from 'ramda';\nimport FilteritemGebieden from './FilteritemGebieden.jsx';\nimport FilteritemDatum from './FilteritemDatum.jsx';\nimport FilteritemDatumVanTot from './FilteritemDatumVanTot.jsx';\nimport FilteritemDuur from './FilteritemDuur.jsx';\nimport FilteritemAanbieders from './FilteritemAanbieders.jsx';\nimport FilteritemZones from './FilteritemZones.jsx';\nimport {\n  FilteritemMarkersAfstand,\n  FilteritemMarkersParkeerduur\n} from './FilteritemMarkers.jsx';\nimport FilteritemHerkomstBestemming from './FilteritemHerkomstBestemming';\nimport FilteritemVoertuigTypes from './FilteritemVoertuigTypes.jsx';\nimport Logo from '../Logo.jsx';\n// import Button from '../Button/Button';\n// import FormInput from '../FormInput/FormInput';\nimport FilterbarZones from './FilterbarZones';\n\n// Import API functions\nimport {postZone} from '../../api/zones';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_ZONES_ADMIN,\n  DISPLAYMODE_ZONES_PUBLIC,\n  DISPLAYMODE_OTHER\n} from '../../reducers/layers.js';\n\nfunction Filterbar({\n  displayMode,\n  visible,\n  hideLogo\n}) {\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n\n  const filter = useSelector(state => {\n    return state.filter;\n  });\n\n  const filterDatum = useSelector(state => {\n    return state.filter && state.filter.datum ? state.filter.datum : new Date().toISOString();\n  });\n\n  const ispark=displayMode===DISPLAYMODE_PARK;\n  const isrentals=displayMode===DISPLAYMODE_RENTALS;\n  const iszonesadmin=displayMode===DISPLAYMODE_ZONES_ADMIN;\n  const iszonespublic=displayMode===DISPLAYMODE_ZONES_PUBLIC;\n  const isontwikkeling=displayMode===DISPLAYMODE_OTHER;\n  \n  const showdatum=isrentals||ispark||!isLoggedIn;\n  const showduur=isrentals;\n  const showparkeerduur=ispark;\n  const showafstand=isrentals;\n  const showherkomstbestemming=isrentals;\n  const showvantot=isontwikkeling;\n  const showvervoerstype=isrentals||ispark||!isLoggedIn;\n\n  // Show custom zones if >= 2022-11\n  // We have detailled aggregated stats from 2022-11\n  const doShowCustomZones =\n    moment(filter.ontwikkelingvan).unix() >= moment('2022-11-01 00:00').unix();\n\n  let zonesToShow;\n  if(isontwikkeling) {\n    zonesToShow = [\n      'residential_area',\n    ];\n    if(doShowCustomZones) {\n      zonesToShow.push('custom')\n    }\n  } else {\n    zonesToShow = [\n      'residential_area',\n      'custom',\n      'neighborhood'\n    ];\n  }\n\n  if(iszonespublic || iszonesadmin) {\n    return <FilterbarZones\n      view={iszonespublic ? 'readonly' : 'adminView'}\n      hideLogo={hideLogo}\n    />\n  }\n\n  else {\n    return (\n      <div className=\"filter-bar-inner py-2\">\n\n        <div className=\"justify-between hidden sm:flex\">\n          <div style={{minWidth: '82px'}}>\n            {! hideLogo && (\n              ispark\n                ? <Logo />\n                : <Link to=\"/\"><Logo /></Link>\n            )}\n          </div>\n          <div className=\"ml-4 text-sm flex justify-center flex-col\" style={{\n            color: '#FD862E'\n          }}>\n            {/* INFO */}\n          </div>\n        </div> \n\n        { isLoggedIn && showdatum && <FilteritemDatum /> }\n        \n        { ! isLoggedIn && showdatum && <div>\n          <div className=\"filter-datum-container\">\n            <div className=\"filter-datum-title\">\n              Tijd\n            </div>\n            <div className=\"filter-datum-box-row\">\n              {moment(filterDatum).format('HH:mm')}\n            </div>\n          </div>\n        </div> }\n\n        { isLoggedIn && showduur && <FilteritemDuur /> }\n\n        { isLoggedIn && showvantot && <FilteritemDatumVanTot /> }\n\n        {<FilteritemGebieden />}\n\n        {<FilteritemZones \n          zonesToShow={zonesToShow}\n          />}\n\n        {isLoggedIn && showparkeerduur && <FilteritemMarkersParkeerduur />}\n\n        {isLoggedIn && showafstand && <FilteritemMarkersAfstand />}\n\n        {isLoggedIn && showherkomstbestemming && <FilteritemHerkomstBestemming />}\n\n        {showvervoerstype && <FilteritemVoertuigTypes />}\n\n        {<FilteritemAanbieders />}\n\n      </div>\n    )\n  }\n}\n\nexport default Filterbar;\n","import {sources} from '../sources.js';\n\nexport const addSources = (map) => {\n  Object.keys(sources).forEach((key, idx) => {\n    map.U.addGeoJSON(key, null, sources[key]);\n  })\n}\n","// The original SVG that is used to make the programatic one\n// const initialMarker2 = `\n// <div id=\"test\">\n//     <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\"></circle>\n//     <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n//         <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\"></circle>\n//         <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\"></circle>\n//     </g>\n//     <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#1f3ff0\"></circle>\n// </div>\n//     `;\n\nasync function getVehicleMarkers(operatorColor) {\n    var gradients = ['#1FA024', '#48E248', '#FFD837', '#FD3E48'];\n    var markers = [];\n    for (const durationIndicationColor of gradients) {\n        var marker = await styleVehicleMarker(operatorColor, durationIndicationColor);\n        markers.push(marker);\n    }\n    return markers;\n}\n\nasync function getVehicleMarkers_rentals(operatorColor) {\n    var gradients = ['#48E248', '#44BD48', '#3B7747', '#343E47'];\n    var markers = [];\n    for (const durationIndicationColor of gradients) {\n        var marker = await styleVehicleMarker(operatorColor, durationIndicationColor);\n        markers.push(marker);\n    }\n    return markers;\n}\n\nasync function styleVehicleMarker(operatorColor, durationIndicationColor) {\n    var xmlns = \"http://www.w3.org/2000/svg\";\n    var svgElement = document.createElementNS(xmlns, \"svg\");\n    \n    // outer transparant circle\n    var circle_1 = document.createElementNS(\"http://www.w3.org/2000/svg\", 'circle');\n    circle_1.setAttribute(\"cx\",\"12\");\n    circle_1.setAttribute(\"cy\",\"12\");\n    circle_1.setAttribute(\"r\",\"12\");\n    circle_1.setAttribute(\"fill\",\"12\");\n    circle_1.setAttribute(\"opacity\",\"0.304\");\n    circle_1.setAttribute(\"fill\", durationIndicationColor);\n    svgElement.appendChild(circle_1);\n\n    // inner non transparant circle\n    var inner_circle = document.createElementNS(\"http://www.w3.org/2000/svg\", 'g');\n    inner_circle.setAttribute(\"transform\",\"translate(2 2)\");\n    inner_circle.setAttribute(\"fill\",durationIndicationColor);\n    inner_circle.setAttribute(\"stroke\",\"#fff\");\n    inner_circle.setAttribute(\"stroke-width\",\"1\");\n\n    var child_circle_1 = document.createElementNS(\"http://www.w3.org/2000/svg\", 'circle');\n    child_circle_1.setAttribute(\"cx\",\"10\");\n    child_circle_1.setAttribute(\"cy\",\"10\");\n    child_circle_1.setAttribute(\"r\",\"10\");\n    child_circle_1.setAttribute(\"stroke\",\"none\");\n\n    var  child_circle_2 = document.createElementNS(\"http://www.w3.org/2000/svg\", 'circle');\n    child_circle_2.setAttribute(\"cx\",\"10\");\n    child_circle_2.setAttribute(\"cy\",\"10\");\n    child_circle_2.setAttribute(\"r\",\"9.5\");\n    child_circle_2.setAttribute(\"fill\",\"none\");\n    inner_circle.appendChild(child_circle_1);\n    inner_circle.appendChild(child_circle_2);\n    svgElement.appendChild(inner_circle);\n\n    // indicator right top\n    var small_circle = document.createElementNS(\"http://www.w3.org/2000/svg\", 'circle');\n    small_circle.setAttribute(\"cx\",\"4.5\");\n    small_circle.setAttribute(\"cy\",\"4.5\");\n    small_circle.setAttribute(\"r\",\"4.5\");\n    small_circle.setAttribute(\"transform\",\"translate(14 1)\");\n    small_circle.setAttribute(\"fill\", operatorColor);\n    svgElement.appendChild(small_circle);\n\n    var width = {};\n    var height = {};\n \n    // console.log(svg.firstChild.tagName);\n    svgElement.setAttribute(\"viewBox\", \"0 0 24 24\");\n\n    width.value = 50;\n    height.value = 50;\n    \n    var canvas = document.createElement('canvas');\n    svgElement.setAttribute('width', width.value);\n    svgElement.setAttribute('height', height.value);\n    canvas.width = width.value;\n    canvas.height = height.value;\n    var data = new XMLSerializer().serializeToString(svgElement);\n    var win = window.URL || window.webkitURL || window;\n    var img = new Image();\n    var blob = new Blob([data], { type: 'image/svg+xml' });\n\n    var url = win.createObjectURL(blob);\n    img.src = url;\n    await img.decode();\n    var context = canvas.getContext('2d');\n    context.drawImage(img, 0, 0);\n    win.revokeObjectURL(url);\n \n    return new Uint8Array(context.getImageData(0, 0, img.width, img.height).data.buffer);\n}\n\nexport {\n    getVehicleMarkers,\n    getVehicleMarkers_rentals\n}\n","import React, {useState} from 'react'\nimport {marked} from 'marked'\nimport { Redirect } from \"react-router-dom\";\n\nimport Logo from '../Logo.jsx';\nimport { IconButtonClose } from '../IconButtons.jsx';\n\nconst About = () => {\n  const [doRenderRedirect, setDoRenderRedirect] = useState(false);\n\n  const renderRedirect = () => {\n    return (\n      <Redirect to=\"/\" />\n    );\n  }\n \n  if (doRenderRedirect) {\n    return renderRedirect();\n  }\n\n  return (\n    <div className=\"\n      px-4\n      min-h-screen\n      sm:flex sm:justify-center\n      sm:px-0\n    \">\n      <div className=\"mx-auto py-8\">\n\n        <IconButtonClose\n          onClick={() => setDoRenderRedirect(true)}\n          style={{position: 'absolute', right: '30px', top: '18px'}}\n        />\n\n        <Logo />\n\n        <div\n          style={{\n            maxWidth: '100%',\n            width: '616px'\n          }}\n          dangerouslySetInnerHTML={{ __html: marked.parse(`\n# Over het Dashboard Deelmobiliteit\n\n## Algemeen\n\nHet Dashboard Deelmobiliteit is een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit op de voeten willen volgen.\n\nHoe lang en waar staan deelvoertuigen ongebruikt in de openbare ruimte? Hoe vaak worden de deelvoertuigen verhuurd? In welke wijken en op welke tijdstippen zijn deelvoertuigen populair? \n\nMet de informatie uit het Dashboard Deelmobiliteit kunnen overheden hun beleid ontwikkelen, evalueren en bijsturen.\n\n## Hoe werkt het?\n\nHet Dashboard Deelmobiliteit verzamelt elke halve minuut positie van  meer dan 15.000 geparkeerde deelvoertuigen in Nederland (januari 2022).\n\nOp basis van deze informatie genereert het dashboard zogenaamde parkeergebeurtenissen en verhuringen, die opgeslagen worden in een centrale database.\n\nHet dashboard biedt een aantal functionaliteiten (kaarten, grafieken en tabellen) om de database te raadplegen. \n\nVoor analyses waar het dashboard niet in voorziet, kunnen overheden downloads maken van de ruwe data uit het dashboard om maatwerkanalyses te (laten) maken.\n\n## Functionaliteiten\n\nIn overleg met deelnemende overheden zijn de volgende functionaliteiten ontwikkeld:\n\n- Een kaart met het aanbod van deelvoertuigen op een tijdstip naar keuze. Een kleurcode geeft tevens aan hoe lang het voertuig te huur staat.\n- Een kaart met verhuringen van deelvoertuigen gedurende een periode naar keuze. Het betreft zowel de locaties waar verhuringen gestart zijn als beindigd.\n- Grafieken met ontwikkelingen in een periode naar keuze. Het gaat zowel om de ontwikkeling in het aantal deelvoertuigen dat aangeboden wordt als om de ontwikkeling het aantal verhuringen.\n- Standaardrapportages als excel-sheets gedownload kunnen worden.\n\nOverheden hebben alleen toegang tot de informatie over deelvoertuigen in hun eigen bestuursgebied.\n\n## Voordelen voor gemeenten\n\n- sneller toegang tot data\n- minder uitvragen naar aanbieders nodig (1 bron met alle data)\n- geen conversie meer nodig: data van elke aanbieder heeft precies hetzelfde dataformaat\n- ontwikkeling in overleg met de aangesloten gemeentes\n- indien gewenst uit te breiden door gemeentes zelf (open source software)\n\n## Voordelen aanbieders\n\n- minder aanvragen vanuit gemeentes\n- geen nieuwe dataformaten nodig i.v.m. gebruik internationale datastandaarden\n- gemeentes hebben beter inzicht in de stand van zaken\n- aanbieders hebben beter inzicht\n\n## Veel gestelde vragen\n\n### Hoe krijg ik toegang tot het Dashboard?\n\nVia het CROW of via info@deelfietsdashboard.nl kun je een login aanvragen. Afhankelijk van je taak en de afspraken over de data kun je vervolgens toegang krijgen tot de dashboard informatie voor gebieden en/of van aanbieders. Zo kunnen gemeente medewerkers over het algemeen toegang krijgen voor het dashboard in hun gemeente. Aanbieders van deelfietsen kunnen uiteraard toegang krijgen tot alle informatie van hun deelfietsen. Neem voor vragen over de rechten ook contact op met het CROW of info@deelfietsdashboard.nl.\n\n### Welke datastandaarden worden ondersteund?\n\nHoewel het Dashboard Deelmobiliteit verschillende datastandaarden ondersteunt, geven we er de voorkeur aan dat aanbieders hun data aanleveren conform MDS. Dit geeft ook de aanbieders de meeste zekerheid dat de koppeling in de toekomst goed functioneert. Zie de details in deze [specificatie](https://docs.crow.nl/deelfietsdashboard/hr-dataspec/).\n\n### Wat zijn de afspraken over data en financiering?\n\n[Op deze pagina](https://www.fietsberaad.nl/Kennisbank/Afspraken-over-data-en-financiering-van-dashboard) vind je de afspraken over openbaarheid data en de financiering.\n\n### Is de software open source?\n\nJa, de software is open source. Via [GitHub](https://github.com/Stichting-CROW/dashboarddeelmobiliteit-app) en [Gitlab](https://gitlab.com/bikedashboard) kun de laatste versie van de broncode bekijken.\n\nVelen handen maken licht werk. We zijn daarom blij als je wilt helpen. Gemeenten of andere overheden kunnen helpen bij het specificeren van handige overzichten. Deelmobiliteitbedrijven kunnen meebouwen aan open source tools. Ontwikkelaars kunnen bijdragen aan de code. Ontwerpers kunnen de look & feel verbeteren. Mail ons als je wilt weten hoe je mee kunt helpen!\n\nWe nodigen iedereen uit om mee te kijken en mee te ontwikkelen. Bugs en suggesties kunnen direct in de [issue-lijst](https://github.com/Stichting-CROW/dashboarddeelmobiliteit-app/issues) geplaatst worden. Ons mailen op info@deelfietsdashboard.nl kan natuurlijk ook.\n\n## Tot slot\n\nWil je contact opnemen met het team achter het Dashboard Deelmobiliteit, neem dan contact op met <a href=\"mailto:info@deelfietsdashboard.nl?Subject=Hallo\">info@deelfietsdashboard.nl</a>\n          `)}}\n        />\n      </div>\n    </div>\n  )\n\n}\n\nexport default About;","import React, {useState, useEffect, useRef} from 'react'\n// import {marked} from 'marked'\nimport { Redirect } from \"react-router-dom\";\nimport { Fade } from 'react-slideshow-image';\n\nimport Logo from '../Logo.jsx';\nimport { IconButtonClose } from '../IconButtons.jsx';\n\nimport './react-slideshow-image.css';\n\nconst slideImages = [...Array(13).keys()].slice(1).map(x => {\n  return `/components/Tour/Openbare_presentatie_dashboard_deelmobiliteit_januari_2022-${x < 10 ? '0' : ''}${x}.png`;\n})\n\nconst sliderProperties = {\n  duration: 60000,\n  transitionDuration: 300,\n  pauseOnHover: true,\n  infinite: true,\n  arrows: true,\n  indicators: true,\n  scale: 1.4,\n  onChange: (oldIndex, newIndex) => {\n    // console.log(`slide transition from ${oldIndex} to ${newIndex}`);\n  }\n}\n\nconst Tour = () => {\n  const [doRenderRedirect, setDoRenderRedirect] = useState(false);\n\n  let slideRef = useRef(null);\n\n  // Key bindings of left and right arrow\n  useEffect(x => {\n    const keyDownHandler = (event: React.KeyboardEvent<HTMLDivElement>) => {\n      if (event.code === \"ArrowLeft\") {\n        slideRef.current.goBack()\n      }\n      else if (event.code === \"ArrowRight\") {\n        slideRef.current.goNext()\n      }\n    }\n    window.addEventListener('keydown', keyDownHandler);\n\n    return () => {\n      window.removeEventListener('keydown', keyDownHandler);\n    }\n  }, [])\n\n  const renderRedirect = () => {\n    return (\n      <Redirect to=\"/\" />\n    );\n  }\n \n  if (doRenderRedirect) {\n    return renderRedirect();\n  }\n\n  return (\n    <div className=\"\n      min-h-screen\n      flex justify-center\n      px-0\n      w-full\n    \">\n      <IconButtonClose\n        onClick={() => setDoRenderRedirect(true)}\n        style={{position: 'absolute', right: '30px', top: '18px'}}\n      />\n      <div className=\"mx-auto py-8 w-full justify-between flex-col flex\">\n\n        <Logo />\n\n        <div className=\"slide-container flex-1\">\n          <Fade ref={slideRef} {...sliderProperties}>\n            {slideImages.map((x, idx) => {\n              return <div key={x} className=\"each-slide\">\n                <div style={{'backgroundImage': `url(${slideImages[idx]})`}}>\n                  {idx === 10 && <span className=\"each-slide-text\">\n                    <a href=\"https://docs.crow.nl/deelfietsdashboard/hr-dataspec/\" target=\"_blank\" rel=\"noreferrer\">\n                      Klik hier voor de specs\n                    </a>\n                  </span>}\n                  {idx === 11 && <span className=\"each-slide-text\">\n                    <div><a href=\"https://www.fietsberaad.nl/Kennisbank/Afspraken-over-data-en-financiering-van-dashboard\" target=\"_blank\" rel=\"noreferrer\">\n                      Openbaarheid en financiering\n                    </a></div>\n                    <div><a href=\"https://github.com/Stichting-CROW/\" target=\"_blank\" rel=\"noreferrer\">\n                      GitHub\n                    </a></div>\n                    <div><a href=\"https://gitlab.com/bikedashboard\" target=\"_blank\" rel=\"noreferrer\">\n                      GitLab\n                    </a></div>\n                    <div><a href=\"https://github.com/Stichting-CROW/dashboarddeelmobiliteit-app/issues\" target=\"_blank\" rel=\"noreferrer\">\n                      Bugs & Suggesties\n                    </a></div>\n                    <div><a href=\"mailto:info@deelfietsdashboard.nl\" target=\"_blank\" rel=\"noreferrer\">\n                      info@deelfietsdashboard.nl\n                    </a></div>\n                  </span>}\n                </div>\n              </div>\n            })}\n          </Fade>\n        </div>\n\n      </div>\n\n    </div>\n  )\n\n}\n\nexport default Tour;","import { useEffect, useRef, useState } from 'react';\nimport {\n Switch,\n Route,\n useLocation,\n} from \"react-router-dom\";\nimport moment from 'moment';\nimport { store } from './AppProvider.js';\nimport { useSelector, useDispatch } from 'react-redux';\nimport {AnimatePresence, motion} from 'framer-motion/dist/framer-motion'\nimport 'tw-elements';\n\nimport Menu from './components/Menu.jsx';\nimport MenuSecondary from './components/Menu/MenuSecondary.jsx';\nimport MapPage from './pages/MapPage.jsx';\nimport ContentPage from './pages/ContentPage.jsx';\nimport StatsPage from './pages/StatsPage.jsx';\nimport Login from './pages/Login.jsx';\nimport SetPassword from './pages/SetPassword.jsx';\nimport Monitoring from './pages/Monitoring.jsx';\nimport FilterbarDesktop from './components/Filterbar/FilterbarDesktop.jsx';\nimport FilterbarMobile from './components/Filterbar/FilterbarMobile.jsx';\nimport About from './components/About/About.jsx';\nimport Tour from './components/Tour/Tour.jsx';\nimport Overlay from './components/Overlay/Overlay.jsx';\nimport Misc from './components/Misc/Misc.jsx';\nimport Faq from './components/Faq/Faq';\nimport Profile from './components/Profile/Profile';\nimport Export from './components/Export/Export';\nimport {SelectLayerMobile} from './components/SelectLayer/SelectLayerMobile.jsx';\nimport LoadingIndicator from './components/LoadingIndicator/LoadingIndicator.jsx';\n\nimport { initAccessControlList } from './poll-api/metadataAccessControlList.js';\nimport { updateZones } from './poll-api/metadataZones.js';\nimport { updateZonesgeodata } from './poll-api/metadataZonesgeodata.js';\n\nimport { initUpdateParkingData } from './poll-api/pollParkingData.js';\nimport {\n  initUpdateVerhuringenData\n} from './poll-api/pollVerhuringenData.js';\n\nimport {\n  showNotification,\n} from './helpers/notify';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_ZONES_PUBLIC,\n  DISPLAYMODE_ZONES_ADMIN,\n  DISPLAYMODE_OTHER,\n} from './reducers/layers.js';\n\nimport './App.css';\n\nconst Notification = ({ doShowNotification, setDoShowNotification, isFilterBarOpen }) => {\n  return <AnimatePresence>\n    {doShowNotification && <motion.div\n      key=\"notification\"\n      initial={{ opacity: 0.5 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"fixed top-5 z-20 left-5 right-5\"\n    >\n      <motion.div\n        drag\n        dragConstraints={{\n          top: -10,\n          left: -50,\n          right: 50,\n          bottom: 10,\n        }}\n        className=\"relative bg-white/60 backdrop-blur-xl w-max-w-md rounded-lg mx-auto p-6 shadow hover:opacity-75\" style={{\n          width: window.innerWidth > 640 ? '322px' : '100%',\n          left: (isFilterBarOpen && window.innerWidth > 640) ? '162px' : 0,\n          cursor: 'pointer'\n        }}\n        onClick={() => setDoShowNotification(false)}\n      >\n        <h1 className=\"text-xl text-slate-700 font-medium text-center\">\n          {doShowNotification}\n        </h1>\n        <div className=\"flex justify-between items-center\">\n          <a href=\"#\" className=\"hidden text-slate-500 hover:text-slate-700 text-sm inline-flex space-x-1 items-center\">\n            <span>Go to Dashboard</span>\n            <svg className=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\"></path></svg>\n          </a>\n        </div>\n      </motion.div>\n    </motion.div>}\n  </AnimatePresence>\n}\n\nfunction App() {\n  // Our state variables\n  const [pathName, setPathName] = useState(document.location.pathname);\n  const [uriParams, setUriParams] = useState(document.location.search);\n  const [delayTimeout, setDelayTimeout] = useState(null);\n  const [doShowNotification, setDoShowNotification] = useState('');\n  \n  const dispatch = useDispatch()\n  \n  const mapContainer = useRef(null);\n\n  let DELAY_TIMEOUT_IN_MS = 250;\n\n  const exportState = useSelector(state => {\n    return { filter: state.filter, layers: state.layers, ui:state.ui };\n  });\n  const isFilterBarOpen = exportState && exportState.ui && exportState.ui.FILTERBAR;\n\n  // Store window location in a local variable\n  let location = useLocation();\n  useEffect(() => {\n    setPathName(location ? location.pathname : null);\n    setUriParams(location ? location.search : null);\n  }, [location]);\n  \n  // Init notify bar logic\n  useEffect(() => {\n    window.notify = (msg) => {\n      showNotification(msg, setDoShowNotification);\n    }\n  }, [])\n\n  useEffect(() => {\n    if(uriParams!==null) {\n      let params = new URLSearchParams(uriParams);\n      let view = params.get('view')\n      if(view) {\n        try {\n          const importstate = JSON.parse(decodeURIComponent(view));\n          // force update to map extent\n          dispatch({type: 'IMPORT_STATE', payload: importstate });\n          \n          setTimeout(() => dispatch({type: 'LAYER_SET_ZONES_EXTENT', payload: importstate.layers.mapextent}), 2500);\n          return;\n        } catch(ex) {\n          console.warn(\"unable to decode application state\")\n          alert(\"Ongeldige link ingegeven\");\n        }\n        // continue\n      }\n    }\n    \n    // Decide on which display mode we use, based on URL\n    let payload;\n    if(pathName.includes(\"/map/park\")||pathName==='/') {\n      payload=DISPLAYMODE_PARK;\n    } else if(pathName.includes(\"/map/rentals\")) {\n      payload=DISPLAYMODE_RENTALS;\n    } else if(pathName.includes(\"/map/zones\")) {\n      payload=DISPLAYMODE_ZONES_PUBLIC;\n    } else if(pathName.includes(\"/admin/zones\")) {\n      payload=DISPLAYMODE_ZONES_ADMIN;\n    } else {\n      payload=DISPLAYMODE_OTHER;\n    }\n    dispatch({type: 'LAYER_SET_DISPLAYMODE', payload});\n\n  }, [pathName, uriParams]);\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  const filterDate = useSelector(state => {\n    return state.filter ? state.filter.datum : false;\n  });\n\n  const isLayersMobileVisible = useSelector(state => {\n    return state.ui ? state.ui['MenuSecondary.layers'] : false;\n  });\n\n  const isFilterBarVisible = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR'] : false;\n  });\n\n  const filter = useSelector(state => {\n    return state.filter;\n  });\n  \n  const layers = useSelector(state => {\n    return state.layers;\n  });\n\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n  \n  const metadata = useSelector(state => {\n    return state.metadata;\n  });\n\n  // Set date to current date/time on load\n  useEffect(() => {\n    const setFilterDatum = newdt => {\n      dispatch({\n        type: 'SET_FILTER_DATUM',\n        payload: newdt.toISOString()\n      })\n    }\n\n    // On load, set datetime to NOW\n    // - Don't do this if datetime < 10 ago\n    // - Don't do this if this is a shared link (we'll then keep the shared datetime)\n    const params = new URLSearchParams(uriParams);\n    const isFilterDateMoreThan10MinutesAgo = moment(filterDate).diff(moment(), 'minutes') < -10;\n    const isSharedLink = params.get('view');// Check if this is a shared link\n    if(! isSharedLink && isFilterDateMoreThan10MinutesAgo) {\n      setTimeout(x => {\n        setFilterDatum(moment().toDate())\n      }, 500)\n    }\n  }, []);\n\n  /*\n  To load data using the API we use the scripts in the poll-api folder.\n  We need zones to be able to fetch parking & trips data.\n\n  First, on app load, we load user information.\n  Then, we load the zones.\n  As soon as the zones are loaded, we load the parking data and rentals data.\n  We reload the parking data and rentals data if the filters or the URL change.\n  */\n\n  // On app start: get user data\n  useEffect(() => {\n    initAccessControlList(store);\n  }, [isLoggedIn]);\n  \n  useEffect(() => {\n    if(process && process.env.DEBUG) console.log('useEffect zones', filter.gebied)\n    if(! metadata.metadata_loaded) return;\n\n    updateZones(store);\n  }, [\n    isLoggedIn,\n    metadata.metadata_loaded,\n    filter.gebied\n  ])\n\n  useEffect(() => {\n    if(process && process.env.DEBUG) console.log('useEffect zones geodata')\n    if(! metadata.zones_loaded) return;\n\n    updateZonesgeodata(store);\n  }, [\n    isLoggedIn,\n    metadata.zones_loaded,\n    filter.gebied,\n    filter.zones\n  ])\n\n  // On app start,\n  //  if zones are loaded\n  //  or if pathName/filter is changed:\n  //  reload park events data\n  useEffect(() => {\n    if(displayMode !== 'displaymode-park') return;\n    if(isLoggedIn && metadata.zones_loaded === false) return;\n\n    if(delayTimeout) clearTimeout(delayTimeout);\n\n    setDelayTimeout(setTimeout(x => {\n      initUpdateParkingData(store);\n    }, DELAY_TIMEOUT_IN_MS))\n  }, [\n    isLoggedIn,\n    metadata.zones_loaded,\n    filter\n    // DELAY_TIMEOUT_IN_MS,\n    // delayTimeout,\n    // displayMode\n  ]);\n\n  // Reload rentals data if i.e. filter changes\n  useEffect(() => {\n    if(displayMode !== 'displaymode-rentals') return;\n    if(isLoggedIn && metadata.zones_loaded === false) return;\n\n    if(delayTimeout) clearTimeout(delayTimeout);\n\n    setDelayTimeout(setTimeout(x => {\n      initUpdateVerhuringenData(store);\n    }, DELAY_TIMEOUT_IN_MS))\n  }, [\n    isLoggedIn,// If we change from guest to logged in we want to update rentals\n    metadata.zones_loaded,// We only do an API call if zones are loaded\n    filter,\n    // DELAY_TIMEOUT_IN_MS,\n    // delayTimeout,\n    // displayMode\n  ]);\n\n  // Mobile menu: Filters / Layers\n  const renderMobileMenus = () => {\n    return <div className=\"MobileMenus\">\n      <div className=\"hidden sm:block relative h-full z-10\">\n        <FilterbarDesktop isVisible={isFilterBarVisible} displayMode={displayMode} />\n      </div>\n      <div className=\"block sm:hidden relative z-10\">\n        <FilterbarMobile isVisible={isFilterBarVisible} displayMode={displayMode} />\n      </div>\n      <SelectLayerMobile />\n    </div>\n  }\n\n  const renderMapElements = () => {\n    return <>\n      <MenuSecondary />\n      {renderMobileMenus()}\n    </>\n  }\n\n  return (\n    <div className={`app ${(isFilterBarVisible || isLayersMobileVisible) ? 'overflow-y-hidden' : ''}`}>\n\n      <Notification doShowNotification={doShowNotification} setDoShowNotification={setDoShowNotification} isFilterBarOpen={isFilterBarOpen} />\n\n      {process && process.env.DEBUG && <div className=\"DEBUG fixed bottom-10 right-16 z-100 bg-white opacity-50\" style={{zIndex: 9999}}>\n        {layers.displaymode}\n      </div>}\n\n      <LoadingIndicator  />\n\n      <div className=\"gui-layer\">\n\n      <Switch>\n        { isLoggedIn ?\n          <>\n            <Route exact path=\"/\">\n              {renderMapElements()}\n            </Route>\n            <Route exact path=\"/map/park\">\n              {renderMapElements()}\n            </Route>\n            <Route exact path=\"/map/rentals\">\n              {renderMapElements()}\n            </Route>\n            <Route path=\"/map/zones\">\n              {renderMapElements()}\n            </Route>\n            <Route path=\"/admin/zones\">\n              {renderMapElements()}\n            </Route>\n            <Route exact path=\"/stats/overview\">\n              <ContentPage>\n                <StatsPage />\n              </ContentPage>\n              {renderMapElements()}\n            </Route>\n            <Route exact path=\"/monitoring\">\n              <ContentPage>\n                <Monitoring />\n              </ContentPage>\n            </Route>\n            <Route exact path=\"/over\">\n              <Overlay>\n                <About />\n              </Overlay>\n            </Route>\n            <Route exact path=\"/rondleiding\">\n              <ContentPage forceFullWidth={true}>\n                <Tour />\n              </ContentPage>\n            </Route>\n            <Route exact path=\"/misc\">\n              <Overlay>\n                <Misc />\n              </Overlay>\n            </Route>\n            <Route exact path=\"/profile\">\n              <Overlay>\n                <Misc>\n                  <Profile />\n                </Misc>\n              </Overlay>\n            </Route>\n            <Route exact path=\"/export\">\n              <Overlay>\n                <Misc>\n                  <Export />\n                </Misc>\n              </Overlay>\n            </Route>\n            <Route exact path=\"/faq\">\n              <Overlay>\n                <Misc>\n                  <Faq />\n                </Misc>\n              </Overlay>\n            </Route>\n          </>\n          :\n          null\n        }\n\n        <Route exact path=\"/over\">\n          <Overlay>\n            <About />\n          </Overlay>\n        </Route>\n\n        <Route exact path=\"/rondleiding\">\n          <ContentPage forceFullWidth={true}>\n            <Tour />\n          </ContentPage>\n        </Route>\n\n        <Route exact path=\"/login\">\n          <Overlay>\n            <Login />\n          </Overlay>\n        </Route>\n\n        <Route exact path=\"/reset-password/:changePasswordCode\">\n          <Overlay>\n            <SetPassword />\n          </Overlay>\n        </Route>\n\n        <Route>\n          {renderMapElements()}\n        </Route>\n\n      </Switch>\n\n      <div key=\"mapContainer\" ref={mapContainer} className=\"map-layer top-0\"></div>\n      <MapPage mapContainer={mapContainer} />\n      <Menu pathName={pathName} />\n\n     </div>\n    </div>\n  );\n}\n\nexport default App;\n","\nimport React, { useState } from 'react';\n// import moment from 'moment';\nimport { Link } from \"react-router-dom\";\n\nimport './Menu.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { clearUser } from '../actions/authentication.js';\n\n// Copies a string to the clipboard. Must be called from within an\n// event handler such as click. May return false if it failed, but\n// this is not always possible. Browser support for Chrome 43+,\n// Firefox 42+, Safari 10+, Edge and Internet Explorer 10+.\n// Internet Explorer: The clipboard feature may be disabled by\n// an administrator. By default a prompt is shown the first\n// time the clipboard is used (per session).\n//\n// https://stackoverflow.com/a/33928558\nfunction copyToClipboard(text) {\n    if (window.clipboardData && window.clipboardData.setData) {\n      // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n      return window.clipboardData.setData(\"Text\", text);\n    }\n    else if (document.queryCommandSupported && document.queryCommandSupported(\"copy\")) {\n      var textarea = document.createElement(\"textarea\");\n      textarea.textContent = text;\n      textarea.style.position = \"fixed\";  // Prevent scrolling to bottom of page in Microsoft Edge.\n      document.body.appendChild(textarea);\n      textarea.select();\n      try {\n        return document.execCommand(\"copy\");  // Security exception may be thrown by some browsers.\n      }\n      catch (ex) {\n        console.warn(\"Copy to clipboard failed.\", ex);\n        return prompt(\"Copy to clipboard: Ctrl+C, Enter\", text);\n      }\n      finally {\n        document.body.removeChild(textarea);\n      }\n    }\n}\n\nfunction MenuItem(props) {\n\n  const pathName = props.pathName;\n  const isActive = pathName === props.path || pathName === props.href || (pathName === '/' && props.path === '/map/park');\n  const icon = (isActive ? props.icon.replace('.svg', '-active.svg') : props.icon);\n\n  return (\n    <>\n      {props.path && <Link className={`\n          text-menu\n          text-center\n          ${isActive ? 'is-active' : ''}\n        `}\n        to={props.path}\n        href={props.href}\n        onClick={props.onClick}\n        title={props.title}\n        >\n        {icon ? <img alt={props.text} src={icon} /> : ''}\n        {props.text && <span className={`${(isActive || ! icon) ? 'inline-block' : 'hidden'} sm:inline-block  ml-2`}>\n          {props.text}\n        </span>}\n      </Link>}\n\n      {! props.path && <a className={`\n          text-menu\n          text-center\n          inline-block cursor-pointer\n          ${isActive ? 'is-active' : ''}\n        `}\n        href={props.href}\n        onClick={props.onClick}\n        title={props.title}\n        >\n        {icon ? <img alt={props.text} src={icon} /> : ''}\n        {props.text && <span className={`${(isActive || ! icon) ? 'inline-block' : 'hidden'} sm:inline-block  ml-2`}>\n          {props.text}\n        </span>}\n      </a>}\n    </>\n  )\n}\n\nfunction SubMenuItem(props) {\n  const [showMessage, setShowMessage] = useState(false)\n  \n  const onClick = (e) => {\n    console.log('show message')\n    setShowMessage(true);\n    \n    setTimeout(() => { console.log('hide message'); setShowMessage(false) }, 3000);\n    \n    props.onClick(e);\n  }\n  \n  return <>\n    {props.path && <Link className={`text-link`}\n      to={props.path}\n      href={props.href}\n      onClick={props.onClick}\n      >\n      <span className={`block`}>\n        {showMessage ? props.message : props.text}\n      </span>\n    </Link>}\n\n    {! props.path && <a className={`text-link inline-block cursor-pointer`}\n      href={props.href}\n      onClick={onClick}\n      >\n      <span className={`block`}>\n        {showMessage ? props.message : props.text}\n      </span>\n    </a>}\n  </>\n}\n\nfunction Menu({pathName}) {\n  const [subMenuIsActive, setSubMenuIsActive] = useState(false);\n\n  const dispatch = useDispatch();\n  // let dateToShow = moment(moment().format('2021-11-06 06:00'));\n  \n  const userData = useSelector(state => {\n    return state.authentication.user_data;\n  });\n  \n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  const exportState = useSelector(state => {\n    return { filter: state.filter, layers: state.layers, ui:state.ui };\n  });\n\n  const doShowZones = () => {\n    return true;\n\n    const validEmailAddresses = [\n      'mail@bartroorda.nl',\n      'rinse.gorter@denhaag.nl',\n      'otto.vanboggelen@crow.nl',\n      'sven.boor@gmail.com'\n    ]\n    return userData && userData.user && validEmailAddresses.indexOf(userData.user.email) > -1;\n  }\n  \n  const logOut = () => {\n    try {\n      if (isLoggedIn) {\n        dispatch( clearUser() );\n        dispatch( { type: \"LOGOUT\", payload: null });\n      }\n    } catch(ex) {\n      console.error(\"Menu.logout - error \", ex);\n    }\n  }\n  \n  const exportStateToClipboard = () => {\n    // creates a url that recreates the exact view\n    const l = window.location;\n    const base = l.protocol + \"//\" + l.host + l.pathname;\n    const params = encodeURIComponent(JSON.stringify(exportState));\n    const url = base + \"?view=\" + params;\n\n    copyToClipboard(url);\n    // navigator.clipboard.writeText(url);\n    window.notify('Link gekopieerd. Gebruik de link om direct naar deze weergave van de kaart te verwijzen.')\n  }\n  \n  let menuClassName = \"Menu fixed w-full mx-0 bottom-0 bg-white\";\n  menuClassName += \" sm:bg-transparent sm:w-full\";\n  if(exportState && exportState.ui && exportState.ui.FILTERBAR) {\n    menuClassName += ' filter-open';\n  }\n  \n  return (\n    <div className={menuClassName}>\n      <div className=\"\n        Menu-inner\n        px-0\n        mx-auto\n        bg-white\n        box-border\n        w-full\n        flex\n        flex-col\n        justify-center\n        sm:px-4\n        sm:shadow-lg\n        sm:m-4\n        sm:mb-1\n        sm:rounded-3xl\n      \">\n\n        <div className=\"\n          whitespace-nowrap\n          text-center\n        \">\n\n          {isLoggedIn && <>\n            <MenuItem\n              pathName={pathName}\n              text={'Aanbod'}\n              path={'/map/park'}\n              icon={'/images/components/Menu/aanbod.svg'}\n            />\n\n            <MenuItem\n              pathName={pathName}\n              text={'Verhuringen'}\n              path={'/map/rentals'}\n              icon={'/images/components/Menu/verhuringen.svg'}\n            />\n\n            {false && doShowZones && <MenuItem\n              pathName={pathName}\n              text={'Zones'}\n              path={'/map/zones'}\n              icon={'https://i.imgur.com/GrF8KBA.png'}\n            />}\n\n            {doShowZones && <MenuItem\n              pathName={pathName}\n              text={'Zones'}\n              path={'/map/zones'}\n              icon={'https://i.imgur.com/GrF8KBA.png'}\n            />}\n\n            <MenuItem\n              pathName={pathName}\n              text={'Ontwikkeling'}\n              path={'/stats/overview'}\n              icon={'/images/components/Menu/ontwikkeling.svg'}\n            />\n\n            <MenuItem\n              title=\"Kopieer link\"\n              text={''}\n              icon={'/images/components/Menu/share.svg'}\n              onClick={(e) => {\n                e.preventDefault();\n                exportStateToClipboard();\n              }}\n            />\n\n            <MenuItem\n              pathName={pathName}\n              path={'/profile'}\n              text={''}\n              icon={'/images/components/Menu/settings.svg'}\n            />\n\n          </>}\n          \n          {! isLoggedIn && <>\n            <MenuItem\n              pathName={pathName}\n              text={'Aanbod'}\n              path={'/map/park'}\n              icon={'/images/components/Menu/aanbod.svg'}\n            />\n            <MenuItem\n              pathName={pathName}\n              text={'Zones'}\n              path={'/map/zones'}\n              icon={'https://i.imgur.com/GrF8KBA.png'}\n            />\n            <Link className=\"text-menu\" to=\"/login\">\n              Log in\n            </Link>\n            <Link className=\"text-menu\" to=\"/over\">\n              Over\n            </Link>\n            <Link className=\"text-menu\" to=\"/rondleiding\">\n              Rondleiding\n            </Link>\n          </>}\n\n          {isLoggedIn && false && <Link className={`\n            text-menu\n            ${pathName === '/monitoring' ? 'is-active' : ''}\n          `} to=\"/monitoring\">\n            Monitor\n          </Link>}\n\n          {/*\n          <Link to=\"/\" className={`text-menu ${pathName === '' ? 'is-active' : ''}`} onClick={(e) => {\n            e.preventDefault();\n            dispatch({\n              type: 'SET_FILTER_DATUM',\n              payload: dateToShow.toISOString()\n            })\n            clearInterval(TO_interval);\n            TO_interval = setInterval(x => {\n              dateToShow.add(30, 'minutes');\n              dispatch({\n                type: 'SET_FILTER_DATUM',\n                payload: dateToShow.toISOString()\n              })\n            }, 1200);\n            // Stop after 10 minutes\n            setTimeout(x => {\n              clearInterval(TO_interval);\n            }, 60 * 1000 * 10);\n          }}>\n            \n          </Link>\n          */}\n\n        </div>\n\n        {subMenuIsActive && <>\n          <div className=\"\n            Menu-subMenu\n            absolute\n          \">\n            <SubMenuItem\n              pathName={pathName}\n              text={'Zones'}\n              path={'/admin/zones'}\n              icon={'https://i.imgur.com/GrF8KBA.png'}\n            />\n          </div>\n        </>}\n\n      </div>\n    </div>\n  )\n\n}\n\nexport default Menu;\n\n","import { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useLocation } from \"react-router-dom\";\n\nimport './MenuSecondaryItem.css';\n// import { IconButtonFilter } from './IconButtons.jsx';\n// import { clearUser } from '../actions/authentication';\n\nfunction MenuSecondaryItem(props) {\n  return (\n    <a\n      href=\"goForIt\"\n      className=\"MenuSecondaryItem cursor-pointer mx-1\"\n      onClick={props.onClick}\n    >\n      {props.text}\n    </a>\n  )\n}\n\nfunction MenuSecondary() {\n  const dispatch = useDispatch()\n\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : null;\n  });\n\n  // Our state variables\n  const [pathName, setPathName] = useState(document.location.pathname);\n  // const [uriParams, setUriParams] = useState(document.location.search);\n\n  // Store window location in a local variable\n  let location = useLocation();\n  useEffect(() => {\n    setPathName(location ? location.pathname : null);\n    // setUriParams(location ? location.search : null);\n  }, [location]);\n  \n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  const setFilterDatum = (newdt) => {\n    if(displayMode === 'displaymode-rentals') {\n      dispatch({\n        type: 'SET_FILTER_INTERVAL_END',\n        payload: newdt.toISOString()\n      })\n      return;\n    }\n    dispatch({\n      type: 'SET_FILTER_DATUM',\n      payload: newdt.toISOString()\n    })\n  }\n\n  return (\n    <div className=\"MenuSecondary block sm:hidden absolute left-0 z-10\">\n      {displayMode !== 'displaymode-other' && <MenuSecondaryItem\n        text=\"\"\n        onClick={(e) => {\n          e.preventDefault();\n          setFilterDatum(new Date())\n        }}\n      />}\n      <MenuSecondaryItem\n        text={displayMode.indexOf('displaymode-zones-') > -1 ? 'Opties' : 'Filters'}\n        onClick={(e) => {\n          e.preventDefault();\n          setVisibility('FILTERBAR', true)\n        }}\n      />\n      {pathName !== '/stats/overview' && <MenuSecondaryItem\n        text=\"Lagen\"\n        onClick={(e) => {\n          e.preventDefault();\n          setVisibility('MenuSecondary.layers', true)\n        }}\n      />}\n      {/*\n      <MenuSecondaryItem\n        text=\"Info\"\n        onClick={() => {\n          setVisibility('METASTATS', true)\n        }}\n      />\n    */}\n    </div>\n  )\n}\n\nexport default MenuSecondary;\n\n","import { useRef, useEffect, useState, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport maplibregl from 'maplibre-gl';\nimport moment from 'moment';\nimport localization from 'moment/locale/nl'\nimport {useLocation} from \"react-router-dom\";\nimport center from '@turf/center'\n\n// MapBox utils\n// https://www.npmjs.com/package/mapbox-gl-utils\n// https://github.com/mapbox/mapbox-gl-js/issues/1722#issuecomment-460500411\nimport U from 'mapbox-gl-utils';\nimport {getMapStyles, setMapStyle} from './MapUtils/map.js';\nimport {initPopupLogic} from './MapUtils/popups.js';\nimport {initClusters} from './MapUtils/clusters.js';\nimport {\n  addLayers,\n  activateLayers\n} from './MapUtils/layers.js';\nimport {addSources} from './MapUtils/sources.js';\nimport {\n  addAdminZonesToMap,\n  addPublicZonesToMap,\n  initMapDrawLogic,\n  initZonesMap,\n  navigateToGeography,\n  triggerGeographyClick,\n  fetchPublicZones,\n  fetchAdminZones\n} from './MapUtils/zones.js';\n\nimport './MapComponent.css';\n\nimport {layers} from './layers';\nimport {sources} from './sources.js';\nimport {getVehicleMarkers, getVehicleMarkers_rentals} from './../Map/vehicle_marker.js';\n\nimport IsochroneTools from '../IsochroneTools/IsochroneTools';\n\n// Set language for momentJS\nmoment.updateLocale('nl', localization);\n\nfunction MapComponent(props) {\n  if(process && process.env.DEBUG) console.log('Map component')\n\n  const [pathName, setPathName] = useState(document.location.pathname);\n  const [uriParams, setUriParams] = useState(document.location.search);\n\n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : null;\n  });\n\n  // Connect to redux store\n  const dispatch = useDispatch()\n\n  // Get data from store\n  const vehicles = useSelector(state => state.vehicles || null);\n  const filter = useSelector(state => state.filter || null);\n  const rentals = useSelector(state => state.rentals || null);\n  const stateLayers = useSelector(state => state.layers || null);\n  const isLoggedIn = useSelector(state => state.authentication.user_data ? true : false);\n  const providers = useSelector(state => (state.metadata && state.metadata.aanbieders) ? state.metadata.aanbieders : []);\n  const extent/* map boundaries */ = useSelector(state => state.layers ? state.layers.extent : null);\n  const [counter, setCounter] = useState(0);\n  const zones_geodata = useSelector(state => {\n    if(!state||!state.zones_geodata) {\n      return null;\n    }\n    return state.zones_geodata;\n  });\n\n  // Define map\n  const mapContainer = props.mapContainer;\n  const [publicZones, setPublicZones] = useState(null);\n  const [didMapLoad, setDidMapLoad] = useState(false);\n  const [didMapDrawLoad, setDidMapDrawLoad] = useState(false);\n  const [lng] = useState((stateLayers.mapextent && stateLayers.mapextent[0]) ? (stateLayers.mapextent[0] + stateLayers.mapextent[2]) / 2 : 4.4671854);\n  const [lat] = useState((stateLayers.mapextent && stateLayers.mapextent[1]) ? (stateLayers.mapextent[1] + stateLayers.mapextent[3]) / 2 : 51.9250836);\n  const [zoom] = useState(stateLayers.zoom || 15);\n  const [didInitSourcesAndLayers, setDidInitSourcesAndLayers] = useState(false);\n  const [didAddPublicZones, setDidAddPublicZones] = useState(false);\n  const [didAddAdminZones, setDidAddAdminZones] = useState(false);\n  let map = useRef(null);\n\n  const userData = useSelector(state => {\n    return state.authentication.user_data;\n  });\n\n  const token = useSelector(state => {\n    if(state.authentication && state.authentication.user_data) {\n      return state.authentication.user_data.token;\n    }\n    return null;\n  });\n\n  // Store window location in a local variable\n  let location = useLocation();\n  useEffect(() => {\n    setUriParams(location ? location.search : null);\n  }, [location]);\n\n  // Get public zones on component load\n  useEffect(x => {\n    // Decide on the function to call (admin or public)\n    const getZonesFunc = token ? getAdminZones : getPublicZones;\n    // Get zones\n    getZonesFunc();\n  }, [])\n\n  const getAdminZones = async () => {\n    const sortedZones = await fetchAdminZones(token, filterGebied);\n\n    setPublicZones(sortedZones);\n  }\n\n  const getPublicZones = async () => {\n    const sortedZones = await fetchPublicZones(filterGebied);\n\n    setPublicZones(sortedZones);\n  }\n\n  const applyMapSettings = (theMap) => {\n    // Hide compass control\n    theMap.addControl(new maplibregl.NavigationControl({\n      showCompass: false\n      // showZoom: false\n    }), 'bottom-right');\n\n    // Add 'current location' button\n    theMap.addControl(\n      new maplibregl.GeolocateControl({\n        positionOptions: {\n          enableHighAccuracy: true\n        },\n        trackUserLocation: true\n      }), 'bottom-right'\n    );\n\n    // Disable rotating\n    theMap.dragRotate.disable();\n    theMap.touchZoomRotate.disableRotation();\n  }\n\n  const registerMapView = useCallback(theMap => {\n    const bounds = theMap.getBounds();\n    const payload = [\n      bounds._sw.lng,\n      bounds._sw.lat,\n      bounds._ne.lng,\n      bounds._ne.lat\n    ]\n\n    dispatch({ type: 'LAYER_SET_MAP_EXTENT', payload: payload })\n    dispatch({ type: 'LAYER_SET_MAP_ZOOM', payload: theMap.getZoom() })\n  }, []);\n\n  // Init MapLibre map\n  // Docs: https://maptiler.zendesk.com/hc/en-us/articles/4405444890897-Display-MapLibre-GL-JS-map-using-React-JS\n  // const mapcurrent_exists = map.current!==undefined;\n  useEffect(() => {\n    const initMap = () => {\n      // Stop if map exists already\n      if (map.current) return;\n\n      const mapStyles = getMapStyles();\n\n      map.current = new maplibregl.Map({\n        container: mapContainer.current,\n        style: mapStyles.base,\n        accessToken: process ? process.env.REACT_APP_MAPBOX_TOKEN : '',\n        center: [lng, lat],\n        zoom: zoom,\n        maxZoom: 19,\n        attributionControl: false// Hide info icon\n      });\n\n      // Apply settings like disabling rotating the map\n      applyMapSettings(map.current)\n\n      // Init MapBox utils\n      U.init(map.current, maplibregl);\n      \n      // Map event handlers\n      map.current.on('error', function(e) {\n        if(process && process.env.DEBUG) console.log('An error event occurred.', e);\n        dispatch({type: 'SHOW_LOADING', payload: false});\n      });\n      map.current.on('idle', function(e) {\n        if(process && process.env.DEBUG) console.log('An idle event occurred.', e);\n        dispatch({type: 'SHOW_LOADING', payload: false});\n      });\n      map.current.on('moveend', function() {\n        registerMapView(map.current);\n      })\n      map.current.on('zoomend', function() {\n        registerMapView(map.current);\n      })\n\n      // Do a state update if map is loaded\n      map.current.on('load', function() {\n\n        // Store map in a global variable\n        window.ddMap = map.current;\n\n        setDidMapLoad(true)\n\n        addSources(map.current);\n        addLayers(map.current);\n\n        setDidInitSourcesAndLayers(true);\n      });\n\n      // Disable rotating\n      map.current.dragRotate.disable();\n      map.current.touchZoomRotate.disableRotation();\n    }\n    initMap();\n  }, [\n    lng,\n    lat,\n    zoom,\n    mapContainer,\n    // dispatch,\n    registerMapView\n  ])\n\n  // If on Zones page and geographyId is in URL -> navigate to zone\n  useEffect(() => {\n    if(! didMapLoad) return;\n    if(! didAddPublicZones && ! didAddAdminZones) return;\n\n    // Check if we are on the zones page\n    if(window.location.pathname.indexOf('/map/zones/') <= -1 && window.location.pathname.indexOf('/admin/zones/') <= -1) return;\n    // Get geographyId from URL\n    const geographyId = pathName.split('/zones/')[1];\n    // Go for it.\n    navigateToGeography(geographyId, publicZones)\n    // Only for admin page: Make polygon active\n    if(window.location.pathname.indexOf('/admin/zones/') > -1) {\n      // Wait until theDraw has been loaded\n      setTimeout(x => {\n        triggerGeographyClick(geographyId, publicZones)\n      }, 2500);\n    }\n  }, [\n    didMapLoad,\n    didAddPublicZones,\n    didAddAdminZones\n  ])\n\n  // If on Map page and gm_zone is in URL -> navigate to place\n  useEffect(() => {\n    if(! didMapLoad) return;\n\n    // Get gm_code from URL\n    const queryParams = new URLSearchParams(window.location.search);\n    const gm_code = queryParams.get(\"gm_code\");\n\n    if(gm_code) {\n      dispatch({\n        type: 'SET_FILTER_GEBIED',\n        payload: gm_code\n      })\n    }\n  }, [\n    didMapLoad,\n    didAddPublicZones,\n    didAddAdminZones\n  ])\n\n  // Init drawing functionality (for drawing zones)\n  useEffect(() => {\n    if(! didMapLoad) return;\n    if(! map.current) return;\n    if(! stateLayers) return;\n\n    // Only init map draw features if on zones admin page\n    if(stateLayers.displaymode !== 'displaymode-zones-admin') return;\n\n    // Init map drawing features\n    initMapDrawLogic(map.current);\n\n    // Switch to satelite view\n    setTimeout(() => {\n      const mapStyles = getMapStyles();\n      setMapStyle(window.ddMap, mapStyles.satelite);\n    }, 5);\n\n    setDidAddAdminZones(true);\n  }, [\n    didMapLoad,\n    stateLayers.displaymode\n  ]);\n\n  // Init public zones map (if needed)\n  useEffect(() => {\n    if(! didMapLoad) return;\n    // If we did add public zones already: return\n    // if( didAddPublicZones) return;\n\n    // Only init map draw features if on zones admin page\n    if(stateLayers.displaymode === 'displaymode-zones-public') {\n      // Add zone layers\n      initZonesMap(map.current, token, filterGebied)\n      // Switch to base map\n      setTimeout(() => {\n        const mapStyles = getMapStyles();\n        setMapStyle(window.ddMap, mapStyles.base);\n      }, 5);\n    } else {\n      // REMOVE zone layers\n      // Not needed, because the layer does hide itself automatically on page change\n    }\n\n    setDidAddPublicZones(true);\n  }, [\n    didMapLoad,\n    didAddPublicZones,\n    filterGebied,\n    stateLayers.displaymode\n  ]);\n\n  // Auto reload zones on displaymode update\n  // only on the zones-page (public or admin)\n  useEffect(() => {\n    if(stateLayers.displaymode.indexOf('displaymode-zones') <= -1) return;\n    // Decide on the function to call (admin or public)\n    const getZonesFunc = token ? getAdminZones : getPublicZones;\n    // Get zones\n    getZonesFunc();\n  }, [\n    stateLayers.displaymode\n  ]);\n\n  // Switch to satelite -> view automatically\n  // let TO_local;\n  useEffect(x => {\n    if(! didMapLoad) return;\n    if(! stateLayers.displaymode) return;\n    if(! window.ddMap.isStyleLoaded()) return;\n\n    const mapStyles = getMapStyles();\n\n    // Switch from satelite to base view\n    let TO_local;\n    if(stateLayers.displaymode.indexOf('displaymode-zones') <= -1) {\n      TO_local = setTimeout(() => {\n        setMapStyle(window.ddMap, mapStyles.base);\n      }, 100);\n    }\n    return () => {\n      clearTimeout(TO_local);\n    }\n  }, [\n    didMapLoad,\n    didInitSourcesAndLayers,\n    stateLayers.displaymode\n  ]);\n\n  /**\n   * MICROHUBS / ZONES [ADMIN] LOGIC\n   * \n   * Load zones onto the map\n  */\n  useEffect(x => {\n    if(! didMapLoad) return;\n\n    // If we are not on zones page: remove all drawed zones from the map\n    if(! stateLayers || stateLayers.displaymode !== 'displaymode-zones-admin') {\n      // Delete draws\n      if(window.CROW_DD && window.CROW_DD.theDraw) {\n        window.CROW_DD.theDraw.deleteAll();\n        // #TODO Not sure why this is needed.\n        // If the timeout is not here, the draw polygons keep visible\n        // if you switch from zones-admin to zones-public\n        setTimeout(() => {\n          window.CROW_DD.theDraw.deleteAll();\n        }, 500);\n      }\n      // Also, hide isochrones layer\n      window.ddMap.U.hide('zones-isochrones')\n      return;\n    }\n\n    (async () => {\n      // Remove existing zones first\n      window.CROW_DD.theDraw.deleteAll();\n      const filter = {\n        municipality: filterGebied\n      }\n      addAdminZonesToMap(token, filter);\n      setDidMapDrawLoad(true)\n      // Force DOM update\n      setCounter(counter+1)\n    })()\n\n    return;\n  }, [\n    didMapLoad,\n    stateLayers.displaymode,\n    filterGebied\n  ])\n\n  /**\n   * MICROHUBS / ZONES [PUBLIC] LOGIC\n   * \n   * Load zones onto the map\n  */\n  useEffect(x => {\n    // Make sure map loaded\n    if(! didMapLoad) return;\n    // Make sure mapDraw loaded\n    if(! window.CROW_DD || ! window.CROW_DD.theDraw) return;\n\n    // If we are not on zones page: remove all drawed zones from the map\n    if(! stateLayers || stateLayers.displaymode !== 'displaymode-zones-public') {\n      if(window.CROW_DD && window.CROW_DD.theDraw) {\n        window.CROW_DD.theDraw.deleteAll();\n      }\n      return;\n    }\n    // If on zones page: add zones to map\n    (async () => {\n      // Remove existing zones fist\n      window.CROW_DD.theDraw.deleteAll();\n      const filter = {\n        municipality: filterGebied\n      }\n      addPublicZonesToMap(token, filter);\n      setDidMapDrawLoad(true)\n    })()\n  }, [\n    didMapLoad,\n    stateLayers.displaymode,\n    filterGebied\n  ])\n\n  /**\n   * SET SOURCES AND LAYERS\n  */\n\n  // Set active source\n  useEffect(x => {\n    if(! didInitSourcesAndLayers) return;\n\n    const activateSources = () => {\n      props.activeSources.forEach(sourceName => {\n        map.current.U.showSource(sourceName);\n      });\n      Object.keys(sources).forEach((key, idx) => {\n        if(props.activeSources.indexOf(key) <= -1) {\n          // Don't remove if source does not exist :)\n          if(! map.current.isSourceLoaded(key)) return;\n          map.current.U.hideSource(key);\n        }\n      });\n    }\n\n    activateSources()\n  }, [\n    didInitSourcesAndLayers,\n    JSON.stringify(props.activeSources)\n  ])\n\n  // Set active layers\n  useEffect(x => {\n    if(! didInitSourcesAndLayers) return;\n    // if(! map.current.isStyleLoaded()) return;\n\n    activateLayers(map.current, layers, props.layers);\n  }, [\n    didInitSourcesAndLayers,\n    JSON.stringify(props.layers)\n  ])\n\n  // Set vehicles sources\n  useEffect(x => {\n    if(! didInitSourcesAndLayers) return;\n    if(! vehicles.data || vehicles.data.length <= 0) return;\n\n    if(map.current.getSource('vehicles')) {\n\n      map.current.U.setData('vehicles', vehicles.data);\n    }\n    if(map.current.getSource('vehicles-clusters')) {\n      map.current.U.setData('vehicles-clusters', vehicles.data);\n    }\n  }, [\n    didInitSourcesAndLayers,\n    vehicles.data\n  ]);\n\n  // Set zones source\n  useEffect(x => {\n    if(! didInitSourcesAndLayers) return;\n    if(! zones_geodata || zones_geodata.data.length <= 0) return;\n\n    map.current.U.setData('zones-geodata', zones_geodata.data);\n  }, [\n    didInitSourcesAndLayers,\n    zones_geodata,\n    zones_geodata.data,\n  ]);\n\n  // Set rentals origins source\n  useEffect(x => {\n    if(! didInitSourcesAndLayers) return;\n    if(! rentals || ! rentals.origins || Object.keys(rentals.origins).length <= 0) return;\n\n    map.current.U.setData('rentals-origins', rentals.origins);\n    map.current.U.setData('rentals-origins-clusters', rentals.origins);\n  }, [\n    didInitSourcesAndLayers,\n    rentals,\n    rentals.origins\n  ]);\n\n  // Set rentals destinations source\n  useEffect(x => {\n    if(! didInitSourcesAndLayers) return;\n    if(! rentals || ! rentals.destinations || Object.keys(rentals.destinations).length <= 0) return;\n\n    map.current.U.setData('rentals-destinations', rentals.destinations);\n    map.current.U.setData('rentals-destinations-clusters', rentals.destinations);\n  }, [\n    didInitSourcesAndLayers,\n    rentals,\n    rentals.destinations\n  ]);\n\n  /**\n   * /SET SOURCES AND LAYERS\n  */\n\n  // If area selection (place/zone) changes, navigate to area\n  useEffect(() => {\n    if(! map.current) return;\n    if(! extent || extent.length === 0) {\n      return;\n    }\n    // Do not zoom to place if zone geography is in URL\n    const hasZoneInUrl = () => {\n      // Check if we are on the zones page\n      if(window.location.pathname.indexOf('/map/zones/') <= -1 && window.location.pathname.indexOf('/admin/zones/') <= -1) return false;\n      // Get geographyId from URL\n      const geographyId = pathName.split('/zones/')[1];\n      return geographyId ? true : false;\n    }\n    if(hasZoneInUrl()) return;\n    \n    map.current.fitBounds(extent);\n    \n    // Reset extent action\n    dispatch({ type: 'LAYER_SET_ZONES_EXTENT', payload: [] });\n  }, [\n    extent,\n    // dispatch\n  ])\n\n  // Init popup logic\n  useEffect(() => {\n    if(! didInitSourcesAndLayers) return;\n    if(! providers) return;\n\n    const isAnalyst = (email) => {\n      // Define email addresses of analysts\n      const analystEmailAddresses = [\n        'mail@bartroorda.nl',\n        'sven.boor@gmail.com'\n      ]\n      // Return true if user is analyst\n      return false;\n      return analystEmailAddresses.indexOf(email) > -1;\n    }\n\n    const isProvider = (user) => {\n      return user.registrations[0].roles.indexOf('operator') > -1;\n    }\n\n    // Only S&B and providers can see vehicle ID\n    const canSeeVehicleId = () => {\n      // If user isn't logged in, it's no analyst\n      if(! userData || ! userData.user) {\n        return false;\n      }\n      // Return if user can see vehicle ID\n      return isAnalyst(userData.user.email) || isProvider(userData.user);\n    }\n\n    initPopupLogic(map.current, providers, canSeeVehicleId(), filter.datum)\n  }, [\n    didInitSourcesAndLayers,\n    providers,\n    filter.datum\n  ])\n\n  // Init clusters click handler\n  useEffect(() => {\n    if(! didInitSourcesAndLayers) return;\n\n    initClusters(map.current)\n  }, [\n    didInitSourcesAndLayers\n  ])\n\n  // Add provider images/icons\n  useEffect(() => {\n    const addProviderImage = async(aanbieder) => {\n      let baselabel = aanbieder.system_id + (stateLayers.displaymode === 'displaymode-rentals' ? '-r' : '-p')\n      if (map.current.hasImage(baselabel + ':0')) {\n        // console.log(\"provider image for %s already exists\", baselabel);\n        return;\n      }\n      var value;\n      if(stateLayers.displaymode === 'displaymode-rentals') {\n        value = await getVehicleMarkers_rentals(aanbieder.color);\n      } else {\n        value = await getVehicleMarkers(aanbieder.color);\n      }\n      value.forEach((img, idx) => {\n        map.current.addImage(baselabel + `:` + idx, { width: 50, height: 50, data: img});\n      });\n    };\n    providers.forEach(aanbieder => {\n      addProviderImage(aanbieder);\n    });\n  }, [\n    providers,\n    stateLayers.displaymode\n  ]);\n\n  // Add map controls for isochrone view\n  return isLoggedIn ? <IsochroneTools /> : null;\n}\n\nexport {\n  MapComponent\n}\n","import JSConfetti from 'js-confetti'\nimport moment from 'moment';\nimport maplibregl from 'maplibre-gl';\nimport localization from 'moment/locale/nl'\n\nimport {\n  getProviderColor,\n  getPrettyProviderName,\n  getProviderWebsiteUrl\n} from '../../../helpers/providers.js';\n\nimport {\n  getPrettyVehicleTypeName\n} from '../../../helpers/vehicleTypes';\n\n// Set language for momentJS\nmoment.updateLocale('nl', localization);\n\nconst jsConfetti = new JSConfetti()\nwindow.showConfetti = () => {\n  jsConfetti.addConfetti()\n  jsConfetti.addConfetti({\n    emojis: ['', '', '', '', '', '', '', '', ''],\n    emojiSize: 30,\n    confettiNumber: 100,\n  })\n}\n\nconst removeExistingPopups = () => {\n  // Only remove on mobile\n  if(window.innerWidth > 640) return;\n  // Remove existing popups\n  const existingPopups = document.getElementsByClassName(\"mapboxgl-popup\");\n  if(existingPopups.length) {\n    existingPopups[0].remove();\n  }\n}\n\nexport const initPopupLogic = (theMap, providers, canSeeVehicleId, filterDate) => {\n  // Docs: https://maplibre.org/maplibre-gl-js-docs/example/popup-on-click/\n  const layerNamesToApplyPopupLogicTo = [\n    'vehicles-point',\n    'vehicles-clusters-point',\n    'rentals-origins-point',\n    'rentals-origins-clusters-point',\n    'rentals-destinations-point',\n    'rentals-destinations-clusters-point',\n  ];\n\n  let popup;\n\n  layerNamesToApplyPopupLogicTo.forEach((layerName) => {\n    // When a click event occurs on a feature in the places layer, open a popup at the\n    // location of the feature, with description HTML from its properties.\n    function clickHandler (e) {\n      // Remove popups\n      if(popup) popup.remove();\n      // Remove popups in an other way,\n      // because on mobile popup doesn't get removed on map click\n      // Reason has to do with both maplibre + mapbox gl draw are installed\n      removeExistingPopups();\n\n      const vehicleProperties = e.features[0].properties;\n      const providerColor = getProviderColor(providers, vehicleProperties.system_id)\n\n      var coordinates = e.features[0].geometry.coordinates.slice();\n      // var description = e.features[0].properties.description;\n\n      // Ensure that if the map is zoomed out such that multiple\n      // copies of the feature are visible, the popup appears\n      // over the copy being pointed to.\n      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n      }\n\n      const providerWebsiteUrl = getProviderWebsiteUrl(vehicleProperties.system_id);\n      const prettyVehicleTypeName = getPrettyVehicleTypeName(vehicleProperties.form_factor);\n\n      popup = new maplibregl.Popup()\n        .setLngLat(coordinates)\n        .setHTML(`\n          <h1 class=\"mb-2\">\n            <span\n              class=\"rounded-full inline-block w-4 h-4\"\n              style=\"background-color: ${providerColor};position: relative;top: 2px\"\n              onClick=\"window.showConfetti()\"\n              >\n            </span>\n            <span class=\"Map-popup-title ml-1\" style=\"color: ${providerColor};\">\n              ${getPrettyProviderName(vehicleProperties.system_id)} ${prettyVehicleTypeName ? prettyVehicleTypeName : ''}\n            </span>\n          </h1>\n          <div class=\"Map-popup-body\">\n            ${vehicleProperties.in_public_space_since ? `<div>\n              Staat hier sinds ${moment(vehicleProperties.in_public_space_since).locale('nl').from(filterDate)}<br />\n              Geparkeerd sinds: ${moment(vehicleProperties.in_public_space_since).format('DD-MM-YYYY HH:mm')}\n            </div>` : ''}\n\n            ${vehicleProperties.distance_in_meters ? `<div>\n              Dit voertuig is ${vehicleProperties.distance_in_meters} meter verplaatst<br />\n            </div>` : ''}\n\n            ${(canSeeVehicleId && vehicleProperties.vehicle_id) ? `<div class=\"mt-4 mb-4 text-xs block text-gray-400\">\n              ${vehicleProperties.vehicle_id}\n            </div>` : ''}\n\n            ${providerWebsiteUrl ? `<div class=\"mt-2\">\n              <a href=\"${providerWebsiteUrl}\" rel=\"external\" target=\"_blank\" class=\"inline-block py-1 px-2 text-white rounded-md hover:opacity-80\" style=\"background-color: ${providerColor};\">\n                website\n              </a>\n            </div>` : ''}\n\n          </div>\n        `)\n        .addTo(theMap);\n    }\n    // Touch event\n    // https://github.com/mapbox/mapbox-gl-draw/issues/1019#issuecomment-850229493=\n    theMap.off('touchend', layerName, clickHandler);\n    theMap.on('touchend', layerName, clickHandler);\n    // Click event\n    theMap.off('click', layerName, clickHandler);\n    theMap.on('click', layerName, clickHandler);\n    // Change the cursor to a pointer when the mouse is over the places layer.\n    theMap.on('mouseenter', layerName, function () {\n      theMap.getCanvas().style.cursor = 'pointer';\n    });\n    // Change it back to a pointer when it leaves.\n    theMap.on('mouseleave', layerName, function () {\n      theMap.getCanvas().style.cursor = '';\n    });\n    theMap.on('zoomstart', layerName, function() {\n      removeExistingPopups()\n    })\n    theMap.on('movestart', layerName, function() {\n      removeExistingPopups()\n    })\n  })\n\n}\n","\n// Init Cluster event handlers\nexport const initClusters = (theMap) => {\n  ['vehicles-clusters', 'rentals-origins-clusters', 'rentals-destinations-clusters'].forEach(x => {\n    theMap.on('click', x, function (e) {\n      var features = theMap.queryRenderedFeatures(e.point, {\n        layers: [x]\n      });\n      var clusterId = features[0].properties.cluster_id;\n      theMap.getSource(x).getClusterExpansionZoom(\n        clusterId,\n        function (err, zoom) {\n          if (err) return;\n          theMap.easeTo({\n            center: features[0].geometry.coordinates,\n            zoom: zoom\n          });\n        }\n      );\n    });\n    theMap.on('mouseenter', x, function () {\n      theMap.getCanvas().style.cursor = 'pointer';\n    });\n    theMap.on('mouseleave', x, function () {\n      theMap.getCanvas().style.cursor = '';\n    });\n  })\n}\n","import React, { useState } from 'react';\nimport { setUser } from '../actions/authentication';\nimport { useDispatch } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nimport Logo from '../components/Logo.jsx';\nimport { IconButtonClose } from '../components/IconButtons.jsx';\n\nconst Login = () => {\n  const [emailaddress, setEmailaddress] = useState('');\n  const [password, setPassword] = useState('');\n  const [recoverPassword, setRecoverPassword] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [doRenderRedirect, setDoRenderRedirect] = useState(false);\n  const [isPasswordVisible, setIsPasswordVisible] = useState(false);\n  const dispatch = useDispatch();\n\n  const login = e => {\n    \n    e.preventDefault();\n\n    // Clear error message\n    setErrorMessage(null);\n\n    // Basic validation\n    if(! emailaddress) {\n      setErrorMessage('Voer alsjeblieft een e-mailadres in');\n      return;\n    }\n\n    if(! password) {\n      setErrorMessage('Voer alsjeblieft een wachtwoord in');\n      return;\n    }\n\n    const url = (process ? process.env.REACT_APP_FUSIONAUTH_SERVER : '') + \"/login\";\n    var data = {\n      loginId: emailaddress,\n      password: password,\n      applicationId: process ? process.env.REACT_APP_FUSIONAUTH_APPLICATION_ID : ''\n    };\n    \n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        dispatch( { type: 'LOGIN', payload: null } );\n        dispatch( { type: 'RESET_FILTER', payload: null } );\n        dispatch( setUser(response) );\n        setLoggedIn(true);\n        document.location = '/map/park';\n      }).catch(error => {\n        console.error(\"Login failed! (%s)\", error.message);\n        setErrorMessage('Login mislukt. Heb je het juiste e-mailadres en wachtwoord ingevuld?');\n        setLoggedIn(false);\n    });\n  };\n  \n  const recover = e => {\n    e.preventDefault();\n\n    // Clear error message\n    setErrorMessage(null);\n\n    const url = (process ? process.env.REACT_APP_FUSIONAUTH_SERVER : '') + \"/user/forgot-password\"\n    var data = {\n      loginId: emailaddress,\n    };\n\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        console.log(response);\n        setSuccessMessage('Als je e-mailadres bij ons bekend is, heb je nu e-mail ontvangen. Hiermee kun je je wachtwoord opnieuw instellen.');\n        return true;\n      }).catch(error => {\n        console.log(error)\n        setSuccessMessage('Als je e-mailadres bij ons bekend is, heb je nu e-mail ontvangen. Hiermee kun je je wachtwoord opnieuw instellen.');\n        return false;\n      });\n  };\n\n  const renderLogin = () => {\n    return (\n      <>\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Het Dashboard Deelmobiliteit is een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit op de voeten willen volgen.\n        </p>\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Hoe lang en waar staan deelvoertuigen ongebruikt in de openbare ruimte? Hoe vaak worden de deelvoertuigen verhuurd? In welke wijken en op welke tijdstippen zijn deelvoertuigen populair?\n        </p>\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Met de informatie uit het Dashboard Deelmobiliteit kunnen overheden hun beleid ontwikkelen, evalueren en bijsturen.\n        </p>\n\n        <form className=\"mt-8 mb-4\">\n          <label className=\"block\" htmlFor=\"emailaddress\">Email</label>\n          <input\n            className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n            autoCapitalize=\"off\"\n            placeholder=\"email\"\n            name=\"emailaddress\"\n            required\n            onChange={e => setEmailaddress(e.target.value.trim())}\n          />\n\n          <label className=\"mt-4 block\" htmlFor=\"password\">Wachtwoord</label>\n          <div className=\"relative\">\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              type={isPasswordVisible ? 'text' : 'password'}\n              placeholder=\"Wachtwoord\"\n              name=\"password\"\n              required\n              onChange={e => setPassword(e.target.value)}\n            />\n            <div className=\"absolute h-full right-1 top-0 mt-1 flex justify-center flex-col\">\n              <img\n                className=\"w-10 cursor-pointer\"\n                src={`/images/components/Login/${isPasswordVisible ? 'eye_hidden_view_see_icon' : 'eye_view_see_look_icon'}.svg`}\n                alt=\"Toggle visibility of password\"\n                onClick={() => {\n                  setIsPasswordVisible(! isPasswordVisible)\n                }}\n              />\n            </div>\n          </div>\n\n          {errorMessage && <div className=\"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n            <span className=\"block sm:inline\">{errorMessage}</span>\n          </div>}\n\n          <p className=\"my-4\">\n            <a href=\"#recover\" onClick={() => {\n              setErrorMessage(null)\n              setRecoverPassword(true)\n            }} className=\"\n              text-gray-400\n              underline\n              text-sm\n            \">\n              Wachtwoord vergeten?\n            </a>\n          </p>\n\n          <div className=\"flex items-baseline mt-4\">\n              <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-theme-blue rounded-lg\" onClick={login}>\n                Login\n              </button>\n              <button className=\"px-6 py-2 mt-4 text-white bg-gray-300 rounded-lg hover:bg-gray-400\" onClick={() => {\n                setDoRenderRedirect(true)\n              }}>\n                Annuleer\n              </button>\n          </div>\n      </form>\n      </>\n    )\n  }\n  \n  const renderRecoverPassword = () => {\n    return (\n      <div>\n\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Ben je je wachtwoord vergeten? Vul dan hieronder je mailadres in om een nieuw wachtwoord in te stellen.\n        </p>\n\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Liever inloggen? Ga dan door naar het <Link to=\"/login\">loginformulier</Link>.\n        </p>\n\n        <br />\n\n        <form>\n          <label className=\"block\" htmlFor=\"emailaddress\">E-mailadres</label>\n          <input\n            className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n            autoCapitalize=\"off\"\n            placeholder=\"E-mailadres\"\n            name=\"emailaddress\"\n            required\n            onChange={e => setEmailaddress(e.target.value.trim())}\n          />\n             \n          {successMessage && <div className=\"mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative\">\n            <span className=\"block sm:inline\">{successMessage}</span>\n          </div>}\n\n          {errorMessage && <div className=\"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n            <span className=\"block sm:inline\">{errorMessage}</span>\n          </div>}\n\n          <div>\n            <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-theme-blue rounded-lg\" onClick={recover}>\n              Herstel\n            </button>\n            <button className=\"px-6 py-2 mt-4 text-white bg-gray-300 rounded-lg hover:bg-gray-400\" onClick={() => {\n              setErrorMessage(null);\n              setRecoverPassword(false);\n            }}>\n              Annuleer\n            </button>\n          </div>\n        </form>\n      </div>\n    )\n  }\n  const renderRedirect = () => {\n    return (\n      <Redirect to=\"/\" />\n    );\n  }\n \n  if (loggedIn || doRenderRedirect) {\n    return renderRedirect();\n  }\n\n  return (\n    <div className=\"\n      px-4\n      min-h-screen\n      sm:flex sm:justify-center\n      sm:px-0\n    \">\n      <div className=\"mx-auto py-8\" style={{\n        width: '100%',\n        maxWidth: '416px'\n      }}>\n\n        <IconButtonClose\n          onClick={() => setDoRenderRedirect(true)}\n          style={{position: 'absolute', right: '30px', top: '18px'}}\n        />\n\n        <Logo />\n\n        <h2 className=\"mt-4 mb-4 text-4xl font-bold\">\n          Dashboard Deelmobiliteit\n        </h2>\n\n        {recoverPassword ? renderRecoverPassword() : renderLogin()}\n\n      </div>\n    </div>\n  )\n};\n\nexport default Login;","import React, { useState } from 'react';\n// import { setUser } from '../actions/authentication';\n// import { useDispatch } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\nimport { useParams } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nimport Logo from '../components/Logo.jsx';\nimport { IconButtonClose } from '../components/IconButtons.jsx';\n\nconst SetPassword = () => {\n  const { changePasswordCode } = useParams();\n\n  // const [emailaddress, setEmailaddress] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n  // const [newPassword, setNewPassword] = useState(null);\n  // const [loggedIn, setLoggedIn] = useState(false);\n  const [doRenderRedirect, setDoRenderRedirect] = useState(false);\n  // const dispatch = useDispatch();\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    // Clear error message\n    setErrorMessage(null);\n\n    const url = (process ? process.env.REACT_APP_FUSIONAUTH_SERVER : '') + `/user/change-password/${changePasswordCode}`\n    var data = {\n      password: password,\n    };\n\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(res => {\n      if(res.ok === true) {\n        window.notify('Je nieuwe wachtwoord is ingesteld. Log nu in met je nieuwe wachtwoord')\n        document.location = '/login'\n        return true;\n      } else {\n        setErrorMessage('Er ging iets fout bij het instellen van je nieuwe wachtwoord. Mogelijk was de link verlopen. In dat geval: klik hieronder op Annuleer en vraag een nieuwe wachtwoordlink aan.');\n        return false;\n      }\n    })\n  }\n\n  const renderRedirect = () => {\n    return (\n      <Redirect to=\"/\" />\n    );\n  }\n \n  if (doRenderRedirect) {\n    return renderRedirect();\n  }\n\n  return (\n    <div className=\"\n      px-4\n      min-h-screen\n      sm:flex sm:justify-center\n      sm:px-0\n    \">\n      <div className=\"mx-auto py-8\" style={{\n        width: '100%',\n        maxWidth: '416px'\n      }}>\n\n        <IconButtonClose\n          onClick={() => setDoRenderRedirect(true)}\n          style={{position: 'absolute', right: '30px', top: '18px'}}\n        />\n\n        <Logo />\n\n        <h2 className=\"mt-4 mb-4 text-4xl font-bold\">\n          Dashboard Deelmobiliteit\n        </h2>\n\n        <p className=\"mb-4\">\n          Op deze pagina kun je je wachtwoord wijzigen. Wil je je wachtwoord niet wijzigen, maar inloggen? Ga dan naar het <Link to=\"/login\">inlogformulier</Link>.\n        </p>\n\n        <p className=\"mb-4\">\n          Vul hieronder je nieuwe wachtwoord in:\n        </p>\n\n        <form className=\"mt-8 mb-4\">\n          <label className=\"mt-4 block\" htmlFor=\"password\">Wachtwoord</label>\n          <input\n            className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n            type=\"password\"\n            placeholder=\"Wachtwoord\"\n            name=\"password\"\n            required\n            onChange={e => setPassword(e.target.value)}\n          />\n        \n          {errorMessage && <div className=\"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n            <span className=\"block sm:inline\">{errorMessage}</span>\n          </div>}\n\n          <div className=\"flex items-baseline mt-4\">\n              <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-theme-blue rounded-lg\" onClick={handleSubmit}>\n                Wachtwoord opslaan\n              </button>\n              <button className=\"px-6 py-2 mt-4 text-white bg-gray-300 rounded-lg hover:bg-gray-400\" onClick={() => {\n                setDoRenderRedirect(true)\n              }}>\n                Annuleer\n              </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n\n};\n\nexport default SetPassword;","import React from 'react';\nimport {\n  useSelector\n} from 'react-redux';\nimport SlideBox from '../SlideBox/SlideBox.jsx';\nimport Filterbar from '../Filterbar/Filterbar.jsx';\n\n// import './FilterbarDesktop.css';\n\nfunction FilterbarDesktop({isVisible, displayMode}) {\n\n  const isFilterBarExtendedVisible = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR_EXTENDED'] : false;\n  });\n\n  return (\n    <SlideBox name=\"FilterBar\" direction=\"left\" options={{\n      title: 'Filters',\n      backgroundColor: '#F6F5F4',\n    }} style={{\n      width: (isFilterBarExtendedVisible ? '648px' : '324px'),\n      height: '100%',\n      top: 0,\n      position: 'fixed'\n    }}\n    >\n      <div className=\"py-2 mx-3 h-full\">\n        <Filterbar displayMode={displayMode} />\n      </div>\n    </SlideBox>\n  )\n}\n\nexport default FilterbarDesktop\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport MobileSlideBox from '../SlideBox/MobileSlideBox.jsx';\nimport Filterbar from '../Filterbar/Filterbar.jsx';\n\n// import './FilterbarMobile.css';\n\nfunction FilterbarMobile({isVisible, displayMode}) {\n  const dispatch = useDispatch()\n\n  const setVisibility = () => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: 'FILTERBAR',\n        visibility: false\n      }\n    })\n  };\n\n  return (\n    <MobileSlideBox\n      title=\"Filters\"\n      isVisible={isVisible}\n      closeHandler={() => {\n        setVisibility();\n      }}\n      classes=\"\n        top-0 overflow-auto\n      \"\n      style={{height: 'calc(100% - 60px)'}}\n    >\n      <Filterbar hideLogo={true} displayMode={displayMode} />\n    </MobileSlideBox>\n  )\n}\n\nexport default FilterbarMobile;\n","import { Link } from \"react-router-dom\";\nimport Section from '../Section/Section';\nimport {marked} from 'marked'\n\nfunction Faq() {\n  return (\n    <div className=\"\n      Faq\n    \">\n      <h1 className=\"\n        text-4xl\n        font-bold\n      \">\n        FAQ\n      </h1>\n\n      <div className=\"my-5\">\n        <Section title=\"Wat zijn de mogelijkheden met maatwerkzones?\">\n          <div dangerouslySetInnerHTML={{ __html: marked.parse(`\nMaatwerkzones, soms ook microhubs genoemd, zijn zelf-ingetekende zones. Deze zones kun je gebruiken voor het inzien van statistische data. Ook kun je de waardes instellen voor deze zones, zoals een maximum aantal voertuigen, en kun je op de hoogte gehouden worden als deze waardes overschreden worden.\n\n![Voorbeeld van een microhub in Rotterdam](https://media.slid.es/uploads/116033/images/10031100/pasted-from-clipboard.png)\n\nGlobaal zijn dit de mogelijkheden met maatwerkzones:\n- Zie bij [Aanbod](https://dashboarddeelmobiliteit.nl/) hoeveel voertuigen er geparkeerd staan in de zone\n- Zie bij [Verhuringen](https://dashboarddeelmobiliteit.nl/map/rentals) hoeveel voertuigen er van of naar de hub reden\n- Zie bij [Zones](https://dashboarddeelmobiliteit.nl/map/zones) hoeveel voertuigen er per modaliteit in de hub staan\n- Zie bij [Ontwikkeling](https://dashboarddeelmobiliteit.nl/stats/overview) de beschikbaarheid van voertuigen, het aantal geparkeerde voertuigen en het aantal verhuringen voor deze hub, door de tijd heen\n\nEnkele voorbeeld-cases:\n\n- Bij welke tijden is de microhub vol en wanneer juist leeg? Zie **Ontwikkeling**<br /><br /><img src=\"https://media.slid.es/uploads/116033/images/10031107/pasted-from-clipboard.png\" /><br />\n- Wat was het verloop door de dag heen vandaag? Klik bij **Zones** op de microhub en open het \"Hub\"-tabje rechtsbovenin<br /><br />![Microhub-statistieken in het Zones-scherm](https://media.slid.es/uploads/116033/images/10034319/pasted-from-clipboard.png)<br />\n- Hoeveel voertuigen staan er in de microhub, per week/dag/uur? Zie **Ontwikkeling**\n\nWe houden van microhubs de verhuringen en het aanbod bij op 5-minuten niveau. Hierdoor heb je gedetailleerde data, en kun je over de dag heen zien hoe hubs zich vullen en weer legen. Op deze manier heb je snel inzicht in het gebruik van de hub.Zie\n\nVanaf het moment dat je nieuwe maatwerkzone intekent in **Zones**, wordt er van die zone elke 5 minuten data bijgehouden en gevisualiseerd.\n\n          `) }}\n          />\n        </Section>\n        <Section title=\"Hoe beheer ik zones?\">\n          <div dangerouslySetInnerHTML={{ __html: marked.parse(`\nOp de pagina **Zones** is het mogelijk om zones te beheren en bekijken.\n\nWil je zones toevoegen, aanpassen of verwijderen? Doe dit als volgt:\n\n1. Ga naar [Zones](/map/zones)\n2. Klik links in het menu op het potlood-icoon<br /><br />![img](https://i.imgur.com/b1ehHu5.png)<br /><br />\n\n\n### Toevoegen\n\n3. Klik op **Nieuwe zone aanmaken**\n4. Klik meerdere keren op de kaart om een gebied af te kaderen<br /><br />![img](https://i.imgur.com/gV2mMvl.png)<br />\n5. Geef de zone een **naam**\n6. Bepaal welk type zone dit is:\n  - Analysezone: Definieer een zone voor toekomstige analyses\n  - Parking zone: Stel een limiet aan voertuigen in\n  - No parking: Maak een verbodsgebied\n7. Klik op **Opslaan**\n\n![img](https://i.imgur.com/LFY7xHt.png)\n\n          `) }}\n          />\n        </Section>\n      </div>\n\n    </div>\n  )\n}\n\nexport default Faq;\n","import React, { useState, useEffect } from 'react';\n\n// import { setUser } from '../../actions/authentication';\nimport { clearUser } from '../../actions/authentication.js';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\n\nimport {downloadReport, downloadRawData} from '../../api/aggregatedStats';\n\nimport Logo from '../Logo.jsx';\nimport { IconButtonClose } from '../IconButtons.jsx';\nimport DateFromTo from '../DateFromTo/DateFromTo.jsx';\nimport FormSelect from '../FormSelect/FormSelect.jsx';\nimport Button from '../Form/Button.jsx';\nimport Section from '../Section/Section';\n\n// import './Profile.css';\n\nfunction Profile() {\n  const dispatch = useDispatch();\n\n  const user = useSelector(state => {\n    if(state.authentication && state.authentication.user_data && state.authentication.user_data.user) {\n      return state.authentication.user_data.user\n    } else {\n      return false;\n    }\n  });\n\n  const logOut = () => {\n    if (user) {\n      dispatch( clearUser() );\n      dispatch( { type: \"LOGOUT\", payload: null });\n    }\n    setDoRenderRedirect(true);\n  }\n\n  return (\n    <div>\n\n      <h2 className=\"mb-4 text-4xl font-bold\">\n        Hallo\n        <span className=\"ml-4 inline-block text-gray-300 text-lg\">\n          {user ? user.email : ''}\n        </span>\n      </h2>\n\n      <p style={{\n        maxWidth: '100%',\n        width: '416px'\n      }} className=\"mb-4\">\n        Je bent lid van het Dashboard Deelmobiliteit, een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit willen volgen.\n      </p>\n\n      &raquo; <Link to=\"/over\" className=\"\n        text-gray-400\n        underline\n        block\n        mb-2\n        inline-block\n      \">\n        Meer info\n      </Link><br />\n\n      &raquo; <Link to=\"/rondleiding\" className=\"\n        text-gray-400\n        underline\n        block\n        mb-2\n        inline-block\n      \">\n        Rondleiding\n      </Link>\n\n      <div className=\"flex\">\n        <Button classes=\"mr-2\" color=\"blue\" href=\"mailto:info@deelfietsdashboard.nl?subject=Feedback Dashboard Deelmobiliteit&body=Ik heb feedback: \">\n          Zend feedback\n        </Button>\n        <Button color=\"gray\" onClick={() => {\n          if(window.confirm('Wil je uitloggen?')) {\n            logOut();\n          }\n        }}>\n          Uitloggen\n        </Button>\n      </div>\n\n    </div>\n  )\n}\n\nexport default Profile;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport MobileSlideBox from '../SlideBox/MobileSlideBox.jsx';\n\nimport './SelectLayerMobile.css';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  // DISPLAYMODE_OTHER,\n  DISPLAYMODE_PARKEERDATA_HEATMAP,\n  DISPLAYMODE_PARKEERDATA_CLUSTERS,\n  DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  DISPLAYMODE_VERHUURDATA_HEATMAP,\n  DISPLAYMODE_VERHUURDATA_CLUSTERS,\n  DISPLAYMODE_VERHUURDATA_VOERTUIGEN\n} from '../../reducers/layers.js';\n\nfunction SelectLayerMobile(props) {\n  const dispatch = useDispatch()\n\n  const isVisible = useSelector(state => {\n    return state.ui ? state.ui['MenuSecondary.layers'] : false;\n  });\n\n  const showZoneOnOff = useSelector(state => {\n    return state.filter ? state.filter.gebied!=='' : false;\n  });\n\n  const zonesVisible = useSelector(state => {\n    return state.layers ? state.layers.zones_visible : false;\n  });\n  \n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  const viewPark = useSelector(state => {\n    return state.layers ? state.layers.view_park : DISPLAYMODE_PARKEERDATA_VOERTUIGEN;\n  });\n\n  const viewRentals = useSelector(state => {\n    return state.layers ? state.layers.view_rentals : DISPLAYMODE_VERHUURDATA_VOERTUIGEN;\n  });\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n  \n  return (\n    <MobileSlideBox\n      title=\"Lagen\"\n      isVisible={isVisible}\n      closeHandler={() => {\n        setVisibility('MenuSecondary.layers', false);\n      }}\n      classes=\"\n        top-auto\n        z-10\n      \"\n    >\n      <div className={`\n        SelectLayerMobile\n        flex justify-between\n      `}>\n      { displayMode===DISPLAYMODE_PARK ?\n        <div data-type=\"heat-map\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_HEATMAP ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_HEATMAP }) }}>\n          <span className=\"layer-title\">\n            Heat map\n          </span>\n        </div> : null }\n\n      { displayMode===DISPLAYMODE_PARK ?\n        <div data-type=\"pointers\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_CLUSTERS ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_CLUSTERS }) }}>\n          <span className=\"layer-title\">\n            Clusters\n          </span>\n        </div> : null }\n\n      { displayMode===DISPLAYMODE_PARK ?\n        <div data-type=\"vehicles\"  className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_VOERTUIGEN }) }}>\n          <span className=\"layer-title\">\n            Voertuigen\n          </span>\n        </div> : null }\n\n      { displayMode===DISPLAYMODE_RENTALS ?\n        <div data-type=\"heat-map\" className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_HEATMAP ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_HEATMAP }) }}>\n          <span className=\"layer-title\">\n            Heat map\n          </span>\n        </div> : null }\n\n      { displayMode===DISPLAYMODE_RENTALS ?\n        <div data-type=\"pointers\" className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_CLUSTERS ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_CLUSTERS }) }}>\n          <span className=\"layer-title\">\n            Clusters\n          </span>\n        </div> : null\n      }\n\n      { displayMode===DISPLAYMODE_RENTALS ?\n        <div data-type=\"vehicles\"  className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_VOERTUIGEN }) }}>\n          <span className=\"layer-title\">\n            Voertuigen\n          </span>\n        </div> : null\n      }\n\n      { isLoggedIn && showZoneOnOff ?\n          <div data-type=\"zones\" className={`layer${!zonesVisible ? ' layer-inactive':''}`} onClick={() => {\n            dispatch({ type: 'LAYER_TOGGLE_ZONES_VISIBLE', payload: null })\n          }}>\n            <span className=\"layer-title\">\n              Zones\n            </span>\n          </div> : null\n        }\n      </div>\n    </MobileSlideBox>\n  )\n}\n\nexport {\n  SelectLayerMobile\n}","import { useSelector } from 'react-redux';\n\nimport './LoadingIndicator.css';\n\nconst LoadingIndicator = () => {\n  \n  const show = useSelector(state => state.ui.showloading)\n  \n  if(show) {\n    return (\n      <img className=\"loadingindicator\" alt=\"spinning progress indicator\" src=\"/images/components/LoadingIndicator/bike_wheel-512.png\"/>\n    )\n  } else {\n    return null;\n  }\n}\n\nexport default LoadingIndicator;","const cPublicAanbieders = [\n  { value:\"cykl\", system_id:\"cykl\", name:\"Cykl\" },\n  // { value:\"flickbike\", system_id:\"flickbike\", name:\"Flickbike\" },\n  { value:\"donkey\", system_id:\"donkey\", name:\"Donkey\" },\n  // { value:\"mobike\", system_id:\"mobike\", name:\"Mobike\" },\n  { value:\"htm\", system_id:\"htm\", name:\"HTM\" },\n  { value:\"gosharing\", system_id:\"gosharing\", name:\"GO Sharing\" },\n  { value:\"check\", system_id:\"check\", name:\"CHECK\" },\n  { value:\"felyx\", system_id:\"felyx\", name:\"Felyx\" },\n  { value:\"deelfietsnederland\", system_id:\"deelfietsnederland\", name:\"Deelfiets\" },\n  { value:\"keobike\", system_id:\"keobike\", name:\"Keobike\" },\n  { value:\"lime\", system_id:\"lime\", name:\"Lime\" },\n  { value:\"baqme\", system_id:\"baqme\", name:\"BAQME\" },\n  { value:\"cargoroo\", system_id:\"cargoroo\", name:\"Cargoroo\" },\n  { value:\"uwdeelfiets\", system_id:\"uwdeelfiets\", name:\"uwdeelfiets\" },\n  { value:\"hely\", system_id:\"hely\", name:\"Hely\" },\n  { value:\"tier\", system_id:\"tier\", name:\"TIER\" },\n  { value:\"bird\", system_id:\"bird\", name:\"Bird\" },\n  { value:\"bolt\", system_id:\"bolt\", name:\"Bolt\" },\n  { value:\"bondi\", system_id:\"bondi\", name:\"Bondi\" },\n  { value:\"dott\", system_id:\"dott\", name:\"Dott\" },\n  { value:\"moveyou\", system_id:\"moveyou\", name:\"MoveYou\" },\n];\n  \nconst cPublicGebieden = [\n  { gm_code:\"\", name:\"Alle plaatsen\" }, { gm_code:\"GM0518\", name:\"'s-Gravenhage\" }, { gm_code:\"GM0796\", name:\"'s-Hertogenbosch\" }, { gm_code:\"GM0613\", name:\"Albrandswaard\" }, { gm_code:\"GM0141\", name:\"Almelo\" }, { gm_code:\"GM0034\", name:\"Almere\" }, { gm_code:\"GM0484\", name:\"Alphen aan den Rijn\" }, { gm_code:\"GM0307\", name:\"Amersfoort\" }, { gm_code:\"GM0362\", name:\"Amstelveen\" }, { gm_code:\"GM0363\", name:\"Amsterdam\" }, { gm_code:\"GM0200\", name:\"Apeldoorn\" }, { gm_code:\"GM0202\", name:\"Arnhem\" }, { gm_code:\"GM0106\", name:\"Assen\" }, { gm_code:\"GM0489\", name:\"Barendrecht\" }, { gm_code:\"GM0203\", name:\"Barneveld\" }, { gm_code:\"GM0373\", name:\"Bergen (NH\" }, { gm_code:\"GM0753\", name:\"Best\" }, { gm_code:\"GM0375\", name:\"Beverwijk\" }, { gm_code:\"GM0377\", name:\"Bloemendaal\" }, { gm_code:\"GM0758\", name:\"Breda\" }, { gm_code:\"GM0312\", name:\"Bunnik\" }, { gm_code:\"GM0313\", name:\"Bunschoten\" }, { gm_code:\"GM0502\", name:\"Capelle aan den IJssel\" }, { gm_code:\"GM0310\", name:\"De Bilt\" }, { gm_code:\"GM0736\", name:\"De Ronde Venen\" }, { gm_code:\"GM0503\", name:\"Delft\" }, { gm_code:\"GM0150\", name:\"Deventer\" }, { gm_code:\"GM0384\", name:\"Diemen\" }, { gm_code:\"GM0505\", name:\"Dordrecht\" }, { gm_code:\"GM0228\", name:\"Ede\" }, { gm_code:\"GM0772\", name:\"Eindhoven\" }, { gm_code:\"GM0153\", name:\"Enschede\" }, { gm_code:\"GM0232\", name:\"Epe\" }, { gm_code:\"GM1771\", name:\"Geldrop-Mierlo\" }, { gm_code:\"GM1942\", name:\"Gooise Meren\" }, { gm_code:\"GM0014\", name:\"Groningen\" }, { gm_code:\"GM0392\", name:\"Haarlem\" }, { gm_code:\"GM0394\", name:\"Haarlemmermeer\" }, { gm_code:\"GM0243\", name:\"Harderwijk\" }, { gm_code:\"GM0246\", name:\"Heerde\" }, { gm_code:\"GM0794\", name:\"Helmond\" }, { gm_code:\"GM0164\", name:\"Hengelo\" }, { gm_code:\"GM0798\", name:\"Hilvarenbeek\" }, { gm_code:\"GM0402\", name:\"Hilversum\" }, { gm_code:\"GM0353\", name:\"IJsselstein\" }, { gm_code:\"GM0166\", name:\"Kampen\" }, { gm_code:\"GM0542\", name:\"Krimpen aan den IJssel\" }, { gm_code:\"GM1621\", name:\"Lansingerland\" }, { gm_code:\"GM0080\", name:\"Leeuwarden\" }, { gm_code:\"GM1916\", name:\"Leidschendam-Voorburg\" }, { gm_code:\"GM0327\", name:\"Leusden\" }, { gm_code:\"GM0809\", name:\"Loon op Zand\" }, { gm_code:\"GM0556\", name:\"Maassluis\" }, { gm_code:\"GM1842\", name:\"Midden-Delfland\" }, { gm_code:\"GM1952\", name:\"Midden-Groningen\" }, { gm_code:\"GM0356\", name:\"Nieuwegein\" }, { gm_code:\"GM0267\", name:\"Nijkerk\" }, { gm_code:\"GM0268\", name:\"Nijmegen\" }, { gm_code:\"GM1930\", name:\"Nissewaard\" }, { gm_code:\"GM0820\", name:\"Nuenen, Gerwen en Nederwetten\" }, { gm_code:\"GM0302\", name:\"Nunspeet\" }, { gm_code:\"GM0826\", name:\"Oosterhout\" }, { gm_code:\"GM0431\", name:\"Oostzaan\" }, { gm_code:\"GM1926\", name:\"Pijnacker-Nootdorp\" }, { gm_code:\"GM0273\", name:\"Putten\" }, { gm_code:\"GM0597\", name:\"Ridderkerk\" }, { gm_code:\"GM0603\", name:\"Rijswijk\" }, { gm_code:\"GM1674\", name:\"Roosendaal\" }, { gm_code:\"GM0599\", name:\"Rotterdam\" }, { gm_code:\"GM0606\", name:\"Schiedam\" }, { gm_code:\"GM0848\", name:\"Son en Breugel\" }, { gm_code:\"GM0855\", name:\"Tilburg\" }, { gm_code:\"GM1730\", name:\"Tynaarlo\" }, { gm_code:\"GM0344\", name:\"Utrecht\" }, { gm_code:\"GM1581\", name:\"Utrechtse Heuvelrug\" }, { gm_code:\"GM0861\", name:\"Veldhoven\" }, { gm_code:\"GM0622\", name:\"Vlaardingen\" }, { gm_code:\"GM0865\", name:\"Vught\" }, { gm_code:\"GM0866\", name:\"Waalre\" }, { gm_code:\"GM0867\", name:\"Waalwijk\" }, { gm_code:\"GM0289\", name:\"Wageningen\" }, { gm_code:\"GM0629\", name:\"Wassenaar\" }, { gm_code:\"GM1960\", name:\"West Betuwe\" }, { gm_code:\"GM1783\", name:\"Westland\" }, { gm_code:\"GM0637\", name:\"Zoetermeer\" }, { gm_code:\"GM0642\", name:\"Zwijndrecht\" }, { gm_code:\"GM0193\", name:\"Zwolle\" }\n]\n\n// id should correspond to the api filter values\nconst cPublicVoertuigTypes = [\n    { id: 'bicycle', name: 'Fiets'},\n    { id: 'cargo_bicycle', name: 'Bakfiets'},\n    { id: 'moped', name: 'Scooter'},\n    { id: 'car', name: 'Auto'},\n    { id: 'unknown', name: 'Onbekend'},\n]\n\n// var store_accesscontrollist = undefined;\nconst isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nexport const initAccessControlList = (store_accesscontrollist)  => {\n  try {\n    if(undefined===store_accesscontrollist) {\n      // console.log(\"no redux state available yet - skipping metadata update\");\n      return false;\n    }\n    \n    const state = store_accesscontrollist.getState();\n    if(!isLoggedIn(state)) {\n      // console.log(\"initialize ACL Data (not logged in)\")\n      // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n      store_accesscontrollist.dispatch({ type: 'SET_GEBIEDEN', payload: cPublicGebieden});\n      \n      // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n      store_accesscontrollist.dispatch({ type: 'SET_AANBIEDERS', payload: cPublicAanbieders});\n\n      let types = cPublicVoertuigTypes; // TODO: get from ACL once implemented\n      store_accesscontrollist.dispatch({ type: 'SET_VEHICLE_TYPES', payload: types});\n\n      store_accesscontrollist.dispatch({ type: 'SET_METADATA_LOADED', payload: true});\n    } else {\n      // console.log(\"initialize ACL Data (logged in)\")\n      let url=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\";\n      let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      \n      store_accesscontrollist.dispatch({type: 'SHOW_LOADING', payload: true});\n      \n      fetch(url, options).then((response) => {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n\n        response.json()\n          .then((metadata) => {\n            // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n            // console.log(\"dispatch gebieden \", metadata.municipalities);\n            store_accesscontrollist.dispatch({ type: 'SET_GEBIEDEN', payload: metadata.municipalities});\n            if(metadata.municipalities.length===1) {\n              store_accesscontrollist.dispatch({ type: 'SET_FILTER_GEBIED', payload: metadata.municipalities[0].gm_code});\n            }\n            \n            // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n            store_accesscontrollist.dispatch({ type: 'SET_AANBIEDERS', payload: metadata.operators});\n\n            // items -> {\"id\": 1, \"name\": \"asdfasdfadfa\" }\n            let types = cPublicVoertuigTypes; // TODO: get from ACL once implemented\n            store_accesscontrollist.dispatch({ type: 'SET_VEHICLE_TYPES', payload: types});\n            \n            store_accesscontrollist.dispatch({ type: 'SET_METADATA_LOADED', payload: true});\n          })\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n        }).finally(()=>{\n          store_accesscontrollist.dispatch({type: 'SHOW_LOADING', payload: false});\n        })\n        return true;\n      }\n  } catch(ex) {\n    // console.error(\"Unable to update ACL\", ex)\n    store_accesscontrollist.dispatch({type: 'SHOW_LOADING', payload: false});\n    return false;\n  }\n}","import { getEmptyZonesGeodataPayload } from './metadataZonesgeodata';\nimport {isLoggedIn} from '../helpers/authentication.js';\n\n// const getFilters = async (token, gm_code) => {\n//   let options = { headers : { \"authorization\": \"Bearer \" + token }}\n//   let url=\"https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=\"+gm_code;\n//   return await fetch(url, options).json();\n// }\n\nexport const updateZones = async (store_zones) => {\n  try {\n    if(undefined===store_zones) {\n      console.log(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n    \n    const state = store_zones.getState();\n    if(state.metadata.metadata_loaded===false) {\n      console.log(\"no metadata available yet - skipping zones update\");\n      return false;\n    }\n\n    let url_zones=\"\";\n    if(!state) { // ||state.filter.gebied===\"\"\n      store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n      store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n      \n      return;\n    }\n\n    // Not logged in:\n    else if(! isLoggedIn(state)) {\n      store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: false});\n\n      const gm_code = state.filter.gebied;\n      let url = `https://api.deelfietsdashboard.nl/dashboard-api/public/filters?gm_code=${gm_code}`;\n      const zonesGeoDataResult = await fetch(url);\n      const zonesGeoDataJson = await zonesGeoDataResult.json();\n\n      if(state.filter.gebied===\"\") {\n        store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n        store_zones.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n        store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n\n        return;\n      }\n\n      if(zonesGeoDataJson && zonesGeoDataJson.filter_values && zonesGeoDataJson.filter_values.zones) {\n        store_zones.dispatch({ type: 'SET_ZONES', payload: zonesGeoDataJson.filter_values.zones});\n        store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n      }\n      else {\n        store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n        store_zones.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n        store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n      }\n      \n      return;\n    }\n\n    if(state.filter.gebied===\"\") {\n      store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n      store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n\n      return;\n      \n      // later: show outlines for all municipalities\n      // url_zones=\"https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_type=municipality\";\n    } else {\n      // https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=GM0518\n      url_zones=\"https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=\"+state.filter.gebied;\n\n      store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: false});\n    }\n\n    // let url_geodata=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\"\n    // https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=34217&include_geojson=true\n    let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n    \n    store_zones.dispatch({type: 'SHOW_LOADING', payload: true});\n\n    fetch(url_zones, options).then((response) => {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n\n      response.json()\n        .then((metadata) => {\n          store_zones.dispatch({ type: 'SET_ZONES', payload: metadata.zones});\n          store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n        })\n      }).catch(ex=>{\n        console.error(\"unable to decode JSON\");\n      }).finally(()=>{\n        store_zones.dispatch({type: 'SHOW_LOADING', payload: false});\n      })\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n    store_zones.dispatch({type: 'SHOW_LOADING', payload: false});\n  }\n}\n","import moment from 'moment';\nimport {\n  createFilterparameters,\n  convertDurationToBin,\n  abortableFetch\n} from './pollTools.js';\nimport { isLoggedIn } from '../helpers/authentication.js';\nimport { DISPLAYMODE_PARK } from '../reducers/layers.js';\nimport {shouldFetchVehicles} from './pollTools.js';\n\nvar store_parkingdata;\nvar timerid_parkingdata;\n\n// theFetch: Variabele used for managing fetch calls\nlet theFetch = null;\n\n// Variable to keep track of vehicles response\n// Only do a new fetch() if needed\nlet activeVehicles;\n\n// Variable to keep track of filter changes\n// Only do a new fetch() if needed\nlet existingFilter;\n\nconst processVehiclesResult = (state, vehicles) => {\n  activeVehicles = vehicles;\n\n  let geoJson = {\n   \"type\":\"FeatureCollection\",\n   \"features\":[]\n  }\n  \n  let operatorcolors = {};\n  let operatorstats = {}\n  state.metadata.aanbieders.forEach(o => {\n    operatorcolors[o.system_id || o.value]=o.color;\n    operatorstats[o.system_id || o.value]=0;\n  });\n\n  const md5 = require('md5');\n  var start_time = moment(state.filter.datum);\n  \n  vehicles.forEach(v => {\n    let in_public_space_since = isLoggedIn(state) ? v.start_time : v.in_public_space_since;\n\n    var minutes = start_time.diff(moment(in_public_space_since), 'minutes');\n    const duration_bin = convertDurationToBin(minutes);\n    \n    let feature = {\n       \"type\":\"Feature\",\n       \"properties\":{\n          \"id\":md5(v.location.latitude+v.location.longitude),\n          \"vehicle_id\":v.bike_id,\n          \"system_id\": v.system_id || v.value,// v.value is used in the public map\n          \"form_factor\": v.form_factor || null,\n          \"in_public_space_since\": in_public_space_since,\n          \"duration_bin\": duration_bin,\n       },\n       \"geometry\":{\n          \"type\":\"Point\",\n          \"coordinates\":[\n             v.location.longitude,\n             v.location.latitude,\n             0.0\n          ]\n       }\n    }\n\n    operatorstats[v.system_id || v.value]+=1;\n\n    // Get list of providers to exclude\n    let aanbiedersexclude = state.filter.aanbiedersexclude.split(\",\") || []\n\n    // Get parkeerduur length to exclude\n    let parkeerduurexclude = state.filter.parkeerduurexclude.split(\",\") || [];\n\n    // Filter markers\n    let markerVisible = ! isLoggedIn(state) || !parkeerduurexclude.includes(duration_bin.toString());\n    markerVisible = markerVisible && (aanbiedersexclude.includes(v.system_id || v.value) === false)\n    if(markerVisible) {\n      geoJson.features.push(feature);\n    }\n  })\n  if(process && process.env.DEBUG) console.log('geoJson in pollParkingData', geoJson)\n\n  // Save vehicles in store\n  store_parkingdata.dispatch({\n    type: 'SET_VEHICLES',\n    payload: geoJson\n  })\n\n  // Update operator stats (= number of vehicles per operator) in store\n  store_parkingdata.dispatch({\n    type: 'SET_VEHICLES_OPERATORSTATS',\n    payload: operatorstats\n  })\n}\n\nconst doApiCall = (\n  state,\n  callback\n) => {\n\n  const canfetchdata = state && isLoggedIn(state)  && state.filter && state.authentication.user_data.token;\n\n  // Set API URL\n  let url = \"https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space\";\n\n  let options = {};\n  let filterparams = createFilterparameters(DISPLAYMODE_PARK, state.filter, state.metadata);\n\n  // Set query params for guests\n  if(! canfetchdata) {\n    if(filterparams.length>0) {\n      url += \"?\" + filterparams.join(\"&\");\n    }\n  }\n\n  // Set query params for logged in users\n  else {\n    if(null!==state.filter&&null!==state.authenticationdata) {\n      url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events\";\n      if(filterparams.length>0) {\n        url += \"?\" + filterparams.join(\"&\");\n      }\n      options = {\n        headers: { \"authorization\": \"Bearer \" + state.authentication.user_data.token }\n      }\n    }\n  }\n  \n  // Start loading\n  store_parkingdata.dispatch({type: 'SHOW_LOADING', payload: true});\n\n  // Abort previous fetch\n  // Info:\n  // - https://stackoverflow.com/q/63412985\n  // - https://davidwalsh.name/cancel-fetch\n  if(theFetch) {\n    theFetch.abort();\n  }\n  // Now do a new fetch\n  theFetch = abortableFetch(url, options);\n  theFetch.ready.then(function(response) {\n    // Set theFetch to null, so next request is not aborted\n    theFetch = null;\n\n    if(! response.ok) {\n      console.error(\"unable to fetch: %o\", response);\n      return false\n    }\n\n    response.json().then(function(vehicles) {\n      if(isLoggedIn(state)) {\n        vehicles = vehicles.park_events\n      } else {\n        vehicles = vehicles.vehicles_in_public_space\n      }\n      callback(state, vehicles);\n    }).catch(ex=>{\n      console.error(\"unable to decode JSON\");\n    }).finally(()=>{\n      // Stop loading\n      store_parkingdata.dispatch({type: 'SHOW_LOADING', payload: false});\n    })\n  }).catch(ex=>{\n    // Stop loading\n    store_parkingdata.dispatch({type: 'SHOW_LOADING', payload: false});\n    console.error(\"fetch error - unable to fetch JSON from %s\", url);\n  });\n\n}\n\nconst updateParkingData = async () => {\n\n  try {\n    if(undefined===store_parkingdata) {\n      if(process && process.env.DEBUG) console.error(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n    \n    // Wait for zone data\n    const state = store_parkingdata.getState();\n    if(! state) return;\n\n    const canfetchdata = state && isLoggedIn(state)  && state.filter && state.authentication.user_data.token;\n\n    // Should we (re)fetch vehicles?\n    const doFetchVehicles = shouldFetchVehicles(state.filter, existingFilter);\n\n    // Update active filter\n    existingFilter = state.filter;\n\n    if(doFetchVehicles || ! activeVehicles) {\n      doApiCall(state, processVehiclesResult);\n    } else {\n      // Regenerate geoJson without querying API\n      processVehiclesResult(state, activeVehicles); \n    }\n\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n  } finally {\n    //:)\n  }\n}\n\nexport const initUpdateParkingData = (_store) => {\n  store_parkingdata = _store;\n  if(! store_parkingdata) { console.log('No store yet.'); return; }\n  if(timerid_parkingdata) { clearTimeout(timerid_parkingdata); }\n  updateParkingData();\n}\n","// import moment from 'moment';\nimport {\n  createFilterparameters,\n  convertDistanceToBin,\n  abortableFetch\n} from './pollTools.js';\nimport {isLoggedIn} from '../helpers/authentication.js';\nimport {shouldFetchVehicles} from './pollTools.js';\n\nimport { DISPLAYMODE_RENTALS } from '../reducers/layers.js';\nconst md5 = require('md5');\n\nvar store_verhuringendata = undefined;\nvar timerid_verhuringendata = undefined;\n\n// Variable that will prevent simultaneous loading of fetch requests\nlet theFetch = null;\n\n// Variable to keep track of vehicles response\n// Only do a new fetch() if needed\nlet activeRentals;\n\n// Variable to keep track of filter changes\n// Only do a new fetch() if needed\nlet existingFilter;\n\nconst processRentalsResult = (state, type, rentals) => {\n  activeRentals = rentals;\n\n  let geoJson = {\n    \"type\":\"FeatureCollection\",\n    \"features\":[]\n  }\n  \n  let operatorstats = {}\n  state.metadata.aanbieders.forEach(o => {\n    operatorstats[o.system_id || o.value]=0;\n  });\n\n  let aanbiedersexclude = state.filter.aanbiedersexclude.split(\",\") || []\n\n  // Map data\n  activeRentals[`trip_${type}`].forEach(v => {\n    const distance_bin = convertDistanceToBin(v.distance_in_meters);\n\n    let feature = {\n     \"type\":\"Feature\",\n     \"properties\":{\n        \"id\": md5(v.location.latitude+v.location.longitude),\n        \"system_id\": v.system_id,\n        \"form_factor\": v.form_factor || null,\n        \"arrival_time\": v.arrival_time,\n        \"departure_time\": v.departure_time,\n        \"distance_bin\": distance_bin,\n        \"distance_in_meters\": v.distance_in_meters,\n        // \"duration_bin\": 0,\n        // \"color\": \"#38ff71\" // color\n     },\n     \"geometry\":{\n        \"type\":\"Point\",\n        \"coordinates\": [\n           v.location.longitude,\n           v.location.latitude,\n           0.0\n        ]\n      }\n    }\n\n    operatorstats[v.system_id || v.value]+=1;\n\n    let afstandexclude = state.filter.afstandexclude.split(\",\") || [];\n    let markerVisible = !afstandexclude.includes(distance_bin.toString());\n    markerVisible = markerVisible && (aanbiedersexclude.includes(v.system_id || v.value) === false)\n    if(markerVisible) {\n      geoJson.features.push(feature);\n    }\n\n  })\n\n  store_verhuringendata.dispatch({\n    type: `SET_RENTALS_${type.toUpperCase()}`,\n    payload: geoJson\n  })\n  \n  store_verhuringendata.dispatch({\n    type: `SET_RENTALS_${type.toUpperCase()}_OPERATORSTATS`,\n    payload: operatorstats\n  })\n}\n\nconst doApiCall = (\n  state,\n  type,\n  callback\n) => {\n\n  const canfetchdata = isLoggedIn(state)&&state&&state.filter&&state.authentication.user_data.token;\n\n  if(type !== 'destinations' && type !== 'origins') {\n    console.error('No valid type given to fetchData');\n    return;\n  }\n\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/v2/trips/${type}`;\n  let options = {};\n  if(null!==state.filter&&null!==state.authenticationdata) {\n    url = `https://api.deelfietsdashboard.nl/dashboard-api/v2/trips/${type}`;\n    let filterparams = createFilterparameters(DISPLAYMODE_RENTALS, state.filter, state.metadata);\n    if(filterparams.length>0) {\n      url += \"?\" + filterparams.join(\"&\");\n    }\n    options = {\n      headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }\n    }\n  }\n  \n  store_verhuringendata.dispatch({type: 'SHOW_LOADING', payload: true});\n  \n  // Abort previous fetch\n  if(theFetch) {\n    theFetch.abort()\n  }\n  // Now do a new fetch\n  theFetch = abortableFetch(url, options);\n  theFetch.ready.then(function(response) {\n    // Set theFetch to null, so next request is not aborted\n    theFetch = null;\n\n    store_verhuringendata.dispatch({type: 'SHOW_LOADING', payload: false});\n\n    if(!response.ok) {\n      console.error(\"unable to fetch: %o\", response);\n      return false\n    }\n\n    response.json().then(function(data) {\n      const rentals = isLoggedIn ? data : [];\n      callback(state, type, rentals);\n    }).catch(ex=>{\n      console.error(\"unable to decode JSON\");\n    }).finally(()=>{\n      store_verhuringendata.dispatch({type: 'SHOW_LOADING', payload: false});\n    })\n    \n  }).catch(ex=>{\n    store_verhuringendata.dispatch({type: 'SHOW_LOADING', payload: false});\n    console.error(\"fetch error - unable to fetch JSON from %s\", url);\n  });\n\n}\n\n// Function that gets trip data and saves it into store_verhuringendata\nconst updateVerhuringenData = ()  => {\n  try {\n    if(undefined===store_verhuringendata) {\n      // console.error(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n    \n    // Wait for zone data\n    const state = store_verhuringendata.getState();\n    if(state.layers.displaymode!==DISPLAYMODE_RENTALS) {\n      // console.log(`not viewing rentals data (viewing ${state.layers.displaymode}, need ${DISPLAYMODE_RENTALS}) - skip update`);\n      return true;\n    }\n\n    if(state.metadata.zones_loaded===false) {\n      // console.log(\"no zone metadata available yet - skipping rentals data update\");\n      return false;\n    }\n\n    const canfetchdata = isLoggedIn(state)&&state&&state.filter&&state.authentication.user_data.token;\n\n    if(!canfetchdata) {\n      store_verhuringendata.dispatch({ type: 'CLEAR_RENTALS_ORIGINS'});\n      store_verhuringendata.dispatch({ type: 'CLEAR_RENTALS_DESTINATIOINS'});\n    } else {\n\n      // Should we (re)fetch vehicles?\n      const doFetchRentals = shouldFetchVehicles(state.filter, existingFilter);\n\n      // Update active filter\n      existingFilter = state.filter;\n\n      const theType = state.filter.herkomstbestemming === 'bestemming' ? 'destinations' : 'origins';\n      if(doFetchRentals || ! activeRentals) {\n        doApiCall(state, theType, processRentalsResult);\n      } else {\n        // Regenerate geoJson without querying API\n        processRentalsResult(state, theType, activeRentals); \n      }\n\n    }\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n  } finally {\n    // store_verhuringendata.dispatch({type: 'SHOW_LOADING', payload: false});\n  }\n}\n\nexport const forceUpdateVerhuringenData = () => {\n  if(! store_verhuringendata) { console.log('No store yet.'); return; }\n  if(undefined!==timerid_verhuringendata) { clearTimeout(timerid_verhuringendata); }\n  updateVerhuringenData();\n}\n\nexport const initUpdateVerhuringenData = (_store) => {\n  store_verhuringendata = _store;\n  forceUpdateVerhuringenData();\n}\n","let TO_notificationDuration;\nexport const showNotification = (msg, setStateFunc) => {\n  // Set (and show) message\n  setStateFunc(msg);\n\n  // Hide message after X seconds\n  clearTimeout(TO_notificationDuration);\n  TO_notificationDuration = setTimeout(x => {\n    setStateFunc(false);\n  }, 4000)\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport SlideBox from '../SlideBox/SlideBox.jsx';\n\nimport './SelectLayer.css';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER,\n  DISPLAYMODE_ZONES_PUBLIC,\n  DISPLAYMODE_ZONES_ADMIN,\n  DISPLAYMODE_PARKEERDATA_HEATMAP,\n  DISPLAYMODE_PARKEERDATA_CLUSTERS,\n  DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  DISPLAYMODE_VERHUURDATA_HEATMAP,\n  DISPLAYMODE_VERHUURDATA_CLUSTERS,\n  DISPLAYMODE_VERHUURDATA_VOERTUIGEN\n} from '../../reducers/layers.js';\n\nimport {getMapStyles, setMapStyle} from '../Map/MapUtils/map.js';\n\nfunction SelectLayer(props) {\n  // const {setLayers, setActiveSource} = props;\n  const dispatch = useDispatch()\n  \n  const showZoneOnOff = useSelector(state => {\n    return state.filter ? state.filter.gebied!=='' : false;\n  });\n\n  const zonesVisible = useSelector(state => {\n    return state.layers ? state.layers.zones_visible : false;\n  });\n  \n  const layers = useSelector(state => {\n    return state.layers ? state.layers : null;\n  });\n\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  const viewPark = useSelector(state => {\n    return state.layers ? state.layers.view_park : DISPLAYMODE_PARKEERDATA_VOERTUIGEN;\n  });\n\n  const viewRentals = useSelector(state => {\n    return state.layers ? state.layers.view_rentals : DISPLAYMODE_VERHUURDATA_VOERTUIGEN;\n  });\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  if(displayMode===DISPLAYMODE_OTHER) {\n    return null; // no layer selection\n  }\n  \n  const mapStyles = getMapStyles();\n\n  return (\n    <SlideBox name=\"SelectLayer\" direction=\"right\" options={{\n      title: 'Lagen',\n      backgroundColor: '#fff',\n    }} style={{\n      position: 'absolute',\n      top: '8px',\n      right: 0\n    }}>\n      <div className=\"SelectLayer pr-1\">\n        { displayMode===DISPLAYMODE_PARK ?\n          <div data-type=\"heat-map\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_HEATMAP ? ' layer-inactive':''}`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_HEATMAP }) }}>\n            <span className=\"layer-title\">\n              Heat map\n            </span>\n          </div>: null }\n\n        { displayMode===DISPLAYMODE_PARK ?\n          <div data-type=\"pointers\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_CLUSTERS ? ' layer-inactive':''}`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_CLUSTERS }) }}>\n            <span className=\"layer-title\">\n              Clusters\n            </span>\n          </div> : null }\n\n        { displayMode===DISPLAYMODE_PARK ?\n          <div data-type=\"vehicles\"  className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_VOERTUIGEN }) }}>\n            <span className=\"layer-title\">\n              Voertuigen\n            </span>\n          </div> : null }\n\n        { displayMode===DISPLAYMODE_RENTALS ?\n          <div data-type=\"heat-map\" className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_HEATMAP ? ' layer-inactive':''}`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_HEATMAP }) }}>\n            <span className=\"layer-title\">\n              Heat map\n            </span>\n          </div>: null }\n\n        { displayMode===DISPLAYMODE_RENTALS ?\n          <div data-type=\"pointers\" className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_CLUSTERS ? ' layer-inactive':''}`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_CLUSTERS }) }}>\n            <span className=\"layer-title\">\n              Clusters\n            </span>\n          </div> : null }\n\n        { displayMode===DISPLAYMODE_RENTALS ?\n        <div data-type=\"vehicles\"  className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_VOERTUIGEN }) }}>\n          <span className=\"layer-title\">\n            Voertuigen\n          </span>\n        </div> : null }\n\n        {displayMode===DISPLAYMODE_ZONES_ADMIN && <>\n          <div data-type=\"map-style-default\" className={`layer${layers.map_style!=='default' ? ' layer-inactive':''}`} onClick={() => {\n            dispatch({ type: 'LAYER_SET_MAP_STYLE', payload: 'default' })\n            setMapStyle(window.ddMap, mapStyles.base)\n          }}>\n            <span className=\"layer-title\">\n              Terrein\n            </span>\n          </div>\n          <div data-type=\"map-style-satelite\" className={`layer${layers.map_style!=='satelite' ? ' layer-inactive':''}`} onClick={() => {\n            dispatch({ type: 'LAYER_SET_MAP_STYLE', payload: 'satelite' })\n            setMapStyle(window.ddMap, mapStyles.satelite)\n          }}>\n            <span className=\"layer-title\">\n              Sateliet\n            </span>\n          </div>\n        </>}\n\n        {displayMode===DISPLAYMODE_ZONES_PUBLIC && false && <>\n\n          <div\n            data-type=\"monitoring\"\n            className={`layer`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_HEATMAP }) }}\n          >\n            <span className=\"layer-title\">\n              Analyse\n            </span>\n          </div>\n\n          <div\n            data-type=\"parking\"\n            className={`layer`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_HEATMAP }) }}\n          >\n            <span className=\"layer-title\">\n              Parking\n            </span>\n          </div>\n\n          <div\n            data-type=\"no parking\"\n            className={`layer`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_HEATMAP }) }}\n          >\n            <span className=\"layer-title\">\n              No parking\n            </span>\n          </div>\n\n        </>}\n\n        { isLoggedIn && showZoneOnOff ?\n          <div data-type=\"zones\" className={`layer${!zonesVisible ? ' layer-inactive':''}`} onClick={() => {\n            dispatch({ type: 'LAYER_TOGGLE_ZONES_VISIBLE', payload: null })\n          }}>\n            <span className=\"layer-title\">\n              Zones\n            </span>\n          </div> : null\n        }\n\n      </div>\n    </SlideBox>\n  )\n}\n\nexport {\n  SelectLayer\n}","import { createFilterparameters } from '../poll-api/pollTools.js';\nimport { DISPLAYMODE_PARK } from '../reducers/layers.js';\nimport {shouldFetchVehicleStats} from '../poll-api/pollTools.js';\n\n// Variable to keep track of vehicles response\n// Only do a new fetch() if needed\nlet activeEventStats;\n\n// Variable to keep track of filter changes\n// Only do a new fetch() if needed\nlet existingFilter;\n\nexport const getParkEventsStats = async (token, options) => {\n  // Example URL: `https://api.deelfietsdashboard.nl/dashboard-api/v2/park_events/stats?timestamp=2022-01-19T23:00:00Z&operators=cykl,flickbike,donkey,mobike,htm,gosharing,check,felyx,deelfietsnederland,keobike,lime,baqme,cargoroo,uwdeelfiets,hely,tier&zone_ids=34234`;\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/v2/park_events/stats?x=1`;\n\n  // Should we (re)fetch vehicles?\n  const doFetchVehicles = shouldFetchVehicleStats(options.filter, existingFilter);\n\n  // Update active filter\n  existingFilter = options.filter;\n\n  // Return cached data\n  if(! doFetchVehicles) return activeEventStats;\n\n  let filterParams = createFilterparameters(DISPLAYMODE_PARK, options.filter, options.metadata);\n  if(filterParams.length>0) url += \"&\" + filterParams.join(\"&\");\n\n  let fetchOptions = {\n    headers: {\n      \"authorization\": `Bearer ${token}`\n    }\n  }\n  \n  const response = await fetch(url, fetchOptions);\n  const responseJson = await response.json();\n\n  activeEventStats = responseJson;\n\n  return responseJson;\n}\n","import React, {useEffect, useState} from 'react';\nimport { useSelector } from 'react-redux';\nimport SlideBox from '../SlideBox/SlideBox.jsx';\n\nimport {getParkEventsStats} from '../../api/parkEventsStats.js';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER,\n} from '../../reducers/layers.js';\n\n// import './MetaStats.css';\n\nfunction StatRow({data}) {\n  if(! data.stats) return <></>\n\n  let total = 0;\n  data.stats.forEach(x => {\n    total += parseInt(x)\n  })\n\n  return <tr key={data.zone_id}>\n    <td key={data.zone_id+'name'} className=\"py-1 px-2\">{data.name}</td>\n    <td key={data.zone_id+'total'} className=\"py-1 px-2\">{total}</td>\n    {data.stats.map((x,i) => {\n      return <td key={'p'+i} className=\"py-1 px-2 text-center\">{x}</td>\n    })}\n  </tr>\n}\n\nfunction MetaStats(props) {\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  const token = useSelector(state => {\n    if(state.authentication && state.authentication.user_data) {\n      return state.authentication.user_data.token;\n    }\n    return null;\n  });\n  const filter = useSelector(state => state.filter)\n  const metadata = useSelector(state => state.metadata)\n\n  const [metaStatsData, setMetaStatsData] = useState([])\n\n  useEffect(() => {\n    // Do not get meta stats until you have 'zones'\n    if(! metadata || ! metadata.zones || metadata.zones.length <= 0) return;\n\n    async function gogogo() {\n      const result = await getParkEventsStats(token, {\n        filter: filter,\n        metadata: metadata\n      });\n      setMetaStatsData(result);\n    }\n    gogogo();\n  }, [\n    token,\n    metadata,\n    metadata.zones,\n    filter,\n    filter.zones\n  ]);\n    \n  const markers = [\n    { id: 0, color: '#1FA024', fillcolor: '#1FA024', name: '< 1 uur'},\n    { id: 1, color: '#48E248', fillcolor: '#48E248', name: '< 24 uur'},\n    { id: 2, color: '#FFD837', fillcolor: '#FFD837', name: '< 4 d'},\n    { id: 3, color: '#FD3E48', fillcolor: '#FD3E48', name: '> 4 d'}\n  ];\n\n  if(displayMode===DISPLAYMODE_OTHER || displayMode===DISPLAYMODE_RENTALS) {\n    return null; // no meta stats\n  }\n\n  if(! metaStatsData || ! metaStatsData.park_event_stats || metaStatsData.park_event_stats.length <= 0) {\n    return <></>\n  }\n\n  return (\n    <SlideBox name=\"MetaStats\" direction=\"right\" options={{\n      title: 'Info',\n      backgroundColor: '#fff',\n    }} style={{\n      position: 'absolute',\n      top: '125px',\n      right: 0\n    }}>\n      <div className=\"MetaStats px-2 py-2\" style={{minWidth: '356px', minHeight: '105px'}}>\n        <table className=\"text-sm text-left w-full\">\n          <thead className=\"border-b-2 border-gray-200\">\n            <tr>\n              <th className=\"py-1 px-2 text-left font-normal\">Zone</th>\n              <th className=\"py-1 px-2 pr-4 text-left font-normal\">Totaal</th>\n              {markers.map((marker,i) => {\n                return <th key={'m'+i} className=\"py-1 px-2 text-center\">\n                  <div className=\"w-6 h-6 \">\n                    <svg viewBox='0 0 30 30' >\n                      <circle cx={'50%'} cy={'50%'} r={'40%'} fill={marker.color} />\n                      <circle cx={'50%'} cy={'50%'} r={'34%'} fill={marker.fillcolor} />\n                    </svg>\n                  </div>\n                </th>\n              })}\n            </tr>\n          </thead>\n          <tbody>\n            {metaStatsData.park_event_stats.map((x, i) => {\n              return <StatRow key={'stat'+i} data={x} />\n            })}\n          </tbody>\n        </table>\n      </div>\n    </SlideBox>\n  )\n}\n\nexport {\n  MetaStats\n}\n","import React, {useEffect, useState} from 'react';\nimport { useSelector } from 'react-redux';\nimport SlideBox from '../SlideBox/SlideBox.jsx';\nimport {useLocation} from \"react-router-dom\";\n\nimport moment from 'moment';\n\nimport BeschikbareVoertuigenChart from '../Chart/BeschikbareVoertuigenChart.jsx';\nimport PillMenu from '../PillMenu/PillMenu';\n\n// import {getParkEventsStats} from '../../api/parkEventsStats.js';\n\n// import './HubStatsWidget.css';\n\nimport {\n  setPublicZoneUrl,\n  setAdminZoneUrl,\n  getAdminZones,\n  // getPublicZones,\n  getZoneById,\n  sortZonesInPreferedOrder,\n  getLocalDrawsOnly,\n  getDraftFeatureId,\n  fetchAdminZones,\n  fetchPublicZones\n} from '../Map/MapUtils/zones.js';\n\nfunction HubStatsWidget(props) {\n  const [counter, setCounter] = useState(0)\n  const [pathName, setPathName] = useState(null)\n  const [publicZones, setPublicZones] = useState(null)\n  const [ontwikkelingVan, setOntwikkelingVan] = useState(moment(moment().format('YYYY-MM-DD 00:00')))\n  const [ontwikkelingTot, setOntwikkelingTot] = useState(moment(moment().format('YYYY-MM-DD 00:00')))\n\n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : 0;\n  });\n\n  const getPublicZones = async () => {\n    const result = await fetchPublicZones(filterGebied);\n    setPublicZones(result);\n  }\n\n  let location = useLocation();\n  useEffect(() => {\n    setPathName(location.pathname);\n  }, [location.pathname]);\n\n  const filter = useSelector(state => state.filter);\n\n  useEffect(x => {\n    getPublicZones();\n  }, [filterGebied])\n\n  const getZoneIdFromPath = (pathname) => {\n    if(! pathname) return;\n    const pathParts = pathname.split('/');\n    if(pathParts.length <= 3) return;\n    return pathParts[pathParts.length -1];\n  }\n\n  const getZoneStats = () => {\n    const zoneIdAsString = getZoneIdFromPath(document.location.pathname);\n    const getZoneIdAsNumber = (zoneIdAsString) => {\n      if(! publicZones) return;\n      let foundZoneId;\n      publicZones.forEach(x => {\n        if(x.geography_id === zoneIdAsString) {\n          foundZoneId = x.zone_id;\n        }\n      })\n      return foundZoneId;\n    }\n    const zoneIdAsNumber = getZoneIdAsNumber(zoneIdAsString)\n    if(! zoneIdAsNumber) return false;\n\n    // Set some filter values\n    const chartFilter = Object.assign({}, filter, {\n      ontwikkelingvan: ontwikkelingVan.format(),\n      ontwikkelingtot: ontwikkelingTot.format(),\n      ontwikkelingaggregatie: 'hour',\n      zones: ''+zoneIdAsNumber// Cast to string\n    });\n\n    return <div>\n      <BeschikbareVoertuigenChart\n        filter={chartFilter}\n        config={{\n          sumTotal: true\n        }}\n        />\n    </div>\n  }\n\n  const chartArrows = [\n    {\n      title: '<',\n      link: () => {\n        const newOntwikkelingVan = ontwikkelingVan.subtract(1, 'day');\n        const newOntwikkelingTot = ontwikkelingTot.subtract(1, 'day');\n        setOntwikkelingVan(newOntwikkelingVan)\n        setOntwikkelingTot(newOntwikkelingTot)\n        setCounter(counter+1);\n      }\n    },\n    {\n      title: '>',\n      link: () => {\n        const newOntwikkelingVan = ontwikkelingVan.add(1, 'day');\n        const newOntwikkelingTot = ontwikkelingTot.add(1, 'day');\n        setOntwikkelingVan(newOntwikkelingVan)\n        setOntwikkelingTot(newOntwikkelingTot)\n        setCounter(counter+1);\n      }\n    }\n  ];\n\n  const zoneStatsDiv = getZoneStats();\n  if(! zoneStatsDiv) return <div/>\n\n  return (\n    <SlideBox name=\"HubStatsWidget\" direction=\"right\" options={{\n      title: 'Hub',\n      backgroundColor: '#fff',\n    }} style={{\n      position: 'absolute',\n      top: '125px',\n      right: 0\n    }}>\n      <div className=\"HubStatsWidget px-2 py-2\" style={{minWidth: '356px', minHeight: '105px'}}>\n        \n        {zoneStatsDiv}\n\n        <div className={\"agg-button-container justify-center mt-4 mb-2\"}>\n          {chartArrows.map(x => {\n            return <div\n              key={x.title}\n              className=\"agg-button\"\n              onClick={x.link}\n              >\n              {x.title}\n            </div>\n          })}\n        </div>\n\n        <div className=\"mb-2 text-center\">\n          {moment(ontwikkelingVan).format('dddd')}\n        </div>\n\n      </div>\n    </SlideBox>\n  )\n}\n\nexport {\n  HubStatsWidget\n}\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport {MapComponent} from '../components/Map/MapComponent.jsx';\nimport {SelectLayer} from '../components/SelectLayer/SelectLayer.jsx';\nimport {MetaStats} from '../components/MetaStats/MetaStats.jsx';\nimport {HubStatsWidget} from '../components/HubStatsWidget/HubStatsWidget';\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_PARKEERDATA_HEATMAP,\n  DISPLAYMODE_PARKEERDATA_CLUSTERS,\n  DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  DISPLAYMODE_VERHUURDATA_HEATMAP,\n  DISPLAYMODE_VERHUURDATA_CLUSTERS,\n  DISPLAYMODE_VERHUURDATA_VOERTUIGEN,\n  DISPLAYMODE_ZONES_PUBLIC,\n  DISPLAYMODE_ZONES_ADMIN,\n} from '../reducers/layers.js';\n\nimport './MapPage.css';\n\nfunction Map({mode, mapContainer}) {\n  const showZones = useSelector(state => {\n    return state.layers ? state.layers.zones_visible : false;\n  });\n\n  const filter = useSelector(state => {\n    return state.filter;\n  });\n\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  const viewPark = useSelector(state => {\n    return state.layers ? state.layers.view_park : DISPLAYMODE_PARKEERDATA_VOERTUIGEN;\n  });\n\n  const viewRentals = useSelector(state => {\n    return state.layers ? state.layers.view_rentals : DISPLAYMODE_VERHUURDATA_VOERTUIGEN;\n  });\n  \n  let layers = [], activeSources = [];\n  if(showZones) {\n    layers.push('zones-geodata', 'zones-geodata-border')\n  }\n\n  layers.push('zones-isochrones');\n  \n  // Active layers for vehicles page\n  if(displayMode===DISPLAYMODE_PARK && viewPark) {\n    switch(viewPark) {\n      case DISPLAYMODE_PARKEERDATA_HEATMAP:\n        layers.push('vehicles-heatmap');\n        activeSources.push('vehicles');\n        break;\n      case DISPLAYMODE_PARKEERDATA_CLUSTERS:\n        layers.push('vehicles-clusters');\n        layers.push('vehicles-clusters-count');\n        layers.push('vehicles-clusters-point');\n        activeSources.push('vehicles');\n        activeSources.push('vehicles-clusters');\n        break;\n      case DISPLAYMODE_PARKEERDATA_VOERTUIGEN:\n        layers.push('vehicles-point');\n        activeSources.push('vehicles');\n        break;\n      default:\n    }\n  }\n  // Active layers for rentals page\n  else if(displayMode===DISPLAYMODE_RENTALS && viewRentals) {\n    const rentalsKey = (filter.herkomstbestemming === 'bestemming' ? 'destinations' : 'origins');\n    switch(viewRentals) {\n      case DISPLAYMODE_VERHUURDATA_HEATMAP:\n        layers.push(`rentals-${rentalsKey}-heatmap`);\n        activeSources.push(`rentals-${rentalsKey}`);\n        break;\n      case DISPLAYMODE_VERHUURDATA_CLUSTERS:\n        layers.push(`rentals-${rentalsKey}-clusters`);\n        layers.push(`rentals-${rentalsKey}-clusters-count`);\n        layers.push(`rentals-${rentalsKey}-clusters-point`);\n        activeSources.push(`rentals-${rentalsKey}-clusters`);\n        break;\n      case DISPLAYMODE_VERHUURDATA_VOERTUIGEN:\n        layers.push(`rentals-${rentalsKey}-point`);\n        activeSources.push(`rentals-${rentalsKey}`);\n        break;\n    }\n  }\n  // Active layers for zones page\n  else if(displayMode===DISPLAYMODE_ZONES_PUBLIC) {\n    layers.push('zones-metrics-public');\n    layers.push('zones-metrics-public-border');\n    activeSources.push('zones-metrics-public');\n  }\n\n  // console.log('layers', layers)\n  // console.log('activeSources', activeSources)\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"hidden sm:block\">\n        <SelectLayer />\n        {(displayMode === DISPLAYMODE_PARK || displayMode === DISPLAYMODE_RENTALS) && <MetaStats />}\n        {(displayMode === DISPLAYMODE_ZONES_PUBLIC) && <HubStatsWidget />}\n      </div>\n      <div className=\"flex-1 bg-red-400\">\n        <MapComponent\n          mapContainer={mapContainer}\n          layers={layers}\n          activeSources={activeSources}\n        />\n      </div>\n  </div>);\n}\n\nexport default Map;\n","import React, {useEffect, useState } from 'react';\n\nimport { getOperatorStatsForChart } from './chartTools.js';\n\nimport {\n  useDispatch,\n  useSelector\n} from 'react-redux';\n\nimport moment from 'moment';\n\nimport {\n  AreaChart,\n  // LineChart,\n  Area,\n  BarChart,\n  Bar,\n  // Line,\n  XAxis,\n  Legend,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\n\nimport {\n  getAggregatedStats,\n  getAggregatedStats_timescaleDB\n} from '../../api/aggregatedStats';\nimport {\n  getProviderColor,\n  getUniqueProviderNames\n} from '../../helpers/providers.js';\nimport {\n  prepareAggregatedStatsData,\n  prepareAggregatedStatsData_timescaleDB,\n  sumAggregatedStats,\n  doShowDetailledAggregatedData,\n  prepareDataForCsv,\n  downloadCsv,\n  getDateFormat\n} from '../../helpers/stats/index';\n\nimport {CustomizedXAxisTick, CustomizedYAxisTick} from '../Chart/CustomizedAxisTick.jsx';\nimport {CustomizedTooltip} from '../Chart/CustomizedTooltip.jsx';\n\nfunction VerhuringenChart(props) {\n  const dispatch = useDispatch()\n\n  const token = useSelector(state => (state.authentication.user_data && state.authentication.user_data.token)||null)\n  const filter = useSelector(state => state.filter)\n  const metadata = useSelector(state => state.metadata)\n\n  const [rentalsData, setRentalsData] = useState([])\n\n  useEffect(() => {\n    // Do not reload chart until you have 'zones'\n    if(! metadata || ! metadata.zones || metadata.zones.length <= 0) return;\n    async function fetchData() {\n      const rentals = await getAggregatedStats(token, 'rentals', {\n        filter: filter,\n        metadata: metadata,\n        aggregationLevel: filter.ontwikkelingaggregatie\n      });\n\n      // Return if no stats are available\n      if(! rentals || ! rentals.rentals_aggregated_stats) {\n        return;\n      }\n\n      let operators = getOperatorStatsForChart(rentals.rentals_aggregated_stats.values, metadata.aanbieders)\n      dispatch({type: 'SET_OPERATORSTATS_VERHURINGENCHART', payload: operators });\n\n      setRentalsData(rentals);\n    }\n    fetchData();\n  }, [filter, filter.ontwikkelingaggregatie, metadata, token, dispatch]);\n  \n  //\n  const chartdata = prepareAggregatedStatsData('rentals', rentalsData, filter.ontwikkelingaggregatie, filter.aanbiedersexclude);\n  // \n  const getchartDataWithNiceDates = (data) => {\n    const aggregationLevel = filter.ontwikkelingaggregatie;\n    const dateFormat = getDateFormat(aggregationLevel);\n    return data.map(x => {\n      return {...x, ...{ name: moment(x.name).format(dateFormat) }}\n    })\n  }\n  const chartdataWithNiceDates = getchartDataWithNiceDates(chartdata)\n\n  const numberOfPointsOnXAxis = rentalsData ? Object.keys(rentalsData).length : 0;\n\n  const renderChart = () => {\n    if(numberOfPointsOnXAxis > 12) {\n      return <AreaChart\n        data={chartdataWithNiceDates}\n        margin={{\n          top: 10,\n          right: 30,\n          left: 0,\n          bottom: 0,\n        }}\n      >\n        <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n        <XAxis dataKey=\"name\" tick={<CustomizedXAxisTick />} />\n        <YAxis tick={<CustomizedYAxisTick />} />\n        <Tooltip content={<CustomizedTooltip />} />\n        <Legend />\n        {getUniqueProviderNames(chartdataWithNiceDates).map(x => {\n          const providerColor = getProviderColor(metadata.aanbieders, x)\n          return (\n            <Area\n              key={x}\n              stackId=\"1\"\n              type=\"monotone\"\n              dataKey={x}\n              stroke={providerColor}\n              fill={providerColor}\n              isAnimationActive={false}\n            />\n          )\n        })}\n      </AreaChart>\n    }\n\n    return <BarChart\n      data={chartdataWithNiceDates}\n      margin={{\n        top: 10,\n        right: 30,\n        left: 0,\n        bottom: 0,\n      }}\n    >\n      <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n      <XAxis dataKey=\"name\" tick={<CustomizedXAxisTick />} />\n      <YAxis tick={<CustomizedYAxisTick />} />\n      <Tooltip content={<CustomizedTooltip />} />\n      <Legend></Legend>\n      {getUniqueProviderNames(chartdataWithNiceDates).map(x => {\n        const providerColor = getProviderColor(metadata.aanbieders, x)\n        return (\n          <Bar\n            key={x}\n            stackId=\"1\"\n            type=\"monotone\"\n            dataKey={x}\n            stroke={providerColor}\n            fill={providerColor}\n            isAnimationActive={false}\n          />\n        )\n      })}\n    </BarChart>\n  }\n\n  return (\n    <div className=\"relative\">\n\n      <div className=\"flex flex-start\">\n\n        {props.title && <h2 className=\"text-4xl my-2\">\n          {props.title}\n        </h2>}\n\n        {chartdata && chartdata.length > 0 && <div className=\"flex justify-center flex-col ml-2\">\n          <button onClick={() => {\n            const preparedData = prepareDataForCsv(chartdata);\n            const filename = `${moment(filter.ontwikkelingvan).format('YYYY-MM-DD')}_to_${moment(filter.ontwikkelingvan).format('YYYY-MM-DD')}`;\n            downloadCsv(preparedData, filename);\n          }} className=\"opacity-50 cursor-pointer\">\n            <img src=\"/components/StatsPage/icon-download-to-csv.svg\" width=\"30`\" alt=\"Download to CSV\" title=\"Download to CSV\" />\n          </button>\n        </div>}\n\n      </div>\n\n      <div className=\"relative\" style={{ width: '100%', height: '400px' }}>\n        <ResponsiveContainer>\n          {renderChart()}\n        </ResponsiveContainer>\n      </div>\n    </div>\n  )\n}\n\nexport default VerhuringenChart;\n","import {useState, useEffect} from 'react';\n\nimport {themes} from '../../themes';\n\nimport $ from 'jquery';\n\nimport Button from '../Form/Button.jsx';\n\nconst weekDays = [\n  'Ma', 'Di', 'Wo', 'Do', 'Vr', 'Za', 'Zo'\n];\n\nconst getOpacityForCount = (count: number, maxCount: number): number => {\n  if(! count) return 0;\n  if(! maxCount) return 0;\n  return (count / maxCount).toFixed(1);\n}\n\nconst getHourlyCount = (data, weekDay, hour, maxCount) => {\n  if(! data) return 0;\n  if(! data[`day-${weekDay}`]) return 0;\n  if(! data[`day-${weekDay}`][`hour-${hour}`]) return 0;\n  return data[`day-${weekDay}`][`hour-${hour}`];\n}\n\nconst renderHourlyCounts = (data, weekDay, maxCount) => {\n  let html = [];\n  for(let hour = 0; hour <= 23; hour++) {\n    const hourlyCount = getHourlyCount(data, weekDay, hour);\n    const opacityForCount = getOpacityForCount(hourlyCount, maxCount);\n    html.push(<div key={`day-${weekDay}-hour-${hour}`} data-day={weekDay} data-hour={hour} className={`flex-1 text-center TimeGrid-day TimeGrid-hour`} style={{\n      color: `rgba(21, 174, 239, ${opacityForCount})`,\n      backgroundColor: `rgba(21, 174, 239, ${opacityForCount})`,\n      borderBottom: 'solid 1px #fff',\n      borderLeft: 'solid 1px #fff',\n    }} data-value={hourlyCount}>\n      {/*{hourlyCount}*/}\n    </div>)\n  }\n  return <div className=\"flex flex-1\">\n    {html}\n  </div>\n}\n\nconst renderHours = (data) => {\n  let html = [];\n  html.push(<div className=\"w-12\"></div>)\n  for(let hour = 0; hour <= 23; hour++) {\n    html.push(<div key={`hour-${hour}`} data-hour={hour} className={`TimeGrid-hour-header flex-1 text-center text-sm`}>{hour}</div>)\n  }\n  return <div className=\"flex flex-1 h-8\">\n    {html}\n  </div>\n}\n\n// Day row\nconst renderWeekDay = (data, day, weekDay, maxCount) => {\n  return <div className=\"flex h-8\" key={`${day}`}>\n    <div className=\"w-12 TimeGrid-day-header flex justify-center flex-col\" data-day={weekDay}>{day}</div>\n    {renderHourlyCounts(data, weekDay, maxCount)}\n  </div>\n}\n\n// Gets highest count, so we can do conditional formatting\nconst getHighestCount = (data) => {\n  let maxCount = 0;\n  Object.keys(data).forEach(weekDay => {\n    if(! data[weekDay]) return;\n    Object.keys(data[weekDay]).forEach(hour => {\n      if(! data[weekDay][hour]) return;\n      if(data[weekDay][hour] > maxCount) {\n        maxCount = data[weekDay][hour];\n      }\n    })\n  })\n  return maxCount;\n}\n\nfunction TimeGrid({\n  data\n}) {\n\n  const [counter, setCounter] = useState(0);\n  const [showIt, setShowIt] = useState(false);\n\n  useEffect(() => {\n    if(! showIt) return;\n\n    const onMouseOverHour = (e) => {\n      const hour = $(e.target).data('hour');\n      $(`.TimeGrid-hour-header[data-hour=${hour}]`).css('color', '#15aeef').addClass('font-bold');\n\n      const day = $(e.target).data('day');\n      $(`.TimeGrid-day-header[data-day=${day}]`).css('color', '#15aeef').addClass('font-bold');\n    }\n\n    const onMouseOutHour = (e) => {\n      const hour = $(e.target).data('hour');\n      $(`.TimeGrid-hour-header[data-hour=${hour}]`).css('color', '#000').removeClass('font-bold');\n\n      const day = $(e.target).data('day');\n      $(`.TimeGrid-day-header[data-day=${day}]`).css('color', '#000').removeClass('font-bold');\n    }\n\n    $('.TimeGrid-hour').on('mouseover', onMouseOverHour);\n    $('.TimeGrid-hour').on('mouseout', onMouseOutHour);\n\n    return () => {\n      $('.TimeGrid-hour').off('mouseover', onMouseOverHour);\n      $('.TimeGrid-hour').off('mouseout', onMouseOutHour);\n    }\n\n  }, [showIt]);\n\n  // Get max count for all data\n  let maxCount = 0;\n  if(showIt) {\n    maxCount = getHighestCount(data);\n  }\n\n  return <div className=\"TimeGrid\">\n    {! showIt && <button className=\"\n      px-6 py-2 my-4 -mt-8 rounded-lg\n      transition-all\n      duration-100\n      bg-theme-blue hover:bg-black text-white\n      \n      mr-2\n    \" onClick={() => setShowIt(true)}>\n      Toon gemiddelde bezetting\n    </button>}\n\n\n    {showIt && <>\n      {renderHours(data)}\n      {weekDays.map((day, idx) => renderWeekDay(data, day, idx, maxCount))}\n    </>}\n  </div>\n}\n\nexport default TimeGrid;\n","import React, {useEffect, useState } from 'react';\nimport {\n  useDispatch,\n  useSelector\n} from 'react-redux';\nimport moment from 'moment';\n\nimport {\n  getAggregatedVehicleData,\n} from '../../helpers/stats/index';\n\nimport {\n  getTotalsPerHour,\n  getSummedTotalsPerWeekdayAndHour\n} from '../../helpers/stats/parking-data';\n\nimport TimeGrid from './TimeGrid';\n\nimport {themes} from '../../themes';\n\nfunction TimeGrid_VehicleAvailability({\n}) {\n\n  const dispatch = useDispatch()\n\n  // Get redux state vars\n  const filter = useSelector(state => state.filter);\n  const token = useSelector(state => (state.authentication.user_data && state.authentication.user_data.token)||null)\n  const metadata = useSelector(state => state.metadata)\n  const zones = useSelector(state => { return (state.metadata && state.metadata.zones) ? state.metadata.zones : []; });\n\n  // Define local state variables\n  const [totalsPerWeekdayAndHour, setTotalsPerWeekdayAndHour] = useState([])\n\n  async function fetchData() {\n    const customFilter = Object.assign({}, filter, {\n      ontwikkelingaggregatie: 'hour'\n    });\n\n    // Get aggregated vehicle data\n    const aggregatedVehicleData = await getAggregatedVehicleData(\n      token,\n      customFilter,\n      zones,\n      metadata\n    );\n    // Set state\n    // setVehiclesData(aggregatedVehicleData);\n    return aggregatedVehicleData;\n  }\n  useEffect(() => {\n    (async () => {\n      const vehicleData = await fetchData();\n      if(! vehicleData) return;\n      const totals = getTotalsPerHour(vehicleData.availability_stats.values);\n      const aggregatedTotals = getSummedTotalsPerWeekdayAndHour(totals);\n      setTotalsPerWeekdayAndHour(aggregatedTotals);\n    })();\n  }, [\n    filter.ontwikkelingvan,\n    filter.ontwikkelingtot,\n    filter.ontwikkelingaggregatie_function,\n    filter.zones,\n    metadata,\n    token\n  ]);\n\n  return <div className=\"TimeGrid_VehicleAvailability\">\n    <TimeGrid data={totalsPerWeekdayAndHour} />\n  </div>\n}\n\nexport default TimeGrid_VehicleAvailability;\n","import React, {useEffect} from 'react'; // , {useEffect, useState }\nimport './StatsPage.css'\n\nimport {\n  useDispatch,\n  useSelector\n} from 'react-redux';\n\nimport moment from 'moment';\n\nimport {\n  doShowDetailledAggregatedData,\n  didSelectAtLeastOneCustomZone,\n  aggregationFunctionButtonsToRender\n} from '../helpers/stats/index';\n\nimport VerhuringenChart from '../components/Chart/VerhuringenChart';\nimport BeschikbareVoertuigenChart from '../components/Chart/BeschikbareVoertuigenChart.jsx';\nimport FormInput from '../components/FormInput/FormInput';\nimport TimeGrid_VehicleAvailability from '../components/TimeGrid/TimeGrid_VehicleAvailability';\nimport InfoTooltip from '../components/InfoTooltip/InfoTooltip';\n\nfunction StatsPage(props) {\n  const dispatch = useDispatch()\n\n  const filter = useSelector(state => state.filter);\n\n  const zones = useSelector(state => {\n    return (state.metadata && state.metadata.zones) ? state.metadata.zones : [];\n  });\n\n  const filterZones = useSelector(state => {\n    return state.filter ? state.filter.zones : 0;\n  });\n\n  const setAggregationLevel = (newlevel) => {\n    dispatch({\n      type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE',\n      payload: newlevel\n    })\n  }\n\n  // Function that chooses a preferred default aggregation level\n  const decideOnAggregationLevel = (userDidSelectCustomZone) => {\n    // Default aggragation level\n    let agg = null;\n    // Count days\n    const daysInSelectedPeriod = moment(filter.ontwikkelingtot).diff(moment(filter.ontwikkelingvan), 'days');\n    // If custom zone:\n    if(userDidSelectCustomZone) {\n      if(daysInSelectedPeriod <= 1 && false) agg = '5m';\n      else if(daysInSelectedPeriod <= 2) agg = '15m';\n      else if(daysInSelectedPeriod <= 5) agg = 'hour';\n    }\n    // If no custom zone:\n    else {\n      const availableAggLevels = ['day', 'week', 'month'];\n      // If agg level is specific to detailled agg data: switch to other agg level\n      if(availableAggLevels.indexOf(filter.ontwikkelingaggregatie) <= -1) {\n        // Switch to non-detailled agg level\n        agg = 'day';\n      }\n    }\n    return agg;\n  }\n\n  // Monitor if selected zones change\n  useEffect(() => {\n    const userDidSelectCustomZone = didSelectAtLeastOneCustomZone(filter, zones);\n    const agg = decideOnAggregationLevel(userDidSelectCustomZone);\n    if(agg) setAggregationLevel(agg);\n  }, [filterZones, filter.ontwikkelingvan, filter.ontwikkelingtot])\n\n  const setAggregationTime = (newtime) => {\n    dispatch({\n      type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE_TIJD',\n      payload: newtime\n    })\n  }\n\n  const setAggregationFunction = (value) => {\n    dispatch({\n      type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE_FUNCTION',\n      payload: value\n    })\n  }\n\n  const renderTimeControl = () => {\n    return  (\n      <div className=\"StatsPage-time-selection flex justify-center flex-col\">\n        <FormInput\n          name=\"time\"\n          type=\"time\"\n          value={filter.ontwikkelingaggregatie_tijd}\n          onChange={(e) => {\n            setAggregationTime(e.target.value)\n          }}\n        />\n      </div>\n    )\n  }\n\n  const renderAggregationButton = (name, title) => {\n    return (\n      <div\n        key={`agg-level-${name}`}\n        className={\"agg-button \" + (filter.ontwikkelingaggregatie===name ? \" agg-button-active\":\"\")}\n        onClick={() => { setAggregationLevel(name) }}\n      >\n        {title}\n      </div>\n    )\n  }\n\n  const renderAggregationFunctionButton = (name, title) => {\n    return (\n      <div\n        key={`agg-level-${name}`}\n        className={\"agg-button \" + (filter.ontwikkelingaggregatie_function===name ? \" agg-button-active\":\"\")}\n        onClick={() => { setAggregationFunction(name) }}\n      >\n        {title}\n      </div>\n    )\n  }\n\n  const daysInSelectedPeriod = moment(filter.ontwikkelingtot).diff(moment(filter.ontwikkelingvan), 'days');\n\n  const getAggregationButtonsToRender = () => {\n    let ret = [];\n    if(doShowDetailledAggregatedData(filter, zones)) {\n      const doShow5m = daysInSelectedPeriod <= 1;\n      const doShow15m = daysInSelectedPeriod <= 2;\n      const doShowHour = daysInSelectedPeriod <= 10;\n\n      if(doShow5m) {\n        ret.push(\n          {name: '5m', title: '5 min'},\n        );\n      }\n      if(doShow15m) {\n        ret.push(\n          {name: '15m', title: 'kwartier'},\n        );\n      }\n      if(doShowHour) {\n        ret.push(\n          {name: 'hour', title: 'uur'}\n        );\n      }\n    }\n    ret.push(\n      {name: 'day', title: 'dag'},\n    );\n    if(daysInSelectedPeriod >= 6) {\n      ret.push(\n        {name: 'week', title: 'week'},\n      );\n    }\n    if(daysInSelectedPeriod >= 27) {\n      ret.push(\n        {name: 'month', title: 'maand'},\n      );\n    }\n    \n    return ret;\n  }\n\n  const aggregationButtonsToRender = getAggregationButtonsToRender();\n\n  // {filter.ontwikkelingaggregatie === 'day' ? renderTimeControl() : ''}\n  // {filter.ontwikkelingaggregatie === 'day' ? renderTimeControl() : ''}\n  return (\n    <div className=\"StatsPage pt-4 pb-24\">\n\n      <div className={\"agg-button-container mb-8\"}>\n\n        {aggregationButtonsToRender.map(x => renderAggregationButton(x.name, x.title))} \n\n        {aggregationButtonsToRender && aggregationButtonsToRender.length > 0 && (<InfoTooltip className=\"mx-2 inline-block\">\n          Toon de data in intervallen van {aggregationButtonsToRender.map((x) => x.title).join(' / ')}. Je bekijkt nu {aggregationButtonsToRender.filter(x => filter.ontwikkelingaggregatie == x.name).pop()?.title}-niveau.\n        </InfoTooltip>)}\n      </div>\n\n      <div className=\"xl:flex\">\n        <div className=\"xl:flex-1 mt-8 xl:mt-0\">\n          <BeschikbareVoertuigenChart\n            filter={filter}\n            title=\"Beschikbare voertuigen\"\n            />\n        </div>\n        <div className=\"xl:flex-1 mt-8 xl:mt-0\">\n          <VerhuringenChart\n            title=\"Verhuringen\"\n            />\n        </div>\n      </div>\n\n      <div className=\"xl:flex\">\n        {doShowDetailledAggregatedData(filter, zones) && (<div className=\"my-16 xl:flex-1\">\n          <h2 className=\"text-4xl my-2\">\n            Gemiddelde bezetting\n          </h2>\n          <div className=\"my-8 mr-8 ml-16 max-w-3xl\">\n            <TimeGrid_VehicleAvailability />\n          </div>\n        </div>)}\n        <div className=\"flex-1\" />\n      </div>\n\n    </div>\n  )\n}\n\nexport default StatsPage;\n","import { useState } from 'react';\nimport {\n  // useDispatch,\n  // useSelector\n} from 'react-redux';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport DatePicker from 'react-datepicker';\nimport { format, addDays, addMonths }  from 'date-fns';\nimport moment from 'moment';\n\n// import './css/FilteritemDatumVanTot.css';\n\nfunction DateFromTo(props) {\n  // const dispatch = useDispatch()\n\n  const [startDate, setStartDate] = useState(props.startDate || moment().toDate());\n  const [endDate, setEndDate] = useState(props.endDate || moment().toDate());\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  const onChange = (dates) => {\n    const [start, end] = dates;\n\n    setStartDate(start);\n    setEndDate(end);\n    \n    props.onChange(dates)\n\n    if(null!==end) {\n      setIsOpen(!isOpen);\n    }\n  };\n  \n  const handleClick = (e) => {\n    e.preventDefault();\n    \n    if(isOpen && endDate===null) {\n      // setStartDate()\n      // setEndDate()\n    }\n    \n    setIsOpen(!isOpen);\n  };\n  \n  const moveFilterDatum = (down) => {\n    let filterOntwikkelingAggregatie = 'week';\n\n    let start = startDate;\n    let end = endDate;\n    switch(filterOntwikkelingAggregatie) {\n      case 'week':\n        start = addDays(startDate, down?-7:7);\n        end = addDays(endDate, down?-7:7);\n        break;\n      case 'month':\n        start = addMonths(startDate, down?-1:1);\n        end = addMonths(endDate, down?-1:1);\n        break;\n      case 'day':\n      default:\n        start = addDays(startDate, down?-1:1);\n        end = addDays(endDate, down?-1:1);\n        break;\n    }\n  \n    setStartDate(start)\n    setEndDate(end)\n  }\n\n  const setView = (view) => {\n    // strip hours\n    const today = new Date((new Date()).toDateString());\n\n    let start;\n    let end;\n    let agg;\n    switch(view) {\n      case 'vandaag':\n        start = today;\n        end = today;\n        agg='15m';\n        break;\n      case 'laatste2dagen':\n        start = addDays(today,-1);\n        end = today;\n        agg='15m';\n        break;\n      case 'laatste7dagen':\n        start = addDays(today,-6);\n        end = today;\n        // agg='day';\n        break;\n      case 'laatste30dagen':\n        start = addDays(today,-30);\n        end = today;\n        // agg='day';\n        break;\n      case 'laatste90dagen':\n        start = addDays(today,-90);\n        end = today;\n        // agg='day';\n        break;\n      case 'laatste12maanden':\n        start = addDays(today,-365);\n        end = today;\n        // agg='week';\n        break;\n      case 'ditjaar':\n        let tyear= today.getFullYear();\n        start = new Date(tyear.toString() + '/1/1');\n        end = today;\n        // agg='month';\n        break;\n      case 'vorigjaar':\n        let lyear= today.getFullYear()-1;\n        start = new Date(lyear.toString() + '/1/1');\n        end = new Date(lyear.toString() + '/12/31');\n        // agg='month';\n        break;\n      default:\n        return; // do nothing\n    }\n    \n    onChange([start, end])\n  }\n\n  const renderPickerInline = () => {\n    return (\n      <div className=\"filter-datum-van-tot-pickercontainer\">\n        <DatePicker\n          key=\"dp-van-tot\"\n          className=\"filter-datum-van-tot-picker\"\n          selected={startDate}\n          onChange={onChange}\n          startDate={startDate}\n          endDate={endDate}\n          dateFormat=\"yyyy-MM-dd\"\n          selectsRange\n          inline\n        />\n        <div className=\"filter-datum-van-tot-picker-options\">\n          <div key=\"fdvt-po1\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('vandaag')}}>Vandaag</div>\n          <div key=\"fdvt-po2\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste2dagen')}}>Laatste 2 dagen</div>\n          <div key=\"fdvt-po3\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste7dagen')}}>Laatste 7 dagen</div>\n          <div key=\"fdvt-po4\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste30dagen')}}>Laatste 30 dagen</div>\n          <div key=\"fdvt-po5\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste90dagen')}}>Laatste 90 dagen</div>\n          <div key=\"fdvt-po6\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste12maanden')}}>Laatste 12 maanden</div>\n          <div key=\"fdvt-po7\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('ditjaar')}}>Dit jaar</div>\n          <div key=\"fdvt-po8\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('vorigjaar')}}>Vorig jaar </div>\n        </div>\n      </div>\n    )\n  }\n    \n  return (\n    <div className=\"filter-datum-van-tot-container\" style={{paddingTop: '0.5rem', paddingBottom: '0.5rem'}}>\n      <div className=\"filter-datum-van-tot-title\">\n        {props.label}\n      </div>\n      <div className=\"filter-datum-van-tot-box-row\">\n        <div className=\"flex flex-col justify-center\"><div\n          className=\"filter-datum-caret\"\n          onClick={() => {moveFilterDatum(true)}}>\n          &lsaquo;\n        </div></div>\n        <div className=\"filter-datum-van-tot-input\"\n          onClick={handleClick}\n          >\n          {startDate!==null?format(startDate, \"yyyy-MM-dd\"):\"\"}\n          &nbsp;t/m&nbsp;\n          {endDate!==null?format(endDate, \"yyyy-MM-dd\"):\"\"} </div>\n        <div className=\"flex flex-col justify-center\"><div\n          className=\"filter-datum-caret\"\n          onClick={() => {moveFilterDatum(false)}}\n          >\n          &rsaquo;\n        </div></div>\n      </div>\n      { isOpen && renderPickerInline() }\n    </div>\n  )\n}\n\nexport default DateFromTo;\n","import './FormSelect.css';\n\nfunction FormSelect({label, options, onChange}) {\n  return <div className=\"FormSelect my-2\">\n    <div className=\"filter-datum-van-tot-title\">\n      {label}\n    </div>\n    <select onChange={onChange}>\n      <option key=\"0\"></option>\n      {options.map(x => {\n        return <option key={x.value} value={x.value}>\n          {x.title}\n        </option>\n      })}\n    </select>\n  </div>\n}\n\nexport default FormSelect;\n","import React, { useState, useEffect } from 'react';\nimport {marked} from 'marked'\n\nimport { clearUser } from '../../actions/authentication.js';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\n\nimport {downloadReport, downloadRawData} from '../../api/aggregatedStats';\n\nimport Logo from '../Logo.jsx';\nimport { IconButtonClose } from '../IconButtons.jsx';\nimport DateFromTo from '../DateFromTo/DateFromTo.jsx';\nimport FormSelect from '../FormSelect/FormSelect.jsx';\nimport Button from '../Form/Button.jsx';\nimport PillMenu from '../PillMenu/PillMenu';\nimport Section from '../Section/Section';\n\nfunction Export() {\n  const dispatch = useDispatch();\n\n  const [isVerified, setIsVerified] = useState(false);\n  const [startDate, setStartDate] = useState(moment(moment().subtract(1, 'month')).format('YYYY-MM-DD'));\n  const [endDate, setEndDate] = useState(moment().format('YYYY-MM-DD'));\n  const [municipalityCode, setMunicipalityCode] = useState('');\n\n  const places = useSelector(state => {\n    return (state.metadata && state.metadata.gebieden) ? state.metadata.gebieden : [];\n  });\n\n  const token = useSelector(state => {\n    if(state.authentication && state.authentication.user_data) {\n      return state.authentication.user_data.token\n    } else {\n      return undefined;\n    }\n  })\n\n  const user = useSelector(state => {\n    if(state.authentication && state.authentication.user_data && state.authentication.user_data.user) {\n      return state.authentication.user_data.user\n    } else {\n      return false;\n    }\n  });\n\n  useEffect(x => {\n    if(! token) return;\n\n    let url = \"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\";\n    let options = { headers : { \"authorization\": \"Bearer \" + token }}\n    \n    fetch(url, options).then((response) => {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n      response.json().then((acl) => {\n        const isAdmin = acl.is_admin === true;\n        const isContactPerson = acl.is_contact_person_municipality === true;\n\n        if(isAdmin || isContactPerson) {\n          setIsVerified(true);\n        }\n      });\n    });\n  }, [token])\n\n  const handleDownloadReportClick = async () => {\n    if(! startDate) {\n      window.notify('Selecteer een startdatum');\n      return;\n    }\n    if(! endDate) {\n      window.notify('Selecteer een einddatum');\n      return;\n    }\n    if(! municipalityCode) {\n      window.notify('Selecteer de gemeente');\n      return;\n    }\n    await downloadReport(token, {\n      startDate: moment(startDate).format('YYYY-MM-DD'),\n      endDate: moment(endDate).format('YYYY-MM-DD'),\n      gm_code: municipalityCode\n    });\n  }\n\n  const handleDownloadRawDataClick = async () => {\n    await downloadRawData(token, {\n      startDate: moment(startDate).format('YYYY-MM-DD'),\n      endDate: moment(endDate).format('YYYY-MM-DD')\n    });\n  }\n\n  const updateMunicipalityCode = (gm_code) => {\n    setMunicipalityCode(gm_code);\n  }\n\n  const isDateRangeMoreThanOneMonth = moment(endDate).diff(startDate, 'days') > 30;\n\n  return (\n    <div className=\"Export\">\n      <h1 className=\"\n        text-4xl\n        font-bold\n      \">\n        Exporteer data\n      </h1>\n\n      <div className=\"my-5\">\n\n        <Section title=\"Download standaardrapportage\">\n          <DateFromTo\n            label=\"Periode\"\n            startDate={moment(startDate).toDate()}\n            endDate={moment(endDate).toDate()}\n            onChange={(dates) => {\n              const [start, end] = dates;\n              setStartDate(start);\n              setEndDate(end);\n            }}\n          />\n          <FormSelect\n            label=\"Plaats\"\n            onChange={(e) => updateMunicipalityCode(e.target.value)}\n            options={places.map(x => {\n              return {\n                value: x.gm_code,\n                title: x.name\n              }\n            })}\n          />\n          <Button classes=\"\" color=\"blue\" onClick={() => handleDownloadReportClick()}>\n            Download rapportage\n          </Button>\n        </Section>\n\n        {isVerified && <Section title=\"Download ruwe data\">\n          <DateFromTo\n            label=\"Periode\"\n            startDate={moment(startDate).toDate()}\n            endDate={moment(endDate).toDate()}\n            onChange={(dates) => {\n              const [start, end] = dates;\n              setStartDate(start);\n              setEndDate(end);\n            }}\n          />\n\n          {isDateRangeMoreThanOneMonth && <div className=\"flex items-center font-medium tracking-wide text-red-500 text-xs mt-1 ml-1\">\n            <div>\n              Het is momenteel niet mogelijk om een langere periode dan 1 week te downloaden. Neem alsjeblieft contact op met ons via <a href=\"mailto:info@deelfietsdashboard.nl\" className=\"inline\">info@deelfietsdashboard.nl</a> als je een export wilt ontvangen voor een langere periode.\n            </div>\n          </div>}\n\n          <Button classes=\"\" color=\"blue\" onClick={() => handleDownloadRawDataClick()}>\n            Download ruwe data (.csv)\n          </Button>\n        </Section>}\n\n      </div>\n\n    </div>\n  )\n}\n\nexport default Export;\n","import moment from 'moment';\n\nexport const fetchParkEvents = async (authentication, provider, dateTime) => {\n  if(! authentication || ! authentication.user_data || ! dateTime) {\n    return;\n  }\n  if(! provider) {\n    return;\n  }\n\n  const formattedDateTime = moment(dateTime).format('YYYY-MM-DDTHH:mm:ss[Z]');\n  let url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp=\"+formattedDateTime+\"&operators=\"+provider;\n  let options = { headers : { \"authorization\": \"Bearer \" + authentication.user_data.token }}\n\n  const response = await fetch(url, options);\n\n  if(! response.ok) {\n    console.error(\"unable to fetch: %o\", response);\n    return false;\n  }\n\n  const json = await response.json();\n\n  return json.park_events || false;\n}","import React, {useEffect, useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport moment from 'moment';\n\nimport {fetchParkEvents} from '../helpers/parkEvents.js';\n\nconst numberOfSnapshots = 40;\nconst provider = 'tier';\nlet numberOfUniqueVehiclesAfterXIterations = [];\n\nconst getUniqueVehicleIds = (dataset) => {\n  let uniqueVehicleIds = [];\n  dataset.map(x => {\n    if(uniqueVehicleIds.indexOf(x.bike_id) <= -1) {\n      uniqueVehicleIds.push(x.bike_id);\n    }\n    return x;\n  });\n  return uniqueVehicleIds;\n}\n\nfunction Monitoring(props) {\n\n  const [vehiclesData, setVehiclesData] = useState({});\n\n  // Get state.authentication\n  const authentication = useSelector(state => {\n    return state.authentication ? state.authentication : false;\n  });\n\n  // On load, get parking data of different moments in time\n  useEffect((x) => {\n    // Function that gets parking data for a specific provider, for a specific date/time\n    const fetchMultipleMomentsInTime = async () => {\n      let dateTime = moment().toISOString(), parkEvents = [];\n      // Get 4*5=20 snapshots (= 5 days) of parking data\n      let collectedParkEvents = [];\n      for(let i = 0; i <= numberOfSnapshots; i++) {\n        dateTime = moment(dateTime).subtract(6, 'hours').toISOString();\n        // Get park events for date time\n        parkEvents = await fetchParkEvents(authentication, provider, dateTime);\n        // Add park events to existing allParkEvents array\n        parkEvents.map(x => {\n          collectedParkEvents.push(x);\n          return x;\n        });\n        // Get cumulative unique vehicle IDs\n        numberOfUniqueVehiclesAfterXIterations[i] = getUniqueVehicleIds(collectedParkEvents);\n        setVehiclesData(numberOfUniqueVehiclesAfterXIterations);\n        console.table(numberOfUniqueVehiclesAfterXIterations[i].length, dateTime)\n      }\n      return collectedParkEvents;\n    }\n\n    fetchMultipleMomentsInTime();\n  }, [authentication]);\n\n  console.log(vehiclesData)\n\n  return (\n    <div className=\"mt-12\">\n      <h1 className=\"text-2xl my-2\">\n        Monitoring\n      </h1>\n\n      <p className=\"py-2\">\n        Voor {provider} willen we controleren hoeveel unieke voertuig-IDs er zijn door te de tijd heen.\n      </p>\n\n      <p className=\"py-2\">\n        Op deze manier kunnen we afleiden of er aan de standaard wordt voldaan. Er moeten statische voertuig-IDs zijn. Als dit niet het geval is, zul je zien dat er na verloop van tijd veel meer voertuig-IDs zijn geregistreerd dan het aantal voertuigen dat de aanbieder heeft. Op die manier weet je dat denog niet voldaan wordt aan de gevraagde datastandaard.\n      </p>\n\n      <p className=\"py-2\">\n        De snapshots zijn steeds gemaakt met 6 uur ertussen.\n      </p>\n\n      <pre>\n        {numberOfUniqueVehiclesAfterXIterations ? numberOfUniqueVehiclesAfterXIterations.map((val, key) => {\n          return <div key={key}>Number of UUIDs after <b>{key} snapshots</b>: <b>{val.length}</b></div>\n        }) : ''}\n      </pre>\n\n      <table className=\"table-auto bg-white hidden\">\n        <thead>\n          <tr>\n            <th>Datum/tijd</th>\n            <th>Cumulatief aantal voertuig-IDs</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>datumtijd</td>\n            <td>aantal</td>\n          </tr>\n        </tbody>\n      </table>\n\n    </div>\n  );\n  \n  \n}\n\nexport default Monitoring;\n","const didFetchSucceed = (response) => response.status >= 200 && response.status <= 299;\n\nexport const getFetchOptions = () => {\n  return {\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n    }\n  }\n}\n\nexport const getIsochronesForFootWalking = async (locations) => {\n  const url = `https://ors.dashboarddeelmobiliteit.nl/v2/isochrones/foot-walking`;\n  const data = {\n  \"range\": [\n      60,\n      120,\n      180,\n      300\n    ],\n    \"range_type\": \"time\",\n    \"locations\": locations,\n    \"intersections\": false\n  }\n  \n  // return {\"type\":\"FeatureCollection\",\"bbox\":[4.449486,51.904495,4.462794,51.912527],\"features\":[{\"type\":\"Feature\",\"properties\":{\"group_index\":0,\"value\":60.0,\"center\":[4.454881449222819,51.90768356237342]},\"geometry\":{\"coordinates\":[[[4.451025,51.908023],[4.4513,51.907986],[4.451575,51.907948],[4.45185,51.907911],[4.452125,51.907873],[4.452401,51.907836],[4.452677,51.907799],[4.452952,51.907762],[4.453228,51.907725],[4.45583,51.907322],[4.456092,51.907356],[4.456142,51.907712],[4.45595,51.907739],[4.455758,51.907766],[4.455757,51.907766],[4.45534,51.907813],[4.454379,51.907933],[4.453552,51.908054],[4.452725,51.908156],[4.452449,51.908193],[4.452174,51.90823],[4.451898,51.908268],[4.451623,51.908305],[4.451348,51.908342],[4.451073,51.90838],[4.451025,51.908023]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{\"group_index\":0,\"value\":120.0,\"center\":[4.454881449222819,51.90768356237342]},\"geometry\":{\"coordinates\":[[[4.451025,51.908023],[4.45466,51.906774],[4.455549,51.906593],[4.456251,51.906633],[4.457443,51.907151],[4.457496,51.907507],[4.457167,51.907956],[4.451348,51.908342],[4.451073,51.90838],[4.451025,51.908023]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{\"group_index\":0,\"value\":180.0,\"center\":[4.454881449222819,51.90768356237342]},\"geometry\":{\"coordinates\":[[[4.451025,51.908023],[4.45441,51.906095],[4.455592,51.905759],[4.457529,51.906457],[4.458408,51.907273],[4.458376,51.907903],[4.458281,51.90825],[4.452449,51.908193],[4.452174,51.90823],[4.452174,51.90823],[4.451898,51.908268],[4.451663,51.9083],[4.451623,51.908305],[4.451348,51.908342],[4.451151,51.908369],[4.451073,51.90838],[4.451025,51.908023]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{\"group_index\":0,\"value\":300.0,\"center\":[4.454881449222819,51.90768356237342]},\"geometry\":{\"coordinates\":[[[4.449486,51.908055],[4.449503,51.907922],[4.450348,51.907186],[4.454241,51.904793],[4.456447,51.904495],[4.458532,51.905554],[4.459956,51.906743],[4.460163,51.907046],[4.460504,51.90789],[4.460594,51.908239],[4.460482,51.908495],[4.458122,51.909144],[4.452449,51.908193],[4.452174,51.90823],[4.452174,51.90823],[4.451898,51.908268],[4.451663,51.9083],[4.451623,51.908305],[4.451348,51.908342],[4.451151,51.908369],[4.451073,51.90838],[4.449877,51.908534],[4.449727,51.9085],[4.449486,51.908055]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{\"group_index\":1,\"value\":60.0,\"center\":[4.457657694974035,51.909007387888565]},\"geometry\":{\"coordinates\":[[[4.456354,51.908846],[4.456447,51.908498],[4.457898,51.908834],[4.45897,51.909176],[4.458874,51.909523],[4.457821,51.90966],[4.457525,51.909684],[4.457352,51.909699],[4.456354,51.908846]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{\"group_index\":1,\"value\":120.0,\"center\":[4.457657694974035,51.909007387888565]},\"geometry\":{\"coordinates\":[[[4.455364,51.90846],[4.455692,51.908414],[4.458372,51.908144],[4.458669,51.908348],[4.45987,51.909589],[4.459638,51.909865],[4.45874,51.910227],[4.457616,51.910358],[4.456709,51.910277],[4.456386,51.910117],[4.455413,51.908816],[4.455364,51.90846]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{\"group_index\":1,\"value\":180.0,\"center\":[4.457657694974035,51.909007387888565]},\"geometry\":{\"coordinates\":[[[4.453906,51.908652],[4.458837,51.907456],[4.459138,51.907653],[4.460528,51.910026],[4.460513,51.910301],[4.460231,51.910548],[4.460223,51.910552],[4.456283,51.911319],[4.456146,51.91133],[4.455822,51.911174],[4.453951,51.909009],[4.453906,51.908652]]],\"type\":\"Polygon\"}},{\"type\":\"Feature\",\"properties\":{\"group_index\":1,\"value\":300.0,\"center\":[4.457657694974035,51.909007387888565]},\"geometry\":{\"coordinates\":[[[4.451587,51.909041],[4.451695,51.908949],[4.455784,51.907399],[4.457568,51.90655],[4.458114,51.906406],[4.459655,51.906067],[4.45997,51.906103],[4.460263,51.906312],[4.462724,51.909343],[4.462794,51.909696],[4.462436,51.91103],[4.462336,51.911376],[4.460732,51.911941],[4.456541,51.912527],[4.455595,51.912424],[4.451635,51.909398],[4.451587,51.909041]]],\"type\":\"Polygon\"}}],\"metadata\":{\"service\":\"isochrones\",\"timestamp\":1655891883314,\"query\":{\"profile\":\"foot-walking\",\"isoMaps\":{\"isochroneMaps\":[{\"travellerId\":0,\"envelope\":{\"area\":5.164020899112029E-5,\"width\":0.011107855700144498,\"height\":0.004648980900107347,\"minX\":4.449486388880505,\"maxX\":4.4605942445806495,\"minY\":51.904494662456365,\"maxY\":51.90914364335647,\"null\":false},\"isochrones\":[{\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[4.451024578348936,51.90802322409213],[4.4510731140385635,51.90837993726379],[4.45134827329938,51.90834249809545],[4.451623432560204,51.90830505892712],[4.451898480826999,51.90826763482586],[4.452173529272039,51.90823021063024],[4.452449200760288,51.90819305085868],[4.4527248722485355,51.90815589108712],[4.453552029537955,51.90805447232304],[4.454378901178023,51.907932932457776],[4.455339777840488,51.90781292043333],[4.455756726235057,51.907766321112014],[4.455758479949447,51.90776608312923],[4.45595010222558,51.90773911954855],[4.4561417245017125,51.907712155967864],[4.456091562300367,51.90735566788454],[4.45583038162552,51.90732243462014],[4.45322812315502,51.90772479829276],[4.452952451666766,51.90776195806432],[4.4526767801785185,51.90779911783588],[4.452401108690271,51.90783627760744],[4.452125437202024,51.907873437378996],[4.451850167125424,51.90791089152005],[4.451574896870577,51.907948345755464],[4.45129973760976,51.907985784923795],[4.451024578348936,51.90802322409213]]]},\"value\":60.0,\"area\":0.0,\"reachfactor\":0.0,\"envelope\":{\"area\":5.411395584489144E-6,\"width\":0.005117146152776364,\"height\":0.0010575026436470125,\"minX\":4.451024578348936,\"maxX\":4.4561417245017125,\"minY\":51.90732243462014,\"maxY\":51.90837993726379,\"null\":false},\"attributes\":null},{\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[4.451024578348936,51.90802322409213],[4.45466039708478,51.90677388136266],[4.455548847053877,51.90659285955982],[4.456250865728116,51.90663333680119],[4.457443477167508,51.907151074360016],[4.457496390663191,51.90750716446375],[4.4571668644116755,51.90795615965217],[4.45134827329938,51.90834249809545],[4.4510731140385635,51.90837993726379],[4.451024578348936,51.90802322409213]]]},\"value\":120.0,\"area\":0.0,\"reachfactor\":0.0,\"envelope\":{\"area\":1.156563149105754E-5,\"width\":0.0064718123142544215,\"height\":0.0017870777039661334,\"minX\":4.451024578348936,\"maxX\":4.457496390663191,\"minY\":51.90659285955982,\"maxY\":51.90837993726379,\"null\":false},\"attributes\":null},{\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[4.451024578348936,51.90802322409213],[4.4510731140385635,51.90837993726379],[4.451151443765672,51.90836927943664],[4.45134827329938,51.90834249809545],[4.451623432560204,51.90830505892712],[4.451662597423758,51.908299730013546],[4.451898480826999,51.90826763482586],[4.452173529272039,51.90823021063024],[4.452173751081845,51.908230180590444],[4.452449200760288,51.90819305085868],[4.458280800408811,51.908249685280445],[4.458376377727125,51.90790260463243],[4.458407538868815,51.907273412681114],[4.4575292825596335,51.906456929455544],[4.455592151354418,51.905759362630626],[4.454409757105547,51.90609533651042],[4.451024578348936,51.90802322409213]]]},\"value\":180.0,\"area\":0.0,\"reachfactor\":0.0,\"envelope\":{\"area\":1.9347599056035178E-5,\"width\":0.007382960519878523,\"height\":0.0026205746331626756,\"minX\":4.451024578348936,\"maxX\":4.458407538868815,\"minY\":51.905759362630626,\"maxY\":51.90837993726379,\"null\":false},\"attributes\":null},{\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[4.449486388880505,51.90805545260402],[4.44972690997513,51.9084996477479],[4.44987654407368,51.90853401470138],[4.4510731140385635,51.90837993726379],[4.451151443765672,51.90836927943664],[4.45134827329938,51.90834249809545],[4.451623432560204,51.90830505892712],[4.451662597423758,51.908299730013546],[4.451898480826999,51.90826763482586],[4.452173529272039,51.90823021063024],[4.452173751081845,51.908230180590444],[4.452449200760288,51.90819305085868],[4.4581217354999145,51.90914364335647],[4.460481820492229,51.908495398212175],[4.4605942445806495,51.90823895122349],[4.460504252553331,51.90789038066389],[4.460163184773538,51.90704595250287],[4.459955673495416,51.9067434442896],[4.45853238113952,51.90555400903167],[4.456446645479353,51.904494662456365],[4.454240541994777,51.90479252527215],[4.450347877103292,51.90718637057438],[4.449502721220496,51.90792239313828],[4.449486388880505,51.90805545260402]]]},\"value\":300.0,\"area\":0.0,\"reachfactor\":0.0,\"envelope\":{\"area\":5.164020899112029E-5,\"width\":0.011107855700144498,\"height\":0.004648980900107347,\"minX\":4.449486388880505,\"maxX\":4.4605942445806495,\"minY\":51.904494662456365,\"maxY\":51.90914364335647,\"null\":false},\"attributes\":null}],\"center\":{\"x\":4.454881449222819,\"y\":51.90768356237342,\"z\":\"NaN\"},\"graphDate\":\"2022-06-14T20:18:08Z\",\"isochronesCount\":4,\"empty\":false},{\"travellerId\":1,\"envelope\":{\"area\":7.239853397805125E-5,\"width\":0.0112065060695965,\"height\":0.006460401977960828,\"minX\":4.451587182316174,\"maxX\":4.46279368838577,\"minY\":51.90606673809473,\"maxY\":51.91252714007269,\"null\":false},\"isochrones\":[{\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[4.456354409041377,51.908845767690195],[4.457352054273623,51.90969864152739],[4.457525333663606,51.90968350722293],[4.457820697995262,51.90965968070085],[4.458873709718202,51.90952286042797],[4.458969734825414,51.90917590340068],[4.457897523423166,51.90883433749223],[4.456446830567983,51.90849783341275],[4.456354409041377,51.908845767690195]]]},\"value\":60.0,\"area\":0.0,\"reachfactor\":0.0,\"envelope\":{\"area\":3.1405044238960316E-6,\"width\":0.0026153257840366706,\"height\":0.0012008081146390737,\"minX\":4.456354409041377,\"maxX\":4.458969734825414,\"minY\":51.90849783341275,\"maxY\":51.90969864152739,\"null\":false},\"attributes\":null},{\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[4.455364181864932,51.908459547278916],[4.455413238370791,51.90881618919911],[4.456386496273151,51.91011714567111],[4.4567089060703715,51.910277307847224],[4.457616046433412,51.910357919397605],[4.458739964297422,51.91022745097121],[4.459638361527551,51.90986461218726],[4.459869772426208,51.90958884236298],[4.458668560516022,51.90834838359582],[4.458371920039562,51.90814441196122],[4.455692293053645,51.90841441520795],[4.455364181864932,51.908459547278916]]]},\"value\":120.0,\"area\":0.0,\"reachfactor\":0.0,\"envelope\":{\"area\":9.973158212699902E-6,\"width\":0.004505590561275419,\"height\":0.002213507436387374,\"minX\":4.455364181864932,\"maxX\":4.459869772426208,\"minY\":51.90814441196122,\"maxY\":51.910357919397605,\"null\":false},\"attributes\":null},{\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[4.453906417520012,51.90865198239801],[4.453950774441259,51.909009239257344],[4.455821612639335,51.91117420362743],[4.456146378969219,51.9113295317671],[4.456282666145698,51.911318547367785],[4.460222750617584,51.910552008150425],[4.460230592961796,51.91054761697481],[4.46051342493939,51.910300951329795],[4.460528117054156,51.91002553419867],[4.459137619540246,51.90765345066127],[4.458836779171311,51.90745572592225],[4.453906417520012,51.90865198239801]]]},\"value\":180.0,\"area\":0.0,\"reachfactor\":0.0,\"envelope\":{\"area\":2.5651178358234813E-5,\"width\":0.006621699534143488,\"height\":0.0038738058448544166,\"minX\":4.453906417520012,\"maxX\":4.460528117054156,\"minY\":51.90745572592225,\"maxY\":51.9113295317671,\"null\":false},\"attributes\":null},{\"geometry\":{\"type\":\"Polygon\",\"coordinates\":[[[4.451587182316174,51.90904135066165],[4.451695358465443,51.90894913772867],[4.455783833556688,51.907398969054825],[4.457568129162082,51.90654958417742],[4.458114079606357,51.90640603957916],[4.459654778944662,51.90606673809473],[4.459970184446295,51.906103168246936],[4.460263264691063,51.90631222319217],[4.4627241622189215,51.9093429189493],[4.46279368838577,51.90969614141762],[4.46243649823668,51.91103023804289],[4.462336493473349,51.91137606899482],[4.460731570113792,51.91194131714611],[4.456540740756158,51.91252714007269],[4.455595176804303,51.91242382861165],[4.451635230275035,51.909398129856186],[4.451587182316174,51.90904135066165]]]},\"value\":300.0,\"area\":0.0,\"reachfactor\":0.0,\"envelope\":{\"area\":7.239853397805125E-5,\"width\":0.0112065060695965,\"height\":0.006460401977960828,\"minX\":4.451587182316174,\"maxX\":4.46279368838577,\"minY\":51.90606673809473,\"maxY\":51.91252714007269,\"null\":false},\"attributes\":null}],\"center\":{\"x\":4.457657694974035,\"y\":51.909007387888565,\"z\":\"NaN\"},\"graphDate\":\"2022-06-14T20:18:08Z\",\"isochronesCount\":4,\"empty\":false}],\"isochronesCount\":8},\"isochroneRequest\":{\"id\":null,\"travellers\":[{\"id\":\"0\",\"location\":{\"x\":4.454877,\"y\":51.907671,\"z\":\"NaN\"},\"locationType\":\"start\",\"ranges\":[60.0,120.0,180.0,300.0],\"rangeType\":\"TIME\",\"routeSearchParameters\":{\"profileType\":20,\"weightingMethod\":1,\"considerTurnRestrictions\":false,\"avoidAreas\":null,\"vehicleType\":0,\"bearings\":null,\"flexibleMode\":false,\"optimized\":true,\"extraInfo\":0,\"suppressWarnings\":false,\"avoidCountries\":null,\"avoidBorders\":\"NONE\",\"alternativeRoutesCount\":-1,\"alternativeRoutesWeightFactor\":1.4,\"alternativeRoutesShareFactor\":0.6,\"roundTripLength\":-1.0,\"roundTripPoints\":2,\"roundTripSeed\":-1,\"maximumSpeed\":0.0,\"options\":null,\"departure\":null,\"arrival\":null,\"avoidFeatureTypes\":0,\"maximumRadiuses\":null,\"profileParameters\":null,\"profileTypeDriving\":false,\"profileTypeHeavyVehicle\":false,\"timeDependent\":false},\"maximumRange\":300.0},{\"id\":\"1\",\"location\":{\"x\":4.457664232125704,\"y\":51.90899808235536,\"z\":\"NaN\"},\"locationType\":\"start\",\"ranges\":[60.0,120.0,180.0,300.0],\"rangeType\":\"TIME\",\"routeSearchParameters\":{\"profileType\":20,\"weightingMethod\":1,\"considerTurnRestrictions\":false,\"avoidAreas\":null,\"vehicleType\":0,\"bearings\":null,\"flexibleMode\":false,\"optimized\":true,\"extraInfo\":0,\"suppressWarnings\":false,\"avoidCountries\":null,\"avoidBorders\":\"NONE\",\"alternativeRoutesCount\":-1,\"alternativeRoutesWeightFactor\":1.4,\"alternativeRoutesShareFactor\":0.6,\"roundTripLength\":-1.0,\"roundTripPoints\":2,\"roundTripSeed\":-1,\"maximumSpeed\":0.0,\"options\":null,\"departure\":null,\"arrival\":null,\"avoidFeatureTypes\":0,\"maximumRadiuses\":null,\"profileParameters\":null,\"profileTypeDriving\":false,\"profileTypeHeavyVehicle\":false,\"timeDependent\":false},\"maximumRange\":300.0}],\"calcMethod\":\"fastisochrone\",\"units\":null,\"areaUnits\":null,\"includeIntersections\":false,\"attributes\":null,\"locations\":[{\"x\":4.454877,\"y\":51.907671,\"z\":\"NaN\"},{\"x\":4.457664232125704,\"y\":51.90899808235536,\"z\":\"NaN\"}],\"profilesForAllTravellers\":[\"foot-walking\"],\"weightingsForAllTravellers\":[\"fastest\"],\"valid\":true},\"locations\":[[4.454877,51.907671],[4.457664232125704,51.90899808235536]],\"range\":[60.0,120.0,180.0,300.0],\"range_type\":\"time\"},\"engine\":{\"version\":\"6.7.0\",\"build_date\":\"2022-06-14T19:30:42Z\",\"graph_date\":\"2022-06-14T20:18:08Z\"}}};\n\n  try {\n    const response = await fetch(url, Object.assign({}, getFetchOptions(), {\n      method: 'POST',\n      body: JSON.stringify(data)\n    }));\n    if (! didFetchSucceed(response)) {\n      console.log('Failed to get what I want, got status: ' + response.status);\n      return;\n    }\n    return await response.json();\n  } catch (e) {\n    console.log('A network error!', e);\n    return \"network error\";\n  }\n}\n","import { useRef, useEffect, useState, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport maplibregl from 'maplibre-gl';\nimport {\n  getIsochronesForFootWalking\n} from '../../api/isochrones';\n\nimport './IsochroneTools.css';\n\nconst addIsochronesToMap = (theMap, featureCollection) => {\n\n  if(! theMap) return;\n  if(! featureCollection) return;\n\n  // Check if the source exists\n  if(! theMap.getSource('zones-isochrones')) return;\n\n  // Set geoJson data\n  theMap.U.setData('zones-isochrones', featureCollection);\n\n  // Show layer\n  theMap.U.show('zones-isochrones')\n\n}\n\nconst addIsochronesForMarkers = async (theMap, locations) => {\n  // Get foot walking isochrones\n  const result = await getIsochronesForFootWalking(locations);\n  addIsochronesToMap(theMap, result)\n  return;\n}\n\nconst IsochroneTools = () => {\n\n  const [isochroneMarkers, setIsochroneMarkers] = useState([]);\n  const [counter, setCounter] = useState(0);\n\n  const dispatch = useDispatch();\n\n  const exportState = useSelector(state => {\n    return { filter: state.filter, layers: state.layers, ui:state.ui };\n  });\n\n  const isFilterbarOpen = exportState && exportState.ui && exportState.ui.FILTERBAR;\n\n  // Add isochrone marker\n  const addIsochroneMarker = (theMap) => {\n    if(! theMap) return;\n\n    // Get center of map\n    const {lng, lat} = theMap.getCenter();\n    var marker = new maplibregl.Marker({\n      draggable: true\n    })\n    .setLngLat([lng, lat])\n    .addTo(theMap);\n\n    // Add isochrones around the new marker\n    (() => {\n      let locations = [];\n      // Get all existing marker\n      isochroneMarkers.forEach(x => {\n        const lngLat = x.getLngLat();\n        locations.push([lngLat.lng, lngLat.lat]);\n      });\n      // Add last added marker\n      locations.push([lng, lat]);\n      // Add isochrones\n      addIsochronesForMarkers(theMap, locations)\n    })();\n\n    // On drag end: calculate isochrones and add these to the map\n    const onDragEnd = async () => {\n      let locations = [];\n      // Get every marker\n      isochroneMarkers.forEach(x => {\n        const lngLat = x.getLngLat();\n        locations.push([lngLat.lng, lngLat.lat]);\n      });\n      await addIsochronesForMarkers(theMap, locations)\n    }\n    marker.on('dragend', onDragEnd);\n\n    // Add isochrone marker to local state\n    isochroneMarkers.push(marker);\n    setIsochroneMarkers(isochroneMarkers);\n    // Force update state\n    setCounter(counter + 1);\n  }\n\n\n  // Remove isochrone marker\n  const removeIsochroneMarker = (theMap) => {\n    if(! isochroneMarkers) return;\n\n    // Remove it\n    isochroneMarkers.forEach(x => {\n      x.remove();\n    });\n\n    // Update state\n    setIsochroneMarkers([]);\n\n    // Hide isochrones layer\n    theMap.U.hide('zones-isochrones')\n  }\n\n  const isLoggedIn = useSelector(state => state.authentication.user_data ? true : false);\n\n  return (\n    <>\n\n      <div className={`IsochroneTools ${isFilterbarOpen ? 'filter-open' : ''} fixed bg-white`}>\n        {(! isochroneMarkers || isochroneMarkers.length <= 0) && <div\n          className=\"IsochroneTools-ctrl-group\">\n            <div \n            className=\"IsochroneTools-ctrl IsochroneTools-ctrl-start cursor-pointer flex justify-center flex-col text-center\"\n            onClick={() => {\n              addIsochroneMarker(window.ddMap)\n            }}\n            title=\"Voeg punt voor isochronenweergave toe\"\n          />\n        </div>}\n\n        {(isochroneMarkers && isochroneMarkers.length > 0) && <div className=\"IsochroneTools-ctrl-group\">\n          <div \n            className=\"IsochroneTools-ctrl IsochroneTools-ctrl-add cursor-pointer flex justify-center flex-col text-center\"\n            onClick={() => {addIsochroneMarker(window.ddMap)}}\n            title=\"Voeg nieuw punt toe\"\n          />\n          <div \n            className=\"IsochroneTools-ctrl IsochroneTools-ctrl-close cursor-pointer flex justify-center flex-col text-center\"\n            onClick={() => {removeIsochroneMarker(window.ddMap)}}\n            title=\"Stop isochronenweergave\"\n          />\n        </div>}\n\n        {(isochroneMarkers && isochroneMarkers.length > 0) && <div className=\"IsochroneTools-legend-container\">\n          <div className=\"IsochroneTools-legend flex\">\n            <div className=\"walker-icon\" />\n            <div className=\"IsochroneTools-legend-parts flex-1 flex justify-center\">\n              <div>1m</div>\n              <div>2m</div>\n              <div>3m</div>\n              <div>5m</div>\n            </div>\n          </div>\n        </div>}\n\n      </div>\n    </>\n  )\n}\n\nexport default IsochroneTools;\n","\nexport const themes = {\n  white: {\n    backgroundColor: '#fff',\n    borderColor: '#CCCCCC',\n    color: '#343E47'\n  },\n  red: {\n    backgroundColor: '#fff',\n    borderColor: '#CCCCCC',\n    color: '#ff0000'\n  },\n  green: {\n    backgroundColor: '#fff',\n    borderColor: '#CCCCCC',\n    color: 'darkgreen'\n  },\n  greenHighlighted: {\n    color: '#000',\n    backgroundColor: '#00ff008c',\n    borderColor: '#CCCCCC',\n  },\n  zone: {\n    monitoring: {\n      primaryColor: '#15AEEF',\n    },\n    stop: {\n      primaryColor: '#FD862E'\n    },\n    no_parking: {\n      primaryColor: '#FD3E48'\n    },\n    //\n    quiet: {\n      primaryColor: '#48E248',\n    },\n    moderate: {\n      primaryColor: '#FD862E'\n    },\n    busy: {\n      primaryColor: '#FD3E48'\n    }\n  }\n}\n","// Mapbox draw functionality\n// https://github.com/mapbox/mapbox-gl-draw\nimport MapboxDraw from \"@mapbox/mapbox-gl-draw\";\nimport maplibregl from 'maplibre-gl';\nimport '@mapbox/mapbox-gl-draw/dist/mapbox-gl-draw.css'\nimport StaticMode from '@mapbox/mapbox-gl-draw-static-mode'\nimport {themes} from '../../../themes';\nimport {getVehicleIconUrl} from '../../../helpers/vehicleTypes';\nimport {useLocation, useRouteMatch} from \"react-router-dom\";\nimport center from '@turf/center'\n\n// import {getMapboxDrawLayers} from './layers.js'\n\n// Don't allow moving features, only allow changing bounds\n// Repo: https://github.com/zakjan/mapbox-gl-draw-waypoint\nimport * as MapboxDrawWaypoint from 'mapbox-gl-draw-waypoint';\n\n// Import API functions\nimport {\n  getAdminZones,\n  getPublicZones\n} from '../../../api/zones';\n\nconst setPublicZoneUrl   = (geographyId) => {\n  if(! geographyId) return;\n  const stateObj = { geography_id: geographyId };\n  window.history.pushState(stateObj, 'Zone details', `/map/zones/${geographyId}`);\n}\n\nconst setAdminZoneUrl   = (geographyId) => {\n  if(! geographyId) return;\n  const stateObj = { geography_id: geographyId };\n  window.history.pushState(stateObj, 'Zone edit', `/admin/zones/${geographyId}`);\n}\n\nconst getNumPlacesAvailable = (stop) => {\n  if(! stop) return;\n  const realtimeData = stop.realtime_data;\n  if(! realtimeData) return;\n  if(! realtimeData.num_places_available) return;\n\n  // If it's a combined capacity: return this capacity\n  if(stop.capacity && stop.capacity.combined) {\n    return stop.capacity.combined;\n  }\n\n  let total = 0;\n  Object.keys(stop.capacity).forEach(key => {\n    total += parseInt(stop.capacity[key]);\n  });\n\n  return total;\n}\n\nconst getNumVehiclesAvailable = (realtimeData) => {\n  if(! realtimeData) return;\n  if(! realtimeData.num_vehicles_available) return;\n\n  let total = 0;\n  Object.keys(realtimeData.num_vehicles_available).forEach(key => {\n    total += parseInt(realtimeData.num_vehicles_available[key]);\n  });\n\n  return total;\n}\n\nconst getIndicatorColor = (parked, capacity) => {\n  const pct = parseInt(parked/capacity*100);\n\n  if(isNaN(pct)) {\n    return 'transparent';\n  }\n  return calculateGradient(parked, capacity);\n}\n\nconst generatePopupHtml = (feature) => {\n  if(! feature || ! feature.layer) return '<div />';\n  if(! feature.properties) return '<div />';\n  if(! feature.properties.stop) return '<div />';\n  const stop = JSON.parse(feature.properties.stop);\n  if(! stop) return `\n    <div class=\"font-inter\" style=\"min-width:180px\">\n      <div class=\"text-lg font-bold\">\n        ${feature.properties.name}\n      </div>\n    </div>\n  `;\n  if(! stop.realtime_data) return '<div>:)</div>';// Realtime data not yet loaded\n\n  const isControlledAutomatically = stop.status.control_automatic === true;\n  const isManuallySetToOpen = ! isControlledAutomatically && stop.status.is_returning === true;\n  const isManuallySetToClosed = ! isControlledAutomatically && stop.status.is_returning === false;\n\n  const getCapacityForModality = (capacity, modality) => {\n    // Return nothing if no stop capacity was found\n    if(! capacity || capacity.length === 0) return;\n    // If it's a modality specific value: return value\n    if(capacity[modality]) return capacity[modality];\n    // If it's a combined value: return combined\n    return capacity.combined;\n  }\n\n  const getAvailableForModality = (num_places_available, modality) => {\n    // Return nothing if no stop capacity was found\n    if(! num_places_available) return;\n    if(! modality) return;\n\n    if(num_places_available[modality]) return num_places_available[modality];\n  }\n\n  const getParkedVehiclesForModality = (num_vehicles_available, modality) => {\n    // Return nothing if no stop capacity was found\n    if(! num_vehicles_available || num_vehicles_available.length === 0) return;\n    // If it's a modality specific value: return value\n    if(num_vehicles_available[modality]) return num_vehicles_available[modality];\n  }\n\n  const modalityNameToModalityTitle = (modalityName) => {\n    if(modalityName === 'moped') return 'scooters';\n    if(modalityName === 'bicycle') return 'fietsen';\n    if(modalityName === 'cargo_bicycle') return 'bakfietsen';\n    if(modalityName === 'car') return 'auto\\'s';\n    if(modalityName === 'other') return 'overige voertuigen';\n  }\n\n  const renderModalityRows = (stop) => {\n    if(! stop) return;\n\n    // Loop modalities\n    let html = '';\n    Object.keys(stop.realtime_data.num_places_available).forEach(modalityName => {\n      const parkedVehiclesForModality = getParkedVehiclesForModality(stop.realtime_data.num_vehicles_available, modalityName);\n      const capacityForModality = getCapacityForModality(stop.capacity, modalityName);\n      const availableForModality = getAvailableForModality(stop.realtime_data.num_places_available, modalityName);\n      // Don't show row if no relevant data is available\n      if(! parkedVehiclesForModality && ! capacityForModality) return;\n\n      const getDotColor = () => {\n        if(availableForModality > 0) {\n          return themes.zone.quiet.primaryColor;\n        } else {\n          return themes.zone.busy.primaryColor;\n        }\n      }\n\n      return html += `<div class=\"flex my-1\" style=\"min-width:180px\">\n        <div class=\"mr-2 flex justify-center flex-col\">\n          <div\n            class=\"rounded-full w-3 h-3\" style=\"background: ${getDotColor()}\"\n            title=\"${availableForModality > 0 ? `Open voor` : `Gesloten voor`} ${modalityNameToModalityTitle(modalityName)}\"\n          ></div>\n        </div>\n        <div class=\"mr-4 w-5\">\n          <img class=\"inline-block w-5\" src=\"${getVehicleIconUrl(modalityName)}\" alt=\"${modalityName}\" style=\"max-width:none;\" />\n        </div>\n        <div class=\"mr-2 flex justify-center flex-col\">\n          ${parkedVehiclesForModality\n              ? parkedVehiclesForModality\n              : '0'\n            }${stop.capacity && stop.capacity.combined\n            ? ''\n            : capacityForModality ? `/${capacityForModality}` : ''\n          }\n        </div>\n      </div>`\n    });\n\n    return html;\n  }\n\n  const renderParkedVehicles = (modality) => {\n    return `<div>\n      check: 14<br />\n      felyx: 13<br />\n      gosharing: 8<br />\n    </div>`\n  }\n\n  const renderVisualIndicator = (numVehicles, numPlaces) => {\n    if(! numVehicles) return '<div />';\n    if(! numPlaces) return '<div />';\n\n    // Calculate percentage\n    const percentageOfVehiclesAvailable = parseInt(numVehicles/numPlaces*100);\n\n    return `<div class=\"rounded-xl flex\" style=\"background: #F6F5F4\">\n      <div class=\"rounded-l-xl font-bold py-1 px-2\" style=\"background-color: ${getIndicatorColor(numVehicles, numPlaces)};min-width: ${percentageOfVehiclesAvailable > 100 ? 100 : percentageOfVehiclesAvailable}%\">\n        ${percentageOfVehiclesAvailable > 100 ? 100 : percentageOfVehiclesAvailable}%\n      </div>\n      <div class=\"flex-1\" />\n    </div>`\n  }\n\n  // num_places_available is het aantal beschikbare plkken\n  const numPlacesAvailable = getNumPlacesAvailable(stop)\n  // num_vehicles_available = Hoeveel voertuigen staan in dat gebied geparkeerd\n  const numVehiclesAvailable = getNumVehiclesAvailable(stop.realtime_data)\n  // Percentage\n  const percentageOfVehiclesAvailable = numVehiclesAvailable/numPlacesAvailable*100;\n\n  return `\n    <div class=\"font-inter\">\n      <div class=\"text-lg font-bold\">\n        ${feature.properties.name}\n      </div>\n      <div class=\"mt-2 text-sm font-bold\" ${isControlledAutomatically ? 'hidden' : ''} style=\"color:#15aeef;\">\n        Instelling actief: <b>altijd ${isManuallySetToOpen ? 'open' : 'gesloten'}</b>\n      </div>\n      <div class=\"mt-2 text-sm font-bold\" ${(! numPlacesAvailable || isNaN(percentageOfVehiclesAvailable)) ? 'hidden' : ''}>\n        Bezetting: ${numVehiclesAvailable}${isControlledAutomatically ? `/${numPlacesAvailable}` : ''}\n      </div>\n      <div class=\"mt-2 text-sm bg-green\" ${(! numPlacesAvailable || isNaN(percentageOfVehiclesAvailable)) ? 'hidden' : ''}>\n        ${renderVisualIndicator(numVehiclesAvailable, numPlacesAvailable)}\n      </div>\n      <div class=\"mt-4 text-sm\">\n        ${renderModalityRows(stop)}\n      </div>\n      <div class=\"mt-2 text-base\" hidden>\n        Scooter aanbieders:\n      </div>\n      <div hidden>\n        ${renderParkedVehicles()}\n      </div>\n      <div class=\"mt-2 text-base\" hidden>\n        Andere aanbieders:\n      </div>\n      <div class=\"text-xs\" hidden>\n        (tellen niet mee voor capaciteit)\n      </div>\n      <div hidden>\n        donkey: 25<br />\n        htm: 4\n      </div>\n    </div>\n  `\n}\n\nconst initZonesMap = async (theMap, token, filterGebied) => {\n  if(! theMap) return;\n\n  const publicZones = token ? await fetchAdminZones(token, filterGebied) : await fetchPublicZones();\n  if(! publicZones) return;\n\n  let geoJson = {\n    \"type\":\"FeatureCollection\",\n    \"features\":[]\n  };\n\n  publicZones.forEach(x => {\n    geoJson.features.push(zoneToGeoJson(x));\n  });\n\n  // Check if the source exists\n  if(! theMap.getSource('zones-metrics-public')) return;\n\n  // Set geoJson data\n  theMap.U.setData('zones-metrics-public', geoJson);\n\n  // Show layer\n  theMap.U.show('zones-metrics-public')\n\n  // Define map click handler\n  theMap.on('click', 'zones-metrics-public', function (e) {\n    // Don't show popup if it's a no_parking zone\n    if(e && e.features && e.features[0]\n         && e.features[0].properties && e.features[0].properties.geography_type\n         && e.features[0].properties.geography_type === 'no_parking')\n    {\n      return;\n    }\n\n    // Add map popup\n    new maplibregl.Popup()\n      .setLngLat(e.lngLat)\n      .setHTML(generatePopupHtml(e.features[0]))\n      .addTo(theMap);\n\n    // Set page URL without reloading page\n    const geographyId = e.features[0].properties.geography_id;\n    setPublicZoneUrl(geographyId);\n  });\n\n  // Change the cursor to a pointer when the mouse is over the states layer.\n  theMap.on('mouseenter', 'zones-metrics-public', function () {\n    theMap.getCanvas().style.cursor = 'pointer';\n  });\n\n  // Change it back to a pointer when it leaves.\n  theMap.on('mouseleave', 'zones-metrics-public', function () {\n    theMap.getCanvas().style.cursor = '';\n  });\n}\n\nconst initMapDrawLogic = (theMap) => {\n  if(! theMap) return;\n\n  // Don't init multiple times\n  if(window.CROW_DD && window.CROW_DD.theDraw) return;\n\n  // Set admin or public view if isAdminMode changed\n  initAdminView(theMap)\n}\n\nconst initAdminView = (theMap) => {\n  // Add custom draw mode: 'StaticMode'\n  // https://github.com/mapbox/mapbox-gl-draw-static-mode\n  let modes = MapboxDraw.modes;\n  modes = MapboxDrawWaypoint.enable(modes);// Di`sable moving features\n  modes.static = StaticMode;\n\n  const publicStyles = [\n    // Polygon fill\n    {\n      'id': 'gl-draw-polygon-fill',\n      'type': 'fill',\n      'filter': [\n        'all',\n        // ['==', 'active', 'false'],\n        ['==', '$type', 'Polygon'],\n        ['!=', 'mode', 'static']\n      ],\n      'paint': {\n        'fill-color': [\n          // Matching based on user property: https://stackoverflow.com/a/70721495\n          'match', ['get', 'user_geography_type'], // get the property\n          'stop', themes.zone.stop.primaryColor,\n          'no_parking', themes.zone.no_parking.primaryColor,\n          'monitoring', themes.zone.monitoring.primaryColor,\n          themes.zone.monitoring.primaryColor\n         ],\n        'fill-outline-color': '#3bb2d0',\n        'fill-opacity': [\n          // Matching based on user property: https://stackoverflow.com/a/70721495\n          'match', ['get', 'user_geography_type'], // get the property\n          'no_parking', 0.2,\n          'monitoring', 0.3,\n          'stop', 0.8,\n          0.5\n        ]\n      }\n    }\n  ];\n\n  const adminStyles = [\n    // Polygon outline stroke\n    // This doesn't style the first edge of the polygon, which uses the line stroke styling instead\n    {\n      'id': 'gl-draw-polygon-stroke-active',\n      'type': 'line',\n      \"layout\": {\n        \"line-cap\": \"round\",\n        \"line-join\": \"round\"\n      },\n      'filter': [\n        'all',\n        ['==', '$type', 'Polygon'],\n        ['!=', 'active', 'false']\n      ],\n      \"paint\": {\n        \"line-color\": [\n          // Matching based on user property: https://stackoverflow.com/a/70721495\n          'match', ['get', 'user_geography_type'], // get the property\n          'stop', themes.zone.stop.primaryColor,\n          'no_parking', themes.zone.no_parking.primaryColor,\n          'monitoring', themes.zone.monitoring.primaryColor,\n          \"#D20C0C\"\n         ],\n        \"line-dasharray\": [0.2, 2],\n        \"line-width\": 3\n      }\n    },\n    // Vertex points\n    {\n      \"id\": \"gl-draw-polygon-and-line-vertex-active\",\n      \"type\": \"circle\",\n      \"filter\": [\n        \"all\",\n        [\"==\", \"meta\", \"vertex\"],\n        [\"!=\", 'meta', 'midpoint'],\n        [\"==\", \"$type\", \"Point\"],\n        [\"!=\", \"mode\", \"static\"]\n      ],\n      \"paint\": {\n        \"circle-radius\": 4,\n        \"circle-color\": [\n          // Matching based on user property: https://stackoverflow.com/a/70721495\n          'match', ['get', 'user_geography_type'], // get the property\n          'stop', themes.zone.stop.primaryColor,\n          'no_parking', themes.zone.no_parking.primaryColor,\n          'monitoring', themes.zone.monitoring.primaryColor,\n          \"#D20C0C\"\n        ]\n      }\n    },\n    // Midpoints points\n    {\n      \"id\": \"gl-draw-polygon-and-line-midpoint-active\",\n      \"type\": \"circle\",\n      \"filter\": [\n        \"all\",\n        [\"==\", 'meta', 'midpoint'],\n        [\"==\", \"$type\", \"Point\"],\n        [\"!=\", \"mode\", \"static\"]\n      ],\n      \"paint\": {\n        \"circle-radius\": 3,\n        \"circle-color\": [\n          // Matching based on user property: https://stackoverflow.com/a/70721495\n          'match', ['get', 'user_geography_type'], // get the property\n          'stop', themes.zone.stop.primaryColor,\n          'no_parking', themes.zone.no_parking.primaryColor,\n          'monitoring', themes.zone.monitoring.primaryColor,\n          \"#D20C0C\"\n        ]\n      },\n      'circle-opacity': 0.5\n    }\n  ];\n\n  const draw = new MapboxDraw({\n    displayControlsDefault: false,\n    modes: modes,\n    // Custom styles https://stackoverflow.com/a/51305508\n    userProperties: true,\n    styles: [...publicStyles, ...adminStyles]\n  });\n\n  // for more details: https://docs.mapbox.com/mapbox-gl-js/api/#map#addcontrol\n  theMap.addControl(draw, 'top-left');\n  // Set Draw to window, for easily making global changes\n  if(window.CROW_DD) {\n    window.CROW_DD.theDraw = draw;\n  } else {\n    window.CROW_DD = {theDraw: draw}\n  }\n  // Select area to edit it\n  initSelectToEdit(theMap);\n}\n\nexport const addAdminZonesToMap = async (token, filter) => {\n  if(! window.CROW_DD) return;\n\n  // Get admin zones\n  let zones = await getAdminZones(token, filter);\n  if(Object.keys(zones).length <= 0) {\n    return;\n  }\n\n  // Layer/sort zones per geography_type (monitoring/stop/no_parking)\n  const groupedZones = groupZonesPerGeographyType(zones)\n\n  groupedZones.forEach((groupZones) => {\n    let featuresInThisGroup = [];\n    groupZones.forEach(x => {\n      const zone = x;\n      featuresInThisGroup.push({\n        type: 'Feature',\n        properties: {\n          geography_type: zone.geography_type\n        },\n        id: zone.zone_id,\n        geometry: zone.area.geometry\n      })\n    });\n    // Now add feature collection/group\n    window.CROW_DD.theDraw.add({\n      type: 'FeatureCollection',\n      features: featuresInThisGroup\n    });\n  })\n}\n\nexport const addPublicZonesToMap = async (token, filter) => {\n  if(! window.CROW_DD) return;\n\n  // Get public zones\n  let zones = await getPublicZones(token, filter);\n  if(Object.keys(zones).length <= 0) {\n    return;\n  }\n\n  // Layer/sort zones per geography_type (monitoring/stop/no_parking)\n  const groupedZones = groupZonesPerGeographyType(zones)\n\n  groupedZones.forEach((groupZones) => {\n    let featuresInThisGroup = [];\n    groupZones.forEach(x => {\n      const zone = x;\n      featuresInThisGroup.push({\n        type: 'Feature',\n        properties: {\n          geography_type: zone.geography_type\n        },\n        id: zone.zone_id,\n        geometry: zone.area.geometry\n      })\n    });\n    // Now add feature collection/group\n    window.CROW_DD.theDraw.add({\n      type: 'FeatureCollection',\n      features: featuresInThisGroup\n    });\n  })\n}\n\nconst initSelectToEdit = (theMap) => {\n  if(! theMap) return;\n\n  const onSelectionChange = (e) => {\n    if(! e) return;\n    // Check if only one feature was selected\n    const didSelectOneFeature = e.features && e.features.length === 1;\n    if(! didSelectOneFeature) return;\n    // Get zoneId\n    const zoneId = e.features[0].id;\n    // Trigger setSelectedZone custom event (see FilterbarZones.tsx)\n    const event = new CustomEvent('setSelectedZone', {\n      detail: zoneId\n    });\n    window.dispatchEvent(event);\n  }\n  theMap.on('draw.selectionchange', onSelectionChange);\n}\n\nconst getZoneById = (zones, id) => {\n  if(! zones || ! id) return;\n\n  const filteredZones = zones.filter((x) => {\n    return x.zone_id === id;\n  })\n  if(filteredZones && filteredZones[0]) {\n    return filteredZones[0];\n  }\n  return {};\n}\n\nconst sortZonesInPreferedOrder = (zones) => {\n  const groupedZones = groupZonesPerGeographyType(zones);\n  let groupedZonesToReturn = [];\n  groupedZones[0].forEach(x => {\n    groupedZonesToReturn.push(x);\n  })\n  groupedZones[1].forEach(x => {\n    groupedZonesToReturn.push(x);\n  })\n  groupedZones[2].forEach(x => {\n    groupedZonesToReturn.push(x);\n  })\n  return groupedZonesToReturn;\n}\n\nconst groupZonesPerGeographyType = (zones) => {\n  const groupedZones = [\n    // First, get all 'monitoring' zones\n    zones.filter(x => x.geography_type === 'monitoring'),\n    // Next, get all 'no_parking' zones\n    zones.filter(x => x.geography_type === 'no_parking'),\n    // Next, get all 'stop' zones\n    zones.filter(x => x.geography_type === 'stop'),\n  ]\n  return groupedZones;\n}\n\nconst getLocalDrawsOnly = (draws) => {\n  // If id is a string and not int, it is generated by mapbox-gl-draw\n  let localDraws = [];\n  draws.map(x => {\n    if(x.id &&\n        // If ID is a string, it's a non-saved, drawed polygon\n        typeof x.id === 'string' &&\n        // If geometry.coordinates[0] is not set, no polygon is drawed yet\n        x.geometry && x.geometry.coordinates && x.geometry.coordinates[0] && x.geometry.coordinates[0].length > 2\n    ) {\n      localDraws.push(x);\n    }\n  });\n  return localDraws;\n}\n\nconst getDraftFeatureId = () => {\n  const allDraws = window.CROW_DD.theDraw.getAll();\n  const localDraws = getLocalDrawsOnly(allDraws.features);\n  if(localDraws && localDraws.length === 1 && localDraws[0].id) {\n    return localDraws[0].id;\n  }\n  return false;\n}\n\nconst fetchAdminZones = async (token, filterGebied) => {\n  if(! token) return;\n  if(! filterGebied) return;\n\n  const filter = {municipality: filterGebied}\n  const zonesFromDb = await getAdminZones(token, filter);\n  if(! zonesFromDb || zonesFromDb.message) return;\n  let sortedZones = zonesFromDb.sort((a,b) => a.name.localeCompare(b.name));\n  sortedZones = sortZonesInPreferedOrder(sortedZones)// Sort per geography_type\n  return sortedZones;\n}\n\nconst fetchPublicZones = async (filterGebied) => {\n  const filter = filterGebied ? {municipality: filterGebied} : {}\n  const zonesFromDb = await getPublicZones(filter);\n  if(! zonesFromDb || zonesFromDb.message) return;\n  let sortedZones = zonesFromDb.sort((a,b) => a.name.localeCompare(b.name));\n  sortedZones = sortZonesInPreferedOrder(sortedZones)// Sort per geography_type\n  return sortedZones;\n}\n\n// Color between green and red\nconst perc2color = (perc) => {\n  var perc = 100 - perc;\n  var r, g, b = 0;\n  if(perc < 50) {\n    r = 255;\n    g = Math.round(5.1 * perc);\n  }\n  else {\n    g = 255;\n    r = Math.round(510 - 5.10 * perc);\n  }\n  var h = r * 0x10000 + g * 0x100 + b * 0x1;\n  return '#' + ('000000' + h.toString(16)).slice(-6);\n}\n\nconst calculateGradient = (number_of_vehicles, capacity) => {\n  var ratio = Math.min(100.0, number_of_vehicles / capacity * 100);\n  return perc2color(ratio);\n}\n\nconst zoneToGeoJson = (adminZone) => {\n  if(! adminZone) return;\n  if(! adminZone.area || ! adminZone.area.geometry || ! adminZone.area.geometry.coordinates) return;\n\n  const getColor = (stop) => {\n    if(! stop) return 'transparent';\n\n    const numPlacesAvailable = getNumPlacesAvailable(stop)\n    const numVehiclesAvailable = getNumVehiclesAvailable(stop.realtime_data)\n\n    return calculateGradient(numVehiclesAvailable, numPlacesAvailable)\n  }\n\n  const getBorderColor = (geography_type) => {\n    if(! themes) return;\n    if(! themes.zone) return;\n    if(! themes.zone[geography_type]) return;\n    return themes.zone[geography_type].primaryColor;\n  }\n\n  return {\n    'id': adminZone.zone_id,\n    'type': 'Feature',\n    'properties': {\n      zone_id: adminZone.zone_id,\n      geography_id: adminZone.geography_id,\n      geography_type: adminZone.geography_type,\n      name: adminZone.name,\n      stop: JSON.stringify(adminZone.stop),\n      color: getColor(adminZone.stop),\n      borderColor: getBorderColor(adminZone.geography_type),\n      opacity: adminZone.geography_type === 'stop' ? 0.6 : 0.1\n    },\n    'geometry': adminZone.area.geometry\n  }\n}\n\nconst triggerGeographyClick = (geographyId, allZones) => {\n  if(! window.CROW_DD) return;\n  if(! window.CROW_DD.theDraw) return;\n  if(! geographyId) return;\n  if(! allZones) return;\n\n  const zone = allZones.filter(x => {\n    return x.geography_id === geographyId\n  });\n\n  const foundZone = zone && zone[0] ? zone[0] : false;\n  if(! foundZone) return;\n\n  // Check if feature exists\n  const feature = window.CROW_DD.theDraw.get(foundZone.zone_id);\n  // If it exists: select it\n  if(feature) {\n    window.CROW_DD.theDraw.changeMode('direct_select', {\n      featureId: foundZone.zone_id\n    });\n  }\n}\n\nconst openPopup = (theMap, foundZone) => {\n  // https://stackoverflow.com/a/57533307\n  // https://maplibre.org/maplibre-gl-js-docs/api/geography/#lnglat\n  const location = center(foundZone.area);\n  theMap.fire('click', {\n    lngLat: new maplibregl.LngLat(location.geometry.coordinates[0], location.geometry.coordinates[1])\n  });\n  // TODO Make sure the correct layer is clicked on (i.e. monitoring, not no-parking)\n  //      Info: https://github.com/mapbox/mapbox-gl-js/issues/9875\n}\n\nconst navigateToGeography = (geographyId, allZones) => {\n  if(! geographyId) {\n    console.log('navigateToGeography :: No geographyId given');\n    return;\n  }\n  if(! allZones) {\n    console.log('navigateToGeography :: No allZones given');\n    return;\n  }\n\n  const zone = allZones.filter(x => {\n    return x.geography_id === geographyId\n  });\n\n  const foundZone = zone && zone[0] ? zone[0] : false;\n  if(! foundZone) {\n    console.log('navigateToGeography :: Zone not found :: Was searching for x.geography_id === geographyId', allZones, geographyId)\n    return;\n  }\n\n  const st = require('geojson-bounds');\n\n  // Navigate to zone / Zoom in into zone\n  if(foundZone.area && foundZone.area.geometry && foundZone.area.geometry.coordinates && foundZone.area.geometry.coordinates[0]) {\n    if(! window.ddMap) return;\n    // Get extent\n    const extent = st.extent(foundZone.area)\n    // Delay it a little bit, so it comes after the\n    // 'zoom in to extent' on filterGebied change/load\n    setTimeout(x => {\n      window.ddMap.fitBounds(extent, {\n        padding: {\n          top: 25,\n          bottom: 25,\n          left: window.innerWidth > 800 ? 350 : 25,\n          right: 25\n        },\n        duration: 1.4*1000 // in ms\n      });\n      // Open popup for this polygon automatically\n      setTimeout(() => {\n        openPopup(window.ddMap, foundZone);\n      }, 1500);\n    }, 100);\n  }\n\n  return true;\n}\n\nexport {\n  initMapDrawLogic,\n  getAdminZones,\n  getPublicZones,\n  initSelectToEdit,\n  getZoneById,\n  sortZonesInPreferedOrder,\n  getLocalDrawsOnly,\n  getDraftFeatureId,\n  initZonesMap,\n  fetchAdminZones,\n  fetchPublicZones,\n  setPublicZoneUrl,\n  setAdminZoneUrl,\n  openPopup,\n  navigateToGeography,\n  triggerGeographyClick,\n  getIndicatorColor,\n  getNumVehiclesAvailable,\n  getNumPlacesAvailable\n}\n","import moment from 'moment-timezone';\nimport {archivedProviders} from '../providers.js';\n\nimport {\n  getAggregatedChartData,\n  getAggregatedVehicleData\n} from './parking-data';\n\nimport {\n  getZoneById,\n} from '../../components/Map/MapUtils/zones.js';\n\nexport const getDateFormat = (aggregationLevel) => {\n  if(aggregationLevel === '5m') {\n    return 'DD/MM HH:mm';\n  }\n  if(aggregationLevel === '15m') {\n    return 'DD/MM HH:mm';\n  }\n  else if(aggregationLevel === 'hour') {\n    return 'DD/MM HH:ss';\n  }\n  else if(aggregationLevel === 'day') {\n    return 'dd DD MMM YYYY';\n  }\n  else if(aggregationLevel === 'week') {\n    return '[w]W, YYYY';\n  }\n  else if(aggregationLevel === 'month') {\n    return 'MMM YYYY';\n  }\n}\n\nconst didSelectAtLeastOneCustomZone = (filter, zones) => {\n  let userDidSelectCustomZone = false;\n  if(zones && filter.zones && filter.zones.split(',').length > 0) {\n    // Get first zone from selected zones\n    const foundZone = getZoneById(zones, Math.abs(filter.zones.split(',')[0]));\n    if(foundZone && foundZone.zone_type === 'custom') {\n      userDidSelectCustomZone = true;\n    }\n  }\n  return userDidSelectCustomZone;\n}\n\n// We show detailled aggregated data if:\n// - Date is >= 2022-11\n// - At least 1 zone is selected\nconst doShowDetailledAggregatedData = (filter, zones) => {\n  // Get zone info from database\n  const userDidSelectCustomZone = didSelectAtLeastOneCustomZone(filter, zones);\n  // Return\n  return moment(filter.ontwikkelingvan).unix() >= moment('2022-11-01 00:00').unix()\n         && userDidSelectCustomZone;\n}\n\nconst prepareAggregatedStatsData = (key, data, aggregationLevel, aanbiedersexclude='') => {\n  // Validate data object\n  if(! data || ! data[`${key}_aggregated_stats`] || ! data[`${key}_aggregated_stats`].values) {\n    return [];\n  }\n  // Exclude some providers from the result\n  const providersToRemoveFromData = archivedProviders;\n  // Map data\n  return data[`${key}_aggregated_stats`].values.map(x => {\n    const { start_interval, ...rest } = x;\n    let item = {...rest, ...{ name: start_interval }}// https://dmitripavlutin.com/remove-object-property-javascript/#2-object-destructuring-with-rest-syntax\n    if(aanbiedersexclude !== '') {\n      const exclude = aanbiedersexclude.split(',')\n      Object.keys(item).forEach(key=>{if(exclude.includes(key)) {delete item[key]}});\n    }\n    if(providersToRemoveFromData && providersToRemoveFromData.length > 0) {\n      const exclude = providersToRemoveFromData;\n      Object.keys(item).forEach(key=>{if(exclude.includes(key)) {delete item[key]}});\n    }\n    return item;\n  });\n}\n\nconst prepareAggregatedStatsData_timescaleDB = (key, data, aggregationLevel, aanbiedersexclude='') => {\n  // Validate data object\n  if(! data || ! data[`availability_stats`] || ! data[`availability_stats`].values) {\n    return [];\n  }\n  // Exclude some providers from the result\n  const providersToRemoveFromData = archivedProviders;\n  // Map data\n  const dateFormat = getDateFormat(aggregationLevel);\n  return data[`availability_stats`].values.map(x => {\n    const { time, ...rest } = x;\n    let item = {...rest, ...{ time: moment.tz(time.replace('Z', ''), 'Europe/Amsterdam').format('YYYY-MM-DD HH:mm:ss') }}// https://dmitripavlutin.com/remove-object-property-javascript/#2-object-destructuring-with-rest-syntax\n    // Remove providers that are not selected\n    if(aanbiedersexclude !== '') {\n      const exclude = aanbiedersexclude.split(',')\n      Object.keys(item).forEach(key=>{if(exclude.includes(key)) {delete item[key]}});\n    }\n    // Remove archived providers that are not in the UI anymore\n    if(providersToRemoveFromData && providersToRemoveFromData.length > 0) {\n      const exclude = providersToRemoveFromData;\n      Object.keys(item).forEach(key=>{if(exclude.includes(key)) {delete item[key]}});\n    }\n    return item;\n  });\n}\n\nconst sumAggregatedStats = (data) => {\n  return data.map(x => {\n    // Sum all values\n    let total = 0;\n    Object.keys(x).forEach(key => {\n      if(key !== 'name') {\n        total += parseInt(x[key]);\n      }\n    });\n    // Return total\n    return {\n      name: x.name,\n      total: total\n    }\n  });\n}\n\nexport const aggregationFunctionButtonsToRender = [\n  {name: 'MIN', title: 'min'},\n  {name: 'AVG', title: 'gemiddeld'},\n  {name: 'MAX', title: 'max'},\n];\n\nexport const prepareDataForCsv = (data: any) => {\n  if(! data || data.length <= 0) return;\n  if(  typeof data !== 'object') return;\n\n  let csvRows = [];\n\n  // Get headers\n  const headers = Object.keys(data[0])\n  csvRows.push(headers.join(','));\n\n  // Loop over the rows\n  for (const row of data) {\n    const values = headers.map(header => {\n      let value = row[header];\n\n      // If this is the name (date) field: convert it to YYYY-MM-DD\n      if(header === 'name') {\n        value = moment(row[header]).format('YYYY-MM-DD');\n      }\n      // Escape it: Replace \" with \\\"\n      value = (''+value).replace(/\"/g, '\\\\\"');\n      // Return\n      return `\"${value}\"`;\n    });\n    csvRows.push(values.join(','));\n  };\n\n  csvRows = csvRows.join(\"\\n\");\n\n  return csvRows;\n}\n\nexport const downloadCsv = (data: any, filename?: string) => {\n  // Create blob\n  const blob = new Blob([data], { type: 'text/csv' });\n  // Send blog to the browser\n  const url = window.URL.createObjectURL(blob);\n  // Create an a-tag\n  const a = document.createElement('a');\n  a.setAttribute('hidden', '');\n  a.setAttribute('href', url);\n  a.setAttribute('download', filename ? filename : 'download.csv');\n  document.body.appendChild(a);\n  // Click it\n  a.click();\n  // Remove it\n  document.body.removeChild(a);\n\n  return;\n}\n\nexport {\n  prepareAggregatedStatsData,\n  prepareAggregatedStatsData_timescaleDB,\n  doShowDetailledAggregatedData,\n  didSelectAtLeastOneCustomZone,\n  sumAggregatedStats,\n  getAggregatedVehicleData,\n  getAggregatedChartData\n}\n","\nimport moment from 'moment';\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER,\n} from '../reducers/layers.js';\n\nexport const vehiclesAbortController = new AbortController();\n\nexport const createFilterparameters = (displayMode, filter, metadata, options) => {\n  const isParkingData=displayMode===DISPLAYMODE_PARK;\n  const isRentalData=displayMode===DISPLAYMODE_RENTALS;\n  const isOntwikkelingData=displayMode===DISPLAYMODE_OTHER;\n  \n  options = options || {\n    includeOperators: false\n  }\n\n  // ADD ZONES\n  let filterparams = [];\n  // If zones are explicity asked: add these to the request query\n  if(filter.zones!==\"\") {\n    filterparams.push(\"zone_ids=\"+filter.zones);\n  }\n  // If a place is selected, get all zones for this place\n  else if(filter.gebied!==\"\") {\n    // create zone filter\n    let candidates = [];\n    let municipality = metadata.gebieden.find(gebied => gebied.gm_code===filter.gebied);\n    if(undefined!==municipality) {\n      candidates = metadata.zones.filter(zone => {\n        return zone.municipality===municipality.gm_code&&zone.name===municipality.name && zone.zone_type!=='custom'\n      });\n    } else {\n    }\n    if(candidates.length===1) {\n      filterparams.push(\"zone_ids=\"+candidates[0].zone_id);\n    } else {\n      // console.error(\"zero or multiple multiple zones found for a single municipality (%s)\", filter.gebied, candidates);\n    }\n  }\n  // If no place is set: Get NL data (NL 'zone')\n  // Only providers and admins are allowed to see this info\n  else {\n    filterparams.push(\"zone_ids=51233\");\n  }\n\n  if(options.includeOperators === true) {\n    // Add provider filter\n    if(filter.aanbiedersexclude!==\"\" && filter.aanbiedersexclude!==undefined) {\n      let filteritems = filter.aanbiedersexclude.split(\",\");\n      let selectedaanbieders = metadata.aanbieders\n        .filter(aanbieder=>(filteritems.includes(aanbieder.system_id)===false))\n        .map(aanbieder=>aanbieder.system_id).join(\",\");\n  \n      filterparams.push(\"operators=\" + selectedaanbieders);\n    } else if (metadata.aanbieders.length===1) {\n      filterparams.push(\"operators=\" + metadata.aanbieders[0].system_id);\n    }\n  } else {\n    // filtering is done client side\n  }\n  \n  // only apply here if there is one aanbieder set\n  if (metadata.aanbieders.length===1) {\n    filterparams.push(\"operators=\" + metadata.aanbieders[0].system_id);\n  }\n  \n  // Add vehicle type filter\n  // form_factors=[cargo_bicycle,moped,bicycle,car,other]\n  if(filter.voertuigtypesexclude!=='' && filter.voertuigtypesexclude!==undefined) {\n    let filteritems = filter.voertuigtypesexclude.split(\",\");\n    let selectedtypes = metadata.vehicle_types\n      .filter(vtype=>(filteritems.includes(vtype.id)===false))\n      .map(vtype=>vtype.id).join(\",\");\n\n    filterparams.push(\"form_factors=\" + selectedtypes);\n  }\n  \n  // Add date (start and/or end)\n  if(isParkingData) {\n    let ts = new Date().toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    if(filter.datum!==\"\") {\n      ts = new Date(filter.datum).toISOString().replace(/.\\d+Z$/g, \"Z\");\n    }\n    filterparams.push(\"timestamp=\"+ts)\n  }\n  \n  if(isRentalData) {\n    let ts1 = new Date().toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    let ts2 = ts1;\n    // filter.intervalstart = moment().subtract(filter.intervalduur / 1000, 'seconds').toISOString();\n    // filter.intervalend = moment().toISOString();\n    const isInvalid = () => {\n      return ! filter\n          // || filter.intervalstart === \"\"\n          || filter.intervalend === \"\"\n          // || filter.intervalstart === undefined\n          || filter.intervalend === undefined;\n    }\n    if(! isInvalid()) {\n      ts1 = moment(filter.intervalend).subtract(filter.intervalduur / 1000, 'seconds').toISOString().replace(/.\\d+Z$/g, \"Z\");\n      ts2 = moment(filter.intervalend).toISOString().replace(/.\\d+Z$/g, \"Z\");\n    }\n    filterparams.push(\"start_time=\" + ts1 + \"&end_time=\" + ts2)\n  }\n  \n  if(isOntwikkelingData) {\n    let van = undefined;\n    let tot = undefined;\n    if(filter.ontwikkelingvan && filter.ontwikkelingtot) {\n      van = new Date(filter.ontwikkelingvan);\n      tot = new Date(moment(filter.ontwikkelingtot).add(1, 'day'));\n    }\n    \n    if(!van||!tot) {\n      van = new Date();\n      // take now, strip hours, add 24 h\n      tot = new Date((new Date()).toDateString()) ;\n      van.setDate(tot.getDate()-7); // go back 1 week\n    }\n    \n    // toISOString(true) keeps local timezone://momentjs.com/docs/#/displaying/as-iso-string/\n    // Date format to create: 2020-12-31T23:00:00Z\n    // let ts1 = van.toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    // let ts2 = tot.toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    let ts1 = moment(van).format('YYYY-MM-DDTHH:mm:ss') + 'Z'; // use current time without decimals\n    let ts2 = moment(tot).format('YYYY-MM-DDTHH:mm:ss') + 'Z'; // use current time without decimals\n    filterparams.push(\"start_time=\" + ts1 + \"&end_time=\" + ts2)\n  }\n  \n  return filterparams;\n}\n\nexport const convertDurationToBin = (duration) => {\n  if (duration <= 60) {\n    return 0;\n  }\n  if (duration <= 24 * 60) {\n    return 1;\n  }\n  if (duration <= 24 * 60 * 4) {\n    return 2;\n  }\n  return 3;\n}\n\nexport const convertDistanceToBin = (distance_in_meters) => {\n  if (distance_in_meters <= 1000) {\n    return 0;\n  }\n  if (distance_in_meters <= 2000) {\n    return 1;\n  }\n  if (distance_in_meters <= 5000) {\n    return 2;\n  }\n  return 3;\n}\n\n// abortableFetch\n// Source: https://davidwalsh.name/cancel-fetch\nexport function abortableFetch(request, opts) {\n  const controller = new AbortController();\n  const signal = controller.signal;\n\n  return {\n    abort: () => controller.abort(),\n    ready: fetch(request, { ...opts, signal })\n  };\n}\n\n// Do we have to (re)fetch vehicles via the API?\nexport const shouldFetchVehicles = (newFilter, existingFilter) => {\n\n  // If no filter was known of: trigger fetch\n  if(! existingFilter) return true;\n\n  // If one of these fields change, we should (re)fetch\n  const fieldChangesThatShouldTriggerUpdate = [\n    'datum',\n    'gebied',\n    'herkomstbestemming',\n    'intervalend',//Eindtijd\n    'intervalduur',\n    'ontwikkelingaggregatie',\n    'ontwikkelingtot',\n    'ontwikkelingvan',\n    'voertuigtypesexclude',\n    'zones',\n  ];\n\n  let doFetchVehicles = false;\n  fieldChangesThatShouldTriggerUpdate.forEach(x => {\n    // If field was changed: (re)fetch\n    if(newFilter[x] !== existingFilter[x]) {\n      doFetchVehicles = true;\n    }\n  })\n\n  return doFetchVehicles;\n}\n\n// Do we have to (re)fetch vehicles via the API?\nexport const shouldFetchVehicleStats = (newFilter, existingFilter) => {\n\n  // If no filter was known of: trigger fetch\n  if(! existingFilter) return true;\n\n  // If one of these fields change, we should (re)fetch\n  const fieldChangesThatShouldTriggerUpdate = [\n    'datum',\n    'gebied',\n    'herkomstbestemming',\n    'voertuigtypesexclude',\n    'zones',\n  ];\n\n  let doFetchVehicles = false;\n  fieldChangesThatShouldTriggerUpdate.forEach(x => {\n    // If field was changed: (re)fetch\n    if(newFilter[x] !== existingFilter[x]) {\n      doFetchVehicles = true;\n    }\n  })\n\n  return doFetchVehicles;\n}\n","\nexport const getProviderColor = (providers, providerName) => {\n  const found = providers.filter(x => {\n    return x.system_id === providerName;\n  });\n  return found && found[0] ? found[0].color : '#666';\n}\n\nexport const getUniqueProviderNames = (objects) => {\n  // Check if object was given\n  if(! objects || ! objects[0]) return [];\n  // Get unique provider names\n  const uniqueProviderNames = [];\n  objects.forEach(x => {\n    Object.keys(x).filter((key, val) => {\n      if(key !== 'name') {\n        if(uniqueProviderNames.indexOf(key) <= -1) {\n          uniqueProviderNames.push(key);\n        }\n      }\n    })\n  });\n  return uniqueProviderNames;\n}\n\nexport const getPrettyProviderName = (system_id) => {\n  const providerPrettyNames = {\n    'baqme': 'BAQME',\n    'bird': 'Bird',\n    'bondi': 'bondi',\n    'cykl': 'Cykl',\n    'check': 'Check',\n    'cargoroo': 'Cargoroo',\n    'deelfietsnederland': 'Deelfiets Nederland',\n    'donkey': 'Donkey Republic',\n    'felyx': 'Felyx',\n    'flickbike': 'FlickBike',\n    'gosharing': 'GO Sharing',\n    'hely': 'Hely',\n    'htm': 'HTM Fiets',\n    'moveyou': 'MoveYou',\n    'keobike': 'KeoBike',\n    'lime': 'Lime',\n    'tier': 'TIER',\n    'dott': 'Dott',\n    'uwdeelfiets': 'Uw Deelfiets'\n  }\n  return providerPrettyNames[system_id]\n    ? providerPrettyNames[system_id]\n    : system_id;\n}\n\nexport const getProviderWebsiteUrl = (system_id) => {\n  const providerWebsiteUrls = {\n    'baqme': 'https://www.baqme.com/',\n    'bird': 'https://www.bird.co/',\n    'bondi': 'https://www.bondi.city/',\n    'cykl': 'https://www.cykl.nl/',\n    'check': 'https://ridecheck.app/',\n    'cargoroo': 'https://cargoroo.nl/',\n    'deelfietsnederland': 'https://deelfietsnederland.nl/',\n    'donkey': 'https://www.donkey.bike/',\n    'moveyou': 'https://www.moveyou.com/',\n    'felyx': 'https://felyx.com/',\n    'flickbike': 'https://www.flickbike.nl/',\n    'gosharing': 'https://go-sharing.com/',\n    'hely': 'https://hely.com/',\n    'htm': 'https://www.htm.nl/ons-vervoer/htm-fiets',\n    'keobike': 'https://keobike.nl/',\n    'lime': 'https://www.li.me/',\n    'tier': 'https://www.tier.app/',\n    'dott': 'https://ridedott.com/',\n    'uwdeelfiets': 'https://www.uwdeelfiets.nl/',\n  }\n  return providerWebsiteUrls[system_id]\n    ? providerWebsiteUrls[system_id]\n    : null;\n}\n\nexport const getProviderColors = () => {\n  return  {\n    'cykl': '#a5e067',\n    'flickbike': '#fe431d',\n    'mobike': '#ed5144',\n    'donkey': '#ed5144',\n    'htm': '#db291e',\n    'jump': '#fd3e48',\n    'gosharing': '#77b136',\n    'check': '#8f3af8',\n    'felyx': '#064627',\n    'lime': '#1bd831',\n    'baqme': '#4bdfbb',\n    'bird': '#26ccf0',\n    'cargoroo': '#ffcb34',\n    'moveyou': '#13D6A6',\n    'hely': '#fd645c',\n    'tier': '#0d123f',\n    'dott': '#00a8e9'\n  }\n}\n\n// These archived providers will not be included in charts etc\nexport const archivedProviders = [\n  'dott',\n  'jump'\n]\n","function Logo({title}) {\n  return (\n    <div className=\"flex\">\n      <img alt=\"Logo CROW\" src=\"/images/logo-fietsberaad-crow.svg\" width=\"82\" />\n      {title && <div style={{\n        font: 'normal normal 600 18px/21px Inter',\n        color: '#343E47'\n      }} className=\"ml-4 flex flex-col justify-end\">\n        {title}\n      </div>}\n    </div>\n  )\n}\n\nexport default Logo;\n","export const isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n","import React from 'react';\n\nexport function IconButtonClose(props) {\n  return (\n    <div className=\"text-2xl font-bold cursor-pointer\" onClick={props.onClick}\n      style={props.style}\n      ></div>\n  )\n}\n\nexport function IconButtonFilter(props) {\n  return (\n    <div\n      {...props}\n      className=\"w-12 h-8 box-border border-2 border-black flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline\"\n    >\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22.13 15.72\">\n        <path d=\"M7.16 0a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h2.71a3.7 3.7 0 0 0 7.2 0h10.52a.85.85 0 0 0 0-1.7H10.76A3.7 3.7 0 0 0 7.16 0zm0 5.72a2 2 0 1 1 2-2 2 2 0 0 1-2 2zM15 8.3a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h10.52a3.7 3.7 0 0 0 7.2 0h2.71a.85.85 0 0 0 0-1.7h-2.71A3.7 3.7 0 0 0 15 8.3zm0 5.7a2 2 0 1 1 2-2 2 2 0 0 1-2 2z\"></path>\n      </svg>\n    </div>);\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppProvider from './AppProvider';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { createFilterparameters } from '../poll-api/pollTools.js';\nimport { DISPLAYMODE_PARK } from '../reducers/layers.js';\nconst didFetchSucceed = (response) => response.status >= 200 && response.status <= 299;\n\nconst getFetchOptions = (token) => {\n  if(token) {\n    return {\n      headers: {\n        \"authorization\": `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n        \"charset\": \"utf-8\"\n      }\n    }\n  }\n  return {\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"charset\": \"utf-8\"\n    }\n  }\n}\n\nexport const getAdminZones = async (token, filter) => {\n  if(! filter) return [];\n  if(! filter.municipality) return [];\n\n  let filterParams = `municipality=${filter.municipality}&geography_types=no_parking&geography_types=stop&geography_types=monitoring`;\n  const url = `https://mds.dashboarddeelmobiliteit.nl/admin/zones?${filterParams}`;\n  const response = await fetch(url, getFetchOptions(token));\n  if (! didFetchSucceed(response)) return;\n  return await response.json();\n}\n\nexport const getPublicZones = async (filter) => {\n  let filterParams = (filter && filter.municipality) ? `municipality=${filter.municipality}&` : '';\n  filterParams += `geography_types=no_parking&geography_types=stop`;\n  const url = `https://mds.dashboarddeelmobiliteit.nl/public/zones?${filterParams}`;\n  const response = await fetch(url, getFetchOptions());\n  if (! didFetchSucceed(response)) return;\n  return await response.json();\n}\n\nexport const postZone = async (token, data) => {\n  const url = `https://mds.dashboarddeelmobiliteit.nl/admin/zone`;\n  const response = await fetch(url, Object.assign({}, getFetchOptions(token), {\n    method: 'POST',\n    body: JSON.stringify(data)\n  }));\n  if (! didFetchSucceed(response)) return;\n  return await response.json();\n}\n\nexport const putZone = async (token, data) => {\n  const url = `https://mds.dashboarddeelmobiliteit.nl/admin/zone`;\n  const response = await fetch(url, Object.assign({}, getFetchOptions(token), {\n    method: 'PUT',\n    body: JSON.stringify(data)\n  }));\n  if (! didFetchSucceed(response)) return;\n  return await response.json();\n}\n\nexport const deleteZone = async (token, geography_id) => {\n  const url = `https://mds.dashboarddeelmobiliteit.nl/admin/zone/${geography_id}`;\n  const response = await fetch(url, Object.assign({}, getFetchOptions(token), {\n    method: 'DELETE'\n  }));\n  if (! didFetchSucceed(response)) return;\n  return response;\n}\n","const base = {\n  version: 8,\n  sources: {\n    composite: {\n      type: 'vector',\n      attribution: 'Mapbox',\n      tiles: ['https://a.tiles.mapbox.com/v4/mapbox.mapbox-streets-v8/{z}/{x}/{y}.vector.pbf?access_token=pk.eyJ1IjoibWF0dCIsImEiOiJTUHZkajU0In0.oB-OGTMFtpkga8vC48HjIg']\n    },\n  },\n  // \"sprite\": \"mapbox://sprites/bartwr/cl8yy2i2c000014lk0s7mnr7e/ck2u8j60r58fu0sgyxrigm3cu\",\n  // \"sprite\": \"https://api.mapbox.com/styles/v1/bartwr/cl8yy2i2c000014lk0s7mnr7e/draft/sprite@2x.json?fresh=true&access_token=tk.eyJ1IjoiYmFydHdyIiwiZXhwIjoxNjY1MTc5MTQ4LCJpYXQiOjE2NjUxNzU1NDgsInNjb3BlcyI6WyJlc3NlbnRpYWxzIiwic2NvcGVzOmxpc3QiLCJtYXA6cmVhZCIsIm1hcDp3cml0ZSIsInVzZXI6cmVhZCIsInVzZXI6d3JpdGUiLCJ1cGxvYWRzOnJlYWQiLCJ1cGxvYWRzOmxpc3QiLCJ1cGxvYWRzOndyaXRlIiwic3R5bGVzOnRpbGVzIiwic3R5bGVzOnJlYWQiLCJmb250czpsaXN0IiwiZm9udHM6cmVhZCIsImZvbnRzOndyaXRlIiwic3R5bGVzOndyaXRlIiwic3R5bGVzOmxpc3QiLCJzdHlsZXM6ZG93bmxvYWQiLCJzdHlsZXM6cHJvdGVjdCIsInRva2VuczpyZWFkIiwidG9rZW5zOndyaXRlIiwiZGF0YXNldHM6bGlzdCIsImRhdGFzZXRzOnJlYWQiLCJkYXRhc2V0czp3cml0ZSIsInRpbGVzZXRzOmxpc3QiLCJ0aWxlc2V0czpyZWFkIiwidGlsZXNldHM6d3JpdGUiLCJkb3dubG9hZHM6cmVhZCIsInZpc2lvbjpyZWFkIiwidmlzaW9uOmRvd25sb2FkIiwibmF2aWdhdGlvbjpkb3dubG9hZCIsIm9mZmxpbmU6cmVhZCIsIm9mZmxpbmU6d3JpdGUiLCJzdHlsZXM6ZHJhZnQiLCJmb250czptZXRhZGF0YSIsInNwcml0ZS1pbWFnZXM6cmVhZCIsImRhdGFzZXRzOnN0dWRpbyIsImN1c3RvbWVyczp3cml0ZSIsImNyZWRlbnRpYWxzOnJlYWQiLCJjcmVkZW50aWFsczp3cml0ZSIsImFuYWx5dGljczpyZWFkIl0sImNsaWVudCI6Im1hcGJveC5jb20iLCJsbCI6MTY2NTE3NDc0MzUyOCwiaXUiOm51bGwsImVtYWlsIjoibWFpbEBiYXJ0cm9vcmRhLm5sIn0.onvMaEj0urnm2g3FFyrAVg\",\n  sprite: \"https://api.mapbox.com/styles/v1/bartwr/cl8yy2i2c000014lk0s7mnr7e/draft/sprite@2x.json?access_token=tk.eyJ1IjoiYmFydHdyIiwiZXhwIjoxNjY1MTc5MTQ4LCJpYXQiOjE2NjUxNzU1NDgsInNjb3BlcyI6WyJlc3NlbnRpYWxzIiwic2NvcGVzOmxpc3QiLCJtYXA6cmVhZCIsIm1hcDp3cml0ZSIsInVzZXI6cmVhZCIsInVzZXI6d3JpdGUiLCJ1cGxvYWRzOnJlYWQiLCJ1cGxvYWRzOmxpc3QiLCJ1cGxvYWRzOndyaXRlIiwic3R5bGVzOnRpbGVzIiwic3R5bGVzOnJlYWQiLCJmb250czpsaXN0IiwiZm9udHM6cmVhZCIsImZvbnRzOndyaXRlIiwic3R5bGVzOndyaXRlIiwic3R5bGVzOmxpc3QiLCJzdHlsZXM6ZG93bmxvYWQiLCJzdHlsZXM6cHJvdGVjdCIsInRva2VuczpyZWFkIiwidG9rZW5zOndyaXRlIiwiZGF0YXNldHM6bGlzdCIsImRhdGFzZXRzOnJlYWQiLCJkYXRhc2V0czp3cml0ZSIsInRpbGVzZXRzOmxpc3QiLCJ0aWxlc2V0czpyZWFkIiwidGlsZXNldHM6d3JpdGUiLCJkb3dubG9hZHM6cmVhZCIsInZpc2lvbjpyZWFkIiwidmlzaW9uOmRvd25sb2FkIiwibmF2aWdhdGlvbjpkb3dubG9hZCIsIm9mZmxpbmU6cmVhZCIsIm9mZmxpbmU6d3JpdGUiLCJzdHlsZXM6ZHJhZnQiLCJmb250czptZXRhZGF0YSIsInNwcml0ZS1pbWFnZXM6cmVhZCIsImRhdGFzZXRzOnN0dWRpbyIsImN1c3RvbWVyczp3cml0ZSIsImNyZWRlbnRpYWxzOnJlYWQiLCJjcmVkZW50aWFsczp3cml0ZSIsImFuYWx5dGljczpyZWFkIl0sImNsaWVudCI6Im1hcGJveC5jb20iLCJsbCI6MTY2NTE3NDc0MzUyOCwiaXUiOm51bGwsImVtYWlsIjoibWFpbEBiYXJ0cm9vcmRhLm5sIn0.onvMaEj0urnm2g3FFyrAVg\",\n  glyphs: \"https://a.tiles.mapbox.com/v4/fontstack/{fontstack}/{range}.pbf?access_token=pk.eyJ1IjoibWF0dCIsImEiOiJTUHZkajU0In0.oB-OGTMFtpkga8vC48HjIg\",\n  layers: [\n      {\n          \"id\": \"land\",\n          \"type\": \"background\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"land-and-water\",\n              \"mapbox:group\": \"Land, water, & sky, land\"\n          },\n          \"layout\": {},\n          \"paint\": {\"background-color\": \"hsl(40, 8%, 96%)\"}\n      },\n      {\n          \"id\": \"national-park\",\n          \"type\": \"fill\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"land-and-water\",\n              \"mapbox:group\": \"Land, water, & sky, land\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"landuse_overlay\",\n          \"minzoom\": 5,\n          \"filter\": [\"==\", [\"get\", \"class\"], \"national_park\"],\n          \"layout\": {},\n          \"paint\": {\n              \"fill-color\": \"hsl(78, 65%, 82%)\",\n              \"fill-opacity\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  5,\n                  0,\n                  6,\n                  0.5,\n                  10,\n                  0.5\n              ]\n          }\n      },\n      {\n          \"id\": \"landuse\",\n          \"type\": \"fill\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"land-and-water\",\n              \"mapbox:group\": \"Land, water, & sky, land\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"landuse\",\n          \"minzoom\": 5,\n          \"filter\": [\n              \"match\",\n              [\"get\", \"class\"],\n              [\"park\", \"airport\", \"glacier\", \"pitch\", \"sand\", \"facility\"],\n              true,\n              \"cemetery\",\n              true,\n              \"hospital\",\n              true,\n              false\n          ],\n          \"layout\": {},\n          \"paint\": {\n              \"fill-color\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  15,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      \"park\",\n                      \"hsl(78, 65%, 82%)\",\n                      \"airport\",\n                      \"hsl(225, 11%, 97%)\",\n                      \"cemetery\",\n                      \"hsl(60, 28%, 88%)\",\n                      \"glacier\",\n                      \"hsl(205, 49%, 93%)\",\n                      \"hospital\",\n                      \"hsl(3, 23%, 93%)\",\n                      \"pitch\",\n                      \"hsl(78, 66%, 77%)\",\n                      \"sand\",\n                      \"hsl(65, 52%, 95%)\",\n                      \"hsl(40, 12%, 91%)\"\n                  ],\n                  16,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      \"park\",\n                      \"hsl(78, 65%, 82%)\",\n                      \"airport\",\n                      \"hsl(225, 25%, 95%)\",\n                      \"cemetery\",\n                      \"hsl(60, 28%, 88%)\",\n                      \"glacier\",\n                      \"hsl(205, 49%, 93%)\",\n                      \"hospital\",\n                      \"hsl(3, 38%, 95%)\",\n                      \"pitch\",\n                      \"hsl(78, 66%, 77%)\",\n                      \"sand\",\n                      \"hsl(65, 52%, 95%)\",\n                      \"hsl(40, 12%, 91%)\"\n                  ]\n              ],\n              \"fill-opacity\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  5,\n                  0,\n                  6,\n                  [\"match\", [\"get\", \"class\"], \"glacier\", 0.5, 1]\n              ]\n          }\n      },\n      {\n          \"id\": \"pitch-outline\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"land-and-water\",\n              \"mapbox:group\": \"Land, water, & sky, land\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"landuse\",\n          \"minzoom\": 15,\n          \"filter\": [\"==\", [\"get\", \"class\"], \"pitch\"],\n          \"layout\": {},\n          \"paint\": {\"line-color\": \"hsl(60, 37%, 91%)\"}\n      },\n      {\n          \"id\": \"waterway\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"land-and-water\",\n              \"mapbox:group\": \"Land, water, & sky, water\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"waterway\",\n          \"minzoom\": 8,\n          \"layout\": {\n              \"line-cap\": [\"step\", [\"zoom\"], \"butt\", 11, \"round\"],\n              \"line-join\": \"round\"\n          },\n          \"paint\": {\n              \"line-color\": \"hsl(205, 69%, 90%)\",\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.3],\n                  [\"zoom\"],\n                  9,\n                  [\"match\", [\"get\", \"class\"], [\"canal\", \"river\"], 0.1, 0],\n                  20,\n                  [\"match\", [\"get\", \"class\"], [\"canal\", \"river\"], 8, 3]\n              ],\n              \"line-opacity\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  8,\n                  0,\n                  8.5,\n                  1\n              ]\n          }\n      },\n      {\n          \"id\": \"water\",\n          \"type\": \"fill\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"land-and-water\",\n              \"mapbox:group\": \"Land, water, & sky, water\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"water\",\n          \"layout\": {},\n          \"paint\": {\"fill-color\": \"hsl(205, 69%, 90%)\"}\n      },\n      {\n          \"id\": \"land-structure-polygon\",\n          \"type\": \"fill\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"land-and-water\",\n              \"mapbox:group\": \"Land, water, & sky, built\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"structure\",\n          \"minzoom\": 13,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"geometry-type\"], \"Polygon\"],\n              [\"==\", [\"get\", \"class\"], \"land\"]\n          ],\n          \"layout\": {},\n          \"paint\": {\"fill-color\": \"hsl(40, 8%, 96%)\"}\n      },\n      {\n          \"id\": \"land-structure-line\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"land-and-water\",\n              \"mapbox:group\": \"Land, water, & sky, built\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"structure\",\n          \"minzoom\": 13,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"geometry-type\"], \"LineString\"],\n              [\"==\", [\"get\", \"class\"], \"land\"]\n          ],\n          \"layout\": {\"line-cap\": \"round\"},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.99],\n                  [\"zoom\"],\n                  14,\n                  0.75,\n                  20,\n                  40\n              ],\n              \"line-color\": \"hsl(40, 8%, 96%)\"\n          }\n      },\n      {\n          \"id\": \"aeroway-polygon\",\n          \"type\": \"fill\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"transit\",\n              \"mapbox:group\": \"Transit, built\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"aeroway\",\n          \"minzoom\": 11,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"geometry-type\"], \"Polygon\"],\n              [\n                  \"match\",\n                  [\"get\", \"type\"],\n                  [\"runway\", \"taxiway\", \"helipad\"],\n                  true,\n                  false\n              ]\n          ],\n          \"layout\": {},\n          \"paint\": {\n              \"fill-color\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  15,\n                  \"hsl(225, 9%, 88%)\",\n                  16,\n                  \"hsl(225, 6%, 90%)\"\n              ],\n              \"fill-opacity\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  11,\n                  0,\n                  11.5,\n                  1\n              ]\n          }\n      },\n      {\n          \"id\": \"aeroway-line\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"transit\",\n              \"mapbox:group\": \"Transit, built\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"aeroway\",\n          \"minzoom\": 9,\n          \"filter\": [\"==\", [\"geometry-type\"], \"LineString\"],\n          \"layout\": {},\n          \"paint\": {\n              \"line-color\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  15,\n                  \"hsl(225, 9%, 88%)\",\n                  16,\n                  \"hsl(225, 6%, 90%)\"\n              ],\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  9,\n                  [\"match\", [\"get\", \"type\"], \"runway\", 1, 0.5],\n                  18,\n                  [\"match\", [\"get\", \"type\"], \"runway\", 80, 20]\n              ]\n          }\n      },\n      {\n          \"id\": \"building-outline\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"buildings\",\n              \"mapbox:group\": \"Buildings, built\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"building\",\n          \"minzoom\": 15,\n          \"filter\": [\n              \"all\",\n              [\"!=\", [\"get\", \"type\"], \"building:part\"],\n              [\"==\", [\"get\", \"underground\"], \"false\"]\n          ],\n          \"layout\": {},\n          \"paint\": {\n              \"line-color\": \"hsl(40, 4%, 86%)\",\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  15,\n                  0.75,\n                  20,\n                  3\n              ],\n              \"line-opacity\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  15,\n                  0,\n                  16,\n                  1\n              ]\n          }\n      },\n      {\n          \"id\": \"building\",\n          \"type\": \"fill\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"buildings\",\n              \"mapbox:group\": \"Buildings, built\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"building\",\n          \"minzoom\": 15,\n          \"filter\": [\n              \"all\",\n              [\"!=\", [\"get\", \"type\"], \"building:part\"],\n              [\"==\", [\"get\", \"underground\"], \"false\"]\n          ],\n          \"layout\": {},\n          \"paint\": {\n              \"fill-color\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  15,\n                  \"hsl(40, 7%, 92%)\",\n                  16,\n                  \"hsl(40, 3%, 92%)\"\n              ],\n              \"fill-opacity\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  15,\n                  0,\n                  16,\n                  1\n              ],\n              \"fill-outline-color\": \"hsl(40, 4%, 86%)\"\n          }\n      },\n      {\n          \"id\": \"tunnel-path\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"walking-cycling\",\n              \"mapbox:group\": \"Walking, cycling, etc., tunnels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 14,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"structure\"], \"tunnel\"],\n              [\"==\", [\"get\", \"class\"], \"path\"],\n              [\"!=\", [\"get\", \"type\"], \"steps\"],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  15,\n                  1,\n                  18,\n                  4\n              ],\n              \"line-color\": \"hsl(40, 4%, 86%)\",\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [1, 0]],\n                  15,\n                  [\"literal\", [1.75, 1]],\n                  16,\n                  [\"literal\", [1, 0.75]],\n                  17,\n                  [\"literal\", [1, 0.5]]\n              ]\n          }\n      },\n      {\n          \"id\": \"tunnel-steps\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"walking-cycling\",\n              \"mapbox:group\": \"Walking, cycling, etc., tunnels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 14,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"structure\"], \"tunnel\"],\n              [\"==\", [\"get\", \"type\"], \"steps\"],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  15,\n                  1,\n                  16,\n                  1.6,\n                  18,\n                  6\n              ],\n              \"line-color\": \"hsl(40, 4%, 86%)\",\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [1, 0]],\n                  15,\n                  [\"literal\", [1.75, 1]],\n                  16,\n                  [\"literal\", [1, 0.75]],\n                  17,\n                  [\"literal\", [0.3, 0.3]]\n              ]\n          }\n      },\n      {\n          \"id\": \"tunnel-pedestrian\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"walking-cycling\",\n              \"mapbox:group\": \"Walking, cycling, etc., tunnels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 13,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"structure\"], \"tunnel\"],\n              [\"==\", [\"get\", \"class\"], \"pedestrian\"],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  14,\n                  0.5,\n                  18,\n                  12\n              ],\n              \"line-color\": \"hsl(40, 4%, 86%)\",\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [1, 0]],\n                  15,\n                  [\"literal\", [1.5, 0.4]],\n                  16,\n                  [\"literal\", [1, 0.2]]\n              ]\n          }\n      },\n      {\n          \"id\": \"tunnel-simple\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"road-network\",\n              \"mapbox:group\": \"Road network, tunnels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 13,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"structure\"], \"tunnel\"],\n              [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"motorway_link\",\n                          \"trunk\",\n                          \"trunk_link\",\n                          \"primary\",\n                          \"secondary\",\n                          \"tertiary\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\",\n                          \"track\"\n                      ],\n                      true,\n                      false\n                  ],\n                  14,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"motorway_link\",\n                          \"trunk\",\n                          \"trunk_link\",\n                          \"primary\",\n                          \"primary_link\",\n                          \"secondary\",\n                          \"secondary_link\",\n                          \"tertiary\",\n                          \"tertiary_link\",\n                          \"street\",\n                          \"street_limited\",\n                          \"service\",\n                          \"track\"\n                      ],\n                      true,\n                      false\n                  ]\n              ],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  13,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\"],\n                      4,\n                      [\"secondary\", \"tertiary\"],\n                      2.5,\n                      [\n                          \"motorway_link\",\n                          \"trunk_link\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\"\n                      ],\n                      1,\n                      0.5\n                  ],\n                  18,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\"],\n                      32,\n                      [\"secondary\", \"tertiary\"],\n                      26,\n                      [\n                          \"motorway_link\",\n                          \"trunk_link\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\"\n                      ],\n                      18,\n                      12\n                  ]\n              ],\n              \"line-color\": \"hsl(38, 55%, 93%)\"\n          }\n      },\n      {\n          \"id\": \"road-path\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"walking-cycling\",\n              \"mapbox:group\": \"Walking, cycling, etc., surface\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 12,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"class\"], \"path\"],\n              [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"!\",\n                      [\n                          \"match\",\n                          [\"get\", \"type\"],\n                          [\"steps\", \"sidewalk\", \"crossing\"],\n                          true,\n                          false\n                      ]\n                  ],\n                  16,\n                  [\"!=\", [\"get\", \"type\"], \"steps\"]\n              ],\n              [\"match\", [\"get\", \"structure\"], [\"none\", \"ford\"], true, false],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {\"line-join\": [\"step\", [\"zoom\"], \"miter\", 14, \"round\"]},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  13,\n                  0.5,\n                  14,\n                  1,\n                  15,\n                  1,\n                  18,\n                  4\n              ],\n              \"line-color\": \"hsl(40, 8%, 100%)\",\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [4, 0.3]],\n                  15,\n                  [\"literal\", [1.75, 0.3]],\n                  16,\n                  [\"literal\", [1, 0.3]],\n                  17,\n                  [\"literal\", [1, 0.25]]\n              ]\n          }\n      },\n      {\n          \"id\": \"road-steps\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"walking-cycling\",\n              \"mapbox:group\": \"Walking, cycling, etc., surface\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 14,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"type\"], \"steps\"],\n              [\"match\", [\"get\", \"structure\"], [\"none\", \"ford\"], true, false],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {\"line-join\": \"round\"},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  15,\n                  1,\n                  16,\n                  1.6,\n                  18,\n                  6\n              ],\n              \"line-color\": \"hsl(40, 8%, 100%)\",\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [1, 0]],\n                  15,\n                  [\"literal\", [1.75, 1]],\n                  16,\n                  [\"literal\", [1, 0.75]],\n                  17,\n                  [\"literal\", [0.3, 0.3]]\n              ]\n          }\n      },\n      {\n          \"id\": \"road-pedestrian\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"walking-cycling\",\n              \"mapbox:group\": \"Walking, cycling, etc., surface\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 12,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"class\"], \"pedestrian\"],\n              [\"match\", [\"get\", \"structure\"], [\"none\", \"ford\"], true, false],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {\"line-join\": [\"step\", [\"zoom\"], \"miter\", 14, \"round\"]},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  14,\n                  0.5,\n                  18,\n                  12\n              ],\n              \"line-color\": \"hsl(40, 8%, 100%)\",\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [1, 0]],\n                  15,\n                  [\"literal\", [1.5, 0.4]],\n                  16,\n                  [\"literal\", [1, 0.2]]\n              ]\n          }\n      },\n      {\n          \"id\": \"road-simple\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"road-network\",\n              \"mapbox:group\": \"Road network, surface\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 5,\n          \"filter\": [\n              \"all\",\n              [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\"],\n                      true,\n                      false\n                  ],\n                  6,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\"],\n                      true,\n                      false\n                  ],\n                  8,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\", \"secondary\"],\n                      true,\n                      false\n                  ],\n                  10,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"trunk\",\n                          \"primary\",\n                          \"secondary\",\n                          \"tertiary\",\n                          \"motorway_link\",\n                          \"trunk_link\"\n                      ],\n                      true,\n                      false\n                  ],\n                  11,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"motorway_link\",\n                          \"trunk\",\n                          \"trunk_link\",\n                          \"primary\",\n                          \"secondary\",\n                          \"tertiary\",\n                          \"street\"\n                      ],\n                      true,\n                      false\n                  ],\n                  12,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"motorway_link\",\n                          \"trunk\",\n                          \"trunk_link\",\n                          \"primary\",\n                          \"secondary\",\n                          \"tertiary\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\"\n                      ],\n                      true,\n                      false\n                  ],\n                  13,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"motorway_link\",\n                          \"trunk\",\n                          \"trunk_link\",\n                          \"primary\",\n                          \"secondary\",\n                          \"tertiary\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\",\n                          \"track\"\n                      ],\n                      true,\n                      false\n                  ],\n                  14,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"motorway_link\",\n                          \"trunk\",\n                          \"trunk_link\",\n                          \"primary\",\n                          \"primary_link\",\n                          \"secondary\",\n                          \"secondary_link\",\n                          \"tertiary\",\n                          \"tertiary_link\",\n                          \"street\",\n                          \"street_limited\",\n                          \"service\",\n                          \"track\"\n                      ],\n                      true,\n                      false\n                  ]\n              ],\n              [\"match\", [\"get\", \"structure\"], [\"none\", \"ford\"], true, false],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {\n              \"line-cap\": [\"step\", [\"zoom\"], \"butt\", 14, \"round\"],\n              \"line-join\": [\"step\", [\"zoom\"], \"miter\", 14, \"round\"]\n          },\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  5,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\"],\n                      0.75,\n                      [\"secondary\", \"tertiary\"],\n                      0.1,\n                      0\n                  ],\n                  13,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\"],\n                      4,\n                      [\"secondary\", \"tertiary\"],\n                      2.5,\n                      [\n                          \"motorway_link\",\n                          \"trunk_link\",\n                          \"primary_link\",\n                          \"street\",\n                          \"street_limited\"\n                      ],\n                      1,\n                      0.5\n                  ],\n                  18,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\"],\n                      32,\n                      [\"secondary\", \"tertiary\"],\n                      26,\n                      [\n                          \"motorway_link\",\n                          \"trunk_link\",\n                          \"primary_link\",\n                          \"street\",\n                          \"street_limited\"\n                      ],\n                      18,\n                      10\n                  ]\n              ],\n              \"line-color\": [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  [\n                      \"primary_link\",\n                      \"secondary_link\",\n                      \"tertiary_link\",\n                      \"street\",\n                      \"street_limited\",\n                      \"service\",\n                      \"track\"\n                  ],\n                  \"hsl(38, 55%, 97%)\",\n                  \"hsl(38, 55%, 100%)\"\n              ]\n          }\n      },\n      {\n          \"id\": \"bridge-path\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"walking-cycling\",\n              \"mapbox:group\": \"Walking, cycling, etc., barriers-bridges\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 14,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"structure\"], \"bridge\"],\n              [\"==\", [\"get\", \"class\"], \"path\"],\n              [\"==\", [\"geometry-type\"], \"LineString\"],\n              [\"!=\", [\"get\", \"type\"], \"steps\"]\n          ],\n          \"layout\": {\"line-join\": \"round\"},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  15,\n                  1,\n                  18,\n                  4\n              ],\n              \"line-color\": \"hsl(40, 8%, 100%)\",\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [4, 0.3]],\n                  15,\n                  [\"literal\", [1.75, 0.3]],\n                  16,\n                  [\"literal\", [1, 0.3]],\n                  17,\n                  [\"literal\", [1, 0.25]]\n              ]\n          }\n      },\n      {\n          \"id\": \"bridge-steps\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"walking-cycling\",\n              \"mapbox:group\": \"Walking, cycling, etc., barriers-bridges\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 14,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"type\"], \"steps\"],\n              [\"==\", [\"get\", \"structure\"], \"bridge\"],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {\"line-join\": \"round\"},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  15,\n                  1,\n                  16,\n                  1.6,\n                  18,\n                  6\n              ],\n              \"line-color\": \"hsl(40, 8%, 100%)\",\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [1, 0]],\n                  15,\n                  [\"literal\", [1.75, 1]],\n                  16,\n                  [\"literal\", [1, 0.75]],\n                  17,\n                  [\"literal\", [0.3, 0.3]]\n              ]\n          }\n      },\n      {\n          \"id\": \"bridge-pedestrian\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"walking-cycling\",\n              \"mapbox:group\": \"Walking, cycling, etc., barriers-bridges\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 13,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"structure\"], \"bridge\"],\n              [\"==\", [\"get\", \"class\"], \"pedestrian\"],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {\"line-join\": \"round\"},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  14,\n                  0.5,\n                  18,\n                  12\n              ],\n              \"line-color\": \"hsl(40, 8%, 100%)\",\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [1, 0]],\n                  15,\n                  [\"literal\", [1.5, 0.4]],\n                  16,\n                  [\"literal\", [1, 0.2]]\n              ]\n          }\n      },\n      {\n          \"id\": \"bridge-case-simple\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"road-network\",\n              \"mapbox:group\": \"Road network, bridges\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 13,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"structure\"], \"bridge\"],\n              [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"motorway_link\",\n                          \"trunk\",\n                          \"trunk_link\",\n                          \"primary\",\n                          \"secondary\",\n                          \"tertiary\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\",\n                          \"track\"\n                      ],\n                      true,\n                      false\n                  ],\n                  14,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"motorway_link\",\n                          \"trunk\",\n                          \"trunk_link\",\n                          \"primary\",\n                          \"primary_link\",\n                          \"secondary\",\n                          \"secondary_link\",\n                          \"tertiary\",\n                          \"tertiary_link\",\n                          \"street\",\n                          \"street_limited\",\n                          \"service\",\n                          \"track\"\n                      ],\n                      true,\n                      false\n                  ]\n              ],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {\"line-join\": [\"step\", [\"zoom\"], \"miter\", 14, \"round\"]},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  13,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\"],\n                      6,\n                      [\"secondary\", \"tertiary\"],\n                      4,\n                      [\n                          \"motorway_link\",\n                          \"trunk_link\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\"\n                      ],\n                      2.5,\n                      1.25\n                  ],\n                  18,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\"],\n                      36,\n                      [\"secondary\", \"tertiary\"],\n                      30,\n                      [\n                          \"motorway_link\",\n                          \"trunk_link\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\"\n                      ],\n                      22,\n                      16\n                  ]\n              ],\n              \"line-color\": \"hsl(40, 8%, 96%)\"\n          }\n      },\n      {\n          \"id\": \"bridge-simple\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"road-network\",\n              \"mapbox:group\": \"Road network, bridges\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 13,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"structure\"], \"bridge\"],\n              [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\"],\n                      true,\n                      false\n                  ],\n                  13,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"motorway_link\",\n                          \"trunk\",\n                          \"trunk_link\",\n                          \"primary\",\n                          \"secondary\",\n                          \"tertiary\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\",\n                          \"track\"\n                      ],\n                      true,\n                      false\n                  ],\n                  14,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"motorway_link\",\n                          \"trunk\",\n                          \"trunk_link\",\n                          \"primary\",\n                          \"primary_link\",\n                          \"secondary\",\n                          \"secondary_link\",\n                          \"tertiary\",\n                          \"tertiary_link\",\n                          \"street\",\n                          \"street_limited\",\n                          \"service\",\n                          \"track\"\n                      ],\n                      true,\n                      false\n                  ]\n              ],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {\n              \"line-cap\": [\"step\", [\"zoom\"], \"butt\", 14, \"round\"],\n              \"line-join\": [\"step\", [\"zoom\"], \"miter\", 14, \"round\"]\n          },\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"exponential\", 1.5],\n                  [\"zoom\"],\n                  13,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\"],\n                      4,\n                      [\"secondary\", \"tertiary\"],\n                      2.5,\n                      [\n                          \"motorway_link\",\n                          \"trunk_link\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\"\n                      ],\n                      1,\n                      0.5\n                  ],\n                  18,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\"motorway\", \"trunk\", \"primary\"],\n                      32,\n                      [\"secondary\", \"tertiary\"],\n                      26,\n                      [\n                          \"motorway_link\",\n                          \"trunk_link\",\n                          \"street\",\n                          \"street_limited\",\n                          \"primary_link\"\n                      ],\n                      18,\n                      12\n                  ]\n              ],\n              \"line-color\": [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  [\n                      \"primary_link\",\n                      \"secondary_link\",\n                      \"tertiary_link\",\n                      \"street\",\n                      \"street_limited\",\n                      \"service\",\n                      \"track\"\n                  ],\n                  \"hsl(38, 55%, 97%)\",\n                  \"hsl(38, 55%, 100%)\"\n              ]\n          }\n      },\n      {\n          \"id\": \"admin-1-boundary-bg\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"admin-boundaries\",\n              \"mapbox:group\": \"Administrative boundaries, admin\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"admin\",\n          \"minzoom\": 7,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"admin_level\"], 1],\n              [\"==\", [\"get\", \"maritime\"], \"false\"],\n              [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false]\n          ],\n          \"layout\": {\"line-join\": \"bevel\"},\n          \"paint\": {\n              \"line-color\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  8,\n                  \"hsl(40, 8%, 96%)\",\n                  16,\n                  \"hsl(0, 0%, 96%)\"\n              ],\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  7,\n                  3.75,\n                  12,\n                  5.5\n              ],\n              \"line-opacity\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  7,\n                  0,\n                  8,\n                  0.75\n              ],\n              \"line-dasharray\": [1, 0],\n              \"line-blur\": [\"interpolate\", [\"linear\"], [\"zoom\"], 3, 0, 8, 3]\n          }\n      },\n      {\n          \"id\": \"admin-0-boundary-bg\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"admin-boundaries\",\n              \"mapbox:group\": \"Administrative boundaries, admin\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"admin\",\n          \"minzoom\": 1,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"admin_level\"], 0],\n              [\"==\", [\"get\", \"maritime\"], \"false\"],\n              [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false]\n          ],\n          \"layout\": {},\n          \"paint\": {\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  3,\n                  3.5,\n                  10,\n                  8\n              ],\n              \"line-color\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  6,\n                  \"hsl(40, 8%, 96%)\",\n                  8,\n                  \"hsl(0, 0%, 96%)\"\n              ],\n              \"line-opacity\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  3,\n                  0,\n                  4,\n                  0.5\n              ],\n              \"line-blur\": [\"interpolate\", [\"linear\"], [\"zoom\"], 3, 0, 10, 2]\n          }\n      },\n      {\n          \"id\": \"admin-1-boundary\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"admin-boundaries\",\n              \"mapbox:group\": \"Administrative boundaries, admin\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"admin\",\n          \"minzoom\": 2,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"admin_level\"], 1],\n              [\"==\", [\"get\", \"maritime\"], \"false\"],\n              [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false]\n          ],\n          \"layout\": {\"line-join\": \"round\", \"line-cap\": \"round\"},\n          \"paint\": {\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [2, 0]],\n                  7,\n                  [\"literal\", [2, 2, 6, 2]]\n              ],\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  7,\n                  0.75,\n                  12,\n                  1.5\n              ],\n              \"line-opacity\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  2,\n                  0,\n                  3,\n                  1\n              ],\n              \"line-color\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  3,\n                  \"hsl(0, 0%, 77%)\",\n                  7,\n                  \"hsl(0, 0%, 62%)\"\n              ]\n          }\n      },\n      {\n          \"id\": \"admin-0-boundary\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"admin-boundaries\",\n              \"mapbox:group\": \"Administrative boundaries, admin\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"admin\",\n          \"minzoom\": 1,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"admin_level\"], 0],\n              [\"==\", [\"get\", \"disputed\"], \"false\"],\n              [\"==\", [\"get\", \"maritime\"], \"false\"],\n              [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false]\n          ],\n          \"layout\": {\"line-join\": \"round\", \"line-cap\": \"round\"},\n          \"paint\": {\n              \"line-color\": \"hsl(0, 0%, 51%)\",\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  3,\n                  0.5,\n                  10,\n                  2\n              ],\n              \"line-dasharray\": [10, 0]\n          }\n      },\n      {\n          \"id\": \"admin-0-boundary-disputed\",\n          \"type\": \"line\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"admin-boundaries\",\n              \"mapbox:group\": \"Administrative boundaries, admin\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"admin\",\n          \"minzoom\": 1,\n          \"filter\": [\n              \"all\",\n              [\"==\", [\"get\", \"disputed\"], \"true\"],\n              [\"==\", [\"get\", \"admin_level\"], 0],\n              [\"==\", [\"get\", \"maritime\"], \"false\"],\n              [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false]\n          ],\n          \"layout\": {\"line-join\": \"round\"},\n          \"paint\": {\n              \"line-color\": \"hsl(0, 0%, 51%)\",\n              \"line-width\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  3,\n                  0.5,\n                  10,\n                  2\n              ],\n              \"line-dasharray\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"literal\", [3.25, 3.25]],\n                  6,\n                  [\"literal\", [2.5, 2.5]],\n                  7,\n                  [\"literal\", [2, 2.25]],\n                  8,\n                  [\"literal\", [1.75, 2]]\n              ]\n          }\n      },\n      {\n          \"id\": \"road-label-simple\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"road-network\",\n              \"mapbox:group\": \"Road network, road-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 12,\n          \"filter\": [\n              \"match\",\n              [\"get\", \"class\"],\n              [\n                  \"motorway\",\n                  \"trunk\",\n                  \"primary\",\n                  \"secondary\",\n                  \"tertiary\",\n                  \"street\",\n                  \"street_limited\"\n              ],\n              true,\n              false\n          ],\n          \"layout\": {\n              \"text-size\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  10,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"trunk\",\n                          \"primary\",\n                          \"secondary\",\n                          \"tertiary\"\n                      ],\n                      10,\n                      9\n                  ],\n                  18,\n                  [\n                      \"match\",\n                      [\"get\", \"class\"],\n                      [\n                          \"motorway\",\n                          \"trunk\",\n                          \"primary\",\n                          \"secondary\",\n                          \"tertiary\"\n                      ],\n                      16,\n                      14\n                  ]\n              ],\n              \"text-max-angle\": 30,\n              \"text-font\": [\"DIN Pro Regular\", \"Arial Unicode MS Regular\"],\n              \"symbol-placement\": \"line\",\n              \"text-padding\": 1,\n              \"text-rotation-alignment\": \"map\",\n              \"text-pitch-alignment\": \"viewport\",\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]],\n              \"text-letter-spacing\": 0.01\n          },\n          \"paint\": {\n              \"text-color\": \"hsl(40, 8%, 48%)\",\n              \"text-halo-color\": \"hsl(38, 55%, 100%)\",\n              \"text-halo-width\": 1\n          }\n      },\n      {\n          \"id\": \"path-pedestrian-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"walking-cycling\",\n              \"mapbox:group\": \"Walking, cycling, etc., walking-cycling-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"road\",\n          \"minzoom\": 12,\n          \"filter\": [\n              \"step\",\n              [\"zoom\"],\n              [\"match\", [\"get\", \"class\"], [\"pedestrian\"], true, false],\n              15,\n              [\"match\", [\"get\", \"class\"], [\"path\", \"pedestrian\"], true, false]\n          ],\n          \"layout\": {\n              \"text-size\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  10,\n                  [\"match\", [\"get\", \"class\"], \"pedestrian\", 9, 6.5],\n                  18,\n                  [\"match\", [\"get\", \"class\"], \"pedestrian\", 14, 13]\n              ],\n              \"text-max-angle\": 30,\n              \"text-font\": [\"DIN Pro Regular\", \"Arial Unicode MS Regular\"],\n              \"symbol-placement\": \"line\",\n              \"text-padding\": 1,\n              \"text-rotation-alignment\": \"map\",\n              \"text-pitch-alignment\": \"viewport\",\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]],\n              \"text-letter-spacing\": 0.01\n          },\n          \"paint\": {\n              \"text-color\": \"hsl(40, 8%, 48%)\",\n              \"text-halo-color\": \"hsl(40, 6%, 100%)\",\n              \"text-halo-width\": 1,\n              \"text-halo-blur\": 1\n          }\n      },\n      {\n          \"id\": \"waterway-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"natural-features\",\n              \"mapbox:group\": \"Natural features, natural-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"natural_label\",\n          \"minzoom\": 13,\n          \"filter\": [\n              \"all\",\n              [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  [\"canal\", \"river\", \"stream\"],\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n                  [\"disputed_canal\", \"disputed_river\", \"disputed_stream\"],\n                  [\n                      \"all\",\n                      [\"==\", [\"get\", \"disputed\"], \"true\"],\n                      [\n                          \"match\",\n                          [\"get\", \"worldview\"],\n                          [\"all\", \"US\"],\n                          true,\n                          false\n                      ]\n                  ],\n                  false\n              ],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {\n              \"text-font\": [\"DIN Pro Italic\", \"Arial Unicode MS Regular\"],\n              \"text-max-angle\": 30,\n              \"symbol-spacing\": [\n                  \"interpolate\",\n                  [\"linear\", 1],\n                  [\"zoom\"],\n                  15,\n                  250,\n                  17,\n                  400\n              ],\n              \"text-size\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  13,\n                  12,\n                  18,\n                  16\n              ],\n              \"symbol-placement\": \"line\",\n              \"text-pitch-alignment\": \"viewport\",\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]]\n          },\n          \"paint\": {\"text-color\": \"hsl(205, 37%, 57%)\"}\n      },\n      {\n          \"id\": \"natural-line-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"natural-features\",\n              \"mapbox:group\": \"Natural features, natural-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"natural_label\",\n          \"minzoom\": 4,\n          \"filter\": [\n              \"all\",\n              [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  [\"glacier\", \"landform\"],\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n                  [\"disputed_glacier\", \"disputed_landform\"],\n                  [\n                      \"all\",\n                      [\"==\", [\"get\", \"disputed\"], \"true\"],\n                      [\n                          \"match\",\n                          [\"get\", \"worldview\"],\n                          [\"all\", \"US\"],\n                          true,\n                          false\n                      ]\n                  ],\n                  false\n              ],\n              [\"==\", [\"geometry-type\"], \"LineString\"],\n              [\"<=\", [\"get\", \"filterrank\"], 2]\n          ],\n          \"layout\": {\n              \"text-size\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"step\", [\"get\", \"sizerank\"], 18, 5, 12],\n                  17,\n                  [\"step\", [\"get\", \"sizerank\"], 18, 13, 12]\n              ],\n              \"text-max-angle\": 30,\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]],\n              \"text-font\": [\"DIN Pro Medium\", \"Arial Unicode MS Regular\"],\n              \"symbol-placement\": \"line-center\",\n              \"text-pitch-alignment\": \"viewport\"\n          },\n          \"paint\": {\n              \"text-halo-width\": 0.5,\n              \"text-halo-color\": \"hsl(40, 15%, 100%)\",\n              \"text-halo-blur\": 0.5,\n              \"text-color\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"step\",\n                      [\"get\", \"sizerank\"],\n                      \"hsl(26, 30%, 45%)\",\n                      5,\n                      \"hsl(26, 35%, 35%)\"\n                  ],\n                  17,\n                  [\n                      \"step\",\n                      [\"get\", \"sizerank\"],\n                      \"hsl(26, 30%, 45%)\",\n                      13,\n                      \"hsl(26, 35%, 35%)\"\n                  ]\n              ]\n          }\n      },\n      {\n          \"id\": \"natural-point-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"natural-features\",\n              \"mapbox:group\": \"Natural features, natural-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"natural_label\",\n          \"minzoom\": 4,\n          \"filter\": [\n              \"all\",\n              [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  [\"dock\", \"glacier\", \"landform\", \"water_feature\", \"wetland\"],\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n                  [\n                      \"disputed_dock\",\n                      \"disputed_glacier\",\n                      \"disputed_landform\",\n                      \"disputed_water_feature\",\n                      \"disputed_wetland\"\n                  ],\n                  [\n                      \"all\",\n                      [\"==\", [\"get\", \"disputed\"], \"true\"],\n                      [\n                          \"match\",\n                          [\"get\", \"worldview\"],\n                          [\"all\", \"US\"],\n                          true,\n                          false\n                      ]\n                  ],\n                  false\n              ],\n              [\"==\", [\"geometry-type\"], \"Point\"],\n              [\"<=\", [\"get\", \"filterrank\"], 2]\n          ],\n          \"layout\": {\n              \"text-size\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"step\", [\"get\", \"sizerank\"], 18, 5, 12],\n                  17,\n                  [\"step\", [\"get\", \"sizerank\"], 18, 13, 12]\n              ],\n              \"icon-image\": [\"get\", \"maki\"],\n              \"text-font\": [\"DIN Pro Medium\", \"Arial Unicode MS Regular\"],\n              \"text-offset\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"step\",\n                      [\"get\", \"sizerank\"],\n                      [\"literal\", [0, 0]],\n                      5,\n                      [\"literal\", [0, 0.75]]\n                  ],\n                  17,\n                  [\n                      \"step\",\n                      [\"get\", \"sizerank\"],\n                      [\"literal\", [0, 0]],\n                      13,\n                      [\"literal\", [0, 0.75]]\n                  ]\n              ],\n              \"text-anchor\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"step\", [\"get\", \"sizerank\"], \"center\", 5, \"top\"],\n                  17,\n                  [\"step\", [\"get\", \"sizerank\"], \"center\", 13, \"top\"]\n              ],\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]]\n          },\n          \"paint\": {\n              \"icon-opacity\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"step\", [\"get\", \"sizerank\"], 0, 5, 1],\n                  17,\n                  [\"step\", [\"get\", \"sizerank\"], 0, 13, 1]\n              ],\n              \"text-halo-color\": \"hsl(40, 15%, 100%)\",\n              \"text-halo-width\": 0.5,\n              \"text-halo-blur\": 0.5,\n              \"text-color\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"step\",\n                      [\"get\", \"sizerank\"],\n                      \"hsl(26, 30%, 45%)\",\n                      5,\n                      \"hsl(26, 35%, 35%)\"\n                  ],\n                  17,\n                  [\n                      \"step\",\n                      [\"get\", \"sizerank\"],\n                      \"hsl(26, 30%, 45%)\",\n                      13,\n                      \"hsl(26, 35%, 35%)\"\n                  ]\n              ]\n          }\n      },\n      {\n          \"id\": \"water-line-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"natural-features\",\n              \"mapbox:group\": \"Natural features, natural-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"natural_label\",\n          \"filter\": [\n              \"all\",\n              [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  [\"bay\", \"ocean\", \"reservoir\", \"sea\", \"water\"],\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n                  [\n                      \"disputed_bay\",\n                      \"disputed_ocean\",\n                      \"disputed_reservoir\",\n                      \"disputed_sea\",\n                      \"disputed_water\"\n                  ],\n                  [\n                      \"all\",\n                      [\"==\", [\"get\", \"disputed\"], \"true\"],\n                      [\n                          \"match\",\n                          [\"get\", \"worldview\"],\n                          [\"all\", \"US\"],\n                          true,\n                          false\n                      ]\n                  ],\n                  false\n              ],\n              [\"==\", [\"geometry-type\"], \"LineString\"]\n          ],\n          \"layout\": {\n              \"text-size\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  7,\n                  [\"step\", [\"get\", \"sizerank\"], 20, 6, 18, 12, 12],\n                  10,\n                  [\"step\", [\"get\", \"sizerank\"], 15, 9, 12],\n                  18,\n                  [\"step\", [\"get\", \"sizerank\"], 15, 9, 14]\n              ],\n              \"text-max-angle\": 30,\n              \"text-letter-spacing\": [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  \"ocean\",\n                  0.25,\n                  [\"sea\", \"bay\"],\n                  0.15,\n                  0\n              ],\n              \"text-font\": [\"DIN Pro Italic\", \"Arial Unicode MS Regular\"],\n              \"symbol-placement\": \"line-center\",\n              \"text-pitch-alignment\": \"viewport\",\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]]\n          },\n          \"paint\": {\n              \"text-color\": [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  [\"bay\", \"ocean\", \"sea\"],\n                  \"hsl(205, 65%, 70%)\",\n                  \"hsl(205, 37%, 57%)\"\n              ]\n          }\n      },\n      {\n          \"id\": \"water-point-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"natural-features\",\n              \"mapbox:group\": \"Natural features, natural-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"natural_label\",\n          \"filter\": [\n              \"all\",\n              [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  [\"bay\", \"ocean\", \"reservoir\", \"sea\", \"water\"],\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n                  [\n                      \"disputed_bay\",\n                      \"disputed_ocean\",\n                      \"disputed_reservoir\",\n                      \"disputed_sea\",\n                      \"disputed_water\"\n                  ],\n                  [\n                      \"all\",\n                      [\"==\", [\"get\", \"disputed\"], \"true\"],\n                      [\n                          \"match\",\n                          [\"get\", \"worldview\"],\n                          [\"all\", \"US\"],\n                          true,\n                          false\n                      ]\n                  ],\n                  false\n              ],\n              [\"==\", [\"geometry-type\"], \"Point\"]\n          ],\n          \"layout\": {\n              \"text-line-height\": 1.3,\n              \"text-size\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  7,\n                  [\"step\", [\"get\", \"sizerank\"], 20, 6, 15, 12, 12],\n                  10,\n                  [\"step\", [\"get\", \"sizerank\"], 15, 9, 12]\n              ],\n              \"text-font\": [\"DIN Pro Italic\", \"Arial Unicode MS Regular\"],\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]],\n              \"text-letter-spacing\": [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  \"ocean\",\n                  0.25,\n                  [\"bay\", \"sea\"],\n                  0.15,\n                  0.01\n              ],\n              \"text-max-width\": [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  \"ocean\",\n                  4,\n                  \"sea\",\n                  5,\n                  [\"bay\", \"water\"],\n                  7,\n                  10\n              ]\n          },\n          \"paint\": {\n              \"text-color\": [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  [\"bay\", \"ocean\", \"sea\"],\n                  \"hsl(205, 65%, 70%)\",\n                  \"hsl(205, 37%, 57%)\"\n              ]\n          }\n      },\n      {\n          \"id\": \"poi-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"point-of-interest-labels\",\n              \"mapbox:group\": \"Point of interest labels, poi-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"poi_label\",\n          \"minzoom\": 6,\n          \"filter\": [\n              \"<=\",\n              [\"get\", \"filterrank\"],\n              [\"+\", [\"step\", [\"zoom\"], 0, 16, 1, 17, 2], 2]\n          ],\n          \"layout\": {\n              \"text-size\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"step\", [\"get\", \"sizerank\"], 18, 5, 12],\n                  17,\n                  [\"step\", [\"get\", \"sizerank\"], 18, 13, 12]\n              ],\n              \"icon-image\": [\n                  \"case\",\n                  [\"has\", \"maki_beta\"],\n                  [\n                      \"coalesce\",\n                      [\"image\", [\"get\", \"maki_beta\"]],\n                      [\"image\", [\"get\", \"maki\"]]\n                  ],\n                  [\"image\", [\"get\", \"maki\"]]\n              ],\n              \"text-font\": [\"DIN Pro Medium\", \"Arial Unicode MS Regular\"],\n              \"text-offset\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"step\",\n                      [\"get\", \"sizerank\"],\n                      [\"literal\", [0, 0]],\n                      5,\n                      [\"literal\", [0, 0.75]]\n                  ],\n                  17,\n                  [\n                      \"step\",\n                      [\"get\", \"sizerank\"],\n                      [\"literal\", [0, 0]],\n                      13,\n                      [\"literal\", [0, 0.75]]\n                  ]\n              ],\n              \"text-anchor\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"step\", [\"get\", \"sizerank\"], \"center\", 5, \"top\"],\n                  17,\n                  [\"step\", [\"get\", \"sizerank\"], \"center\", 13, \"top\"]\n              ],\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]]\n          },\n          \"paint\": {\n              \"icon-opacity\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"step\", [\"get\", \"sizerank\"], 0, 5, 1],\n                  17,\n                  [\"step\", [\"get\", \"sizerank\"], 0, 13, 1]\n              ],\n              \"text-halo-color\": [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  \"park_like\",\n                  \"hsl(78, 70%, 100%)\",\n                  \"medical\",\n                  \"hsl(3, 43%, 100%)\",\n                  \"hsl(40, 15%, 100%)\"\n              ],\n              \"text-halo-width\": 0.5,\n              \"text-halo-blur\": 0.5,\n              \"text-color\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"step\",\n                      [\"get\", \"sizerank\"],\n                      [\n                          \"match\",\n                          [\"get\", \"class\"],\n                          \"food_and_drink\",\n                          \"hsl(20, 42%, 58%)\",\n                          \"park_like\",\n                          \"hsl(76, 51%, 26%)\",\n                          \"medical\",\n                          \"hsl(3, 18%, 55%)\",\n                          \"hsl(26, 30%, 45%)\"\n                      ],\n                      5,\n                      [\n                          \"match\",\n                          [\"get\", \"class\"],\n                          \"food_and_drink\",\n                          \"hsl(20, 74%, 41%)\",\n                          \"park_like\",\n                          \"hsl(76, 50%, 15%)\",\n                          \"medical\",\n                          \"hsl(3, 24%, 45%)\",\n                          \"hsl(26, 35%, 35%)\"\n                      ]\n                  ],\n                  17,\n                  [\n                      \"step\",\n                      [\"get\", \"sizerank\"],\n                      [\n                          \"match\",\n                          [\"get\", \"class\"],\n                          \"food_and_drink\",\n                          \"hsl(20, 42%, 58%)\",\n                          \"park_like\",\n                          \"hsl(76, 51%, 26%)\",\n                          \"medical\",\n                          \"hsl(3, 18%, 55%)\",\n                          \"hsl(26, 30%, 45%)\"\n                      ],\n                      13,\n                      [\n                          \"match\",\n                          [\"get\", \"class\"],\n                          \"food_and_drink\",\n                          \"hsl(20, 74%, 41%)\",\n                          \"park_like\",\n                          \"hsl(76, 50%, 15%)\",\n                          \"medical\",\n                          \"hsl(3, 24%, 45%)\",\n                          \"hsl(26, 35%, 35%)\"\n                      ]\n                  ]\n              ]\n          }\n      },\n      {\n          \"id\": \"airport-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"transit\",\n              \"mapbox:group\": \"Transit, transit-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"airport_label\",\n          \"minzoom\": 8,\n          \"filter\": [\n              \"match\",\n              [\"get\", \"class\"],\n              [\"military\", \"civil\"],\n              [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n              [\"disputed_military\", \"disputed_civil\"],\n              [\n                  \"all\",\n                  [\"==\", [\"get\", \"disputed\"], \"true\"],\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false]\n              ],\n              false\n          ],\n          \"layout\": {\n              \"text-line-height\": 1.1,\n              \"text-size\": [\"step\", [\"get\", \"sizerank\"], 18, 9, 12],\n              \"icon-image\": [\"get\", \"maki\"],\n              \"text-font\": [\"DIN Pro Medium\", \"Arial Unicode MS Regular\"],\n              \"text-offset\": [0, 0.75],\n              \"text-rotation-alignment\": \"viewport\",\n              \"text-anchor\": \"top\",\n              \"text-field\": [\n                  \"step\",\n                  [\"get\", \"sizerank\"],\n                  [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]],\n                  15,\n                  [\"get\", \"ref\"]\n              ],\n              \"text-letter-spacing\": 0.01,\n              \"text-max-width\": 9\n          },\n          \"paint\": {\n              \"text-color\": \"hsl(225, 4%, 40%)\",\n              \"text-halo-color\": \"hsl(225, 30%, 100%)\",\n              \"text-halo-width\": 1\n          }\n      },\n      {\n          \"id\": \"settlement-subdivision-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"place-labels\",\n              \"mapbox:group\": \"Place labels, place-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"place_label\",\n          \"minzoom\": 10,\n          \"maxzoom\": 15,\n          \"filter\": [\n              \"all\",\n              [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  \"settlement_subdivision\",\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n                  \"disputed_settlement_subdivision\",\n                  [\n                      \"all\",\n                      [\"==\", [\"get\", \"disputed\"], \"true\"],\n                      [\n                          \"match\",\n                          [\"get\", \"worldview\"],\n                          [\"all\", \"US\"],\n                          true,\n                          false\n                      ]\n                  ],\n                  false\n              ],\n              [\"<=\", [\"get\", \"filterrank\"], 3]\n          ],\n          \"layout\": {\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]],\n              \"text-transform\": \"uppercase\",\n              \"text-font\": [\"DIN Pro Regular\", \"Arial Unicode MS Regular\"],\n              \"text-letter-spacing\": [\n                  \"match\",\n                  [\"get\", \"type\"],\n                  \"suburb\",\n                  0.15,\n                  0.1\n              ],\n              \"text-max-width\": 7,\n              \"text-padding\": 3,\n              \"text-size\": [\n                  \"interpolate\",\n                  [\"cubic-bezier\", 0.5, 0, 1, 1],\n                  [\"zoom\"],\n                  11,\n                  [\"match\", [\"get\", \"type\"], \"suburb\", 11, 10.5],\n                  15,\n                  [\"match\", [\"get\", \"type\"], \"suburb\", 15, 14]\n              ]\n          },\n          \"paint\": {\n              \"text-halo-color\": \"hsla(40, 15%, 100%, 0.75)\",\n              \"text-halo-width\": 1,\n              \"text-color\": \"hsl(0, 0%, 27%)\",\n              \"text-halo-blur\": 0.5\n          }\n      },\n      {\n          \"id\": \"settlement-minor-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"place-labels\",\n              \"mapbox:group\": \"Place labels, place-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"place_label\",\n          \"minzoom\": 3,\n          \"maxzoom\": 13,\n          \"filter\": [\n              \"all\",\n              [\"<=\", [\"get\", \"filterrank\"], 3],\n              [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  \"settlement\",\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n                  \"disputed_settlement\",\n                  [\n                      \"all\",\n                      [\"==\", [\"get\", \"disputed\"], \"true\"],\n                      [\n                          \"match\",\n                          [\"get\", \"worldview\"],\n                          [\"all\", \"US\"],\n                          true,\n                          false\n                      ]\n                  ],\n                  false\n              ],\n              [\n                  \"step\",\n                  [\"zoom\"],\n                  [\">\", [\"get\", \"symbolrank\"], 6],\n                  4,\n                  [\">=\", [\"get\", \"symbolrank\"], 7],\n                  6,\n                  [\">=\", [\"get\", \"symbolrank\"], 8],\n                  7,\n                  [\">=\", [\"get\", \"symbolrank\"], 10],\n                  10,\n                  [\">=\", [\"get\", \"symbolrank\"], 11],\n                  11,\n                  [\">=\", [\"get\", \"symbolrank\"], 13],\n                  12,\n                  [\">=\", [\"get\", \"symbolrank\"], 15]\n              ]\n          ],\n          \"layout\": {\n              \"icon-image\": \"\",\n              \"text-font\": [\"DIN Pro Regular\", \"Arial Unicode MS Regular\"],\n              \"text-radial-offset\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"match\", [\"get\", \"capital\"], 2, 0.6, 0.55],\n                  8,\n                  0\n              ],\n              \"text-anchor\": [\"step\", [\"zoom\"], \"center\", 8, \"center\"],\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]],\n              \"text-max-width\": 7,\n              \"text-line-height\": 1.1,\n              \"text-size\": [\n                  \"interpolate\",\n                  [\"cubic-bezier\", 0.2, 0, 0.9, 1],\n                  [\"zoom\"],\n                  3,\n                  [\n                      \"step\",\n                      [\"get\", \"symbolrank\"],\n                      12,\n                      9,\n                      11,\n                      10,\n                      10.5,\n                      12,\n                      9.5,\n                      14,\n                      8.5,\n                      16,\n                      6.5,\n                      17,\n                      4\n                  ],\n                  13,\n                  [\n                      \"step\",\n                      [\"get\", \"symbolrank\"],\n                      23,\n                      9,\n                      21,\n                      10,\n                      19,\n                      11,\n                      17,\n                      12,\n                      16,\n                      13,\n                      15,\n                      15,\n                      13\n                  ]\n              ]\n          },\n          \"paint\": {\n              \"text-color\": \"hsl(0, 0%, 0%)\",\n              \"text-halo-color\": \"hsl(40, 15%, 100%)\",\n              \"text-halo-width\": 1,\n              \"icon-opacity\": [\"step\", [\"zoom\"], 1, 8, 0],\n              \"text-halo-blur\": 1\n          }\n      },\n      {\n          \"id\": \"settlement-major-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"place-labels\",\n              \"mapbox:group\": \"Place labels, place-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"place_label\",\n          \"minzoom\": 3,\n          \"maxzoom\": 15,\n          \"filter\": [\n              \"all\",\n              [\"<=\", [\"get\", \"filterrank\"], 3],\n              [\n                  \"match\",\n                  [\"get\", \"class\"],\n                  \"settlement\",\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n                  \"disputed_settlement\",\n                  [\n                      \"all\",\n                      [\"==\", [\"get\", \"disputed\"], \"true\"],\n                      [\n                          \"match\",\n                          [\"get\", \"worldview\"],\n                          [\"all\", \"US\"],\n                          true,\n                          false\n                      ]\n                  ],\n                  false\n              ],\n              [\n                  \"step\",\n                  [\"zoom\"],\n                  false,\n                  3,\n                  [\"<=\", [\"get\", \"symbolrank\"], 6],\n                  4,\n                  [\"<\", [\"get\", \"symbolrank\"], 7],\n                  6,\n                  [\"<\", [\"get\", \"symbolrank\"], 8],\n                  7,\n                  [\"<\", [\"get\", \"symbolrank\"], 10],\n                  10,\n                  [\"<\", [\"get\", \"symbolrank\"], 11],\n                  11,\n                  [\"<\", [\"get\", \"symbolrank\"], 13],\n                  12,\n                  [\"<\", [\"get\", \"symbolrank\"], 15],\n                  13,\n                  [\">=\", [\"get\", \"symbolrank\"], 11],\n                  14,\n                  [\">=\", [\"get\", \"symbolrank\"], 15]\n              ]\n          ],\n          \"layout\": {\n              \"icon-image\": \"\",\n              \"text-font\": [\"DIN Pro Medium\", \"Arial Unicode MS Regular\"],\n              \"text-radial-offset\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"match\", [\"get\", \"capital\"], 2, 0.6, 0.55],\n                  8,\n                  0\n              ],\n              \"text-anchor\": [\"step\", [\"zoom\"], \"center\", 8, \"center\"],\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]],\n              \"text-max-width\": 7,\n              \"text-line-height\": 1.1,\n              \"text-size\": [\n                  \"interpolate\",\n                  [\"cubic-bezier\", 0.2, 0, 0.9, 1],\n                  [\"zoom\"],\n                  3,\n                  [\"step\", [\"get\", \"symbolrank\"], 13, 6, 12],\n                  6,\n                  [\"step\", [\"get\", \"symbolrank\"], 16, 6, 15, 7, 14],\n                  8,\n                  [\"step\", [\"get\", \"symbolrank\"], 18, 9, 17, 10, 15],\n                  15,\n                  [\n                      \"step\",\n                      [\"get\", \"symbolrank\"],\n                      23,\n                      9,\n                      22,\n                      10,\n                      20,\n                      11,\n                      18,\n                      12,\n                      16,\n                      13,\n                      15,\n                      15,\n                      13\n                  ]\n              ]\n          },\n          \"paint\": {\n              \"text-color\": \"hsl(0, 0%, 0%)\",\n              \"text-halo-color\": \"hsl(40, 15%, 100%)\",\n              \"text-halo-width\": 1,\n              \"icon-opacity\": [\"step\", [\"zoom\"], 1, 8, 0],\n              \"text-halo-blur\": 1\n          }\n      },\n      {\n          \"id\": \"state-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"place-labels\",\n              \"mapbox:group\": \"Place labels, place-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"place_label\",\n          \"minzoom\": 3,\n          \"maxzoom\": 9,\n          \"filter\": [\n              \"match\",\n              [\"get\", \"class\"],\n              \"state\",\n              [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n              \"disputed_state\",\n              [\n                  \"all\",\n                  [\"==\", [\"get\", \"disputed\"], \"true\"],\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false]\n              ],\n              false\n          ],\n          \"layout\": {\n              \"text-size\": [\n                  \"interpolate\",\n                  [\"cubic-bezier\", 0.85, 0.7, 0.65, 1],\n                  [\"zoom\"],\n                  4,\n                  [\"step\", [\"get\", \"symbolrank\"], 10, 6, 9.5, 7, 9],\n                  9,\n                  [\"step\", [\"get\", \"symbolrank\"], 21, 6, 16, 7, 13]\n              ],\n              \"text-transform\": \"uppercase\",\n              \"text-font\": [\"DIN Pro Bold\", \"Arial Unicode MS Bold\"],\n              \"text-field\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\n                      \"step\",\n                      [\"get\", \"symbolrank\"],\n                      [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]],\n                      5,\n                      [\n                          \"coalesce\",\n                          [\"get\", \"abbr\"],\n                          [\"get\", \"name_en\"],\n                          [\"get\", \"name\"]\n                      ]\n                  ],\n                  5,\n                  [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]]\n              ],\n              \"text-letter-spacing\": 0.15,\n              \"text-max-width\": 6\n          },\n          \"paint\": {\n              \"text-color\": \"hsl(0, 0%, 0%)\",\n              \"text-halo-color\": \"hsl(40, 15%, 100%)\",\n              \"text-halo-width\": 1\n          }\n      },\n      {\n          \"id\": \"country-label\",\n          \"type\": \"symbol\",\n          \"metadata\": {\n              \"mapbox:featureComponent\": \"place-labels\",\n              \"mapbox:group\": \"Place labels, place-labels\"\n          },\n          \"source\": \"composite\",\n          \"source-layer\": \"place_label\",\n          \"minzoom\": 1,\n          \"maxzoom\": 10,\n          \"filter\": [\n              \"match\",\n              [\"get\", \"class\"],\n              \"country\",\n              [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false],\n              \"disputed_country\",\n              [\n                  \"all\",\n                  [\"==\", [\"get\", \"disputed\"], \"true\"],\n                  [\"match\", [\"get\", \"worldview\"], [\"all\", \"US\"], true, false]\n              ],\n              false\n          ],\n          \"layout\": {\n              \"icon-image\": \"\",\n              \"text-field\": [\"coalesce\", [\"get\", \"name_en\"], [\"get\", \"name\"]],\n              \"text-line-height\": 1.1,\n              \"text-max-width\": 6,\n              \"text-font\": [\"DIN Pro Medium\", \"Arial Unicode MS Regular\"],\n              \"text-radial-offset\": [\"step\", [\"zoom\"], 0.6, 8, 0],\n              \"text-size\": [\n                  \"interpolate\",\n                  [\"cubic-bezier\", 0.2, 0, 0.7, 1],\n                  [\"zoom\"],\n                  1,\n                  [\"step\", [\"get\", \"symbolrank\"], 11, 4, 9, 5, 8],\n                  9,\n                  [\"step\", [\"get\", \"symbolrank\"], 22, 4, 19, 5, 17]\n              ]\n          },\n          \"paint\": {\n              \"icon-opacity\": [\n                  \"step\",\n                  [\"zoom\"],\n                  [\"case\", [\"has\", \"text_anchor\"], 1, 0],\n                  7,\n                  0\n              ],\n              \"text-color\": \"hsl(0, 0%, 0%)\",\n              \"text-halo-color\": [\n                  \"interpolate\",\n                  [\"linear\"],\n                  [\"zoom\"],\n                  2,\n                  \"hsla(40, 15%, 100%, 0.75)\",\n                  3,\n                  \"hsl(40, 15%, 100%)\"\n              ],\n              \"text-halo-width\": 1.25\n          }\n      }\n  ],\n  \"created\": \"2022-10-07T20:32:58.385Z\",\n  \"modified\": \"2022-10-07T20:32:58.385Z\",\n  \"id\": \"cl8yy2i2c000014lk0s7mnr7e\",\n  \"owner\": \"bartwr\",\n  \"visibility\": \"private\",\n  \"protected\": false,\n  \"draft\": false\n}\n\nexport default base;\n","import baseStyle from '../MapStyles/base.js';\nimport nine3030Style from '../MapStyles/nine3030.js';\nimport md5 from 'md5';\nimport {layers} from '../layers/index.js';\nimport {addSources} from './sources.js';\nimport {\n  addLayers,\n  activateLayers\n} from './layers.js';\n\nexport const getMapStyles = () => {\n  return {\n    // NOTE: mapbox:// urls are not supported anymore.\n    // See https://github.com/maplibre/maplibre-gl-js/issues/1225#issuecomment-1118769488\n    base: nine3030Style,\n    satelite: 'https://api.maptiler.com/maps/hybrid/style.json?key=ZH8yI08EPvuzF57Lyc61'\n  }\n}\n\n// Variable to keep track of the map style that we used last\nlet mapStyleHash = md5(getMapStyles().base);\n// Function setMapStyle -- It reorders all layers, so the layers stay in the order we want\nexport const setMapStyle = async (map, styleUrlOrObject) => {\n  if(! map) return;\n  if(! styleUrlOrObject) return;\n\n  const newMapStyleHash = md5(styleUrlOrObject);\n  if(mapStyleHash === newMapStyleHash) {\n    return;\n  }\n  mapStyleHash = newMapStyleHash;\n\n  // Code source: https://github.com/mapbox/mapbox-gl-js/issues/4006#issuecomment-368273916\n  // and https://github.com/mapbox/mapbox-gl-js/issues/4006#issuecomment-1114095622\n  //\n  // Related:\n  //- https://stackoverflow.com/a/36169495\n  //- https://bl.ocks.org/tristen/0c0ed34e210a04e89984\n  //- https://stackoverflow.com/a/42911634\n  const currentStyle = map.getStyle();\n\n  let newStyle = styleUrlOrObject;\n  // If style URL was given: fetch JSON\n  if(typeof styleUrlOrObject === 'string') {\n    const response = await fetch(styleUrlOrObject);\n    const responseJson = await response.json();\n    newStyle = responseJson;\n  }\n\n  // Ensure any sources from the current style are copied across to the new style\n  newStyle.sources = Object.assign({},\n    currentStyle.sources,\n    newStyle.sources\n  );\n\n  // Find the index of where to insert our layers to retain in the new style\n  // Default to on top\n  const labelIndex = newStyle.layers.length;\n\n  // App layers are the layers to retain\n  const appLayers = currentStyle.layers.filter((el) => {\n    return layers[el.id]//Keep layer if it's a DD layer\n            || el.id.indexOf('gl-draw-') > -1;//Keep layer if it's a gl-draw layer;\n  });\n\n  // Remove appLayers from newStyle.layers to prevent duplicates\n  newStyle.layers = newStyle.layers.filter((el) => {\n    return ! layers[el.id]//Remove layer if it's a DD layer\n            && el.id.indexOf('gl-draw-') <= -1;//Remove layer if it's a gl-draw layer;\n  });\n\n  // Add app layers to newStyle's layers\n  newStyle.layers = newStyle.layers.concat(appLayers);\n\n  // Set new map style (having style _and_ DD layers)\n  await map.setStyle(newStyle);\n}\n","import {PureComponent } from 'react';\n\nclass CustomizedXAxisTick extends PureComponent {\n  render() {\n    const { x, y, payload } = this.props;\n\n    return (\n      <g transform={`translate(${x},${y})`}>\n        <text x={0} y={0} dy={16} textAnchor=\"middle\" fill=\"#666\" transform=\"rotate(0)\" fontSize=\"0.8em\">\n          {payload.value}\n        </text>\n      </g>\n    );\n  }\n}\n\nclass CustomizedYAxisTick extends PureComponent {\n  render() {\n    const { x, y, payload } = this.props;\n\n    return (\n      <g transform={`translate(${x},${y})`}>\n        <text x={-4} y={0} dy={3} textAnchor=\"end\" fill=\"#666\" transform=\"rotate(0)\" fontSize=\"0.8em\">\n          {payload.value}\n        </text>\n      </g>\n    );\n  }\n}\n\nexport {\n  CustomizedXAxisTick,\n  CustomizedYAxisTick\n}\n","import { createFilterparameters } from '../poll-api/pollTools.js';\nimport { DISPLAYMODE_OTHER } from '../reducers/layers.js';\nimport saveAs from 'file-saver';\n\nconst getFetchOptions = (token) => {\n  return {\n    headers: {\n      \"authorization\": `Bearer ${token}`,\n      'mode':'no-cors'\n    }\n  }\n}\n\nexport const getAggregatedStats = async (token, key, options) => {\n  // Define API end point URL\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/${key}?aggregation_level=${options.aggregationLevel}&aggregation_time=${options.aggregationTime}`;\n\n  // Set filter params if needed\n  // Example URL: `https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/${key}?start_time=${options.startTime}&end_time=${options.endTime}&operators=${options.operators}&zone_ids=${options.zoneIds}&aggregation_level=${options.aggregationLevel}`;\n  let filterParams = createFilterparameters(DISPLAYMODE_OTHER, options.filter, options.metadata);\n  if(filterParams.length>0) url += \"&\" + filterParams.join(\"&\");\n\n  // Get API response  \n  const fetchOptions = getFetchOptions(token)\n  const response = await fetch(url, fetchOptions);\n  const responseJson = await response.json();\n\n  // Return\n  return responseJson;\n}\nexport const getAggregatedStats_timescaleDB = async (token, key, options) => {\n  // Define API end point URL\n  //\n  // curl --location --request GET 'https://api.deelfietsdashboard.nl/dashboard-api/stats_v2/availability_stats?aggregation_level=5m&group_by=operator&start_time=2022-11-07T00:00:00&end_time=2022-11-09T00:00:00&zone_ids=51856' \\\n  // --header 'Authorization: Bearer TOKEN'\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/stats_v2/availability_stats?`;\n  url += `aggregation_level=${options.aggregationLevel}`\n  url += `&group_by=operator`;\n  url += `&aggregation_function=${options.aggregationFunction || 'AVG'}`;\n\n  // Set filter params if needed\n  // Example URL: `https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/${key}?start_time=${options.startTime}&end_time=${options.endTime}&operators=${options.operators}&zone_ids=${options.zoneIds}&aggregation_level=${options.aggregationLevel}`;\n  let filterParams = createFilterparameters(DISPLAYMODE_OTHER, options.filter, options.metadata);\n  if(filterParams.length>0) url += \"&\" + filterParams.join(\"&\");\n\n  // Get API response  \n  const fetchOptions = getFetchOptions(token)\n  const response = await fetch(url, fetchOptions);\n  const responseJson = await response.json();\n\n  // Return\n  return responseJson;\n}\n\nexport const downloadReport = async (token, options) => {\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/stats/generate_report?start_time=${options.startDate}&end_time=${options.endDate}&gm_code=${options.gm_code}`;\n\n  // Get API response  \n  const fetchOptions = getFetchOptions(token)\n  const response = await fetch(url, fetchOptions);\n  const responseBlob = await response.blob();\n\n  saveAs(responseBlob, `rapportage_${options.startDate}-${options.endDate}_${options.gm_code}.xlsx`)\n}\n\nexport const downloadRawData = async (token, options) => {\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/raw_data?start_time=${options.startDate}&end_time=${options.endDate}`;\n\n  // Get API response      \n  const fetchOptions = getFetchOptions(token)\n  const response = await fetch(url, fetchOptions);\n  const responseBlob = await response.blob();\n\n  saveAs(responseBlob, `export_dashboarddeelmobiliteit_${options.startDate}-${options.endDate}_${options.gm_code}.zip`)\n}\n","import './Overlay.css'\n// import { useSelector } from 'react-redux';\n\nexport default function Misc(props) {\n  return (\n    <div className={`Overlay relative z-20 w-full h-full lg:w-2/3 bg-white pb-16`}>\n      <div className=\"Overlay-inner overflow-y-auto h-full\">\n        {props.children}\n      </div>\n    </div>\n  );\n}\n","import React, {\n  useRef,\n  // useState\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport './SlideBox.css';\n\nfunction SlideBox(props) {\n  const dispatch = useDispatch();\n  const containerRef = useRef(null);\n  const NAME = props.name.toUpperCase();\n\n  const isVisible = useSelector(state => {\n    return state.ui ? state.ui[NAME] : false;\n  });\n\n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  // Show/hide slidebox on toggle click\n  const toggleSlideBox = () => {\n    // If filterbar was visible, hide extended filterbar\n    if(isVisible) {\n      setVisibility('FILTERBAR_EXTENDED', false);\n    }\n    // Now toggle slidebox\n    setVisibility(NAME, ! isVisible)\n  };\n\n  const {backgroundColor} = props.options || {};\n\n  return <div className={`\n      SlideBox\n      direction-${props.direction}\n      relative\n      ${isVisible ? '' : 'is-hidden'}\n      z-10\n    `} ref={containerRef} style={props.style || {}}>\n    <div className=\"\n      SlideBox-inner\n      h-full\n    \" style={{backgroundColor: backgroundColor}}>\n      {props.children}\n    </div>\n    <div\n      className=\"SlideBox-toggle-wrapper z-10 overflow-hidden\"\n      >\n      <div\n        className=\"SlideBox-toggle\"\n        onClick={() => toggleSlideBox()}\n        style={{backgroundColor: backgroundColor}}\n        >\n        <span>\n          {props.options.title || 'Lagen'}\n        </span>\n      </div>\n    </div>\n  </div>\n}\n\nexport default SlideBox;\n","const layer = {\n  'id': 'vehicles-point',\n  'type': 'symbol',\n  'source': 'vehicles',\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], '-p:', ['get', 'duration_bin']],\n    // 'icon-size': 0.4,\n    'icon-size': [\n      'interpolate',\n        ['linear'],\n        ['zoom'],\n        11,\n        0.2,\n        16,\n        0.7\n      ],\n    'icon-allow-overlap': true,\n  },\n  'minzoom': 6,\n  // 'paint': {\n  // // Size circle radius by earthquake magnitude and zoom level\n  // 'circle-radius': [\n  //   'interpolate', ['linear'], ['zoom'],\n  //   12, 2,\n  //   16, ['*', 2, ['get', 'amount']]\n  // ],\n  // Color circle by earthquake magnitude\n  // 'circle-color': [\n  //   'interpolate',\n  //   ['linear'],\n  //   ['get', 'mag'],\n  //   1,\n  //   'rgba(33,102,172,0)',\n  //   2,\n  //   'rgb(103,169,207)',\n  //   3,\n  //   'rgb(209,229,240)',\n  //   4,\n  //   'rgb(253,219,199)',\n  //   5,\n  //   'rgb(239,138,98)',\n  //   6,\n  //   'rgb(178,24,43)'\n  // ],\n  // 'circle-stroke-color': 'white',\n  // 'circle-stroke-width': 1,\n  // Transition from heatmap to circle layer by zoom level\n    // 'circle-opacity': [\n    //   'interpolate',\n    //   ['linear'],\n    //   ['zoom'],\n    //   7,\n    //   0,\n    //   8,\n    //   1\n    // ],\n    // 'circle-color': ['get', 'color']\n  //}\n}\n\nexport default layer;\n","export const heatmapIntensity = [\n  'interpolate',\n  ['linear'],\n  ['zoom'],\n  0, 0.0025,\n  5, 0.005,\n  7.5, 0.02,\n  10, 0.1,\n  12, 0.25,/* city level */\n  15, 0.3,\n  17, 0.5,\n  20, 1,\n]\n\nexport const clustersPointLayer = {\n  'type': 'symbol',\n  filter: ['!', ['has', 'point_count']],\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], '-p:', ['get', 'duration_bin']],\n    'icon-size': [\n      'interpolate',\n        ['linear'],\n        ['zoom'],\n        11,\n        0.2,\n        16,\n        0.7\n      ],\n    'icon-allow-overlap': true,\n  },\n  // 'minzoom': 18// Already defined in ./vehicle-clusters.js\n}\n","import {heatmapIntensity} from './common.js'\n\nconst layer = {\n  'id': 'vehicles-heatmap',\n  'type': 'heatmap',\n  'source': 'vehicles',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0, 0.0001,\n      10, 1\n    ],\n\n    'heatmap-intensity': heatmapIntensity,\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0, 'rgba(0, 0, 255, 0)',\n      0.25, '#ffd837',\n      0.5, '#fe862e',\n      0.75, '#fd3e48',\n      1, '#9a231f'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    // Groter = grotere radius = duidelijker waar het druk is\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 10,\n      10, 12,\n      12, 20,\n      15, 40,\n      20, 60,\n      30, 100,\n      40, 100\n    ],\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7, 1,\n      9, 0.8\n    ]\n  }\n}\n\nexport default layer;\n","import {heatmapIntensity} from './common.js'\n\nconst layer = {\n  'id': 'rentals-origins-heatmap',\n  'type': 'heatmap',\n  'source': 'rentals-origins',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0, 0.0001,\n      10, 1\n    ],\n\n    'heatmap-intensity': heatmapIntensity,\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0, 'rgba(0, 0, 255, 0)',\n      0.25, '#ffd837',\n      0.5, '#fe862e',\n      0.75, '#fd3e48',\n      1, '#9a231f'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    // Groter = grotere radius = duidelijker waar het druk is\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 10,\n      10, 12,\n      12, 20,\n      15, 40,\n      20, 60,\n      30, 100,\n      40, 100\n    ],\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7, 1,\n      9, 0.8\n    ]\n  }\n}\n\nexport default layer;\n","import {heatmapIntensity} from './common.js'\n\nconst layer = {\n  'id': 'rentals-destinations-heatmap',\n  'type': 'heatmap',\n  'source': 'rentals-destinations',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0, 0.0001,\n      10, 1\n    ],\n\n    'heatmap-intensity': heatmapIntensity,\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0, 'rgba(0, 0, 255, 0)',\n      0.25, '#ffd837',\n      0.5, '#fe862e',\n      0.75, '#fd3e48',\n      1, '#9a231f'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    // Groter = grotere radius = duidelijker waar het druk is\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 10,\n      10, 12,\n      12, 20,\n      15, 40,\n      20, 60,\n      30, 100,\n      40, 100\n    ],\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7, 1,\n      9, 0.8\n    ]\n  }\n}\n\nexport default layer;\n","import vehiclesPoint from './vehicles-point.js';\nimport vehiclesHeatmap from './vehicles-heatmap.js';\nimport vehiclesClusters from './vehicles-clusters.js';\nimport vehiclesClustersCount from './vehicles-clusters-count.js';\nimport vehiclesClustersPoint from './vehicles-clusters-point.js';\n\nimport rentalsOriginsPoint from './rentals-origins-point.js';\nimport rentalsOriginsHeatmap from './rentals-origins-heatmap.js';\nimport rentalsOriginsClusters from './rentals-origins-clusters.js';\nimport rentalsOriginsClustersCount from './rentals-origins-clusters-count.js';\nimport rentalsOriginsClustersPoint from './rentals-origins-clusters-point.js';\n\nimport rentalsDestinationsPoint from './rentals-destinations-point.js';\nimport rentalsDestinationsHeatmapCityLevel from './rentals-destinations-heatmap.js';\nimport rentalsDestinationsClusters from './rentals-destinations-clusters.js';\nimport rentalsDestinationsClustersCount from './rentals-destinations-clusters-count.js';\nimport rentalsDestinationsClustersPoint from './rentals-destinations-clusters-point.js';\n\nimport zonesMetricsPublic from './zones-metrics-public.js';\nimport zonesMetricsPublicBorder from './zones-metrics-public-border.js';\n\nimport zonesGeodata from './zones-geodata.js';\nimport zonesGeodataBorder from './zones-geodata-border.js';\n\nimport zonesIsochrones from './zones-isochrones.js';\n\n// The sort order sets the loading order\n// - 'Zones' have to be at the background,\n// - 'Cluster counts' have to be on top of 'Clusters'\nexport const layers = {\n  'zones-geodata': zonesGeodata,\n  'zones-geodata-border': zonesGeodataBorder,\n\n  'vehicles-point': vehiclesPoint,\n  'vehicles-clusters': vehiclesClusters,\n  'vehicles-clusters-count': vehiclesClustersCount,\n  'vehicles-clusters-point': vehiclesClustersPoint,\n  'vehicles-heatmap': vehiclesHeatmap,\n\n  'rentals-origins-point': rentalsOriginsPoint,\n  'rentals-origins-clusters': rentalsOriginsClusters,\n  'rentals-origins-clusters-count': rentalsOriginsClustersCount,\n  'rentals-origins-clusters-point': rentalsOriginsClustersPoint,\n  'rentals-origins-heatmap': rentalsOriginsHeatmap,\n\n  'rentals-destinations-point': rentalsDestinationsPoint,\n  'rentals-destinations-clusters': rentalsDestinationsClusters,\n  'rentals-destinations-clusters-count': rentalsDestinationsClustersCount,\n  'rentals-destinations-clusters-point': rentalsDestinationsClustersPoint,\n  'rentals-destinations-heatmap': rentalsDestinationsHeatmapCityLevel,\n\n  'zones-metrics-public': zonesMetricsPublic,\n  'zones-metrics-public-border': zonesMetricsPublicBorder,\n\n  'zones-isochrones': zonesIsochrones\n}\n","const layer = {\n  'id': 'zones-geodata',\n  'type': 'fill',\n  'source': 'zones-geodata',\n  'paint': {\n    'fill-color': '#d1d1e8',\n    'fill-opacity': 0.3\n  },\n}\n\n// 'filter': ['==', '$type', 'MultiPolygon'],\n// 'minzoom': 1,\n\nexport default layer;","const layer = {\n  'id': 'zones-geodata-border',\n  'type': 'line',\n  'source': 'zones-geodata',\n  'paint': {\n    'line-color': '#001299',\n    'line-opacity': 0.6,\n    'line-dasharray': [2, 2],\n  },\n}\n\nexport default layer;","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'vehicles-clusters',\n  'type': 'circle',\n  'source': 'vehicles-clusters',\n  filter: ['has', 'point_count'],\n  paint: {\n    // Use step expressions (https://maplibre.org/maplibre-gl-js-docs/style-spec/#expressions-step)\n    // with three steps to implement three types of circles:\n    //   * Blue, 20px circles when point count is less than 100\n    //   * Yellow, 30px circles when point count is between 100 and 750\n    //   * Pink, 40px circles when point count is greater than or equal to 750\n    'circle-color': '#1FA024',\n    'circle-radius': [\n      'step',\n      ['get', 'point_count'],\n      20, 100,\n      30, 750,\n      40\n    ]\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'vehicles-clusters-count',\n  'type': 'symbol',\n  'source': 'vehicles-clusters',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': [\n      'step',\n      ['get', 'point_count'],\n      16, 100,\n      20, 750,\n      30\n    ]\n\n  },\n  paint: {\n    'text-color': '#fff',\n    // 'text-halo-color': '#fff',\n    // 'text-halo-width': 2\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","import {clustersPointLayer} from './common.js';\n\nconst layer = Object.assign({}, clustersPointLayer, {\n  'id': 'vehicles-clusters-point',\n  'source': 'vehicles-clusters',\n})\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-origins-point',\n  'type': 'symbol',\n  'source': 'rentals-origins',\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], '-r:', ['get', 'distance_bin']],\n    // 'icon-size': 0.4,\n    'icon-size': [\n      'interpolate',\n        ['linear'],\n        ['zoom'],\n        11,\n        0.2,\n        16,\n        0.7\n      ],\n    'icon-allow-overlap': true,\n  },\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-origins-clusters',\n  'type': 'circle',\n  'source': 'rentals-origins-clusters',\n  filter: ['has', 'point_count'],\n  paint: {\n    // Use step expressions (https://maplibre.org/maplibre-gl-js-docs/style-spec/#expressions-step)\n    // with three steps to implement three types of circles:\n    //   * Blue, 20px circles when point count is less than 100\n    //   * Yellow, 30px circles when point count is between 100 and 750\n    //   * Pink, 40px circles when point count is greater than or equal to 750\n    'circle-color': '#1FA024',\n    'circle-radius': [\n      'step',\n      ['get', 'point_count'],\n      20, 100,\n      30, 750,\n      40\n    ]\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-origins-clusters-count',\n  'type': 'symbol',\n  'source': 'rentals-origins-clusters',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': [\n      'step',\n      ['get', 'point_count'],\n      16, 100,\n      20, 750,\n      30\n    ]\n\n  },\n  paint: {\n    'text-color': '#fff',\n    // 'text-halo-color': '#fff',\n    // 'text-halo-width': 2\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","import {clustersPointLayer} from './common.js';\n\nconst layer = Object.assign({}, clustersPointLayer, {\n  'id': 'rentals-origins-clusters-point',\n  'source': 'rentals-origins-clusters',\n  'layout': Object.assign({}, clustersPointLayer.layout, {\n    'icon-image': [\"concat\", ['get', 'system_id'], '-r:', ['get', 'distance_bin']]\n  }),\n})\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-destinations-point',\n  'type': 'symbol',\n  'source': 'rentals-destinations',\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], '-r:', ['get', 'distance_bin']],\n    // 'icon-size': 0.4,\n    'icon-size': [\n      'interpolate',\n        ['linear'],\n        ['zoom'],\n        11,\n        0.2,\n        16,\n        0.7\n      ],\n    'icon-allow-overlap': true,\n  },\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-destinations-clusters',\n  'type': 'circle',\n  'source': 'rentals-destinations-clusters',\n  filter: ['has', 'point_count'],\n  paint: {\n    // Use step expressions (https://maplibre.org/maplibre-gl-js-docs/style-spec/#expressions-step)\n    // with three steps to implement three types of circles:\n    //   * Blue, 20px circles when point count is less than 100\n    //   * Yellow, 30px circles when point count is between 100 and 750\n    //   * Pink, 40px circles when point count is greater than or equal to 750\n    'circle-color': '#1FA024',\n    'circle-radius': [\n      'step',\n      ['get', 'point_count'],\n      20, 100,\n      30, 750,\n      40\n    ]\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-destinations-clusters-count',\n  'type': 'symbol',\n  'source': 'rentals-destinations-clusters',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': [\n      'step',\n      ['get', 'point_count'],\n      16, 100,\n      20, 750,\n      30\n    ]\n\n  },\n  paint: {\n    'text-color': '#fff',\n    // 'text-halo-color': '#fff',\n    // 'text-halo-width': 2\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","import {clustersPointLayer} from './common.js';\n\nconst layer = Object.assign({}, clustersPointLayer, {\n  'id': 'rentals-destinations-clusters-point',\n  'source': 'rentals-destinations-clusters',\n  'layout': Object.assign({}, clustersPointLayer.layout, {\n    'icon-image': [\"concat\", ['get', 'system_id'], '-r:', ['get', 'distance_bin']]\n  }),\n})\n\nexport default layer;\n","const layer = {\n  'id': 'zones-metrics-public',\n  'type': 'fill',\n  'source': 'zones-metrics-public',\n  'paint': {\n    'fill-color': ['get', 'color'],\n    'fill-opacity': ['get', 'opacity']\n  },\n}\n\nexport default layer;\n","const layer = {\n  'id': 'zones-metrics-public-border',\n  'type': 'line',\n  'source': 'zones-metrics-public',\n  'paint': {\n    'line-color': ['get', 'borderColor'],\n    'line-opacity': 0.6,\n    // Bigger line-width if zoomed out\n    'line-width': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      2,// Zoom level 2\n      4,// Line width 8\n      16,// Zoom level 16\n      2// Line width 2\n    ],\n    'line-dasharray': [2, 2],\n  },\n}\n\nexport default layer;\n","const layer = {\n  'id': 'zones-isochrones',\n  'type': 'fill',\n  'source': 'zones-isochrones',\n  'paint': {\n    'fill-color': [\n      'match', ['get','value'],\n      60.0, '#15AEEF',\n      120.0, '#15AEEF',\n      180.0, '#15AEEF',\n      300.0, '#15AEEF',\n      '#15AEEF'\n    ],\n    'fill-opacity': [\n      'match', ['get','value'],\n      60.0, 0.4,\n      120.0, 0.3,\n      180.0, 0.2,\n      300.0, 0.1,\n      0.1\n    ]\n  },\n}\n\nexport default layer;\n","import {getProviderColors} from '../helpers/providers.js';\n\nconst md5 = require('md5');\n\nconst initialState = {\n  aanbieders: [],\n  gebieden: [],\n  zones: [],\n  vehicle_types: [],\n  metadata_loaded: false,\n  zones_loaded: false\n}\n\n// utility function that creates a color palette\n// background: https://mika-s.github.io/javascript/colors/hsl/2017/12/05/generating-random-colors-in-javascript.html\nconst generateHslaColors = (amount) => {\n  \n  let colors = []\n  let huedelta = Math.trunc(360 / (amount+1))\n  let alpha = 1.0\n\n  for (let i = 0; i < amount; i++) {\n    let hue = i * huedelta\n    let lightness = i % 2 === 0 ? 35 : 65;\n    let saturation = i % 2 === 1 ? 40 : 60;\n    colors.push(`hsla(${hue},${saturation}%,${lightness}%,${alpha})`)\n  }\n\n  return colors\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_AANBIEDERS': {\n      let current = state.aanbieders ? state.aanbieders: [];\n\n      // add colors (will be supplied by the API later)\n      const colors = generateHslaColors(action.payload.length)\n      const providerColors = getProviderColors();\n      const aanbieders = action.payload.map((aanbieder,idx)=>{\n        const color = providerColors[aanbieder.system_id] ? providerColors[aanbieder.system_id] : colors[idx];\n        return Object.assign(aanbieder, {color: color});\n      })\n      \n      if(md5(JSON.stringify(current))===md5(JSON.stringify(aanbieders))) { return state; }\n      \n      return {\n        ...state,\n        aanbieders\n      }\n    }\n    case 'SET_GEBIEDEN': {\n      let current = state.gebieden ? state.gebieden: [];\n    \n      if(md5(JSON.stringify(current))===md5(JSON.stringify(action.payload))) { return state; }\n    \n      return {\n        ...state,\n        gebieden: action.payload,\n      }\n    }\n    \n    case 'SET_ZONES': {\n      let current = state.zones ? state.zones: [];\n    \n      if(md5(JSON.stringify(current))===md5(JSON.stringify(action.payload))) { return state; }\n\n      return {\n          ...state,\n          zones: action.payload,\n      };\n    }\n    \n    case 'CLEAR_ZONES': {\n      return {\n          ...state,\n          zones: [],\n          zones_loaded: false,\n      };\n    }\n\n    case 'SET_VEHICLE_TYPES': {\n      let current = state.vehicle_types ? state.vehicle_types: [];\n    \n      if(JSON.stringify(md5(current))===JSON.stringify(md5(action.payload))) { return state; }\n\n      return {\n          ...state,\n          vehicle_types: action.payload,\n      };\n    }\n\n    case 'SET_METADATA_LOADED': {\n      return {\n          ...state,\n          metadata_loaded: action.payload,\n      };\n    }\n\n    case 'SET_ZONES_LOADED': {\n      return {\n          ...state,\n          zones_loaded: action.payload,\n      };\n    }\n    \n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset metadata')\n      \n      return initialState;\n    }\n\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  data: [],\n  operatorstats: [],\n}\n\nexport default function vehicles(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_VEHICLES': {\n      return {\n        data: action.payload,\n        operatorstats: []\n      }\n    }\n    case 'SET_VEHICLES_OPERATORSTATS': {\n      return Object.assign({}, state, {\n        operatorstats: action.payload\n      })\n    }\n    case 'CLEAR_VEHICLES': {\n      return {\n        data: [],\n        operatorstats: []\n      }\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      // console.log('login/logout - reset vehicles data')      \n      return initialState;\n    }\n    \n    default:\n      return state;\n  }\n}\n","const initialState = {\n  origins: {},\n  destinations: {},\n  origins_operatorstats: [],\n  destinations_operatorstats: []\n}\n\nexport default function rentals(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_RENTALS_ORIGINS': {\n      return Object.assign({}, state, {\n        origins: action.payload,\n        origins_operatorstats: []\n      })\n    }\n    case 'SET_RENTALS_DESTINATIONS': {\n      return Object.assign({}, state, {\n        destinations: action.payload,\n        destinations_operatorstats: []\n      })\n    }\n    case 'CLEAR_RENTALS_ORIGINS': {\n      return Object.assign({}, state, {\n        origins: [],\n        origins_operatorstats: []\n      })\n    }\n    case 'CLEAR_RENTALS_DESTINATIONS': {\n      return Object.assign({}, state, {\n        destinations: [],\n        destinations_operatorstats: []\n      })\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      // console.log('login/logout - reset rentals data')      \n      return initialState;\n    }\n    case 'SET_RENTALS_ORIGINS_OPERATORSTATS': {\n      return Object.assign({}, state, {\n        origins_operatorstats: action.payload\n      })\n    }\n    case 'SET_RENTALS_DESTINATIONS_OPERATORSTATS': {\n      return Object.assign({}, state, {\n        destinations_operatorstats: action.payload\n      })\n    }\n    default:\n      return state;\n  }\n}\n","import moment from 'moment';\n\n// Always start with an initial municipality\n// This prevents a slow website on initial load\nconst randomInitialMunicipality = () => {\n  const municipalitiesWithLotsOfVehicles = [\n    'GM0080',// Leeuwarden\n    'GM0014',// Groningen\n    // '',// Alkmaar\n    'GM0392',// Haarlem\n    'GM0034',// Almere\n    'GM0193',// Zwolle\n    'GM0402',// Hilversum\n    'GM0307',// Amersfoort\n    'GM0344',// Utrecht\n    'GM0200',// Apeldoorn\n    'GM0518',// Den Haag\n    'GM0599',// Rotterdam\n    'GM0758',// Breda,\n    'GM0855',// Tilburg\n    'GM0772'// Eindhoven\n  ];\n  const randomMunicipality = municipalitiesWithLotsOfVehicles[Math.floor(Math.random() * municipalitiesWithLotsOfVehicles.length)];\n  return randomMunicipality;\n}\n\nconst initialState = {\n  visible: true,\n  gebied: randomInitialMunicipality(),\n  zones: \"\",\n  datum: (new Date()).toISOString(),\n  // intervalstart: (new Date()).toISOString(),\n  intervalduur: 60 * 60 * 1000,\n  aanbiedersexclude: \"\",\n  parkeerduurexclude: \"\",\n  voertuigtypesexclude: \"\",\n  afstandexclude: \"\",\n  herkomstbestemming: \"\",\n  ontwikkelingvan: moment().subtract(30, 'days').toISOString(),\n  ontwikkelingtot: (new Date()).toISOString(),\n  ontwikkelingaggregatie: \"day\",\n  ontwikkelingaggregatie_function: 'AVG'\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_FILTER_VISIBLE': {\n      // console.log('reducer filter set filter visible %s', action.payload)\n      return {\n          ...state,\n          visible: action.payload\n      };\n    }\n    case 'SET_FILTER_GEBIED': {\n      if(state.gebied===action.payload) {\n        return state;\n      }\n      \n      // console.log('reducer filter set gebied to %s', action.payload)\n      return {\n          ...state,\n          gebied: action.payload,\n          zones: \"\"\n      };\n    }\n    case 'SET_FILTER_DATUM': {\n      // console.log('reducer filter set datum to %s', action.payload)\n      return {\n          ...state,\n          datum: action.payload\n      };\n    }\n    case 'SET_FILTER_INTERVAL_START': {\n      // console.log('reducer filter set interval start to %s', action.payload)\n      return {\n          ...state,\n          intervalstart: action.payload\n      };\n    }\n    case 'SET_FILTER_INTERVAL_END': {\n      return {\n          ...state,\n          intervalend: action.payload\n      };\n    }\n    case 'SET_FILTER_INTERVAL_DUUR': {\n      // console.log('reducer filter set interval duration to %s', action.payload)\n      return {\n          ...state,\n          intervalduur: action.payload\n      };\n    }\n    case 'SET_FILTER_HERKOMSTBESTEMMING': {\n      // console.log('reducer filter set herkomstbestemming to %s', action.payload)\n      return {\n          ...state,\n          herkomstbestemming: action.payload\n      };\n    }\n    case 'ADD_TO_FILTER_ZONES': {\n      // console.log('add item %s to zones filter %o', action.payload, state)\n      let zones = [];\n      if(state.zones) {\n        try {\n          zones = state.zones.split(\",\") || []\n        } catch(ex) {\n          zones = [];\n        }\n      }\n      if(!zones.includes(action.payload)) {\n        zones.push(action.payload);\n      }\n\n      return {\n        ...state,\n        zones: zones.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_ZONES': {\n      // console.log('remove item %o from zones filter', action.payload)\n      let zones = state.zones.split(\",\") || [];\n      zones = zones.filter((item) => {return item.toString() !== action.payload.toString() });\n\n      return {\n          ...state,\n          zones: zones.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_ZONES': {\n      // console.log('clear zones filter')\n\n      return {\n          ...state,\n          zones: ''\n      };\n    }\n    case 'ADD_TO_FILTER_MARKERS_EXCLUDE': {\n      let parkeerduurexclude = [];\n      try {\n        // console.log('add item %s to parkeerduurexclude filter %o', action.payload, state)\n        if(state.parkeerduurexclude) {\n          try {\n            parkeerduurexclude = state.parkeerduurexclude.split(\",\") || []\n          } catch(ex) {\n            parkeerduurexclude = [];\n          }\n        }\n        if(!parkeerduurexclude.includes(action.payload)) {\n          parkeerduurexclude.push(action.payload);\n        }\n      } catch(ex) {\n        parkeerduurexclude = [];\n      }\n\n      return {\n        ...state,\n        parkeerduurexclude: parkeerduurexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_MARKERS_EXCLUDE': {\n      // console.log('remove item %o from parkeerduurexclude filter', action.payload)\n      let parkeerduurexclude = [];\n      try {\n        parkeerduurexclude = state.parkeerduurexclude.split(\",\") || [];\n        parkeerduurexclude = parkeerduurexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        parkeerduurexclude = [];\n      }\n\n      return {\n          ...state,\n          parkeerduurexclude: parkeerduurexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_MARKERS_EXCLUDE': {\n      // console.log('clear parkeerduurexclude filter')\n\n      return {\n          ...state,\n          parkeerduurexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_AFSTAND_EXCLUDE': {\n      let afstandexclude = [];\n      try {\n        // console.log('add item %s to afstandexclude filter %o', action.payload, state)\n        if(state.afstandexclude) {\n          try {\n            afstandexclude = state.afstandexclude.split(\",\") || []\n          } catch(ex) {\n            afstandexclude = [];\n          }\n        }\n        if(!afstandexclude.includes(action.payload)) {\n          afstandexclude.push(action.payload);\n        }\n      } catch(ex) {\n        afstandexclude = [];\n      }\n\n      return {\n        ...state,\n        afstandexclude: afstandexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_AFSTAND_EXCLUDE': {\n      // console.log('remove item %o from afstandexclude filter', action.payload)\n      let afstandexclude = [];\n      try {\n        afstandexclude = state.afstandexclude.split(\",\") || [];\n        afstandexclude = afstandexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        afstandexclude = [];\n      }\n\n      return {\n          ...state,\n          afstandexclude: afstandexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_AFSTAND_EXCLUDE': {\n      // console.log('clear afstandexclude filter')\n\n      return {\n          ...state,\n          afstandexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      let voertuigtypesexclude = [];\n      try {\n        // console.log('add item %s to voertuigtypesexclude filter %o', action.payload, state)\n        if(state.voertuigtypesexclude) {\n          try {\n            voertuigtypesexclude = state.voertuigtypesexclude.split(\",\") || []\n          } catch(ex) {\n            voertuigtypesexclude = [];\n          }\n        }\n        if(!voertuigtypesexclude.includes(action.payload)) {\n          voertuigtypesexclude.push(action.payload);\n        }\n      } catch(ex) {\n        voertuigtypesexclude = [];\n      }\n\n      return {\n        ...state,\n        voertuigtypesexclude: voertuigtypesexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      // console.log('remove item %o from voertuigtypesexclude filter', action.payload)\n      let voertuigtypesexclude = [];\n      try {\n        voertuigtypesexclude = state.voertuigtypesexclude.split(\",\") || [];\n        voertuigtypesexclude = voertuigtypesexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        voertuigtypesexclude = [];\n      }\n\n      return {\n          ...state,\n          voertuigtypesexclude: voertuigtypesexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      // console.log('clear voertuigtypesexclude filter')\n\n      return {\n          ...state,\n          voertuigtypesexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_AANBIEDERS_EXCLUDE': {\n      // console.log('add item %s to aanbiedersexclude filter %o', action.payload, state)\n      let aanbiedersexclude = [];\n      try {\n        if(state.aanbiedersexclude) {\n          aanbiedersexclude = state.aanbiedersexclude.split(\",\") || []\n        }\n        if(!aanbiedersexclude.includes(action.payload)) {\n          aanbiedersexclude.push(action.payload);\n        }\n      } catch(ex) {\n        aanbiedersexclude = [];\n      }\n    \n      return {\n          ...state,\n          aanbiedersexclude: aanbiedersexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE': {\n      // console.log('remove item %s from aanbiedersexclude filter', action.payload)\n      let aanbiedersexclude = [];\n      try {\n        aanbiedersexclude = state.aanbiedersexclude.split(\",\") || [];\n        aanbiedersexclude = aanbiedersexclude.filter((item) => { return item !== action.payload });\n      } catch(ex) {\n        aanbiedersexclude = [];\n      }\n    \n      return {\n          ...state,\n          aanbiedersexclude: aanbiedersexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_AANBIEDERS_EXCLUDE': {\n      // console.log('clear aanbiedersexclude filter')\n    \n      return {\n          ...state,\n          aanbiedersexclude: ''\n      };\n    }\n    case 'SET_FILTER_ONTWIKKELING_VANTOT': {\n      // console.log('reducer filter set datum ontwikkeling van %s to %s', action.payload.van, action.payload.tot)\n      return {\n          ...state,\n          ontwikkelingvan: action.payload.van,\n          ontwikkelingtot: action.payload.tot\n      };\n    }\n    case 'SET_FILTER_ONTWIKKELING_AGGREGATIE': {\n      // console.log('reducer filter set aggregatie ontwikkeling %s', action.payload)\n      return {\n          ...state,\n          ontwikkelingaggregatie: action.payload\n      };\n    }\n    case 'SET_FILTER_ONTWIKKELING_AGGREGATIE_TIJD': {\n      return {\n          ...state,\n          ontwikkelingaggregatie_tijd: action.payload\n      };\n    }\n    case 'SET_FILTER_ONTWIKKELING_AGGREGATIE_FUNCTION': {\n      return {\n          ...state,\n          ontwikkelingaggregatie_function: action.payload\n      };\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      // console.log('login/logout - reset filter')\n      return initialState;\n    }\n    case 'RESET_FILTER': {\n      // console.log('reset filter')\n      \n      return initialState;\n    }\n    case 'IMPORT_STATE': {\n      // console.log('import filter', action.payload.filter)\n      return {\n        ...state,\n        ...action.payload.filter\n      }\n    }\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  user_data: null\n}\n  \nexport default function vehicles(state = initialState, action) {\n    switch(action.type) {\n        case 'SET_USER': {\n            const user = action.payload\n            return {\n                user_data: user\n            }\n        }\n        case 'CLEAR_USER': {\n            return { user_data: null }\n        }\n        default:\n            return state;\n    }\n}","const md5 = require('md5');\n\nconst initialState = {\n  data: [],\n  filter: \"\"\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_ZONES_GEODATA': {\n      let currentdata = state.data ? state.data: [];\n\n      let datachanged = md5(JSON.stringify(currentdata))!==md5(JSON.stringify(action.payload.data))\n      let filterchanged = state.filter!==action.payload.filter;\n\n      // if(datachanged) { console.log('SET_ZONES_GEODATA - data changed')}\n      // if(filterchanged) { console.log('SET_ZONES_GEODATA - filter changed')}\n      \n      if(!datachanged&&!filterchanged) {\n        // console.log('SET_ZONES_GEODATA - no changes')\n        return state;\n      }\n      \n      // console.log('SET_ZONES_GEODATA - changes: data %s / filter %s', datachanged, filterchanged)\n      return {\n          ...state,\n          data: action.payload.data,\n          filter: action.payload.filter\n      };\n    }\n\n    case 'LOGIN':\n    case 'LOGOUT': {\n      // console.log('login/logout - reset rentals data')      \n      return initialState;\n    }\n\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  FILTERBAR: window.innerWidth > 800 ? true : false,\n  SELECTLAYER: true,\n  SHOWLOADING: false\n}\n\nexport default function ui(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_VISIBILITY': {\n      return {\n        ...state,\n        [action.payload.name]: action.payload.visibility\n      };\n    }\n    case 'IMPORT_STATE': {\n      console.log('import ui')\n      \n      return {\n        ...state,\n        ...action.payload.ui\n      }\n    }\n    case 'SHOW_LOADING': {\n      // console.log(\"set show loading %s\",action.payload)\n      return {\n        ...state,\n        showloading: action.payload\n      };\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      // console.log('login/logout - reset ui data')      \n      return initialState;\n    }\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  operatorstats_verhuringenchart: [],\n  operatorstats_beschikbarevoertuigenchart: [],\n  operatorstats_parkeerduurchart: [],\n}\n\nexport default function statsreducer(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_OPERATORSTATS_VERHURINGENCHART': {\n      return Object.assign({}, state, {\n        operatorstats_verhuringenchart: action.payload\n      })\n    }\n    case 'SET_OPERATORSTATS_BESCHIKBAREVOERTUIGENCHART': {\n      return Object.assign({}, state, {\n        operatorstats_beschikbarevoertuigenchart: action.payload\n      })\n    }\n    case 'SET_OPERATORSTATS_PARKEERDUURCHART': {\n      return Object.assign({}, state, {\n        operatorstats_parkeerduurchart: action.payload\n      })\n    }\n    case 'CLEAR_STATS':\n    case 'LOGIN':\n    case 'LOGOUT': {\n      // console.log('clear stats state data')\n      return initialState;\n    }\n    \n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport created from './created';\nimport last_update from './last_update';\nimport metadata from './metadata';\nimport vehicles from './vehicles';\nimport rentals from './rentals';\nimport filter from './filter';\nimport authentication from './authentication';\nimport zones_geodata from './zones_geodata';\nimport layers from './layers';\nimport ui from './ui';\nimport statsreducer from './statsreducer';\n\nexport default combineReducers({\n  created,\n  last_update,\n  metadata,\n  vehicles,\n  rentals,\n  filter,\n  authentication,\n  zones_geodata,\n  layers,\n  ui,\n  statsreducer\n})","export default function created(state = false, action) {\n  switch(action.type) {\n    case 'SET_CREATED': {\n      return action.payload;\n    }\n\n    default:\n      return state;\n  }\n}\n","export default function lastUpdate(state = false, action) {\n  switch(action.type) {\n    case 'SET_LAST_UPDATE': {\n      return action.payload;\n    }\n\n    default:\n      return state;\n  }\n}\n","import React, { Component } from 'react';\nimport {\n BrowserRouter as Router,\n} from \"react-router-dom\";\n// import { bindActionCreators } from 'redux';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { connect } from 'react-redux';\n\nimport moment from 'moment';\nimport thunk from 'redux-thunk';\n\nimport appReducer from './reducers';\nimport App from './App';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst md5 = require('md5');\n\n// Get persistentState from localStorage\nconst theState = localStorage.getItem('CROWDD_reduxState')\nconst persistedState = theState ? JSON.parse(theState) : {};\n\nexport const store = createStore(\n  appReducer,\n  persistedState,\n  composeEnhancers(applyMiddleware(thunk)),\n);\n\n// Store Redux state into localStorage\nstore.subscribe(() => {\n  const storeState = store.getState();\n\n  const oldFilterHash = localStorage.getItem('CROWDD_filterhash') || false;\n  const newFilterHash = md5(JSON.stringify(storeState.filter))\n  if(newFilterHash!==oldFilterHash) {\n    // console.log(\"filter changed - invalidate data and zones here!\");\n    localStorage.setItem('CROWDD_filterhash', newFilterHash)\n    \n    // store.dispatch({ type: 'CLEAR_ZONES', payload: null});\n    store.dispatch({ type: 'CLEAR_VEHICLES', payload: null});\n    store.dispatch({ type: 'CLEAR_RENTALS_ORIGINS', payload: null});\n    store.dispatch({ type: 'CLEAR_RENTALS_DESTINATIONS', payload: null});\n  }\n  \n  const storeStateToSaveInLocalStorage = {\n    created: storeState.created ? storeState.created : moment().unix(),\n    last_update: moment().unix(),\n    authentication: storeState.authentication,\n    filter: storeState.filter,\n    layers: storeState.layers,\n    ui: storeState.ui\n  }\n  localStorage.setItem('CROWDD_reduxState', JSON.stringify(storeStateToSaveInLocalStorage))\n})\n\nclass AppProvider extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <Router>\n        <App content={this.props.content} />\n        </Router>\n      </Provider>\n    )\n  }\n}\n\nfunction connectWithStore(store, WrappedComponent, ...args) {\n  let ConnectedWrappedComponent = connect(...args)(WrappedComponent)\n  return function (props) {\n    return <ConnectedWrappedComponent {...props} store={store} />\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    // config: getConfig(state),\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    // actions: bindActionCreators(actions, dispatch),\n  }\n}\n\nexport default AppProvider = connectWithStore(\n  store,\n  AppProvider,\n  mapStateToProps,\n  mapDispatchToProps\n)\n"],"sourceRoot":""}