{"version":3,"sources":["reducers/metadata.js","reducers/vehicles.js","reducers/rentals.js","reducers/filter.js","reducers/authentication.js","reducers/zones_geodata.js","reducers/layers.js","reducers/ui.js","reducers/index.js","reducers/last_update.js","components/Menu.jsx","actions/authentication.js","actions/actionTypes.js","components/Menu/MenuSecondary.jsx","helpers/providers.js","components/Map/layers/index.js","components/Map/layers/vehicles-point.js","components/Map/layers/vehicles-clusters.js","components/Map/layers/vehicles-clusters-count.js","components/Map/layers/vehicles-clusters-point.js","components/Map/layers/vehicles-heatmap-city-level.js","components/Map/layers/rentals-origins-point.js","components/Map/layers/rentals-origins-clusters.js","components/Map/layers/rentals-origins-clusters-count.js","components/Map/layers/rentals-origins-clusters-point.js","components/Map/layers/rentals-origins-heatmap-city-level.js","components/Map/layers/rentals-destinations-point.js","components/Map/layers/rentals-destinations-clusters.js","components/Map/layers/rentals-destinations-clusters-count.js","components/Map/layers/rentals-destinations-clusters-point.js","components/Map/layers/rentals-destinations-heatmap-city-level.js","components/Map/layers/zones-geodata.js","components/Map/sources.js","components/Map/vehicle_marker.js","components/Map/MapComponent.jsx","components/SlideBox/SlideBox.jsx","components/SelectLayer/SelectLayer.jsx","pages/MapPage.jsx","pages/ContentPage.jsx","poll-api/pollTools.js","api/aggregatedStats.js","helpers/stats.js","components/Chart/CustomizedAxisTick.jsx","components/Chart/CustomizedTooltip.jsx","components/Chart/VerhuringenChart.jsx","components/Chart/BeschikbareVoertuigenChart.jsx","pages/StatsPage.jsx","components/Logo.jsx","components/IconButtons.jsx","pages/Login.jsx","helpers/parkEvents.js","pages/Monitoring.jsx","components/Filterbar/FilterbarExtended.jsx","components/Filterbar/FilteritemGebieden.jsx","images/calendar.svg","components/Filterbar/FilteritemDatum.jsx","components/Filterbar/FilteritemDatumVanTot.jsx","components/Filterbar/FilteritemDuur.jsx","components/Filterbar/FilteritemAanbieders.jsx","components/Filterbar/FilteritemZones.jsx","components/Filterbar/FilteritemMarkers.jsx","components/Filterbar/FilteritemHerkomstBestemming.jsx","components/Filterbar/FilteritemVoertuigTypes.jsx","components/Filterbar/Filterbar.jsx","components/Filterbar/FilterbarDesktop.jsx","components/SlideBox/MobileSlideBox.jsx","components/Filterbar/FilterbarMobile.jsx","components/About/About.jsx","components/Overlay/Overlay.jsx","components/SelectLayer/SelectLayerMobile.jsx","poll-api/metadataAccessControlList.js","poll-api/pollParkingData.js","poll-api/pollVerhuringenData.js","App.js","poll-api/metadataZones.js","poll-api/metadataZonesgeodata.js","AppProvider.js","reportWebVitals.js","index.js"],"names":["md5","require","initialState","aanbieders","gebieden","zones","vehicle_types","metadata_loaded","zones_loaded","generateHslaColors","amount","colors","huedelta","Math","trunc","i","hue","lightness","saturation","push","data","origins","destinations","visible","gebied","datum","Date","toISOString","intervalstart","intervalduur","aanbiedersexclude","parkeerduurexclude","voertuigtypesexclude","afstandexclude","herkomstbestemming","ontwikkelingvan","ontwikkelingtot","ontwikkelingaggregatie","user_data","filter","DISPLAYMODE_PARK","DISPLAYMODE_RENTALS","DISPLAYMODE_OTHER","DISPLAYMODE_PARKEERDATA_HEATMAP","DISPLAYMODE_PARKEERDATA_CLUSTERS","DISPLAYMODE_PARKEERDATA_VOERTUIGEN","DISPLAYMODE_VERHUURDATA_HEATMAP","DISPLAYMODE_VERHUURDATA_CLUSTERS","DISPLAYMODE_VERHUURDATA_VOERTUIGEN","zones_visible","displaymode","view_park","view_rentals","extent","mapextent","SELECTLAYER","combineReducers","last_update","state","action","type","payload","metadata","current","length","providerColors","map","aanbieder","idx","color","system_id","Object","assign","JSON","stringify","console","log","vehicles","vehicle","uuid","filtered","x","rentals","split","ex","includes","join","item","toString","van","tot","authentication","user","zones_geodata","currentdata","datachanged","filterchanged","layers","ui","name","visibility","MenuItem","props","pathName","isActive","path","href","icon","replace","className","to","onClick","alt","text","src","SubMenuItem","useState","showMessage","setShowMessage","message","e","setTimeout","Menu","subMenuIsActive","setSubMenuIsActive","dispatch","useDispatch","isLoggedIn","useSelector","exportState","preventDefault","l","window","location","url","protocol","host","pathname","encodeURIComponent","navigator","clipboard","writeText","exportStateToClipboard","MenuSecondaryItem","MenuSecondary","setVisibility","getProviderColor","providers","providerName","found","getUniqueProviderNames","object","keys","key","val","paint","layout","sources","initialMarker2","operatorColor","a","markers","durationIndicationColor","styleVehicleMarker","marker","svgElement","document","createElementNS","innerHTML","width","height","svg","setAttribute","getElementById","value","canvas","createElement","XMLSerializer","serializeToString","win","URL","webkitURL","img","Image","blob","Blob","createObjectURL","decode","context","getContext","drawImage","revokeObjectURL","Uint8Array","getImageData","buffer","getVehicleMarkers","moment","locale","localization","providerWebsiteUrls","MapComponent","mapContainer","lng","lat","zoom","counter","setCounter","zonesGeodataHash","setZonesGeodataHash","sourceHash","setSourceHash","useRef","useEffect","maplibregl","Map","container","style","accessToken","process","center","maxZoom","attributionControl","addControl","NavigationControl","showCompass","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","on","ddMap","registerMapView","currentmap","bounds","getBounds","_sw","_ne","dragRotate","disable","touchZoomRotate","disableRotation","initMap","addOrUpdateSource","sourceName","sourceData","isStyleLoaded","doesSourceExist","getSource","hash","features","newSourceHashArray","setData","source","addSource","activeSource","fitBounds","getStyle","forEach","id","indexOf","removeLayer","doesLayerExist","getLayer","doesRelatedSourceExist","addLayer","currentMap","layerName","vehicleProperties","properties","providerColor","coordinates","geometry","slice","abs","lngLat","Popup","setLngLat","setHTML","in_public_space_since","fromNow","format","addTo","getCanvas","cursor","initPopupLogic","addProviderImage","hasImage","addImage","SlideBox","containerRef","NAME","toUpperCase","isVisible","backgroundColor","options","direction","ref","children","title","SelectLayer","showZoneOnOff","zonesVisible","displayMode","viewPark","viewRentals","position","top","right","mode","showZones","rentalsKey","ContentPage","isFilterBarVisible","FILTERBAR","overflowY","createFilterparameters","isParkingData","isRentalData","isOntwikkelingData","filterparams","candidates","municipality","find","gm_code","undefined","zone","zone_id","error","filteritems","selectedaanbieders","selectedtypes","vtype","ts","ts1","ts2","subtract","intervalend","toDateString","setDate","getDate","getAggregatedStats","token","aggregationLevel","filterParams","fetchOptions","headers","fetch","response","json","responseJson","prepareAggregatedStatsData","values","getDateFormat","start_interval","rest","CustomizedXAxisTick","this","y","transform","dy","textAnchor","fill","fontSize","PureComponent","CustomizedYAxisTick","CustomizedTooltip","obj","active","label","sort","reverse","res","sumValue","VerhuringenChart","rentalsData","setRentalsData","fetchData","numberOfPointsOnXAxis","overflowX","ResponsiveContainer","AreaChart","margin","left","bottom","CartesianGrid","strokeDasharray","vertical","XAxis","dataKey","tick","YAxis","Tooltip","content","Legend","Area","stackId","stroke","isAnimationActive","BarChart","Bar","BeschikbareVoertuigenChart","vehiclesData","setVehiclesData","availableVehicles","StatsPage","setAggregationLevel","newlevel","Logo","IconButtonClose","Login","emailaddress","setEmailaddress","password","setPassword","recoverPassword","setRecoverPassword","errorMessage","setErrorMessage","loggedIn","setLoggedIn","doRenderRedirect","setDoRenderRedirect","login","loginId","applicationId","method","body","then","catch","recover","htmlFor","autoCapitalize","placeholder","required","onChange","target","role","maxWidth","fetchParkEvents","provider","dateTime","formattedDateTime","ok","park_events","numberOfUniqueVehiclesAfterXIterations","getUniqueVehicleIds","dataset","uniqueVehicleIds","bike_id","Monitoring","fetchMultipleMomentsInTime","collectedParkEvents","FilterbarExtended","closeFunction","stopPropagation","FilteritemGebieden","filterGebied","filterBarExtendedView","filterSearch","setFilterSearch","setFilterGebied","changeSearchText","clearSearchText","toggleGebieden","filteredGebieden","toLowerCase","autoFocus","renderSelectGebieden","FilterItemDatum","filterDatum","setFilterDatum","newdt","clearIcon","calendarIcon","add","FilterItemDatumVanTot","filterOntwikkelingVan","filterOntwikkelingTot","filterOntwikkelingAggregatie","startDate","setStartDate","endDate","setEndDate","isOpen","setIsOpen","updateFilter","start","end","aggregatie","dates","moveFilterDatum","movestart","addDays","addMonths","setView","view","agg","today","tyear","getFullYear","lyear","selected","dateFormat","selectsRange","inline","c1Hour","FilterItemInterval","filterDuration","cAnnotations","anchor","pos","elements","ticks","currentDurationIdx","findIndex","v","min","max","step","xmlns","FilteritemAanbieders","filterAanbiedersExclude","addTofilterAanbiedersExclude","excluded","handler","removeFromfilterAanbiedersExclude","viewBox","cx","cy","r","FilteritemZones","filterZones","removeFromFilterZones","toggleZones","zone_groups","zone_type","renderSelectZonesGroup","group","groupZones","sortedZones","b","localeCompare","selectedzones","zonetxt","aantal","thezone","filteredZones","renderSelectZones","FilteritemMarkersParkeerduur","FilteritemMarkers","filtername","fillcolor","addmarker","removemarker","clearmarkers","FilteritemMarkersAfstand","filterMarkersExclude","addToFilterMarkersExclude","removeFromFilterMarkersExclude","FilteritemHerkomstBestemming","setFilterHerkomstBestemming","classNameHerkomst","classNameBestemming","FilteritemVoertuigTypes","voertuigtypes","filterVoertuigTypesExclude","Array","isArray","addToFilterVoertuigTypesExclude","voertuigtype","removeFromFilterVoertuigTypesExclude","baseClassName","extraclass","Filterbar","hideLogo","ispark","isrentals","showdatum","showduur","showparkeerduur","showafstand","showherkomstbestemming","showvantot","showvervoerstype","FilterbarDesktop","isFilterBarExtendedVisible","MobileSlideBox","classes","closeHandler","FilterbarMobile","About","dangerouslySetInnerHTML","__html","marked","parse","Overlay","SelectLayerMobile","cPublicAanbieders","cPublicGebieden","cPublicVoertuigTypes","store_parkingdata","forceUpdateParkingData","getState","canfetchdata","authenticationdata","vehicles_in_public_space","geoJson","operatorcolors","o","start_time","duration","duration_bin","diff","feature","latitude","longitude","updateParkingData","store_verhuringendata","forceUpdateVerhuringenData","verhuringen","generateGeoJsonForVerhuringen","dataObject","arrival_time","departure_time","updateVerhuringenData","App","setPathName","search","uriParams","setUriParams","useLocation","URLSearchParams","get","decodeURIComponent","importstate","warn","alert","filterDate","isLayersMobileVisible","toDate","store_accesscontrollist","municipalities","operators","types","initAccessControlList","store","store_zones","url_zones","updateZones","zone_ids","list_g","list_z","url_zonesgeodata","st","geojson","fullextent","zonedata","updateZonesgeodata","_store","initUpdateVerhuringenData","renderMobileMenus","renderMapElements","exact","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","theState","localStorage","getItem","persistedState","createStore","appReducer","applyMiddleware","thunk","subscribe","storeState","oldFilterHash","newFilterHash","setItem","storeStateToSaveInLocalStorage","unix","AppProvider","Component","WrappedComponent","args","ConnectedWrappedComponent","connect","connectWithStore","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"k3BAAA,IAAMA,EAAMC,EAAQ,IAEdC,EAAe,CACnBC,WAAY,GACZC,SAAU,GACVC,MAAO,GACPC,cAAe,GACfC,iBAAiB,EACjBC,cAAc,GAKVC,EAAqB,SAACC,GAM1B,IAJA,IAAIC,EAAS,GACTC,EAAWC,KAAKC,MAAM,KAAOJ,EAAO,IAG/BK,EAAI,EAAGA,EAAIL,EAAQK,IAAK,CAC/B,IAAIC,EAAMD,EAAIH,EACVK,EAAYF,EAAI,IAAM,EAAI,GAAK,GAC/BG,EAAaH,EAAI,IAAM,EAAI,GAAK,GACpCJ,EAAOQ,KAAP,eAAoBH,EAApB,YAA2BE,EAA3B,aAA0CD,EAA1C,aANU,EAMV,MAGF,OAAON,GC1BT,IAAMT,EAAe,CACnBkB,KAAM,MCDR,IAAMlB,EAAe,CACnBmB,QAAS,GACTC,aAAc,ICFhB,IAAMpB,EAAe,CACnBqB,SAAS,EACTC,OAAQ,GACRnB,MAAO,GACPoB,OAAQ,IAAIC,MAAQC,cACpBC,eAAgB,IAAIF,MAAQC,cAC5BE,aAAc,KACdC,kBAAmB,GACnBC,mBAAoB,GACpBC,qBAAsB,GACtBC,eAAgB,GAChBC,mBAAoB,GACpBC,iBAAkB,IAAIT,MAAQC,cAC9BS,iBAAkB,IAAIV,MAAQC,cAC9BU,uBAAwB,OCd1B,IAAMnC,EAAe,CACnBoC,UAAW,MCDb,IAAMtC,EAAMC,EAAQ,IAEdC,EAAe,CACnBkB,KAAM,GACNmB,OAAQ,ICHH,IAAMC,EAAmB,mBACnBC,EAAsB,sBACtBC,EAAoB,oBAEpBC,EAAkC,sBAClCC,EAAmC,uBACnCC,EAAqC,yBACrCC,EAAkC,sBAClCC,EAAmC,uBACnCC,EAAqC,yBAK5C9C,EAAe,CACnB+C,eAAe,EACfC,YAAaV,EACbW,UAAWN,EACXO,aAAcJ,EACdK,OAAQ,GACRC,UAAW,IAGPtD,EAAMC,EAAQ,I,aCxBdC,EAAe,CAEnBqD,aAAa,GCSAC,kBAAgB,CAC7BC,YCZa,WAA4C,IAAxBC,EAAuB,wDAARC,EAAQ,uCACxD,MACO,oBADAA,EAAOC,KAEHD,EAAOE,QAIPH,GDMXI,SRgBa,WAA+C,IAA/BJ,EAA8B,uDAAtBxD,EAAcyD,EAAQ,uCAC3D,OAAOA,EAAOC,MACZ,IAAK,iBACH,IAAIG,EAAUL,EAAMvD,WAAauD,EAAMvD,WAAY,GAG7CQ,EAASF,EAAmBkD,EAAOE,QAAQG,QAC3CC,EAAiB,CACrB,KAAQ,UACR,UAAa,UACb,OAAU,UACV,OAAU,UACV,IAAO,UACP,KAAQ,UACR,UAAa,UACb,MAAS,UACT,MAAS,UACT,KAAQ,UACR,MAAS,UACT,SAAY,UACZ,KAAQ,UACR,KAAQ,WAEJ9D,EAAawD,EAAOE,QAAQK,KAAI,SAACC,EAAUC,GAC/C,IAAMC,EAAQJ,EAAeE,EAAUG,WAAaL,EAAeE,EAAUG,WAAa3D,EAAOyD,GACjG,OAAOG,OAAOC,OAAOL,EAAW,CAACE,MAAOA,OAG1C,OAAGrE,EAAIyE,KAAKC,UAAUX,MAAY/D,EAAIyE,KAAKC,UAAUvE,IAAuBuD,EAErE,2BACFA,GADL,IAEEvD,eAGJ,IAAK,eACH,IAAI4D,EAAUL,EAAMtD,SAAWsD,EAAMtD,SAAU,GAE/C,OAAGJ,EAAIyE,KAAKC,UAAUX,MAAY/D,EAAIyE,KAAKC,UAAUf,EAAOE,UAAoBH,EAEzE,2BACFA,GADL,IAEEtD,SAAUuD,EAAOE,UAIrB,IAAK,YACH,IAAIE,EAAUL,EAAMrD,MAAQqD,EAAMrD,MAAO,GAEzC,OAAGL,EAAIyE,KAAKC,UAAUX,MAAY/D,EAAIyE,KAAKC,UAAUf,EAAOE,UAAoBH,EAEzE,2BACAA,GADP,IAEIrD,MAAOsD,EAAOE,UAIpB,IAAK,cACH,OAAO,2BACAH,GADP,IAEIrD,MAAO,GACPG,cAAc,IAIpB,IAAK,oBACH,IAAIuD,EAAUL,EAAMpD,cAAgBoD,EAAMpD,cAAe,GAEzD,OAAGmE,KAAKC,UAAU1E,EAAI+D,MAAYU,KAAKC,UAAU1E,EAAI2D,EAAOE,UAAoBH,EAEzE,2BACAA,GADP,IAEIpD,cAAeqD,EAAOE,UAI5B,IAAK,sBACH,OAAO,2BACAH,GADP,IAEInD,gBAAiBoD,EAAOE,UAI9B,IAAK,mBACH,OAAO,2BACAH,GADP,IAEIlD,aAAcmD,EAAOE,UAI3B,IAAK,QACL,IAAK,SAGH,OAFAc,QAAQC,IAAI,iCAEL1E,EAGT,QACE,OAAOwD,IQjHXmB,SPVa,WAAiD,IAA/BnB,EAA8B,uDAAtBxD,EAAcyD,EAAQ,uCAC7D,OAAOA,EAAOC,MACZ,IAAK,eAEH,IAAMiB,EAAWlB,EAAOE,QACxB,MAAO,CACLzC,KAAMyD,GAGV,IAAK,cACH,IAAMC,EAAUnB,EAAOE,QAEvB,IAAKiB,EAAQC,KACX,MAAO,GAGT,IAAMC,EAAWtB,EAAMtC,KAAKmB,QAAO,SAAS0C,GAC1C,OAAOA,EAAEF,OAASD,EAAQC,QAK5B,OAFAC,EAAS7D,KAAK2D,GAEP,CAAE1D,KAAM4D,GAEjB,IAAK,iBACH,MAAO,CACL5D,KAAM,IAGV,IAAK,QACL,IAAK,SAGH,OAFAuD,QAAQC,IAAI,sCAEL,CAAExD,KAAM,IAGjB,QACE,OAAOsC,IO1BXwB,QNVa,WAAgD,IAA/BxB,EAA8B,uDAAtBxD,EAAcyD,EAAQ,uCAC5D,OAAOA,EAAOC,MACZ,IAAK,sBACH,OAAOW,OAAOC,OAAO,GAAId,EAAO,CAC9BrC,QAASsC,EAAOE,UAGpB,IAAK,2BACH,OAAOU,OAAOC,OAAO,GAAId,EAAO,CAC9BpC,aAAcqC,EAAOE,UAGzB,IAAK,wBACH,OAAOU,OAAOC,OAAO,GAAId,EAAO,CAC9BrC,QAAS,KAGb,IAAK,6BACH,OAAOkD,OAAOC,OAAO,GAAId,EAAO,CAC9BpC,aAAc,KAGlB,IAAK,QACL,IAAK,SAGH,OAFAqD,QAAQC,IAAI,qCAEL1E,EAET,QACE,OAAOwD,IMlBXnB,OLCa,WAA+C,IAA/BmB,EAA8B,uDAAtBxD,EAAcyD,EAAQ,uCAC3D,OAAOA,EAAOC,MACZ,IAAK,qBAEH,OADAe,QAAQC,IAAI,uCAAwCjB,EAAOE,SACpD,2BACAH,GADP,IAEInC,QAASoC,EAAOE,UAGtB,IAAK,oBACH,OAAGH,EAAMlC,SAASmC,EAAOE,QAChBH,GAGTiB,QAAQC,IAAI,kCAAmCjB,EAAOE,SAC/C,2BACAH,GADP,IAEIlC,OAAQmC,EAAOE,QACfxD,MAAO,MAGb,IAAK,mBAEH,OADAsE,QAAQC,IAAI,iCAAkCjB,EAAOE,SAC9C,2BACAH,GADP,IAEIjC,MAAOkC,EAAOE,UAGpB,IAAK,4BAEH,OADAc,QAAQC,IAAI,0CAA2CjB,EAAOE,SACvD,2BACAH,GADP,IAEI9B,cAAe+B,EAAOE,UAG5B,IAAK,2BAEH,OADAc,QAAQC,IAAI,6CAA8CjB,EAAOE,SAC1D,2BACAH,GADP,IAEI7B,aAAc8B,EAAOE,UAG3B,IAAK,gCAEH,OADAc,QAAQC,IAAI,8CAA+CjB,EAAOE,SAC3D,2BACAH,GADP,IAEIxB,mBAAoByB,EAAOE,UAGjC,IAAK,sBACHc,QAAQC,IAAI,iCAAkCjB,EAAOE,QAASH,GAC9D,IAAIrD,EAAQ,GACZ,GAAGqD,EAAMrD,MACP,IACEA,EAAQqD,EAAMrD,MAAM8E,MAAM,MAAQ,GAClC,MAAMC,GACN/E,EAAQ,GAOZ,OAJIA,EAAMgF,SAAS1B,EAAOE,UACxBxD,EAAMc,KAAKwC,EAAOE,SAGb,2BACFH,GADL,IAEErD,MAAOA,EAAMiF,KAAK,OAGtB,IAAK,2BACHX,QAAQC,IAAI,mCAAoCjB,EAAOE,SACvD,IAAIxD,EAAQqD,EAAMrD,MAAM8E,MAAM,MAAQ,GAGtC,OAFA9E,EAAQA,EAAMkC,QAAO,SAACgD,GAAU,OAAOA,EAAKC,aAAe7B,EAAOE,QAAQ2B,cAEnE,2BACA9B,GADP,IAEIrD,MAAOA,EAAMiF,KAAK,OAGxB,IAAK,qBAGH,OAFAX,QAAQC,IAAI,sBAEL,2BACAlB,GADP,IAEIrD,MAAO,KAGb,IAAK,gCACH,IAAI0B,EAAqB,GACzB,IAEE,GADA4C,QAAQC,IAAI,8CAA+CjB,EAAOE,QAASH,GACxEA,EAAM3B,mBACP,IACEA,EAAqB2B,EAAM3B,mBAAmBoD,MAAM,MAAQ,GAC5D,MAAMC,GACNrD,EAAqB,GAGrBA,EAAmBsD,SAAS1B,EAAOE,UACrC9B,EAAmBZ,KAAKwC,EAAOE,SAEjC,MAAMuB,GACNrD,EAAqB,GAGvB,OAAO,2BACF2B,GADL,IAEE3B,mBAAoBA,EAAmBuD,KAAK,OAGhD,IAAK,qCACHX,QAAQC,IAAI,gDAAiDjB,EAAOE,SACpE,IAAI9B,EAAqB,GACzB,IAEEA,GADAA,EAAqB2B,EAAM3B,mBAAmBoD,MAAM,MAAQ,IACpB5C,QAAO,SAACgD,GAAU,OAAOA,EAAKC,aAAe7B,EAAOE,QAAQ2B,cACpG,MAAMJ,GACNrD,EAAqB,GAGvB,OAAO,2BACA2B,GADP,IAEI3B,mBAAoBA,EAAmBuD,KAAK,OAGlD,IAAK,+BAGH,OAFAX,QAAQC,IAAI,mCAEL,2BACAlB,GADP,IAEI3B,mBAAoB,KAG1B,IAAK,gCACH,IAAIE,EAAiB,GACrB,IAEE,GADA0C,QAAQC,IAAI,0CAA2CjB,EAAOE,QAASH,GACpEA,EAAMzB,eACP,IACEA,EAAiByB,EAAMzB,eAAekD,MAAM,MAAQ,GACpD,MAAMC,GACNnD,EAAiB,GAGjBA,EAAeoD,SAAS1B,EAAOE,UACjC5B,EAAed,KAAKwC,EAAOE,SAE7B,MAAMuB,GACNnD,EAAiB,GAGnB,OAAO,2BACFyB,GADL,IAEEzB,eAAgBA,EAAeqD,KAAK,OAGxC,IAAK,qCACHX,QAAQC,IAAI,4CAA6CjB,EAAOE,SAChE,IAAI5B,EAAiB,GACrB,IAEEA,GADAA,EAAiByB,EAAMzB,eAAekD,MAAM,MAAQ,IACpB5C,QAAO,SAACgD,GAAU,OAAOA,EAAKC,aAAe7B,EAAOE,QAAQ2B,cAC5F,MAAMJ,GACNnD,EAAiB,GAGnB,OAAO,2BACAyB,GADP,IAEIzB,eAAgBA,EAAeqD,KAAK,OAG1C,IAAK,+BAGH,OAFAX,QAAQC,IAAI,+BAEL,2BACAlB,GADP,IAEIzB,eAAgB,KAGtB,IAAK,sCACH,IAAID,EAAuB,GAC3B,IAEE,GADA2C,QAAQC,IAAI,gDAAiDjB,EAAOE,QAASH,GAC1EA,EAAM1B,qBACP,IACEA,EAAuB0B,EAAM1B,qBAAqBmD,MAAM,MAAQ,GAChE,MAAMC,GACNpD,EAAuB,GAGvBA,EAAqBqD,SAAS1B,EAAOE,UACvC7B,EAAqBb,KAAKwC,EAAOE,SAEnC,MAAMuB,GACNpD,EAAuB,GAGzB,OAAO,2BACF0B,GADL,IAEE1B,qBAAsBA,EAAqBsD,KAAK,OAGpD,IAAK,2CACHX,QAAQC,IAAI,kDAAmDjB,EAAOE,SACtE,IAAI7B,EAAuB,GAC3B,IAEEA,GADAA,EAAuB0B,EAAM1B,qBAAqBmD,MAAM,MAAQ,IACpB5C,QAAO,SAACgD,GAAU,OAAOA,EAAKC,aAAe7B,EAAOE,QAAQ2B,cACxG,MAAMJ,GACNpD,EAAuB,GAGzB,OAAO,2BACA0B,GADP,IAEI1B,qBAAsBA,EAAqBsD,KAAK,OAGtD,IAAK,qCAGH,OAFAX,QAAQC,IAAI,qCAEL,2BACAlB,GADP,IAEI1B,qBAAsB,KAG5B,IAAK,mCAEH,IAAIF,EAAoB,GACxB,IACK4B,EAAM5B,oBACPA,EAAoB4B,EAAM5B,kBAAkBqD,MAAM,MAAQ,IAExDrD,EAAkBuD,SAAS1B,EAAOE,UACpC/B,EAAkBX,KAAKwC,EAAOE,SAEhC,MAAMuB,GACNtD,EAAoB,GAGtB,OAAO,2BACA4B,GADP,IAEI5B,kBAAmBA,EAAkBwD,KAAK,OAGhD,IAAK,wCACHX,QAAQC,IAAI,+CAAgDjB,EAAOE,SACnE,IAAI/B,EAAoB,GACxB,IAEEA,GADAA,EAAoB4B,EAAM5B,kBAAkBqD,MAAM,MAAQ,IACpB5C,QAAO,SAACgD,GAAW,OAAOA,IAAS5B,EAAOE,WAChF,MAAMuB,GACNtD,EAAoB,GAGtB,OAAO,2BACA4B,GADP,IAEI5B,kBAAmBA,EAAkBwD,KAAK,OAGhD,IAAK,kCAGH,OAFAX,QAAQC,IAAI,kCAEL,2BACAlB,GADP,IAEI5B,kBAAmB,KAGzB,IAAK,iCAEH,OADA6C,QAAQC,IAAI,qDAAsDjB,EAAOE,QAAQ4B,IAAK9B,EAAOE,QAAQ6B,KAC9F,2BACAhC,GADP,IAEIvB,gBAAiBwB,EAAOE,QAAQ4B,IAChCrD,gBAAiBuB,EAAOE,QAAQ6B,MAGtC,IAAK,qCAEH,OADAf,QAAQC,IAAI,gDAAiDjB,EAAOE,SAC7D,2BACAH,GADP,IAEIrB,uBAAwBsB,EAAOE,UAGrC,IAAK,QACL,IAAK,SAGH,OAFAc,QAAQC,IAAI,+BAEL1E,EAET,IAAK,eAGH,OAFAyE,QAAQC,IAAI,gBAEL1E,EAET,IAAK,eAKH,OAJAyE,QAAQC,IAAI,gBAAiBjB,EAAOE,QAAQtB,QAIrC,2BACFmB,GACAC,EAAOE,QAAQtB,QAGtB,QACE,OAAOmB,IK/SXiC,eJba,WAAiD,IAA/BjC,EAA8B,uDAAtBxD,EAAcyD,EAAQ,uCAC3D,OAAOA,EAAOC,MACV,IAAK,WACD,IAAMgC,EAAOjC,EAAOE,QACpB,MAAO,CACHvB,UAAWsD,GAGnB,IAAK,aACD,MAAO,CAAEtD,UAAW,MAExB,QACI,OAAOoB,IIEjBmC,cHXa,WAA+C,IAA/BnC,EAA8B,uDAAtBxD,EAAcyD,EAAQ,uCAC3D,OAAOA,EAAOC,MACZ,IAAK,oBACH,IAAIkC,EAAcpC,EAAMtC,KAAOsC,EAAMtC,KAAM,GAEvC2E,EAAc/F,EAAIyE,KAAKC,UAAUoB,MAAgB9F,EAAIyE,KAAKC,UAAUf,EAAOE,QAAQzC,OACnF4E,EAAgBtC,EAAMnB,SAASoB,EAAOE,QAAQtB,OAKlD,OAAIwD,GAAcC,EAMX,2BACAtC,GADP,IAEItC,KAAMuC,EAAOE,QAAQzC,KACrBmB,OAAQoB,EAAOE,QAAQtB,SAPlBmB,EAWX,IAAK,QACL,IAAK,SAGH,OAFAiB,QAAQC,IAAI,qCAEL1E,EAGT,QACE,OAAOwD,IGpBXuC,OFOa,WAA+C,IAA/BvC,EAA8B,uDAAtBxD,EAAcyD,EAAQ,uCAC3D,OAAOA,EAAOC,MACZ,IAAK,wBACH,OAAGF,EAAMR,cAAcS,EAAOE,QAAkBH,EAGzC,2BACAA,GADP,IAEIR,YAAaS,EAAOE,UAG1B,IAAK,sBACH,OAAGH,EAAMP,YAAYQ,EAAOE,QAAkBH,EAGvC,2BACAA,GADP,IAEIP,UAAWQ,EAAOE,UAGxB,IAAK,yBACH,OAAGH,EAAMN,eAAeO,EAAOE,QAAkBH,EAG1C,2BACAA,GADP,IAEIN,aAAcO,EAAOE,UAG3B,IAAK,6BAEH,OAAO,2BACAH,GADP,IAEIT,eAAgBS,EAAMT,gBAG5B,IAAK,yBACH,OAAGjD,EAAIyE,KAAKC,UAAUf,EAAOE,SAAS,OAAO7D,EAAIyE,KAAKC,UAAUhB,EAAML,QAAQ,MAC5EsB,QAAQC,IAAI,mBAAoBjB,EAAOE,SAChC,2BACAH,GADP,IAEIL,OAAQM,EAAOE,SAAS,MAIrBH,EAGX,IAAK,uBACH,OAAG1D,EAAIyE,KAAKC,UAAUf,EAAOE,YAAY7D,EAAIyE,KAAKC,UAAUhB,EAAMJ,YAAW,IAEpE,2BACAI,GADP,IAEIJ,UAAWK,EAAOE,UAIfH,EAGX,IAAK,eAGH,OAFAiB,QAAQC,IAAI,iBAEL,2BACFlB,GACAC,EAAOE,QAAQoC,QAGtB,IAAK,QACL,IAAK,SAGH,OAFAtB,QAAQC,IAAI,mCAEL1E,EAET,QACE,OAAOwD,IEjFXwC,GDfa,WAA2C,IAA/BxC,EAA8B,uDAAtBxD,EAAcyD,EAAQ,uCACvD,OAAOA,EAAOC,MACZ,IAAK,iBACH,OAAO,2BACFF,GADL,kBAEGC,EAAOE,QAAQsC,KAAOxC,EAAOE,QAAQuC,aAG1C,IAAK,eAGH,OAFAzB,QAAQC,IAAI,aAEL,2BACFlB,GACAC,EAAOE,QAAQqC,IAGtB,IAAK,QACL,IAAK,SAGH,OAFAvB,QAAQC,IAAI,gCAEL1E,EAET,QACE,OAAOwD,M,gCGpBb,SAAS2C,EAASC,GAEhB,IAAMC,EAAWD,EAAMC,SACjBC,EAAWD,IAAaD,EAAMG,MAAQF,IAAaD,EAAMI,MAAsB,MAAbH,GAAmC,cAAfD,EAAMG,KAC5FE,EAAQH,EAAWF,EAAMK,KAAKC,QAAQ,OAAQ,eAAiBN,EAAMK,KAE3E,OACE,qCACGL,EAAMG,MAAQ,eAAC,IAAD,CAAMI,UAAS,2CAExBL,EAAW,YAAc,GAFD,cAI5BM,GAAIR,EAAMG,KACVC,KAAMJ,EAAMI,KACZK,QAAST,EAAMS,QANF,UAQZJ,EAAO,qBAAKK,IAAKV,EAAMW,KAAMC,IAAKP,IAAW,GAC9C,sBAAME,UAAS,UAAML,IAAcG,EAAQ,eAAiB,SAA7C,0BAAf,SACGL,EAAMW,WAIRX,EAAMG,MAAQ,oBAAGI,UAAS,kFAGvBL,EAAW,YAAc,GAHF,cAK3BE,KAAMJ,EAAMI,KACZK,QAAST,EAAMS,QANA,UAQdJ,EAAO,qBAAKK,IAAKV,EAAMW,KAAMC,IAAKP,IAAW,GAC9C,sBAAME,UAAS,UAAML,IAAcG,EAAQ,eAAiB,SAA7C,0BAAf,SACGL,EAAMW,aAOjB,SAASE,EAAYb,GACnB,MAAsCc,oBAAS,GAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KAWA,OAAO,qCACJhB,EAAMG,MAAQ,cAAC,IAAD,CAAMI,UAAS,YAC5BC,GAAIR,EAAMG,KACVC,KAAMJ,EAAMI,KACZK,QAAST,EAAMS,QAHF,SAKb,sBAAMF,UAAS,QAAf,SACGQ,EAAcf,EAAMiB,QAAUjB,EAAMW,UAItCX,EAAMG,MAAQ,mBAAGI,UAAS,wCAC3BH,KAAMJ,EAAMI,KACZK,QAtBY,SAACS,GACf7C,QAAQC,IAAI,gBACZ0C,GAAe,GAEfG,YAAW,WAAM9C,QAAQC,IAAI,gBAAiB0C,GAAe,KAAU,KAEvEhB,EAAMS,QAAQS,IAcG,SAIf,sBAAMX,UAAS,QAAf,SACGQ,EAAcf,EAAMiB,QAAUjB,EAAMW,YAuL9BS,MAjLf,YAA2B,IAAZnB,EAAW,EAAXA,SACb,EAA8Ca,oBAAS,GAAvD,mBAAOO,EAAP,KAAwBC,EAAxB,KAEMC,EAAWC,cAGXC,EAAaC,aAAY,SAAAtE,GAC7B,QAAOA,EAAMiC,eAAerD,aAGxB2F,EAAcD,aAAY,SAAAtE,GAC9B,MAAO,CAAEnB,OAAQmB,EAAMnB,OAAQ0D,OAAQvC,EAAMuC,OAAQC,GAAGxC,EAAMwC,OAoBhE,OACE,qBAAKW,UAAU,+FAAf,SAYE,sBAAKA,UAAU,+HAAf,UAgBE,sBAAKA,UAAU,sBAAf,UAIGkB,GAAc,qCACb,cAAC1B,EAAD,CACEE,SAAUA,EACVU,KAAM,SACNR,KAAM,YACNE,KAAM,uCAGR,cAACN,EAAD,CACEE,SAAUA,EACVU,KAAM,cACNR,KAAM,eACNE,KAAM,4CAGR,cAACN,EAAD,CACEE,SAAUA,EACVU,KAAM,eACNR,KAAM,kBACNE,KAAM,6CAGR,cAACN,EAAD,CACEE,SAAUA,EACVU,KAAM,GACNN,KAAM,uCACNI,QAAS,SAACS,GACRA,EAAEU,iBACFN,GAAqBD,UAMxBI,GAAc,mCACf,cAAC,IAAD,CAAMlB,UAAU,YAAYC,GAAG,SAA/B,sBAKDiB,IAAc,KAiChBJ,GAAmB,mCAClB,sBAAKd,UAAU,0BAAf,UAIE,cAACM,EAAD,CACEF,KAAM,UACNF,QAAS,SAACS,GACRA,EAAEU,iBACFN,GAAqBD,GAnI7BI,IACFF,EC1F0B,CAC9BjE,KCDwB,aDExBC,QAAS,ODyFLgE,EAAU,CAAEjE,KAAM,SAAUC,QAAS,WAqI/B,cAACsD,EAAD,CACEF,KAAM,qBACNM,QAAS,sBACTR,QAAS,SAACS,IApIS,WAE7B,IAAMW,EAAIC,OAAOC,SAGXC,EAFOH,EAAEI,SAAW,KAAOJ,EAAEK,KAAOL,EAAEM,SAEzB,SADJC,mBAAmBjE,KAAKC,UAAUuD,IAGjDU,UAAUC,UAAUC,UAAUP,GA8HlBQ,IAJJ,SAOE,gDAEF,cAAC3B,EAAD,CACEF,KAAM,wBACNP,KAAK,qGACLK,QAAS,SAACS,GACRI,GAAqBD,iB,OG9OrC,SAASoB,EAAkBzC,GACzB,OACE,mBACEI,KAAK,IACLG,UAAU,wCACVE,QAAST,EAAMS,QAHjB,SAKGT,EAAMW,OAoCE+B,MA/Bf,WACE,IAAMnB,EAAWC,cAEXmB,EAAgB,SAAC9C,EAAMC,GAC3ByB,EAAS,CACPjE,KAAK,iBACLC,QAAS,CACPsC,KAAMA,EACNC,WAAYA,MAKlB,OACE,sBAAKS,UAAU,gDAAf,UACE,cAAC,EAAD,CACEI,KAAK,UACLF,QAAS,WACPkC,EAAc,aAAa,MAG/B,cAAC,EAAD,CACEhC,KAAK,QACLF,QAAS,WACPkC,EAAc,wBAAwB,U,gECzCnCC,I,OAAmB,SAACC,EAAWC,GAC1C,IAAMC,EAAQF,EAAU5G,QAAO,SAAA0C,GAC7B,OAAOA,EAAEX,YAAc8E,KAEzB,OAAOC,GAASA,EAAM,GAAKA,EAAM,GAAGhF,MAAQ,SAGjCiF,GAAyB,SAACC,GACrC,OAAKA,EACEhF,OAAOiF,KAAKD,GAAQhH,QAAO,SAACkH,EAAKC,GACtC,MAAe,SAARD,GAAiBA,KAFN,ICWTxD,GAAS,CACpB,iBCrBY,CACZ,GAAM,iBACN,KAAQ,SACR,OAAU,WACV,OAAU,CACR,aAAc,CAAC,SAAU,CAAC,MAAO,aAAc,IAAK,CAAC,MAAO,iBAE5D,YAAa,CACX,cACE,CAAC,UACD,CAAC,QACD,GACA,GACA,GACA,GAEJ,sBAAsB,GAExB,QAAW,GDIX,oBErBY,CACZ,GAAM,oBACN,KAAQ,SACR,OAAU,oBACV1D,OAAQ,CAAC,MAAO,eAChBoH,MAAO,CAML,eAAgB,UAChB,gBAAiB,CACf,OACA,CAAC,MAAO,eACR,GAAI,IACJ,GAAI,IACJ,KAGJ,QAAW,IFEX,0BGtBY,CACZ,GAAM,0BACN,KAAQ,SACR,OAAU,oBACVpH,OAAQ,CAAC,MAAO,eAChBqH,OAAQ,CACN,aAAc,4BACd,YAAa,CAAC,sBAAuB,yBACrC,YAAa,CACX,OACA,CAAC,MAAO,eACR,GAAI,IACJ,GAAI,IACJ,KAIJD,MAAO,CACL,aAAc,QAIhB,QAAW,IHCX,0BIxBY,CACZ,GAAM,0BACN,KAAQ,SACR,OAAU,WACVpH,OAAQ,CAAC,IAAK,CAAC,MAAO,gBACtB,OAAU,CACR,aAAc,CAAC,SAAU,CAAC,MAAO,aAAc,IAAK,CAAC,MAAO,iBAC5D,YAAa,EACb,sBAAsB,GAExB,QAAW,IJeX,8BKzBY,CACZ,GAAM,8BACN,KAAQ,UACR,OAAU,WACV,MAAS,CAEP,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,MAAO,OACR,EAAG,KACH,GAAI,GAGN,oBAAqB,CACnB,cACA,CAAC,UACD,CAAC,QACD,EAAG,MACH,EAAG,KACH,IAAK,IACL,GAAI,IACJ,GAAI,KACJ,GAAI,GACJ,GAAI,GAMN,gBAAiB,CACf,cACA,CAAC,UACD,CAAC,mBACD,EAAG,qBACH,IAAM,UACN,GAAK,UACL,IAAM,UACN,EAAG,WAKL,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,GACJ,GAAI,GACJ,GAAI,GACJ,GAAI,GACJ,GAAI,IACJ,GAAI,KAEN,kBAAmB,CACjB,cACA,CAAC,UACD,CAAC,QACD,EAAG,EACH,EAAG,MLjCP,wBM3BY,CACZ,GAAM,wBACN,KAAQ,SACR,OAAU,kBACV,OAAU,CACR,aAAc,CAAC,SAAU,CAAC,MAAO,aAAc,IAAK,CAAC,MAAO,iBAE5D,YAAa,CACX,cACE,CAAC,UACD,CAAC,QACD,GACA,GACA,GACA,GAEJ,sBAAsB,INYxB,2BO3BY,CACZ,GAAM,2BACN,KAAQ,SACR,OAAU,2BACVA,OAAQ,CAAC,MAAO,eAChBoH,MAAO,CAML,eAAgB,UAChB,gBAAiB,CACf,OACA,CAAC,MAAO,eACR,GAAI,IACJ,GAAI,IACJ,KAGJ,QAAW,IPQX,iCQ5BY,CACZ,GAAM,iCACN,KAAQ,SACR,OAAU,2BACVpH,OAAQ,CAAC,MAAO,eAChBqH,OAAQ,CACN,aAAc,4BACd,YAAa,CAAC,sBAAuB,yBACrC,YAAa,CACX,OACA,CAAC,MAAO,eACR,GAAI,IACJ,GAAI,IACJ,KAIJD,MAAO,CACL,aAAc,QAIhB,QAAW,IROX,iCS9BY,CACZ,GAAM,iCACN,KAAQ,SACR,OAAU,kBACVpH,OAAQ,CAAC,IAAK,CAAC,MAAO,gBACtB,OAAU,CACR,aAAc,CAAC,SAAU,CAAC,MAAO,aAAc,IAAK,CAAC,MAAO,iBAC5D,YAAa,EACb,sBAAsB,GAExB,QAAW,ITqBX,qCU/BY,CACZ,GAAM,qCACN,KAAQ,UACR,OAAU,kBACV,MAAS,CAEP,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,MAAO,OACR,EAAG,KACH,GAAI,GAGN,oBAAqB,CACnB,cACA,CAAC,UACD,CAAC,QACD,EAAG,MACH,EAAG,KACH,IAAK,IACL,GAAI,IACJ,GAAI,KACJ,GAAI,GACJ,GAAI,GAMN,gBAAiB,CACf,cACA,CAAC,UACD,CAAC,mBACD,EAAG,qBACH,IAAM,UACN,GAAK,UACL,IAAM,UACN,EAAG,WAKL,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,GACJ,GAAI,GACJ,GAAI,GACJ,GAAI,GACJ,GAAI,IACJ,GAAI,KAEN,kBAAmB,CACjB,cACA,CAAC,UACD,CAAC,QACD,EAAG,EACH,EAAG,MV3BP,6BWjCY,CACZ,GAAM,6BACN,KAAQ,SACR,OAAU,uBACV,OAAU,CACR,aAAc,CAAC,SAAU,CAAC,MAAO,aAAc,IAAK,CAAC,MAAO,iBAE5D,YAAa,CACX,cACE,CAAC,UACD,CAAC,QACD,GACA,GACA,GACA,GAEJ,sBAAsB,IXkBxB,gCYjCY,CACZ,GAAM,gCACN,KAAQ,SACR,OAAU,gCACVA,OAAQ,CAAC,MAAO,eAChBoH,MAAO,CAML,eAAgB,UAChB,gBAAiB,CACf,OACA,CAAC,MAAO,eACR,GAAI,IACJ,GAAI,IACJ,KAGJ,QAAW,IZcX,sCalCY,CACZ,GAAM,sCACN,KAAQ,SACR,OAAU,gCACVpH,OAAQ,CAAC,MAAO,eAChBqH,OAAQ,CACN,aAAc,4BACd,YAAa,CAAC,sBAAuB,yBACrC,YAAa,CACX,OACA,CAAC,MAAO,eACR,GAAI,IACJ,GAAI,IACJ,KAIJD,MAAO,CACL,aAAc,QAIhB,QAAW,IbaX,sCcpCY,CACZ,GAAM,sCACN,KAAQ,SACR,OAAU,uBACVpH,OAAQ,CAAC,IAAK,CAAC,MAAO,gBACtB,OAAU,CACR,aAAc,CAAC,SAAU,CAAC,MAAO,aAAc,IAAK,CAAC,MAAO,iBAC5D,YAAa,EACb,sBAAsB,GAExB,QAAW,Id2BX,0CerCY,CACZ,GAAM,qCACN,KAAQ,UACR,OAAU,kBACV,MAAS,CAEP,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,MAAO,OACR,EAAG,KACH,GAAI,GAGN,oBAAqB,CACnB,cACA,CAAC,UACD,CAAC,QACD,EAAG,MACH,EAAG,KACH,IAAK,IACL,GAAI,IACJ,GAAI,KACJ,GAAI,GACJ,GAAI,GAMN,gBAAiB,CACf,cACA,CAAC,UACD,CAAC,mBACD,EAAG,qBACH,IAAM,UACN,GAAK,UACL,IAAM,UACN,EAAG,WAKL,iBAAkB,CAChB,cACA,CAAC,UACD,CAAC,QACD,EAAG,GACH,GAAI,GACJ,GAAI,GACJ,GAAI,GACJ,GAAI,GACJ,GAAI,IACJ,GAAI,KAEN,kBAAmB,CACjB,cACA,CAAC,UACD,CAAC,QACD,EAAG,EACH,EAAG,MfrBP,gBgBvCY,CACZ,GAAM,gBACN,KAAQ,OACR,OAAU,gBACV,MAAS,CACP,aAAc,UACd,eAAgB,MCNPsH,GAAU,CACrB,SAAY,CACV,KAAQ,WAEV,oBAAqB,CACnB,KAAQ,UACR,SAAW,EACX,cAAiB,IAGnB,kBAAmB,CACjB,KAAQ,WAEV,2BAA4B,CAC1B,KAAQ,UACR,SAAW,EACX,cAAiB,IAGnB,uBAAwB,CACtB,KAAQ,WAEV,gCAAiC,CAC/B,KAAQ,UACR,SAAW,EACX,cAAiB,KCgBfC,GAAc,ogB,8CASpB,WAAiCC,GAAjC,uBAAAC,EAAA,sDAEQC,EAAU,GAFlB,MACoB,CAAC,UAAW,UAAW,UAAW,WADtD,gDAGeC,EAHf,cAI2BC,GAAmBJ,EAAgBG,GAJ9D,OAIYE,EAJZ,OAKQH,EAAQ9I,KAAKiJ,GALrB,2DAOWH,GAPX,6C,+BAUeE,G,mFAAf,WAAkCJ,EAAeG,GAAjD,mCAAAF,EAAA,4DACgB,8BACRK,EAAaC,SAASC,gBADd,6BACqC,QACtCC,UAAYV,GAEnBW,EAAQ,GACRC,EAAS,IAFTC,EAAMN,GAKNO,aAAa,UAAW,aACjBD,EAAIE,eAAe,eACzBD,aAAa,OAAQb,GAEnBY,EAAIE,eAAe,eACrBD,aAAa,OAAQV,GAEnBS,EAAIE,eAAe,eACrBD,aAAa,OAAQV,GAG1BO,EAAMK,MAAQ,GACdJ,EAAOI,MAAQ,GAEXC,EAAST,SAASU,cAAc,UACpCL,EAAIC,aAAa,QAASH,EAAMK,OAChCH,EAAIC,aAAa,SAAUF,EAAOI,OAClCC,EAAON,MAAQA,EAAMK,MACrBC,EAAOL,OAASA,EAAOI,MACnB1J,GAAO,IAAI6J,eAAgBC,kBAAkBP,GAC7CQ,EAAM/C,OAAOgD,KAAOhD,OAAOiD,WAAajD,OACxCkD,EAAM,IAAIC,MACVC,EAAO,IAAIC,KAAK,CAACrK,GAAO,CAAEwC,KAAM,kBAEhC0E,EAAM6C,EAAIO,gBAAgBF,GAC9BF,EAAIpE,IAAMoB,EAlCd,UAmCUgD,EAAIK,SAnCd,eAoCQC,EAAUb,EAAOc,WAAW,OACxBC,UAAUR,EAAK,EAAG,GAC1BH,EAAIY,gBAAgBzD,GAtCxB,kBAwCW,IAAI0D,WAAWJ,EAAQK,aAAa,EAAG,EAAGX,EAAIb,MAAOa,EAAIZ,QAAQtJ,KAAK8K,SAxCjF,6C,sBA2CeC,O,6CCxFTnM,GAAMC,EAAQ,IAGpBmM,IAAOC,OAAO,KAAMC,MAEpB,IAAMC,GAAsB,CAC1B,MAAS,yBACT,MAAS,qBACT,UAAa,0BACb,MAAS,yBACT,OAAU,4BAuEZ,SAASC,GAAalG,GACpB,IAAMuB,EAAWC,cAIXjD,EAAWmD,aAAY,SAAAtE,GAC3B,OAAOA,EAAMmB,UAAY,QAGrBK,EAAU8C,aAAY,SAAAtE,GAC1B,OAAOA,EAAMwB,SAAW,QAGpB6C,EAAaC,aAAY,SAAAtE,GAC7B,QAAOA,EAAMiC,eAAerD,aAIxBe,EAAS2E,aAAY,SAAAtE,GACzB,OAAOA,EAAMuC,OAASvC,EAAMuC,OAAO5C,OAAS,SACxC,GAEA8F,EAAYnB,aAAY,SAAAtE,GAC5B,OAAQA,EAAMI,UAAYJ,EAAMI,SAAS3D,WAAcuD,EAAMI,SAAS3D,WAAa,MAG/E0F,EAAgBmC,aAAY,SAAAtE,GAChC,OAAIA,GAAQA,EAAMmC,cAIXnC,EAAMmC,cAHJ,QAML4G,EAAenG,EAAMmG,aAC3B,EAAcrF,mBAAS,WAAhBsF,EAAP,oBACA,EAActF,mBAAS,YAAhBuF,EAAP,oBACA,EAAevF,mBAAS,IAAjBwF,EAAP,oBACA,EAA8BxF,mBAAS,GAAvC,mBAAOyF,EAAP,KAAgBC,EAAhB,KACA,EAAgD1F,mBAAS,IAAzD,mBAAO2F,EAAP,KAAyBC,EAAzB,KACA,EAAoC5F,mBAAS,IAA7C,mBAAO6F,EAAP,KAAmBC,EAAnB,KACIhJ,EAAMiJ,iBAAO,MAIjBC,qBAAU,YACQ,WAGd,IAAIlJ,EAAIH,QAAR,CAEAG,EAAIH,QAAU,IAAIsJ,IAAWC,IAAI,CAC/BC,UAAWd,EAAa1I,QACxByJ,MANY,qDAOZC,YAAaC,6FACbC,OAAQ,CAACjB,EAAKC,GACdC,KAAMA,EACNgB,QAAS,GACTC,oBAAoB,IAItB3J,EAAIH,QAAQ+J,WAAW,IAAIT,IAAWU,kBAAkB,CACtDC,aAAa,IACX,gBAGJ9J,EAAIH,QAAQ+J,WACV,IAAIT,IAAWY,iBAAiB,CAC9BC,gBAAiB,CACfC,oBAAoB,GAEtBC,mBAAmB,IACnB,gBAGJlK,EAAIH,QAAQsK,GAAG,QAAQ,WACrBvB,EAAWD,EAAU,GACrBzE,OAAOkG,MAAQpK,EAAIH,WAGrB,IAAMwK,EAAkB,SAACC,GACvB,IAAMC,EAASD,EAAWE,YACpB7K,EAAU,CACd4K,EAAOE,IAAIjC,IACX+B,EAAOE,IAAIhC,IACX8B,EAAOG,IAAIlC,IACX+B,EAAOG,IAAIjC,KAGb9E,EAAS,CAAEjE,KAAM,uBAAwBC,QAASA,KAGpDK,EAAIH,QAAQsK,GAAG,WAAW,WACxBE,EAAgBrK,EAAIH,YAGtBG,EAAIH,QAAQsK,GAAG,WAAW,WACxBE,EAAgBrK,EAAIH,YAItBG,EAAIH,QAAQ8K,WAAWC,UACvB5K,EAAIH,QAAQgL,gBAAgBC,mBAE9BC,KACC,CAACpK,EAAUgB,EAAe6G,EAAKC,EAAKC,EAAMC,EAASJ,EAAc5E,IAEpE,IAAMqH,EAAoB,SAACC,EAAYC,GAGrC,GAAMlL,EAAIH,SAAaG,EAAIH,QAAQsL,iBAQnC,GAAMD,EAAN,CAKA,IAAME,EAAkBpL,EAAIH,QAAQwL,UAAUJ,GAE1CK,EAAOJ,GAAcA,EAAWK,SAAWzP,GAAIyE,KAAKC,UAAU0K,EAAWK,WAAazP,GAAI,eAE9F,GAAGsP,GACD,IAAKrC,GAAcA,EAAWkC,KAAgBK,EAAM,CAElD,IAAIE,EAAqBzC,EACzByC,EAAmBP,GAAcK,EACjCtC,EAAcwC,GAEdxL,EAAIH,QAAQwL,UAAUJ,GAAYQ,QAAQP,SAM5C,GAAGA,EAAY,CAEb,IAAIM,EAAqBzC,EACzByC,EAAmBP,GAAcK,EACjCtC,EAAcwC,GAGd,IAAIE,EAASrL,OAAOC,OAAO,GAAI,CAC7B,KAAQ,UACR,KAAQ4K,GACPvF,GAAQsF,GAActF,GAAQsF,GAAc,IAC/CjL,EAAIH,QAAQ8L,UAAUV,EAAYS,UAxCpCnI,YAAW,WACTqF,EAAWD,EAAU,KACpB,MA0JP,OA/GAO,qBAAU,WAELvH,GAAiBA,EAAczE,MAChC8N,EAAkB,gBAAiBrJ,EAAczE,MAIhDyD,GAAYA,EAASzD,OACtB8N,EAAkB,WAAYrK,EAASzD,MACvC8N,EAAkB,oBAAqBrK,EAASzD,OAI/C8D,EAAQ7D,SAAW6D,EAAQ7D,QAAQuC,OACpCsL,EAAkB,kBAAmBhK,EAAQ7D,SAC7C6N,EAAkB,2BAA4BhK,EAAQ7D,UAErD6D,EAAQ5D,cAAgB4D,EAAQ5D,aAAasC,OAC9CsL,EAAkB,uBAAwBhK,EAAQ5D,cAClD4N,EAAkB,gCAAiChK,EAAQ5D,iBAI5D,CAEDuD,EAAYA,EAASzD,KAAOyD,EAASzD,KAAKqO,SAAW5K,EAASzD,KAAQyD,EACtEK,EAAQ7D,QAAU6D,EAAQ7D,QAAQoO,SAAWvK,EAAQ7D,QACrD6D,EAAQ5D,aACRuE,EACAkH,EACAF,EACAvG,EAAMwJ,eAIR1C,qBAAU,WACHlJ,EAAIH,SACJV,GAA4B,IAAlBA,EAAOW,SAItBE,EAAIH,QAAQgM,UAAU1M,GAGtBwE,EAAS,CAAEjE,KAAM,yBAA0BC,QAAS,QACnD,CAAER,EAAQwE,IAGbuF,qBAAU,WAEAlJ,EAAIH,SAAaG,EAAIH,QAAQsL,iBAQjBnL,EAAIH,QAAQiM,WAAW/J,OAC/BgK,SAAQ,SAAAhL,GAEbA,EAAEiL,GAAGC,QAAQ,cAAgB,GAE9BjM,EAAIH,QAAQqM,YAAYnL,EAAEiL,IAEzBjL,EAAEiL,GAAGC,QAAQ,aAAe,GAE7BjM,EAAIH,QAAQqM,YAAYnL,EAAEiL,IAEzBjL,EAAEiL,GAAGC,QAAQ,kBAAoB,IAElCjM,EAAIH,QAAQqM,YAAYnL,EAAEiL,IAC1BlD,EAAoB,QAIxB1G,EAAML,OAAOgK,SAAQ,SAAAhL,GACnB,GAAGqB,EAAML,OAAOkK,QAAQlL,KAAO,EAAG,CAChC,IAAMoL,EAAiBnM,EAAIH,QAAQuM,SAASrL,GACtCsL,EAAyBrM,EAAIH,QAAQwL,UAAUtJ,GAAOhB,GAAG2K,SAC1DS,GAAkBE,GACrBrM,EAAIH,QAAQyM,SAASvK,GAAOhB,SA9BhCwC,YAAW,WACTqF,EAAWD,EAAU,KACpB,OAkCN,CAAChI,EAAUK,EAAQ7D,QAAS6D,EAAQ5D,aAAcuE,EAAegH,EAASvG,EAAML,OAAQ8B,EAAYoB,IAEvGiE,qBAAU,WACHlJ,EAAIH,SACJoF,GA5Tc,SAACsH,EAAYtH,EAAWpB,GAEP,CACpC,iBACA,0BACA,wBACA,iCACA,6BACA,uCAG4BkI,SAAQ,SAACS,GAGrCD,EAAWpC,GAAG,QAASqC,GAAW,SAAUlJ,GAU1C,IATA,IAAMmJ,EAAoBnJ,EAAEiI,SAAS,GAAGmB,WAClCC,EAAgB3H,GAAiBC,EAAWwH,EAAkBrM,WAEhEwM,EAActJ,EAAEiI,SAAS,GAAGsB,SAASD,YAAYE,QAM9CnQ,KAAKoQ,IAAIzJ,EAAE0J,OAAOxE,IAAMoE,EAAY,IAAM,KAC/CA,EAAY,IAAMtJ,EAAE0J,OAAOxE,IAAMoE,EAAY,GAAK,KAAO,KAG3D,IAAIzD,IAAW8D,OACZC,UAAUN,GACVO,QAFH,4JAMmCR,EANnC,6HAQyDA,EARzD,8BASUF,EAAkBrM,UAT5B,uGAaQqM,EAAkBW,sBAAlB,gDACmBlF,IAAOuE,EAAkBW,uBAAuBjF,OAAO,MAAMkF,UADhF,mDAEoBnF,IAAOuE,EAAkBW,uBAAuBE,OAAO,oBAF3E,wBAGQ,GAhBhB,2BAkBQjF,IAAuBA,GAAoBoE,EAAkBrM,WAA7D,qDACWiI,GAAoBoE,EAAkBrM,WADjD,2IAC8LuM,EAD9L,wEAIQ,GAtBhB,iCAyBGY,MAAMhB,MAGXA,EAAWpC,GAAG,aAAcqC,GAAW,WACrCD,EAAWiB,YAAYlE,MAAMmE,OAAS,aAIxClB,EAAWpC,GAAG,aAAcqC,GAAW,WACrCD,EAAWiB,YAAYlE,MAAMmE,OAAS,SA+PxCC,CAAe1N,EAAIH,QAASoF,KAC3B,CAACjF,EAAIH,QAASoF,IAEjBiE,qBAAU,WACR,IAAIyE,EAAgB,uCAAG,WAAM1N,GAAN,SAAA6F,EAAA,0DACjB9F,EAAIH,QAAQ+N,SAAS3N,EAAUG,UAAY,MAD1B,iEAKH6H,GAAkBhI,EAAUE,OALzB,cAMf4L,SAAQ,SAAC3E,EAAKlH,GAClBF,EAAIH,QAAQgO,SAAS5N,EAAUG,UAAY,IAAMF,EAAK,CAAEqG,MAAO,GAAIC,OAAQ,GAAItJ,KAAMkK,OAPlE,2CAAH,sDAUpBnC,EAAU8G,SAAQ,SAAA9L,GAChB0N,EAAiB1N,QAElB,CAACgF,IAEG,K,OCxSM6I,OA5Df,SAAkB1L,GAChB,IAAMuB,EAAWC,cACXmK,EAAe9E,iBAAO,MACtB+E,EAAO5L,EAAMH,KAAKgM,cAElBC,EAAYpK,aAAY,SAAAtE,GAC5B,QAAOA,EAAMwC,IAAKxC,EAAMwC,GAAGgM,MAGvBjJ,EAAgB,SAAC9C,EAAMC,GAC3ByB,EAAS,CACPjE,KAAK,iBACLC,QAAS,CACPsC,KAAMA,EACNC,WAAYA,MAeXiM,GAAmB/L,EAAMgM,SAAW,IAApCD,gBAEP,OAAO,sBAAKxL,UAAS,4CAELP,EAAMiM,UAFD,mCAIfH,EAAY,GAAK,YAJF,sBAMhBI,IAAKP,EAAczE,MAAOlH,EAAMkH,OAAS,GANvC,UAOL,qBAAK3G,UAAU,0BAGb2G,MAAO,CAAC6E,gBAAiBA,GAH3B,SAIG/L,EAAMmM,WAET,qBACE5L,UAAU,+CADZ,SAGE,qBACEA,UAAU,kBACVE,QAAS,kBA3BVqL,GACDnJ,EAAc,sBAAsB,QAGtCA,EAAciJ,GAAQE,IAwBlB5E,MAAO,CAAC6E,gBAAiBA,GAH3B,SAKE,+BACG/L,EAAMgM,QAAQI,OAAS,kB,OC3ClC,SAASC,GAAYrM,GAEnB,IAAMuB,EAAWC,cAEX8K,EAAgB5K,aAAY,SAAAtE,GAChC,QAAOA,EAAMnB,QAA+B,KAAtBmB,EAAMnB,OAAOf,UAG/BqR,EAAe7K,aAAY,SAAAtE,GAC/B,QAAOA,EAAMuC,QAASvC,EAAMuC,OAAOhD,iBAG/B6P,EAAc9K,aAAY,SAAAtE,GAC9B,OAAOA,EAAMuC,OAASvC,EAAMuC,OAAO/C,YAAcV,KAG7CuQ,EAAW/K,aAAY,SAAAtE,GAC3B,OAAOA,EAAMuC,OAASvC,EAAMuC,OAAO9C,UAAYN,KAG3CmQ,EAAchL,aAAY,SAAAtE,GAC9B,OAAOA,EAAMuC,OAASvC,EAAMuC,OAAO7C,aAAeJ,KAG9C+E,EAAaC,aAAY,SAAAtE,GAC7B,QAAOA,EAAMiC,eAAerD,aAG9B,OAAGwQ,IAAcpQ,GACboQ,IAAcrQ,IAAuC,IAAhBmQ,EAC7B,KAIV,cAAC,GAAD,CAAUzM,KAAK,cAAcoM,UAAU,QAAQD,QAAS,CACtDI,MAAO,QACPL,gBAAiB,QAChB7E,MAAO,CACRyF,SAAU,WACVC,IAAK,MACLC,MAAO,GANT,SAQE,sBAAKtM,UAAU,mBAAf,UACIiM,IAActQ,EACZ,qBAAK,YAAU,WAAWqE,UAAS,eAAUkM,IAAWpQ,EAAkC,kBAAkB,IAC1GoE,QAAS,WAAQc,EAAS,CAAEjE,KAAM,sBAAuBC,QAASlB,KADpE,SAEE,sBAAMkE,UAAU,cAAhB,wBAGM,KAEViM,IAActQ,EACZ,qBAAK,YAAU,WAAWqE,UAAS,eAAUkM,IAAWnQ,EAAmC,kBAAkB,IAC3GmE,QAAS,WAAQc,EAAS,CAAEjE,KAAM,sBAAuBC,QAASjB,KADpE,SAEE,sBAAMiE,UAAU,cAAhB,wBAGO,KAEXiM,IAActQ,EACd,qBAAK,YAAU,WAAYqE,UAAS,eAAUkM,IAAWlQ,EAAqC,kBAAkB,IAC9GkE,QAAS,WAAQc,EAAS,CAAEjE,KAAM,sBAAuBC,QAAShB,KADpE,SAEE,sBAAMgE,UAAU,cAAhB,0BAGO,KAETiM,IAAcrQ,EACZ,qBAAK,YAAU,WAAWoE,UAAS,eAAUmM,IAAclQ,EAAkC,kBAAkB,IAC7GiE,QAAS,WAAQc,EAAS,CAAEjE,KAAM,yBAA0BC,QAASf,KADvE,SAEE,sBAAM+D,UAAU,cAAhB,wBAGM,KAEViM,IAAcrQ,EACZ,qBAAK,YAAU,WAAWoE,UAAS,eAAUmM,IAAcjQ,EAAmC,kBAAkB,IAC9GgE,QAAS,WAAQc,EAAS,CAAEjE,KAAM,yBAA0BC,QAASd,KADvE,SAEE,sBAAM8D,UAAU,cAAhB,wBAGO,KAEXiM,IAAcrQ,EACd,qBAAK,YAAU,WAAYoE,UAAS,eAAUmM,IAAchQ,EAAqC,kBAAkB,IACjH+D,QAAS,WAAQc,EAAS,CAAEjE,KAAM,yBAA0BC,QAASb,KADvE,SAEE,sBAAM6D,UAAU,cAAhB,0BAGO,KAETkB,GAAc6K,EACd,qBAAK,YAAU,QAAQ/L,UAAS,eAAWgM,EAAiC,GAAlB,mBAAwB9L,QAAS,WACvFc,EAAS,CAAEjE,KAAM,6BAA8BC,QAAS,QAD5D,SAGE,sBAAMgD,UAAU,cAAhB,qBAGO,U,OCnBJyG,OAhFf,YAAmC,EAArB8F,KAAsB,IAAhB3G,EAAe,EAAfA,aACZ4G,EAAYrL,aAAY,SAAAtE,GAC5B,QAAOA,EAAMuC,QAASvC,EAAMuC,OAAOhD,iBAG/BV,EAASyF,aAAY,SAAAtE,GACzB,OAAOA,EAAMnB,UAGTuQ,EAAc9K,aAAY,SAAAtE,GAC9B,OAAOA,EAAMuC,OAASvC,EAAMuC,OAAO/C,YAAcV,KAG7CuQ,EAAW/K,aAAY,SAAAtE,GAC3B,OAAOA,EAAMuC,OAASvC,EAAMuC,OAAO9C,UAAYN,KAG3CmQ,EAAchL,aAAY,SAAAtE,GAC9B,OAAOA,EAAMuC,OAASvC,EAAMuC,OAAO7C,aAAeJ,KAGhDiD,EAAS,GACVoN,GAAapN,EAAO9E,KAAK,iBAE5B,IAAI2O,EAAe,GAGnB,GAAGgD,IAActQ,EACf,OAAOuQ,GACL,KAAKpQ,EACHsD,EAAO9E,KAAK,+BACZ2O,EAAe,WACf,MACF,KAAKlN,EACHqD,EAAO9E,KAAK,qBACZ8E,EAAO9E,KAAK,2BACZ8E,EAAO9E,KAAK,2BACZ2O,EAAe,oBACf,MACF,KAAKjN,EACHoD,EAAO9E,KAAK,kBACZ2O,EAAe,gBAId,GAAGgD,IAAcrQ,EAAqB,CAC3C,IAAM6Q,EAA4C,eAA9B/Q,EAAOL,mBAAsC,eAAiB,UAClF,OAAO8Q,GACL,KAAKlQ,EACHmD,EAAO9E,KAAP,kBAAuBmS,EAAvB,wBACAxD,EAAY,kBAAcwD,GAC1B,MACF,KAAKvQ,EACHkD,EAAO9E,KAAP,kBAAuBmS,EAAvB,cACArN,EAAO9E,KAAP,kBAAuBmS,EAAvB,oBACArN,EAAO9E,KAAP,kBAAuBmS,EAAvB,oBACAxD,EAAY,kBAAcwD,EAAd,aACZ,MACF,KAAKtQ,EACHiD,EAAO9E,KAAP,kBAAuBmS,EAAvB,WACAxD,EAAY,kBAAcwD,IAKhC,OACE,sBAAKzM,UAAU,gBAAf,UACE,qBAAKA,UAAU,kBAAf,SACE,cAAC,GAAD,MAEF,qBAAKA,UAAU,oBAAf,SACE,cAAC,GAAD,CACE4F,aAAcA,EACdxG,OAAQA,EACR6J,aAAcA,U,OCxFT,SAASyD,GAAYjN,GAClC,IAAMkN,EAAqBxL,aAAY,SAAAtE,GACrC,QAAOA,EAAMwC,IAAKxC,EAAMwC,GAAGuN,aAG7B,OACE,qBACE5M,UAAS,mCAA8B2M,EAAqB,GAAK,aACjEhG,MAAO,CACLkG,UAAW,QAHf,SAME,qBAAK7M,UAAU,+BAAf,SACGP,EAAMmM,a,+GCRFkB,GAAyB,SAACb,EAAavQ,EAAQuB,GAC1D,IAAM8P,EAAcd,IAActQ,EAC5BqR,EAAaf,IAAcrQ,EAC3BqR,EAAmBhB,IAAcpQ,EAGnCqR,EAAe,GACnB,GAAkB,KAAfxR,EAAOlC,MACR0T,EAAa5S,KAAK,YAAYoB,EAAOlC,YAChC,GAAmB,KAAhBkC,EAAOf,OAAa,CAE5B,IAAIwS,EAAa,GACbC,EAAenQ,EAAS1D,SAAS8T,MAAK,SAAA1S,GAAM,OAAEA,EAAO2S,UAAU5R,EAAOf,eACvE4S,IAAYH,IACbD,EAAalQ,EAASzD,MAAMkC,QAAO,SAAA8R,GACjC,OAAOA,EAAKJ,eAAeA,EAAaE,SAASE,EAAKlO,OAAO8N,EAAa9N,SAIvD,IAApB6N,EAAWhQ,OACZ+P,EAAa5S,KAAK,YAAY6S,EAAW,GAAGM,SAE5C3P,QAAQ4P,MAAM,uEAAwEhS,EAAOf,OAAQwS,GAKzG,GAA8B,KAA3BzR,EAAOT,wBAAqDsS,IAA3B7R,EAAOT,kBAA+B,CACxE,IAAI0S,EAAcjS,EAAOT,kBAAkBqD,MAAM,KAC7CsP,EAAqB3Q,EAAS3D,WAC/BoC,QAAO,SAAA4B,GAAS,OAA+C,IAA5CqQ,EAAYnP,SAASlB,EAAUG,cAClDJ,KAAI,SAAAC,GAAS,OAAEA,EAAUG,aAAWgB,KAAK,KAE5CyO,EAAa5S,KAAK,aAAesT,QACK,IAA7B3Q,EAAS3D,WAAW6D,QAC7B+P,EAAa5S,KAAK,aAAe2C,EAAS3D,WAAW,GAAGmE,WAK1D,GAAiC,KAA9B/B,EAAOP,2BAA2DoS,IAA9B7R,EAAOP,qBAAkC,CAC9E,IAAIwS,EAAcjS,EAAOP,qBAAqBmD,MAAM,KAChDuP,EAAgB5Q,EAASxD,cAC1BiC,QAAO,SAAAoS,GAAK,OAAoC,IAAjCH,EAAYnP,SAASsP,EAAMzE,OAC1ChM,KAAI,SAAAyQ,GAAK,OAAEA,EAAMzE,MAAI5K,KAAK,KAE7ByO,EAAa5S,KAAK,gBAAkBuT,GAItC,GAAGd,EAAe,CAChB,IAAIgB,GAAK,IAAIlT,MAAOC,cAAciF,QAAQ,UAAW,KACnC,KAAfrE,EAAOd,QACRmT,EAAK,IAAIlT,KAAKa,EAAOd,OAAOE,cAAciF,QAAQ,UAAW,MAE/DmN,EAAa5S,KAAK,aAAayT,GAGjC,GAAGf,EAAc,CACf,IAAIgB,GAAM,IAAInT,MAAOC,cAAciF,QAAQ,UAAW,KAClDkO,EAAMD,EACVtS,EAAOX,cAAgBwK,MAAS2I,SAASxS,EAAOV,aAAe,IAAM,WAAWF,cAChFY,EAAOyS,YAAc5I,MAASzK,cAEnBY,GACuB,KAAzBA,EAAOX,eACgB,KAAvBW,EAAOyS,kBACkBZ,IAAzB7R,EAAOX,oBACgBwS,IAAvB7R,EAAOyS,cAGdH,EAAM,IAAInT,KAAKa,EAAOX,eAAeD,cAAciF,QAAQ,UAAW,KACtEkO,EAAM,IAAIpT,KAAKa,EAAOyS,aAAarT,cAAciF,QAAQ,UAAW,MAEtEmN,EAAa5S,KAAK,cAAgB0T,EAAM,aAAeC,GAGzD,GAAGhB,EAAoB,CACrB,IAAIrO,OAAM2O,EACN1O,OAAM0O,EACP7R,EAAOJ,iBAAmBI,EAAOH,kBAClCqD,EAAM,IAAI/D,KAAKa,EAAOJ,iBACtBuD,EAAM,IAAIhE,KAAKa,EAAOH,kBAGpBqD,GAAMC,IACRD,EAAM,IAAI/D,KAEVgE,EAAM,IAAIhE,MAAM,IAAIA,MAAQuT,gBAC5BxP,EAAIyP,QAAQxP,EAAIyP,UAAU,IAG5B,IAAIN,EAAMpP,EAAI9D,cAAciF,QAAQ,UAAW,KAC3CkO,EAAMpP,EAAI/D,cAAciF,QAAQ,UAAW,KAC/CmN,EAAa5S,KAAK,cAAgB0T,EAAM,aAAeC,GAGzD,OAAOf,GAGIhM,GAAa,SAACrE,GACzB,QAAOA,EAAMiC,eAAerD,WC1GjB8S,GAAkB,uCAAG,WAAOC,EAAO5L,EAAK6I,GAAnB,uBAAAtI,EAAA,6DAE5B1B,EAF4B,2EAE8CmB,EAF9C,8BAEuE6I,EAAQgD,mBAE3GC,EAAe5B,GAAuBjR,EAAmB4P,EAAQ/P,OAAQ+P,EAAQxO,WACrEE,OAAO,IAAGsE,GAAO,IAAMiN,EAAajQ,KAAK,MACzDX,QAAQC,IAAI,MAAO0D,GAEfkN,EAAe,CACjBC,QAAS,CACP,cAAgB,UAAhB,OAA2BJ,KAVC,SAcTK,MAAMpN,EAAKkN,GAdF,cAc1BG,EAd0B,iBAeLA,EAASC,OAfJ,eAe1BC,EAf0B,yBAiBzBA,GAjByB,4CAAH,0D,gCCDzBC,GAA6B,SAACrM,EAAKrI,EAAMkU,GAC7C,IAAKlU,IAAUA,EAAK,GAAD,OAAIqI,EAAJ,wBAAiCrI,EAAK,GAAD,OAAIqI,EAAJ,sBAA4BsM,OAClF,MAAO,GAET,IAAMC,EAAgB,SAACV,GACrB,MAAwB,QAArBA,EACM,cAEoB,SAArBA,EACC,aAEoB,UAArBA,EACC,gBADJ,GAIP,OAAOlU,EAAK,GAAD,OAAIqI,EAAJ,sBAA4BsM,OAAO7R,KAAI,SAAAe,GAChD,IAAQgR,EAA4BhR,EAA5BgR,eAAmBC,EAA3B,aAAoCjR,EAApC,IACA,OAAO,2BAAIiR,GAAS,CAAE/P,KAAMiG,IAAO6J,GAAgBzE,OAAOwE,EAAcV,UCjBtEa,G,4JACJ,WACE,MAA0BC,KAAK9P,MAAvBrB,EAAR,EAAQA,EAAGoR,EAAX,EAAWA,EAAGxS,EAAd,EAAcA,QAEd,OACE,mBAAGyS,UAAS,oBAAerR,EAAf,YAAoBoR,EAApB,KAAZ,SACE,sBAAMpR,EAAG,EAAGoR,EAAG,EAAGE,GAAI,GAAIC,WAAW,SAASC,KAAK,OAAOH,UAAU,YAAYI,SAAS,QAAzF,SACG7S,EAAQiH,c,GAPe6L,iBAc5BC,G,4JACJ,WACE,MAA0BR,KAAK9P,MAAvBrB,EAAR,EAAQA,EAAGoR,EAAX,EAAWA,EAAGxS,EAAd,EAAcA,QAEd,OACE,mBAAGyS,UAAS,oBAAerR,EAAf,YAAoBoR,EAApB,KAAZ,SACE,sBAAMpR,GAAI,EAAGoR,EAAG,EAAGE,GAAI,EAAGC,WAAW,MAAMC,KAAK,OAAOH,UAAU,YAAYI,SAAS,QAAtF,SACG7S,EAAQiH,c,GAPe6L,iBCZ5BE,I,OAAoB,SAAC,GAAgC,IAG/BC,EAHCC,EAA6B,EAA7BA,OAAQlT,EAAqB,EAArBA,QAASmT,EAAY,EAAZA,MAC5C,GAAID,GAAUlT,GAAWA,EAAQG,OAAQ,CAYvC,OACE,sBAAK6C,UAAU,oBAAf,UACE,qBAAKA,UAAU,OAAf,SACE,sCAAOmQ,OAET,oBAAInQ,UAAU,YAAd,UAfoBiQ,EAgBDjT,EAhBQU,OAAOiF,KAAKsN,GAAKG,OAAOC,UAAUhT,KAAI,SAAAuF,GAAG,kCAASqN,EAAIrN,IAAb,IAAmBA,YAgB3DvF,KAAI,SAAAe,GAC5B,OAAO,qBAAIuI,MAAO,CAACnJ,MAAOY,EAAEwR,MAArB,UACJxR,EAAEkB,KADE,KACMlB,EAAE6F,cAInB,sBAAKjE,UAAU,OAAf,qBApBa,WACf,IAAIsQ,EAAM,EAIV,OAHAtT,EAAQK,KAAI,SAAAe,GACVkS,GAAOlS,EAAE6F,SAEJqM,EAgBMC,GAAW,6BAM5B,OAAO,OCiGMC,OAnGf,SAA0B/Q,GAGxB,IAAM+O,EAAQrN,aAAY,SAAAtE,GAAK,OAAIA,EAAMiC,eAAerD,UAAU+S,SAC5D9S,EAASyF,aAAY,SAAAtE,GAAK,OAAIA,EAAMnB,UACpCuB,EAAWkE,aAAY,SAAAtE,GAAK,OAAIA,EAAMI,YAE5C,EAAsCsD,mBAAS,IAA/C,mBAAOkQ,EAAP,KAAoBC,EAApB,KAEAnK,qBAAU,WAAM,4CAGd,4BAAApD,EAAA,sEACwBoL,GAAmBC,EAAO,UAAW,CACzD9S,OAAQA,EACRuB,SAAUA,EACVwR,iBAAkB/S,EAAOF,yBAJ7B,OACQ6C,EADR,OAMEqS,EAAezB,GAA2B,UAAW5Q,EAAS3C,EAAOF,yBANvE,4CAHc,uBAETyB,IAAcA,EAASzD,OAASyD,EAASzD,MAAM2D,QAAU,GAFhD,mCAWdwT,KACC,CAACjV,EAAQA,EAAOF,uBAAwByB,EAAUuR,IAErD,IAAMoC,EAAwBH,EAAc/S,OAAOiF,KAAK8N,GAAatT,OAAS,EAmE9E,OAlEAW,QAAQC,IAAI,wBAAyB6S,GAmEnC,qBAAKjK,MAAO,CAAE/C,MAAO,OAAQC,OAAQ,QAASgN,UAAW,SAAUhE,UAAW,UAA9E,SACE,cAACiE,GAAA,EAAD,UAjECF,EAAwB,GAClB,eAACG,GAAA,EAAD,CACLxW,KAAMkW,EACNO,OAAQ,CACN3E,IAAK,GACLC,MAAO,GACP2E,KAAM,EACNC,OAAQ,GANL,UASL,cAACC,GAAA,EAAD,CAAeC,gBAAgB,MAAMC,UAAU,IAC/C,cAACC,GAAA,EAAD,CAAOC,QAAQ,OAAOC,KAAM,cAAC,GAAD,MAC5B,cAACC,GAAA,EAAD,CAAOD,KAAM,cAAC,GAAD,MACb,cAACE,GAAA,EAAD,CAASC,QAAS,cAAC,GAAD,MAClB,cAACC,GAAA,EAAD,IAbK,OAcJnP,GAAuBgO,EAAY,IAAIpT,KAAI,SAAAe,GAC1C,IAAM4L,EAAgB3H,GAAiBpF,EAAS3D,WAAY8E,GAC5D,OACE,cAACyT,GAAA,EAAD,CAEEC,QAAQ,IACR/U,KAAK,WACLwU,QAASnT,EACT2T,OAAQ/H,EACR4F,KAAM5F,EACNgI,mBAAmB,GANd5T,SAaR,eAAC6T,GAAA,EAAD,CACL1X,KAAMkW,EACNO,OAAQ,CACN3E,IAAK,GACLC,MAAO,GACP2E,KAAM,EACNC,OAAQ,GANL,UASL,cAACC,GAAA,EAAD,CAAeC,gBAAgB,MAAMC,UAAU,IAC/C,cAACC,GAAA,EAAD,CAAOC,QAAQ,OAAOC,KAAM,cAAC,GAAD,MAC5B,cAACC,GAAA,EAAD,CAAOD,KAAM,cAAC,GAAD,MACb,cAACE,GAAA,EAAD,CAASC,QAAS,cAAC,GAAD,MAClB,cAACC,GAAA,EAAD,IAbK,OAcJnP,GAAuBgO,EAAY,IAAIpT,KAAI,SAAAe,GAC1C,IAAM4L,EAAgB3H,GAAiBpF,EAAS3D,WAAY8E,GAC5D,OACE,cAAC8T,GAAA,EAAD,CAEEJ,QAAQ,IACR/U,KAAK,WACLwU,QAASnT,EACT2T,OAAQ/H,EACR4F,KAAM5F,EACNgI,mBAAmB,GANd5T,cCqBF+T,OAlGf,SAAoC1S,GAGlC,IAAM+O,EAAQrN,aAAY,SAAAtE,GAAK,OAAIA,EAAMiC,eAAerD,UAAU+S,SAC5D9S,EAASyF,aAAY,SAAAtE,GAAK,OAAIA,EAAMnB,UACpCuB,EAAWkE,aAAY,SAAAtE,GAAK,OAAIA,EAAMI,YAE5C,EAAwCsD,mBAAS,IAAjD,mBAAO6R,EAAP,KAAqBC,EAArB,KAEA9L,qBAAU,WAAM,4CAGd,4BAAApD,EAAA,sEACkCoL,GAAmBC,EAAO,qBAAsB,CAC9E9S,OAAQA,EACRuB,SAAUA,EACVwR,iBAAkB/S,EAAOF,yBAJ7B,OACQ8W,EADR,OAMED,EAAgBpD,GAA2B,qBAAsBqD,EAAmB5W,EAAOF,yBAN7F,4CAHc,uBAETyB,IAAcA,EAASzD,OAASyD,EAASzD,MAAM2D,QAAU,GAFhD,mCAWdwT,KACC,CAACjV,EAAQA,EAAOF,uBAAwByB,EAAUuR,IAErD,IAAMoC,EAAwBwB,EAAe1U,OAAOiF,KAAKyP,GAAcjV,OAAS,EAkEhF,OACE,qBAAKwJ,MAAO,CAAE/C,MAAO,OAAQC,OAAQ,QAASgN,UAAW,SAAUhE,UAAW,UAA9E,SACE,cAACiE,GAAA,EAAD,UAjECF,EAAwB,GAClB,eAACG,GAAA,EAAD,CACLxW,KAAM6X,EACNpB,OAAQ,CACN3E,IAAK,GACLC,MAAO,GACP2E,KAAM,EACNC,OAAQ,GANL,UASL,cAACC,GAAA,EAAD,CAAeC,gBAAgB,MAAMC,UAAU,IAC/C,cAACC,GAAA,EAAD,CAAOC,QAAQ,OAAOC,KAAM,cAAC,GAAD,MAC5B,cAACC,GAAA,EAAD,CAAOD,KAAM,cAAC,GAAD,MACb,cAACE,GAAA,EAAD,CAASC,QAAS,cAAC,GAAD,MAClB,cAACC,GAAA,EAAD,IACCnP,GAAuB2P,EAAa,IAAI/U,KAAI,SAAAe,GAC3C,IAAM4L,EAAgB3H,GAAiBpF,EAAS3D,WAAY8E,GAC5D,OACE,cAACyT,GAAA,EAAD,CAEEC,QAAQ,IACR/U,KAAK,WACLwU,QAASnT,EACT2T,OAAQ/H,EACR4F,KAAM5F,EACNgI,mBAAmB,GANd5T,SAaR,eAAC6T,GAAA,EAAD,CACL1X,KAAM6X,EACNpB,OAAQ,CACN3E,IAAK,GACLC,MAAO,GACP2E,KAAM,EACNC,OAAQ,GANL,UASL,cAACC,GAAA,EAAD,CAAeC,gBAAgB,MAAMC,UAAU,IAC/C,cAACC,GAAA,EAAD,CAAOC,QAAQ,OAAOC,KAAM,cAAC,GAAD,MAC5B,cAACC,GAAA,EAAD,CAAOD,KAAM,cAAC,GAAD,MACb,cAACE,GAAA,EAAD,CAASC,QAAS,cAAC,GAAD,MAClB,cAACC,GAAA,EAAD,IACCnP,GAAuB2P,EAAa,IAAI/U,KAAI,SAAAe,GAC3C,IAAM4L,EAAgB3H,GAAiBpF,EAAS3D,WAAY8E,GAC5D,OACE,cAAC8T,GAAA,EAAD,CAEEJ,QAAQ,IACR/U,KAAK,WACLwU,QAASnT,EACT2T,OAAQ/H,EACR4F,KAAM5F,EACNgI,mBAAmB,GANd5T,cCsDFmU,OAzDf,SAAmB9S,GACjB,IAAMuB,EAAWC,cAGXvF,GADQyF,aAAY,SAAAtE,GAAK,OAAIA,EAAMiC,eAAerD,UAAU+S,SACnDrN,aAAY,SAAAtE,GAAK,OAAIA,EAAMnB,WAGpC8W,GAFWrR,aAAY,SAAAtE,GAAK,OAAIA,EAAMI,YAEhB,SAACwV,GAC3BzR,EAAS,CACPjE,KAAM,qCACNC,QAASyV,MAIb,OACE,sBAAKzS,UAAU,YAAf,UAEE,sBAAKA,UAAW,uBAAhB,UACE,qBAAKA,UAAW,eAAiD,QAAhCtE,EAAOF,uBAAiC,qBAAqB,IAAK0E,QAAS,WAAQsS,EAAoB,QAAxI,iBAGA,qBAAKxS,UAAW,eAAiD,SAAhCtE,EAAOF,uBAAkC,qBAAqB,IAAK0E,QAAS,WAAQsS,EAAoB,SAAzI,kBAGA,qBAAKxS,UAAW,eAAiD,UAAhCtE,EAAOF,uBAAmC,qBAAqB,IAAK0E,QAAS,WAAQsS,EAAoB,UAA1I,sBAKF,sBAAKxS,UAAU,UAAf,UACE,sBAAKA,UAAU,YAAf,UACE,oBAAIA,UAAU,gBAAd,yBACA,cAAC,GAAD,OAEF,sBAAKA,UAAU,YAAf,UACE,oBAAIA,UAAU,gBAAd,oCACA,cAAC,GAAD,cCzIK0S,OANf,WACE,OACE,qBAAKvS,IAAI,YAAYE,IAAI,oCAAoCuD,MAAM,QCAhE,SAAS+O,GAAgBlT,GAC9B,OACE,qBAAKO,UAAU,oCAAoCE,QAAST,EAAMS,QAChEyG,MAAOlH,EAAMkH,MADf,kBCMJ,IAuNeiM,GAvND,WACZ,MAAwCrS,mBAAS,IAAjD,mBAAOsS,EAAP,KAAqBC,EAArB,KACA,EAAgCvS,mBAAS,IAAzC,mBAAOwS,EAAP,KAAiBC,EAAjB,KACA,EAA8CzS,oBAAS,GAAvD,mBAAO0S,EAAP,KAAwBC,EAAxB,KACA,EAAwC3S,mBAAS,MAAjD,mBAAO4S,EAAP,KAAqBC,EAArB,KACA,EAAgC7S,oBAAS,GAAzC,mBAAO8S,EAAP,KAAiBC,EAAjB,KACA,EAAgD/S,oBAAS,GAAzD,mBAAOgT,EAAP,KAAyBC,EAAzB,KACMxS,EAAWC,cAEXwS,EAAQ,SAAA9S,GAQZ,GANAA,EAAEU,iBAGF+R,EAAgB,MAGXP,EAKL,GAAKE,EAAL,CAKA,IACIxY,EAAO,CACTmZ,QAASb,EACTE,SAAUA,EACVY,cAAe9M,wCAGjBgI,MAPYhI,+CAOD,CACT+M,OAAQ,OACRC,KAAMjW,KAAKC,UAAUtD,GACrBqU,QAAS,CACP,eAAgB,sBAEjBkF,MAAK,SAAAxD,GAAG,OAAIA,EAAIvB,UAChB+E,MAAK,SAAAhF,GACJ9N,EAAU,CAAEjE,KAAM,QAASC,QAAS,OACpCgE,EAAU,CAAEjE,KAAM,eAAgBC,QAAS,OAC3CgE,EtCpD0B,CAChCjE,KCGsB,WDFtBC,QsCkDwB8R,IAClBwE,GAAY,GACZ7P,SAASjC,SAAW,eACnBuS,OAAM,SAAArG,GACP5P,QAAQ4P,MAAM,qBAAsBA,EAAMhN,SAC1C0S,EAAgB,wEAChBE,GAAY,WA3BdF,EAAgB,2CALhBA,EAAgB,wCAoCdY,EAAU,SAAArT,GACdA,EAAEU,iBAGF+R,EAAgB,MAEhB,IACI7Y,EAAO,CACTmZ,QAASb,GAGX,OAAOhE,MALKhI,8DAKM,CAChB+M,OAAQ,OACRC,KAAMjW,KAAKC,UAAUtD,GACrBqU,QAAS,CACP,eAAgB,sBAEjBkF,MAAK,SAAAxD,GAAG,OAAIA,EAAIvB,UAChB+E,MAAK,SAAAhF,GAEJ,OADAhR,QAAQC,IAAI+Q,IACL,KACNiF,OAAM,SAAArG,GAIP,OAHA5P,QAAQC,IAAI2P,GAEZ0F,EAAgB,+QACT,MAiIb,OAAIC,GAAYE,EAJZ,cAAC,IAAD,CAAUtT,GAAG,MAQVgT,EAvCH,qBAAKjT,UAAU,4DAAf,SACE,sBAAKA,UAAU,8CAAf,UACE,oBAAIA,UAAU,iCAAd,mCACA,iCACE,uBAAOA,UAAU,QAAQiU,QAAQ,eAAjC,yBACA,uBACEjU,UAAU,8FACVkU,eAAe,MACfC,YAAY,cACZ7U,KAAK,eACL8U,UAAQ,EACRC,SAAU,SAAA1T,GAAC,OAAImS,EAAgBnS,EAAE2T,OAAOrQ,UAGzCkP,GAAgB,qBAAKnT,UAAU,gFAAgFuU,KAAK,QAApG,SACf,sBAAMvU,UAAU,kBAAhB,SAAmCmT,MAGrC,sBAAKnT,UAAU,sCAAf,UACI,wBAAQA,UAAU,0EAA0EE,QAAS8T,EAArG,qBACA,wBAAQhU,UAAU,qEAAqEE,QAAS,WAC9FkT,EAAgB,MAChBF,GAAmB,IAFrB,iCA1GV,qBAAKlT,UAAU,gDAAf,SACE,sBAAKA,UAAU,UAAf,UAEE,cAAC2S,GAAD,CACEzS,QAAS,kBAAMsT,GAAoB,IACnC7M,MAAO,CAACyF,SAAU,WAAYE,MAAO,OAAQD,IAAK,UAGpD,cAAC,GAAD,IAEA,oBAAIrM,UAAU,+BAAd,sCAIA,mBAAG2G,MAAO,CACR6N,SAAU,OACV5Q,MAAO,SACN5D,UAAU,OAHb,8IAMA,mBAAG2G,MAAO,CACR6N,SAAU,OACV5Q,MAAO,SACN5D,UAAU,OAHb,uMAMA,mBAAG2G,MAAO,CACR6N,SAAU,OACV5Q,MAAO,SACN5D,UAAU,OAHb,iIAOA,uBAAMA,UAAU,YAAhB,UACE,uBAAOA,UAAU,QAAQiU,QAAQ,eAAjC,mBACA,uBACEjU,UAAU,8FACVkU,eAAe,MACfC,YAAY,QACZ7U,KAAK,eACL8U,UAAQ,EACRC,SAAU,SAAA1T,GAAC,OAAImS,EAAgBnS,EAAE2T,OAAOrQ,UAG1C,uBAAOjE,UAAU,aAAaiU,QAAQ,WAAtC,wBACA,uBACEjU,UAAU,8FACVjD,KAAK,WACLoX,YAAY,aACZ7U,KAAK,WACL8U,UAAQ,EACRC,SAAU,SAAA1T,GAAC,OAAIqS,EAAYrS,EAAE2T,OAAOrQ,UAGrCkP,GAAgB,qBAAKnT,UAAU,gFAAgFuU,KAAK,QAApG,SACf,sBAAMvU,UAAU,kBAAhB,SAAmCmT,MAGrC,mBAAGnT,UAAU,OAAb,SACE,mBAAGH,KAAK,IAAIK,QAAS,kBAAMgT,GAAmB,IAAOlT,UAAU,oCAA/D,oCASF,sBAAKA,UAAU,2BAAf,UACI,wBAAQA,UAAU,0DAA0DE,QAASuT,EAArF,mBAGA,wBAAQzT,UAAU,qEAAqEE,QAAS,WAC9FsT,GAAoB,IADtB,kCCvKHiB,GAAe,uCAAG,WAAO3V,EAAgB4V,EAAUC,GAAjC,uBAAAxR,EAAA,yDACxBrE,GAAoBA,EAAerD,WAAekZ,EAD1B,oDAIxBD,EAJwB,wDAQvBE,EAAoBrP,IAAOoP,GAAUhK,OAAO,0BAC9ClJ,EAAM,yEAAyEmT,EAAkB,cAAcF,EAC/GjJ,EAAU,CAAEmD,QAAU,CAAE,cAAiB,UAAY9P,EAAerD,UAAU+S,QAVrD,SAYNK,MAAMpN,EAAKgK,GAZL,WAYvBqD,EAZuB,QAcf+F,GAde,wBAe3B/W,QAAQ4P,MAAM,sBAAuBoB,GAfV,mBAgBpB,GAhBoB,yBAmBVA,EAASC,OAnBC,eAmBvBA,EAnBuB,yBAqBtBA,EAAK+F,cAAe,GArBE,4CAAH,0DCMxBC,GAAyC,GAEvCC,GAAsB,SAACC,GAC3B,IAAIC,EAAmB,GAOvB,OANAD,EAAQ5X,KAAI,SAAAe,GAIV,OAHG8W,EAAiB5L,QAAQlL,EAAE+W,WAAa,GACzCD,EAAiB5a,KAAK8D,EAAE+W,SAEnB/W,KAEF8W,GAgFME,OA7Ef,SAAoB3V,GAGlB,IAAMX,EAAiBqC,aAAY,SAAAtE,GACjC,QAAOA,EAAMiC,gBAAiBjC,EAAMiC,kBA4BtC,OAxBAyH,qBAAU,SAACnI,GAET,IAAMiX,EAA0B,uCAAG,gCAAAlS,EAAA,sDAC7BwR,EAAWpP,MAASzK,cAA4B,GAEhDwa,EAAsB,GAClBpb,EAAI,EAJqB,YAIlBA,GA7BK,IAyBa,wBAK/Bya,EAAWpP,IAAOoP,GAAUzG,SAAS,EAAG,SAASpT,cALlB,SAOZ2Z,GAAgB3V,EA/B1B,MA+BoD6V,GAP9B,cASpBtX,KAAI,SAAAe,GAEb,OADAkX,EAAoBhb,KAAK8D,GAClBA,KAGT2W,GAAuC7a,GAAK8a,GAAoBM,GAdjC,QAIMpb,IAJN,gDAgB1Bob,GAhB0B,4CAAH,qDAmBhCD,MACC,CAACvW,IAGF,sBAAKkB,UAAU,QAAf,UACE,oBAAIA,UAAU,gBAAd,wBAIA,oBAAGA,UAAU,OAAb,kBApDW,MAoDX,sFAIA,mBAAGA,UAAU,OAAb,6WAIA,mBAAGA,UAAU,OAAb,kEAIA,8BACG+U,GAAyCA,GAAuC1X,KAAI,SAACwF,EAAKD,GACzF,OAAO,yDAAqC,8BAAIA,EAAJ,gBAArC,KAA6D,4BAAIC,EAAI1F,WAA3DyF,MACd,KAGP,wBAAO5C,UAAU,6BAAjB,UACE,gCACE,+BACE,4CACA,qEAGJ,gCACE,+BACE,2CACA,oD,cC/DGuV,OApBf,YAA8D,IAAlCC,EAAiC,EAAjCA,cAAe3J,EAAkB,EAAlBA,MAAOD,EAAW,EAAXA,SAChD,OACE,qBAAK5L,UAAU,oBAAoBE,QAAS,kBAAMsV,GAAc,IAAhE,SACE,sBAAKxV,UAAU,GAAGE,QAAS,SAAAS,GAAC,OAAIA,EAAE8U,mBAAlC,UACE,sBAAKzV,UAAU,uBAAf,UACE,oBAAIA,UAAU,qCAAd,SACG6L,GAAO,KAEV,qBAAK7L,UAAU,yCAAf,SACE,cAAC2S,GAAD,CAAiBzS,QAAS,kBAAMsV,GAAc,WAGlD,qBAAKxV,UAAU,cAAf,SACI4L,U,OC4HG8J,OAxIf,WACE,IAAM1U,EAAWC,cAEX1H,EAAW4H,aAAY,SAAAtE,GAC3B,OAAQA,EAAMI,UAAYJ,EAAMI,SAAS1D,SAAYsD,EAAMI,SAAS1D,SAAW,MAG3Eoc,EAAexU,aAAY,SAAAtE,GAC/B,OAAOA,EAAMnB,OAASmB,EAAMnB,OAAOf,OAAS,MAGxCib,EAAwBzU,aAAY,SAAAtE,GACxC,QAAOA,EAAMwC,IAAKxC,EAAMwC,GAAN,sBAGpB,EAAsCkB,mBAAS,IAA/C,mBAAKsV,EAAL,KAAmBC,EAAnB,KAqBMC,EAAkB,SAACpb,GACvBqG,EAAS,CACPjE,KAAM,oBACNC,QAASrC,KAIPqb,EAAmB,SAAArV,GAAOmV,EAAgBnV,EAAE2T,OAAOrQ,QAEnDgS,EAAkB,SAAAtV,GAAOmV,EAAgB,KAEzCI,EAAiB,SAACrT,GA7BtB7B,EAAS,CACPjE,KAAK,iBACLC,QAAS,CACPsC,KA2BU,qBA1BVC,WA0BgCsD,MAuDlCoB,EAAQ1K,EAAS8T,MAAK,SAAA3O,GAAI,OAAEA,EAAK4O,UAAUqI,MAAiB,GAChE,OAAqB,IAAlBpc,EAAS4D,OAER,sBAAK6C,UAAU,mDAAf,UACE,qBAAKA,UAAU,sBAAsBE,QAAS,SAAAS,GAAIuV,EAAe,WAAjE,oBACA,qBAAKlW,UAAU,qDAAf,SACE,qBAAKA,UAAU,uBAAf,SAAgD,KAARiE,EAAW,gBAAgBA,EAAM3E,YAO/E,sBAAKU,UAAU,0BAAf,UACE,qBAAKA,UAAU,sBAAsBE,QAAS,SAAAS,GAAIuV,EAAe,WAAjE,oBACA,sBAAKlW,UAAU,qDAAf,UACE,qBAAKA,UAAS,8BAAmC,KAAViE,EAAe,aAAe,IAAM/D,QAAS,SAAAS,GAAIuV,EAAe,WAAvG,SACa,KAAVjS,EAAe,gBAAkBA,EAAM3E,OAEd,WAA1BsW,EAvEqB,SAACrc,GAC5B,IAAM4c,EAAmB5c,EAASmC,QAAO,SAAAf,GACvC,MAAsB,KAAfkb,GAAoBlb,EAAO2E,KAAK8W,cAAc5X,SAASqX,EAAaO,kBAE7E,OACE,cAAC,GAAD,CACEvK,MAAM,uBACN2J,cAAe,kBAAMU,GAAe,IAFtC,SAIE,sBAAKlW,UAAU,uBAAf,UACE,sBAAKA,UAAU,oCAAf,UACE,sBAAKA,UAAU,iCAAf,UACA,uBAAOjD,KAAK,OACViD,UAAU,qBACVqU,SAAU2B,EACV/R,MAAO4R,EACPQ,WAAW,EACXlC,YAAa,SACf,qBAAKnU,UAAU,2CAAf,SACqB,KAAjB6V,EACA,qBAAK7V,UAAU,2BAA2BE,QAAS+V,IAEnD,qBAAKjW,UAAU,kCAInB,0CAEF,sBAAKA,UAAU,qBAAf,UACqB,KAAjB2V,EACE,qBAAuB3V,UAAU,+BAA+BE,QAAS,SAAAS,GAAIuV,GAAe,IAA5F,0BAAU,aAIV,qBAAuBlW,UAAU,YAAYE,QAAS,SAAAS,GAAIuV,GAAe,GAAOH,EAAgB,KAAhG,0BAAU,aAIZI,EAAiB9Y,KAAI,SAAA8F,GACnB,OAAGwS,IAAiBxS,EAAEmK,QACZ,qBAA6BtN,UAAU,+BAA+BE,QAAS,SAAAS,GAAIuV,GAAe,GAAOH,EAAgB,KAAzH,SAAgI5S,EAAE7D,MAAxH,QAAQ6D,EAAEmK,SAEpB,qBAA6BtN,UAAU,YAAYE,QAAS,SAAAS,GAAIuV,GAAe,GAAOH,EAAgB5S,EAAEmK,UAAxG,SAAqHnK,EAAE7D,MAA7G,QAAQ6D,EAAEmK,oBA6BCgJ,CAAqB/c,GAAY,KACtD,KAAfoc,EACG,qBAAK3V,UAAU,2BAA2BE,QAjG/B,SAAAS,GACrBA,EAAEU,iBAEFL,EAAS,CACPjE,KAAM,oBACNC,QAAS,QA8FD,KAEN,qBAAKgD,UAAU,sCAAf,SACE,qBAAKA,UAAU,2BAA2BE,QAAS,SAAAS,GAAIuV,EAAe,sB,mDCtIjE,OAA0B,qCCmE1BK,OAvDf,WACE,IAAMvV,EAAWC,cAEXuV,EAAcrV,aAAY,SAAAtE,GAC9B,OAAOA,EAAMnB,OAASmB,EAAMnB,OAAOd,OAAQ,IAAIC,MAAOC,iBAGlD2b,EAAiB,SAAAC,GACrB1V,EAAS,CACPjE,KAAM,mBACNC,QAAS0Z,EAAM5b,iBAInB,OACE,sBAAKkF,UAAU,yBAAf,UACE,qBAAKA,UAAU,qBAAf,mBACA,sBAAKA,UAAU,uBAAf,UACE,sBAAKA,UAAU,qBAAf,UACI,qBACEA,UAAU,qBACVE,QAAS,WACPuW,EACElR,IAAOiR,GAAatI,SAAS,EAAG,WAJtC,oBASE,qBAAKlO,UAAU,wBAAf,SACE,cAAC,KAAD,CACEqU,SAAUoC,EACVxS,MAAO,IAAIpJ,KAAK2b,GAChBG,UAAW,KACXC,aAAc,qBAAKvW,IAAKuW,GAAczW,IAAI,SAC1CwK,OAAQ,mBAEd,qBACE3K,UAAU,qBACVE,QAAS,WACPuW,EACElR,IAAOiR,GAAaK,IAAI,EAAG,WAJjC,uBASJ,qBAAK7W,UAAU,qBAAqBE,QAAS,WAC3CuW,EAAe,IAAI5b,OAClBgR,MAAM,6BAFT,SAGE,qBAAK7L,UAAU,kC,iEC4KV8W,OAjOf,WACE,IAAM9V,EAAWC,cAEX8V,EAAwB5V,aAAY,SAAAtE,GACxC,OAAOA,EAAMnB,QAAUmB,EAAMnB,OAAOJ,gBAAkB,IAAIT,KAAKgC,EAAMnB,OAAOJ,iBAAmB,IAAIT,QAG/Fmc,EAAwB7V,aAAY,SAAAtE,GACxC,OAAOA,EAAMnB,QAAUmB,EAAMnB,OAAOH,gBAAkB,IAAIV,KAAKgC,EAAMnB,OAAOH,iBAAmB,IAAIV,QAG/Foc,EAA+B9V,aAAY,SAAAtE,GAC/C,OAAOA,EAAMnB,QAAUmB,EAAMnB,OAAOF,uBAAyBqB,EAAMnB,OAAOF,uBAAyB,SAGrG,EAAkC+E,mBAASwW,GAA3C,mBAAOG,EAAP,KAAkBC,EAAlB,KACA,EAA8B5W,mBAASyW,GAAvC,mBAAOI,EAAP,KAAgBC,EAAhB,KACA,EAA4B9W,oBAAS,GAArC,mBAAO+W,EAAP,KAAeC,EAAf,KAGMC,EAAe,SAACC,EAAOC,GAA2B,IAAtBC,EAAqB,wDAE/C/Y,EAAM,IAAI/D,KAAK4c,EAAMrJ,gBAGvBvP,EAAM,IAAIhE,KAAK6c,EAAItJ,gBAEvBpN,EAAS,CACPjE,KAAM,iCACNC,QAAS,CAAE4B,IAAKA,EAAI9D,cAAe+D,IAAKA,EAAI/D,kBAG9B,IAAb6c,GACD3W,EAAS,CACPjE,KAAM,qCACNC,QAAS2a,KAITtD,EAAW,SAACuD,GAChB,kBAAqBA,EAArB,GAAOH,EAAP,KAAcC,EAAd,KACAP,EAAaM,GACbJ,EAAWK,GAER,OAAOA,IACRF,EAAaC,EAAOC,GACpBH,GAAWD,KAwCTO,EAAkB,SAACC,GACvB,IAAIL,EAAQP,EACRQ,EAAMN,EACV,GAAGU,EACD,OAAOb,GACL,IAAK,OACHQ,EAAQM,mBAAQb,GAAY,GAC5B,MACF,IAAK,QACHO,EAAQO,mBAAUd,GAAY,GAC9B,MAEF,QACEO,EAAQM,mBAAQb,GAAY,QAIhC,OAAOD,GACL,IAAK,OACHS,EAAMK,mBAAQX,EAAS,GACvB,MACF,IAAK,QACHM,EAAMM,mBAAUZ,EAAS,GACzB,MAEF,QACEM,EAAMK,mBAAQX,EAAS,GAK7BD,EAAaM,GACbJ,EAAWK,GAEXF,EAAaC,EAAOC,IAIhBO,EAAU,SAACC,GAEf,IAEIT,EACAC,EACAS,EAJEC,EAAQ,IAAIvd,MAAM,IAAIA,MAAQuT,gBAKpC,OAAO8J,GACL,IAAK,gBACHT,EAAQM,mBAAQK,GAAO,GACvBV,EAAMU,EACND,EAAI,MACJ,MACF,IAAK,iBACHV,EAAQM,mBAAQK,GAAO,IACvBV,EAAMU,EACND,EAAI,MACJ,MACF,IAAK,iBACHV,EAAQM,mBAAQK,GAAO,IACvBV,EAAMU,EACND,EAAI,MACJ,MACF,IAAK,mBACHV,EAAQM,mBAAQK,GAAO,KACvBV,EAAMU,EACND,EAAI,OACJ,MACF,IAAK,UACH,IAAIE,EAAOD,EAAME,cACjBb,EAAQ,IAAI5c,KAAKwd,EAAM1Z,WAAa,QACpC+Y,EAAMU,EACND,EAAI,QACJ,MACF,IAAK,YACH,IAAII,EAAOH,EAAME,cAAc,EAC/Bb,EAAQ,IAAI5c,KAAK0d,EAAM5Z,WAAa,QACpC+Y,EAAM,IAAI7c,KAAK0d,EAAM5Z,WAAa,UAClCwZ,EAAI,QACJ,MACF,QACE,OAGJhB,EAAaM,GACbJ,EAAWK,GAEXF,EAAaC,EAAOC,EAAKS,IA6B3B,OACE,sBAAKnY,UAAU,iCAAf,UACE,qBAAKA,UAAU,6BAAf,qBACA,sBAAKA,UAAU,+BAAf,UACE,qBACEA,UAAU,qBACVE,QAAS,WAAO2X,GAAgB,IAFlC,oBAKA,sBAAK7X,UAAU,6BACbE,QAhKY,SAACS,GACnBA,EAAEU,iBAECiW,GAAoB,OAAVF,IACXD,EAAaJ,GACbM,EAAWL,IAGbO,GAAWD,IAuJP,UAEe,OAAZJ,EAAiBvM,mBAAOuM,EAAW,cAAc,GAFpD,cAIa,OAAVE,EAAezM,mBAAOyM,EAAS,cAAc,GAJhD,OAKA,qBACEpX,UAAU,qBACVE,QAAS,WAAO2X,GAAgB,IAFlC,uBAMAP,GA5CF,sBAAKtX,UAAU,uCAAf,UACE,cAAC,KAAD,CAEEA,UAAU,8BACVwY,SAAUtB,EACV7C,SAAUA,EACV6C,UAAWA,EACXE,QAASA,EACTqB,WAAW,aACXC,cAAY,EACZC,QAAM,GARF,cAUN,sBAAK3Y,UAAU,sCAAf,UACE,qBAAoBA,UAAU,8BAA8BE,QAAS,WAAM+X,EAAQ,kBAAnF,4BAAS,YACT,qBAAoBjY,UAAU,8BAA8BE,QAAS,WAAM+X,EAAQ,mBAAnF,6BAAS,YACT,qBAAoBjY,UAAU,8BAA8BE,QAAS,WAAM+X,EAAQ,mBAAnF,6BAAS,YACT,qBAAoBjY,UAAU,8BAA8BE,QAAS,WAAM+X,EAAQ,qBAAnF,+BAAS,YACT,qBAAoBjY,UAAU,8BAA8BE,QAAS,WAAM+X,EAAQ,YAAnF,qBAAS,YACT,qBAAoBjY,UAAU,8BAA8BE,QAAS,WAAM+X,EAAQ,cAAnF,wBAAS,sBCrMbW,I,OAAS,MAqDAC,OAnDf,WACE,IAAM7X,EAAWC,cAEX6X,EAAiB3X,aAAY,SAAAtE,GACjC,OAAOA,EAAMnB,OAASmB,EAAMnB,OAAOV,aAAe4d,MAG9CG,EAAe,CACnB,CAAE5I,MAAM,KAAM6I,OAAQ,QAASC,IAAK,KAAMhV,MAAO2U,IACjD,CAAEzI,MAAM,KAAM6I,OAAQ,SAAUC,IAAK,MAAOhV,MAAO2U,OACnD,CAAEzI,MAAM,KAAM6I,OAAQ,SAAUC,IAAK,QAAShV,MAAO2U,OACrD,CAAEzI,MAAM,MAAO6I,OAAQ,SAAUC,IAAK,MAAOhV,MAAO2U,OACpD,CAAEzI,MAAM,MAAO6I,OAAQ,SAAUC,IAAK,MAAOhV,MAAO2U,OACpD,CAAEzI,MAAM,MAAO6I,OAAQ,SAAUC,IAAK,MAAOhV,MAAO2U,MACpD,CAAEzI,MAAM,MAAO6I,OAAQ,SAAUC,IAAK,QAAShV,MAAO2U,OACtD,CAAEzI,MAAM,KAAM6I,OAAQ,SAAUC,IAAK,QAAShV,MAAO2U,QACrD,CAAEzI,MAAM,KAAM6I,OAAQ,SAAUC,IAAK,MAAOhV,MAAO2U,SAEjDM,EAAWH,EAAa1b,KAC1B,SAACsD,EAAEzG,GAAH,OAAU,sBAAsB8F,UAAU,yBAAyB5B,EAAGuC,EAAEsY,IAAKzJ,EAAE,KAAKG,WAAYhP,EAAEqY,OAAxF,SAAiGrY,EAAEwP,OAAxF,QAAQjW,MAG3Bif,EAAQJ,EAAa1b,KACvB,SAACsD,EAAEzG,GAAH,OAAU,sBAAsB8F,UAAU,uBAAuB5B,EAAGuC,EAAEsY,IAAKzJ,EAAE,IAAI5L,MAAM,IAAIC,OAAO,MAA7E,QAAQ3J,MAU3Bkf,EAAqBL,EAAaM,WAAU,SAAAC,GAAC,OAAGA,EAAErV,QAAQ6U,KAG9D,OAFyB,IAAtBM,IAA2BA,EAAqB,GAGjD,qBAAKpZ,UAAU,wBAAf,SACE,sBAAKA,UAAU,sBAAf,UACE,uBAAOA,UAAU,oBAAoB4D,MAAM,OAAO7G,KAAK,QAAQwc,IAAI,IAAIC,IAAKT,EAAa5b,OAAO,EAAGsc,KAAK,IAAIpF,SAbxF,SAAA1T,GACxBK,EAAS,CACPjE,KAAM,2BACNC,QAAS+b,EAAapY,EAAE2T,OAAOrQ,OAAOA,SAUqGA,MAAOmV,IAChJ,qBAAKpZ,UAAU,wBAAwBuU,KAAK,eAAe3Q,MAAM,OAAOC,OAAO,KAAK6V,MAAM,6BAA1F,SACIP,IAEJ,qBAAKnZ,UAAU,uBAAuBuU,KAAK,eAAe3Q,MAAM,OAAOC,OAAO,KAAK6V,MAAM,6BAAzF,SACIR,U,OCiDGS,OAhGf,WACE,IAAM3Y,EAAWC,cAEX3H,EAAa6H,aAAY,SAAAtE,GAC7B,OAAQA,EAAMI,UAAYJ,EAAMI,SAAS3D,WAAcuD,EAAMI,SAAS3D,WAAa,MAG/EsgB,EAA0BzY,aAAY,SAAAtE,GAC1C,OAAOA,EAAMnB,OAASmB,EAAMnB,OAAOT,kBAAoB,MAGnD4e,EAA+B,SAACvc,IACjBsc,GAA2B,IAAItb,MAAM,KAAKnB,SAC9C7D,EAAW6D,OAAO,GAKjC6D,EAAS,CAAEjE,KAAM,mCAAoCC,QAASM,EAAUG,aA+B1E,OACE,sBAAKuC,UAAU,8BAAf,UACE,sBAAKA,UAAU,8BAAf,UACE,qBAAKA,UAAU,0BAAf,wBAC4B,KAA1B4Z,EAEE,qBAAK5Z,UAAU,yCAAyCE,QA9B7B,SAAAS,GACnCK,EAAS,CAAEjE,KAAM,kCAAmCC,QAAS,MA6BrD,mBAIA,QAGN,qBAAKgD,UAAU,4BAAf,SAEI1G,EAAW+D,KAAI,SAACC,EAAWC,GACzB,IAAIuc,EAAWF,EAA0BA,EAAwBpb,SAASlB,EAAUG,WAAa,GAC7Fsc,EAAUD,EACV,SAAAnZ,GAAKA,EAAE8U,kBA9CqB,SAACnY,GACzC0D,EAAS,CAAEjE,KAAM,wCAAyCC,QAASM,EAAUG,YA6CvCuc,CAAkC1c,IAE5D,SAAAqD,GAvCM,IAAA+T,EAuCD/T,EAAE8U,kBAvCDf,EAuCgCpX,EArCrB,KAA1Bsc,EAEDtgB,EAAW+D,KAAI,SAAAe,GAIb,OAHGA,EAAEX,YAAciX,EAASjX,WAC1Boc,EAA6Bzb,GAExBA,KAMTyb,EAA6BnF,IA2BvB,OACE,sBACE1U,UAAS,iCAA4B8Z,EAAW,oCAAsC,IACtF5Z,QAAS6Z,EAFX,UAKE,qBAAK/Z,UAAU,2BAAf,SACE,sBAAKia,QAAQ,YAAb,UACE,wBAAQC,GAAI,MAAOC,GAAI,MAAOC,EAAG,MAAOxK,KAAM,YAC9C,wBAAQsK,GAAI,MAAOC,GAAI,MAAOC,EAAG,MAAOxK,KAAM,YAC9C,wBAAQsK,GAAI,MAAOC,GAAI,MAAOC,EAAG,MAAOxK,KAAMtS,EAAUE,MAAMmB,kBAGlE,qBAAKqB,UAAU,8BAAf,SACI1C,EAAUgC,SAVThC,EAAUgC,e,OCyHhB+a,OAlMf,WACE,IAAMrZ,EAAWC,cAEXzH,EAAQ2H,aAAY,SAAAtE,GACxB,OAAQA,EAAMI,UAAYJ,EAAMI,SAASzD,MAASqD,EAAMI,SAASzD,MAAQ,MAGrE8gB,EAAcnZ,aAAY,SAAAtE,GAC9B,OAAOA,EAAMnB,OAASmB,EAAMnB,OAAOlC,MAAQ,KAGvCmc,EAAexU,aAAY,SAAAtE,GAC/B,OAAOA,EAAMnB,OAASmB,EAAMnB,OAAOf,OAAS,KAGxCib,EAAwBzU,aAAY,SAAAtE,GACxC,QAAOA,EAAMwC,IAAKxC,EAAMwC,GAAN,sBAGpB,EAAsCkB,mBAAS,IAA/C,mBAAKsV,EAAL,KAAmBC,EAAnB,KAMMyE,EAAwB,SAAC/M,GAC7BxM,EAAS,CAAEjE,KAAM,2BAA4BC,QAASwQ,KAiBlDgN,EAAc,SAAC3X,GATnB7B,EAAS,CACPjE,KAAK,iBACLC,QAAS,CACPsC,KAOU,qBANVC,WAMgCsD,MAGhCmT,EAAmB,SAAArV,GAAOmV,EAAgBnV,EAAE2T,OAAOrQ,QAEnDgS,EAAkB,SAAAtV,GAAOmV,EAAgB,KAEzC2E,EAAc,CAClB,CAACnb,KAAM,SAAUob,UAAW,gBAC5B,CAACpb,KAAM,aAAcob,UAAW,oBAChC,CAACpb,KAAM,QAASob,UAAW,WAIvBC,EAAyB,SAACC,EAAOphB,GACrC,IAAMqhB,EAAarhB,EAAMkC,QAAO,SAAA8R,GAAI,OAAEA,EAAKkN,YAAYE,EAAMF,aAE7D,GAAuB,IAApBG,EAAW1d,OAAc,OAAO,KAEnC,IAAM2d,EAAcD,EAAWzK,MAAK,SAACjN,EAAE4X,GAAH,OAAO5X,EAAE7D,KAAK0b,cAAcD,EAAEzb,SAElE,OACE,sBAAiCU,UAAU,uBAA3C,UACE,sBAAmCA,UAAU,mBAA7C,SAAiE4a,EAAMtb,MAA5D,OAAOsb,EAAMF,WACxB,qBAAkC1a,UAAU,wBAA5C,SACE8a,EAAYzd,KAAI,SAAA8F,GAEd,OADiBmX,EAAY9b,SAAS2E,EAAEsK,SAE9B,qBAA6BzN,UAAU,gDAI7CE,QAAS,SAAAS,GAAKA,EAAE8U,kBAAmB8E,EAAsBpX,EAAEsK,UAJrD,SAIiEtK,EAAE7D,MAJzD,QAAQ6D,EAAEsK,SAMpB,qBAA6BzN,UAAU,6BAG7CE,QAAS,SAAAS,GA5DE,IAAC6M,EA4DE7M,EAAE8U,kBA5DJjI,EA4DwCrK,EAAEsK,QA3DlEzM,EAAS,CAAEjE,KAAM,sBAAuBC,QAASwQ,KAwD/B,SAG4DrK,EAAE7D,MAHpD,QAAQ6D,EAAEsK,aAVxB,OAAOmN,EAAMF,aAFf,MAAME,EAAMF,YA8DtBO,EAAgB,GAChBC,EAAU,GACd,IAEE,IAAIC,GADJF,EAAgBX,EAAYhc,MAAM,MACPnB,OAC3B,GAAGge,EAAO,EACRD,EAAUC,EAAS,aACd,CACL,IAAIC,EAAU5hB,EAAM6T,MAAK,SAAAG,GAAI,OAAGA,EAAKC,QAAQ9O,aAAasc,EAAc,MACxEC,EAAWE,GAAWA,EAAQ9b,MAAS,IAEzC,MAAMf,GACN2c,EAAU,GAGC,KAAVA,IAAgBA,EAAU,cAE7B,IAAIvb,EAA4B,KAAjBgW,EAET0F,EAAgB7hB,EAAMkC,QAAO,SAAA8R,GACjC,OAAOyN,EAAczc,SAASgP,EAAKC,QAAQ9O,eAG7C,OAAKgB,EAKH,sBAAKK,UAAS,kCAAuC,IAAXL,EAAkB,GAAG,gCAA/D,UACE,qBAAKK,UAAU,qBAAqBE,QAAS,SAAAS,GAAIhB,GAAY6a,EAAY,UAAzE,mBACA,sBAAKxa,UAAU,uBAAf,UACE,qBACEA,UAAS,2GAEO,eAAZkb,EAA2B,aAAe,GAFrC,gBAIThb,QAAS,SAAAS,GAAIhB,GAAY6a,EAAY,UALvC,SAOGU,IAEc,KAAdZ,EACG,qBAAKta,UAAU,0BAA0BE,QA5I5B,WACvBc,EAAS,CAAEjE,KAAM,qBAAsBC,QAAS,UA6ItC,KAEsB,UAA1B4Y,EAnFkB,SAACpc,GACzB,IAAM6hB,EAAgB7hB,EAAMkC,QAAO,SAAA8R,GACjC,MAAsB,KAAfqI,GAAoBrI,EAAKlO,KAAK8W,cAAc5X,SAASqX,EAAaO,kBAG3E,OACE,cAAC,GAAD,CACEvK,MAAM,qBACN2J,cAAe,SAAC3S,GAAD,OAAS2X,GAAY,IAFtC,SAIE,sBAAKxa,UAAU,uBAAf,UACI,sBAAKA,UAAU,oCAAf,UACE,sBAAKA,UAAU,iCAAf,UACA,uBAAOjD,KAAK,OACViD,UAAU,qBACVqU,SAAU2B,EACV/R,MAAO4R,EACPQ,WAAW,EACXlC,YAAa,SACf,qBAAKnU,UAAU,2CAAf,SACmB,KAAf6V,EACA,qBAAK7V,UAAU,yCAAyCE,QAAS+V,IAEjE,qBAAKjW,UAAU,gDAIrB,0CAEF,qBAAKA,UAAU,qBAAf,SACIya,EAAYpd,KAAI,SAAAud,GACd,OAAOD,EAAuBC,EAAOS,aAoDPC,CAAkB9hB,GAAS,KACjE,qBAAKwG,UAAU,2CAAf,SACE,qBAAKA,UAAU,yCAAyCE,QAAS,SAAAS,GAAI6Z,EAAY,iBAGrF,qBAAKxa,UAAU,wBAAf,SAEEqb,EAAche,KAAI,SAAAmQ,GAChB,OACE,sBAAKxN,UAAU,wBAAf,UACIwN,EAAKlO,KACP,qBAAKU,UAAU,mCAAmCE,QAAS,SAAAS,GAAKA,EAAE8U,kBAAmB8E,EAAsB/M,EAAKC,UAAhH,oBAF0CD,EAAKC,iBA9BlD,8B,OCzJJ,SAAS8N,KAUd,OAAOC,GAAkB,CACvBrL,MAAO,cACPsL,WAAY,qBACZrY,QAZcjC,aAAY,SAAAtE,GAC1B,MAAO,CACL,CAAEwM,GAAI,EAAG7L,MAAO,UAAWke,UAAW,UAAWpc,KAAM,WACvD,CAAE+J,GAAI,EAAG7L,MAAO,UAAWke,UAAW,UAAWpc,KAAM,YACvD,CAAE+J,GAAI,EAAG7L,MAAO,UAAWke,UAAW,UAAWpc,KAAM,SACvD,CAAE+J,GAAI,EAAG7L,MAAO,UAAWke,UAAW,UAAWpc,KAAM,aAQzDqc,UAAW,gCACXC,aAAc,qCACdC,aAAc,iCAIX,SAASC,KAUd,OAAON,GAAkB,CACvBrL,MAAO,UACPsL,WAAY,iBACZrY,QAZcjC,aAAY,SAAAtE,GAC1B,MAAO,CACL,CAAEwM,GAAI,EAAG7L,MAAO,UAAWke,UAAW,UAAWpc,KAAM,OACvD,CAAE+J,GAAI,EAAG7L,MAAO,UAAWke,UAAW,UAAWpc,KAAM,QACvD,CAAE+J,GAAI,EAAG7L,MAAO,UAAWke,UAAW,UAAWpc,KAAM,QACvD,CAAE+J,GAAI,EAAG7L,MAAO,UAAWke,UAAW,UAAWpc,KAAM,cAQzDqc,UAAW,gCACXC,aAAc,qCACdC,aAAc,iCAIlB,SAASL,GAAT,GAAiG,IAArErL,EAAoE,EAApEA,MAAOsL,EAA6D,EAA7DA,WAAYrY,EAAiD,EAAjDA,QAASuY,EAAwC,EAAxCA,UAAWC,EAA6B,EAA7BA,aAAcC,EAAe,EAAfA,aACzE7a,EAAWC,cAEX8a,EAAuB5a,aAAY,SAAAtE,GACvC,OAAOA,EAAMnB,OAASmB,EAAMnB,OAAO+f,GAAc,OAC7C,GAEAO,EAA4B,SAACzY,GACjCzF,QAAQC,IAAI,uBAAwB0d,EAAYlY,GAChDvC,EAAS,CAAEjE,KAAM4e,EAAW3e,QAASuG,KAkCvC,OACE,sBAAKvD,UAAU,2BAAf,UACA,sBAAKA,UAAU,2BAAf,UACE,qBAAKA,UAAU,uBAAf,SAAuCmQ,IACd,KAAvB4L,EACE,qBAAK/b,UAAU,sCAAsCE,QA/B3B,WAChCpC,QAAQC,IAAI,iBAAkB0d,GAC9Bza,EAAS,CAAEjE,KAAM8e,EAAc7e,QAAS,QA6BlC,mBAIA,QAGJ,qBAAKgD,UAAU,yBAAf,SAEIoD,EAAQ/F,KAAI,SAAAkG,GACV,IAAIuW,EAAWiC,EAAqBzd,MAAM,KAAKE,SAAS+E,EAAO8F,GAAG1K,YAE9DqB,EAAY8Z,EAAW,+BAAgC,sBAEvDC,EAAUD,EACV,SAAAnZ,GAAKA,EAAE8U,kBAnDkB,SAAClS,GACtCzF,QAAQC,IAAI,4BAA6B0d,EAAYlY,GACrDvC,EAAS,CAAEjE,KAAM6e,EAAc5e,QAASuG,IAiDF0Y,CAA+B1Y,EAAO8F,KAEhE,SAAA1I,GA1CM,IAAA0I,EA0CD1I,EAAE8U,kBA1CDpM,EA0CgC9F,EAAO8F,GAzCzDvL,QAAQC,IAAI,oBAAqBge,GAEP,KAAvBA,EAED3Y,EAAQ/F,KAAI,SAAAe,GAIV,OAHGA,EAAEiL,KAAOA,GACV2S,EAA0B5d,EAAEiL,IAEvBjL,KAMT4d,EAA0B3S,IA6BpB,OACE,sBAAKrJ,UAAWA,EAAhB,UACE,qBAAKA,UAAU,wBAAwBE,QAAS6Z,EAAhD,SACE,sBAAKE,QAAQ,YAAb,UACE,wBAAQC,GAAI,MAAOC,GAAI,MAAOC,EAAG,MAAOxK,KAAMrM,EAAO/F,QACrD,wBAAQ0c,GAAI,MAAOC,GAAI,MAAOC,EAAG,MAAOxK,KAAMrM,EAAOmY,iBAGzD,qBAAK1b,UAAU,2BAAf,SACIuD,EAAOjE,SARmBiE,EAAO8F,Y,OC5GtC,SAAS6S,KACtB,IAAMlb,EAAWC,cAUXkb,EAA8B,SAAClY,GAAD,OAAW,SAAAtD,GAC7CK,EAAS,CAAEjE,KAAM,gCAAiCC,QAASiH,MAGzDmY,EAAoB,oCACpBC,EAAsB,oCAO1B,MAN8B,eAdGlb,aAAY,SAAAtE,GAC3C,IAAIoH,EAAQ,WAIZ,OAHGpH,EAAMnB,SACPuI,EAAwC,eAAlCpH,EAAMnB,OAAOL,mBAAoC,aAAa,YAE/D4I,KAUPoY,GAAqB,4CAErBD,GAAmB,4CAInB,qBAAKpc,UAAU,uCAAf,SACE,sBAAKA,UAAU,qCAAf,UACE,qBAAKA,UAAWoc,EAAmBlc,QAASic,EAA4B,YAAxE,sBACA,qBAAKnc,UAAWqc,EAAqBnc,QAASic,EAA4B,cAA1E,6B,OC0EOG,OArGf,WACE,IAAMtb,EAAWC,cAEXsb,EAAgBpb,aAAY,SAAAtE,GAChC,OAAOA,EAAMI,SAASxD,eAAgBoD,EAAMI,SAASxD,eAAsB,MAGvE+iB,EAA6Brb,aAAY,SAAAtE,GAC7C,OAAG4f,MAAMC,QAAQ7f,EAAMnB,OAAOP,sBACrB,GAGF0B,EAAMnB,OAASmB,EAAMnB,OAAOP,qBAAuB,OACtD,GAEAwhB,EAAkC,SAACC,IACpBJ,GAA8B,IAAIle,MAAM,KAAKnB,SACjDof,EAAcpf,OAAO,GAKpC6D,EAAS,CAAEjE,KAAM,sCAAuCC,QAAS4f,KAgCnE,OACE,sBAAK5c,UAAU,iCAAf,UACE,sBAAKA,UAAU,iCAAf,UACE,qBAAKA,UAAU,6BAAf,0BAC+B,KAA7Bwc,EACE,qBAAKxc,UAAU,4CAA4CE,QA7B7B,WACtCc,EAAS,CAAEjE,KAAM,qCAAsCC,QAAS,QA4BxD,mBAIA,QAGN,qBAAKgD,UAAU,+BAAf,SAEIuc,EAAclf,KAAI,SAACuf,EAAarf,GAC9B,IAAIuc,GAAY0C,GAAyD,IAAIle,MAAM,KAAKE,SAASoe,EAAavT,IAC1G0Q,EAAUD,EACV,SAAAnZ,GAAKA,EAAE8U,kBA9CwB,SAACmH,GAC5C9e,QAAQC,IAAI,8CAA+C6e,GAC3D5b,EAAS,CAAEjE,KAAM,2CAA4CC,QAAS4f,IA4ChCC,CAAqCD,EAAavT,KAE5E,SAAA1I,GAtCM,IAAA5D,EAsCD4D,EAAE8U,kBAtCD1Y,EAsCgC6f,EAAavT,GArC/DvL,QAAQC,IAAI,oBAAqBye,GAED,KAA7BA,EAEDD,EAAclf,KAAI,SAAAe,GAIhB,OAHGA,EAAEiL,KAAOtM,GACV4f,EAAgCve,EAAEiL,IAE7BjL,KAMTue,EAAgC5f,IAyBtB+f,EAAa,UAAMhD,EAAW,qCAAsC,6BACpEiD,EAAa,GACjB,OAAOH,EAAavT,IAClB,IAAK,UAAW0T,EAAa,oCAAqC,MAClE,IAAK,gBAAiBA,EAAa,0CAA2C,MAC9E,IAAK,QAASA,EAAa,oCAAqC,MAChE,IAAK,MAAOA,EAAa,gCAAiC,MAC1D,IAAK,UAAYA,EAAa,kCAKhC,OACE,sBAAK/c,UAAS,UAAK8c,GAAL,OAAqBvf,IAAMgf,EAAcpf,OAAO,EAAE,kCAAkC,IAA4B+C,QAAS6Z,EAAvI,UACE,qBAAK/Z,UAAS,oCAA+B+c,GAAc7c,QAAS6Z,IACpE,qBAAK/Z,UAAU,iCAAf,SACI4c,EAAatd,SAH0Fsd,EAAavT,aCrBzH2T,OAjDf,YAGgB,IAFZ/Q,EAEW,EAFXA,YAEAgR,GAAW,EADXviB,QACW,EAAXuiB,UACI/b,EAAaC,aAAY,SAAAtE,GAC7B,QAAOA,EAAMiC,eAAerD,aAGxByhB,EAAOjR,IAActQ,EACrBwhB,EAAUlR,IAAcrQ,EAGxBwhB,EAAUD,GAAWD,EACrBG,EAASF,EACTG,EAAgBJ,EAChBK,EAAYJ,EACZK,EAAuBL,EACvBM,EAPexR,IAAcpQ,EAQ7B6hB,EAAiBP,GAAWD,EAElC,OACE,sBAAKld,UAAU,wBAAf,WAEKid,GAAY,cAAC,GAAD,IAEb/b,GAAckc,GAAa,cAAC,GAAD,IAE3Blc,GAAcmc,GAAY,cAAC,GAAD,IAE1Bnc,GAAcuc,GAAc,cAAC,GAAD,IAE7B,cAAC,GAAD,IAEA,cAAC,GAAD,IAEAvc,GAAcoc,GAAmB,cAAC/B,GAAD,IAEjCra,GAAcqc,GAAe,cAACzB,GAAD,IAE7B5a,GAAcsc,GAA0B,cAAC,GAAD,IAExCE,GAAoB,cAAC,GAAD,IAEpB,cAAC,GAAD,QChCQC,OAxBf,YAAoD,EAAzBpS,UAA0B,IAAfU,EAAc,EAAdA,YAE9B2R,EAA6Bzc,aAAY,SAAAtE,GAC7C,QAAOA,EAAMwC,IAAKxC,EAAMwC,GAAN,sBAGpB,OACE,cAAC,GAAD,CAAUC,KAAK,YAAYoM,UAAU,OAAOD,QAAS,CACnDI,MAAO,UACPL,gBAAiB,WAChB7E,MAAO,CACR/C,MAAQga,EAA6B,QAAU,QAC/C/Z,OAAQ,OACRwI,IAAK,EACLD,SAAU,SAPZ,SAUE,qBAAKpM,UAAU,mBAAf,SACE,cAAC,GAAD,CAAWiM,YAAaA,S,OCEjB4R,OArBf,SAAwBpe,GACtB,OACE,sBAAKO,UAAS,yEAEVP,EAAM8L,UAAY,aAAe,GAFvB,mBAGV9L,EAAMqe,QAHI,UAIXnX,MAAOlH,EAAMkH,MAJhB,UAME,yBAAQ3G,UAAU,uBAAlB,UACE,oBAAIA,UAAU,GAAd,SAAkBP,EAAMoM,QACxB,cAAC8G,GAAD,CAAiBzS,QAAST,EAAMse,kBAGlC,qBAAK/d,UAAU,SAAf,SACGP,EAAMmM,eCcAoS,OA7Bf,YAAoD,IAA1BzS,EAAyB,EAAzBA,UAAWU,EAAc,EAAdA,YAC7BjL,EAAWC,cAYjB,OACE,cAAC,GAAD,CACE4K,MAAM,UACNN,UAAWA,EACXwS,aAAc,WAbhB/c,EAAS,CACPjE,KAAK,iBACLC,QAAS,CACPsC,KAAM,YACNC,YAAY,MAYdue,QAAQ,wBANV,SAUE,cAAC,GAAD,CAAWb,UAAU,EAAMhR,YAAaA,O,UCkB/BgS,GA9CD,WACZ,OACE,qBAAKC,wBAAyB,CAAEC,OAAQC,UAAOC,MAAP,8jFCF7B,SAASC,GAAQ7e,GAC9B,OACE,qBACEO,UAAS,iDADX,SAGE,qBAAKA,UAAU,gBAAf,SACGP,EAAMmM,a,OCSf,SAAS2S,GAAkB9e,GACzB,IAAMuB,EAAWC,cAEXsK,EAAYpK,aAAY,SAAAtE,GAC5B,QAAOA,EAAMwC,IAAKxC,EAAMwC,GAAG,2BAGvB0M,EAAgB5K,aAAY,SAAAtE,GAChC,QAAOA,EAAMnB,QAA+B,KAAtBmB,EAAMnB,OAAOf,UAG/BqR,EAAe7K,aAAY,SAAAtE,GAC/B,QAAOA,EAAMuC,QAASvC,EAAMuC,OAAOhD,iBAG/B6P,EAAc9K,aAAY,SAAAtE,GAC9B,OAAOA,EAAMuC,OAASvC,EAAMuC,OAAO/C,YAAcV,KAG7CuQ,EAAW/K,aAAY,SAAAtE,GAC3B,OAAOA,EAAMuC,OAASvC,EAAMuC,OAAO9C,UAAYN,KAG3CkF,EAAaC,aAAY,SAAAtE,GAC7B,QAAOA,EAAMiC,eAAerD,aAe9B,OACE,cAAC,GAAD,CACEoQ,MAAM,QACNN,UAAWA,EACXwS,aAAc,WAbhB/c,EAAS,CACPjE,KAAK,iBACLC,QAAS,CACPsC,KAWc,uBAVdC,YAUsC,MAExCue,QAAQ,aANV,SAUE,sBAAK9d,UAAS,oEAAd,UAIEiM,IAActQ,EACV,qBAAK,YAAU,WAAWqE,UAAS,eAAUkM,IAAWpQ,EAAkC,kBAAkB,IAC1GoE,QAAS,WAAQc,EAAS,CAAEjE,KAAM,sBAAuBC,QAASlB,KADpE,SAEE,sBAAMkE,UAAU,cAAhB,wBAGO,KAEbiM,IAActQ,EACd,qBAAK,YAAU,WAAWqE,UAAS,eAAUkM,IAAWnQ,EAAmC,kBAAkB,IAC3GmE,QAAS,WAAQc,EAAS,CAAEjE,KAAM,sBAAuBC,QAASjB,KADpE,SAEE,sBAAMiE,UAAU,cAAhB,wBAGS,KAEXiM,IAActQ,EACd,qBAAK,YAAU,WAAYqE,UAAS,eAAUkM,IAAWlQ,EAAqC,kBAAkB,IAC9GkE,QAAS,WAAQc,EAAS,CAAEjE,KAAM,sBAAuBC,QAAShB,KADpE,SAEE,sBAAMgE,UAAU,cAAhB,0BAGS,KAEXiM,IAAcrQ,EACV,qBAAK,YAAU,WAAWoE,UAAS,eAAUkM,IAAWjQ,EAAkC,kBAAkB,IAC1GiE,QAAS,WAAQc,EAAS,CAAEjE,KAAM,yBAA0BC,QAASf,KADvE,SAEE,sBAAM+D,UAAU,cAAhB,wBAGO,KAEbiM,IAAcrQ,EACd,qBAAK,YAAU,WAAWoE,UAAS,eAAUkM,IAAWhQ,EAAmC,kBAAkB,IAC3GgE,QAAS,WAAQc,EAAS,CAAEjE,KAAM,yBAA0BC,QAASd,KADvE,SAEE,sBAAM8D,UAAU,cAAhB,wBAGS,KAEXiM,IAAcrQ,EACd,qBAAK,YAAU,WAAYoE,UAAS,eAAUkM,IAAW/P,EAAqC,kBAAkB,IAC9G+D,QAAS,WAAQc,EAAS,CAAEjE,KAAM,yBAA0BC,QAASb,KADvE,SAEE,sBAAM6D,UAAU,cAAhB,0BAGS,KAEXkB,GAAc6K,EACZ,qBAAK,YAAU,QAAQ/L,UAAS,eAAWgM,EAAiC,GAAlB,mBAAwB9L,QAAS,WACvFc,EAAS,CAAEjE,KAAM,6BAA8BC,QAAS,QAD5D,SAGE,sBAAMgD,UAAU,cAAhB,qBAGO,UC/HnB,IAAMwe,GAAoB,CACtB,CAAEva,MAAM,OAAQxG,UAAU,OAAQ6B,KAAK,QACvC,CAAE2E,MAAM,YAAaxG,UAAU,YAAa6B,KAAK,aACjD,CAAE2E,MAAM,SAAUxG,UAAU,SAAU6B,KAAK,UAC3C,CAAE2E,MAAM,SAAUxG,UAAU,SAAU6B,KAAK,UAC3C,CAAE2E,MAAM,MAAOxG,UAAU,MAAO6B,KAAK,OACrC,CAAE2E,MAAM,YAAaxG,UAAU,YAAa6B,KAAK,MACjD,CAAE2E,MAAM,QAASxG,UAAU,QAAS6B,KAAK,SACzC,CAAE2E,MAAM,QAASxG,UAAU,QAAS6B,KAAK,SACzC,CAAE2E,MAAM,qBAAsBxG,UAAU,qBAAsB6B,KAAK,aACnE,CAAE2E,MAAM,UAAWxG,UAAU,UAAW6B,KAAK,WAC7C,CAAE2E,MAAM,OAAQxG,UAAU,OAAQ6B,KAAK,QACvC,CAAE2E,MAAM,QAASxG,UAAU,QAAS6B,KAAK,SACzC,CAAE2E,MAAM,WAAYxG,UAAU,WAAY6B,KAAK,YAC/C,CAAE2E,MAAM,cAAexG,UAAU,cAAe6B,KAAK,eACrD,CAAE2E,MAAM,OAAQxG,UAAU,OAAQ6B,KAAK,SAGrCmf,GAAkB,CACtB,CAAEnR,QAAQ,GAAIhO,KAAK,iBAAmB,CAAEgO,QAAQ,SAAUhO,KAAK,iBAAmB,CAAEgO,QAAQ,SAAUhO,KAAK,oBAAsB,CAAEgO,QAAQ,SAAUhO,KAAK,iBAAmB,CAAEgO,QAAQ,SAAUhO,KAAK,UAAY,CAAEgO,QAAQ,SAAUhO,KAAK,UAAY,CAAEgO,QAAQ,SAAUhO,KAAK,uBAAyB,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,UAAY,CAAEgO,QAAQ,SAAUhO,KAAK,SAAW,CAAEgO,QAAQ,SAAUhO,KAAK,eAAiB,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,QAAU,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,eAAiB,CAAEgO,QAAQ,SAAUhO,KAAK,SAAW,CAAEgO,QAAQ,SAAUhO,KAAK,UAAY,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,0BAA4B,CAAEgO,QAAQ,SAAUhO,KAAK,WAAa,CAAEgO,QAAQ,SAAUhO,KAAK,kBAAoB,CAAEgO,QAAQ,SAAUhO,KAAK,SAAW,CAAEgO,QAAQ,SAAUhO,KAAK,YAAc,CAAEgO,QAAQ,SAAUhO,KAAK,UAAY,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,OAAS,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,YAAc,CAAEgO,QAAQ,SAAUhO,KAAK,OAAS,CAAEgO,QAAQ,SAAUhO,KAAK,kBAAoB,CAAEgO,QAAQ,SAAUhO,KAAK,gBAAkB,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,WAAa,CAAEgO,QAAQ,SAAUhO,KAAK,kBAAoB,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,UAAY,CAAEgO,QAAQ,SAAUhO,KAAK,WAAa,CAAEgO,QAAQ,SAAUhO,KAAK,WAAa,CAAEgO,QAAQ,SAAUhO,KAAK,gBAAkB,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,eAAiB,CAAEgO,QAAQ,SAAUhO,KAAK,UAAY,CAAEgO,QAAQ,SAAUhO,KAAK,0BAA4B,CAAEgO,QAAQ,SAAUhO,KAAK,iBAAmB,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,yBAA2B,CAAEgO,QAAQ,SAAUhO,KAAK,WAAa,CAAEgO,QAAQ,SAAUhO,KAAK,gBAAkB,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,mBAAqB,CAAEgO,QAAQ,SAAUhO,KAAK,oBAAsB,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,WAAa,CAAEgO,QAAQ,SAAUhO,KAAK,YAAc,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,iCAAmC,CAAEgO,QAAQ,SAAUhO,KAAK,YAAc,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,YAAc,CAAEgO,QAAQ,SAAUhO,KAAK,sBAAwB,CAAEgO,QAAQ,SAAUhO,KAAK,UAAY,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,YAAc,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,YAAc,CAAEgO,QAAQ,SAAUhO,KAAK,kBAAoB,CAAEgO,QAAQ,SAAUhO,KAAK,WAAa,CAAEgO,QAAQ,SAAUhO,KAAK,YAAc,CAAEgO,QAAQ,SAAUhO,KAAK,WAAa,CAAEgO,QAAQ,SAAUhO,KAAK,uBAAyB,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,eAAiB,CAAEgO,QAAQ,SAAUhO,KAAK,SAAW,CAAEgO,QAAQ,SAAUhO,KAAK,UAAY,CAAEgO,QAAQ,SAAUhO,KAAK,YAAc,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,aAAe,CAAEgO,QAAQ,SAAUhO,KAAK,eAAiB,CAAEgO,QAAQ,SAAUhO,KAAK,YAAc,CAAEgO,QAAQ,SAAUhO,KAAK,cAAgB,CAAEgO,QAAQ,SAAUhO,KAAK,eAAiB,CAAEgO,QAAQ,SAAUhO,KAAK,WAI19Gof,GAAuB,CACzB,CAAErV,GAAI,UAAW/J,KAAM,SACvB,CAAE+J,GAAI,gBAAiB/J,KAAM,YAC7B,CAAE+J,GAAI,QAAS/J,KAAM,WACrB,CAAE+J,GAAI,MAAO/J,KAAM,QACnB,CAAE+J,GAAI,UAAW/J,KAAM,aCvBvBqf,QAAoBpR,EAwHXqR,GAAyB,WAC/BD,GArHmB,WAExB,IACE,QAAGpR,IAAYoR,GAEb,OADA7gB,QAAQ4P,MAAM,yDACP,EAIT,IAAM7Q,EAAQ8hB,GAAkBE,WAChC,IAAiC,IAA9BhiB,EAAMI,SAAStD,aAEhB,OAAO,EAGT,GAAGkD,EAAMuC,OAAO/C,cAAcV,EAE5B,OAAO,EAGT,IAAMmjB,EAAe5d,GAAWrE,IAAQA,GAAOA,EAAMnB,QAAQmB,EAAMiC,eAAerD,UAAU+S,MACxF/M,EAAM,kFACNgK,EAAU,GACd,GAAIqT,GAMF,GAAG,OAAOjiB,EAAMnB,QAAQ,OAAOmB,EAAMkiB,mBAAoB,CACvDtd,EAAM,8DACN,IAAIyL,EAAeJ,GAAuBnR,EAAkBkB,EAAMnB,OAAQmB,EAAMI,UAC7EiQ,EAAa/P,OAAO,IACrBsE,GAAO,IAAMyL,EAAazO,KAAK,MAEjCgN,EAAU,CAAEmD,QAAU,CAAE,cAAiB,UAAY/R,EAAMiC,eAAerD,UAAU+S,aAZtE,CAChB,IAAItB,EAAeJ,GAAuBnR,EAAkBkB,EAAMnB,OAAQmB,EAAMI,UAC7EiQ,EAAa/P,OAAO,IACrBsE,GAAO,IAAMyL,EAAazO,KAAK,MAYnCoQ,MAAMpN,EAAKgK,GAASqI,MAAK,SAAShF,GAChC,IAAIA,EAAS+F,GAEX,OADA/W,QAAQ4P,MAAM,sBAAuBoB,IAC9B,EAGTA,EAASC,OAAO+E,MAAK,SAAS9V,GAE1BA,EADCkD,GAAWrE,GACDmB,EAAS8W,YAET9W,EAASghB,yBAEtB,IAAIC,EAAU,CACX,KAAO,oBACP,SAAW,IAGVC,EAAiB,GACrBriB,EAAMI,SAAS3D,WAAW8P,SAAQ,SAAA+V,GAChCD,EAAeC,EAAE1hB,WAAa0hB,EAAElb,OAAOkb,EAAE3hB,SAG3C,IAAMrE,EAAMC,EAAQ,IAChBgmB,EAAa7Z,IAAO1I,EAAMnB,OAAOd,OAEjCM,EAAqB2B,EAAMnB,OAAOR,mBAAmBoD,MAAM,MAAQ,GAEvER,QAAQC,IAAI,WAAYC,EAASghB,0BACjChhB,EAASoL,SAAQ,SAAAkQ,GACf,IhCoC2B+F,EgCpCvB5U,EAAwBvJ,GAAWrE,GAASyc,EAAE8F,WAAa9F,EAAE7O,sBAG3D6U,GhCiCqBD,EgClCbD,EAAWG,KAAKha,IAAOkF,GAAwB,ahCmCrD,GACP,EAEL4U,GAAY,KACP,EAELA,GAAY,KACP,EAEF,EgCzCKG,EAAU,CACX,KAAO,UACP,WAAa,CACV,GAAKrmB,EAAImgB,EAAE9X,SAASie,SAASnG,EAAE9X,SAASke,WACxC,UAAapG,EAAE7b,WAAa6b,EAAErV,MAC9B,sBAAyBwG,EACzB,aAAgB6U,GAEnB,SAAW,CACR,KAAO,QACP,YAAc,CACXhG,EAAE9X,SAASke,UACXpG,EAAE9X,SAASie,SACX,OAKave,GAAWrE,KAAW3B,EAAmBsD,SAAS8gB,EAAa3gB,cAEnFsgB,EAAQrW,SAAStO,KAAKklB,MAG1B1hB,QAAQC,IAAI,6BAA8BkhB,GAE1CN,GAAkB3d,SAAS,CACzBjE,KAAM,eACNC,QAASiiB,OAGVlL,OAAM,SAAAxV,GACPT,QAAQ4P,MAAM,+BAEfqG,OAAM,SAAAxV,GACPT,QAAQ4P,MAAM,6CAA8CjM,MAE9D,MAAMlD,GACNT,QAAQ4P,MAAM,yBAA0BnP,IAU1CohB,GAF0B7hB,QAAQC,IAAI,kBC1HlC5E,GAAMC,EAAQ,IAEhBwmB,QAAwBrS,EAqHfsS,GAA6B,YAjHZ,WAE5B,IACE,QAAGtS,IAAYqS,GAEb,OADA9hB,QAAQ4P,MAAM,yDACP,EAIT,IAAM7Q,EAAQ+iB,GAAsBf,WACpC,GAAGhiB,EAAMuC,OAAO/C,cAAcT,EAE5B,OAAO,EAET,IAAiC,IAA9BiB,EAAMI,SAAStD,aAGhB,OAAO,EAIT,GADqBuH,GAAWrE,IAAQA,GAAOA,EAAMnB,QAAQmB,EAAMiC,eAAerD,UAAU+S,MAIrF,CACL,IAAI/M,EAAM,0DAENgK,EAAU,GACd,GAAG,OAAO5O,EAAMnB,QAAQ,OAAOmB,EAAMkiB,mBAAoB,CACvDtd,EAAM,0DACN,IAAIyL,EAAeJ,GAAuBlR,EAAqBiB,EAAMnB,OAAQmB,EAAMI,UAChFiQ,EAAa/P,OAAO,IACrBsE,GAAO,IAAMyL,EAAazO,KAAK,MAEjCgN,EAAU,CAAEmD,QAAU,CAAE,cAAiB,UAAY/R,EAAMiC,eAAerD,UAAU+S,QAEtFK,MAAMpN,EAAKgK,GAASqI,MAAK,SAAShF,GAChC,IAAIA,EAAS+F,GAEX,OADA/W,QAAQ4P,MAAM,sBAAuBoB,IAC9B,EAGTA,EAASC,OAAO+E,MAAK,SAASvZ,GAC5B,IAAIulB,EAAc5e,GAAa3G,EAAO,GAGhCwlB,EAAgC,SAACC,EAAYjjB,GAEjD,GAAKijB,EAAL,CACA,GAAKjjB,IAAkB,kBAATA,GAAqC,gBAATA,GAA1C,CAKA,IAAIkiB,EAAU,CACZ,KAAO,oBACP,SAAW,IA2Bb,OAvBAe,EAAWjjB,GAAMqM,SAAQ,SAAAkQ,GACvB,IAAIkG,EAAU,CACX,KAAO,UACP,WAAa,CACV,GAAMrmB,GAAImgB,EAAE9X,SAASie,SAASnG,EAAE9X,SAASke,WACzC,UAAapG,EAAE7b,UACf,aAAgB6b,EAAE2G,aAClB,eAAkB3G,EAAE4G,eACpB,aAAgB,EAChB,MAAS,WAEZ,SAAW,CACR,KAAO,QACP,YAAe,CACZ5G,EAAE9X,SAASke,UACXpG,EAAE9X,SAASie,SACX,KAITR,EAAQrW,SAAStO,KAAKklB,MAGjBP,EAjCLnhB,QAAQ4P,MAAM,6BAA8B3Q,KAoChD6iB,GAAsB5e,SAAS,CAC7BjE,KAAM,sBACNC,QAAS+iB,EAA8BD,EAAa,mBAGtDF,GAAsB5e,SAAS,CAC7BjE,KAAM,2BACNC,QAAS+iB,EAA8BD,EAAa,oBAGrD/L,OAAM,SAAAxV,GACPT,QAAQ4P,MAAM,+BAGfqG,OAAM,SAAAxV,GACPT,QAAQ4P,MAAM,6CAA8CjM,WA/E9Dme,GAAsB5e,SAAS,CAAEjE,KAAM,0BACvC6iB,GAAsB5e,SAAS,CAAEjE,KAAM,gCAkFzC,MAAMwB,GACNT,QAAQ4P,MAAM,yBAA0BnP,KAS1C4hB,I,OC2GaC,OAhMf,WACE,MAAgC7f,mBAASkD,SAASjC,SAASI,UAA3D,mBAAOlC,EAAP,KAAiB2gB,EAAjB,KACA,EAAkC9f,mBAASkD,SAASjC,SAAS8e,QAA7D,mBAAOC,EAAP,KAAkBC,EAAlB,KAEMxf,EAAWC,cAEX2E,EAAeU,iBAAO,MAExB9E,EAAWif,cACfla,qBAAU,WACR8Z,EAAY7e,EAAWA,EAASI,SAAW,MAC3C4e,EAAahf,EAAWA,EAAS8e,OAAS,QACzC,CAAC9e,IAEJ+E,qBAAU,WACR,GAAe,OAAZga,EAAkB,CACnB,IACIrI,EADS,IAAIwI,gBAAgBH,GACfI,IAAI,QACtB,GAAGzI,EACD,IACEpa,QAAQC,IAAI6iB,mBAAmB1I,IAC/B,IAAM2I,EAAcjjB,KAAKygB,MAAMuC,mBAAmB1I,IAMlD,OAHAlX,EAAS,CAACjE,KAAM,eAAgBC,QAAS6jB,SAEzCjgB,YAAW,kBAAMI,EAAS,CAACjE,KAAM,yBAA0BC,QAAS6jB,EAAYzhB,OAAO3C,cAAa,MAEpG,MAAM8B,GACNT,QAAQgjB,KAAK,sCACbC,MAAM,6BAMZ,IAAI/jB,EAEFA,EADC0C,EAASlB,SAAS,cAAyB,MAAXkB,EACzB/D,EACA+D,EAASlB,SAAS,gBAClB5C,EAEAC,EAEVmF,EAAS,CAACjE,KAAM,wBAAwBC,cAEvC,CAAC0C,EAAU6gB,EAAWvf,IAEzB,IAAME,EAAaC,aAAY,SAAAtE,GAC7B,QAAOA,EAAMiC,eAAerD,aAGxBulB,EAAa7f,aAAY,SAAAtE,GAC7B,QAAOA,EAAMnB,QAASmB,EAAMnB,OAAOd,SAG/BqmB,EAAwB9f,aAAY,SAAAtE,GACxC,QAAOA,EAAMwC,IAAKxC,EAAMwC,GAAG,2BAGvBsN,EAAqBxL,aAAY,SAAAtE,GACrC,QAAOA,EAAMwC,IAAKxC,EAAMwC,GAAN,aAGd3D,EAASyF,aAAY,SAAAtE,GACzB,OAAOA,EAAMnB,UAGT0D,EAAS+B,aAAY,SAAAtE,GACzB,OAAOA,EAAMuC,UAGT6M,EAAc9K,aAAY,SAAAtE,GAC9B,OAAOA,EAAMuC,OAASvC,EAAMuC,OAAO/C,YAAcV,KAG7CsB,EAAWkE,aAAY,SAAAtE,GAC3B,OAAOA,EAAMI,YAIfsJ,qBAAU,WACR,IAAuBmQ,EAOpBnR,IAAOyb,GAAYzB,KAAKha,MAAU,YAAc,KAP5BmR,EAQNnR,MAAS2b,SAPxBlgB,EAAS,CACPjE,KAAM,mBACNC,QAAS0Z,EAAM5b,mBAOlB,CAACkmB,EAAYhgB,IAahBuF,qBAAU,YH5GyB,SAAC4a,GACpC,IACE,QAAG5T,IAAY4T,EAEb,OADArjB,QAAQC,IAAI,4DACL,EAGT,IAAMlB,EAAQskB,EAAwBtC,WACtC,GAZe,SAAChiB,GAClB,QAAOA,EAAMiC,eAAerD,UAWtByF,CAAWrE,GAYR,CACLiB,QAAQC,IAAI,mCACZ,IACI0N,EAAU,CAAEmD,QAAU,CAAE,cAAiB,UAAY/R,EAAMiC,eAAerD,UAAU+S,QA6BtF,OA3BFK,MAHQ,2DAGGpD,GAASqI,MAAK,SAAChF,GACxB,IAAIA,EAAS+F,GAEX,OADA/W,QAAQ4P,MAAM,sBAAuBoB,IAC9B,EAGTA,EAASC,OACN+E,MAAK,SAAC7W,GAGLkkB,EAAwBngB,SAAS,CAAEjE,KAAM,eAAgBC,QAASC,EAASmkB,iBACvC,IAAjCnkB,EAASmkB,eAAejkB,QACzBgkB,EAAwBngB,SAAS,CAAEjE,KAAM,oBAAqBC,QAASC,EAASmkB,eAAe,GAAG9T,UAIpG6T,EAAwBngB,SAAS,CAAEjE,KAAM,iBAAkBC,QAASC,EAASokB,YAG7E,IAAIC,EAAQ5C,GACZyC,EAAwBngB,SAAS,CAAEjE,KAAM,oBAAqBC,QAASskB,IAEvEH,EAAwBngB,SAAS,CAAEjE,KAAM,sBAAuBC,SAAS,UAE1E+W,OAAM,SAAAxV,GACPT,QAAQ4P,MAAM,6BAET,EA3CT5P,QAAQC,IAAI,uCAEZojB,EAAwBngB,SAAS,CAAEjE,KAAM,eAAgBC,QAASyhB,KAGlE0C,EAAwBngB,SAAS,CAAEjE,KAAM,iBAAkBC,QAASwhB,KAEpE,IAAI8C,EAAQ5C,GACZyC,EAAwBngB,SAAS,CAAEjE,KAAM,oBAAqBC,QAASskB,IAEvEH,EAAwBngB,SAAS,CAAEjE,KAAM,sBAAuBC,SAAS,IAmC3E,MAAMuB,GAEN,OADAT,QAAQ4P,MAAM,uBAAwBnP,IAC/B,GGqDPgjB,CAAsBC,MACrB,CAACtgB,IAEJqF,qBAAU,WACRzI,QAAQC,IAAI,kBAAmBrC,EAAOf,QChJf,SAAC8mB,GAC1B,IACE,QAAGlU,IAAYkU,EAEb,OADA3jB,QAAQC,IAAI,yDACL,EAGT,IAAMlB,EAAQ4kB,EAAY5C,WAC1B,IAAoC,IAAjChiB,EAAMI,SAASvD,gBAEhB,OADAoE,QAAQC,IAAI,sDACL,EAGT,IAAI2jB,EAAU,GACd,IAlBe,SAAC7kB,GAClB,QAAOA,EAAMiC,eAAerD,UAiBtByF,CAAWrE,KAASA,EAKtB,OAJA4kB,EAAYzgB,SAAS,CAAEjE,KAAM,YAAaC,QAAS,KACnDykB,EAAYzgB,SAAS,CAAEjE,KAAM,oBAAqBC,QCjB9C,CACN,KAAQ,CACN,KAAO,oBACP,SAAW,IAEb,OAAU,WDaRykB,EAAYzgB,SAAS,CAAEjE,KAAM,mBAAoBC,SAAS,IAG1D,GAAyB,KAAtBH,EAAMnB,OAAOf,OAKhB,OAJA8mB,EAAYzgB,SAAS,CAAEjE,KAAM,YAAaC,QAAS,KACnDykB,EAAYzgB,SAAS,CAAEjE,KAAM,oBAAqBC,QCvB9C,CACN,KAAQ,CACN,KAAO,oBACP,SAAW,IAEb,OAAU,WDmBRykB,EAAYzgB,SAAS,CAAEjE,KAAM,mBAAoBC,SAAS,IAQ1D0kB,EAAU,iEAAiE7kB,EAAMnB,OAAOf,OAExF8mB,EAAYzgB,SAAS,CAAEjE,KAAM,YAAaC,QAAS,KACnDykB,EAAYzgB,SAAS,CAAEjE,KAAM,mBAAoBC,SAAS,IAK5D,IAAIyO,EAAU,CAAEmD,QAAU,CAAE,cAAiB,UAAY/R,EAAMiC,eAAerD,UAAU+S,QAExFK,MAAM6S,EAAWjW,GAASqI,MAAK,SAAChF,GAC9B,IAAIA,EAAS+F,GAEX,OADA/W,QAAQ4P,MAAM,sBAAuBoB,IAC9B,EAGTA,EAASC,OACN+E,MAAK,SAAC7W,GAELwkB,EAAYzgB,SAAS,CAAEjE,KAAM,YAAaC,QAASC,EAASzD,QAC5DioB,EAAYzgB,SAAS,CAAEjE,KAAM,mBAAoBC,SAAS,UAE3D+W,OAAM,SAAAxV,GACPT,QAAQ4P,MAAM,4BAElB,MAAMnP,GACNT,QAAQ4P,MAAM,yBAA0BnP,IDwFxCojB,CAAYH,MACX,CAACtgB,EAAYjE,EAASvD,gBAAiBgC,EAAOf,SAEjD4L,qBAAU,WACRzI,QAAQC,IAAI,2BE7IkB,SAACyjB,GACjC,IACE,QAAGjU,IAAYiU,EAEb,OAAO,EAGT,IAAM3kB,EAAQ2kB,EAAM3C,WACpB,IAAiC,IAA9BhiB,EAAMI,SAAStD,aAEhB,OADAmE,QAAQC,IAAI,mEACL,EAGT,IAAI6jB,EAAS,GACb,GA5Be,SAAC/kB,GAClB,QAAOA,EAAMiC,eAAerD,UA2BtByF,CAAWrE,IAASA,EAGjB,GAA0B,KAAtBA,EAAMnB,OAAOf,OAEtBmD,QAAQC,IAAI,yCACZ6jB,EAAW/kB,EAAMI,SAASzD,MAAMkC,QAAO,SAAA8R,GAAI,MAAoB,iBAAjBA,EAAKkN,aAA6Brd,KAAI,SAAAmQ,GAAI,OAAEA,EAAKC,WAAShP,KAAK,UACxG,GAAgC,IAA5B5B,EAAMnB,OAAOlC,MAAM2D,OAAY,CAExC,IAAI0kB,EAAShlB,EAAMI,SAAS1D,SAASmC,QAAO,SAAAf,GAAM,OAAEA,EAAO2S,UAAUzQ,EAAMnB,OAAOf,UAAQ0C,KAAI,SAAA1C,GAAM,OAAEA,EAAO2S,WACzGwU,EAASjlB,EAAMI,SAASzD,MAAMkC,QAAO,SAAA8R,GAAI,MAAoB,iBAAjBA,EAAKkN,WAA4BmH,EAAOrjB,SAASgP,EAAKJ,iBACtGtP,QAAQC,IAAI,2CAA4C8jB,EAAQC,GAChEF,EAAWE,EAAOzkB,KAAI,SAAAmQ,GAAI,OAAEA,EAAKC,WAAShP,KAAK,UAE/CX,QAAQC,IAAI,2CAEZ6jB,EAAW/kB,EAAMnB,OAAOlC,WAdxBooB,EAAW,GAiBb,GAAc,KAAXA,EAED,YADAJ,EAAMxgB,SAAS,CAAEjE,KAAM,oBAAqBC,QA3CxC,CACN,KAAQ,CACN,KAAO,oBACP,SAAW,IAEb,OAAU,MA2CV,IAAI+kB,EAAmB,kEAAkEH,EAAS,yBAG9FnW,EAAU,CAAEmD,QAAU,CAAE,cAAiB,UAAY/R,EAAMiC,eAAerD,UAAU+S,QACxFK,MAAMkT,EAAkBtW,GAASqI,MAAK,SAAChF,GACrC,IAAIA,EAAS+F,GAEX,OADA/W,QAAQ4P,MAAM,sBAAuBoB,IAC9B,EAGTA,EAASC,OACN+E,MAAK,SAAC7W,GACLa,QAAQC,IAAI,yBAA0BlB,EAAMnB,OAAOlC,OAAO,aAC1D,IAAMwoB,EAAK5oB,EAAQ,KAGf6oB,EAAU,CACX,KAAO,oBACP,SAAW,IAGVC,OAAa3U,EAEjBtQ,EAASzD,MAAM4P,SAAQ,SAAC+Y,EAAU5kB,GAChC,OAAO4kB,EAASF,QAAQllB,MACtB,IAAK,eACL,IAAK,UACH,IAAIyiB,EAAU,CACX,KAAO,UACP,SAAY2C,EAASF,SAExBA,EAAQrZ,SAAStO,KAAKklB,GAEtB,IAAIhjB,EAASwlB,EAAGxlB,OAAOgjB,QACpBjS,IAAY2U,EACbA,EAAW1lB,GAEX0lB,EAAW,GAAGloB,KAAKuf,IAAI/c,EAAO,GAAG0lB,EAAW,IAC5CA,EAAW,GAAGloB,KAAKuf,IAAI/c,EAAO,GAAG0lB,EAAW,IAC5CA,EAAW,GAAGloB,KAAKwf,IAAIhd,EAAO,GAAG0lB,EAAW,IAC5CA,EAAW,GAAGloB,KAAKwf,IAAIhd,EAAO,GAAG0lB,EAAW,KAG9C,MACF,QACEpkB,QAAQgjB,KAAK,qDAAsDqB,EAASplB,KAAMolB,OAKxF,IAAInlB,EAAU,CAAEzC,KAAM0nB,EAASvmB,OAAQmB,EAAMnB,OAAOlC,MAAOoO,OAAQsa,GACnEV,EAAMxgB,SAAS,CAAEjE,KAAM,oBAAqBC,YAC5CwkB,EAAMxgB,SAAS,CAAEjE,KAAM,yBAA0BC,QAASklB,OACzDnO,OAAM,SAAAxV,GAAMT,QAAQ4P,MAAM,wBAAyBnP,SACrDwV,OAAM,SAAAxV,GAAMT,QAAQ4P,MAAM,mCAC/B,MAAMnP,GACNT,QAAQ4P,MAAM,yBAA0BnP,IF+CxC6jB,CAAmBZ,MAClB,CAACtgB,EAAYxF,EAAOf,OAAQsC,EAAStD,aAAc+B,EAAOlC,QAG7D+M,qBAAU,WF5BVoY,GE6BwB6C,GF5BxB5C,KCLuC,SAACyD,GACxCzC,GAAwByC,EACxBxC,KCgCEyC,CAA0Bd,MACzB,CAACtgB,EAAYjE,EAAStD,aAAc+F,EAAUhE,EAAQ0D,IAGzD,IAAMmjB,EAAoB,WACxB,OAAO,gCACL,qBAAKviB,UAAU,yBAAf,SACE,cAAC,GAAD,CAAkBuL,UAAWoB,EAAoBV,YAAaA,MAEhE,qBAAKjM,UAAU,kBAAf,SACE,cAAC,GAAD,CAAiBuL,UAAWoB,EAAoBV,YAAaA,MAE/D,cAAC,GAAD,QAIEuW,EAAoB,WACxB,OAAO,qCACL,qBAAwB7W,IAAK/F,EAAc5F,UAAU,mBAA5C,gBACT,cAAC,EAAD,IACCuiB,QAIL,OACE,qBAAKviB,UAAS,cAAU2M,GAAsBsU,EAAyB,oBAAsB,IAA7F,SACE,sBAAKjhB,UAAU,YAAf,UACE,eAAC,IAAD,WACE,eAAC,IAAD,CAAOyiB,OAAK,EAAC7iB,KAAK,IAAlB,UACE,cAAC,GAAD,CAASgG,aAAcA,IACtB4c,OAEH,eAAC,IAAD,CAAOC,OAAK,EAAC7iB,KAAK,SAAlB,UACE,eAAC0e,GAAD,WACE,cAAC,GAAD,CAAS1Y,aAAcA,IACvB,cAAC,GAAD,OAEF,qBAAwB+F,IAAK/F,EAAc5F,UAAU,mBAA5C,mBAEX,eAAC,IAAD,CAAOyiB,OAAK,EAAC7iB,KAAK,YAAlB,UACE,cAAC,GAAD,CAASgG,aAAcA,IACtB4c,OAEH,eAAC,IAAD,CAAOC,OAAK,EAAC7iB,KAAK,eAAlB,UACE,cAAC,GAAD,CAASgG,aAAcA,IACtB4c,OAEH,eAAC,IAAD,CAAOC,OAAK,EAAC7iB,KAAK,kBAAlB,UACE,cAAC,GAAD,UACE,cAAC,GAAD,MAED2iB,OAEH,cAAC,IAAD,CAAOE,OAAK,EAAC7iB,KAAK,cAAlB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAO6iB,OAAK,EAAC7iB,KAAK,QAAlB,SACE,cAAC,GAAD,UACE,cAAC,GAAD,WAKN,cAAC,EAAD,CAAMF,SAAUA,UGlNlBgjB,GAAmBnhB,OAAOohB,sCAAwCC,IAElEzpB,GAAMC,EAAQ,IAGdypB,GAAWC,aAAaC,QAAQ,qBAChCC,GAAiBH,GAAWjlB,KAAKygB,MAAMwE,IAAY,GAE5CrB,GAAQyB,YACnBC,EACAF,GACAN,GAAiBS,YAAgBC,OAInC5B,GAAM6B,WAAU,WACd,IAAMC,EAAa9B,GAAM3C,WAEnB0E,EAAgBT,aAAaC,QAAQ,uBAAwB,EAC7DS,EAAgBrqB,GAAIyE,KAAKC,UAAUylB,EAAW5nB,SACjD8nB,IAAgBD,IAEjBT,aAAaW,QAAQ,oBAAqBD,GAG1ChC,GAAMxgB,SAAS,CAAEjE,KAAM,iBAAkBC,QAAS,OAClDwkB,GAAMxgB,SAAS,CAAEjE,KAAM,wBAAyBC,QAAS,OACzDwkB,GAAMxgB,SAAS,CAAEjE,KAAM,6BAA8BC,QAAS,QAGhE,IAAM0mB,EAAiC,CACrC9mB,YAAa2I,MAASoe,OACtB7kB,eAAgBwkB,EAAWxkB,eAC3BpD,OAAQ4nB,EAAW5nB,OACnB0D,OAAQkkB,EAAWlkB,OACnBC,GAAIikB,EAAWjkB,IAEjByjB,aAAaW,QAAQ,oBAAqB7lB,KAAKC,UAAU6lB,O,IAGrDE,G,4JACJ,WACE,OACE,cAAC,IAAD,CAAUpC,MAAOA,GAAjB,SACE,cAAC,IAAD,UACA,cAAC,GAAD,CAAK7P,QAASpC,KAAK9P,MAAMkS,kB,GALPkS,aA+BXD,UAnBf,SAA0BpC,EAAOsC,GAA4B,IAAD,uBAANC,EAAM,iCAANA,EAAM,kBAC1D,IAAIC,EAA4BC,IAAO,WAAP,EAAWF,EAAXE,CAAiBH,GACjD,OAAO,SAAUrkB,GACf,OAAO,cAACukB,EAAD,2BAA+BvkB,GAA/B,IAAsC+hB,MAAOA,MAgB3B0C,CAC3B1C,GACAoC,IAdF,SAAyB/mB,GACvB,MAAO,MAKT,SAA4BmE,GAC1B,MAAO,MCrEMmjB,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBvQ,MAAK,YAAkD,IAA/CwQ,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFphB,SAASO,eAAe,SAM1BmgB,O","file":"static/js/main.3ae1523c.chunk.js","sourcesContent":["const md5 = require('md5');\n\nconst initialState = {\n  aanbieders: [],\n  gebieden: [],\n  zones: [],\n  vehicle_types: [],\n  metadata_loaded: false,\n  zones_loaded: false\n}\n\n// utility function that creates a color palette\n// background: https://mika-s.github.io/javascript/colors/hsl/2017/12/05/generating-random-colors-in-javascript.html\nconst generateHslaColors = (amount) => {\n  \n  let colors = []\n  let huedelta = Math.trunc(360 / (amount+1))\n  let alpha = 1.0\n\n  for (let i = 0; i < amount; i++) {\n    let hue = i * huedelta\n    let lightness = i % 2 === 0 ? 35 : 65;\n    let saturation = i % 2 === 1 ? 40 : 60;\n    colors.push(`hsla(${hue},${saturation}%,${lightness}%,${alpha})`)\n  }\n\n  return colors\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_AANBIEDERS': {\n      let current = state.aanbieders ? state.aanbieders: [];\n      \n      // add colors (will be supplied by the API later)\n      const colors = generateHslaColors(action.payload.length)\n      const providerColors = {\n        'cykl': '#a5e067',\n        'flickbike': '#fe431d',\n        'mobike': '#ed5144',\n        'donkey': '#ed5144',\n        'htm': '#db291e',\n        'jump': '#fd3e48',\n        'gosharing': '#77b136',\n        'check': '#8f3af8',\n        'felyx': '#064627',\n        'lime': '#1bd831',\n        'baqme': '#4bdfbb',\n        'cargoroo': '#ffcb34',\n        'hely': '#fd645c',\n        'tier': '#0d123f'\n      }\n      const aanbieders = action.payload.map((aanbieder,idx)=>{\n        const color = providerColors[aanbieder.system_id] ? providerColors[aanbieder.system_id] : colors[idx];\n        return Object.assign(aanbieder, {color: color});\n      })\n      \n      if(md5(JSON.stringify(current))===md5(JSON.stringify(aanbieders))) { return state; }\n      \n      return {\n        ...state,\n        aanbieders\n      }\n    }\n    case 'SET_GEBIEDEN': {\n      let current = state.gebieden ? state.gebieden: [];\n    \n      if(md5(JSON.stringify(current))===md5(JSON.stringify(action.payload))) { return state; }\n    \n      return {\n        ...state,\n        gebieden: action.payload,\n      }\n    }\n    \n    case 'SET_ZONES': {\n      let current = state.zones ? state.zones: [];\n    \n      if(md5(JSON.stringify(current))===md5(JSON.stringify(action.payload))) { return state; }\n\n      return {\n          ...state,\n          zones: action.payload,\n      };\n    }\n    \n    case 'CLEAR_ZONES': {\n      return {\n          ...state,\n          zones: [],\n          zones_loaded: false,\n      };\n    }\n\n    case 'SET_VEHICLE_TYPES': {\n      let current = state.vehicle_types ? state.vehicle_types: [];\n    \n      if(JSON.stringify(md5(current))===JSON.stringify(md5(action.payload))) { return state; }\n\n      return {\n          ...state,\n          vehicle_types: action.payload,\n      };\n    }\n\n    case 'SET_METADATA_LOADED': {\n      return {\n          ...state,\n          metadata_loaded: action.payload,\n      };\n    }\n\n    case 'SET_ZONES_LOADED': {\n      return {\n          ...state,\n          zones_loaded: action.payload,\n      };\n    }\n    \n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset metadata')\n      \n      return initialState;\n    }\n\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  data: null\n}\n\nexport default function vehicles(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_VEHICLES': {\n      // console.log(\"Set Vehicles %o\", action.payload);\n      const vehicles = action.payload\n      return {\n        data: vehicles\n      }\n    }\n    case 'SET_VEHICLE': {\n      const vehicle = action.payload\n      // Validate input\n      if(! vehicle.uuid) {\n        return {}\n      }\n      // Remove changed vehicle\n      const filtered = state.data.filter(function(x) {\n        return x.uuid !== vehicle.uuid;\n      });\n      // Add vehicle to vehicles set\n      filtered.push(vehicle)\n      // Set store\n      return { data: filtered }\n    }\n    case 'CLEAR_VEHICLES': {\n      return {\n        data: []\n      }\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset vehicles data')\n      \n      return { data: [] };\n    }\n    \n    default:\n      return state;\n  }\n\n}\n","const initialState = {\n  origins: {},\n  destinations: {}\n}\n\nexport default function rentals(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_RENTALS_ORIGINS': {\n      return Object.assign({}, state, {\n        origins: action.payload\n      })\n    }\n    case 'SET_RENTALS_DESTINATIONS': {\n      return Object.assign({}, state, {\n        destinations: action.payload\n      })\n    }\n    case 'CLEAR_RENTALS_ORIGINS': {\n      return Object.assign({}, state, {\n        origins: []\n      })\n    }\n    case 'CLEAR_RENTALS_DESTINATIONS': {\n      return Object.assign({}, state, {\n        destinations: []\n      })\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset rentals data')\n      \n      return initialState;\n    }\n    default:\n      return state;\n  }\n\n}\n","const initialState = {\n  visible: true,\n  gebied: \"\",\n  zones: \"\",\n  datum: (new Date()).toISOString(),\n  intervalstart: (new Date()).toISOString(),\n  intervalduur: 60 * 60 * 1000,\n  aanbiedersexclude: \"\",\n  parkeerduurexclude: \"\",\n  voertuigtypesexclude: \"\",\n  afstandexclude: \"\",\n  herkomstbestemming: \"\",\n  ontwikkelingvan: (new Date()).toISOString(),\n  ontwikkelingtot: (new Date()).toISOString(),\n  ontwikkelingaggregatie: \"day\"\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_FILTER_VISIBLE': {\n      console.log('reducer filter set filter visible %s', action.payload)\n      return {\n          ...state,\n          visible: action.payload\n      };\n    }\n    case 'SET_FILTER_GEBIED': {\n      if(state.gebied===action.payload) {\n        return state;\n      }\n      \n      console.log('reducer filter set gebied to %s', action.payload)\n      return {\n          ...state,\n          gebied: action.payload,\n          zones: \"\"\n      };\n    }\n    case 'SET_FILTER_DATUM': {\n      console.log('reducer filter set datum to %s', action.payload)\n      return {\n          ...state,\n          datum: action.payload\n      };\n    }\n    case 'SET_FILTER_INTERVAL_START': {\n      console.log('reducer filter set interval start to %s', action.payload)\n      return {\n          ...state,\n          intervalstart: action.payload\n      };\n    }\n    case 'SET_FILTER_INTERVAL_DUUR': {\n      console.log('reducer filter set interval duration to %s', action.payload)\n      return {\n          ...state,\n          intervalduur: action.payload\n      };\n    }\n    case 'SET_FILTER_HERKOMSTBESTEMMING': {\n      console.log('reducer filter set herkomstbestemming to %s', action.payload)\n      return {\n          ...state,\n          herkomstbestemming: action.payload\n      };\n    }\n    case 'ADD_TO_FILTER_ZONES': {\n      console.log('add item %s to zones filter %o', action.payload, state)\n      let zones = [];\n      if(state.zones) {\n        try {\n          zones = state.zones.split(\",\") || []\n        } catch(ex) {\n          zones = [];\n        }\n      }\n      if(!zones.includes(action.payload)) {\n        zones.push(action.payload);\n      }\n\n      return {\n        ...state,\n        zones: zones.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_ZONES': {\n      console.log('remove item %o from zones filter', action.payload)\n      let zones = state.zones.split(\",\") || [];\n      zones = zones.filter((item) => {return item.toString() !== action.payload.toString() });\n\n      return {\n          ...state,\n          zones: zones.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_ZONES': {\n      console.log('clear zones filter')\n\n      return {\n          ...state,\n          zones: ''\n      };\n    }\n    case 'ADD_TO_FILTER_MARKERS_EXCLUDE': {\n      let parkeerduurexclude = [];\n      try {\n        console.log('add item %s to parkeerduurexclude filter %o', action.payload, state)\n        if(state.parkeerduurexclude) {\n          try {\n            parkeerduurexclude = state.parkeerduurexclude.split(\",\") || []\n          } catch(ex) {\n            parkeerduurexclude = [];\n          }\n        }\n        if(!parkeerduurexclude.includes(action.payload)) {\n          parkeerduurexclude.push(action.payload);\n        }\n      } catch(ex) {\n        parkeerduurexclude = [];\n      }\n\n      return {\n        ...state,\n        parkeerduurexclude: parkeerduurexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_MARKERS_EXCLUDE': {\n      console.log('remove item %o from parkeerduurexclude filter', action.payload)\n      let parkeerduurexclude = [];\n      try {\n        parkeerduurexclude = state.parkeerduurexclude.split(\",\") || [];\n        parkeerduurexclude = parkeerduurexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        parkeerduurexclude = [];\n      }\n\n      return {\n          ...state,\n          parkeerduurexclude: parkeerduurexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_MARKERS_EXCLUDE': {\n      console.log('clear parkeerduurexclude filter')\n\n      return {\n          ...state,\n          parkeerduurexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_AFSTAND_EXCLUDE': {\n      let afstandexclude = [];\n      try {\n        console.log('add item %s to afstandexclude filter %o', action.payload, state)\n        if(state.afstandexclude) {\n          try {\n            afstandexclude = state.afstandexclude.split(\",\") || []\n          } catch(ex) {\n            afstandexclude = [];\n          }\n        }\n        if(!afstandexclude.includes(action.payload)) {\n          afstandexclude.push(action.payload);\n        }\n      } catch(ex) {\n        afstandexclude = [];\n      }\n\n      return {\n        ...state,\n        afstandexclude: afstandexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_AFSTAND_EXCLUDE': {\n      console.log('remove item %o from afstandexclude filter', action.payload)\n      let afstandexclude = [];\n      try {\n        afstandexclude = state.afstandexclude.split(\",\") || [];\n        afstandexclude = afstandexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        afstandexclude = [];\n      }\n\n      return {\n          ...state,\n          afstandexclude: afstandexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_AFSTAND_EXCLUDE': {\n      console.log('clear afstandexclude filter')\n\n      return {\n          ...state,\n          afstandexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      let voertuigtypesexclude = [];\n      try {\n        console.log('add item %s to voertuigtypesexclude filter %o', action.payload, state)\n        if(state.voertuigtypesexclude) {\n          try {\n            voertuigtypesexclude = state.voertuigtypesexclude.split(\",\") || []\n          } catch(ex) {\n            voertuigtypesexclude = [];\n          }\n        }\n        if(!voertuigtypesexclude.includes(action.payload)) {\n          voertuigtypesexclude.push(action.payload);\n        }\n      } catch(ex) {\n        voertuigtypesexclude = [];\n      }\n\n      return {\n        ...state,\n        voertuigtypesexclude: voertuigtypesexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      console.log('remove item %o from voertuigtypesexclude filter', action.payload)\n      let voertuigtypesexclude = [];\n      try {\n        voertuigtypesexclude = state.voertuigtypesexclude.split(\",\") || [];\n        voertuigtypesexclude = voertuigtypesexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        voertuigtypesexclude = [];\n      }\n\n      return {\n          ...state,\n          voertuigtypesexclude: voertuigtypesexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      console.log('clear voertuigtypesexclude filter')\n\n      return {\n          ...state,\n          voertuigtypesexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_AANBIEDERS_EXCLUDE': {\n      // console.log('add item %s to aanbiedersexclude filter %o', action.payload, state)\n      let aanbiedersexclude = [];\n      try {\n        if(state.aanbiedersexclude) {\n          aanbiedersexclude = state.aanbiedersexclude.split(\",\") || []\n        }\n        if(!aanbiedersexclude.includes(action.payload)) {\n          aanbiedersexclude.push(action.payload);\n        }\n      } catch(ex) {\n        aanbiedersexclude = [];\n      }\n    \n      return {\n          ...state,\n          aanbiedersexclude: aanbiedersexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE': {\n      console.log('remove item %s from aanbiedersexclude filter', action.payload)\n      let aanbiedersexclude = [];\n      try {\n        aanbiedersexclude = state.aanbiedersexclude.split(\",\") || [];\n        aanbiedersexclude = aanbiedersexclude.filter((item) => { return item !== action.payload });\n      } catch(ex) {\n        aanbiedersexclude = [];\n      }\n    \n      return {\n          ...state,\n          aanbiedersexclude: aanbiedersexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_AANBIEDERS_EXCLUDE': {\n      console.log('clear aanbiedersexclude filter')\n    \n      return {\n          ...state,\n          aanbiedersexclude: ''\n      };\n    }\n    case 'SET_FILTER_ONTWIKKELING_VANTOT': {\n      console.log('reducer filter set datum ontwikkeling van %s to %s', action.payload.van, action.payload.tot)\n      return {\n          ...state,\n          ontwikkelingvan: action.payload.van,\n          ontwikkelingtot: action.payload.tot\n      };\n    }\n    case 'SET_FILTER_ONTWIKKELING_AGGREGATIE': {\n      console.log('reducer filter set aggregatie ontwikkeling %s', action.payload)\n      return {\n          ...state,\n          ontwikkelingaggregatie: action.payload\n      };\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset filter')\n      \n      return initialState;\n    }\n    case 'RESET_FILTER': {\n      console.log('reset filter')\n      \n      return initialState;\n    }\n    case 'IMPORT_STATE': {\n      console.log('import filter', action.payload.filter)\n      \n      \n      \n      return {\n        ...state,\n        ...action.payload.filter\n      }\n    }\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  user_data: null\n}\n  \nexport default function vehicles(state = initialState, action) {\n    switch(action.type) {\n        case 'SET_USER': {\n            const user = action.payload\n            return {\n                user_data: user\n            }\n        }\n        case 'CLEAR_USER': {\n            return { user_data: null }\n        }\n        default:\n            return state;\n    }\n}","const md5 = require('md5');\n\nconst initialState = {\n  data: [],\n  filter: \"\"\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_ZONES_GEODATA': {\n      let currentdata = state.data ? state.data: [];\n\n      let datachanged = md5(JSON.stringify(currentdata))!==md5(JSON.stringify(action.payload.data))\n      let filterchanged = state.filter!==action.payload.filter;\n\n      // if(datachanged) { console.log('SET_ZONES_GEODATA - data changed')}\n      // if(filterchanged) { console.log('SET_ZONES_GEODATA - filter changed')}\n      \n      if(!datachanged&&!filterchanged) {\n        // console.log('SET_ZONES_GEODATA - no changes')\n        return state;\n      }\n      \n      // console.log('SET_ZONES_GEODATA - changes: data %s / filter %s', datachanged, filterchanged)\n      return {\n          ...state,\n          data: action.payload.data,\n          filter: action.payload.filter\n      };\n    }\n\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset rentals data')\n      \n      return initialState;\n    }\n\n    default:\n      return state;\n  }\n}\n","\nexport const DISPLAYMODE_PARK = 'displaymode-park';\nexport const DISPLAYMODE_RENTALS = 'displaymode-rentals';\nexport const DISPLAYMODE_OTHER = 'displaymode-other';\n\nexport const DISPLAYMODE_PARKEERDATA_HEATMAP = 'parkeerdata-heatmap';\nexport const DISPLAYMODE_PARKEERDATA_CLUSTERS = 'parkeerdata-clusters';\nexport const DISPLAYMODE_PARKEERDATA_VOERTUIGEN = 'parkeerdata-voertuigen';\nexport const DISPLAYMODE_VERHUURDATA_HEATMAP = 'verhuurdata-heatmap';\nexport const DISPLAYMODE_VERHUURDATA_CLUSTERS = 'verhuurdata-clusters';\nexport const DISPLAYMODE_VERHUURDATA_VOERTUIGEN = 'verhuurdata-voertuigen';\n\nexport const DATASOURCE_VOERTUIGEN = 'vehicles';\nexport const DATASOURCE_VERHUUR = 'rentals';\n\nconst initialState = {\n  zones_visible: false,\n  displaymode: DISPLAYMODE_PARK,\n  view_park: DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  view_rentals: DISPLAYMODE_VERHUURDATA_VOERTUIGEN,\n  extent: [],\n  mapextent: [],\n}\n\nconst md5 = require('md5');\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'LAYER_SET_DISPLAYMODE': {\n      if(state.displaymode===action.payload) { return state }\n      \n      // console.log('reducer layer set view_park %s', action.payload)\n      return {\n          ...state,\n          displaymode: action.payload\n      };\n    }\n    case 'LAYER_SET_VIEW_PARK': {\n      if(state.view_park===action.payload) { return state }\n\n      // console.log('reducer layer set view_park %s', action.payload)\n      return {\n          ...state,\n          view_park: action.payload\n      };\n    }\n    case 'LAYER_SET_VIEW_RENTALS': {\n      if(state.view_rentals===action.payload) { return state }\n\n      // console.log('reducer layer set view_rentals %s', action.payload)\n      return {\n          ...state,\n          view_rentals: action.payload\n      };\n    }\n    case 'LAYER_TOGGLE_ZONES_VISIBLE': {\n      // console.log('reducer layer set zones visible %s', !state.zones_visible)\n      return {\n          ...state,\n          zones_visible: !state.zones_visible\n      };\n    }\n    case 'LAYER_SET_ZONES_EXTENT': {\n      if(md5(JSON.stringify(action.payload||[]))!==md5(JSON.stringify(state.extent||[]))) {\n        console.log(\"set extent to %o\", action.payload)\n        return {\n            ...state,\n            extent: action.payload||[]\n        };\n      } else {\n        // console.log(\"set extent - not changed\")\n        return state;\n      }\n    }\n    case 'LAYER_SET_MAP_EXTENT': {\n      if(md5(JSON.stringify(action.payload))!==md5(JSON.stringify(state.mapextent||false))) {\n        // console.log(\"set extent to %o\", action.payload)\n        return {\n            ...state,\n            mapextent: action.payload\n        };\n      } else {\n        // console.log(\"set extent - not changed\")\n        return state;\n      }\n    }\n    case 'IMPORT_STATE': {\n      console.log('import layers')\n      \n      return {\n        ...state,\n        ...action.payload.layers\n      }\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset layer info')\n      \n      return initialState;\n    }\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  // FILTERBAR: true,\n  SELECTLAYER: true\n}\n\nexport default function ui(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_VISIBILITY': {\n      return {\n        ...state,\n        [action.payload.name]: action.payload.visibility\n      };\n    }\n    case 'IMPORT_STATE': {\n      console.log('import ui')\n      \n      return {\n        ...state,\n        ...action.payload.ui\n      }\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset ui data')\n      \n      return initialState;\n    }\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport last_update from './last_update';\nimport metadata from './metadata';\nimport vehicles from './vehicles';\nimport rentals from './rentals';\nimport filter from './filter';\nimport authentication from './authentication';\nimport zones_geodata from './zones_geodata';\nimport layers from './layers';\nimport ui from './ui';\n\nexport default combineReducers({\n  last_update,\n  metadata,\n  vehicles,\n  rentals,\n  filter,\n  authentication,\n  zones_geodata,\n  layers,\n  ui\n})","export default function lastUpdate(state = false, action) {\n  switch(action.type) {\n    case 'SET_LAST_UPDATE': {\n      return action.payload;\n    }\n\n    default:\n      return state;\n  }\n}\n","import React, { useState } from 'react';\n// import moment from 'moment';\nimport { Link } from \"react-router-dom\";\n\nimport './Menu.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { clearUser } from '../actions/authentication.js';\n\nfunction MenuItem(props) {\n\n  const pathName = props.pathName;\n  const isActive = pathName === props.path || pathName === props.href || (pathName === '/' && props.path === '/map/park');\n  const icon = (isActive ? props.icon.replace('.svg', '-active.svg') : props.icon);\n\n  return (\n    <>\n      {props.path && <Link className={`\n          text-menu\n          ${isActive ? 'is-active' : ''}\n        `}\n        to={props.path}\n        href={props.href}\n        onClick={props.onClick}\n        >\n        {icon ? <img alt={props.text} src={icon} /> : ''}\n        <span className={`${(isActive || ! icon) ? 'inline-block' : 'hidden'} sm:inline-block  ml-2`}>\n          {props.text}\n        </span>\n      </Link>}\n\n      {! props.path && <a className={`\n          text-menu\n          inline-block cursor-pointer\n          ${isActive ? 'is-active' : ''}\n        `}\n        href={props.href}\n        onClick={props.onClick}\n        >\n        {icon ? <img alt={props.text} src={icon} /> : ''}\n        <span className={`${(isActive || ! icon) ? 'inline-block' : 'hidden'} sm:inline-block  ml-2`}>\n          {props.text}\n        </span>\n      </a>}\n    </>\n  )\n}\n\nfunction SubMenuItem(props) {\n  const [showMessage, setShowMessage] = useState(false)\n  \n  const onClick = (e) => {\n    console.log('show message')\n    setShowMessage(true);\n    \n    setTimeout(()=>{ console.log('hide message'); setShowMessage(false) }, 3000);\n    \n    props.onClick(e);\n  }\n  \n  return <>\n    {props.path && <Link className={`text-link`}\n      to={props.path}\n      href={props.href}\n      onClick={props.onClick}\n      >\n      <span className={`block`}>\n        {showMessage ? props.message : props.text}\n      </span>\n    </Link>}\n\n    {! props.path && <a className={`text-link inline-block cursor-pointer`}\n      href={props.href}\n      onClick={onClick}\n      >\n      <span className={`block`}>\n        {showMessage ? props.message : props.text}\n      </span>\n    </a>}\n  </>\n}\n\nfunction Menu({pathName}) {\n  const [subMenuIsActive, setSubMenuIsActive] = useState(false);\n\n  const dispatch = useDispatch();\n  // let dateToShow = moment(moment().format('2021-11-06 06:00'));\n  \n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  const exportState = useSelector(state => {\n    return { filter: state.filter, layers: state.layers, ui:state.ui };\n  });\n  \n  const logOut = () => {\n    if (isLoggedIn) {\n      dispatch( clearUser() );\n      dispatch( { type: \"LOGOUT\", payload: null });\n    }\n  }\n  \n  const exportStateToClipboard = () => {\n    // creates a url that recreates the exact view\n    const l = window.location;\n    const base = l.protocol + \"//\" + l.host + l.pathname;\n    const params = encodeURIComponent(JSON.stringify(exportState));\n    const url = base + \"?view=\" + params;\n\n    navigator.clipboard.writeText(url);\n  }\n  \n  return (\n    <div className=\"\n      Menu\n      fixed\n      w-full\n      mx-0\n      bottom-0\n      bg-white\n      sm:bg-transparent\n      sm:bottom-0.5\n      sm:mx-8\n      sm:w-auto\n    \">\n      <div className=\"\n        Menu-inner\n        px-4\n        mx-auto\n        bg-white\n        box-border\n        w-full\n        flex\n        flex-col\n        justify-center\n        sm:shadow-lg\n        sm:m-4\n        sm:mb-1\n        sm:rounded-3xl\n      \">\n\n        <div className=\"\n          whitespace-nowrap\n        \">\n\n          {isLoggedIn && <>\n            <MenuItem\n              pathName={pathName}\n              text={'Aanbod'}\n              path={'/map/park'}\n              icon={'/images/components/Menu/aanbod.svg'}\n            />\n\n            <MenuItem\n              pathName={pathName}\n              text={'Verhuringen'}\n              path={'/map/rentals'}\n              icon={'/images/components/Menu/verhuringen.svg'}\n            />\n\n            <MenuItem\n              pathName={pathName}\n              text={'Ontwikkeling'}\n              path={'/stats/overview'}\n              icon={'/images/components/Menu/ontwikkeling.svg'}\n            />\n\n            <MenuItem\n              pathName={pathName}\n              text={''}\n              icon={'/images/components/Menu/settings.svg'}\n              onClick={(e) => {\n                e.preventDefault();\n                setSubMenuIsActive(! subMenuIsActive)\n              }}\n            />\n\n          </>}\n          \n          {! isLoggedIn && <>\n            <Link className=\"text-menu\" to=\"/login\">\n              Log in\n            </Link>\n          </>}\n\n          {isLoggedIn && false && <Link className={`\n            text-menu\n            ${pathName === '/monitoring' ? 'is-active' : ''}\n          `} to=\"/monitoring\">\n            Monitor\n          </Link>}\n\n          {/*\n          <Link to=\"/\" className={`text-menu ${pathName === '' ? 'is-active' : ''}`} onClick={(e) => {\n            e.preventDefault();\n            dispatch({\n              type: 'SET_FILTER_DATUM',\n              payload: dateToShow.toISOString()\n            })\n            clearInterval(TO_interval);\n            TO_interval = setInterval(x => {\n              dateToShow.add(30, 'minutes');\n              dispatch({\n                type: 'SET_FILTER_DATUM',\n                payload: dateToShow.toISOString()\n              })\n            }, 1200);\n            // Stop after 10 minutes\n            setTimeout(x => {\n              clearInterval(TO_interval);\n            }, 60 * 1000 * 10);\n          }}>\n            \n          </Link>\n          */}\n\n        </div>\n\n        {subMenuIsActive && <>\n          <div className=\"\n            Menu-subMenu\n            absolute\n          \">\n            <SubMenuItem\n              text={'Log uit'}\n              onClick={(e) => {\n                e.preventDefault();\n                setSubMenuIsActive(! subMenuIsActive)\n                logOut();\n              }}\n            />\n            <SubMenuItem\n              text={'Exporteer aanzicht'}\n              message={'Aanzicht gekopieerd'}\n              onClick={(e) => {\n                exportStateToClipboard();\n              }}\n            >\n              <span>Tekst hier</span>\n            </SubMenuItem>\n            <SubMenuItem\n              text={'Feedback '}\n              href=\"mailto:info@deelfietsdashboard.nl?subject=Feedback Dashboard Deelmobiliteit&body=Ik heb feedback: \"\n              onClick={(e) => {\n                setSubMenuIsActive(! subMenuIsActive);\n              }}\n            />\n          </div>\n        </>}\n\n      </div>\n    </div>\n  )\n\n  // <nav class=\"flex items-center justify-around flex-wrap bg-teal-500 p-6\">\n  // </nav>\n}\n\nexport default Menu;\n\n","import { SET_USER, CLEAR_USER } from \"./actionTypes\";\n\nexport const setUser = (user) => ({\n  type: SET_USER,\n  payload: user\n})\n\nexport const clearUser = () => ({\n  type: CLEAR_USER,\n  payload: null\n})\n","// vehicles\nexport const SET_VEHICLES = 'SET_VEHICLES';\nexport const SET_VEHICLE = 'SET_VEHICLE';\nexport const CLEAR_VEHICLES = 'CLEAR_VEHICLES';\n\n// authentication\nexport const SET_USER = 'SET_USER';\nexport const CLEAR_USER = 'CLEAR_USER';\n","import { useDispatch } from 'react-redux';\n\nimport './MenuSecondaryItem.css';\n// import { IconButtonFilter } from './IconButtons.jsx';\n// import { clearUser } from '../actions/authentication';\n\nfunction MenuSecondaryItem(props) {\n  return (\n    <a\n      href=\"#\"\n      className=\"MenuSecondaryItem cursor-pointer mx-2\"\n      onClick={props.onClick}\n    >\n      {props.text}\n    </a>\n  )\n}\n\nfunction MenuSecondary() {\n  const dispatch = useDispatch()\n\n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  return (\n    <div className=\"MenuSecondary block sm:hidden absolute left-0\">\n      <MenuSecondaryItem\n        text=\"Filters\"\n        onClick={() => {\n          setVisibility('FILTERBAR', true)\n        }}\n      />\n      <MenuSecondaryItem\n        text=\"Lagen\"\n        onClick={() => {\n          setVisibility('MenuSecondary.layers', true)\n        }}\n      />\n    </div>\n  )\n}\n\nexport default MenuSecondary;\n\n","\nexport const getProviderColor = (providers, providerName) => {\n  const found = providers.filter(x => {\n    return x.system_id === providerName;\n  });\n  return found && found[0] ? found[0].color : '#666';\n}\n\nexport const getUniqueProviderNames = (object) => {\n  if(! object) return [];\n  return Object.keys(object).filter((key, val) => {\n    return key !== 'name' ? key : false;\n  })\n}\n","import vehiclesPoint from './vehicles-point.js';\nimport vehiclesHeatmapCityLevel from './vehicles-heatmap-city-level.js';\nimport vehiclesClusters from './vehicles-clusters.js';\nimport vehiclesClustersCount from './vehicles-clusters-count.js';\nimport vehiclesClustersPoint from './vehicles-clusters-point.js';\n\nimport rentalsOriginsPoint from './rentals-origins-point.js';\nimport rentalsOriginsHeatmapCityLevel from './rentals-origins-heatmap-city-level.js';\nimport rentalsOriginsClusters from './rentals-origins-clusters.js';\nimport rentalsOriginsClustersCount from './rentals-origins-clusters-count.js';\nimport rentalsOriginsClustersPoint from './rentals-origins-clusters-point.js';\n\nimport rentalsDestinationsPoint from './rentals-destinations-point.js';\nimport rentalsDestinationsHeatmapCityLevel from './rentals-destinations-heatmap-city-level.js';\nimport rentalsDestinationsClusters from './rentals-destinations-clusters.js';\nimport rentalsDestinationsClustersCount from './rentals-destinations-clusters-count.js';\nimport rentalsDestinationsClustersPoint from './rentals-destinations-clusters-point.js';\n\nimport zonesGeodata from './zones-geodata.js';\n\nexport const layers = {\n  'vehicles-point': vehiclesPoint,\n  'vehicles-clusters': vehiclesClusters,\n  'vehicles-clusters-count': vehiclesClustersCount,\n  'vehicles-clusters-point': vehiclesClustersPoint,\n  'vehicles-heatmap-city-level': vehiclesHeatmapCityLevel,\n\n  'rentals-origins-point': rentalsOriginsPoint,\n  'rentals-origins-clusters': rentalsOriginsClusters,\n  'rentals-origins-clusters-count': rentalsOriginsClustersCount,\n  'rentals-origins-clusters-point': rentalsOriginsClustersPoint,\n  'rentals-origins-heatmap-city-level': rentalsOriginsHeatmapCityLevel,\n\n  'rentals-destinations-point': rentalsDestinationsPoint,\n  'rentals-destinations-clusters': rentalsDestinationsClusters,\n  'rentals-destinations-clusters-count': rentalsDestinationsClustersCount,\n  'rentals-destinations-clusters-point': rentalsDestinationsClustersPoint,\n  'rentals-destinations-heatmap-city-level': rentalsDestinationsHeatmapCityLevel,\n\n  'zones-geodata': zonesGeodata\n}\n","const layer = {\n  'id': 'vehicles-point',\n  'type': 'symbol',\n  'source': 'vehicles',\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], ':', ['get', 'duration_bin']],\n    // 'icon-size': 0.4,\n    'icon-size': [\n      'interpolate',\n        ['linear'],\n        ['zoom'],\n        11,\n        0.4,\n        16,\n        1.0\n      ],\n    'icon-allow-overlap': true,\n  },\n  'minzoom': 7,\n  // 'paint': {\n  // // Size circle radius by earthquake magnitude and zoom level\n  // 'circle-radius': [\n  //   'interpolate', ['linear'], ['zoom'],\n  //   12, 2,\n  //   16, ['*', 2, ['get', 'amount']]\n  // ],\n  // Color circle by earthquake magnitude\n  // 'circle-color': [\n  //   'interpolate',\n  //   ['linear'],\n  //   ['get', 'mag'],\n  //   1,\n  //   'rgba(33,102,172,0)',\n  //   2,\n  //   'rgb(103,169,207)',\n  //   3,\n  //   'rgb(209,229,240)',\n  //   4,\n  //   'rgb(253,219,199)',\n  //   5,\n  //   'rgb(239,138,98)',\n  //   6,\n  //   'rgb(178,24,43)'\n  // ],\n  // 'circle-stroke-color': 'white',\n  // 'circle-stroke-width': 1,\n  // Transition from heatmap to circle layer by zoom level\n    // 'circle-opacity': [\n    //   'interpolate',\n    //   ['linear'],\n    //   ['zoom'],\n    //   7,\n    //   0,\n    //   8,\n    //   1\n    // ],\n    // 'circle-color': ['get', 'color']\n  //}\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'vehicles-clusters',\n  'type': 'circle',\n  'source': 'vehicles-clusters',\n  filter: ['has', 'point_count'],\n  paint: {\n    // Use step expressions (https://maplibre.org/maplibre-gl-js-docs/style-spec/#expressions-step)\n    // with three steps to implement three types of circles:\n    //   * Blue, 20px circles when point count is less than 100\n    //   * Yellow, 30px circles when point count is between 100 and 750\n    //   * Pink, 40px circles when point count is greater than or equal to 750\n    'circle-color': '#1FA024',\n    'circle-radius': [\n      'step',\n      ['get', 'point_count'],\n      20, 100,\n      30, 750,\n      40\n    ]\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'vehicles-clusters-count',\n  'type': 'symbol',\n  'source': 'vehicles-clusters',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': [\n      'step',\n      ['get', 'point_count'],\n      16, 100,\n      20, 750,\n      30\n    ]\n\n  },\n  paint: {\n    'text-color': '#fff',\n    // 'text-halo-color': '#fff',\n    // 'text-halo-width': 2\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'vehicles-clusters-point',\n  'type': 'symbol',\n  'source': 'vehicles',\n  filter: ['!', ['has', 'point_count']],\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], ':', ['get', 'duration_bin']],\n    'icon-size': 1,\n    'icon-allow-overlap': true,\n  },\n  'minzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'vehicles-heatmap-city-level',\n  'type': 'heatmap',\n  'source': 'vehicles',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0, 0.0001,\n      10, 1\n    ],\n\n    'heatmap-intensity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 0.0025,\n      5, 0.005,\n      7.5, 0.01,\n      10, 0.05,\n      12, 0.075,/* city level */\n      15, 0.1,\n      20, 1,\n    ],\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0, 'rgba(0, 0, 255, 0)',\n      0.25, '#ffd837',\n      0.5, '#fe862e',\n      0.75, '#fd3e48',\n      1, '#9a231f'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    // Groter = grotere radius = duidelijker waar het druk is\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 10,\n      10, 12,\n      12, 20,\n      15, 40,\n      20, 60,\n      30, 100,\n      40, 100\n    ],\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7, 1,\n      9, 0.8\n    ]\n  }\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-origins-point',\n  'type': 'symbol',\n  'source': 'rentals-origins',\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], ':', ['get', 'duration_bin']],\n    // 'icon-size': 0.4,\n    'icon-size': [\n      'interpolate',\n        ['linear'],\n        ['zoom'],\n        11,\n        0.4,\n        16,\n        1.0\n      ],\n    'icon-allow-overlap': true,\n  },\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-origins-clusters',\n  'type': 'circle',\n  'source': 'rentals-origins-clusters',\n  filter: ['has', 'point_count'],\n  paint: {\n    // Use step expressions (https://maplibre.org/maplibre-gl-js-docs/style-spec/#expressions-step)\n    // with three steps to implement three types of circles:\n    //   * Blue, 20px circles when point count is less than 100\n    //   * Yellow, 30px circles when point count is between 100 and 750\n    //   * Pink, 40px circles when point count is greater than or equal to 750\n    'circle-color': '#1FA024',\n    'circle-radius': [\n      'step',\n      ['get', 'point_count'],\n      20, 100,\n      30, 750,\n      40\n    ]\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-origins-clusters-count',\n  'type': 'symbol',\n  'source': 'rentals-origins-clusters',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': [\n      'step',\n      ['get', 'point_count'],\n      16, 100,\n      20, 750,\n      30\n    ]\n\n  },\n  paint: {\n    'text-color': '#fff',\n    // 'text-halo-color': '#fff',\n    // 'text-halo-width': 2\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-origins-clusters-point',\n  'type': 'symbol',\n  'source': 'rentals-origins',\n  filter: ['!', ['has', 'point_count']],\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], ':', ['get', 'duration_bin']],\n    'icon-size': 1,\n    'icon-allow-overlap': true,\n  },\n  'minzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-origins-heatmap-city-level',\n  'type': 'heatmap',\n  'source': 'rentals-origins',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0, 0.0001,\n      10, 1\n    ],\n\n    'heatmap-intensity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 0.0025,\n      5, 0.005,\n      7.5, 0.01,\n      10, 0.05,\n      12, 0.075,/* city level */\n      15, 0.1,\n      20, 1,\n    ],\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0, 'rgba(0, 0, 255, 0)',\n      0.25, '#ffd837',\n      0.5, '#fe862e',\n      0.75, '#fd3e48',\n      1, '#9a231f'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    // Groter = grotere radius = duidelijker waar het druk is\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 10,\n      10, 12,\n      12, 20,\n      15, 40,\n      20, 60,\n      30, 100,\n      40, 100\n    ],\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7, 1,\n      9, 0.8\n    ]\n  }\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-destinations-point',\n  'type': 'symbol',\n  'source': 'rentals-destinations',\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], ':', ['get', 'duration_bin']],\n    // 'icon-size': 0.4,\n    'icon-size': [\n      'interpolate',\n        ['linear'],\n        ['zoom'],\n        11,\n        0.4,\n        16,\n        1.0\n      ],\n    'icon-allow-overlap': true,\n  },\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-destinations-clusters',\n  'type': 'circle',\n  'source': 'rentals-destinations-clusters',\n  filter: ['has', 'point_count'],\n  paint: {\n    // Use step expressions (https://maplibre.org/maplibre-gl-js-docs/style-spec/#expressions-step)\n    // with three steps to implement three types of circles:\n    //   * Blue, 20px circles when point count is less than 100\n    //   * Yellow, 30px circles when point count is between 100 and 750\n    //   * Pink, 40px circles when point count is greater than or equal to 750\n    'circle-color': '#1FA024',\n    'circle-radius': [\n      'step',\n      ['get', 'point_count'],\n      20, 100,\n      30, 750,\n      40\n    ]\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-destinations-clusters-count',\n  'type': 'symbol',\n  'source': 'rentals-destinations-clusters',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': [\n      'step',\n      ['get', 'point_count'],\n      16, 100,\n      20, 750,\n      30\n    ]\n\n  },\n  paint: {\n    'text-color': '#fff',\n    // 'text-halo-color': '#fff',\n    // 'text-halo-width': 2\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-destinations-clusters-point',\n  'type': 'symbol',\n  'source': 'rentals-destinations',\n  filter: ['!', ['has', 'point_count']],\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], ':', ['get', 'duration_bin']],\n    'icon-size': 1,\n    'icon-allow-overlap': true,\n  },\n  'minzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-origins-heatmap-city-level',\n  'type': 'heatmap',\n  'source': 'rentals-origins',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0, 0.0001,\n      10, 1\n    ],\n\n    'heatmap-intensity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 0.0025,\n      5, 0.005,\n      7.5, 0.01,\n      10, 0.05,\n      12, 0.075,/* city level */\n      15, 0.1,\n      20, 1,\n    ],\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0, 'rgba(0, 0, 255, 0)',\n      0.25, '#ffd837',\n      0.5, '#fe862e',\n      0.75, '#fd3e48',\n      1, '#9a231f'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    // Groter = grotere radius = duidelijker waar het druk is\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 10,\n      10, 12,\n      12, 20,\n      15, 40,\n      20, 60,\n      30, 100,\n      40, 100\n    ],\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7, 1,\n      9, 0.8\n    ]\n  }\n}\n\nexport default layer;\n","const layer = {\n  'id': 'zones-geodata',\n  'type': 'fill',\n  'source': 'zones-geodata',\n  'paint': {\n    'fill-color': '#1010e0',\n    'fill-opacity': 0.6\n  },\n}\n// 'filter': ['==', '$type', 'MultiPolygon'],\n// 'minzoom': 1,\n\nexport default layer;","export const sources = {\n  'vehicles': {\n    'type': 'geojson',\n  },\n  'vehicles-clusters': {\n    'type': 'geojson',\n    'cluster': true,\n    'clusterRadius': 50 // Radius of each cluster when clustering points (defaults to 50)\n  },\n\n  'rentals-origins': {\n    'type': 'geojson',\n  },\n  'rentals-origins-clusters': {\n    'type': 'geojson',\n    'cluster': true,\n    'clusterRadius': 50 // Radius of each cluster when clustering points (defaults to 50)\n  },\n\n  'rentals-destinations': {\n    'type': 'geojson',\n  },\n  'rentals-destinations-clusters': {\n    'type': 'geojson',\n    'cluster': true,\n    'clusterRadius': 50 // Radius of each cluster when clustering points (defaults to 50)\n  },\n}\n","// const initialMarker = `<svg id=\"Pointer_Green_met_Aanbieder\" data-name=\"Pointer Green met Aanbieder\" xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=200\" viewBox=\"0 0 24 24\">\n//     <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\"/>\n//     <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n//         <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\"/>\n//         <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\"/>\n//     </g>\n//     <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#1f3ff0\"/>\n// </svg>\n// `;\n\n// const testMarker = `\n// <svg id=\"Pointer_Green_met_Aanbieder\" data-name=\"Pointer Green met Aanbieder\" xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"932\" viewBox=\"0 0 24 24\">\n//         <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\"/>\n//             <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n//                 <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\"/>\n//                 <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\"/>\n//             </g>\n//         <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#44ff33\"/>\n//         </svg>`;\n\n// const testMarker2 = `\n// <svg id=\"Pointer_Green_met_Aanbieder\" data-name=\"Pointer Green met Aanbieder\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"200\" height=\"200\">\n//     <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\"/>\n//     <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n//         <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\"/>\n//         <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\"/>\n//     </g>\n//     <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#1f3ff0\"/>\n// </svg>`;\n\n// const compare = `<svg xmlns=\"http://www.w3.org/1999/xhtml\" viewbox=\"0 0 24 24\" width=\"200\" height=\"200\">\n// <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\">\n// <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n//     <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\">\n//     <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\">\n// </circle></circle></g>\n// <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#1f3ff0\">\n// </circle></circle></svg>\n//\n// `\n\nconst initialMarker2 = `\n    <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\"></circle>\n    <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n        <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\"></circle>\n        <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\"></circle>\n    </g>\n    <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#1f3ff0\"></circle>\n`;\n\nasync function getVehicleMarkers(operatorColor) {\n    var gradients = ['#1FA024', '#48E248', '#FFD837', '#FD3E48'];\n    var markers = [];\n    for (const durationIndicationColor of gradients) {\n        var marker = await styleVehicleMarker(operatorColor,  durationIndicationColor);\n        markers.push(marker);\n    }\n    return markers;\n}\n\nasync function styleVehicleMarker(operatorColor, durationIndicationColor) {\n    var xmlns = \"http://www.w3.org/2000/svg\";\n    var svgElement = document.createElementNS(xmlns, \"svg\");\n    svgElement.innerHTML = initialMarker2;\n    var svg = svgElement;\n    var width = {};\n    var height = {};\n \n    // console.log(svg.firstChild.tagName);\n    svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n    var test = svg.getElementById(\"Ellipse_192\");\n    test.setAttribute(\"fill\", operatorColor);\n\n    test = svg.getElementById(\"Ellipse_129\");\n    test.setAttribute(\"fill\", durationIndicationColor);\n\n    test = svg.getElementById(\"Ellipse_130\");\n    test.setAttribute(\"fill\", durationIndicationColor);\n\n    // svg = svg.querySelector('svg');\n    width.value = 25;\n    height.value = 25;\n    \n    var canvas = document.createElement('canvas');\n    svg.setAttribute('width', width.value);\n    svg.setAttribute('height', height.value);\n    canvas.width = width.value;\n    canvas.height = height.value;\n    var data = new XMLSerializer().serializeToString(svg);\n    var win = window.URL || window.webkitURL || window;\n    var img = new Image();\n    var blob = new Blob([data], { type: 'image/svg+xml' });\n\n    var url = win.createObjectURL(blob);\n    img.src = url;\n    await img.decode();\n    var context = canvas.getContext('2d');\n    context.drawImage(img, 0, 0);\n    win.revokeObjectURL(url);\n \n    return new Uint8Array(context.getImageData(0, 0, img.width, img.height).data.buffer);\n}\n\nexport default getVehicleMarkers;\n","import { useRef, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport maplibregl from 'maplibre-gl';\nimport moment from 'moment';\n// import 'moment/min/moment-with-locales'\nimport localization from 'moment/locale/nl'\n\nimport './MapComponent.css';\n\nimport {getProviderColor} from '../../helpers/providers.js';\n\nimport {layers} from './layers';\nimport {sources} from './sources.js';\nimport getVehicleMarkers from './../Map/vehicle_marker.js';\n\nconst md5 = require('md5');\n\n// Set language for momentJS\nmoment.locale('nl', localization);\n\nconst providerWebsiteUrls = {\n  'check': 'https://ridecheck.app/',\n  'felyx': 'https://felyx.com/',\n  'gosharing': 'https://go-sharing.com/',\n  'baqme': 'https://www.baqme.com/',\n  'donkey': 'https://www.donkey.bike/'\n}\n\nconst initPopupLogic = (currentMap, providers, isLoggedIn) => {\n  // Docs: https://maplibre.org/maplibre-gl-js-docs/example/popup-on-click/\n  const layerNamesToApplyPopupLogicTo = [\n    'vehicles-point',\n    'vehicles-clusters-point',\n    'rentals-origins-point',\n    'rentals-origins-clusters-point',\n    'rentals-destinations-point',\n    'rentals-destinations-clusters-point',\n  ];\n\n  layerNamesToApplyPopupLogicTo.forEach((layerName) => {\n    // When a click event occurs on a feature in the places layer, open a popup at the\n    // location of the feature, with description HTML from its properties.\n    currentMap.on('click', layerName, function (e) {\n      const vehicleProperties = e.features[0].properties;\n      const providerColor = getProviderColor(providers, vehicleProperties.system_id)\n\n      var coordinates = e.features[0].geometry.coordinates.slice();\n      // var description = e.features[0].properties.description;\n       \n      // Ensure that if the map is zoomed out such that multiple\n      // copies of the feature are visible, the popup appears\n      // over the copy being pointed to.\n      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n      }\n\n      new maplibregl.Popup()\n        .setLngLat(coordinates)\n        .setHTML(`\n          <h1 class=\"mb-2\">\n            <span\n              class=\"rounded-full inline-block w-4 h-4\"\n              style=\"background-color: ${providerColor};position: relative;top: 2px\">\n            </span>\n            <span class=\"Map-popup-title ml-1\" style=\"color: ${providerColor};\">\n              ${vehicleProperties.system_id}\n            </span>\n          </h1>\n          <div class=\"Map-popup-body\">\n            ${vehicleProperties.in_public_space_since ? `<div>\n              Staat hier sinds ${moment(vehicleProperties.in_public_space_since).locale('nl').fromNow()}<br />\n              Geparkeerd sinds: ${moment(vehicleProperties.in_public_space_since).format('DD-MM-YYYY HH:mm')}\n            </div>` : ''}\n\n            ${providerWebsiteUrls && providerWebsiteUrls[vehicleProperties.system_id] ? `<div class=\"mt-2\">\n              <a href=\"${providerWebsiteUrls[vehicleProperties.system_id]}\" rel=\"external\" target=\"_blank\" class=\"inline-block py-1 px-2 text-white rounded-md hover:opacity-80\" style=\"background-color: ${providerColor};\">\n                website\n              </a>\n            </div>` : ''}\n          </div>\n        `)\n        .addTo(currentMap);\n    });\n    // Change the cursor to a pointer when the mouse is over the places layer.\n    currentMap.on('mouseenter', layerName, function () {\n      currentMap.getCanvas().style.cursor = 'pointer';\n    });\n     \n    // Change it back to a pointer when it leaves.\n    currentMap.on('mouseleave', layerName, function () {\n      currentMap.getCanvas().style.cursor = '';\n    });\n  })\n   \n}\n\nfunction MapComponent(props) {\n  const dispatch = useDispatch()\n  // console.log('Map component')\n\n  // Get vehicles from store\n  const vehicles = useSelector(state => {\n    return state.vehicles || null;\n  });\n\n  const rentals = useSelector(state => {\n    return state.rentals || null;\n  });\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n\n  // Get extent (map boundaries) from store\n  const extent = useSelector(state => {\n    return state.layers ? state.layers.extent : null;\n  }) || [];\n\n  const providers = useSelector(state => {\n    return (state.metadata && state.metadata.aanbieders) ? state.metadata.aanbieders : [];\n  });\n\n  const zones_geodata = useSelector(state => {\n    if(!state||!state.zones_geodata) {\n      return null;\n    }\n\n    return state.zones_geodata;\n  });\n  \n  const mapContainer = props.mapContainer;\n  const [lng] = useState(4.4671854);\n  const [lat] = useState(51.9250836);\n  const [zoom] = useState(15);\n  const [counter, setCounter] = useState(0);\n  const [zonesGeodataHash, setZonesGeodataHash] = useState(\"\");\n  const [sourceHash, setSourceHash] = useState([]);\n  let map = useRef(null);\n\n  // Init MapLibre map\n  // Docs: https://maptiler.zendesk.com/hc/en-us/articles/4405444890897-Display-MapLibre-GL-JS-map-using-React-JS\n  useEffect(() => {\n    const initMap = () => {\n      const style = 'mapbox://styles/nine3030/ckv9ni7rj0xwq15qsekqwnlz5';//TODO: Move to CROW\n      // const style = 'mapbox://styles/mapbox/streets-v11';\n      if (map.current) return;\n      \n      map.current = new maplibregl.Map({\n        container: mapContainer.current,\n        style,\n        accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n        center: [lng, lat],\n        zoom: zoom,\n        maxZoom: 19,\n        attributionControl: false// Hide info icon\n      });\n\n      // Add controls\n      map.current.addControl(new maplibregl.NavigationControl({\n        showCompass: false\n      }), 'bottom-right');\n\n      // Add 'current location' button\n      map.current.addControl(\n        new maplibregl.GeolocateControl({\n          positionOptions: {\n            enableHighAccuracy: true\n          },\n          trackUserLocation: true\n      }), 'bottom-right');\n  \n      // Do a state update if map is loaded\n      map.current.on('load', function() {\n        setCounter(counter + 1)\n        window.ddMap = map.current;\n      });\n      \n      const registerMapView = (currentmap) => {\n        const bounds = currentmap.getBounds();\n        const payload = [\n          bounds._sw.lng,\n          bounds._sw.lat,\n          bounds._ne.lng,\n          bounds._ne.lat\n        ]\n        \n        dispatch({ type: 'LAYER_SET_MAP_EXTENT', payload: payload })\n      }\n      \n      map.current.on('moveend', function() {\n        registerMapView(map.current);\n      })\n      \n      map.current.on('zoomend', function() {\n        registerMapView(map.current);\n      })\n      \n      // Disable rotating\n      map.current.dragRotate.disable();\n      map.current.touchZoomRotate.disableRotation();\n    }\n    initMap();\n  }, [vehicles, zones_geodata, lng, lat, zoom, counter, mapContainer, dispatch])\n\n  const addOrUpdateSource = (sourceName, sourceData) => {\n\n    // If map is not loaded: refresh state after .25 seconds\n    if (! map.current || ! map.current.isStyleLoaded()) {\n      setTimeout(() => {\n        setCounter(counter + 1)\n      }, 250)\n      return;\n    }\n\n    // If no source data is given -> stop\n    if (! sourceData) {\n      return;\n    }\n\n    // Check if source exists\n    const doesSourceExist = map.current.getSource(sourceName);\n    // Get md5 hash of the data\n    let hash = sourceData && sourceData.features ? md5(JSON.stringify(sourceData.features)) : md5('No data yet');\n    // If source does exist: update data\n    if(doesSourceExist) {\n      if(! sourceHash || sourceHash[sourceName] !== hash) {\n        // Set hash\n        let newSourceHashArray = sourceHash;\n        newSourceHashArray[sourceName] = hash;\n        setSourceHash(newSourceHashArray);\n        // Update data\n        map.current.getSource(sourceName).setData(sourceData);\n      }\n    }\n\n    // If source does not exist: add source\n    else {\n      if(sourceData) {\n        // Set hash\n        let newSourceHashArray = sourceHash;\n        newSourceHashArray[sourceName] = hash;\n        setSourceHash(newSourceHashArray);\n\n        // Set data\n        let source = Object.assign({}, {\n          'type': 'geojson',\n          'data': sourceData,\n        }, sources[sourceName] ? sources[sourceName] : {});\n        map.current.addSource(sourceName, source);\n      }\n    }\n  }\n\n  useEffect(() => {\n    // Add zones\n    if(zones_geodata && zones_geodata.data) {\n      addOrUpdateSource('zones-geodata', zones_geodata.data);\n    }\n\n    // Add park events\n    if(vehicles && vehicles.data) {\n      addOrUpdateSource('vehicles', vehicles.data);\n      addOrUpdateSource('vehicles-clusters', vehicles.data);\n    }\n\n    // Add rentals\n    if(rentals.origins && rentals.origins.type) {\n      addOrUpdateSource('rentals-origins', rentals.origins);\n      addOrUpdateSource('rentals-origins-clusters', rentals.origins);\n    }\n    if(rentals.destinations && rentals.destinations.type) {\n      addOrUpdateSource('rentals-destinations', rentals.destinations);\n      addOrUpdateSource('rentals-destinations-clusters', rentals.destinations);\n    }\n\n    // eslint-disable-next-line\n  }, [\n    // eslint-disable-next-line\n    vehicles ? (vehicles.data ? vehicles.data.features : vehicles.data) : vehicles,\n    rentals.origins ? rentals.origins.features : rentals.origins,\n    rentals.destinations,\n    zones_geodata,\n    zonesGeodataHash,\n    counter,\n    props.activeSource\n  ])\n\n  // If area selection (place/zone) changes, navigate to area\n  useEffect(() => {\n    if(! map.current) return;\n    if(! extent || extent.length === 0) {\n      return;\n    }\n    \n    map.current.fitBounds(extent);\n    \n    // reset extent action\n    dispatch({ type: 'LAYER_SET_ZONES_EXTENT', payload: [] });\n  }, [ extent, dispatch ])\n\n  // Add layers\n  useEffect(() => {\n    const addLayers = () => {\n      if (! map.current || ! map.current.isStyleLoaded()) {\n        setTimeout(() => {\n          setCounter(counter + 1)\n        }, 250)\n        return;\n      }\n\n      // Remove 'old' layers\n      const allLayers = map.current.getStyle().layers;\n      allLayers.forEach(x => {\n        // Check if this is one of our layers\n        if(x.id.indexOf('vehicles-') > -1) {\n          // If so, remove\n          map.current.removeLayer(x.id)\n        }\n        if(x.id.indexOf('rentals-') > -1) {\n          // If so, remove\n          map.current.removeLayer(x.id)\n        }\n        if(x.id.indexOf('zones-geodata') > -1) {\n          // If so, remove\n          map.current.removeLayer(x.id)\n          setZonesGeodataHash(\"\");\n        }\n      })\n      // Add selected layers to the map\n      props.layers.forEach(x => {\n        if(props.layers.indexOf(x) >= -1) {\n          const doesLayerExist = map.current.getLayer(x);\n          const doesRelatedSourceExist = map.current.getSource(layers[x].source);\n          if(! doesLayerExist && doesRelatedSourceExist) {\n            map.current.addLayer(layers[x]);\n          }\n        }\n      })\n    }\n    addLayers();\n  }, [vehicles, rentals.origins, rentals.destinations, zones_geodata, counter, props.layers, isLoggedIn, providers]);\n\n  useEffect(() => {\n    if(! map.current) return;\n    if(! providers) return;\n    initPopupLogic(map.current, providers, isLoggedIn)\n  }, [map.current, providers])\n\n  useEffect(() => {\n    var addProviderImage = async(aanbieder) => {\n      if (map.current.hasImage(aanbieder.system_id + ':0')) {\n        // console.log(\"image already exists\");\n        return;\n      }\n      var value = await getVehicleMarkers(aanbieder.color);\n      value.forEach((img, idx) => {\n        map.current.addImage(aanbieder.system_id + \":\" + idx, { width: 25, height: 25, data: img});\n      });\n    };\n    providers.forEach(aanbieder => {\n      addProviderImage(aanbieder);\n    });\n  }, [providers]);\n\n  return null;\n}\n\nexport {\n  MapComponent\n};\n","import React, {\n  useRef,\n  // useState\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport './SlideBox.css';\n\nfunction SlideBox(props) {\n  const dispatch = useDispatch();\n  const containerRef = useRef(null);\n  const NAME = props.name.toUpperCase();\n\n  const isVisible = useSelector(state => {\n    return state.ui ? state.ui[NAME] : false;\n  });\n\n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  // Show/hide slidebox on toggle click\n  const toggleSlideBox = () => {\n    // If filterbar was visible, hide extended filterbar\n    if(isVisible) {\n      setVisibility('FILTERBAR_EXTENDED', false);\n    }\n    // Now toggle slidebox\n    setVisibility(NAME, ! isVisible)\n  };\n\n  const {backgroundColor} = props.options || {};\n\n  return <div className={`\n      SlideBox\n      direction-${props.direction}\n      relative\n      ${isVisible ? '' : 'is-hidden'}\n      z-10\n    `} ref={containerRef} style={props.style || {}}>\n    <div className=\"\n      SlideBox-inner\n      h-full\n    \" style={{backgroundColor: backgroundColor}}>\n      {props.children}\n    </div>\n    <div\n      className=\"SlideBox-toggle-wrapper z-10 overflow-hidden\"\n      >\n      <div\n        className=\"SlideBox-toggle\"\n        onClick={() => toggleSlideBox()}\n        style={{backgroundColor: backgroundColor}}\n        >\n        <span>\n          {props.options.title || 'Lagen'}\n        </span>\n      </div>\n    </div>\n  </div>\n}\n\nexport default SlideBox;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport SlideBox from '../SlideBox/SlideBox.jsx';\n\nimport './SelectLayer.css';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER,\n  DISPLAYMODE_PARKEERDATA_HEATMAP,\n  DISPLAYMODE_PARKEERDATA_CLUSTERS,\n  DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  DISPLAYMODE_VERHUURDATA_HEATMAP,\n  DISPLAYMODE_VERHUURDATA_CLUSTERS,\n  DISPLAYMODE_VERHUURDATA_VOERTUIGEN\n} from '../../reducers/layers.js';\n\nfunction SelectLayer(props) {\n  // const {setLayers, setActiveSource} = props;\n  const dispatch = useDispatch()\n  \n  const showZoneOnOff = useSelector(state => {\n    return state.filter ? state.filter.gebied!=='' : false;\n  });\n\n  const zonesVisible = useSelector(state => {\n    return state.layers ? state.layers.zones_visible : false;\n  });\n  \n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  const viewPark = useSelector(state => {\n    return state.layers ? state.layers.view_park : DISPLAYMODE_PARKEERDATA_VOERTUIGEN;\n  });\n\n  const viewRentals = useSelector(state => {\n    return state.layers ? state.layers.view_rentals : DISPLAYMODE_VERHUURDATA_VOERTUIGEN;\n  });\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  if(displayMode===DISPLAYMODE_OTHER||\n     (displayMode===DISPLAYMODE_RENTALS && showZoneOnOff===false)) {\n       return null; // no layer selection\n  }\n  \n  return (\n    <SlideBox name=\"SelectLayer\" direction=\"right\" options={{\n      title: 'Lagen',\n      backgroundColor: '#fff',\n    }} style={{\n      position: 'absolute',\n      top: '8px',\n      right: 0\n    }}>\n      <div className=\"SelectLayer pr-1\">\n        { displayMode===DISPLAYMODE_PARK ?\n            <div data-type=\"heat-map\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_HEATMAP ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_HEATMAP }) }}>\n              <span className=\"layer-title\">\n                Heat map\n              </span>\n            </div>: null }\n\n        { displayMode===DISPLAYMODE_PARK ?\n            <div data-type=\"pointers\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_CLUSTERS ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_CLUSTERS }) }}>\n              <span className=\"layer-title\">\n                Clusters\n              </span>\n            </div> : null }\n\n        { displayMode===DISPLAYMODE_PARK ?\n          <div data-type=\"vehicles\"  className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_VOERTUIGEN }) }}>\n            <span className=\"layer-title\">\n              Voertuigen\n            </span>\n          </div> : null }\n\n        { displayMode===DISPLAYMODE_RENTALS ?\n            <div data-type=\"heat-map\" className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_HEATMAP ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_HEATMAP }) }}>\n              <span className=\"layer-title\">\n                Heat map\n              </span>\n            </div>: null }\n\n        { displayMode===DISPLAYMODE_RENTALS ?\n            <div data-type=\"pointers\" className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_CLUSTERS ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_CLUSTERS }) }}>\n              <span className=\"layer-title\">\n                Clusters\n              </span>\n            </div> : null }\n\n        { displayMode===DISPLAYMODE_RENTALS ?\n          <div data-type=\"vehicles\"  className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_VOERTUIGEN }) }}>\n            <span className=\"layer-title\">\n              Voertuigen\n            </span>\n          </div> : null }\n\n        { isLoggedIn && showZoneOnOff ?\n          <div data-type=\"zones\" className={`layer${!zonesVisible ? ' layer-inactive':''}`} onClick={() => {\n              dispatch({ type: 'LAYER_TOGGLE_ZONES_VISIBLE', payload: null })\n          }}>\n            <span className=\"layer-title\">\n              Zones\n            </span>\n          </div> : null\n        }\n      </div>\n    </SlideBox>\n  )\n}\n\nexport {\n  SelectLayer\n}","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport {MapComponent} from '../components/Map/MapComponent.jsx';\nimport {SelectLayer} from '../components/SelectLayer/SelectLayer.jsx';\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_PARKEERDATA_HEATMAP,\n  DISPLAYMODE_PARKEERDATA_CLUSTERS,\n  DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  DISPLAYMODE_VERHUURDATA_HEATMAP,\n  DISPLAYMODE_VERHUURDATA_CLUSTERS,\n  DISPLAYMODE_VERHUURDATA_VOERTUIGEN,\n} from '../reducers/layers.js';\n\nimport './MapPage.css';\n\nfunction Map({mode, mapContainer}) {\n  const showZones = useSelector(state => {\n    return state.layers ? state.layers.zones_visible : false;\n  });\n\n  const filter = useSelector(state => {\n    return state.filter;\n  });\n\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  const viewPark = useSelector(state => {\n    return state.layers ? state.layers.view_park : DISPLAYMODE_PARKEERDATA_VOERTUIGEN;\n  });\n\n  const viewRentals = useSelector(state => {\n    return state.layers ? state.layers.view_rentals : DISPLAYMODE_VERHUURDATA_VOERTUIGEN;\n  });\n  \n  let layers = [];\n  if(showZones) { layers.push('zones-geodata') }\n  \n  let activeSource = '';\n  // console.log(\"Mappage got displaymode\", displayMode);\n  \n  if(displayMode===DISPLAYMODE_PARK) {\n    switch(viewPark) {\n      case DISPLAYMODE_PARKEERDATA_HEATMAP:\n        layers.push('vehicles-heatmap-city-level');\n        activeSource = 'vehicles';\n        break;\n      case DISPLAYMODE_PARKEERDATA_CLUSTERS:\n        layers.push('vehicles-clusters');\n        layers.push('vehicles-clusters-count');\n        layers.push('vehicles-clusters-point');\n        activeSource = 'vehicles-clusters';\n        break;\n      case DISPLAYMODE_PARKEERDATA_VOERTUIGEN:\n        layers.push('vehicles-point');\n        activeSource = 'vehicles';\n        break;\n      default:\n    }\n  } else if(displayMode===DISPLAYMODE_RENTALS) {\n    const rentalsKey = (filter.herkomstbestemming === 'bestemming' ? 'destinations' : 'origins');\n    switch(viewRentals) {\n      case DISPLAYMODE_VERHUURDATA_HEATMAP:\n        layers.push(`rentals-${rentalsKey}-heatmap-city-level`);\n        activeSource = `rentals-${rentalsKey}`;\n        break;\n      case DISPLAYMODE_VERHUURDATA_CLUSTERS:\n        layers.push(`rentals-${rentalsKey}-clusters`);\n        layers.push(`rentals-${rentalsKey}-clusters-count`);\n        layers.push(`rentals-${rentalsKey}-clusters-point`);\n        activeSource = `rentals-${rentalsKey}-clusters`;\n        break;\n      case DISPLAYMODE_VERHUURDATA_VOERTUIGEN:\n        layers.push(`rentals-${rentalsKey}-point`);\n        activeSource = `rentals-${rentalsKey}`;\n        break;\n      default:\n    }\n  }\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"hidden sm:block\">\n        <SelectLayer />\n      </div>\n      <div className=\"flex-1 bg-red-400\">\n        <MapComponent\n          mapContainer={mapContainer}\n          layers={layers}\n          activeSource={activeSource}\n        />\n      </div>\n  </div>);\n}\n\nexport default Map;\n","import './ContentPage.css'\nimport { useSelector } from 'react-redux';\n\nexport default function ContentPage(props) {\n  const isFilterBarVisible = useSelector(state => {\n    return state.ui ? state.ui.FILTERBAR : false;\n  });\n\n  return (\n    <div\n      className={`ContentPage h-full pb-20 ${isFilterBarVisible ? '' : 'full-page'}`}\n      style={{\n        overflowY: 'auto',\n      }}\n    >\n      <div className=\"ContentPage-inner py-8 pl-12\">\n        {props.children}\n      </div>\n    </div>\n  );\n}\n","import moment from 'moment';\nimport {\n    DISPLAYMODE_PARK,\n    DISPLAYMODE_RENTALS,\n    DISPLAYMODE_OTHER,\n  } from '../reducers/layers.js';\n\n\nexport const createFilterparameters = (displayMode, filter, metadata) => {\n  const isParkingData=displayMode===DISPLAYMODE_PARK;\n  const isRentalData=displayMode===DISPLAYMODE_RENTALS;\n  const isOntwikkelingData=displayMode===DISPLAYMODE_OTHER;\n\n  // add zones\n  let filterparams = [];\n  if(filter.zones!==\"\") {\n    filterparams.push(\"zone_ids=\"+filter.zones);\n  } else if(filter.gebied!==\"\") {\n    // create zone filter\n    let candidates = [];\n    let municipality = metadata.gebieden.find(gebied=>gebied.gm_code===filter.gebied);\n    if(undefined!==municipality) {\n      candidates = metadata.zones.filter(zone => {\n        return zone.municipality===municipality.gm_code&&zone.name===municipality.name\n      });\n    } else {\n    }\n    if(candidates.length===1) {\n      filterparams.push(\"zone_ids=\"+candidates[0].zone_id);\n    } else {\n      console.error(\"zero or multiple multiple zones found for a single municipality (%s)\", filter.gebied, candidates);\n    }\n  }\n\n  // Add provider filter\n  if(filter.aanbiedersexclude!==\"\" && filter.aanbiedersexclude!==undefined) {\n    let filteritems = filter.aanbiedersexclude.split(\",\");\n    let selectedaanbieders = metadata.aanbieders\n      .filter(aanbieder=>(filteritems.includes(aanbieder.system_id)===false))\n      .map(aanbieder=>aanbieder.system_id).join(\",\");\n\n    filterparams.push(\"operators=\" + selectedaanbieders);\n  } else if (metadata.aanbieders.length===1) {\n    filterparams.push(\"operators=\" + metadata.aanbieders[0].system_id);\n  }\n  \n  // Add vehicle type filter\n  // form_factors=[cargo_bicycle,moped,bicycle,car,other]\n  if(filter.voertuigtypesexclude!=='' && filter.voertuigtypesexclude!==undefined) {\n    let filteritems = filter.voertuigtypesexclude.split(\",\");\n    let selectedtypes = metadata.vehicle_types\n      .filter(vtype=>(filteritems.includes(vtype.id)===false))\n      .map(vtype=>vtype.id).join(\",\");\n\n    filterparams.push(\"form_factors=\" + selectedtypes);\n  }\n  \n  // Add date (start and/or end)\n  if(isParkingData) {\n    let ts = new Date().toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    if(filter.datum!==\"\") {\n      ts = new Date(filter.datum).toISOString().replace(/.\\d+Z$/g, \"Z\");\n    }\n    filterparams.push(\"timestamp=\"+ts)\n  }\n  \n  if(isRentalData) {\n    let ts1 = new Date().toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    let ts2 = ts1;\n    filter.intervalstart = moment().subtract(filter.intervalduur / 1000, 'seconds').toISOString();\n    filter.intervalend = moment().toISOString();\n    const isInvalid = () => {\n      return ! filter\n          || filter.intervalstart === \"\"\n          || filter.intervalend === \"\"\n          || filter.intervalstart === undefined\n          || filter.intervalend === undefined;\n    }\n    if(! isInvalid()) {\n      ts1 = new Date(filter.intervalstart).toISOString().replace(/.\\d+Z$/g, \"Z\");\n      ts2 = new Date(filter.intervalend).toISOString().replace(/.\\d+Z$/g, \"Z\");\n    }\n    filterparams.push(\"start_time=\" + ts1 + \"&end_time=\" + ts2)\n  }\n  \n  if(isOntwikkelingData) {\n    let van = undefined;\n    let tot = undefined;\n    if(filter.ontwikkelingvan && filter.ontwikkelingtot) {\n      van = new Date(filter.ontwikkelingvan);\n      tot = new Date(filter.ontwikkelingtot);\n    }\n    \n    if(!van||!tot) {\n      van = new Date();\n      // take now, strip hours, add 24 h\n      tot = new Date((new Date()).toDateString()) ;\n      van.setDate(tot.getDate()-7); // go back 1 week\n    }\n    \n    let ts1 = van.toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    let ts2 = tot.toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    filterparams.push(\"start_time=\" + ts1 + \"&end_time=\" + ts2)\n  }\n  \n  return filterparams;\n}\n\nexport const isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nexport const convertDurationToBin = (duration) => {\n  if (duration <= 60) {\n    return 0;\n  }\n  if (duration <= 24 * 60) {\n    return 1;\n  }\n  if (duration <= 24 * 60 * 4) {\n    return 2;\n  }\n  return 3;\n}\n\n","import { createFilterparameters } from '../poll-api/pollTools.js';\nimport { DISPLAYMODE_OTHER } from '../reducers/layers.js';\n\nexport const getAggregatedStats = async (token, key, options) => {\n  // Example URL: `https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/${key}?start_time=${options.startTime}&end_time=${options.endTime}&operators=${options.operators}&zone_ids=${options.zoneIds}&aggregation_level=${options.aggregationLevel}`;\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/${key}?aggregation_level=${options.aggregationLevel}`;\n\n  let filterParams = createFilterparameters(DISPLAYMODE_OTHER, options.filter, options.metadata);\n  if(filterParams.length>0) url += \"&\" + filterParams.join(\"&\");\n  console.log('url', url)\n\n  let fetchOptions = {\n    headers: {\n      \"authorization\": `Bearer ${token}`\n    }\n  }\n  \n  const response = await fetch(url, fetchOptions);\n  const responseJson = await response.json();\n\n  return responseJson;\n}\n\n\nexport const getAggregatedParkingDuration = async (token, key, options) => {\n  // Example URL: `https://api.deelfietsdashboard.nl/dashboard-api/stats/available_bikes?start_time=2021-12-27T14:00:00Z&end_time=2022-01-10T14:00:00Z&operators=deelfietsnederland`;\n  // let url = `https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/${key}?aggregation_level=${options.aggregationLevel}`;\n\n  // let filterParams = createFilterparameters(DISPLAYMODE_OTHER, options.filter, options.metadata);\n  // if(filterParams.length>0) url += \"&\" + filterParams.join(\"&\");\n  // console.log('url', url)\n\n  // let fetchOptions = {\n  //   headers: {\n  //     \"authorization\": `Bearer ${token}`\n  //   }\n  // }\n  \n  // const response = await fetch(url, fetchOptions);\n  // const responseJson = await response.json();\n\n  // return responseJson;\n}\n\n","import moment from 'moment';\n\nconst prepareAggregatedStatsData = (key, data, aggregationLevel) => {\n  if(! data || ! data[`${key}_aggregated_stats`] || ! data[`${key}_aggregated_stats`].values) {\n    return [];\n  }\n  const getDateFormat = (aggregationLevel) => {\n    if(aggregationLevel === 'day') {\n      return 'DD MMM YYYY';\n    }\n    else if(aggregationLevel === 'week') {\n      return '[w]W, YYYY';\n    }\n    else if(aggregationLevel === 'month') {\n      return 'MMM YYYY';\n    }\n  }\n  return data[`${key}_aggregated_stats`].values.map(x => {\n    const { start_interval, ...rest } = x;\n    return {...rest, ...{ name: moment(start_interval).format(getDateFormat(aggregationLevel)) }}// https://dmitripavlutin.com/remove-object-property-javascript/#2-object-destructuring-with-rest-syntax\n  });\n}\n\nexport {\n  prepareAggregatedStatsData\n}\n","import {PureComponent } from 'react';\n\nclass CustomizedXAxisTick extends PureComponent {\n  render() {\n    const { x, y, payload } = this.props;\n\n    return (\n      <g transform={`translate(${x},${y})`}>\n        <text x={0} y={0} dy={16} textAnchor=\"middle\" fill=\"#666\" transform=\"rotate(0)\" fontSize=\"0.8em\">\n          {payload.value}\n        </text>\n      </g>\n    );\n  }\n}\n\nclass CustomizedYAxisTick extends PureComponent {\n  render() {\n    const { x, y, payload } = this.props;\n\n    return (\n      <g transform={`translate(${x},${y})`}>\n        <text x={-4} y={0} dy={3} textAnchor=\"end\" fill=\"#666\" transform=\"rotate(0)\" fontSize=\"0.8em\">\n          {payload.value}\n        </text>\n      </g>\n    );\n  }\n}\n\nexport {\n  CustomizedXAxisTick,\n  CustomizedYAxisTick\n}\n","import {PureComponent } from 'react';\n\nimport './CustomizedTooltip.css';\n\nconst CustomizedTooltip = ({ active, payload, label }) => {\n  if (active && payload && payload.length) {\n\n    const arrayReverseObj = obj => Object.keys(obj).sort().reverse().map(key=> ({ ...obj[key], key }) );\n\n    const sumValue = () => {\n      let res = 0;\n      payload.map(x => {\n        res += x.value;\n      })\n      return res;\n    }\n\n    return (\n      <div className=\"CustomizedTooltip\">\n        <div className=\"my-0\">\n          <b>{`${label}`}</b>\n        </div>\n        <ul className=\"my-0 py-0\">\n          {arrayReverseObj(payload).map(x => {\n            return <li style={{color: x.fill}}>\n              {x.name}: {x.value}\n            </li>\n          })}\n        </ul>\n        <div className=\"my-0\">\n          Totaal: {sumValue()}<br />\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport {\n  CustomizedTooltip\n}\n","import React, {useEffect, useState } from 'react';\n\nimport {\n  // useDispatch,\n  useSelector\n} from 'react-redux';\n\n// import moment from 'moment';\n\nimport {\n  AreaChart,\n  LineChart,\n  Area,\n  BarChart,\n  Bar,\n  Line,\n  XAxis,\n  Legend,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\n\nimport {getAggregatedStats} from '../../api/aggregatedStats';\nimport {\n  getProviderColor,\n  getUniqueProviderNames\n} from '../../helpers/providers.js';\nimport {prepareAggregatedStatsData} from '../../helpers/stats.js';\n\nimport {CustomizedXAxisTick, CustomizedYAxisTick} from '../Chart/CustomizedAxisTick.jsx';\nimport {CustomizedTooltip} from '../Chart/CustomizedTooltip.jsx';\n\nfunction VerhuringenChart(props) {\n  // const dispatch = useDispatch()\n\n  const token = useSelector(state => state.authentication.user_data.token)\n  const filter = useSelector(state => state.filter)\n  const metadata = useSelector(state => state.metadata)\n\n  const [rentalsData, setRentalsData] = useState([])\n\n  useEffect(() => {\n    // Do not reload chart until you have 'zones'\n    if(! metadata || ! metadata.zones || metadata.zones.length <= 0) return;\n    async function fetchData() {\n      const rentals = await getAggregatedStats(token, 'rentals', {\n        filter: filter,\n        metadata: metadata,\n        aggregationLevel: filter.ontwikkelingaggregatie\n      });\n      setRentalsData(prepareAggregatedStatsData('rentals', rentals, filter.ontwikkelingaggregatie));\n    }\n    fetchData();\n  }, [filter, filter.ontwikkelingaggregatie, metadata, token]);\n  \n  const numberOfPointsOnXAxis = rentalsData ? Object.keys(rentalsData).length : 0;\n  console.log('numberOfPointsOnXAxis', numberOfPointsOnXAxis)\n\n  const renderChart = () => {\n    if(numberOfPointsOnXAxis > 12) {\n      return <AreaChart\n        data={rentalsData}\n        margin={{\n          top: 10,\n          right: 30,\n          left: 0,\n          bottom: 0,\n        }}\n      >\n        <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n        <XAxis dataKey=\"name\" tick={<CustomizedXAxisTick />} />\n        <YAxis tick={<CustomizedYAxisTick />} />\n        <Tooltip content={<CustomizedTooltip />} />\n        <Legend />} />\n        {getUniqueProviderNames(rentalsData[0]).map(x => {\n          const providerColor = getProviderColor(metadata.aanbieders, x)\n          return (\n            <Area\n              key={x}\n              stackId=\"1\"\n              type=\"monotone\"\n              dataKey={x}\n              stroke={providerColor}\n              fill={providerColor}\n              isAnimationActive={false}\n            />\n          )\n        })}\n      </AreaChart>\n    }\n\n    return <BarChart\n      data={rentalsData}\n      margin={{\n        top: 10,\n        right: 30,\n        left: 0,\n        bottom: 0,\n      }}\n    >\n      <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n      <XAxis dataKey=\"name\" tick={<CustomizedXAxisTick />} />\n      <YAxis tick={<CustomizedYAxisTick />} />\n      <Tooltip content={<CustomizedTooltip />} />\n      <Legend />} />\n      {getUniqueProviderNames(rentalsData[0]).map(x => {\n        const providerColor = getProviderColor(metadata.aanbieders, x)\n        return (\n          <Bar\n            key={x}\n            stackId=\"1\"\n            type=\"monotone\"\n            dataKey={x}\n            stroke={providerColor}\n            fill={providerColor}\n            isAnimationActive={false}\n          />\n        )\n      })}\n    </BarChart>\n  }\n\n  return (\n    <div style={{ width: '100%', height: '400px', overflowX: 'hidden', overflowY: 'hidden' }}>\n      <ResponsiveContainer>\n        {renderChart()}\n      </ResponsiveContainer>\n    </div>\n  )\n}\n\nexport default VerhuringenChart;\n","import React, {useEffect, useState } from 'react';\n\nimport {\n  // useDispatch,\n  useSelector\n} from 'react-redux';\n\n// import moment from 'moment';\n\nimport {\n  AreaChart,\n  LineChart,\n  Area,\n  BarChart,\n  Bar,\n  Line,\n  XAxis,\n  Legend,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\n\nimport {getAggregatedStats} from '../../api/aggregatedStats';\nimport {\n  getProviderColor,\n  getUniqueProviderNames\n} from '../../helpers/providers.js';\nimport {prepareAggregatedStatsData} from '../../helpers/stats.js';\n\nimport {CustomizedXAxisTick, CustomizedYAxisTick} from '../Chart/CustomizedAxisTick.jsx';\nimport {CustomizedTooltip} from '../Chart/CustomizedTooltip.jsx';\n\nfunction BeschikbareVoertuigenChart(props) {\n  // const dispatch = useDispatch()\n\n  const token = useSelector(state => state.authentication.user_data.token)\n  const filter = useSelector(state => state.filter)\n  const metadata = useSelector(state => state.metadata)\n\n  const [vehiclesData, setVehiclesData] = useState([])\n\n  useEffect(() => {\n    // Do not reload chart until you have 'zones'\n    if(! metadata || ! metadata.zones || metadata.zones.length <= 0) return;\n    async function fetchData() {\n      const availableVehicles = await getAggregatedStats(token, 'available_vehicles', {\n        filter: filter,\n        metadata: metadata,\n        aggregationLevel: filter.ontwikkelingaggregatie\n      });\n      setVehiclesData(prepareAggregatedStatsData('available_vehicles', availableVehicles, filter.ontwikkelingaggregatie));\n    }\n    fetchData();\n  }, [filter, filter.ontwikkelingaggregatie, metadata, token]);\n  \n  const numberOfPointsOnXAxis = vehiclesData ? Object.keys(vehiclesData).length : 0;\n\n  const renderChart = () => {\n    if(numberOfPointsOnXAxis > 12) {\n      return <AreaChart\n        data={vehiclesData}\n        margin={{\n          top: 10,\n          right: 30,\n          left: 0,\n          bottom: 0,\n        }}\n      >\n        <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n        <XAxis dataKey=\"name\" tick={<CustomizedXAxisTick />} />\n        <YAxis tick={<CustomizedYAxisTick />} />\n        <Tooltip content={<CustomizedTooltip />} />\n        <Legend />\n        {getUniqueProviderNames(vehiclesData[0]).map(x => {\n          const providerColor = getProviderColor(metadata.aanbieders, x)\n          return (\n            <Area\n              key={x}\n              stackId=\"1\"\n              type=\"monotone\"\n              dataKey={x}\n              stroke={providerColor}\n              fill={providerColor}\n              isAnimationActive={false}\n            />\n          )\n        })}\n      </AreaChart>\n    }\n\n    return <BarChart\n      data={vehiclesData}\n      margin={{\n        top: 10,\n        right: 30,\n        left: 0,\n        bottom: 0,\n      }}\n    >\n      <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n      <XAxis dataKey=\"name\" tick={<CustomizedXAxisTick />} />\n      <YAxis tick={<CustomizedYAxisTick />} />\n      <Tooltip content={<CustomizedTooltip />} />\n      <Legend />\n      {getUniqueProviderNames(vehiclesData[0]).map(x => {\n        const providerColor = getProviderColor(metadata.aanbieders, x)\n        return (\n          <Bar\n            key={x}\n            stackId=\"1\"\n            type=\"monotone\"\n            dataKey={x}\n            stroke={providerColor}\n            fill={providerColor}\n            isAnimationActive={false}\n          />\n        )\n      })}\n    </BarChart>\n  }\n\n  return (\n    <div style={{ width: '100%', height: '400px', overflowX: 'hidden', overflowY: 'hidden' }}>\n      <ResponsiveContainer>\n        {renderChart()}\n      </ResponsiveContainer>\n    </div>\n  )\n}\n\nexport default BeschikbareVoertuigenChart;\n","import React, {useEffect, useState } from 'react';\nimport './StatsPage.css'\n\nimport {\n  useDispatch,\n  useSelector\n} from 'react-redux';\nimport {\n  AreaChart,\n  Area,\n  BarChart,\n  Bar,\n  XAxis,\n  Legend,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\n\nimport {getAggregatedStats} from '../api/aggregatedStats';\nimport {\n  getProviderColor,\n  getUniqueProviderNames\n} from '../helpers/providers.js';\nimport {\n  prepareAggregatedStatsData,\n} from '../helpers/stats.js';\n\nimport VerhuringenChart from '../components/Chart/VerhuringenChart.jsx';\nimport BeschikbareVoertuigenChart from '../components/Chart/BeschikbareVoertuigenChart.jsx';\nimport ParkeerduurChart from '../components/Chart/ParkeerduurChart.jsx';\n\nimport {CustomizedXAxisTick, CustomizedYAxisTick} from '../components/Chart/CustomizedAxisTick.jsx';\n\nconst renderStackedAreaChart = (data, providers) => {\n  return (\n    <div style={{ width: '100%', height: '400px', overflowX: 'auto', overflowY: 'hidden' }}>\n      <ResponsiveContainer>\n        <AreaChart\n          height={400}\n          data={data}\n          margin={{\n            top: 10,\n            right: 30,\n            left: 0,\n            bottom: 0,\n          }}\n        >\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"name\" height={100} tick={<CustomizedXAxisTick />} />\n          <YAxis tick={<CustomizedYAxisTick />} />\n          <Tooltip />\n          {getUniqueProviderNames(data[0]).map(x => {\n            const providerColor = getProviderColor(providers, x)\n            return (\n              <Area\n                key={x}\n                stackId=\"1\"\n                type=\"monotone\"\n                dataKey={x}\n                stroke={providerColor}\n                fill={providerColor}\n                isAnimationActive={false}\n              />\n            )\n          })}\n        </AreaChart>\n      </ResponsiveContainer>\n    </div>\n  )\n}\n\nconst renderStackedBarChart = (data, providers) => {\n  return <BarChart\n    width={800}\n    height={400}\n    data={data}\n    margin={{\n      top: 20,\n      right: 30,\n      left: 20,\n      bottom: 5,\n    }}\n  >\n    <CartesianGrid strokeDasharray=\"3 3\" />\n    <XAxis dataKey=\"name\" />\n    <YAxis />\n    <Tooltip />\n    <Legend />\n    {getUniqueProviderNames(data[0]).map(x => {\n      const providerColor = getProviderColor(providers, x)\n      return (\n        <Bar\n          key={x}\n          stackId=\"1\"\n          type=\"monotone\"\n          dataKey={x}\n          stroke={providerColor}\n          fill={providerColor}\n          isAnimationActive={false}\n        />\n      )\n    })}\n  </BarChart>\n}\n\nfunction StatsPage(props) {\n  const dispatch = useDispatch()\n\n  const token = useSelector(state => state.authentication.user_data.token)\n  const filter = useSelector(state => state.filter)\n  const metadata = useSelector(state => state.metadata)\n\n  const setAggregationLevel = (newlevel) => {\n    dispatch({\n      type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE',\n      payload: newlevel\n    })\n  }\n\n  return (\n    <div className=\"StatsPage\">\n\n      <div className={\"agg-button-container\"}>\n        <div className={\"agg-button \" + (filter.ontwikkelingaggregatie==='day' ? \" agg-button-active\":\"\")} onClick={() => { setAggregationLevel('day') }}>\n          dag\n        </div>\n        <div className={\"agg-button \" + (filter.ontwikkelingaggregatie==='week' ? \" agg-button-active\":\"\")} onClick={() => { setAggregationLevel('week') }}>\n          week\n        </div>\n        <div className={\"agg-button \" + (filter.ontwikkelingaggregatie==='month' ? \" agg-button-active\":\"\")} onClick={() => { setAggregationLevel('month') }}>\n          maand\n        </div>\n      </div>\n\n      <div className=\"xl:flex\">\n        <div className=\"xl:flex-1\">\n          <h2 className=\"text-4xl my-2\">Verhuringen</h2>\n          <VerhuringenChart />\n        </div>\n        <div className=\"xl:flex-1\">\n          <h2 className=\"text-4xl my-2\">Beschikbare voertuigen</h2>\n          <BeschikbareVoertuigenChart />\n        </div>\n      </div>\n\n      {/*<div className=\"xl:flex\">\n        <div className=\"xl:flex-1\">\n          <h2 className=\"text-4xl my-2\">Parkeerduur</h2>\n          <ParkeerduurChart />\n        </div>\n        <div className=\"xl:flex-1\">\n          <h2 className=\"text-4xl my-2\">Gemiddeld aantal verhuringen per voertuig per dag</h2>\n          <AantalVerhuringenPerVoertuigPerDagChart />\n        </div>\n      </div>*/}\n\n      {/*Meer dan 12 datapunten: lijn, anders bar.*/}\n\n    </div>\n  )\n}\n\nexport default StatsPage;\n","function Logo() {\n  return (\n    <img alt=\"Logo CROW\" src=\"/images/logo-fietsberaad-crow.svg\" width=\"82\" />\n  )\n}\n\nexport default Logo;\n","import React from 'react';\n\nexport function IconButtonClose(props) {\n  return (\n    <div className=\"text-2xl font-bold cursor-pointer\" onClick={props.onClick}\n      style={props.style}\n      ></div>\n  )\n}\n\nexport function IconButtonFilter(props) {\n  return (\n    <div\n      {...props}\n      className=\"w-12 h-8 box-border border-2 border-black flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline\"\n    >\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22.13 15.72\">\n        <path d=\"M7.16 0a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h2.71a3.7 3.7 0 0 0 7.2 0h10.52a.85.85 0 0 0 0-1.7H10.76A3.7 3.7 0 0 0 7.16 0zm0 5.72a2 2 0 1 1 2-2 2 2 0 0 1-2 2zM15 8.3a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h10.52a3.7 3.7 0 0 0 7.2 0h2.71a.85.85 0 0 0 0-1.7h-2.71A3.7 3.7 0 0 0 15 8.3zm0 5.7a2 2 0 1 1 2-2 2 2 0 0 1-2 2z\"></path>\n      </svg>\n    </div>);\n}\n","import React, { useState } from 'react';\nimport { setUser } from '../actions/authentication';\nimport { useDispatch } from 'react-redux';\nimport {\n  Redirect\n} from \"react-router-dom\";\n\nimport Logo from '../components/Logo.jsx';\nimport { IconButtonClose } from '../components/IconButtons.jsx';\n\nconst Login = () => {\n  const [emailaddress, setEmailaddress] = useState('');\n  const [password, setPassword] = useState('');\n  const [recoverPassword, setRecoverPassword] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [doRenderRedirect, setDoRenderRedirect] = useState(false);\n  const dispatch = useDispatch();\n\n  const login = e => {\n    \n    e.preventDefault();\n\n    // Clear error message\n    setErrorMessage(null);\n\n    // Basic validation\n    if(! emailaddress) {\n      setErrorMessage('Voer alsjeblieft een e-mailadres in');\n      return;\n    }\n\n    if(! password) {\n      setErrorMessage('Voer alsjeblieft een wachtwoord in');\n      return;\n    }\n\n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + \"/login\";\n    var data = {\n      loginId: emailaddress,\n      password: password,\n      applicationId: process.env.REACT_APP_FUSIONAUTH_APPLICATION_ID\n    };\n    \n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        dispatch( { type: 'LOGIN', payload: null } );\n        dispatch( { type: 'RESET_FILTER', payload: null } );\n        dispatch( setUser(response) );\n        setLoggedIn(true);\n        document.location = '/map/park';\n      }).catch(error => {\n        console.error(\"Login failed! (%s)\", error.message);\n        setErrorMessage('Login mislukt. Heb je het juiste e-mailadres en wachtwoord ingevuld?');\n        setLoggedIn(false);\n    });\n  };\n  \n  const recover = e => {\n    e.preventDefault();\n\n    // Clear error message\n    setErrorMessage(null);\n\n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + \"/user/forgot-password\"\n    var data = {\n      loginId: emailaddress,\n    };\n\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        console.log(response);\n        return true;\n      }).catch(error => {\n        console.log(error)\n        // setErrorMessage('Controleer of je e-mailadres klopt. Mocht het daarna nog steeds niet lukken, neem dan contact op met info@deelfietsdashboard.nl');\n        setErrorMessage('Dank voor je verzoek voor een wachtwoord-resetmail. Het opvragen van je wachtwoord werkt nog niet in dit nieuwe Dashboard. Stuur alsjeblieft een mail aan info@deelfietsdashboard.nl met je e-mailadres, dan zorgen wij dat je een wachtwoord-herstel-link ontvangt. Dank!');\n        return false;\n      });\n\n    // do login here\n  };\n\n  const renderLogin = () => {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"mx-auto\">\n\n          <IconButtonClose\n            onClick={() => setDoRenderRedirect(true)}\n            style={{position: 'absolute', right: '30px', top: '18px'}}\n          />\n\n          <Logo />\n\n          <h2 className=\"mt-4 mb-4 text-4xl font-bold\">\n            Dashboard Deelmobiliteit\n          </h2>\n\n          <p style={{\n            maxWidth: '100%',\n            width: '416px'\n          }} className=\"mb-4\">\n            Het Dashboard Deelmobiliteit is een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit op de voeten willen.\n          </p>\n          <p style={{\n            maxWidth: '100%',\n            width: '416px'\n          }} className=\"mb-4\">\n            Hoe lang en waar staan deelvoertuigen ongebruikt in de openbare ruimte? Hoe vaak worden de deelvoertuigen verhuurd? In welke wijken en op welke tijdstippen zijn deelvoertuigen populair?\n          </p>\n          <p style={{\n            maxWidth: '100%',\n            width: '416px'\n          }} className=\"mb-4\">\n            Met de informatie uit het Dashboard Deelmobiliteit kunnen overheden hun beleid ontwikkelen, evalueren en bijsturen.\n          </p>\n\n          <form className=\"mt-8 mb-4\">\n            <label className=\"block\" htmlFor=\"emailaddress\">Email</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              autoCapitalize=\"off\"\n              placeholder=\"email\"\n              name=\"emailaddress\"\n              required\n              onChange={e => setEmailaddress(e.target.value)}\n            />\n\n            <label className=\"mt-4 block\" htmlFor=\"password\">Wachtwoord</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              type=\"password\"\n              placeholder=\"Wachtwoord\"\n              name=\"password\"\n              required\n              onChange={e => setPassword(e.target.value)}\n            />\n          \n            {errorMessage && <div className=\"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n              <span className=\"block sm:inline\">{errorMessage}</span>\n            </div>}\n\n            <p className=\"my-4\">\n              <a href=\"#\" onClick={() => setRecoverPassword(true)} className=\"\n                text-gray-400\n                underline\n                text-sm\n              \">\n                Wachtwoord vergeten?\n              </a>\n            </p>\n\n            <div className=\"flex items-baseline mt-4\">\n                <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-theme-blue rounded-lg\" onClick={login}>\n                  Login\n                </button>\n                <button className=\"px-6 py-2 mt-4 text-white bg-gray-300 rounded-lg hover:bg-gray-400\" onClick={() => {\n                  setDoRenderRedirect(true)\n                }}>\n                  Annuleer\n                </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    )\n  }\n  \n  const renderRecoverPassword = () => {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-100\">\n        <div className=\"px-8 py-6 mt-4 text-left bg-white shadow-lg\">\n          <h3 className=\"text-2xl font-bold text-center\">Wachtwoord herstellen</h3>\n          <form>\n            <label className=\"block\" htmlFor=\"emailaddress\">E-mailadres</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              autoCapitalize=\"off\"\n              placeholder=\"E-mailadres\"\n              name=\"emailaddress\"\n              required\n              onChange={e => setEmailaddress(e.target.value)}\n            />\n     \n            {errorMessage && <div className=\"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n              <span className=\"block sm:inline\">{errorMessage}</span>\n            </div>}\n\n            <div className=\"flex items-baseline justify-between\">\n                <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={recover}>Herstel</button>\n                <button className=\"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={() => {\n                  setErrorMessage(null);\n                  setRecoverPassword(false);\n                }}>Annuleer</button>\n            </div>\n          </form>\n        </div>\n      </div>)\n  }\n  const renderRedirect = () => {\n    return (\n      <Redirect to=\"/\" />\n    );\n  }\n \n  if (loggedIn || doRenderRedirect) {\n    return renderRedirect();\n  }\n\n  return recoverPassword ? renderRecoverPassword() : renderLogin();\n};\n\nexport default Login;","import moment from 'moment';\n\nexport const fetchParkEvents = async (authentication, provider, dateTime) => {\n  if(! authentication || ! authentication.user_data || ! dateTime) {\n    return;\n  }\n  if(! provider) {\n    return;\n  }\n\n  const formattedDateTime = moment(dateTime).format('YYYY-MM-DDTHH:mm:ss[Z]');\n  let url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp=\"+formattedDateTime+\"&operators=\"+provider;\n  let options = { headers : { \"authorization\": \"Bearer \" + authentication.user_data.token }}\n\n  const response = await fetch(url, options);\n\n  if(! response.ok) {\n    console.error(\"unable to fetch: %o\", response);\n    return false;\n  }\n\n  const json = await response.json();\n\n  return json.park_events || false;\n}","import React, {useEffect} from 'react';\nimport {useSelector} from 'react-redux';\nimport moment from 'moment';\n\nimport {fetchParkEvents} from '../helpers/parkEvents.js';\n\nconst numberOfSnapshots = 4*5;//4*5\nconst provider = 'htm';//4*5\nlet numberOfUniqueVehiclesAfterXIterations = [];\n\nconst getUniqueVehicleIds = (dataset) => {\n  let uniqueVehicleIds = [];\n  dataset.map(x => {\n    if(uniqueVehicleIds.indexOf(x.bike_id) <= -1) {\n      uniqueVehicleIds.push(x.bike_id);\n    }\n    return x;\n  });\n  return uniqueVehicleIds;\n}\n\nfunction Monitoring(props) {\n\n  // Get state.authentication\n  const authentication = useSelector(state => {\n    return state.authentication ? state.authentication : false;\n  });\n\n  // On load, get parking data of different moments in time\n  useEffect((x) => {\n    // Function that gets parking data for a specific provider, for a specific date/time\n    const fetchMultipleMomentsInTime = async () => {\n      let dateTime = moment().toISOString(), parkEvents = [];\n      // Get 4*5=20 snapshots (= 5 days) of parking data\n      let collectedParkEvents = [];\n      for(let i = 0; i <= numberOfSnapshots; i++) {\n        dateTime = moment(dateTime).subtract(6, 'hours').toISOString();\n        // Get park events for date time\n        parkEvents = await fetchParkEvents(authentication, provider, dateTime);\n        // Add park events to existing allParkEvents array\n        parkEvents.map(x => {\n          collectedParkEvents.push(x);\n          return x;\n        });\n        // Get cumulative unique vehicle IDs\n        numberOfUniqueVehiclesAfterXIterations[i] = getUniqueVehicleIds(collectedParkEvents);\n      }\n      return collectedParkEvents;\n    }\n\n    fetchMultipleMomentsInTime();\n  }, [authentication]);\n\n  return (\n    <div className=\"mt-12\">\n      <h1 className=\"text-2xl my-2\">\n        Monitoring\n      </h1>\n\n      <p className=\"py-2\">\n        Voor {provider} willen we controleren hoeveel unieke voertuig-IDs er zijn door te de tijd heen.\n      </p>\n\n      <p className=\"py-2\">\n        Op deze manier kunnen we afleiden of er aan de standaard wordt voldaan. Er moeten statische voertuig-IDs zijn. Als dit niet het geval is, zul je zien dat er na verloop van tijd veel meer voertuig-IDs zijn geregistreerd dan het aantal voertuigen dat de aanbieder heeft. Op die manier weet je dat denog niet voldaan wordt aan de gevraagde datastandaard.\n      </p>\n\n      <p className=\"py-2\">\n        De snapshots zijn steeds gemaakt met 6 uur ertussen.\n      </p>\n\n      <pre>\n        {numberOfUniqueVehiclesAfterXIterations ? numberOfUniqueVehiclesAfterXIterations.map((val, key) => {\n          return <div key={key}>Number of UUIDs after <b>{key} snapshots</b>: <b>{val.length}</b></div>\n        }) : ''}\n      </pre>\n\n      <table className=\"table-auto bg-white hidden\">\n        <thead>\n          <tr>\n            <th>Datum/tijd</th>\n            <th>Cumulatief aantal voertuig-IDs</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>datumtijd</td>\n            <td>aantal</td>\n          </tr>\n        </tbody>\n      </table>\n\n    </div>\n  );\n  \n  \n}\n\nexport default Monitoring;\n","import { IconButtonClose } from '../IconButtons.jsx';\n\nimport './css/FilterbarExtended.css';\n\nfunction FilterbarExtended({closeFunction, title, children}) {\n  return (\n    <div className=\"FilterbarExtended\" onClick={() => closeFunction(false)}>\n      <div className=\"\" onClick={e => e.stopPropagation()}>\n        <div className=\"flex justify-between\">\n          <h1 className=\"title flex flex-col justify-center\">\n            {title||''}\n          </h1>\n          <div className=\"FilterbarExtended-close-button-wrapper\">\n            <IconButtonClose onClick={() => closeFunction(false)} />\n          </div>\n        </div>\n        <div className=\"grid-cols-4\" >\n          { children }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FilterbarExtended;\n","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport FilterbarExtended from './FilterbarExtended.jsx';\nimport './css/FilteritemGebieden.css';\n\nfunction FilteritemGebieden() {\n  const dispatch = useDispatch()\n\n  const gebieden = useSelector(state => {\n    return (state.metadata && state.metadata.gebieden) ? state.metadata.gebieden : [];\n  });\n  \n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : \"\";\n  });\n\n  const filterBarExtendedView = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR_EXTENDED'] : false;\n  });\n\n  let [filterSearch, setFilterSearch] = useState(\"\");\n  \n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  const unselectGebied = e => {\n    e.preventDefault();\n    \n    dispatch({\n      type: 'SET_FILTER_GEBIED',\n      payload: \"\"\n    })\n  }\n  \n  const setFilterGebied = (gebied) => {\n    dispatch({\n      type: 'SET_FILTER_GEBIED',\n      payload: gebied\n    })\n  }\n  \n  const changeSearchText = e => { setFilterSearch(e.target.value) }\n\n  const clearSearchText = e => { setFilterSearch(\"\") }\n  \n  const toggleGebieden = (val) => {\n    setVisibility('FILTERBAR_EXTENDED', val)\n  }\n\n  const renderSelectGebieden = (gebieden) => {\n    const filteredGebieden = gebieden.filter(gebied=>{\n      return filterSearch===''|| gebied.name.toLowerCase().includes(filterSearch.toLowerCase())\n    })\n    return (\n      <FilterbarExtended\n        title=\"Selecteer een gebied\"\n        closeFunction={() => toggleGebieden(false)}\n        >\n        <div className=\"filter-form-selectie\">\n          <div className=\"filter-form-search-container mb-3\">\n            <div className=\"filter-form-search-container-2\">\n            <input type=\"text\"\n              className=\"filter-form-search\"\n              onChange={changeSearchText}\n              value={filterSearch}\n              autoFocus={true}\n              placeholder={\"zoek\"}/>\n            <div className=\"ml-3 flex flex-col justify-center h-full\">\n              { filterSearch !== \"\" ?\n                <div className=\"filter-plaats-img-cancel\" onClick={clearSearchText} />\n                :\n                <div className=\"filter-plaats-img-search\" />\n              }\n            </div>\n            </div>\n            <div>&nbsp;</div>\n          </div>\n          <div className=\"filter-form-values\">\n            { filterGebied === \"\"?\n                <div key={'item-alle'} className=\"form-item-selected form-item\" onClick={e=>{toggleGebieden(false)}}>\n                  Alle Gebieden\n                </div>\n                :\n                <div key={'item-alle'} className=\"form-item\" onClick={e=>{toggleGebieden(false);setFilterGebied(\"\")}}>\n                  Alle Gebieden\n                </div>\n            }\n            { filteredGebieden.map(a=>{\n                if(filterGebied === a.gm_code) {\n                  return (<div key={'item-'+a.gm_code} className=\"form-item-selected form-item\" onClick={e=>{toggleGebieden(false);setFilterGebied(\"\")}}>{a.name}</div>)\n                } else {\n                  return (<div key={'item-'+a.gm_code} className=\"form-item\" onClick={e=>{toggleGebieden(false);setFilterGebied(a.gm_code);}}>{a.name}</div>)\n                }\n              })\n            }\n          </div>\n        </div>\n      </FilterbarExtended>\n    )\n  }\n  \n  let value = gebieden.find(item=>item.gm_code===filterGebied) || \"\";\n  if(gebieden.length===1) {\n    return (\n      <div className=\"filter-plaats-container filter-plaats-not-active\">\n        <div className=\"filter-plaats-title\" onClick={e=>{toggleGebieden('places')}}>Plaats</div>\n        <div className=\"filter-plaats-box-row flex flex-col justify-center\">\n          <div className=\"filter-plaats-value \" >{value===\"\"?\"Alle Gebieden\":value.name}</div>\n        </div>\n      </div>\n    )\n  }\n  \n  return (\n    <div className=\"filter-plaats-container\">\n      <div className=\"filter-plaats-title\" onClick={e=>{toggleGebieden('places')}}>Plaats</div>\n      <div className=\"filter-plaats-box-row flex flex-col justify-center\">\n        <div className={`filter-plaats-value ${value === \"\" ? 'text-black' : ''}`} onClick={e=>{toggleGebieden('places')}}>\n          {value === \"\" ? \"Alle Gebieden\" : value.name}\n        </div>\n        { filterBarExtendedView === 'places' ? renderSelectGebieden(gebieden) : null }\n        {  filterGebied!==\"\" ?\n              <div className=\"filter-plaats-img-cancel\" onClick={unselectGebied} />\n            :\n              null\n        }\n        <div className=\"flex flex-col justify-center h-full\">\n          <div className=\"filter-plaats-img-search\" onClick={e=>{toggleGebieden('places')}} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemGebieden;\n","export default __webpack_public_path__ + \"static/media/calendar.0fe3dc2a.svg\";","// import { useState } from 'react';\nimport './css/FilteritemDatum.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\nimport './css/FilteritemDatum-Timepicker.css';\nimport './css/FilteritemDatum-Calendar.css';\nimport './css/FilteritemDatum-Clock.css';\n\n// using https://github.com/wojtekmaj/react-datetime-picker with custom styling\nimport DateTimePicker from 'react-datetime-picker/dist/entry.nostyle'; //\nimport calendarIcon from '../../images/calendar.svg';\n\nfunction FilterItemDatum() {\n  const dispatch = useDispatch()\n  \n  const filterDatum = useSelector(state => {\n    return state.filter ? state.filter.datum : new Date().toISOString();\n  });\n  \n  const setFilterDatum = newdt => {\n    dispatch({\n      type: 'SET_FILTER_DATUM',\n      payload: newdt.toISOString()\n    })\n  }\n\n  return (\n    <div className=\"filter-datum-container\">\n      <div className=\"filter-datum-title\">Datum</div>\n      <div className=\"filter-datum-box-row\">\n        <div className=\"filter-datum-box-1\">\n            <div\n              className=\"filter-datum-caret\"\n              onClick={() => {\n                setFilterDatum(\n                  moment(filterDatum).subtract(1, 'hours')\n                )\n              }}>\n              &lsaquo;\n            </div>\n              <div className=\"filter-datum-dtpicker\">\n                <DateTimePicker\n                  onChange={setFilterDatum}\n                  value={new Date(filterDatum)}\n                  clearIcon={null}\n                  calendarIcon={<img src={calendarIcon} alt=\"Logo\" />}\n                  format={\"y-MM-dd H:mm\"}/>\n              </div>\n            <div\n              className=\"filter-datum-caret\"\n              onClick={() => {\n                setFilterDatum(\n                  moment(filterDatum).add(1, 'hours')\n                )\n              }}\n              >&rsaquo;</div>\n        </div>\n        <div className=\"filter-datum-box-2\" onClick={() => {\n          setFilterDatum(new Date())\n        }} title=\"Toon huidige datum en tijd\">\n          <div className=\"filter-datum-img-now\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FilterItemDatum;\n","import { useState } from 'react';\nimport './css/FilteritemDatumVanTot.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport DatePicker from 'react-datepicker';\nimport { format, addDays, addMonths }  from 'date-fns';\n\nfunction FilterItemDatumVanTot() {\n  const dispatch = useDispatch()\n\n  const filterOntwikkelingVan = useSelector(state => {\n    return state.filter && state.filter.ontwikkelingvan ? new Date(state.filter.ontwikkelingvan) : new Date();\n  });\n  \n  const filterOntwikkelingTot = useSelector(state => {\n    return state.filter && state.filter.ontwikkelingtot ? new Date(state.filter.ontwikkelingtot) : new Date();\n  });\n\n  const filterOntwikkelingAggregatie = useSelector(state => {\n    return state.filter && state.filter.ontwikkelingaggregatie ? state.filter.ontwikkelingaggregatie : 'day';\n  });\n\n  const [startDate, setStartDate] = useState(filterOntwikkelingVan);\n  const [endDate, setEndDate] = useState(filterOntwikkelingTot);\n  const [isOpen, setIsOpen] = useState(false);\n\n\n  const updateFilter = (start, end, aggregatie=false) => {\n    // strip hours\n    const van = new Date(start.toDateString());\n\n    // strip hours, add 24 h\n    let tot = new Date(end.toDateString()) ;\n    // tot.setDate(tot.getDate() + 1);\n    dispatch({\n      type: 'SET_FILTER_ONTWIKKELING_VANTOT',\n      payload: { van: van.toISOString(), tot: tot.toISOString() }\n    })\n    \n    if(aggregatie!==false) {\n      dispatch({\n        type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE',\n        payload: aggregatie\n      })\n    }\n  }\n  const onChange = (dates) => {\n    const [start, end] = dates;\n    setStartDate(start);\n    setEndDate(end);\n    \n    if(null!==end) {\n      updateFilter(start, end);\n      setIsOpen(!isOpen);\n    }\n  };\n  \n  const handleClick = (e) => {\n    e.preventDefault();\n    \n    if(isOpen && endDate===null) {\n      setStartDate(filterOntwikkelingVan)\n      setEndDate(filterOntwikkelingTot)\n    }\n    \n    setIsOpen(!isOpen);\n  };\n  \n  // const moveFilterDatum = (down) => {\n  //   let start = startDate;\n  //   let end = endDate;\n  //   switch(filterOntwikkelingAggregatie) {\n  //     case 'week':\n  //       start = addDays(startDate, down?-7:7);\n  //       end = addDays(endDate, down?-7:7);\n  //       break;\n  //     case 'month':\n  //       start = addMonths(startDate, down?-1:1);\n  //       end = addMonths(endDate, down?-1:1);\n  //       break;\n  //     case 'day':\n  //     default:\n  //       start = addDays(startDate, down?-1:1);\n  //       end = addDays(endDate, down?-1:1);\n  //       break;\n  //   }\n  //\n  //   setStartDate(start)\n  //   setEndDate(end)\n  //\n  //   updateFilter(start, end);\n  // }\n  \n  const moveFilterDatum = (movestart) => {\n    let start = startDate;\n    let end = endDate;\n    if(movestart) {\n      switch(filterOntwikkelingAggregatie) {\n        case 'week':\n          start = addDays(startDate, -7);\n          break;\n        case 'month':\n          start = addMonths(startDate, -1);\n          break;\n        case 'day':\n        default:\n          start = addDays(startDate, -1);\n          break;\n      }\n    } else {\n      switch(filterOntwikkelingAggregatie) {\n        case 'week':\n          end = addDays(endDate, 7);\n          break;\n        case 'month':\n          end = addMonths(endDate, 1);\n          break;\n        case 'day':\n        default:\n          end = addDays(endDate, 1);\n          break;\n      }\n    }\n    \n    setStartDate(start)\n    setEndDate(end)\n    \n    updateFilter(start, end);\n  }\n  \n  \n  const setView = (view) => {\n    // strip hours\n    const today = new Date((new Date()).toDateString());\n\n    let start;\n    let end;\n    let agg;\n    switch(view) {\n      case 'laatste7dagen':\n        start = addDays(today,-6);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste30dagen':\n        start = addDays(today,-30);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste90dagen':\n        start = addDays(today,-90);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste12maanden':\n        start = addDays(today,-365);\n        end = today;\n        agg='week';\n        break;\n      case 'ditjaar':\n        let tyear= today.getFullYear();\n        start = new Date(tyear.toString() + '/1/1');\n        end = today;\n        agg='month';\n        break;\n      case 'vorigjaar':\n        let lyear= today.getFullYear()-1;\n        start = new Date(lyear.toString() + '/1/1');\n        end = new Date(lyear.toString() + '/12/31');\n        agg='month';\n        break;\n      default:\n        return; // do nothing\n    }\n    \n    setStartDate(start)\n    setEndDate(end)\n    \n    updateFilter(start, end, agg);\n  }\n\n  const renderPickerInline = () => {\n    return (\n      <div className=\"filter-datum-van-tot-pickercontainer\">\n        <DatePicker\n          key=\"dp-van-tot\"\n          className=\"filter-datum-van-tot-picker\"\n          selected={startDate}\n          onChange={onChange}\n          startDate={startDate}\n          endDate={endDate}\n          dateFormat=\"yyyy-MM-dd\"\n          selectsRange\n          inline\n        />\n        <div className=\"filter-datum-van-tot-picker-options\">\n          <div key=\"fdvt-po1\" className=\"filter-datum-van-tot-option\" onClick={()=>{ setView('laatste7dagen')}}>Laatste 7 dagen</div>\n          <div key=\"fdvt-po2\" className=\"filter-datum-van-tot-option\" onClick={()=>{ setView('laatste30dagen')}}>Laatste 30 dagen</div>\n          <div key=\"fdvt-po3\" className=\"filter-datum-van-tot-option\" onClick={()=>{ setView('laatste90dagen')}}>Laatste 90 dagen</div>\n          <div key=\"fdvt-po4\" className=\"filter-datum-van-tot-option\" onClick={()=>{ setView('laatste12maanden')}}>Laatste 12 maanden</div>\n          <div key=\"fdvt-po5\" className=\"filter-datum-van-tot-option\" onClick={()=>{ setView('ditjaar')}}>Dit jaar</div>\n          <div key=\"fdvt-po6\" className=\"filter-datum-van-tot-option\" onClick={()=>{ setView('vorigjaar')}}>Vorig jaar </div>\n        </div>\n      </div>\n    )\n  }\n    \n  return (\n    <div className=\"filter-datum-van-tot-container\">\n      <div className=\"filter-datum-van-tot-title\">Periode</div>\n      <div className=\"filter-datum-van-tot-box-row\">\n        <div\n          className=\"filter-datum-caret\"\n          onClick={() => {moveFilterDatum(true)}}>\n          &lsaquo;\n        </div>\n        <div className=\"filter-datum-van-tot-input\"\n          onClick={handleClick}>\n          {startDate!==null?format(startDate, \"yyyy-MM-dd\"):\"\"}\n          &nbsp;t/m&nbsp;\n          {endDate!==null?format(endDate, \"yyyy-MM-dd\"):\"\"} </div>\n        <div\n          className=\"filter-datum-caret\"\n          onClick={() => {moveFilterDatum(false)}}>\n          &rsaquo;\n        </div>\n      </div>\n      { isOpen && renderPickerInline() }\n    </div>\n  )\n}\n\nexport default FilterItemDatumVanTot;\n","import './css/Filterbar.css';\nimport './css/FilteritemDuur.css';\nimport { useDispatch, useSelector } from 'react-redux';\n\nconst c1Hour = 60 * 60 * 1000;\n\nfunction FilterItemInterval() {\n  const dispatch = useDispatch()\n  \n  const filterDuration = useSelector(state => {\n    return state.filter ? state.filter.intervalduur : c1Hour;\n  });\n  \n  const cAnnotations = [\n    { label:'1h', anchor: 'start', pos: '0%', value: c1Hour },\n    { label:'4h', anchor: 'middle', pos: '15%', value: c1Hour * 4},\n    { label:'8h', anchor: 'middle', pos: '26.5%', value: c1Hour * 8},\n    { label:'12h', anchor: 'middle', pos: '39%', value: c1Hour * 12},\n    { label:'16h', anchor: 'middle', pos: '50%', value: c1Hour * 16},\n    { label:'20h', anchor: 'middle', pos: '62%', value: c1Hour * 20},\n    { label:'24h', anchor: 'middle', pos: '73.5%', value: c1Hour * 24},\n    { label:'2d', anchor: 'middle', pos: '85.5%', value: c1Hour * 24 * 2},\n    { label:'3d', anchor: 'middle', pos: '96%', value: c1Hour * 24 * 3}\n  ];\n  let elements = cAnnotations.map(\n    (e,i) => (<text key={'fide-'+i} className=\"filter-duur-annotation\" x={e.pos} y=\"14\" textAnchor={e.anchor}>{e.label}</text>)\n  );\n  \n  let ticks = cAnnotations.map(\n    (e,i) => (<rect key={'fidt-'+i} className=\"filter-duur-tickmark\" x={e.pos} y=\"0\" width=\"1\" height=\"20\"></rect>)\n  );\n  \n  const handleSetDuration = e => {\n    dispatch({\n      type: 'SET_FILTER_INTERVAL_DUUR',\n      payload: cAnnotations[e.target.value].value\n    })\n  }\n  \n  let currentDurationIdx = cAnnotations.findIndex(v=>(v.value===filterDuration));\n  if(currentDurationIdx===-1) { currentDurationIdx = 4 }\n  \n  return (\n    <div className=\"filter-duur-container\">\n      <div className=\"filter-duur-box-row\">\n        <input className=\"filter-duur-range\" width=\"100%\" type=\"range\" min=\"0\" max={cAnnotations.length-1} step=\"1\" onChange={handleSetDuration} value={currentDurationIdx}/>\n        <svg className=\"filter-duur-tickmarks\" role=\"presentation\" width=\"100%\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n          { ticks }\n        </svg>\n        <svg className=\"filter-duur-elements\" role=\"presentation\" width=\"100%\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n          { elements }\n        </svg>\n      </div>\n    </div>\n  )\n}\n\nexport default FilterItemInterval;\n","import { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemAanbieders.css';\n\nfunction FilteritemAanbieders() {\n  const dispatch = useDispatch()\n  \n  const aanbieders = useSelector(state => {\n    return (state.metadata && state.metadata.aanbieders) ? state.metadata.aanbieders : [];\n  });\n  \n  const filterAanbiedersExclude = useSelector(state => {\n    return state.filter ? state.filter.aanbiedersexclude : [];\n  });\n  \n  const addTofilterAanbiedersExclude = (aanbieder) => {\n    const nexcluded = (filterAanbiedersExclude || '').split(\",\").length;\n    if(nexcluded===aanbieders.length-1) {\n      // console.log(\"needs at least one provider\")\n      return;\n    }\n\n    dispatch({ type: 'ADD_TO_FILTER_AANBIEDERS_EXCLUDE', payload: aanbieder.system_id })\n  }\n  \n  const removeFromfilterAanbiedersExclude = (aanbieder) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE', payload: aanbieder.system_id })\n  }\n  \n  const clearFilterAanbiedersExclude = e => {\n    dispatch({ type: 'CLEAR_FILTER_AANBIEDERS_EXCLUDE', payload: '' })\n  }\n\n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = provider => {\n    // If no filters were set, only show this provider and hide all others\n    if(filterAanbiedersExclude===\"\") {\n      // Disable all but the selected provider\n      aanbieders.map(x => {\n        if(x.system_id !== provider.system_id) {\n          addTofilterAanbiedersExclude(x)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addTofilterAanbiedersExclude(provider)\n    }\n    \n  }\n\n  return (\n    <div className=\"filter-aanbieders-container\">\n      <div className=\"filter-aanbieders-title-row\">\n        <div className=\"filter-aanbieders-title\">Aanbieders</div>\n        { filterAanbiedersExclude!==''\n            ?\n            <div className=\"filter-aanbieders-reset cursor-pointer\" onClick={clearFilterAanbiedersExclude}>\n              reset\n            </div>\n            :\n            null\n        }\n      </div>\n      <div className=\"filter-aanbieders-box-row\">\n        {\n          aanbieders.map((aanbieder, idx) => {\n            let excluded = filterAanbiedersExclude ? filterAanbiedersExclude.includes(aanbieder.system_id) : '';\n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromfilterAanbiedersExclude(aanbieder)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(aanbieder); };\n            \n            return (\n              <div\n                className={`filter-aanbieders-item ${excluded ? 'filter-aanbieders-item-not-active' : ''}`}\n                onClick={handler}\n                key={aanbieder.name}\n                >\n                <div className=\"filter-aanbieders-marker\">\n                  <svg viewBox='0 0 30 30' >\n                    <circle cx={'50%'} cy={'50%'} r={'40%'} fill={\"#000000\"} />\n                    <circle cx={'50%'} cy={'50%'} r={'35%'} fill={\"#FFFFFF\"} />\n                    <circle cx={'70%'} cy={'25%'} r={'25%'} fill={aanbieder.color.toString()} />\n                  </svg>\n                </div>\n                <div className=\"filter-aanbieders-itemlabel\">\n                  { aanbieder.name }\n                </div>\n              </div>\n            )\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemAanbieders;\n","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport FilterbarExtended from './FilterbarExtended.jsx';\nimport './css/FilteritemZones.css';\n\nfunction FilteritemZones() {\n  const dispatch = useDispatch()\n  \n  const zones = useSelector(state => {\n    return (state.metadata && state.metadata.zones) ? state.metadata.zones : [];\n  });\n  \n  const filterZones = useSelector(state => {\n    return state.filter ? state.filter.zones : 0;\n  });\n  \n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : 0;\n  });\n  \n  const filterBarExtendedView = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR_EXTENDED'] : false;\n  });\n\n  let [filterSearch, setFilterSearch] = useState(\"\");\n  \n  const addToFilterZones = (zone) => {\n    dispatch({ type: 'ADD_TO_FILTER_ZONES', payload: zone })\n  }\n  \n  const removeFromFilterZones = (zone) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_ZONES', payload: zone })\n  }\n  \n  const clearFilterZones = () => {\n    dispatch({ type: 'CLEAR_FILTER_ZONES', payload: null })\n  }\n\n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  const toggleZones = (val) => {\n    setVisibility('FILTERBAR_EXTENDED', val)\n  }\n  \n  const changeSearchText = e => { setFilterSearch(e.target.value) }\n\n  const clearSearchText = e => { setFilterSearch(\"\") }\n  \n  const zone_groups = [\n    {name: 'Wijken', zone_type: 'neighborhood'},\n    {name: 'Stadsdelen', zone_type: 'residential_area'},\n    {name: 'Zones', zone_type: 'custom'},\n    // {name: 'Anders', zone_type: 'municipality'},\n  ];\n  \n  const renderSelectZonesGroup = (group, zones) => {\n    const groupZones = zones.filter(zone=>zone.zone_type===group.zone_type);\n    \n    if(groupZones.length===0) { return null }\n    \n    const sortedZones = groupZones.sort((a,b)=>a.name.localeCompare(b.name));\n    \n    return (\n      <div key={'zg-'+group.zone_type} className=\"zone-group-container\">\n        <span key={'zgn-'+group.zone_type} className=\"zone-group-title\">{group.name}</span>\n        <div key={'zgi-'+group.zone_type} className=\"filter-zones-zonelist\">\n        { sortedZones.map(a=>{\n            let isSelected = filterZones.includes(a.zone_id);\n            if(isSelected) {\n              return (<div key={'item-'+a.zone_id} className=\"\n                form-item-selected\n                form-item\n                cursor-pointer\n              \" onClick={e=>{ e.stopPropagation(); removeFromFilterZones(a.zone_id)}}>{a.name}</div>)\n            } else {\n              return (<div key={'item-'+a.zone_id} className=\"\n                form-item\n                cursor-pointer\n              \" onClick={e=>{ e.stopPropagation(); addToFilterZones(a.zone_id)}}>{a.name}</div>)\n            }\n          })\n        }\n        </div>\n      </div>\n    )\n  }\n\n  const renderSelectZones = (zones) => {\n    const filteredZones = zones.filter(zone=>{\n      return filterSearch===''|| zone.name.toLowerCase().includes(filterSearch.toLowerCase())\n    })\n    \n    return (\n      <FilterbarExtended\n        title=\"Selecteer een zone\"\n        closeFunction={(val) => toggleZones(false)}\n      >\n        <div className=\"filter-form-selectie\">\n            <div className=\"filter-form-search-container mb-3\">\n              <div className=\"filter-form-search-container-2\">\n              <input type=\"text\"\n                className=\"filter-form-search\"\n                onChange={changeSearchText}\n                value={filterSearch}\n                autoFocus={true}\n                placeholder={\"zoek\"}/>\n              <div className=\"ml-3 flex flex-col justify-center h-full\">\n                { filterSearch!==\"\" ?\n                  <div className=\"filter-zones-img-cancel cursor-pointer\" onClick={clearSearchText} />\n                  :\n                  <div className=\"filter-zones-img-search cursor-pointer\" />\n                }\n              </div>\n            </div>\n            <div>&nbsp;</div>\n          </div>\n          <div className=\"filter-form-values\">\n            { zone_groups.map(group=>{\n                return renderSelectZonesGroup(group, filteredZones);\n              })}\n          </div>\n        </div>\n      </FilterbarExtended>)\n  }\n  \n  let selectedzones = [];\n  let zonetxt = \"\"\n  try {\n    selectedzones = filterZones.split(',')\n    let aantal = selectedzones.length;\n    if(aantal>1) {\n      zonetxt = aantal + \" zones\";\n    } else {\n      let thezone = zones.find(zone=>(zone.zone_id.toString()===selectedzones[0]));\n      zonetxt = (thezone && thezone.name) || '';\n    }\n  } catch(ex) {\n    zonetxt = \"\";\n  }\n  \n  if(zonetxt===\"\") { zonetxt = \"Alle Zones\" }\n  \n  let isActive = filterGebied !== '';\n  \n  const filteredZones = zones.filter(zone=>{\n    return selectedzones.includes(zone.zone_id.toString())\n  })\n\n  if(! isActive) {\n    return <></>\n  }\n\n  return (\n    <div className={`filter-zones-container ${isActive===true ? '':'filter-zones-item-not-active'}`}>\n      <div className=\"filter-zones-title\" onClick={e=>{isActive && toggleZones('zones')}}>Zones</div>\n      <div className=\"filter-zones-box-row\">\n        <div\n          className={`\n            filter-zones-value flex flex-col justify-center cursor-pointer h-full\n            ${zonetxt === \"Alle Zones\" ? 'text-black' : ''}\n          `}\n          onClick={e=>{isActive && toggleZones('zones')}}\n          >\n          {zonetxt}\n        </div>\n        {  filterZones!==\"\" ?\n              <div className=\"filter-zones-img-cancel\" onClick={clearFilterZones}></div>\n            :\n              null\n        }\n        { filterBarExtendedView === 'zones' ? renderSelectZones(zones) : null }\n        <div className=\"ml-3 flex flex-col justify-center h-full\">\n          <div className=\"filter-zones-img-search cursor-pointer\" onClick={e=>{toggleZones('zones')}} />\n        </div>\n      </div>\n      <div className=\"filter-zones-zonelist\">\n      {\n        filteredZones.map(zone => {\n          return (\n            <div className=\"filter-zones-zoneitem\" key={zone.zone_id}>\n              { zone.name}\n              <div className=\"filter-zones-img-zoneitem-cancel\" onClick={e=>{ e.stopPropagation(); removeFromFilterZones(zone.zone_id)}}></div>\n            </div>\n          )\n        })\n      }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemZones;","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemMarkers.css';\n\nexport function FilteritemMarkersParkeerduur() {\n  const markers = useSelector(state => {\n    return [\n      { id: 0, color: '#1FA024', fillcolor: '#1FA024', name: '< 1 uur'},\n      { id: 1, color: '#48E248', fillcolor: '#48E248', name: '< 24 uur'},\n      { id: 2, color: '#FFD837', fillcolor: '#FFD837', name: '< 4 d'},\n      { id: 3, color: '#FD3E48', fillcolor: '#FD3E48', name: '> 4 d'}\n    ];\n  });\n  \n  return FilteritemMarkers({\n    label: 'Parkeerduur',\n    filtername: 'parkeerduurexclude',\n    markers,\n    addmarker: 'ADD_TO_FILTER_MARKERS_EXCLUDE',\n    removemarker: 'REMOVE_FROM_FILTER_MARKERS_EXCLUDE',\n    clearmarkers: 'CLEAR_FILTER_MARKERS_EXCLUDE'\n  });\n}\n\nexport function FilteritemMarkersAfstand() {\n  const markers = useSelector(state => {\n    return [\n      { id: 0, color: '#48E248', fillcolor: '#48E248', name: '5km'},\n      { id: 1, color: '#44BD48', fillcolor: '#44BD48', name: '10km'},\n      { id: 2, color: '#3B7747', fillcolor: '#3B7747', name: '15km'},\n      { id: 3, color: '#343E47', fillcolor: '#343E47', name: '> 25km'}\n    ];\n  });\n  \n  return FilteritemMarkers({\n    label: 'Afstand',\n    filtername: 'afstandexclude',\n    markers,\n    addmarker: 'ADD_TO_FILTER_AFSTAND_EXCLUDE',\n    removemarker: 'REMOVE_FROM_FILTER_AFSTAND_EXCLUDE',\n    clearmarkers: 'CLEAR_FILTER_AFSTAND_EXCLUDE'\n  });\n}\n\nfunction FilteritemMarkers({label, filtername, markers, addmarker, removemarker, clearmarkers}) {\n  const dispatch = useDispatch()\n\n  const filterMarkersExclude = useSelector(state => {\n    return state.filter ? state.filter[filtername] : '';\n  }) || '';\n  \n  const addToFilterMarkersExclude = (marker) => {\n    console.log(\"addtofilter %s -> %s\", filtername, marker)\n    dispatch({ type: addmarker, payload: marker })\n  }\n  \n  const removeFromFilterMarkersExclude = (marker) => {\n    console.log(\"removefromfilter %s -> %s\", filtername, marker)\n    dispatch({ type: removemarker, payload: marker })\n  }\n  \n  const clearFilterMarkersExclude = () => {\n    console.log(\"clearfilter %s\", filtername)\n    dispatch({ type: clearmarkers, payload: null })\n  }\n  \n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = id => {\n    console.log(\"clickfilter [%s]<\", filterMarkersExclude);\n    // If no filters were set, only show this provider and hide all others\n    if(filterMarkersExclude===\"\") {\n      // Disable all but the selected provider\n      markers.map(x => {\n        if(x.id !== id) {\n          addToFilterMarkersExclude(x.id)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addToFilterMarkersExclude(id)\n    }\n  }\n  \n  \n  return (\n    <div className=\"filter-markers-container\">\n    <div className=\"filter-markers-title-row\">\n      <div className=\"filter-markers-title\">{label}</div>\n      { filterMarkersExclude!==''?\n          <div className=\"filter-markers-reset cursor-pointer\" onClick={clearFilterMarkersExclude}>\n            reset\n          </div>\n          :\n          null\n      }\n    </div>\n      <div className=\"filter-markers-box-row\">\n        {\n          markers.map(marker => {\n            let excluded = filterMarkersExclude.split(\",\").includes(marker.id.toString());\n            \n            let className = excluded ? \"filter-markers-item-excluded\": \"filter-markers-item\";\n            \n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromFilterMarkersExclude(marker.id)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(marker.id)};\n                \n            return (\n              <div className={className} key={marker.id}>\n                <div className=\"filter-markers-marker\" onClick={handler}>\n                  <svg viewBox='0 0 30 30' >\n                    <circle cx={'50%'} cy={'50%'} r={'40%'} fill={marker.color} />\n                    <circle cx={'50%'} cy={'50%'} r={'34%'} fill={marker.fillcolor} />\n                  </svg>\n                </div>\n                <div className=\"filter-markers-itemlabel\">\n                  { marker.name }\n                </div>\n              </div>)\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemHerkomstBestemming.css';\n\nexport default function FilteritemHerkomstBestemming() {\n  const dispatch = useDispatch()\n\n  const filterHerkomstBestemming = useSelector(state => {\n    let value = 'herkomst';\n    if(state.filter) {\n      value=state.filter.herkomstbestemming==='bestemming' ? 'bestemming':'herkomst';\n    }\n    return value;\n  });\n  \n  const setFilterHerkomstBestemming = (value) => e => {\n    dispatch({ type: 'SET_FILTER_HERKOMSTBESTEMMING', payload: value })\n  }\n  \n  let classNameHerkomst = 'filter-herkomst-bestemming-button'\n  let classNameBestemming = 'filter-herkomst-bestemming-button'\n  if(filterHerkomstBestemming==='bestemming') {\n    classNameBestemming+=' filter-herkomst-bestemming-button-active'\n  } else {\n    classNameHerkomst+=' filter-herkomst-bestemming-button-active'\n  }\n  \n  return (\n    <div className=\"filter-herkomst-bestemming-container\">\n      <div className=\"filter-herkomst-bestemming-box-row\">\n        <div className={classNameHerkomst} onClick={setFilterHerkomstBestemming('herkomst')}>Herkomst</div>\n        <div className={classNameBestemming} onClick={setFilterHerkomstBestemming('bestemming')}>Bestemming</div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemVoertuigTypes.css';\n\nfunction FilteritemVoertuigTypes() {\n  const dispatch = useDispatch()\n\n  const voertuigtypes = useSelector(state => {\n    return state.metadata.vehicle_types ? state.metadata.vehicle_types || [] : [];\n  });\n  \n  const filterVoertuigTypesExclude = useSelector(state => {\n    if(Array.isArray(state.filter.voertuigtypesexclude)) {\n      return '';\n    }\n    \n    return state.filter ? state.filter.voertuigtypesexclude : '';\n  }) || '';\n  \n  const addToFilterVoertuigTypesExclude = (voertuigtype) => {\n    const nexcluded = (filterVoertuigTypesExclude || '').split(\",\").length;\n    if(nexcluded===voertuigtypes.length-1) {\n      // console.log(\"needs at least one provider\")\n      return;\n    }\n\n    dispatch({ type: 'ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE', payload: voertuigtype })\n  }\n  \n  const removeFromFilterVoertuigTypesExclude = (voertuigtype) => {\n    console.log('REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE %s', voertuigtype)\n    dispatch({ type: 'REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE', payload: voertuigtype })\n  }\n  \n  const clearFilterVoertuigTypesExclude = () => {\n    dispatch({ type: 'CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE', payload: null })\n  }\n  \n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = type => {\n    console.log(\"clickfilter [%s]<\", filterVoertuigTypesExclude);\n    // If no filters were set, only show this provider and hide all others\n    if(filterVoertuigTypesExclude===\"\") {\n      // Disable all but the selected provider\n      voertuigtypes.map(x => {\n        if(x.id !== type) {\n          addToFilterVoertuigTypesExclude(x.id)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addToFilterVoertuigTypesExclude(type)\n    }\n  }\n  \n  return (\n    <div className=\"filter-voertuigtypes-container\">\n      <div className=\"filter-voertuigtypes-title-row\">\n        <div className=\"filter-voertuigtypes-title\">Vervoerstype</div>\n        { filterVoertuigTypesExclude!==''?\n            <div className=\"filter-voertuigtypes-reset cursor-pointer\" onClick={clearFilterVoertuigTypesExclude}>\n              reset\n            </div>\n            :\n            null\n        }\n      </div>\n      <div className=\"filter-voertuigtypes-box-row\">\n        {\n          voertuigtypes.map((voertuigtype,idx) => {\n            let excluded = (filterVoertuigTypesExclude ? filterVoertuigTypesExclude: '').split(\",\").includes(voertuigtype.id);\n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromFilterVoertuigTypesExclude(voertuigtype.id)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(voertuigtype.id)};\n              \n            let baseClassName = `${excluded ? \"filter-voertuigtypes-item-excluded\": \"filter-voertuigtypes-item\"}`;\n            let extraclass = \"\";\n            switch(voertuigtype.id) {\n              case \"bicycle\": extraclass = \"filter-voertuigtypes-icon-bicycle\"; break;\n              case \"cargo_bicycle\": extraclass = \"filter-voertuigtypes-icon-cargo-bicycle\"; break;\n              case \"moped\": extraclass = \"filter-voertuigtypes-icon-scooter\"; break;\n              case \"car\": extraclass = \"filter-voertuigtypes-icon-car\"; break;\n              case \"unknown\" : extraclass = \"filter-voertuigtypes-icon-other\"; break;\n              default:\n                break;\n            }\n                \n            return (\n              <div className={`${baseClassName}${idx===voertuigtypes.length-1?' filter-voertuigtypes-item-last':''}`} key={voertuigtype.id} onClick={handler}>\n                <div className={`filter-voertuigtypes-icon ${extraclass}`} onClick={handler} />\n                <div className=\"filter-voertuigtypes-itemlabel\">\n                  { voertuigtype.name }\n                </div>\n              </div>)\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemVoertuigTypes;","import './css/Filterbar.css';\nimport {useSelector} from 'react-redux';\nimport FilteritemGebieden from './FilteritemGebieden.jsx';\nimport FilteritemDatum from './FilteritemDatum.jsx';\nimport FilteritemDatumVanTot from './FilteritemDatumVanTot.jsx';\nimport FilteritemDuur from './FilteritemDuur.jsx';\nimport FilteritemAanbieders from './FilteritemAanbieders.jsx';\nimport FilteritemZones from './FilteritemZones.jsx';\nimport {\n  FilteritemMarkersAfstand,\n  FilteritemMarkersParkeerduur\n} from './FilteritemMarkers.jsx';\nimport FilteritemHerkomstBestemming from './FilteritemHerkomstBestemming';\nimport FilteritemVoertuigTypes from './FilteritemVoertuigTypes.jsx';\nimport Logo from '../Logo.jsx';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER\n} from '../../reducers/layers.js';\n\nfunction Filterbar({\n    displayMode,\n    visible,\n    hideLogo}) {\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  const ispark=displayMode===DISPLAYMODE_PARK;\n  const isrentals=displayMode===DISPLAYMODE_RENTALS;\n  const isontwikkeling=displayMode===DISPLAYMODE_OTHER;\n  \n  const showdatum=isrentals||ispark;\n  const showduur=isrentals;\n  const showparkeerduur=ispark;\n  const showafstand=isrentals;\n  const showherkomstbestemming=isrentals;\n  const showvantot=isontwikkeling;\n  const showvervoerstype=isrentals||ispark;\n  \n  return (\n    <div className=\"filter-bar-inner py-2\">\n\n      {! hideLogo && <Logo />}\n      \n      { isLoggedIn && showdatum && <FilteritemDatum /> }\n\n      { isLoggedIn && showduur && <FilteritemDuur /> }\n\n      { isLoggedIn && showvantot && <FilteritemDatumVanTot /> }\n\n      {<FilteritemGebieden />}\n\n      {<FilteritemZones />}\n\n      {isLoggedIn && showparkeerduur && <FilteritemMarkersParkeerduur />}\n\n      {isLoggedIn && showafstand && <FilteritemMarkersAfstand />}\n\n      {isLoggedIn && showherkomstbestemming && <FilteritemHerkomstBestemming />}\n\n      {showvervoerstype && <FilteritemVoertuigTypes />}\n\n      {<FilteritemAanbieders />}\n\n    </div>\n  )\n}\n\nexport default Filterbar;\n","import React from 'react';\nimport {\n  useSelector\n} from 'react-redux';\nimport SlideBox from '../SlideBox/SlideBox.jsx';\nimport Filterbar from '../Filterbar/Filterbar.jsx';\n\n// import './FilterbarDesktop.css';\n\nfunction FilterbarDesktop({isVisible, displayMode}) {\n\n  const isFilterBarExtendedVisible = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR_EXTENDED'] : false;\n  });\n\n  return (\n    <SlideBox name=\"FilterBar\" direction=\"left\" options={{\n      title: 'Filters',\n      backgroundColor: '#F6F5F4',\n    }} style={{\n      width: (isFilterBarExtendedVisible ? '648px' : '324px'),\n      height: '100%',\n      top: 0,\n      position: 'fixed'\n    }}\n    >\n      <div className=\"py-2 mx-3 h-full\">\n        <Filterbar displayMode={displayMode} />\n      </div>\n    </SlideBox>\n  )\n}\n\nexport default FilterbarDesktop\n","import {\n  // useDispatch,\n  // useSelector\n} from 'react-redux';\n\nimport './MobileSlideBox.css';\nimport { IconButtonClose } from '../IconButtons.jsx';\n\nfunction MobileSlideBox(props) {\n  return (\n    <div className={`\n      MobileSlideBox w-full sm:hidden absolute left-0\n      ${props.isVisible ? 'is-visible' : ''}\n      ${props.classes}\n    `} style={props.style}>\n\n      <header className=\"flex justify-between\">\n        <h1 className=\"\">{props.title}</h1>\n        <IconButtonClose onClick={props.closeHandler} />\n      </header>\n\n      <div className=\"w-full\">\n        {props.children}\n      </div>\n\n    </div>\n  )\n}\n\nexport default MobileSlideBox;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport MobileSlideBox from '../SlideBox/MobileSlideBox.jsx';\nimport Filterbar from '../Filterbar/Filterbar.jsx';\n\n// import './FilterbarMobile.css';\n\nfunction FilterbarMobile({isVisible, displayMode}) {\n  const dispatch = useDispatch()\n\n  const setVisibility = () => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: 'FILTERBAR',\n        visibility: false\n      }\n    })\n  };\n\n  return (\n    <MobileSlideBox\n      title=\"Filters\"\n      isVisible={isVisible}\n      closeHandler={() => {\n        setVisibility();\n      }}\n      classes=\"\n        top-0 overflow-auto\n      \"\n    >\n      <Filterbar hideLogo={true} displayMode={displayMode} />\n    </MobileSlideBox>\n  )\n}\n\nexport default FilterbarMobile;\n","import React from 'react'\nimport {marked} from 'marked'\n\nconst About = () => {\n  return (\n    <div dangerouslySetInnerHTML={{ __html: marked.parse(`\n# Over het Dashboard Deelmobiliteit\n\n## Algemeen\n\nHet Dashboard Deelmobiliteit is een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit op de voeten willen. Hoe lang en waar staan deelvoertuigen ongebruikt in de openbare ruimte? Hoe vaak worden de deelvoertuigen verhuurd? In welke wijken en op welke tijdstippen zijn deelvoertuigen populair?  Met de informatie uit het Dashboard Deelmobiliteit kunnen overheden hun beleid ontwikkelen, evalueren en bijsturen.\n\n## Hoe werkt het?\n\nHet Dashboard Deelmobiliteit verzamelt elke halve minuut positie van  meer dan 15.000 geparkeerde deelvoertuigen in Nederland (januari 2022). Op basis deze informatie genereert het dashboard zogenaamde parkeergebeurtenissen en verhuringen, die opgeslagen worden in een centrale database. Het dashboard biedt een aantal functionaliteiten (kaarten, grafieken en tabellen) om de database te raadplegen. Voor analyses waar het dashboard niet in voorziet, kunnen overheden downloads maken van de ruwe data uit het dashboard om maatwerkanalyses te (laten) maken.\n\n## Functionaliteiten\n\nIn overleg met deelnemende overheden zijn de volgende functionaliteiten ontwikkeld:\n\n- Een kaart met het aanbod van deelvoertuigen op een tijdstip naar keuze. Een kleurcode geeft tevens aan hoe lang het voertuig te huur staat.\n- Een kaart met verhuringen van deelvoertuigen gedurende een periode naar keuze. Het betreft zowel de locaties waar verhuringen gestart zijn als beindigd.\n- Grafieken met ontwikkelingen in een periode naar keuze. Het gaat zowel om de ontwikkeling in het aantal deelvoertuigen dat aangeboden wordt als om de ontwikkeling het aantal verhuringen.\n- Standaardrapportages als excel-sheets gedownload kunnen worden.\n\nOverheden hebben alleen toegang tot de informatie over deelvoertuigen in hun eigen bestuursgebied.\n\n## Voordelen voor gemeenten\n\n- sneller toegang tot data\n- minder uitvragen naar aanbieders nodig (1 bron met alle data)\n- geen conversie meer nodig: data van elke aanbieder heeft precies hetzelfde dataformaat\n- ontwikkeling in overleg met de aangesloten gemeentes\n- indien gewenst uit te breiden door gemeentes zelf (open source software)\n\n## Voordelen aanbieders\n\n- minder aanvragen vanuit gemeentes\n- geen nieuwe dataformaten nodig i.v.m. gebruik gangbare internationale datastandaarden\n- gemeentes hebben beter inzicht in de stand van zaken\n\n## Tot slot\n\nWil je contact opnemen met het team achter het Dashboard Deelmobiliteit, neem dan contact op met <a href=\"mailto:info@deelfietsdashboard.nl?Subject=Hallo\">info@deelfietsdashboard.nl</a>\n      `)}} />\n  )\n\n}\n\nexport default About;","// import './ContentPage.css'\nimport { useSelector } from 'react-redux';\n\nexport default function Overlay(props) {\n  return (\n    <div\n      className={`Overlay relative z-10 w-full lg:w-2/3 bg-white`}\n    >\n      <div className=\"Overlay-inner\">\n        {props.children}\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport MobileSlideBox from '../SlideBox/MobileSlideBox.jsx';\n\nimport './SelectLayerMobile.css';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  // DISPLAYMODE_OTHER,\n  DISPLAYMODE_PARKEERDATA_HEATMAP,\n  DISPLAYMODE_PARKEERDATA_CLUSTERS,\n  DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  DISPLAYMODE_VERHUURDATA_HEATMAP,\n  DISPLAYMODE_VERHUURDATA_CLUSTERS,\n  DISPLAYMODE_VERHUURDATA_VOERTUIGEN\n} from '../../reducers/layers.js';\n\nfunction SelectLayerMobile(props) {\n  const dispatch = useDispatch()\n\n  const isVisible = useSelector(state => {\n    return state.ui ? state.ui['MenuSecondary.layers'] : false;\n  });\n\n  const showZoneOnOff = useSelector(state => {\n    return state.filter ? state.filter.gebied!=='' : false;\n  });\n\n  const zonesVisible = useSelector(state => {\n    return state.layers ? state.layers.zones_visible : false;\n  });\n  \n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  const viewPark = useSelector(state => {\n    return state.layers ? state.layers.view_park : DISPLAYMODE_PARKEERDATA_VOERTUIGEN;\n  });\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  // console.log(\"MOBILE selection\", displayMode)\n  \n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n  \n  return (\n    <MobileSlideBox\n      title=\"Lagen\"\n      isVisible={isVisible}\n      closeHandler={() => {\n        setVisibility('MenuSecondary.layers', false);\n      }}\n      classes=\"\n        top-auto\n      \"\n    >\n      <div className={`\n        SelectLayerMobile\n        flex justify-between\n      `}>\n      { displayMode===DISPLAYMODE_PARK ?\n            <div data-type=\"heat-map\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_HEATMAP ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_HEATMAP }) }}>\n              <span className=\"layer-title\">\n                Heat map\n              </span>\n            </div> : null }\n\n      { displayMode===DISPLAYMODE_PARK ?\n        <div data-type=\"pointers\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_CLUSTERS ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_CLUSTERS }) }}>\n          <span className=\"layer-title\">\n            Clusters\n          </span>\n          </div> : null }\n\n      { displayMode===DISPLAYMODE_PARK ?\n        <div data-type=\"vehicles\"  className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_VOERTUIGEN }) }}>\n          <span className=\"layer-title\">\n            Voertuigen\n          </span>\n          </div> : null }\n\n      { displayMode===DISPLAYMODE_RENTALS ?\n            <div data-type=\"heat-map\" className={`layer${viewPark!==DISPLAYMODE_VERHUURDATA_HEATMAP ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_HEATMAP }) }}>\n              <span className=\"layer-title\">\n                Heat map\n              </span>\n            </div> : null }\n\n      { displayMode===DISPLAYMODE_RENTALS ?\n        <div data-type=\"pointers\" className={`layer${viewPark!==DISPLAYMODE_VERHUURDATA_CLUSTERS ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_CLUSTERS }) }}>\n          <span className=\"layer-title\">\n            Clusters\n          </span>\n          </div> : null }\n\n      { displayMode===DISPLAYMODE_RENTALS ?\n        <div data-type=\"vehicles\"  className={`layer${viewPark!==DISPLAYMODE_VERHUURDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_VOERTUIGEN }) }}>\n          <span className=\"layer-title\">\n            Voertuigen\n          </span>\n          </div> : null }\n\n      { isLoggedIn && showZoneOnOff ?\n          <div data-type=\"zones\" className={`layer${!zonesVisible ? ' layer-inactive':''}`} onClick={() => {\n              dispatch({ type: 'LAYER_TOGGLE_ZONES_VISIBLE', payload: null })\n          }}>\n            <span className=\"layer-title\">\n              Zones\n            </span>\n          </div> : null\n        }\n      </div>\n    </MobileSlideBox>\n  )\n}\n\nexport {\n  SelectLayerMobile\n}","const cPublicAanbieders = [\n    { value:\"cykl\", system_id:\"cykl\", name:\"Cykl\" },\n    { value:\"flickbike\", system_id:\"flickbike\", name:\"Flickbike\" },\n    { value:\"donkey\", system_id:\"donkey\", name:\"Donkey\" },\n    { value:\"mobike\", system_id:\"mobike\", name:\"Mobike\" },\n    { value:\"htm\", system_id:\"htm\", name:\"HTM\" },\n    { value:\"gosharing\", system_id:\"gosharing\", name:\"GO\" },\n    { value:\"check\", system_id:\"check\", name:\"CHECK\" },\n    { value:\"felyx\", system_id:\"felyx\", name:\"Felyx\" },\n    { value:\"deelfietsnederland\", system_id:\"deelfietsnederland\", name:\"Deelfiets\" },\n    { value:\"keobike\", system_id:\"keobike\", name:\"Keobike\" },\n    { value:\"lime\", system_id:\"lime\", name:\"Lime\" },\n    { value:\"baqme\", system_id:\"baqme\", name:\"BAQME\" },\n    { value:\"cargoroo\", system_id:\"cargoroo\", name:\"Cargoroo\" },\n    { value:\"uwdeelfiets\", system_id:\"uwdeelfiets\", name:\"uwdeelfiets\" },\n    { value:\"hely\", system_id:\"hely\", name:\"Hely\" }\n  ];\n  \nconst cPublicGebieden = [\n  { gm_code:\"\", name:\"Alle Gebieden\" }, { gm_code:\"GM0518\", name:\"'s-Gravenhage\" }, { gm_code:\"GM0796\", name:\"'s-Hertogenbosch\" }, { gm_code:\"GM0613\", name:\"Albrandswaard\" }, { gm_code:\"GM0141\", name:\"Almelo\" }, { gm_code:\"GM0034\", name:\"Almere\" }, { gm_code:\"GM0484\", name:\"Alphen aan den Rijn\" }, { gm_code:\"GM0307\", name:\"Amersfoort\" }, { gm_code:\"GM0362\", name:\"Amstelveen\" }, { gm_code:\"GM0363\", name:\"Amsterdam\" }, { gm_code:\"GM0200\", name:\"Apeldoorn\" }, { gm_code:\"GM0202\", name:\"Arnhem\" }, { gm_code:\"GM0106\", name:\"Assen\" }, { gm_code:\"GM0489\", name:\"Barendrecht\" }, { gm_code:\"GM0203\", name:\"Barneveld\" }, { gm_code:\"GM0373\", name:\"Bergen (NH\" }, { gm_code:\"GM0753\", name:\"Best\" }, { gm_code:\"GM0375\", name:\"Beverwijk\" }, { gm_code:\"GM0377\", name:\"Bloemendaal\" }, { gm_code:\"GM0758\", name:\"Breda\" }, { gm_code:\"GM0312\", name:\"Bunnik\" }, { gm_code:\"GM0313\", name:\"Bunschoten\" }, { gm_code:\"GM0502\", name:\"Capelle aan den IJssel\" }, { gm_code:\"GM0310\", name:\"De Bilt\" }, { gm_code:\"GM0736\", name:\"De Ronde Venen\" }, { gm_code:\"GM0503\", name:\"Delft\" }, { gm_code:\"GM0150\", name:\"Deventer\" }, { gm_code:\"GM0384\", name:\"Diemen\" }, { gm_code:\"GM0505\", name:\"Dordrecht\" }, { gm_code:\"GM0228\", name:\"Ede\" }, { gm_code:\"GM0772\", name:\"Eindhoven\" }, { gm_code:\"GM0153\", name:\"Enschede\" }, { gm_code:\"GM0232\", name:\"Epe\" }, { gm_code:\"GM1771\", name:\"Geldrop-Mierlo\" }, { gm_code:\"GM1942\", name:\"Gooise Meren\" }, { gm_code:\"GM0014\", name:\"Groningen\" }, { gm_code:\"GM0392\", name:\"Haarlem\" }, { gm_code:\"GM0394\", name:\"Haarlemmermeer\" }, { gm_code:\"GM0243\", name:\"Harderwijk\" }, { gm_code:\"GM0246\", name:\"Heerde\" }, { gm_code:\"GM0794\", name:\"Helmond\" }, { gm_code:\"GM0164\", name:\"Hengelo\" }, { gm_code:\"GM0798\", name:\"Hilvarenbeek\" }, { gm_code:\"GM0402\", name:\"Hilversum\" }, { gm_code:\"GM0353\", name:\"IJsselstein\" }, { gm_code:\"GM0166\", name:\"Kampen\" }, { gm_code:\"GM0542\", name:\"Krimpen aan den IJssel\" }, { gm_code:\"GM1621\", name:\"Lansingerland\" }, { gm_code:\"GM0080\", name:\"Leeuwarden\" }, { gm_code:\"GM1916\", name:\"Leidschendam-Voorburg\" }, { gm_code:\"GM0327\", name:\"Leusden\" }, { gm_code:\"GM0809\", name:\"Loon op Zand\" }, { gm_code:\"GM0556\", name:\"Maassluis\" }, { gm_code:\"GM1842\", name:\"Midden-Delfland\" }, { gm_code:\"GM1952\", name:\"Midden-Groningen\" }, { gm_code:\"GM0356\", name:\"Nieuwegein\" }, { gm_code:\"GM0267\", name:\"Nijkerk\" }, { gm_code:\"GM0268\", name:\"Nijmegen\" }, { gm_code:\"GM1930\", name:\"Nissewaard\" }, { gm_code:\"GM0820\", name:\"Nuenen, Gerwen en Nederwetten\" }, { gm_code:\"GM0302\", name:\"Nunspeet\" }, { gm_code:\"GM0826\", name:\"Oosterhout\" }, { gm_code:\"GM0431\", name:\"Oostzaan\" }, { gm_code:\"GM1926\", name:\"Pijnacker-Nootdorp\" }, { gm_code:\"GM0273\", name:\"Putten\" }, { gm_code:\"GM0597\", name:\"Ridderkerk\" }, { gm_code:\"GM0603\", name:\"Rijswijk\" }, { gm_code:\"GM1674\", name:\"Roosendaal\" }, { gm_code:\"GM0599\", name:\"Rotterdam\" }, { gm_code:\"GM0606\", name:\"Schiedam\" }, { gm_code:\"GM0848\", name:\"Son en Breugel\" }, { gm_code:\"GM0855\", name:\"Tilburg\" }, { gm_code:\"GM1730\", name:\"Tynaarlo\" }, { gm_code:\"GM0344\", name:\"Utrecht\" }, { gm_code:\"GM1581\", name:\"Utrechtse Heuvelrug\" }, { gm_code:\"GM0861\", name:\"Veldhoven\" }, { gm_code:\"GM0622\", name:\"Vlaardingen\" }, { gm_code:\"GM0865\", name:\"Vught\" }, { gm_code:\"GM0866\", name:\"Waalre\" }, { gm_code:\"GM0867\", name:\"Waalwijk\" }, { gm_code:\"GM0289\", name:\"Wageningen\" }, { gm_code:\"GM0629\", name:\"Wassenaar\" }, { gm_code:\"GM1960\", name:\"West Betuwe\" }, { gm_code:\"GM1783\", name:\"Westland\" }, { gm_code:\"GM0637\", name:\"Zoetermeer\" }, { gm_code:\"GM0642\", name:\"Zwijndrecht\" }, { gm_code:\"GM0193\", name:\"Zwolle\" }\n]\n\n// id should correspond to the api filter values\nconst cPublicVoertuigTypes = [\n    { id: 'bicycle', name: 'Fiets'},\n    { id: 'cargo_bicycle', name: 'Bakfiets'},\n    { id: 'moped', name: 'Scooter'},\n    { id: 'car', name: 'Auto'},\n    { id: 'unknown', name: 'Onbekend'},\n]\n\n// var store_accesscontrollist = undefined;\n//\nconst isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nexport const initAccessControlList = (store_accesscontrollist)  => {\n  try {\n    if(undefined===store_accesscontrollist) {\n      console.log(\"no redux state available yet - skipping metadata update\");\n      return false;\n    }\n    \n    const state = store_accesscontrollist.getState();\n    if(!isLoggedIn(state)) {\n      console.log(\"initialize ACL Data (not logged in)\")\n      // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n      store_accesscontrollist.dispatch({ type: 'SET_GEBIEDEN', payload: cPublicGebieden});\n      \n      // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n      store_accesscontrollist.dispatch({ type: 'SET_AANBIEDERS', payload: cPublicAanbieders});\n\n      let types = cPublicVoertuigTypes; // TODO: get from ACL once implemented\n      store_accesscontrollist.dispatch({ type: 'SET_VEHICLE_TYPES', payload: types});\n\n      store_accesscontrollist.dispatch({ type: 'SET_METADATA_LOADED', payload: true});\n    } else {\n      console.log(\"initialize ACL Data (logged in)\")\n      let url=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\";\n      let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      \n      fetch(url, options).then((response) => {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n\n        response.json()\n          .then((metadata) => {\n            // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n            // console.log(\"dispatch gebieden \", metadata.municipalities);\n            store_accesscontrollist.dispatch({ type: 'SET_GEBIEDEN', payload: metadata.municipalities});\n            if(metadata.municipalities.length===1) {\n              store_accesscontrollist.dispatch({ type: 'SET_FILTER_GEBIED', payload: metadata.municipalities[0].gm_code});\n            }\n            \n            // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n            store_accesscontrollist.dispatch({ type: 'SET_AANBIEDERS', payload: metadata.operators});\n\n            // items -> {\"id\": 1, \"name\": \"asdfasdfadfa\" }\n            let types = cPublicVoertuigTypes; // TODO: get from ACL once implemented\n            store_accesscontrollist.dispatch({ type: 'SET_VEHICLE_TYPES', payload: types});\n            \n            store_accesscontrollist.dispatch({ type: 'SET_METADATA_LOADED', payload: true});\n          })\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n        });\n        return true;\n      }\n  } catch(ex) {\n    console.error(\"Unable to update ACL\", ex)\n    return false;\n  }\n}","import moment from 'moment';\nimport { createFilterparameters, isLoggedIn, convertDurationToBin } from './pollTools.js';\nimport { cPollDelayParkingData, cPollDelayErrorMultiplyer, cPollDelayLoading } from '../constants.js';\nimport { DISPLAYMODE_PARK } from '../reducers/layers.js';\n\nvar store_parkingdata = undefined;\n\nvar timerid_parkingdata = undefined;\n\nconst updateParkingData = ()  => {\n  // let delay = cPollDelayParkingData;\n  try {\n    if(undefined===store_parkingdata) {\n      console.error(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n    \n    // Wait for zone data\n    const state = store_parkingdata.getState();\n    if(state.metadata.zones_loaded===false) {\n      // console.info(\"no zone metadata available yet - skipping parking data update\");\n      return false;\n    }\n    \n    if(state.layers.displaymode!==DISPLAYMODE_PARK) {\n      // console.info('not viewing park data - skip update');\n      return true;\n    }\n    \n    const canfetchdata = isLoggedIn(state)&&state&&state.filter&&state.authentication.user_data.token;\n    let url = \"https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space\";\n    let options = {};\n    if(!canfetchdata) {\n      let filterparams = createFilterparameters(DISPLAYMODE_PARK, state.filter, state.metadata);\n      if(filterparams.length>0) {\n        url += \"?\" + filterparams.join(\"&\");\n      }\n    } else {\n      if(null!==state.filter&&null!==state.authenticationdata) {\n        url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events\";\n        let filterparams = createFilterparameters(DISPLAYMODE_PARK, state.filter, state.metadata);\n        if(filterparams.length>0) {\n          url += \"?\" + filterparams.join(\"&\");\n        }\n        options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      }\n    }\n    fetch(url, options).then(function(response) {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n      \n      response.json().then(function(vehicles) {\n        if(isLoggedIn(state)) {\n          vehicles = vehicles.park_events\n        } else {\n          vehicles = vehicles.vehicles_in_public_space\n        }\n        let geoJson = {\n           \"type\":\"FeatureCollection\",\n           \"features\":[]\n        }\n        \n        let operatorcolors = {};\n        state.metadata.aanbieders.forEach(o => {\n          operatorcolors[o.system_id || o.value]=o.color;\n        });\n    \n        const md5 = require('md5');\n        var start_time = moment(state.filter.datum);\n        \n        let parkeerduurexclude = state.filter.parkeerduurexclude.split(\",\") || [];\n\n        console.log('vehicles', vehicles.vehicles_in_public_space)\n        vehicles.forEach(v => {\n          let in_public_space_since = isLoggedIn(state) ? v.start_time : v.in_public_space_since;\n    \n          var minutes = start_time.diff(moment(in_public_space_since), 'minutes');\n          const duration_bin = convertDurationToBin(minutes);\n          \n          let feature = {\n             \"type\":\"Feature\",\n             \"properties\":{\n                \"id\":md5(v.location.latitude+v.location.longitude),\n                \"system_id\": v.system_id || v.value,// v.value is used in the public map\n                \"in_public_space_since\": in_public_space_since,\n                \"duration_bin\": duration_bin,\n             },\n             \"geometry\":{\n                \"type\":\"Point\",\n                \"coordinates\":[\n                   v.location.longitude,\n                   v.location.latitude,\n                   0.0\n                ]\n             }\n          }\n\n          let markerVisible = ! isLoggedIn(state) || !parkeerduurexclude.includes(duration_bin.toString());\n          if(markerVisible) {\n            geoJson.features.push(feature);\n          }\n        })\n        console.log('geoJson in pollParkingData', geoJson)\n    \n        store_parkingdata.dispatch({\n          type: 'SET_VEHICLES',\n          payload: geoJson\n        })\n\n      }).catch(ex=>{\n        console.error(\"unable to decode JSON\");\n      });\n    }).catch(ex=>{\n      console.error(\"fetch error - unable to fetch JSON from %s\", url);\n    });\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n    // delay = cPollDelayParkingData * cPollDelayErrorMultiplyer;\n  } finally {\n    // timerid_parkingdata = setTimeout(updateParkingData, delay);\n  }\n}\n\nexport const forceUpdateParkingData = () => {\n  if(! store_parkingdata) { console.log('No store yet.'); return; }\n  if(undefined!==timerid_parkingdata) { clearTimeout(timerid_parkingdata); }\n  updateParkingData();\n}\n\nexport const initUpdateParkingData = (_store) => {\n  store_parkingdata = _store;\n  forceUpdateParkingData();\n}\n","// import moment from 'moment';\nimport { createFilterparameters, isLoggedIn } from './pollTools.js';\nimport { cPollDelayVerhuringenData, cPollDelayErrorMultiplyer, cPollDelayLoading } from '../constants.js';\nimport { DISPLAYMODE_RENTALS } from '../reducers/layers.js';\nconst md5 = require('md5');\n\nvar store_verhuringendata = undefined;\nvar timerid_verhuringendata = undefined;\n\n// Function that gets trip data and saves it into store_verhuringendata\nconst updateVerhuringenData = ()  => {\n  let delay = cPollDelayVerhuringenData;\n  try {\n    if(undefined===store_verhuringendata) {\n      console.error(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n\n    // Wait for zone data\n    const state = store_verhuringendata.getState();\n    if(state.layers.displaymode!==DISPLAYMODE_RENTALS) {\n      // console.log(`not viewing rentals data (viewing ${state.layers.displaymode}, need ${DISPLAYMODE_RENTALS}) - skip update`);\n      return true;\n    }\n    if(state.metadata.zones_loaded===false) {\n      delay = cPollDelayLoading;\n      // console.log(\"no zone metadata available yet - skipping rentals data update\");\n      return false;\n    }\n\n    const canfetchdata = isLoggedIn(state)&&state&&state.filter&&state.authentication.user_data.token;\n    if(!canfetchdata) {\n      store_verhuringendata.dispatch({ type: 'CLEAR_RENTALS_ORIGINS'});\n      store_verhuringendata.dispatch({ type: 'CLEAR_RENTALS_DESTINATIOINS'});\n    } else {\n      let url = \"https://api.deelfietsdashboard.nl/dashboard-api/rentals\";\n      // ?start_time=2021-12-06T09:15:00Z&end_time=2021-12-07T09:15:00Z&operators=cykl,flickbike,donkey,mobike,htm,gosharing,check,felyx,deelfietsnederland,keobike,lime,baqme,cargoroo,uwdeelfiets,hely&zone_ids=34217\n      let options = {};\n      if(null!==state.filter&&null!==state.authenticationdata) {\n        url = \"https://api.deelfietsdashboard.nl/dashboard-api/rentals\";\n        let filterparams = createFilterparameters(DISPLAYMODE_RENTALS, state.filter, state.metadata);\n        if(filterparams.length>0) {\n          url += \"?\" + filterparams.join(\"&\");\n        }\n        options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      }\n      fetch(url, options).then(function(response) {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n        \n        response.json().then(function(data) {\n          let verhuringen = isLoggedIn ? data : [];\n\n          // generateGeoJsonForVerhuringen :: type ENUM 'start_rentals'|'end_rentals'\n          const generateGeoJsonForVerhuringen = (dataObject, type) => {\n            // Validation\n            if(! dataObject) return;\n            if(! type || (type !== 'start_rentals' && type !== 'end_rentals')) {\n              console.error('Type is invalid. Type is: ', type)\n              return;\n            }\n\n            let geoJson = {\n              \"type\":\"FeatureCollection\",\n              \"features\":[]\n            }\n\n            // Map data\n            dataObject[type].forEach(v => {\n              let feature = {\n                 \"type\":\"Feature\",\n                 \"properties\":{\n                    \"id\": md5(v.location.latitude+v.location.longitude),\n                    \"system_id\": v.system_id,\n                    \"arrival_time\": v.arrival_time,\n                    \"departure_time\": v.departure_time,\n                    \"duration_bin\": 0,\n                    \"color\": \"#38ff71\" // color\n                 },\n                 \"geometry\":{\n                    \"type\":\"Point\",\n                    \"coordinates\": [\n                       v.location.longitude,\n                       v.location.latitude,\n                       0.0\n                    ]\n                 }\n              }\n              geoJson.features.push(feature);\n            })\n\n            return geoJson;\n          }\n\n          store_verhuringendata.dispatch({\n            type: 'SET_RENTALS_ORIGINS',\n            payload: generateGeoJsonForVerhuringen(verhuringen, 'start_rentals')\n          })\n        \n          store_verhuringendata.dispatch({\n            type: 'SET_RENTALS_DESTINATIONS',\n            payload: generateGeoJsonForVerhuringen(verhuringen, 'end_rentals')\n          })\n        \n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n          // setJson(false);\n        });\n      }).catch(ex=>{\n        console.error(\"fetch error - unable to fetch JSON from %s\", url);\n        // setJson(false);\n      });\n    }\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n    delay = cPollDelayVerhuringenData * cPollDelayErrorMultiplyer;\n  } finally {\n    // timerid_verhuringendata = setTimeout(updateVerhuringenData, delay);\n  }\n}\n\nexport const forceUpdateVerhuringenData = () => {\n  if(undefined!==timerid_verhuringendata) { clearTimeout(timerid_verhuringendata); }\n  updateVerhuringenData();\n}\n\nexport const initUpdateVerhuringenData = (_store) => {\n  store_verhuringendata = _store;\n  forceUpdateVerhuringenData();\n}\n","import { useEffect, useRef, useState } from 'react';\nimport {\n Switch,\n Route,\n useLocation,\n} from \"react-router-dom\";\nimport moment from 'moment';\nimport { store } from './AppProvider.js';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport Menu from './components/Menu.jsx';\nimport MenuSecondary from './components/Menu/MenuSecondary.jsx';\nimport MapPage from './pages/MapPage.jsx';\nimport ContentPage from './pages/ContentPage.jsx';\nimport StatsPage from './pages/StatsPage.jsx';\nimport Login from './pages/Login.jsx';\nimport Monitoring from './pages/Monitoring.jsx';\nimport FilterbarDesktop from './components/Filterbar/FilterbarDesktop.jsx';\nimport FilterbarMobile from './components/Filterbar/FilterbarMobile.jsx';\nimport About from './components/About/About.jsx';\nimport Overlay from './components/Overlay/Overlay.jsx';\nimport {SelectLayerMobile} from './components/SelectLayer/SelectLayerMobile.jsx';\n\nimport { initAccessControlList } from './poll-api/metadataAccessControlList.js';\nimport { updateZones } from './poll-api/metadataZones.js';\nimport { updateZonesgeodata } from './poll-api/metadataZonesgeodata.js';\n\nimport { initUpdateParkingData } from './poll-api/pollParkingData.js';\nimport {\n  initUpdateVerhuringenData\n} from './poll-api/pollVerhuringenData.js';\n\nimport {\n    DISPLAYMODE_PARK,\n    DISPLAYMODE_RENTALS,\n    DISPLAYMODE_OTHER,\n  } from './reducers/layers.js';\n\nimport './App.css';\n\nfunction App() {\n  const [pathName, setPathName] = useState(document.location.pathname);\n  const [uriParams, setUriParams] = useState(document.location.search);\n  \n  const dispatch = useDispatch()\n  \n  const mapContainer = useRef(null);\n\n  let location = useLocation();\n  useEffect(() => {\n    setPathName(location ? location.pathname : null);\n    setUriParams(location ? location.search : null);\n  }, [location]);\n  \n  useEffect(() => {\n    if(uriParams!==null) {\n      let params = new URLSearchParams(uriParams);\n      let view = params.get('view')\n      if(view) {\n        try {\n          console.log(decodeURIComponent(view));\n          const importstate = JSON.parse(decodeURIComponent(view));\n          // force update to map extent\n          // importstate.layers.extent = importstate.layers.mapextent;\n          dispatch({type: 'IMPORT_STATE', payload: importstate });\n          \n          setTimeout(() => dispatch({type: 'LAYER_SET_ZONES_EXTENT', payload: importstate.layers.mapextent}), 2500);\n          return;\n        } catch(ex) {\n          console.warn(\"unable to decode application state\")\n          alert(\"Ongeldige link ingegeven\");\n        }\n        // continue\n      }\n    }\n    \n    let payload;\n    if(pathName.includes(\"/map/park\")||pathName==='/') {\n      payload=DISPLAYMODE_PARK;\n    } else if(pathName.includes(\"/map/rentals\")) {\n      payload=DISPLAYMODE_RENTALS;\n    } else {\n      payload=DISPLAYMODE_OTHER;\n    }\n    dispatch({type: 'LAYER_SET_DISPLAYMODE',payload });\n\n  }, [pathName, uriParams, dispatch]);\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  const filterDate = useSelector(state => {\n    return state.filter ? state.filter.datum : false;\n  });\n\n  const isLayersMobileVisible = useSelector(state => {\n    return state.ui ? state.ui['MenuSecondary.layers'] : false;\n  });\n\n  const isFilterBarVisible = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR'] : false;\n  });\n\n  const filter = useSelector(state => {\n    return state.filter;\n  });\n  \n  const layers = useSelector(state => {\n    return state.layers;\n  });\n\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n  \n  const metadata = useSelector(state => {\n    return state.metadata;\n  });\n\n  // Set date to current date/time on load\n  useEffect(() => {\n    const setFilterDatum = newdt => {\n      dispatch({\n        type: 'SET_FILTER_DATUM',\n        payload: newdt.toISOString()\n      })\n    }\n\n    if(moment(filterDate).diff(moment(), 'minutes') < -10) {\n      setFilterDatum(moment().toDate())\n    }\n  }, [filterDate, dispatch]);\n\n  /*\n  To load data using the API we use the scripts in the poll-api folder.\n  We need zones to be able to fetch parking & trips data.\n\n  First, on app load, we load user information.\n  Then, we load the zones.\n  As soon as the zones are loaded, we load the parking data and rentals data.\n  We reload the parking data and rentals data if the filters or the URL change.\n  */\n\n  // On app start: get user data\n  useEffect(() => {\n    initAccessControlList(store);\n  }, [isLoggedIn]);\n  \n  useEffect(() => {\n    console.log('useEffect zones', filter.gebied)\n    updateZones(store);\n  }, [isLoggedIn, metadata.metadata_loaded, filter.gebied])\n\n  useEffect(() => {\n    console.log('useEffect zones geodata')\n    updateZonesgeodata(store);\n  }, [isLoggedIn, filter.gebied, metadata.zones_loaded, filter.zones])\n\n  // On app start, if zones are loaded or pathName/filter is changed: reload data\n  useEffect(() => {\n    initUpdateParkingData(store);\n    initUpdateVerhuringenData(store);\n  }, [isLoggedIn, metadata.zones_loaded, pathName, filter, layers]);\n\n  // Mobile menu: Filters / Layers\n  const renderMobileMenus = () => {\n    return <div>\n      <div className=\"hidden sm:block h-full\">\n        <FilterbarDesktop isVisible={isFilterBarVisible} displayMode={displayMode} />\n      </div>\n      <div className=\"block sm:hidden\">\n        <FilterbarMobile isVisible={isFilterBarVisible} displayMode={displayMode} />\n      </div>\n      <SelectLayerMobile />\n    </div>\n  }\n\n  const renderMapElements = () => {\n    return <>\n      <div key=\"mapContainer\" ref={mapContainer} className=\"map-layer top-0\"></div>\n      <MenuSecondary />\n      {renderMobileMenus()}\n    </>\n  }\n\n  return (\n    <div className={`app ${(isFilterBarVisible || isLayersMobileVisible) ? 'overflow-y-hidden' : ''}`}>\n      <div className=\"gui-layer\">\n        <Switch>\n          <Route exact path=\"/\">\n            <MapPage mapContainer={mapContainer} />\n            {renderMapElements()}\n          </Route>\n          <Route exact path=\"/login\">\n            <Overlay>\n              <MapPage mapContainer={mapContainer} />\n              <Login />\n            </Overlay>\n            <div key=\"mapContainer\" ref={mapContainer} className=\"map-layer top-0\"></div>\n          </Route>\n          <Route exact path=\"/map/park\">\n            <MapPage mapContainer={mapContainer} />\n            {renderMapElements()}\n          </Route>\n          <Route exact path=\"/map/rentals\">\n            <MapPage mapContainer={mapContainer} />\n            {renderMapElements()}\n          </Route>\n          <Route exact path=\"/stats/overview\">\n            <ContentPage>\n              <StatsPage />\n            </ContentPage>\n            {renderMobileMenus()}\n          </Route>\n          <Route exact path=\"/monitoring\">\n            <Monitoring />\n          </Route>\n          <Route exact path=\"/over\">\n            <ContentPage>\n              <About />\n            </ContentPage>\n          </Route>\n        </Switch>\n\n        <Menu pathName={pathName} />\n\n       </div>\n     </div>\n  );\n}\n\nexport default App;\n","import { getEmptyZonesGeodataPayload } from './metadataZonesgeodata';\n\nconst isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nexport const updateZones = (store_zones)  => {\n  try {\n    if(undefined===store_zones) {\n      console.log(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n    \n    const state = store_zones.getState();\n    if(state.metadata.metadata_loaded===false) {\n      console.log(\"no metadata available yet - skipping zones update\");\n      return false;\n    }\n    \n    let url_zones=\"\";\n    if(!isLoggedIn(state)||!state) { // ||state.filter.gebied===\"\"\n      store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n      store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n      \n      return;\n    } if(state.filter.gebied===\"\") {\n      store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n      store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n\n      return;\n      \n      // later: show outlines for all municipalities\n      // url_zones=\"https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_type=municipality\";\n    } else {\n      // https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=GM0518\n      url_zones=\"https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=\"+state.filter.gebied;\n\n      store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: false});\n    }\n\n    // let url_geodata=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\"\n    // https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=34217&include_geojson=true\n    let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n    \n    fetch(url_zones, options).then((response) => {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n\n      response.json()\n        .then((metadata) => {\n          // items: { \"municipality\": \"GM0785\", \"name\": \"Goirle\", \"owner\": null, \"zone_id\": 34278, \"zone_type\": \"municipality\"}\n          store_zones.dispatch({ type: 'SET_ZONES', payload: metadata.zones});\n          store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n        })\n      }).catch(ex=>{\n        console.error(\"unable to decode JSON\");\n      });\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n  }\n}\n","const isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nexport const getEmptyZonesGeodataPayload = () => {\n  return  {\n    \"data\": {\n      \"type\":\"FeatureCollection\",\n      \"features\":[]\n    },\n    \"filter\": \"\"\n  }\n}\n\nexport const updateZonesgeodata = (store)  => {\n  try {\n    if(undefined===store) {\n      // console.log(\"no redux state available yet - skipping zones geodata update\");\n      return false;\n    }\n    \n    const state = store.getState();\n    if(state.metadata.zones_loaded===false) {\n      console.log(\"no zone metadata available yet - skipping zones geodata update\");\n      return false;\n    }\n\n    let zone_ids=\"\";\n    if(!isLoggedIn(state)||!state) {\n      // no filter data available\n      zone_ids = \"\";\n    } else if (state.filter.gebied===\"\") {\n      // get bounds of all municipalities\n      console.log(\"set empty zones payload (gebied leeg)\")\n      zone_ids = state.metadata.zones.filter(zone=>(zone.zone_type===\"municipality\")).map(zone=>zone.zone_id).join(\",\");\n    } else if (state.filter.zones.length===0) {\n      // get bounds of single municipality zone\n      let list_g = state.metadata.gebieden.filter(gebied=>gebied.gm_code===state.filter.gebied).map(gebied=>gebied.gm_code);\n      let list_z = state.metadata.zones.filter(zone=>(zone.zone_type===\"municipality\"&&list_g.includes(zone.municipality)));\n      console.log(\"set empty zones payload (zones length 0)\", list_g, list_z)\n      zone_ids = list_z.map(zone=>zone.zone_id).join(\",\");\n    } else {\n      console.log(\"set empty zones payload (selected zones\")\n      // get bounds of all selected zones\n      zone_ids = state.filter.zones; // use selected zones\n    }\n\n    if(zone_ids===\"\") {\n      store.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n      return;\n    }\n    \n    // https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=GM0518\n    let url_zonesgeodata = \"https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=\"+zone_ids+\"&&include_geojson=true\";\n    // let url_geodata=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\"\n    // https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=34217&include_geojson=true\n    let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n    fetch(url_zonesgeodata, options).then((response) => {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n    \n      response.json()\n        .then((metadata) => {\n          console.log(\"got zones geodata for \", state.filter.zones||'all zones')\n          const st = require('geojson-bounds');\n          \n          // convert to standard geojson here\n          let geojson = {\n             \"type\":\"FeatureCollection\",\n             \"features\":[]\n          }\n          \n          let fullextent = undefined;\n\n          metadata.zones.forEach((zonedata, idx) => {\n            switch(zonedata.geojson.type) {\n              case \"MultiPolygon\":\n              case \"Polygon\":\n                let feature = {\n                   \"type\":\"Feature\",\n                   \"geometry\": zonedata.geojson\n                }\n                geojson.features.push(feature);\n                \n                let extent = st.extent(feature)\n                if(undefined===fullextent) {\n                  fullextent=extent;\n                } else {\n                  fullextent[0]=Math.min(extent[0],fullextent[0]);\n                  fullextent[1]=Math.min(extent[1],fullextent[1]);\n                  fullextent[2]=Math.max(extent[2],fullextent[2]);\n                  fullextent[3]=Math.max(extent[3],fullextent[3]);\n                }\n\n                break;\n              default:\n                console.warn(\"metadataZonesgeodata - don't know how to handle %s\", zonedata.type, zonedata);\n                break\n            }\n          })\n          \n          let payload = { data: geojson, filter: state.filter.zones, bounds: fullextent};\n          store.dispatch({ type: 'SET_ZONES_GEODATA', payload});\n          store.dispatch({ type: 'LAYER_SET_ZONES_EXTENT', payload: fullextent })\n        }).catch(ex=>{ console.error(\"unable to decode JSON\", ex); });\n      }).catch(ex=>{ console.error(\"unable to fetch zone geodata\"); });\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n  }\n}","import React, { Component } from 'react';\nimport {\n BrowserRouter as Router,\n} from \"react-router-dom\";\n// import { bindActionCreators } from 'redux';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { connect } from 'react-redux';\n\nimport moment from 'moment';\nimport thunk from 'redux-thunk';\n\nimport appReducer from './reducers';\nimport App from './App';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst md5 = require('md5');\n\n// Get persistentState from localStorage\nconst theState = localStorage.getItem('CROWDD_reduxState')\nconst persistedState = theState ? JSON.parse(theState) : {};\n\nexport const store = createStore(\n  appReducer,\n  persistedState,\n  composeEnhancers(applyMiddleware(thunk)),\n);\n\n// Store Redux state into localStorage\nstore.subscribe(() => {\n  const storeState = store.getState();\n\n  const oldFilterHash = localStorage.getItem('CROWDD_filterhash') || false;\n  const newFilterHash = md5(JSON.stringify(storeState.filter))\n  if(newFilterHash!==oldFilterHash) {\n    // console.log(\"filter changed - invalidate data and zones here!\");\n    localStorage.setItem('CROWDD_filterhash', newFilterHash)\n    \n    // store.dispatch({ type: 'CLEAR_ZONES', payload: null});\n    store.dispatch({ type: 'CLEAR_VEHICLES', payload: null});\n    store.dispatch({ type: 'CLEAR_RENTALS_ORIGINS', payload: null});\n    store.dispatch({ type: 'CLEAR_RENTALS_DESTINATIONS', payload: null});\n  }\n  \n  const storeStateToSaveInLocalStorage = {\n    last_update: moment().unix(),\n    authentication: storeState.authentication,\n    filter: storeState.filter,\n    layers: storeState.layers,\n    ui: storeState.ui\n  }\n  localStorage.setItem('CROWDD_reduxState', JSON.stringify(storeStateToSaveInLocalStorage))\n})\n\nclass AppProvider extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <Router>\n        <App content={this.props.content} />\n        </Router>\n      </Provider>\n    )\n  }\n}\n\nfunction connectWithStore(store, WrappedComponent, ...args) {\n  let ConnectedWrappedComponent = connect(...args)(WrappedComponent)\n  return function (props) {\n    return <ConnectedWrappedComponent {...props} store={store} />\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    // config: getConfig(state),\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    // actions: bindActionCreators(actions, dispatch),\n  }\n}\n\nexport default AppProvider = connectWithStore(\n  store,\n  AppProvider,\n  mapStateToProps,\n  mapDispatchToProps\n)\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppProvider from './AppProvider';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}