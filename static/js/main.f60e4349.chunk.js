(this["webpackJsonpdashboarddeelmobiliteit-app"]=this["webpackJsonpdashboarddeelmobiliteit-app"]||[]).push([[0],{175:function(e,t,n){},215:function(e,t,n){},223:function(e,t,n){},228:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},369:function(e,t,n){},370:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){},373:function(e,t,n){},374:function(e,t,n){},393:function(e,t,n){},394:function(e,t,n){},395:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){},398:function(e,t,n){},399:function(e,t,n){},400:function(e,t,n){},402:function(e,t,n){},403:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(45),c=n.n(i),o=(n(215),n(6)),s=n(101),l=n(102),d=n(103),u=n(108),m=n(46),f=n(4),p=n(73),b=n(20),h=n.n(b),j=n(183);var g=n(48),v={aanbieders:[],gebieden:[],zones:[],vehicle_types:[],metadata_loaded:!1,zones_loaded:!1},y=function(e){for(var t=[],n=Math.trunc(360/(e+1)),a=0;a<e;a++){var r=a*n,i=a%2===0?35:65,c=a%2===1?40:60;t.push("hsla(".concat(r,",").concat(c,"%,").concat(i,"%,").concat(1,")"))}return t};var O={data:null};var _={origins:{},destinations:{}};var x={visible:!0,gebied:"",zones:"",datum:(new Date).toISOString(),intervalstart:(new Date).toISOString(),intervalduur:36e5,aanbiedersexclude:"",parkeerduurexclude:"",voertuigtypesexclude:"",afstandexclude:"",herkomstbestemming:""};var E={user_data:null};var k=n(48),S={data:[],filter:""};var N="displaymode-park",w="displaymode-rentals",T="displaymode-other",L="parkeerdata-heatmap",R="parkeerdata-clusters",I="parkeerdata-voertuigen",A="verhuurdata-heatmap",D="verhuurdata-clusters",M="verhuurdata-voertuigen",C={zones_visible:!1,displaymode:N,view_park:I,view_rentals:M,extent:[]},z=n(48);var F=n(100),G={SELECTLAYER:!0};var B=Object(p.b)({last_update:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_LAST_UPDATE"===t.type?t.payload:e},metadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AANBIEDERS":var n=e.aanbieders?e.aanbieders:[],a=y(t.payload.length),r={cykl:"#a5e067",flickbike:"#fe431d",mobike:"#ed5144",donkey:"#ed5144",htm:"#db291e",jump:"#fd3e48",gosharing:"#77b136",check:"#8f3af8",felyx:"#064627",lime:"#1bd831",baqme:"#4bdfbb",cargoroo:"#ffcb34",hely:"#fd645c",tier:"#0d123f"},i=t.payload.map((function(e,t){var n=r[e.system_id]?r[e.system_id]:a[t];return Object.assign(e,{color:n})}));return g(JSON.stringify(n))===g(JSON.stringify(i))?e:Object(o.a)(Object(o.a)({},e),{},{aanbieders:i});case"SET_GEBIEDEN":var c=e.gebieden?e.gebieden:[];return g(JSON.stringify(c))===g(JSON.stringify(t.payload))?e:Object(o.a)(Object(o.a)({},e),{},{gebieden:t.payload});case"SET_ZONES":var s=e.zones?e.zones:[];return g(JSON.stringify(s))===g(JSON.stringify(t.payload))?e:Object(o.a)(Object(o.a)({},e),{},{zones:t.payload});case"CLEAR_ZONES":return Object(o.a)(Object(o.a)({},e),{},{zones:[],zones_loaded:!1});case"SET_VEHICLE_TYPES":var l=e.vehicle_types?e.vehicle_types:[];return JSON.stringify(g(l))===JSON.stringify(g(t.payload))?e:Object(o.a)(Object(o.a)({},e),{},{vehicle_types:t.payload});case"SET_METADATA_LOADED":return Object(o.a)(Object(o.a)({},e),{},{metadata_loaded:t.payload});case"SET_ZONES_LOADED":return Object(o.a)(Object(o.a)({},e),{},{zones_loaded:t.payload});default:return e}},vehicles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VEHICLES":var n=t.payload;return{data:n};case"SET_VEHICLE":var a=t.payload;if(!a.uuid)return{};var r=e.data.filter((function(e){return e.uuid!==a.uuid}));return r.push(a),{data:r};case"CLEAR_VEHICLES":return{data:[]};default:return e}},rentals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RENTALS_ORIGINS":return Object.assign({},e,{origins:t.payload});case"SET_RENTALS_DESTINATIONS":return Object.assign({},e,{destinations:t.payload});case"CLEAR_RENTALS_ORIGINS":return Object.assign({},e,{origins:[]});case"CLEAR_RENTALS_DESTINATIONS":return Object.assign({},e,{destinations:[]});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER_VISIBLE":return console.log("reducer filter set filter visible %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{visible:t.payload});case"SET_FILTER_GEBIED":return e.gebied===t.payload?e:(console.log("reducer filter set gebied to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{gebied:t.payload,zones:""}));case"SET_FILTER_DATUM":return console.log("reducer filter set datum to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{datum:t.payload});case"SET_FILTER_INTERVAL_START":return console.log("reducer filter set interval start to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{intervalstart:t.payload});case"SET_FILTER_INTERVAL_DUUR":return console.log("reducer filter set interval duration to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{intervalduur:t.payload});case"SET_FILTER_HERKOMSTBESTEMMING":return console.log("reducer filter set herkomstbestemming to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{herkomstbestemming:t.payload});case"ADD_TO_FILTER_ZONES":console.log("add item %s to zones filter %o",t.payload,e);var n=[];if(e.zones)try{n=e.zones.split(",")||[]}catch(f){n=[]}return n.includes(t.payload)||n.push(t.payload),Object(o.a)(Object(o.a)({},e),{},{zones:n.join(",")});case"REMOVE_FROM_FILTER_ZONES":console.log("remove item %o from zones filter",t.payload);var a=e.zones.split(",")||[];return a=a.filter((function(e){return e.toString()!==t.payload.toString()})),Object(o.a)(Object(o.a)({},e),{},{zones:a.join(",")});case"CLEAR_FILTER_ZONES":return console.log("clear zones filter"),Object(o.a)(Object(o.a)({},e),{},{zones:""});case"ADD_TO_FILTER_MARKERS_EXCLUDE":var r=[];try{if(console.log("add item %s to parkeerduurexclude filter %o",t.payload,e),e.parkeerduurexclude)try{r=e.parkeerduurexclude.split(",")||[]}catch(f){r=[]}r.includes(t.payload)||r.push(t.payload)}catch(f){r=[]}return Object(o.a)(Object(o.a)({},e),{},{parkeerduurexclude:r.join(",")});case"REMOVE_FROM_FILTER_MARKERS_EXCLUDE":console.log("remove item %o from parkeerduurexclude filter",t.payload);var i=[];try{i=(i=e.parkeerduurexclude.split(",")||[]).filter((function(e){return e.toString()!==t.payload.toString()}))}catch(f){i=[]}return Object(o.a)(Object(o.a)({},e),{},{parkeerduurexclude:i.join(",")});case"CLEAR_FILTER_MARKERS_EXCLUDE":return console.log("clear parkeerduurexclude filter"),Object(o.a)(Object(o.a)({},e),{},{parkeerduurexclude:""});case"ADD_TO_FILTER_AFSTAND_EXCLUDE":var c=[];try{if(console.log("add item %s to afstandexclude filter %o",t.payload,e),e.afstandexclude)try{c=e.afstandexclude.split(",")||[]}catch(f){c=[]}c.includes(t.payload)||c.push(t.payload)}catch(f){c=[]}return Object(o.a)(Object(o.a)({},e),{},{afstandexclude:c.join(",")});case"REMOVE_FROM_FILTER_AFSTAND_EXCLUDE":console.log("remove item %o from afstandexclude filter",t.payload);var s=[];try{s=(s=e.afstandexclude.split(",")||[]).filter((function(e){return e.toString()!==t.payload.toString()}))}catch(f){s=[]}return Object(o.a)(Object(o.a)({},e),{},{afstandexclude:s.join(",")});case"CLEAR_FILTER_AFSTAND_EXCLUDE":return console.log("clear afstandexclude filter"),Object(o.a)(Object(o.a)({},e),{},{afstandexclude:""});case"ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE":var l=[];try{if(console.log("add item %s to voertuigtypesexclude filter %o",t.payload,e),e.voertuigtypesexclude)try{l=e.voertuigtypesexclude.split(",")||[]}catch(f){l=[]}l.includes(t.payload)||l.push(t.payload)}catch(f){l=[]}return Object(o.a)(Object(o.a)({},e),{},{voertuigtypesexclude:l.join(",")});case"REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE":console.log("remove item %o from voertuigtypesexclude filter",t.payload);var d=[];try{d=(d=e.voertuigtypesexclude.split(",")||[]).filter((function(e){return e.toString()!==t.payload.toString()}))}catch(f){d=[]}return Object(o.a)(Object(o.a)({},e),{},{voertuigtypesexclude:d.join(",")});case"CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE":return console.log("clear voertuigtypesexclude filter"),Object(o.a)(Object(o.a)({},e),{},{voertuigtypesexclude:""});case"ADD_TO_FILTER_AANBIEDERS_EXCLUDE":var u=[];try{e.aanbiedersexclude&&(u=e.aanbiedersexclude.split(",")||[]),u.includes(t.payload)||u.push(t.payload)}catch(f){u=[]}return Object(o.a)(Object(o.a)({},e),{},{aanbiedersexclude:u.join(",")});case"REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE":console.log("remove item %s from aanbiedersexclude filter",t.payload);var m=[];try{m=(m=e.aanbiedersexclude.split(",")||[]).filter((function(e){return e!==t.payload}))}catch(f){m=[]}return Object(o.a)(Object(o.a)({},e),{},{aanbiedersexclude:m.join(",")});case"CLEAR_FILTER_AANBIEDERS_EXCLUDE":return console.log("clear aanbiedersexclude filter"),Object(o.a)(Object(o.a)({},e),{},{aanbiedersexclude:""});case"RESET_FILTER":return console.log("reset filter"),x;default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":var n=t.payload;return{user_data:n};case"CLEAR_USER":return{user_data:null};default:return e}},zones_geodata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;if("SET_ZONES_GEODATA"===t.type){var n=e.data?e.data:[],a=k(JSON.stringify(n))!==k(JSON.stringify(t.payload.data)),r=e.filter!==t.payload.filter;return a||r?Object(o.a)(Object(o.a)({},e),{},{data:t.payload.data,filter:t.payload.filter}):e}return e},layers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LAYER_SET_DISPLAYMODE":return e.displaymode===t.payload?e:Object(o.a)(Object(o.a)({},e),{},{displaymode:t.payload});case"LAYER_SET_VIEW_PARK":return e.view_park===t.payload?e:Object(o.a)(Object(o.a)({},e),{},{view_park:t.payload});case"LAYER_SET_VIEW_RENTALS":return e.view_rentals===t.payload?e:Object(o.a)(Object(o.a)({},e),{},{view_rentals:t.payload});case"LAYER_TOGGLE_ZONES_VISIBLE":return Object(o.a)(Object(o.a)({},e),{},{zones_visible:!e.zones_visible});case"LAYER_SET_ZONES_EXTENT":return z(JSON.stringify(t.payload))!==z(JSON.stringify(e.extent||[]))?Object(o.a)(Object(o.a)({},e),{},{extent:t.payload}):e;default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;return"SET_VISIBILITY"===t.type?Object(o.a)(Object(o.a)({},e),{},Object(F.a)({},t.payload.name,t.payload.visibility)):e}}),V=n(13),U=n(25),Y=(n(223),n(1));function H(e){var t=e.pathName,n=t===e.path||t===e.href||"/"===t&&"/map/park"===e.path,a=n?e.icon.replace(".svg","-active.svg"):e.icon;return Object(Y.jsxs)(Y.Fragment,{children:[e.path&&Object(Y.jsxs)(m.b,{className:"\n          text-menu\n          ".concat(n?"is-active":"","\n        "),to:e.path,href:e.href,onClick:e.onClick,children:[a?Object(Y.jsx)("img",{alt:e.text,src:a}):"",Object(Y.jsx)("span",{className:"".concat(n||!a?"inline-block":"hidden"," sm:inline-block  ml-2"),children:e.text})]}),!e.path&&Object(Y.jsxs)("a",{className:"\n          text-menu\n          inline-block cursor-pointer\n          ".concat(n?"is-active":"","\n        "),href:e.href,onClick:e.onClick,children:[a?Object(Y.jsx)("img",{alt:e.text,src:a}):"",Object(Y.jsx)("span",{className:"".concat(n||!a?"inline-block":"hidden"," sm:inline-block  ml-2"),children:e.text})]})]})}function Z(e){return Object(Y.jsxs)(Y.Fragment,{children:[e.path&&Object(Y.jsx)(m.b,{className:"text-link",to:e.path,href:e.href,onClick:e.onClick,children:Object(Y.jsx)("span",{className:"block",children:e.text})}),!e.path&&Object(Y.jsx)("a",{className:"text-link inline-block cursor-pointer",href:e.href,onClick:e.onClick,children:Object(Y.jsx)("span",{className:"block",children:e.text})})]})}var P=function(e){var t=e.pathName,n=Object(a.useState)(!1),r=Object(V.a)(n,2),i=r[0],c=r[1],o=Object(f.c)(),s=Object(f.d)((function(e){return!!e.authentication.user_data}));return Object(Y.jsx)("div",{className:" Menu fixed w-full mx-0 bottom-0 bg-white sm:bg-transparent sm:bottom-0.5 sm:mx-8 sm:w-auto ",children:Object(Y.jsxs)("div",{className:" Menu-inner px-4 mx-auto bg-white box-border w-full flex flex-col justify-center sm:shadow-lg sm:m-4 sm:mb-1 sm:rounded-3xl ",children:[Object(Y.jsxs)("div",{className:" whitespace-nowrap ",children:[s&&Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(H,{pathName:t,text:"Aanbod",path:"/map/park",icon:"/images/components/Menu/aanbod.svg"}),Object(Y.jsx)(H,{pathName:t,text:"Verhuringen",path:"/map/rentals",icon:"/images/components/Menu/verhuringen.svg"}),Object(Y.jsx)(H,{pathName:t,text:"Ontwikkeling",href:"/stats/overview",icon:"/images/components/Menu/ontwikkeling.svg"}),Object(Y.jsx)(H,{pathName:t,text:"",icon:"/images/components/Menu/settings.svg",onClick:function(e){e.preventDefault(),c(!i)}})]}),!s&&Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsx)(m.b,{className:"text-menu",to:"/login",children:"Log in"})}),s&&!1]}),i&&Object(Y.jsx)(Y.Fragment,{children:Object(Y.jsxs)("div",{className:" Menu-subMenu absolute ",children:[Object(Y.jsx)(Z,{text:"Log uit",onClick:function(e){e.preventDefault(),c(!i),s&&o({type:"CLEAR_USER",payload:null})}}),Object(Y.jsx)(Z,{text:"Feedback \ud83d\udce8",href:"mailto:info@deelfietsdashboard.nl?subject=Feedback Dashboard Deelmobiliteit&body=Ik heb feedback: ",onClick:function(e){c(!i)}})]})})]})})};n(228);function X(e){return Object(Y.jsx)("a",{href:"#",className:"MenuSecondaryItem cursor-pointer mx-2",onClick:e.onClick,children:e.text})}var J=function(){var e=Object(f.c)(),t=function(t,n){e({type:"SET_VISIBILITY",payload:{name:t,visibility:n}})};return Object(Y.jsxs)("div",{className:"MenuSecondary block sm:hidden absolute left-0",children:[Object(Y.jsx)(X,{text:"Filters",onClick:function(){t("FILTERBAR",!0)}}),Object(Y.jsx)(X,{text:"Lagen",onClick:function(){t("MenuSecondary.layers",!0)}})]})},W=n(21),K=n.n(W),q=n(30),$=n(87),Q=n.n($),ee=n(185),te=n.n(ee),ne=(n(230),function(e,t){var n=e.filter((function(e){return e.system_id===t}));return n&&n[0]?n[0].color:"#666"}),ae={"vehicles-point":{id:"vehicles-point",type:"symbol",source:"vehicles",layout:{"icon-image":["concat",["get","system_id"],":",["get","duration_bin"]],"icon-size":["interpolate",["linear"],["zoom"],11,.4,16,1],"icon-allow-overlap":!0},minzoom:7},"vehicles-clusters":{id:"vehicles-clusters",type:"circle",source:"vehicles-clusters",filter:["has","point_count"],paint:{"circle-color":"#1FA024","circle-radius":["step",["get","point_count"],20,100,30,750,40]},maxzoom:18},"vehicles-clusters-count":{id:"vehicles-clusters-count",type:"symbol",source:"vehicles-clusters",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","point_count"],16,100,20,750,30]},paint:{"text-color":"#fff"},maxzoom:18},"vehicles-clusters-point":{id:"vehicles-clusters-point",type:"symbol",source:"vehicles",filter:["!",["has","point_count"]],layout:{"icon-image":["concat",["get","system_id"],":",["get","duration_bin"]],"icon-size":1,"icon-allow-overlap":!0},minzoom:18},"vehicles-heatmap-city-level":{id:"vehicles-heatmap-city-level",type:"heatmap",source:"vehicles",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,1e-4,10,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,.0025,5,.005,7.5,.01,10,.05,12,.075,15,.1,20,1],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.25,"#ffd837",.5,"#fe862e",.75,"#fd3e48",1,"#9a231f"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,10,10,12,12,20,15,40,20,60,30,100,40,100],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,.8]}},"rentals-origins-point":{id:"rentals-origins-point",type:"symbol",source:"rentals-origins",layout:{"icon-image":["concat",["get","system_id"],":",["get","duration_bin"]],"icon-size":["interpolate",["linear"],["zoom"],11,.4,16,1],"icon-allow-overlap":!0}},"rentals-origins-clusters":{id:"rentals-origins-clusters",type:"circle",source:"rentals-origins-clusters",filter:["has","point_count"],paint:{"circle-color":"#1FA024","circle-radius":["step",["get","point_count"],20,100,30,750,40]},maxzoom:18},"rentals-origins-clusters-count":{id:"rentals-origins-clusters-count",type:"symbol",source:"rentals-origins-clusters",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","point_count"],16,100,20,750,30]},paint:{"text-color":"#fff"},maxzoom:18},"rentals-origins-clusters-point":{id:"rentals-origins-clusters-point",type:"symbol",source:"rentals-origins",filter:["!",["has","point_count"]],layout:{"icon-image":["concat",["get","system_id"],":",["get","duration_bin"]],"icon-size":1,"icon-allow-overlap":!0},minzoom:18},"rentals-origins-heatmap-city-level":{id:"rentals-origins-heatmap-city-level",type:"heatmap",source:"rentals-origins",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,1e-4,10,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,.0025,5,.005,7.5,.01,10,.05,12,.075,15,.1,20,1],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.25,"#ffd837",.5,"#fe862e",.75,"#fd3e48",1,"#9a231f"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,10,10,12,12,20,15,40,20,60,30,100,40,100],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,.8]}},"rentals-destinations-point":{id:"rentals-destinations-point",type:"symbol",source:"rentals-destinations",layout:{"icon-image":["concat",["get","system_id"],":",["get","duration_bin"]],"icon-size":["interpolate",["linear"],["zoom"],11,.4,16,1],"icon-allow-overlap":!0}},"rentals-destinations-clusters":{id:"rentals-destinations-clusters",type:"circle",source:"rentals-destinations-clusters",filter:["has","point_count"],paint:{"circle-color":"#1FA024","circle-radius":["step",["get","point_count"],20,100,30,750,40]},maxzoom:18},"rentals-destinations-clusters-count":{id:"rentals-destinations-clusters-count",type:"symbol",source:"rentals-destinations-clusters",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","point_count"],16,100,20,750,30]},paint:{"text-color":"#fff"},maxzoom:18},"rentals-destinations-clusters-point":{id:"rentals-destinations-clusters-point",type:"symbol",source:"rentals-destinations",filter:["!",["has","point_count"]],layout:{"icon-image":["concat",["get","system_id"],":",["get","duration_bin"]],"icon-size":1,"icon-allow-overlap":!0},minzoom:18},"rentals-destinations-heatmap-city-level":{id:"rentals-origins-heatmap-city-level",type:"heatmap",source:"rentals-origins",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,1e-4,10,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,.0025,5,.005,7.5,.01,10,.05,12,.075,15,.1,20,1],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.25,"#ffd837",.5,"#fe862e",.75,"#fd3e48",1,"#9a231f"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,10,10,12,12,20,15,40,20,60,30,100,40,100],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,.8]}},"zones-geodata":{id:"zones-geodata",type:"fill",source:"zones-geodata",paint:{"fill-color":"#1010e0","fill-opacity":.6}}},re={vehicles:{type:"geojson"},"vehicles-clusters":{type:"geojson",cluster:!0,clusterRadius:50},"rentals-origins":{type:"geojson"},"rentals-origins-clusters":{type:"geojson",cluster:!0,clusterRadius:50},"rentals-destinations":{type:"geojson"},"rentals-destinations-clusters":{type:"geojson",cluster:!0,clusterRadius:50}},ie='\n    <circle id="Ellipse_129" data-name="Ellipse 129" cx="12" cy="12" r="12" fill="#1fa024" opacity="0.304"></circle>\n    <g id="Ellipse_130" data-name="Ellipse 130" transform="translate(2 2)" fill="#1fa024" stroke="#fff" stroke-width="1">\n        <circle cx="10" cy="10" r="10" stroke="none"></circle>\n        <circle cx="10" cy="10" r="9.5" fill="none"></circle>\n    </g>\n    <circle id="Ellipse_192" data-name="Ellipse 192" cx="4.5" cy="4.5" r="4.5" transform="translate(14 1)" fill="#1f3ff0"></circle>\n';function ce(){return(ce=Object(q.a)(K.a.mark((function e(t){var n,a,r,i,c;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0,r=["#1FA024","#48E248","#FFD837","#FD3E48"];case 3:if(!(a<r.length)){e.next=12;break}return i=r[a],e.next=7,oe(t,i);case 7:c=e.sent,n.push(c);case 9:a++,e.next=3;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){return se.apply(this,arguments)}function se(){return(se=Object(q.a)(K.a.mark((function e(t,n){var a,r,i,c,o,s,l,d,u,m,f;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://www.w3.org/2000/svg",(a=document.createElementNS("http://www.w3.org/2000/svg","svg")).innerHTML=ie,i={},c={},(r=a).setAttribute("viewBox","0 0 24 24"),r.getElementById("Ellipse_192").setAttribute("fill",t),r.getElementById("Ellipse_129").setAttribute("fill",n),r.getElementById("Ellipse_130").setAttribute("fill",n),i.value=25,c.value=25,o=document.createElement("canvas"),r.setAttribute("width",i.value),r.setAttribute("height",c.value),o.width=i.value,o.height=c.value,s=(new XMLSerializer).serializeToString(r),l=window.URL||window.webkitURL||window,d=new Image,u=new Blob([s],{type:"image/svg+xml"}),m=l.createObjectURL(u),d.src=m,e.next=28,d.decode();case 28:return(f=o.getContext("2d")).drawImage(d,0,0),l.revokeObjectURL(m),e.abrupt("return",new Uint8Array(f.getImageData(0,0,d.width,d.height).data.buffer));case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le=function(e){return ce.apply(this,arguments)},de=n(48);h.a.locale("nl",te.a);var ue={check:"https://ridecheck.app/",felyx:"https://felyx.com/",gosharing:"https://go-sharing.com/"};function me(e){var t=Object(f.d)((function(e){return e.vehicles||null})),n=Object(f.d)((function(e){return e.rentals||null})),r=Object(f.d)((function(e){return!!e.authentication.user_data})),i=Object(f.d)((function(e){return e.layers?e.layers.extent:null}))||[],c=Object(f.d)((function(e){return e.metadata&&e.metadata.aanbieders?e.metadata.aanbieders:[]})),o=Object(f.d)((function(e){return e&&e.zones_geodata?e.zones_geodata:null})),s=e.mapContainer,l=Object(a.useState)(4.4671854),d=Object(V.a)(l,1)[0],u=Object(a.useState)(51.9250836),m=Object(V.a)(u,1)[0],p=Object(a.useState)(15),b=Object(V.a)(p,1)[0],j=Object(a.useState)(0),g=Object(V.a)(j,2),v=g[0],y=g[1],O=Object(a.useState)(""),_=Object(V.a)(O,2),x=_[0],E=_[1],k=Object(a.useState)([]),S=Object(V.a)(k,2),N=S[0],w=S[1],T=Object(a.useRef)(null);Object(a.useEffect)((function(){T.current||(T.current=new Q.a.Map({container:s.current,style:"mapbox://styles/nine3030/ckv9ni7rj0xwq15qsekqwnlz5",accessToken:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",center:[d,m],zoom:b,maxZoom:19,attributionControl:!1}),T.current.addControl(new Q.a.NavigationControl({showCompass:!1}),"bottom-right"),T.current.addControl(new Q.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"bottom-right"),T.current.on("load",(function(){y(v+1),window.ddMap=T.current})),T.current.dragRotate.disable(),T.current.touchZoomRotate.disableRotation())}),[t,o,d,m,b,v,s]);var L=function(e,t){if(T.current&&T.current.isStyleLoaded()){if(t){var n=T.current.getSource(e),a=t&&t.features?de(JSON.stringify(t.features)):de("No data yet");if(n){if(!N||N[e]!==a){var r=N;r[e]=a,w(r),T.current.getSource(e).setData(t)}}else if(t){var i=N;i[e]=a,w(i);var c=Object.assign({},{type:"geojson",data:t},re[e]?re[e]:{});T.current.addSource(e,c)}}}else setTimeout((function(){y(v+1)}),250)};return Object(a.useEffect)((function(){o&&o.data&&L("zones-geodata",o.data),t&&t.data&&(L("vehicles",t.data),L("vehicles-clusters",t.data)),n.origins&&n.origins.type&&(L("rentals-origins",n.origins),L("rentals-origins-clusters",n.origins)),n.destinations&&n.destinations.type&&(L("rentals-destinations",n.destinations),L("rentals-destinations-clusters",n.destinations))}),[t?t.data?t.data.features:t.data:t,n.origins?n.origins.features:n.origins,n.destinations,o,x,v,e.activeSource]),Object(a.useEffect)((function(){T.current&&i&&0!==i.length&&T.current.fitBounds(i)}),[i]),Object(a.useEffect)((function(){T.current&&T.current.isStyleLoaded()?(T.current.getStyle().layers.forEach((function(e){e.id.indexOf("vehicles-")>-1&&T.current.removeLayer(e.id),e.id.indexOf("rentals-")>-1&&T.current.removeLayer(e.id),e.id.indexOf("zones-geodata")>-1&&(T.current.removeLayer(e.id),E(""))})),e.layers.forEach((function(t){if(e.layers.indexOf(t)>=-1){var n=T.current.getLayer(t),a=T.current.getSource(ae[t].source);!n&&a&&T.current.addLayer(ae[t])}}))):setTimeout((function(){y(v+1)}),250),function(e,t,n){["vehicles-point","vehicles-clusters-point","rentals-origins-point","rentals-origins-clusters-point","rentals-destinations-point","rentals-destinations-clusters-point"].forEach((function(n){e.on("click",n,(function(n){for(var a=n.features[0].properties,r=ne(t,a.system_id),i=n.features[0].geometry.coordinates.slice();Math.abs(n.lngLat.lng-i[0])>180;)i[0]+=n.lngLat.lng>i[0]?360:-360;(new Q.a.Popup).setLngLat(i).setHTML('\n          <h1 class="mb-2">\n            <span\n              class="rounded-full inline-block w-4 h-4"\n              style="background-color: '.concat(r,';position: relative;top: 2px">\n            </span>\n            <span class="Map-popup-title ml-1" style="color: ').concat(r,';">\n              ').concat(a.system_id,'\n            </span>\n          </h1>\n          <div class="Map-popup-body">\n            ').concat(a.in_public_space_since?"<div>\n              Staat hier sinds ".concat(h()(a.in_public_space_since).locale("nl").fromNow(),"<br />\n              Geparkeerd sinds: ").concat(h()(a.in_public_space_since).format("DD-MM-YYYY HH:mm"),"\n            </div>"):"","\n\n            ").concat(ue&&ue[a.system_id]?'<div>\n              <a href="'.concat(ue[a.system_id],'" rel="external" target="_blank">\n                ').concat(ue[a.system_id],"\n              </a>\n            </div>"):"","\n          </div>\n        ")).addTo(e)})),e.on("mouseenter",n,(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",n,(function(){e.getCanvas().style.cursor=""}))}))}(T.current,c)}),[t,n.origins,n.destinations,o,v,e.layers,r,c]),Object(a.useEffect)((function(){var e=function(){var e=Object(q.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.current.hasImage(t.system_id+":0")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,le(t.color);case 4:e.sent.forEach((function(e,n){T.current.addImage(t.system_id+":"+n,{width:25,height:25,data:e})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();c.forEach((function(t){e(t)}))}),[c]),null}n(231);var fe=function(e){var t=Object(f.c)(),n=Object(a.useRef)(null),r=e.name.toUpperCase(),i=Object(f.d)((function(e){return!!e.ui&&e.ui[r]})),c=function(e,n){t({type:"SET_VISIBILITY",payload:{name:e,visibility:n}})},o=(e.options||{}).backgroundColor;return Object(Y.jsxs)("div",{className:"\n      SlideBox\n      direction-".concat(e.direction,"\n      relative\n      ").concat(i?"":"is-hidden","\n      z-10\n    "),ref:n,style:e.style||{},children:[Object(Y.jsx)("div",{className:" SlideBox-inner h-full ",style:{backgroundColor:o},children:e.children}),Object(Y.jsx)("div",{className:"SlideBox-toggle-wrapper z-10 overflow-hidden",children:Object(Y.jsx)("div",{className:"SlideBox-toggle",onClick:function(){return i&&c("FILTERBAR_EXTENDED",!1),void c(r,!i)},style:{backgroundColor:o},children:Object(Y.jsx)("span",{children:e.options.title||"Lagen"})})})]})};n(232);function pe(e){var t=Object(f.c)(),n=Object(f.d)((function(e){return!!e.filter&&""!==e.filter.gebied})),a=Object(f.d)((function(e){return!!e.layers&&e.layers.zones_visible})),r=Object(f.d)((function(e){return e.layers?e.layers.displaymode:N})),i=Object(f.d)((function(e){return e.layers?e.layers.view_park:I})),c=Object(f.d)((function(e){return e.layers?e.layers.view_rentals:M})),o=Object(f.d)((function(e){return!!e.authentication.user_data}));return r===T||r===w&&!1===n?null:Object(Y.jsx)(fe,{name:"SelectLayer",direction:"right",options:{title:"Lagen",backgroundColor:"#fff"},style:{position:"absolute",top:"8px",right:0},children:Object(Y.jsxs)("div",{className:"SelectLayer pr-1",children:[r===N?Object(Y.jsx)("div",{"data-type":"heat-map",className:"layer".concat(i!==L?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:L})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Heat map"})}):null,r===N?Object(Y.jsx)("div",{"data-type":"pointers",className:"layer".concat(i!==R?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:R})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Clusters"})}):null,r===N?Object(Y.jsx)("div",{"data-type":"vehicles",className:"layer".concat(i!==I?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:I})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Voertuigen"})}):null,r===w?Object(Y.jsx)("div",{"data-type":"heat-map",className:"layer".concat(c!==A?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_RENTALS",payload:A})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Heat map"})}):null,r===w?Object(Y.jsx)("div",{"data-type":"pointers",className:"layer".concat(c!==D?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_RENTALS",payload:D})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Clusters"})}):null,r===w?Object(Y.jsx)("div",{"data-type":"vehicles",className:"layer".concat(c!==M?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_RENTALS",payload:M})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Voertuigen"})}):null,o&&n?Object(Y.jsx)("div",{"data-type":"zones",className:"layer".concat(a?"":" layer-inactive"),onClick:function(){t({type:"LAYER_TOGGLE_ZONES_VISIBLE",payload:null})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Zones"})}):null]})})}n(233);var be=function(e){e.mode;var t=e.mapContainer,n=Object(f.d)((function(e){return!!e.layers&&e.layers.zones_visible})),a=Object(f.d)((function(e){return e.filter})),r=Object(f.d)((function(e){return e.layers?e.layers.displaymode:N})),i=Object(f.d)((function(e){return e.layers?e.layers.view_park:I})),c=Object(f.d)((function(e){return e.layers?e.layers.view_rentals:M})),o=[];n&&o.push("zones-geodata");var s="";if(console.log("Mappage got displaymode",r),r===N)switch(i){case L:o.push("vehicles-heatmap-city-level"),s="vehicles";break;case R:o.push("vehicles-clusters"),o.push("vehicles-clusters-count"),o.push("vehicles-clusters-point"),s="vehicles-clusters";break;case I:o.push("vehicles-point"),s="vehicles"}else if(r===w){var l="bestemming"===a.herkomstbestemming?"destinations":"origins";switch(c){case A:o.push("rentals-".concat(l,"-heatmap-city-level")),s="rentals-".concat(l);break;case D:o.push("rentals-".concat(l,"-clusters")),o.push("rentals-".concat(l,"-clusters-count")),o.push("rentals-".concat(l,"-clusters-point")),s="rentals-".concat(l,"-clusters");break;case M:o.push("rentals-".concat(l,"-point")),s="rentals-".concat(l)}}return Object(Y.jsxs)("div",{className:"flex flex-col",children:[Object(Y.jsx)("div",{className:"hidden sm:block",children:Object(Y.jsx)(pe,{})}),Object(Y.jsx)("div",{className:"flex-1 bg-red-400",children:Object(Y.jsx)(me,{mapContainer:t,layers:o,activeSource:s})})]})};n(234);function he(e){var t=Object(f.d)((function(e){return!!e.ui&&e.ui.FILTERBAR}));return Object(Y.jsx)("div",{className:"ContentPage h-full pb-20 ".concat(t?"":"full-page"),style:{overflowY:"auto"},children:Object(Y.jsx)("div",{className:"ContentPage-inner py-8 pl-12",children:e.children})})}var je=n(205),ge=n(408),ve=n(409),ye=n(413),Oe=n(200),_e=n(201),xe=n(89),Ee=n(206),ke=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=[];if(""!==t.zones)a.push("zone_ids="+t.zones);else if(""!==t.gebied){var r=[],i=n.gebieden.find((function(e){return e.gm_code===t.gebied}));void 0!==i&&(r=n.zones.filter((function(e){return e.municipality===i.gm_code&&e.name===i.name}))),1===r.length?a.push("zone_ids="+r[0].zone_id):console.error("zero or multiple multiple zones found for a single municipality (%s)",t.gebied,r)}if(""!==t.aanbiedersexclude&&void 0!==t.aanbiedersexclude){var c=t.aanbiedersexclude.split(","),o=n.aanbieders.filter((function(e){return!1===c.includes(e.system_id)})).map((function(e){return e.system_id})).join(",");a.push("operators="+o)}else 1===n.aanbieders.length&&a.push("operators="+n.aanbieders[0].system_id);if(""!==t.voertuigtypesexclude&&void 0!==t.voertuigtypesexclude){var s=t.voertuigtypesexclude.split(","),l=n.vehicle_types.filter((function(e){return!1===s.includes(e.id)})).map((function(e){return e.id})).join(",");a.push("form_factors="+l)}if(e){var d=(new Date).toISOString().replace(/.\d+Z$/g,"Z");""!==t.datum&&(d=new Date(t.datum).toISOString().replace(/.\d+Z$/g,"Z")),a.push("timestamp="+d)}else{var u=(new Date).toISOString().replace(/.\d+Z$/g,"Z"),m=u;t.intervalstart=h()().subtract(t.intervalduur/1e3,"seconds").toISOString(),t.intervalend=h()().toISOString();var f=function(){return!t||""===t.intervalstart||""===t.intervalend||void 0===t.intervalstart||void 0===t.intervalend};f()||(u=new Date(t.intervalstart).toISOString().replace(/.\d+Z$/g,"Z"),m=new Date(t.intervalend).toISOString().replace(/.\d+Z$/g,"Z")),a.push("start_time="+u+"&end_time="+m)}return a},Se=function(e){return!!e.authentication.user_data},Ne=function(){var e=Object(q.a)(K.a.mark((function e(t,n,a){var r,i,c,o,s;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/".concat(n,"?start_time=2021-01-01T18:00:00Z&end_time=2021-12-14T18:00:00Z&aggregation_level=").concat(a.aggregationLevel),(i=ke(!0,a.filter,a.metadata)).length>0&&(r+="&"+i.join("&")),console.log("url",r),c={headers:{authorization:"Bearer ".concat(t)}},e.next=7,fetch(r,c);case 7:return o=e.sent,e.next=10,o.json();case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),we=["start_interval"],Te=function(e,t,n){if(!t||!t["".concat(e,"_aggregated_stats")]||!t["".concat(e,"_aggregated_stats")].values)return[];var a=function(e){return"day"===e?"YYYY-MM-DD":"week"===e?"YYYY-[w]W":"month"===e?"YYYY-MM":void 0};return t["".concat(e,"_aggregated_stats")].values.map((function(e){var t=e.start_interval,r=Object(je.a)(e,we);return Object(o.a)(Object(o.a)({},r),{name:h()(t).format(a(n))})}))},Le=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,a=e.payload;return Object(Y.jsx)("g",{transform:"translate(".concat(t,",").concat(n,")"),children:Object(Y.jsx)("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)",children:a.value})})}}]),n}(a.PureComponent),Re=function(e,t){return Object(Y.jsx)("div",{style:{width:"100%",height:"400px",overflowX:"auto",overflowY:"hidden"},children:Object(Y.jsx)(ge.a,{children:Object(Y.jsxs)(ve.a,{height:400,data:e,margin:{top:10,right:30,left:0,bottom:0},children:[Object(Y.jsx)(ye.a,{strokeDasharray:"3 3"}),Object(Y.jsx)(Oe.a,{dataKey:"name",height:100,tick:Object(Y.jsx)(Le,{})}),Object(Y.jsx)(_e.a,{}),Object(Y.jsx)(xe.a,{}),(n=e[0],n?Object.keys(n).filter((function(e,t){return"name"!==e&&e})):[]).map((function(e){var n=ne(t,e);return Object(Y.jsx)(Ee.a,{stackId:"1",type:"monotone",dataKey:e,stroke:n,fill:n,isAnimationActive:!1},e)}))]})})});var n};var Ie=function(e){var t=Object(f.d)((function(e){return e.authentication.user_data.token})),n=Object(f.d)((function(e){return e.filter})),r=Object(f.d)((function(e){return e.metadata})),i=Object(a.useState)([]),c=Object(V.a)(i,2),o=c[0],s=c[1],l=Object(a.useState)([]),d=Object(V.a)(l,2),u=d[0],m=d[1],p=Object(a.useState)("month"),b=Object(V.a)(p,2),h=b[0],j=b[1];return Object(a.useEffect)((function(){function e(){return(e=Object(q.a)(K.a.mark((function e(){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t,"available_vehicles",{filter:n,metadata:r,aggregationLevel:h});case 2:a=e.sent,s(Te("available_vehicles",a,h));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!r||!r.zones||r.zones.length<=0||function(){e.apply(this,arguments)}()}),[h,n,r,t]),Object(a.useEffect)((function(){function e(){return(e=Object(q.a)(K.a.mark((function e(){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t,"rentals",{filter:n,metadata:r,aggregationLevel:h});case 2:a=e.sent,m(Te("rentals",a,h));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!r||!r.zones||r.zones.length<=0||function(){e.apply(this,arguments)}()}),[h,n,r,t]),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("button",{className:"mx-2",onClick:function(){j("day")},children:"day"}),Object(Y.jsx)("button",{className:"mx-2",onClick:function(){j("week")},children:"week"}),Object(Y.jsx)("button",{className:"mx-2",onClick:function(){j("month")},children:"month"}),Object(Y.jsx)("h1",{className:"text-4xl my-2",children:"Beschikbare voertuigen"}),Re(o,r.aanbieders),Object(Y.jsx)("h1",{className:"text-4xl my-2",children:"Verhuringen"}),Re(u,r.aanbieders)]})},Ae=function(){var e=Object(a.useState)(""),t=Object(V.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),c=Object(V.a)(i,2),o=c[0],s=c[1],l=Object(a.useState)(!1),d=Object(V.a)(l,2),u=d[0],m=d[1],p=Object(a.useState)(null),b=Object(V.a)(p,2),h=b[0],j=b[1],g=Object(a.useState)(!1),v=Object(V.a)(g,2),y=v[0],O=v[1],_=Object(f.c)(),x=function(e){e.preventDefault(),j(null);var t={loginId:n,password:o,applicationId:"bf901170-a2db-4f91-8ca7-24921e961193"};fetch("https://auth.deelfietsdashboard.nl/api/login",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){_({type:"RESET_FILTER",payload:null}),_({type:"SET_USER",payload:e}),O(!0),document.location="/map/park"})).catch((function(e){console.error("Login failed! (%s)",e.message),j("Login mislukt. Heb je het juiste e-mailadres en wachtwoord ingevuld?"),O(!1)}))},E=function(e){e.preventDefault(),j(null);var t={loginId:n};return fetch("https://auth.deelfietsdashboard.nl/api/user/forgot-password",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),!0})).catch((function(e){return console.log(e),j("Dank voor je verzoek voor een wachtwoord-resetmail. Het opvragen van je wachtwoord werkt nog niet in dit nieuwe Dashboard. Stuur alsjeblieft een mail aan info@deelfietsdashboard.nl met je e-mailadres, dan zorgen wij dat je een wachtwoord-herstel-link ontvangt. Dank!"),!1}))};return y?Object(Y.jsx)(U.a,{to:"/"}):u?Object(Y.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(Y.jsxs)("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(Y.jsx)("h3",{className:"text-2xl font-bold text-center",children:"Wachtwoord herstellen"}),Object(Y.jsxs)("form",{children:[Object(Y.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(Y.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"Email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value)}}),h&&Object(Y.jsx)("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:Object(Y.jsx)("span",{className:"block sm:inline",children:h})}),Object(Y.jsxs)("div",{className:"flex items-baseline justify-between",children:[Object(Y.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:E,children:"Herstel"}),Object(Y.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){j(null),m(!1)},children:"Annuleer"})]})]})]})}):Object(Y.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(Y.jsxs)("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(Y.jsx)("h3",{className:"text-2xl font-bold text-center",children:"Login"}),Object(Y.jsxs)("form",{children:[Object(Y.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(Y.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value)}}),Object(Y.jsx)("label",{className:"mt-4 block",htmlFor:"password",children:"Wachtwoord"}),Object(Y.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",type:"password",placeholder:"Wachtwoord",name:"password",required:!0,onChange:function(e){return s(e.target.value)}}),h&&Object(Y.jsx)("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:Object(Y.jsx)("span",{className:"block sm:inline",children:h})}),Object(Y.jsxs)("div",{className:"flex items-baseline justify-between",children:[Object(Y.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:x,children:"Login"}),Object(Y.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){return m(!0)},children:"Wachtwoord vergeten"})]})]})]})})},De=function(){var e=Object(q.a)(K.a.mark((function e(t,n,a){var r,i,c,o,s;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.user_data&&a){e.next=2;break}return e.abrupt("return");case 2:if(n){e.next=4;break}return e.abrupt("return");case 4:return r=h()(a).format("YYYY-MM-DDTHH:mm:ss[Z]"),i="https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp="+r+"&operators="+n,c={headers:{authorization:"Bearer "+t.user_data.token}},e.next=9,fetch(i,c);case 9:if((o=e.sent).ok){e.next=13;break}return console.error("unable to fetch: %o",o),e.abrupt("return",!1);case 13:return e.next=15,o.json();case 15:return s=e.sent,e.abrupt("return",s.park_events||!1);case 17:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Me=[],Ce=function(e){var t=[];return e.map((function(e){return t.indexOf(e.bike_id)<=-1&&t.push(e.bike_id),e})),t};var ze=function(e){var t=Object(f.d)((function(e){return!!e.authentication&&e.authentication}));return Object(a.useEffect)((function(e){var n=function(){var e=Object(q.a)(K.a.mark((function e(){var n,a,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=h()().toISOString(),[],a=[],r=0;case 3:if(!(r<=20)){e.next=13;break}return n=h()(n).subtract(6,"hours").toISOString(),e.next=7,De(t,"htm",n);case 7:e.sent.map((function(e){return a.push(e),e})),Me[r]=Ce(a);case 10:r++,e.next=3;break;case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}),[t]),Object(Y.jsxs)("div",{className:"mt-12",children:[Object(Y.jsx)("h1",{className:"text-2xl my-2",children:"Monitoring"}),Object(Y.jsxs)("p",{className:"py-2",children:["Voor ","htm"," willen we controleren hoeveel unieke voertuig-IDs er zijn door te de tijd heen."]}),Object(Y.jsx)("p",{className:"py-2",children:"Op deze manier kunnen we afleiden of er aan de standaard wordt voldaan. Er moeten statische voertuig-IDs zijn. Als dit niet het geval is, zul je zien dat er na verloop van tijd veel meer voertuig-IDs zijn geregistreerd dan het aantal voertuigen dat de aanbieder heeft. Op die manier weet je dat denog niet voldaan wordt aan de gevraagde datastandaard."}),Object(Y.jsx)("p",{className:"py-2",children:"De snapshots zijn steeds gemaakt met 6 uur ertussen."}),Object(Y.jsx)("pre",{children:Me?Me.map((function(e,t){return Object(Y.jsxs)("div",{children:["Number of UUIDs after ",Object(Y.jsxs)("b",{children:[t," snapshots"]}),": ",Object(Y.jsx)("b",{children:e.length})]},t)})):""}),Object(Y.jsxs)("table",{className:"table-auto bg-white hidden",children:[Object(Y.jsx)("thead",{children:Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("th",{children:"Datum/tijd"}),Object(Y.jsx)("th",{children:"Cumulatief aantal voertuig-IDs"})]})}),Object(Y.jsx)("tbody",{children:Object(Y.jsxs)("tr",{children:[Object(Y.jsx)("td",{children:"datumtijd"}),Object(Y.jsx)("td",{children:"aantal"})]})})]})]})};n(175);function Fe(e){return Object(Y.jsx)("div",{className:"text-2xl font-bold cursor-pointer",onClick:e.onClick,children:"\xd7"})}n(369);var Ge=function(e){var t=e.closeFunction,n=e.children;return Object(Y.jsx)("div",{className:"FilterbarExtended",onClick:function(){return t(!1)},children:Object(Y.jsxs)("div",{className:"",onClick:function(e){return e.stopPropagation()},children:[Object(Y.jsx)("div",{className:"FilterbarExtended-close-button-wrapper flex justify-end",children:Object(Y.jsx)(Fe,{onClick:function(){return t(!1)}})}),Object(Y.jsx)("div",{className:"grid-cols-4",children:n})]})})};n(370);var Be=function(){var e=Object(f.c)(),t=Object(f.d)((function(e){return e.metadata&&e.metadata.gebieden?e.metadata.gebieden:[]})),n=Object(f.d)((function(e){return e.filter?e.filter.gebied:""})),r=Object(f.d)((function(e){return!!e.ui&&e.ui.FILTERBAR_EXTENDED})),i=Object(a.useState)(""),c=Object(V.a)(i,2),o=c[0],s=c[1],l=function(t){e({type:"SET_FILTER_GEBIED",payload:t})},d=function(e){s(e.target.value)},u=function(e){s("")},m=function(t){e({type:"SET_VISIBILITY",payload:{name:"FILTERBAR_EXTENDED",visibility:t}})},p=t.find((function(e){return e.gm_code===n}))||"";return 1===t.length?Object(Y.jsxs)("div",{className:"filter-plaats-container filter-plaats-not-active",children:[Object(Y.jsx)("div",{className:"filter-plaats-title",onClick:function(e){m("places")},children:"Plaats"}),Object(Y.jsx)("div",{className:"filter-plaats-box-row flex flex-col justify-center",children:Object(Y.jsx)("div",{className:"filter-plaats-value ",children:""===p?"Alle Gebieden":p.name})})]}):Object(Y.jsxs)("div",{className:"filter-plaats-container",children:[Object(Y.jsx)("div",{className:"filter-plaats-title",onClick:function(e){m("places")},children:"Plaats"}),Object(Y.jsxs)("div",{className:"filter-plaats-box-row flex flex-col justify-center",children:[Object(Y.jsx)("div",{className:"filter-plaats-value ".concat(""===p?"text-black":""),onClick:function(e){m("places")},children:""===p?"Alle Gebieden":p.name}),"places"===r?function(e){var t=e.filter((function(e){return""===o||e.name.toLowerCase().includes(o.toLowerCase())}));return Object(Y.jsx)(Ge,{closeFunction:function(){return m(!1)},children:Object(Y.jsxs)("div",{className:"filter-form-selectie",children:[Object(Y.jsxs)("div",{className:"filter-form-search-container mb-3",children:[Object(Y.jsxs)("div",{className:"filter-form-search-container-2",children:[Object(Y.jsx)("input",{type:"text",className:"filter-form-search",onChange:d,value:o,autoFocus:!0,placeholder:"zoek"}),Object(Y.jsx)("div",{className:"ml-3 flex flex-col justify-center h-full",children:""!==o?Object(Y.jsx)("div",{className:"filter-plaats-img-cancel",onClick:u}):Object(Y.jsx)("div",{className:"filter-plaats-img-search"})})]}),Object(Y.jsx)("div",{children:"\xa0"})]}),Object(Y.jsxs)("div",{className:"filter-form-values",children:[""===n?Object(Y.jsx)("div",{className:"form-item-selected form-item",onClick:function(e){m(!1)},children:"Alle Gebieden"},"item-alle"):Object(Y.jsx)("div",{className:"form-item",onClick:function(e){m(!1),l("")},children:"Alle Gebieden"},"item-alle"),t.map((function(e){return n===e.gm_code?Object(Y.jsx)("div",{className:"form-item-selected form-item",onClick:function(e){m(!1),l("")},children:e.name},"item-"+e.gm_code):Object(Y.jsx)("div",{className:"form-item",onClick:function(t){m(!1),l(e.gm_code)},children:e.name},"item-"+e.gm_code)}))]})]})})}(t):null,""!==n?Object(Y.jsx)("div",{className:"filter-plaats-img-cancel",onClick:function(t){t.preventDefault(),e({type:"SET_FILTER_GEBIED",payload:""})}}):null,Object(Y.jsx)("div",{className:"flex flex-col justify-center h-full",children:Object(Y.jsx)("div",{className:"filter-plaats-img-search",onClick:function(e){m("places")}})})]})]})},Ve=(n(371),n(372),n(373),n(374),n(202)),Ue=n.n(Ve),Ye=n.p+"static/media/calendar.0fe3dc2a.svg";var He=function(){var e=Object(f.c)(),t=Object(f.d)((function(e){return e.filter?e.filter.datum:(new Date).toISOString()})),n=function(t){e({type:"SET_FILTER_DATUM",payload:t.toISOString()})};return Object(Y.jsxs)("div",{className:"filter-datum-container",children:[Object(Y.jsx)("div",{className:"filter-datum-title",children:"Datum"}),Object(Y.jsxs)("div",{className:"filter-datum-box-row",children:[Object(Y.jsxs)("div",{className:"filter-datum-box-1",children:[Object(Y.jsx)("div",{className:"filter-datum-caret",onClick:function(){n(h()(t).subtract(1,"hours"))},children:"\u2039"}),Object(Y.jsx)("div",{className:"filter-datum-dtpicker",children:Object(Y.jsx)(Ue.a,{onChange:n,value:new Date(t),clearIcon:null,calendarIcon:Object(Y.jsx)("img",{src:Ye,alt:"Logo"}),format:"y-MM-dd H:mm"})}),Object(Y.jsx)("div",{className:"filter-datum-caret",onClick:function(){n(h()(t).add(1,"hours"))},children:"\u203a"})]}),Object(Y.jsx)("div",{className:"filter-datum-box-2",onClick:function(){n(new Date)},title:"Toon huidige datum en tijd",children:Object(Y.jsx)("div",{className:"filter-datum-img-now"})})]})]})},Ze=(n(393),36e5);var Pe=function(){var e=Object(f.c)(),t=Object(f.d)((function(e){return e.filter?e.filter.intervalduur:Ze})),n=[{label:"1h",anchor:"start",pos:"0%",value:Ze},{label:"4h",anchor:"middle",pos:"15%",value:144e5},{label:"8h",anchor:"middle",pos:"26.5%",value:288e5},{label:"12h",anchor:"middle",pos:"39%",value:432e5},{label:"16h",anchor:"middle",pos:"50%",value:576e5},{label:"20h",anchor:"middle",pos:"62%",value:72e6},{label:"24h",anchor:"middle",pos:"73.5%",value:864e5},{label:"2d",anchor:"middle",pos:"85.5%",value:1728e5},{label:"3d",anchor:"middle",pos:"96%",value:2592e5}],a=n.map((function(e,t){return Object(Y.jsx)("text",{className:"filter-duur-annotation",x:e.pos,y:"14",textAnchor:e.anchor,children:e.label},"fide-"+t)})),r=n.map((function(e,t){return Object(Y.jsx)("rect",{className:"filter-duur-tickmark",x:e.pos,y:"0",width:"1",height:"20"},"fidt-"+t)})),i=n.findIndex((function(e){return e.value===t}));return-1===i&&(i=4),Object(Y.jsx)("div",{className:"filter-duur-container",children:Object(Y.jsxs)("div",{className:"filter-duur-box-row",children:[Object(Y.jsx)("input",{className:"filter-duur-range",width:"100%",type:"range",min:"0",max:n.length-1,step:"1",onChange:function(t){e({type:"SET_FILTER_INTERVAL_DUUR",payload:n[t.target.value].value})},value:i}),Object(Y.jsx)("svg",{className:"filter-duur-tickmarks",role:"presentation",width:"100%",height:"10",xmlns:"http://www.w3.org/2000/svg",children:r}),Object(Y.jsx)("svg",{className:"filter-duur-elements",role:"presentation",width:"100%",height:"14",xmlns:"http://www.w3.org/2000/svg",children:a})]})})};n(394);var Xe=function(){var e=Object(f.c)(),t=Object(f.d)((function(e){return e.metadata&&e.metadata.aanbieders?e.metadata.aanbieders:[]})),n=Object(f.d)((function(e){return e.filter?e.filter.aanbiedersexclude:[]})),a=function(a){(n||"").split(",").length!==t.length-1&&e({type:"ADD_TO_FILTER_AANBIEDERS_EXCLUDE",payload:a.system_id})};return Object(Y.jsxs)("div",{className:"filter-aanbieders-container",children:[Object(Y.jsxs)("div",{className:"filter-aanbieders-title-row",children:[Object(Y.jsx)("div",{className:"filter-aanbieders-title",children:"Aanbieders"}),""!==n?Object(Y.jsx)("div",{className:"filter-aanbieders-reset cursor-pointer",onClick:function(t){e({type:"CLEAR_FILTER_AANBIEDERS_EXCLUDE",payload:""})},children:"reset"}):null]}),Object(Y.jsx)("div",{className:"filter-aanbieders-box-row",children:t.map((function(r,i){var c=n?n.includes(r.system_id):"",o=c?function(t){t.stopPropagation(),function(t){e({type:"REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE",payload:t.system_id})}(r)}:function(e){var i;e.stopPropagation(),i=r,""===n?t.map((function(e){return e.system_id!==i.system_id&&a(e),e})):a(i)};return Object(Y.jsxs)("div",{className:"filter-aanbieders-item ".concat(c?"filter-aanbieders-item-not-active":""),onClick:o,children:[Object(Y.jsx)("div",{className:"filter-aanbieders-marker",children:Object(Y.jsxs)("svg",{viewBox:"0 0 30 30",children:[Object(Y.jsx)("circle",{cx:"50%",cy:"50%",r:"40%",fill:"#000000"}),Object(Y.jsx)("circle",{cx:"50%",cy:"50%",r:"35%",fill:"#FFFFFF"}),Object(Y.jsx)("circle",{cx:"70%",cy:"25%",r:"25%",fill:r.color.toString()})]})}),Object(Y.jsx)("div",{className:"filter-aanbieders-itemlabel",children:r.name})]},r.name)}))})]})};n(395);var Je=function(){var e=Object(f.c)(),t=Object(f.d)((function(e){return e.metadata&&e.metadata.zones?e.metadata.zones:[]})),n=Object(f.d)((function(e){return e.filter?e.filter.zones:0})),r=Object(f.d)((function(e){return e.filter?e.filter.gebied:0})),i=Object(f.d)((function(e){return!!e.ui&&e.ui.FILTERBAR_EXTENDED})),c=Object(a.useState)(""),o=Object(V.a)(c,2),s=o[0],l=o[1],d=function(t){e({type:"REMOVE_FROM_FILTER_ZONES",payload:t})},u=function(t){e({type:"SET_VISIBILITY",payload:{name:"FILTERBAR_EXTENDED",visibility:t}})},m=function(e){l(e.target.value)},p=function(e){l("")},b=[],h="";try{var j=(b=n.split(",")).length;if(j>1)h=j+" zones";else{var g=t.find((function(e){return e.zone_id.toString()===b[0]}));h=g&&g.name||""}}catch(O){h=""}""===h&&(h="Alle Zones");var v=""!==r,y=t.filter((function(e){return b.includes(e.zone_id.toString())}));return v?Object(Y.jsxs)("div",{className:"filter-zones-container ".concat(!0===v?"":"filter-zones-item-not-active"),children:[Object(Y.jsx)("div",{className:"filter-zones-title",onClick:function(e){v&&u("zones")},children:"Zones"}),Object(Y.jsxs)("div",{className:"filter-zones-box-row",children:[Object(Y.jsx)("div",{className:"\n            filter-zones-value flex flex-col justify-center cursor-pointer h-full\n            ".concat("Alle Zones"===h?"text-black":"","\n          "),onClick:function(e){v&&u("zones")},children:h}),""!==n?Object(Y.jsx)("div",{className:"filter-zones-img-cancel",onClick:function(){e({type:"CLEAR_FILTER_ZONES",payload:null})}}):null,"zones"===i?function(t){var a=t.filter((function(e){return""===s||e.name.toLowerCase().includes(s.toLowerCase())}));return Object(Y.jsx)(Ge,{closeFunction:function(e){return u(!1)},children:Object(Y.jsxs)("div",{className:"filter-form-selectie",children:[Object(Y.jsxs)("div",{className:"filter-form-search-container mb-3",children:[Object(Y.jsxs)("div",{className:"filter-form-search-container-2",children:[Object(Y.jsx)("input",{type:"text",className:"filter-form-search",onChange:m,value:s,autoFocus:!0,placeholder:"zoek"}),Object(Y.jsx)("div",{className:"ml-3 flex flex-col justify-center h-full",children:""!==s?Object(Y.jsx)("div",{className:"filter-zones-img-cancel cursor-pointer",onClick:p}):Object(Y.jsx)("div",{className:"filter-zones-img-search cursor-pointer"})})]}),Object(Y.jsx)("div",{children:"\xa0"})]}),Object(Y.jsx)("div",{className:"filter-form-values",children:a.map((function(t){return n.includes(t.zone_id)?Object(Y.jsx)("div",{className:" form-item-selected form-item cursor-pointer ",onClick:function(e){e.stopPropagation(),d(t.zone_id)},children:t.name},"item-"+t.zone_id):Object(Y.jsx)("div",{className:" form-item cursor-pointer ",onClick:function(n){var a;n.stopPropagation(),a=t.zone_id,e({type:"ADD_TO_FILTER_ZONES",payload:a})},children:t.name},"item-"+t.zone_id)}))})]})})}(t):null,Object(Y.jsx)("div",{className:"ml-3 flex flex-col justify-center h-full",children:Object(Y.jsx)("div",{className:"filter-zones-img-search cursor-pointer",onClick:function(e){u("zones")}})})]}),Object(Y.jsx)("div",{className:"filter-zones-zonelist",children:y.map((function(e){return Object(Y.jsxs)("div",{className:"filter-zones-zoneitem",children:[e.name,Object(Y.jsx)("div",{className:"filter-zones-img-zoneitem-cancel",onClick:function(t){t.stopPropagation(),d(e.zone_id)},children:"\xd7"})]},e.zone_id)}))})]}):Object(Y.jsx)(Y.Fragment,{})};n(396);function We(){return qe({label:"Parkeerduur",filtername:"parkeerduurexclude",markers:Object(f.d)((function(e){return[{id:0,color:"#1FA024",fillcolor:"#1FA024",name:"< 1 uur"},{id:1,color:"#48E248",fillcolor:"#48E248",name:"< 24 uur"},{id:2,color:"#FFD837",fillcolor:"#FFD837",name:"< 4 d"},{id:3,color:"#FD3E48",fillcolor:"#FD3E48",name:"> 4 d"}]})),addmarker:"ADD_TO_FILTER_MARKERS_EXCLUDE",removemarker:"REMOVE_FROM_FILTER_MARKERS_EXCLUDE",clearmarkers:"CLEAR_FILTER_MARKERS_EXCLUDE"})}function Ke(){return qe({label:"Afstand",filtername:"afstandexclude",markers:Object(f.d)((function(e){return[{id:0,color:"#48E248",fillcolor:"#48E248",name:"5km"},{id:1,color:"#44BD48",fillcolor:"#44BD48",name:"10km"},{id:2,color:"#3B7747",fillcolor:"#3B7747",name:"15km"},{id:3,color:"#343E47",fillcolor:"#343E47",name:"> 25km"}]})),addmarker:"ADD_TO_FILTER_AFSTAND_EXCLUDE",removemarker:"REMOVE_FROM_FILTER_AFSTAND_EXCLUDE",clearmarkers:"CLEAR_FILTER_AFSTAND_EXCLUDE"})}function qe(e){var t=e.label,n=e.filtername,a=e.markers,r=e.addmarker,i=e.removemarker,c=e.clearmarkers,o=Object(f.c)(),s=Object(f.d)((function(e){return e.filter?e.filter[n]:""}))||"",l=function(e){console.log("addtofilter %s -> %s",n,e),o({type:r,payload:e})};return Object(Y.jsxs)("div",{className:"filter-markers-container",children:[Object(Y.jsxs)("div",{className:"filter-markers-title-row",children:[Object(Y.jsx)("div",{className:"filter-markers-title",children:t}),""!==s?Object(Y.jsx)("div",{className:"filter-markers-reset cursor-pointer",onClick:function(){console.log("clearfilter %s",n),o({type:c,payload:null})},children:"reset"}):null]}),Object(Y.jsx)("div",{className:"filter-markers-box-row",children:a.map((function(e){var t=s.split(",").includes(e.id.toString()),r=t?"filter-markers-item-excluded":"filter-markers-item",c=t?function(t){t.stopPropagation(),function(e){console.log("removefromfilter %s -> %s",n,e),o({type:i,payload:e})}(e.id)}:function(t){var n;t.stopPropagation(),n=e.id,console.log("clickfilter [%s]<",s),""===s?a.map((function(e){return e.id!==n&&l(e.id),e})):l(n)};return Object(Y.jsxs)("div",{className:r,children:[Object(Y.jsx)("div",{className:"filter-markers-marker",onClick:c,children:Object(Y.jsxs)("svg",{viewBox:"0 0 30 30",children:[Object(Y.jsx)("circle",{cx:"50%",cy:"50%",r:"40%",fill:e.color}),Object(Y.jsx)("circle",{cx:"50%",cy:"50%",r:"34%",fill:e.fillcolor})]})}),Object(Y.jsx)("div",{className:"filter-markers-itemlabel",children:e.name})]},e.id)}))})]})}n(397);function $e(){var e=Object(f.c)(),t=function(t){return function(n){e({type:"SET_FILTER_HERKOMSTBESTEMMING",payload:t})}},n="filter-herkomst-bestemming-button",a="filter-herkomst-bestemming-button";return"bestemming"===Object(f.d)((function(e){var t="herkomst";return e.filter&&(t="bestemming"===e.filter.herkomstbestemming?"bestemming":"herkomst"),t}))?a+=" filter-herkomst-bestemming-button-active":n+=" filter-herkomst-bestemming-button-active",Object(Y.jsx)("div",{className:"filter-herkomst-bestemming-container",children:Object(Y.jsxs)("div",{className:"filter-herkomst-bestemming-box-row",children:[Object(Y.jsx)("div",{className:n,onClick:t("herkomst"),children:"Herkomst"}),Object(Y.jsx)("div",{className:a,onClick:t("bestemming"),children:"Bestemming"})]})})}n(398);var Qe=function(){var e=Object(f.c)(),t=Object(f.d)((function(e){return e.metadata.vehicle_types&&e.metadata.vehicle_types||[]})),n=Object(f.d)((function(e){return Array.isArray(e.filter.voertuigtypesexclude)?"":e.filter?e.filter.voertuigtypesexclude:""}))||"",a=function(a){(n||"").split(",").length!==t.length-1&&e({type:"ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE",payload:a})};return Object(Y.jsxs)("div",{className:"filter-voertuigtypes-container",children:[Object(Y.jsxs)("div",{className:"filter-voertuigtypes-title-row",children:[Object(Y.jsx)("div",{className:"filter-voertuigtypes-title",children:"Vervoerstype"}),""!==n?Object(Y.jsx)("div",{className:"filter-voertuigtypes-reset cursor-pointer",onClick:function(){e({type:"CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE",payload:null})},children:"reset"}):null]}),Object(Y.jsx)("div",{className:"filter-voertuigtypes-box-row",children:t.map((function(r,i){var c=(n||"").split(",").includes(r.id),o=c?function(t){t.stopPropagation(),function(t){console.log("REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE %s",t),e({type:"REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE",payload:t})}(r.id)}:function(e){var i;e.stopPropagation(),i=r.id,console.log("clickfilter [%s]<",n),""===n?t.map((function(e){return e.id!==i&&a(e.id),e})):a(i)},s="".concat(c?"filter-voertuigtypes-item-excluded":"filter-voertuigtypes-item"),l="";switch(r.id){case"bicycle":l="filter-voertuigtypes-icon-bicycle";break;case"cargo_bicycle":l="filter-voertuigtypes-icon-cargo-bicycle";break;case"moped":l="filter-voertuigtypes-icon-scooter";break;case"car":l="filter-voertuigtypes-icon-car";break;case"unknown":l="filter-voertuigtypes-icon-other"}return Object(Y.jsxs)("div",{className:"".concat(s).concat(i===t.length-1?" filter-voertuigtypes-item-last":""),onClick:o,children:[Object(Y.jsx)("div",{className:"filter-voertuigtypes-icon ".concat(l),onClick:o}),Object(Y.jsx)("div",{className:"filter-voertuigtypes-itemlabel",children:r.name})]},r.id)}))})]})};var et=function(){return Object(Y.jsx)("img",{alt:"Logo CROW",src:"/images/logo-fietsberaad-crow.svg",width:"82"})};var tt=function(e){var t=e.showduur,n=void 0!==t&&t,a=e.showparkeerduur,r=void 0===a||a,i=e.showafstand,c=void 0!==i&&i,o=e.showherkomstbestemming,s=void 0!==o&&o,l=(e.visible,e.hideLogo),d=Object(f.d)((function(e){return!!e.authentication.user_data}));return Object(Y.jsxs)("div",{className:"filter-bar-inner py-2",children:[!l&&Object(Y.jsx)(et,{}),d&&Object(Y.jsxs)("div",{children:[Object(Y.jsx)(He,{}),n?Object(Y.jsx)(Pe,{}):null]}),Object(Y.jsx)(Be,{}),Object(Y.jsx)(Je,{}),d&&r&&Object(Y.jsx)(We,{}),d&&c&&Object(Y.jsx)(Ke,{}),d&&s&&Object(Y.jsx)($e,{}),Object(Y.jsx)(Qe,{}),Object(Y.jsx)(Xe,{})]})};var nt=function(e){e.isVisible;var t=e.isrentals,n=void 0!==t&&t,a=Object(f.d)((function(e){return!!e.ui&&e.ui.FILTERBAR_EXTENDED}));return Object(Y.jsx)(fe,{name:"FilterBar",direction:"left",options:{title:"Filters",backgroundColor:"#F6F5F4"},style:{width:a?"648px":"324px",height:"100%",top:0,position:"fixed"},children:Object(Y.jsx)("div",{className:"py-2 mx-3 h-full",children:Object(Y.jsx)(tt,{showduur:n,showparkeerduur:!n,showafstand:n,showherkomstbestemming:n})})})};n(399);var at=function(e){return Object(Y.jsxs)("div",{className:"\n      MobileSlideBox w-full sm:hidden absolute left-0\n      ".concat(e.isVisible?"is-visible":"","\n      ").concat(e.classes,"\n    "),style:e.style,children:[Object(Y.jsxs)("header",{className:"flex justify-between",children:[Object(Y.jsx)("h1",{className:"",children:e.title}),Object(Y.jsx)(Fe,{onClick:e.closeHandler})]}),Object(Y.jsx)("div",{className:"w-full",children:e.children})]})};var rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(f.c)(),a=function(){n({type:"SET_VISIBILITY",payload:{name:"FILTERBAR",visibility:!1}})};return Object(Y.jsx)(at,{title:"Filters",isVisible:e,closeHandler:function(){a()},classes:" top-0 overflow-auto ",children:Object(Y.jsx)(tt,{hideLogo:!0,showduur:t,showparkeerduur:!t,showafstand:t,showherkomstbestemming:t})})},it=n(203),ct=function(){return Object(Y.jsx)("div",{dangerouslySetInnerHTML:{__html:it.marked.parse('\n# Over het Dashboard Deelmobiliteit\n\n## Algemeen\n\nHet Dashboard Deelmobiliteit is een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit op de voeten willen. Hoe lang en waar staan deelvoertuigen ongebruikt in de openbare ruimte? Hoe vaak worden de deelvoertuigen verhuurd? In welke wijken en op welke tijdstippen zijn deelvoertuigen populair?  Met de informatie uit het Dashboard Deelmobiliteit kunnen overheden hun beleid ontwikkelen, evalueren en bijsturen.\n\n## Hoe werkt het?\n\nHet Dashboard Deelmobiliteit verzamelt elke halve minuut positie van  meer dan 15.000 geparkeerde deelvoertuigen in Nederland (januari 2022). Op basis deze informatie genereert het dashboard zogenaamde parkeergebeurtenissen en verhuringen, die opgeslagen worden in een centrale database. Het dashboard biedt een aantal functionaliteiten (kaarten, grafieken en tabellen) om de database te raadplegen. Voor analyses waar het dashboard niet in voorziet, kunnen overheden downloads maken van de ruwe data uit het dashboard om maatwerkanalyses te (laten) maken.\n\n## Functionaliteiten\n\nIn overleg met deelnemende overheden zijn de volgende functionaliteiten ontwikkeld:\n\n- Een kaart met het aanbod van deelvoertuigen op een tijdstip naar keuze. Een kleurcode geeft tevens aan hoe lang het voertuig te huur staat.\n- Een kaart met verhuringen van deelvoertuigen gedurende een periode naar keuze. Het betreft zowel de locaties waar verhuringen gestart zijn als be\xebindigd.\n- Grafieken met ontwikkelingen in een periode naar keuze. Het gaat zowel om de ontwikkeling in het aantal deelvoertuigen dat aangeboden wordt als om de ontwikkeling het aantal verhuringen.\n- Standaardrapportages als excel-sheets gedownload kunnen worden.\n\nOverheden hebben alleen toegang tot de informatie over deelvoertuigen in hun eigen bestuursgebied.\n\n## Voordelen voor gemeenten\n\n- sneller toegang tot data\n- minder uitvragen naar aanbieders nodig (1 bron met alle data)\n- geen conversie meer nodig: data van elke aanbieder heeft precies hetzelfde dataformaat\n- ontwikkeling in overleg met de aangesloten gemeentes\n- indien gewenst uit te breiden door gemeentes zelf (open source software)\n\n## Voordelen aanbieders\n\n- minder aanvragen vanuit gemeentes\n- geen nieuwe dataformaten nodig i.v.m. gebruik gangbare internationale datastandaarden\n- gemeentes hebben beter inzicht in de stand van zaken\n\n## Tot slot\n\nWil je contact opnemen met het team achter het Dashboard Deelmobiliteit, neem dan contact op met <a href="mailto:info@deelfietsdashboard.nl?Subject=Hallo">info@deelfietsdashboard.nl</a>\n      ')}})};n(400);function ot(e){var t=Object(f.c)(),n=Object(f.d)((function(e){return!!e.ui&&e.ui["MenuSecondary.layers"]})),a=Object(f.d)((function(e){return!!e.filter&&""!==e.filter.gebied})),r=Object(f.d)((function(e){return!!e.layers&&e.layers.zones_visible})),i=Object(f.d)((function(e){return e.layers?e.layers.displaymode:N})),c=Object(f.d)((function(e){return e.layers?e.layers.view_park:I})),o=Object(f.d)((function(e){return!!e.authentication.user_data}));console.log("MOBILE selection",i);return Object(Y.jsx)(at,{title:"Lagen",isVisible:n,closeHandler:function(){t({type:"SET_VISIBILITY",payload:{name:"MenuSecondary.layers",visibility:!1}})},classes:" top-auto ",children:Object(Y.jsxs)("div",{className:"\n        SelectLayerMobile\n        flex justify-between\n      ",children:[i===N?Object(Y.jsx)("div",{"data-type":"heat-map",className:"layer".concat(c!==L?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:L})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Heat map"})}):null,i===N?Object(Y.jsx)("div",{"data-type":"pointers",className:"layer".concat(c!==R?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:R})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Clusters"})}):null,i===N?Object(Y.jsx)("div",{"data-type":"vehicles",className:"layer".concat(c!==I?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:I})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Voertuigen"})}):null,o&&a?Object(Y.jsx)("div",{"data-type":"zones",className:"layer".concat(r?"":" layer-inactive"),onClick:function(){t({type:"LAYER_TOGGLE_ZONES_VISIBLE",payload:null})},children:Object(Y.jsx)("span",{className:"layer-title",children:"Zones"})}):null]})})}var st=500,lt=[{value:"cykl",system_id:"cykl",name:"Cykl"},{value:"flickbike",system_id:"flickbike",name:"Flickbike"},{value:"donkey",system_id:"donkey",name:"Donkey"},{value:"mobike",system_id:"mobike",name:"Mobike"},{value:"htm",system_id:"htm",name:"HTM"},{value:"gosharing",system_id:"gosharing",name:"GO"},{value:"check",system_id:"check",name:"CHECK"},{value:"felyx",system_id:"felyx",name:"Felyx"},{value:"deelfietsnederland",system_id:"deelfietsnederland",name:"Deelfiets"},{value:"keobike",system_id:"keobike",name:"Keobike"},{value:"lime",system_id:"lime",name:"Lime"},{value:"baqme",system_id:"baqme",name:"BAQME"},{value:"cargoroo",system_id:"cargoroo",name:"Cargoroo"},{value:"uwdeelfiets",system_id:"uwdeelfiets",name:"uwdeelfiets"},{value:"hely",system_id:"hely",name:"Hely"}],dt=[{gm_code:"",name:"Alle Gebieden"},{gm_code:"GM0518",name:"'s-Gravenhage"},{gm_code:"GM0796",name:"'s-Hertogenbosch"},{gm_code:"GM0613",name:"Albrandswaard"},{gm_code:"GM0141",name:"Almelo"},{gm_code:"GM0034",name:"Almere"},{gm_code:"GM0484",name:"Alphen aan den Rijn"},{gm_code:"GM0307",name:"Amersfoort"},{gm_code:"GM0362",name:"Amstelveen"},{gm_code:"GM0363",name:"Amsterdam"},{gm_code:"GM0200",name:"Apeldoorn"},{gm_code:"GM0202",name:"Arnhem"},{gm_code:"GM0106",name:"Assen"},{gm_code:"GM0489",name:"Barendrecht"},{gm_code:"GM0203",name:"Barneveld"},{gm_code:"GM0373",name:"Bergen (NH"},{gm_code:"GM0753",name:"Best"},{gm_code:"GM0375",name:"Beverwijk"},{gm_code:"GM0377",name:"Bloemendaal"},{gm_code:"GM0758",name:"Breda"},{gm_code:"GM0312",name:"Bunnik"},{gm_code:"GM0313",name:"Bunschoten"},{gm_code:"GM0502",name:"Capelle aan den IJssel"},{gm_code:"GM0310",name:"De Bilt"},{gm_code:"GM0736",name:"De Ronde Venen"},{gm_code:"GM0503",name:"Delft"},{gm_code:"GM0150",name:"Deventer"},{gm_code:"GM0384",name:"Diemen"},{gm_code:"GM0505",name:"Dordrecht"},{gm_code:"GM0228",name:"Ede"},{gm_code:"GM0772",name:"Eindhoven"},{gm_code:"GM0153",name:"Enschede"},{gm_code:"GM0232",name:"Epe"},{gm_code:"GM1771",name:"Geldrop-Mierlo"},{gm_code:"GM1942",name:"Gooise Meren"},{gm_code:"GM0014",name:"Groningen"},{gm_code:"GM0392",name:"Haarlem"},{gm_code:"GM0394",name:"Haarlemmermeer"},{gm_code:"GM0243",name:"Harderwijk"},{gm_code:"GM0246",name:"Heerde"},{gm_code:"GM0794",name:"Helmond"},{gm_code:"GM0164",name:"Hengelo"},{gm_code:"GM0798",name:"Hilvarenbeek"},{gm_code:"GM0402",name:"Hilversum"},{gm_code:"GM0353",name:"IJsselstein"},{gm_code:"GM0166",name:"Kampen"},{gm_code:"GM0542",name:"Krimpen aan den IJssel"},{gm_code:"GM1621",name:"Lansingerland"},{gm_code:"GM0080",name:"Leeuwarden"},{gm_code:"GM1916",name:"Leidschendam-Voorburg"},{gm_code:"GM0327",name:"Leusden"},{gm_code:"GM0809",name:"Loon op Zand"},{gm_code:"GM0556",name:"Maassluis"},{gm_code:"GM1842",name:"Midden-Delfland"},{gm_code:"GM1952",name:"Midden-Groningen"},{gm_code:"GM0356",name:"Nieuwegein"},{gm_code:"GM0267",name:"Nijkerk"},{gm_code:"GM0268",name:"Nijmegen"},{gm_code:"GM1930",name:"Nissewaard"},{gm_code:"GM0820",name:"Nuenen, Gerwen en Nederwetten"},{gm_code:"GM0302",name:"Nunspeet"},{gm_code:"GM0826",name:"Oosterhout"},{gm_code:"GM0431",name:"Oostzaan"},{gm_code:"GM1926",name:"Pijnacker-Nootdorp"},{gm_code:"GM0273",name:"Putten"},{gm_code:"GM0597",name:"Ridderkerk"},{gm_code:"GM0603",name:"Rijswijk"},{gm_code:"GM1674",name:"Roosendaal"},{gm_code:"GM0599",name:"Rotterdam"},{gm_code:"GM0606",name:"Schiedam"},{gm_code:"GM0848",name:"Son en Breugel"},{gm_code:"GM0855",name:"Tilburg"},{gm_code:"GM1730",name:"Tynaarlo"},{gm_code:"GM0344",name:"Utrecht"},{gm_code:"GM1581",name:"Utrechtse Heuvelrug"},{gm_code:"GM0861",name:"Veldhoven"},{gm_code:"GM0622",name:"Vlaardingen"},{gm_code:"GM0865",name:"Vught"},{gm_code:"GM0866",name:"Waalre"},{gm_code:"GM0867",name:"Waalwijk"},{gm_code:"GM0289",name:"Wageningen"},{gm_code:"GM0629",name:"Wassenaar"},{gm_code:"GM1960",name:"West Betuwe"},{gm_code:"GM1783",name:"Westland"},{gm_code:"GM0637",name:"Zoetermeer"},{gm_code:"GM0642",name:"Zwijndrecht"},{gm_code:"GM0193",name:"Zwolle"}],ut=[{id:"bicycle",name:"Fiets"},{id:"cargo_bicycle",name:"Bakfiets"},{id:"moped",name:"Scooter"},{id:"car",name:"Auto"},{id:"unknown",name:"Onbekend"}],mt=void 0,ft=void 0,pt=function e(){var t=6e4;try{if(void 0===mt)return!1;var n=mt.getState();if(function(e){return!!e.authentication.user_data}(n)){var a={headers:{authorization:"Bearer "+n.authentication.user_data.token}};return fetch("https://api.deelfietsdashboard.nl/dashboard-api/menu/acl",a).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){mt.dispatch({type:"SET_GEBIEDEN",payload:e.municipalities}),1===e.municipalities.length&&mt.dispatch({type:"SET_FILTER_GEBIED",payload:e.municipalities[0].gm_code}),mt.dispatch({type:"SET_AANBIEDERS",payload:e.operators});var t=ut;mt.dispatch({type:"SET_VEHICLE_TYPES",payload:t}),mt.dispatch({type:"SET_METADATA_LOADED",payload:!0})}))})).catch((function(e){console.error("unable to decode JSON")})),!0}mt.dispatch({type:"SET_GEBIEDEN",payload:dt}),mt.dispatch({type:"SET_AANBIEDERS",payload:lt}),mt.dispatch({type:"SET_METADATA_LOADED",payload:!0})}catch(r){return console.error("Unable to update ACL",r),t=12e4,!1}finally{ft=setTimeout(e,t)}},bt=function(){void 0!==ft&&clearTimeout(ft),pt()};bt();var ht=void 0,jt=void 0,gt=function e(){var t=6e4;try{if(void 0===ht)return!1;var a=ht.getState();if(!1===a.metadata.zones_loaded)return t=st,!1;var r="";if(function(e){return!!e.authentication.user_data}(a)&&a)if(""===a.filter.gebied)r=a.metadata.zones.filter((function(e){return"municipality"===e.zone_type})).map((function(e){return e.zone_id})).join(",");else if(0===a.filter.zones.length){var i=a.metadata.gebieden.filter((function(e){return e.gm_code===a.filter.gebied})).map((function(e){return e.gm_code}));r=a.metadata.zones.filter((function(e){return"municipality"===e.zone_type&&i.includes(e.municipality)})).map((function(e){return e.zone_id})).join(",")}else r=a.filter.zones;else r="";if(""===r)return void ht.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}});var c="https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids="+r+"&&include_geojson=true",o={headers:{authorization:"Bearer "+a.authentication.user_data.token}};fetch(c,o).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){var t=n(401),r={type:"FeatureCollection",features:[]},i=void 0;e.zones.forEach((function(e,n){switch(e.geojson.type){case"MultiPolygon":case"Polygon":var a={type:"Feature",geometry:e.geojson};r.features.push(a);var c=t.extent(a);void 0===i?i=c:(i[0]=Math.min(c[0],i[0]),i[1]=Math.min(c[1],i[1]),i[2]=Math.max(c[2],i[2]),i[3]=Math.max(c[3],i[3]));break;default:console.warn("pollMetadataZonesgeodata - don't know how to handle %s",e.type,e)}}));var c={data:r,filter:a.filter.zones,bounds:i};ht.dispatch({type:"SET_ZONES_GEODATA",payload:c}),ht.dispatch({type:"LAYER_SET_ZONES_EXTENT",payload:i})})).catch((function(e){console.error("unable to decode JSON",e)}))})).catch((function(e){console.error("unable to fetch zone geodata")}))}catch(s){console.error("Unable to update zones",s),t=12e4}finally{jt=setTimeout(e,t)}},vt=function(){void 0!==jt&&clearTimeout(jt),gt()},yt=void 0,Ot=void 0,_t=function e(){var t=6e4;try{if(void 0===yt)return!1;var n=yt.getState();if(!1===n.metadata.metadata_loaded)return t=st,!1;var a="";if(!function(e){return!!e.authentication.user_data}(n)||!n)return yt.dispatch({type:"SET_ZONES",payload:[]}),yt.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}}),void yt.dispatch({type:"SET_ZONES_LOADED",payload:!0});if(""===n.filter.gebied)return yt.dispatch({type:"SET_ZONES",payload:[]}),yt.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}}),void yt.dispatch({type:"SET_ZONES_LOADED",payload:!0});a="https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code="+n.filter.gebied;var r={headers:{authorization:"Bearer "+n.authentication.user_data.token}};fetch(a,r).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){yt.dispatch({type:"SET_ZONES",payload:e.zones}),yt.dispatch({type:"SET_ZONES_LOADED",payload:!0})}))})).catch((function(e){console.error("unable to decode JSON")}))}catch(i){console.error("Unable to update zones",i),t=12e4}finally{Ot=setTimeout(e,t)}},xt=function(){void 0!==Ot&&clearTimeout(Ot),_t()},Et=void 0,kt=void 0,St=function e(){var t=6e4;try{if(void 0===Et)return!1;var a=Et.getState();if(!1===a.metadata.zones_loaded)return t=st,!1;if(a.layers.displaymode!==N)return console.log("not viewing park data - skip update"),!0;var r=Se(a)&&a&&a.filter&&a.authentication.user_data.token,i="https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space",c={};if(r){if(null!==a.filter&&null!==a.authenticationdata){i="https://api.deelfietsdashboard.nl/dashboard-api/park_events";var o=ke(!0,a.filter,a.metadata);o.length>0&&(i+="?"+o.join("&")),c={headers:{authorization:"Bearer "+a.authentication.user_data.token}}}}else{var s=ke(!0,a.filter,a.metadata);s.length>0&&(i+="?"+s.join("&"))}fetch(i,c).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){Se(a)&&(e=e.park_events);var t={type:"FeatureCollection",features:[]},r={};a.metadata.aanbieders.forEach((function(e){r[e.system_id||e.value]=e.color}));var i=n(48),c=h()(a.filter.datum),o=a.filter.parkeerduurexclude.split(",");e.forEach((function(e){var n,r=Se(a)?e.start_time:e.in_public_space_since,s=c.diff(h()(r),"minutes"),l=(n=s)<=60?0:n<=1440?1:n<=5760?2:3,d={type:"Feature",properties:{id:i(e.location.latitude+e.location.longitude),system_id:e.system_id||e.value,in_public_space_since:r,duration_bin:l},geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude,0]}};!o.includes(l.toString())&&t.features.push(d)})),Et.dispatch({type:"SET_VEHICLES",payload:t})})).catch((function(e){console.error("unable to decode JSON")}))})).catch((function(e){console.error("fetch error - unable to fetch JSON from %s",i)}))}catch(l){console.error("Unable to update zones",l),t=12e4}finally{kt=setTimeout(e,t)}},Nt=function(){void 0!==kt&&clearTimeout(kt),St()},wt=void 0,Tt=function(){void 0!==wt&&clearTimeout(wt)},Lt=n(48),Rt=void 0,It=void 0,At=function e(){var t=6e4;try{if(void 0===Rt)return!1;var n=Rt.getState();if(n.layers.displaymode!==w)return console.log("not viewing rentals data - skip update"),!0;if(!1===n.metadata.zones_loaded)return t=st,!1;if(Se(n)&&n&&n.filter&&n.authentication.user_data.token){var a="https://api.deelfietsdashboard.nl/dashboard-api/rentals",r={};if(null!==n.filter&&null!==n.authenticationdata){a="https://api.deelfietsdashboard.nl/dashboard-api/rentals";var i=ke(!1,n.filter,n.metadata);i.length>0&&(a+="?"+i.join("&")),r={headers:{authorization:"Bearer "+n.authentication.user_data.token}}}fetch(a,r).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){var t=Se?e:[],n=function(e,t){if(e){if(t&&("start_rentals"===t||"end_rentals"===t)){var n={type:"FeatureCollection",features:[]};return e[t].forEach((function(e){var t={type:"Feature",properties:{id:Lt(e.location.latitude+e.location.longitude),system_id:e.system_id,arrival_time:e.arrival_time,departure_time:e.departure_time,duration_bin:0,color:"#38ff71"},geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude,0]}};n.features.push(t)})),n}console.error("Type is invalid. Type is: ",t)}};Rt.dispatch({type:"SET_RENTALS_ORIGINS",payload:n(t,"start_rentals")}),Rt.dispatch({type:"SET_RENTALS_DESTINATIONS",payload:n(t,"end_rentals")})})).catch((function(e){console.error("unable to decode JSON")}))})).catch((function(e){console.error("fetch error - unable to fetch JSON from %s",a)}))}else Rt.dispatch({type:"CLEAR_RENTALS_ORIGINS"}),Rt.dispatch({type:"CLEAR_RENTALS_DESTINATIOINS"})}catch(c){console.error("Unable to update zones",c),t=12e4}finally{It=setTimeout(e,t)}},Dt=function(){void 0!==It&&clearTimeout(It),At()};n(402);var Mt=function(){var e=Object(a.useState)(document.location.pathname),t=Object(V.a)(e,2),n=t[0],r=t[1],i=Object(f.c)(),c=Object(a.useRef)(null),o=Object(U.g)();Object(a.useEffect)((function(){r(o?o.pathname:null)}),[o]),Object(a.useEffect)((function(){var e;e=n.includes("/map/park")||"/"===n?N:n.includes("/map/rentals")?w:T,i({type:"LAYER_SET_DISPLAYMODE",payload:e})}),[n,i]);var s=Object(f.d)((function(e){return!!e.authentication.user_data})),l=Object(f.d)((function(e){return!!e.filter&&e.filter.datum})),d=Object(f.d)((function(e){return!!e.ui&&e.ui["MenuSecondary.layers"]})),u=Object(f.d)((function(e){return!!e.ui&&e.ui.FILTERBAR})),m=Object(f.d)((function(e){return e.filter})),p=Object(f.d)((function(e){return e.layers?e.layers.displaymode:N}));Object(a.useEffect)((function(){yt=Bt,xt(),function(e){ht=e}(Bt),function(e){mt=e}(Bt),function(e){Et=e,Nt()}(Bt),function(e){e,Tt()}(Bt),function(e){Rt=e,Dt()}(Bt),xt(),vt(),bt()})),Object(a.useEffect)((function(){var e;h()(l).diff(h()(),"minutes")<-10&&(e=h()().toDate(),i({type:"SET_FILTER_DATUM",payload:e.toISOString()}))}),[]),Object(a.useEffect)((function(){Tt(),Nt(),Dt()}),[m]);var b=function(){var e=p===w;return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{className:"hidden sm:block h-full",children:Object(Y.jsx)(nt,{isVisible:s&&u,isrentals:e})}),Object(Y.jsx)("div",{className:"block sm:hidden",children:Object(Y.jsx)(rt,{isVisible:s&&u,isrentals:e})}),Object(Y.jsx)(ot,{})]})},j=function(){return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)("div",{ref:c,className:"map-layer"}),Object(Y.jsx)(J,{}),b()]})};return Object(Y.jsx)("div",{className:"app ".concat(u||d?"overflow-y-hidden":""),children:Object(Y.jsxs)("div",{className:"gui-layer",children:[Object(Y.jsxs)(U.d,{children:[Object(Y.jsxs)(U.b,{exact:!0,path:"/",children:[Object(Y.jsx)(be,{mapContainer:c}),j()]}),Object(Y.jsx)(U.b,{exact:!0,path:"/login",children:Object(Y.jsx)(Ae,{})}),Object(Y.jsxs)(U.b,{exact:!0,path:"/map/park",children:[Object(Y.jsx)(be,{mapContainer:c}),j()]}),Object(Y.jsxs)(U.b,{exact:!0,path:"/map/rentals",children:[Object(Y.jsx)(be,{mapContainer:c}),j()]}),Object(Y.jsxs)(U.b,{exact:!0,path:"/stats/overview",children:[Object(Y.jsx)(he,{children:Object(Y.jsx)(Ie,{})}),b()]}),Object(Y.jsx)(U.b,{exact:!0,path:"/monitoring",children:Object(Y.jsx)(ze,{})}),Object(Y.jsx)(U.b,{exact:!0,path:"/over",children:Object(Y.jsx)(he,{children:Object(Y.jsx)(ct,{})})})]}),Object(Y.jsx)(P,{pathName:n})]})})},Ct=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.c,zt=n(48),Ft=localStorage.getItem("CROWDD_reduxState"),Gt=Ft?JSON.parse(Ft):{},Bt=Object(p.d)(B,Gt,Ct(Object(p.a)(j.a)));Bt.subscribe((function(){var e=Bt.getState(),t=localStorage.getItem("CROWDD_filterhash")||!1,n=zt(JSON.stringify(e.filter));n!==t&&(localStorage.setItem("CROWDD_filterhash",n),Bt.dispatch({type:"CLEAR_ZONES",payload:null}),Bt.dispatch({type:"CLEAR_VEHICLES",payload:null}));var a={last_update:h()().unix(),authentication:e.authentication,filter:e.filter,layers:e.layers,ui:e.ui};localStorage.setItem("CROWDD_reduxState",JSON.stringify(a))}));var Vt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(Y.jsx)(f.a,{store:Bt,children:Object(Y.jsx)(m.a,{children:Object(Y.jsx)(Mt,{content:this.props.content})})})}}]),n}(a.Component);var Ut=Vt=function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];var i=f.b.apply(void 0,a)(t);return function(t){return Object(Y.jsx)(i,Object(o.a)(Object(o.a)({},t),{},{store:e}))}}(Bt,Vt,(function(e){return{}}),(function(e){return{}})),Yt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,415)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(Y.jsx)(r.a.StrictMode,{children:Object(Y.jsx)(Ut,{})}),document.getElementById("root")),Yt()}},[[403,1,2]]]);
//# sourceMappingURL=main.f60e4349.chunk.js.map