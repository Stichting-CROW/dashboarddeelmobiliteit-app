{"version":3,"sources":["reducers/vehicles.js","reducers/authentication.js","reducers/index.js","components/Menu.jsx","actions/authentication.js","actions/actionTypes.js","pages/Map.jsx","pages/logo.svg","customHooks/useInterval.js","pages/Demo.jsx","pages/Login.jsx","App.js","AppProvider.js","reportWebVitals.js","index.js"],"names":["initialState","data","user_data","combineReducers","vehicles","state","action","type","payload","vehicle","uuid","filtered","filter","x","push","authentication","user","Menu","dispatch","useDispatch","isLoggedIn","useSelector","className","to","onClick","Map","props","mapContainer","useRef","useState","lng","lat","zoom","map","useEffect","current","maplibregl","container","style","accessToken","process","center","addControl","NavigationControl","on","getSource","addSource","addDataSources","getLayer","addLayer","console","log","addLayers","ref","useInterval","callback","delay","savedCallback","id","setInterval","clearInterval","Demo","url","json","setJson","timestamp","setTimestamp","fetch","then","response","Date","catch","ex","error","src","logo","alt","Object","keys","length","toLocaleTimeString","href","target","rel","Login","emailaddress","setEmailaddress","password","setPassword","recoverPassword","setRecoverPassword","loggedIn","setLoggedIn","login","e","preventDefault","REACT_APP_FUSIONAUTH_SERVER","loginId","applicationId","REACT_APP_FUSIONAUTH_APPLICATION_ID","method","body","JSON","stringify","headers","res","recover","class","htmlFor","autoCapitalize","placeholder","name","required","onChange","value","App","fetchVehiclesInPublicSpace","geoJson","md5","require","current_time","moment","forEach","v","duration","minutes","diff","in_public_space_since","color","feature","location","latitude","longitude","systemid","features","path","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","persistedState","localStorage","getItem","parse","store","createStore","appReducer","applyMiddleware","thunk","subscribe","storeState","getState","storeStateToSaveInLocalStorage","lastUpdate","unix","setItem","AppProvider","content","this","Component","WrappedComponent","args","ConnectedWrappedComponent","connect","connectWithStore","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ed6b9538.chunk.js","sourcesContent":["const initialState = {\n  data: null\n}\n\nexport default function vehicles(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_VEHICLES': {\n      const vehicles = action.payload\n      return {\n        data: vehicles\n      }\n    }\n    case 'SET_VEHICLE': {\n      const vehicle = action.payload\n      // Validate input\n      if(! vehicle.uuid) {\n        return {}\n      }\n      // Remove changed vehicle\n      const filtered = state.data.filter(function(x) {\n        return x.uuid !== vehicle.uuid;\n      });\n      // Add vehicle to vehicles set\n      filtered.push(vehicle)\n      // Set store\n      return { data: filtered }\n    }\n    case 'CLEAR_VEHICLES': {\n      return {\n        data: []\n      }\n    }\n    default:\n      return state;\n  }\n\n}\n","const initialState = {\n    user_data: null\n}\n  \nexport default function vehicles(state = initialState, action) {\n    switch(action.type) {\n        case 'SET_USER': {\n            const user = action.payload\n            return {\n                user_data: user\n            }\n        }\n        case 'CLEAR_USER': {\n            return { user_data: null }\n        }\n        default:\n            return state;\n    }\n}","import { combineReducers } from 'redux';\nimport vehicles from './vehicles';\nimport authentication from './authentication';\n\nexport default combineReducers({\n  vehicles,\n  authentication\n})\n","import React from 'react';\nimport { Link } from \"react-router-dom\";\nimport { clearUser } from '../actions/authentication';\nimport './Menu.css';\nimport { useDispatch, useSelector } from 'react-redux';\n\nfunction Menu() {\n  const dispatch = useDispatch();\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n\n  const logOut = () => {\n    if (isLoggedIn) {\n      dispatch( clearUser() );\n    }\n  }\n\n  return <ul className=\"flex\">\n    <li className=\"mr-6\">\n      <Link className=\"text-blue-500 hover:text-blue-800\" to=\"/\">\n        Home\n      </Link>\n    </li>\n    <li className=\"mr-6\">\n      <Link className=\"text-blue-500 hover:text-blue-800\" to=\"/demo\">\n        Demo\n      </Link>\n    </li>\n    <li className=\"mr-6\">\n      <Link className=\"text-blue-500 hover:text-blue-800\" to=\"/map/park\">\n        Parkeerdata\n      </Link>\n    </li>\n    {isLoggedIn\n      ?\n      <li className=\"mr-6\">\n        <Link className=\"text-blue-500 hover:text-blue-800\" onClick={logOut} to=\"/\">\n          Log uit\n        </Link>\n      </li>\n      :\n      <li className=\"mr-6\">\n        <Link className=\"text-blue-500 hover:text-blue-800\" to=\"/login\">\n          Log in\n        </Link>\n      </li>\n    }\n  </ul>\n\n  // <nav class=\"flex items-center justify-around flex-wrap bg-teal-500 p-6\">\n  // </nav>\n}\n\nexport default Menu;\n\n","import { SET_USER, CLEAR_USER } from \"./actionTypes\";\n\nexport const setUser = (user) => ({\n  type: SET_USER,\n  payload: user\n})\n\nexport const clearUser = () => ({\n  type: CLEAR_USER,\n  payload: null\n})\n","// vehicles\nexport const SET_VEHICLES = 'SET_VEHICLES';\nexport const SET_VEHICLE = 'SET_VEHICLE';\nexport const CLEAR_VEHICLES = 'CLEAR_VEHICLES';\n\n// authentication\nexport const SET_USER = 'SET_USER';\nexport const CLEAR_USER = 'CLEAR_USER';\n","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport maplibregl from 'maplibre-gl';\n\nimport './Map.css';\n\nfunction Map(props) {\n  //Get the value of a State variable, and store it to a const, to use it later\n  const vehicles = useSelector(state => {\n    return state.vehicles ? state.vehicles.data : null;\n  });\n\n  const mapContainer = useRef(null);\n  const [lng] = useState(5.102406);\n  const [lat] = useState(52.0729252);\n  const [zoom] = useState(14);\n  let map = useRef(null);\n\n  // Docs: https://maptiler.zendesk.com/hc/en-us/articles/4405444890897-Display-MapLibre-GL-JS-map-using-React-JS\n  useEffect(() => {\n    // Init MapLibre map\n    const initMap = () => {\n      if (map.current) return;\n      map.current = new maplibregl.Map({\n        container: mapContainer.current,\n        style: 'mapbox://styles/mapbox/streets-v11',\n        accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n        center: [lng, lat],\n        zoom: zoom\n      });\n      // Add controls\n      map.current.addControl(new maplibregl.NavigationControl(), 'top-right');\n\n      map.current.on('load', function() {\n        // console.log('MAP loaded');\n      })\n    }\n    initMap();\n\n  }, [vehicles, lng, lat, zoom])\n\n  useEffect(() => {\n    const addDataSources = (vehicles) => {\n      if (! map.current) {\n        // console.warn('addDataSources :: Map not loaded', map)\n        return;\n      }\n      if (! vehicles) {\n        // console.warn('addDataSources :: No vehicles known')\n        return;\n      }\n      // Check if source exists\n      const doesSourceExist = map.current.getSource('vehicles');\n      if(doesSourceExist) {\n        // console.log('source does exist. setting vehicles', vehicles)\n        // map.current.getSource('vehicles').setData(vehicles);\n      } else {\n        // console.log('source does not exist. setting vehicles', vehicles)\n        map.current.addSource('vehicles', {\n          'type': 'geojson',\n          'data': vehicles\n        });\n      }\n    }\n    addDataSources(vehicles);\n  }, [vehicles])\n\n  useEffect(() => {\n    const addLayers = (vehicles) => {\n      if (! map.current) return;\n      if (! vehicles) return;\n\n      const doesLayerExist = map.current.getLayer('vehicles-heatmap');\n      if(doesLayerExist) return;\n\n      map.current.addLayer(\n        {\n          'id': 'vehicles-heatmap',\n          'type': 'heatmap',\n          'source': 'vehicles',\n          'maxzoom': 9,\n          'paint': {\n            // Increase the heatmap weight based on frequency and property magnitude\n            'heatmap-weight': [\n              'interpolate',\n              ['linear'],\n              ['get', 'mag'],\n              0,\n              0,\n              6,\n              1\n            ],\n            // Increase the heatmap color weight weight by zoom level\n            // heatmap-intensity is a multiplier on top of heatmap-weight\n            'heatmap-intensity': [\n              'interpolate',\n              ['linear'],\n              ['zoom'],\n              0,\n              1,\n              9,\n              3\n            ],\n            // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n            // Begin color ramp at 0-stop with a 0-transparancy color\n            // to create a blur-like effect.\n            'heatmap-color': [\n              'interpolate',\n              ['linear'],\n              ['heatmap-density'],\n              0,\n              'rgba(33,102,172,0)',\n              0.2,\n              'rgb(103,169,207)',\n              0.4,\n              'rgb(209,229,240)',\n              0.6,\n              'rgb(253,219,199)',\n              0.8,\n              'rgb(239,138,98)',\n              1,\n              'rgb(178,24,43)'\n            ],\n            // Adjust the heatmap radius by zoom level\n            'heatmap-radius': [\n              'interpolate',\n              ['linear'],\n              ['zoom'],\n              0,\n              2,\n              9,\n              20\n            ],\n            // Transition from heatmap to circle layer by zoom level\n            'heatmap-opacity': [\n              'interpolate',\n              ['linear'],\n              ['zoom'],\n              7,\n              1,\n              9,\n              0\n            ]\n          }\n        },\n      );\n      map.current.addLayer(\n        {\n          'id': 'vehicles-point',\n          'type': 'circle',\n          'source': 'vehicles',\n          'minzoom': 7,\n          'paint': {\n          // Size circle radius by earthquake magnitude and zoom level\n          'circle-radius': [\n            'interpolate', ['linear'], ['zoom'],\n            12, 1,\n            16, ['*', 2, ['get', 'amount']]\n          ],\n          // Color circle by earthquake magnitude\n          // 'circle-color': [\n          //   'interpolate',\n          //   ['linear'],\n          //   ['get', 'mag'],\n          //   1,\n          //   'rgba(33,102,172,0)',\n          //   2,\n          //   'rgb(103,169,207)',\n          //   3,\n          //   'rgb(209,229,240)',\n          //   4,\n          //   'rgb(253,219,199)',\n          //   5,\n          //   'rgb(239,138,98)',\n          //   6,\n          //   'rgb(178,24,43)'\n          // ],\n          // 'circle-stroke-color': 'white',\n          // 'circle-stroke-width': 1,\n          // Transition from heatmap to circle layer by zoom level\n            'circle-opacity': [\n              'interpolate',\n              ['linear'],\n              ['zoom'],\n              7,\n              0,\n              8,\n              1\n            ],\n            'circle-color': ['get', 'color']\n          }\n        },\n      );\n      console.log('MAP layers added')\n    }\n    addLayers(vehicles);\n  }, [vehicles]);\n\n  return <div className=\"Map\">\n    <div ref={mapContainer} className=\"map\" />\n  </div>\n}\n\nexport default Map;\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import { useEffect, useRef } from 'react';\n\nfunction useInterval(callback, delay) {\n  const savedCallback = useRef();\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick() {\n      savedCallback.current();\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay);\n      return () => clearInterval(id);\n    }\n  }, [delay]);\n}\n\nexport default useInterval;","import { useState } from 'react';\n\nimport logo from './logo.svg';\nimport useInterval from '../customHooks/useInterval.js';\nimport './Demo.css';\n\nfunction Demo() {\n  const url = \"https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space\";\n  \n  let [json, setJson] = useState(false);\n  let [timestamp, setTimestamp] = useState(false);\n  \n  useInterval(() => {\n      // Your custom logic here\n      fetch(url).then(function(response) {\n        response.json().then(function(json) {\n          setJson(json);\n          setTimestamp(new Date());\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n          setJson(false);\n        });\n      }).catch(ex=>{\n        console.error(\"fetch error - unable to fetch JSON from %s\", url);\n        setJson(false);\n      });\n    }, 5000);\n      \n  return (\n    <div className=\"Demo\">\n      <header className=\"Demo-header\">\n        <img src={logo} className=\"Demo-logo\" alt=\"logo\" />\n        <p>\n          Got {Object.keys(json).length} vehicles at {timestamp ? timestamp.toLocaleTimeString() : '-/-'}\n        </p>\n        <a\n          className=\"Demo-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Learn React\n        </a>\n      </header>\n    </div>\n  );\n}\n\nexport default Demo;\n","import React, { useState } from 'react';\nimport { setUser } from '../actions/authentication';\nimport { useDispatch } from 'react-redux';\nimport {\n  Redirect,\n  Route\n } from \"react-router-dom\";\n\nconst Login = () => {\n  const [emailaddress, setEmailaddress] = useState('');\n  const [password, setPassword] = useState('');\n  const [recoverPassword, setRecoverPassword] = useState(false);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const dispatch = useDispatch();\n\n  const login = e => {\n    \n    e.preventDefault();\n\n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + \"/login\";\n    var data = {\n        loginId: emailaddress,\n        password: password,\n        applicationId: process.env.REACT_APP_FUSIONAUTH_APPLICATION_ID\n    };\n    \n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        dispatch( setUser(response) );\n        setLoggedIn(true);\n      }).catch(error => {\n        setLoggedIn(false);\n    });\n  };\n  \n  const recover = e => {\n    e.preventDefault();\n    \n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + \"/user/forgot-password\"\n    var data = {\n      loginId: emailaddress,\n    };\n\n    return fetch(url, {\n      method: 'POST', \n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        console.log(response);\n        return true;\n      }).catch(error => {\n        return false;\n      });\n\n    // do login here\n  };\n\n  const renderLogin = () => {\n    return (\n      <div class=\"flex items-center justify-center min-h-screen bg-gray-100\">\n        <div class=\"px-8 py-6 mt-4 text-left bg-white shadow-lg\">\n          <h3 class=\"text-2xl font-bold text-center\">Login</h3>\n          <form>\n            <label className=\"block\" htmlFor=\"emailaddress\">Email</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              autoCapitalize=\"off\"\n              placeholder=\"email\"\n              name=\"emailaddress\"\n              required\n              onChange={e => setEmailaddress(e.target.value)}\n            />\n\n            <label class=\"block\" htmlFor=\"password\">Wachtwoord</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              type=\"password\"\n              placeholder=\"Wachtwoord\"\n              name=\"password\"\n              required\n              onChange={e => setPassword(e.target.value)}\n            />\n          \n            <div class=\"flex items-baseline justify-between\">\n                <button class=\"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={login}>Login</button>\n                <button class=\"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={()=>setRecoverPassword(true)}>Wachtwoord vergeten</button>\n            </div>\n          </form>\n        </div>\n      </div>)\n  }\n  \n  const renderRecoverPassword = () => {\n    return (\n      <div class=\"flex items-center justify-center min-h-screen bg-gray-100\">\n        <div class=\"px-8 py-6 mt-4 text-left bg-white shadow-lg\">\n          <h3 class=\"text-2xl font-bold text-center\">Wachtwoord herstellen</h3>\n          <form>\n            <label className=\"block\" htmlFor=\"emailaddress\">Email</label>\n            <input\n              className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n              autoCapitalize=\"off\"\n              placeholder=\"Email\"\n              name=\"emailaddress\"\n              required\n              onChange={e => setEmailaddress(e.target.value)}\n            />\n          \n            <div class=\"flex items-baseline justify-between\">\n                <button class=\"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={recover}>Herstel</button>\n                <button class=\"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900\" onClick={()=>setRecoverPassword(false)}>Annuleer</button>\n            </div>\n          </form>\n        </div>\n      </div>)\n  }\n  const renderRedirect = () => {\n    return (\n        <Redirect to=\"/\" />\n    );\n  }\n \n  if (loggedIn) {\n    return renderRedirect();\n  }\n\n  return recoverPassword ? renderRecoverPassword() : renderLogin();\n};\n\nexport default Login;","import { useEffect } from 'react';\nimport {\n BrowserRouter as Router,\n Switch,\n Route\n} from \"react-router-dom\";\n\nimport Menu from './components/Menu.jsx';\nimport Map from './pages/Map.jsx';\nimport Demo from './pages/Demo.jsx';\nimport Login from './pages/Login.jsx';\nimport moment from 'moment';\n\nimport { useDispatch } from 'react-redux';\nimport useInterval from './customHooks/useInterval.js';\n\nimport './App.css';\n\nfunction App() {\n  const url = \"https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space\";\n  const dispatch = useDispatch()\n  \n  // let [json, setJson] = useState(false);\n  // let [timestamp, setTimestamp] = useState(false);\n\n  const convertDurationToColor = (duration) => {\n    if (duration <= 60) {\n      return \"#38ff71\";\n    } \n    if (duration <= 24 * 60) {\n      return \"#008c28\";\n    } \n    if (duration <= 24 * 60 * 4) {\n      return \"#fff700\";\n    }\n    return \"#cc0000\";\n  }\n\n  const fetchVehiclesInPublicSpace = () => {\n    fetch(url).then(function(response) {\n      response.json().then(function(vehicles) {\n        let geoJson = {\n           \"type\":\"FeatureCollection\",\n           \"crs\":{\n              \"type\":\"name\",\n              \"properties\":{\n                 \"name\":\"urn:ogc:def:crs:OGC:1.3:CRS84\"\n              }\n           },\n           \"features\":[]\n        }\n        \n        const md5 = require('md5');\n        var current_time = moment();\n        vehicles.forEach(v => {\n          var minutes = current_time.diff(moment(v.in_public_space_since), 'minutes');\n          const color = convertDurationToColor(minutes);\n\n          let feature = {\n             \"type\":\"Feature\",\n             \"properties\":{\n                \"id\":md5(v.location.latitude+v.location.longitude),\n                \"systemid\": v.systemid,\n                \"in_public_space_since\": v.in_public_space_since,\n                \"color\": color\n             },\n             \"geometry\":{\n                \"type\":\"Point\",\n                \"coordinates\":[\n                   v.location.longitude,\n                   v.location.latitude,\n                   0.0\n                ]\n             }\n          }\n\n          geoJson.features.push(feature);\n          // new maplibregl.Marker({color: \"#FF0000\"})\n          //   .setLngLat([x.location.longitude, x.location.latitude])\n          //   .addTo(map.current);\n          //\n          // return;\n        })\n        \n        dispatch({\n          type: 'SET_VEHICLES',\n          payload: geoJson\n        })\n        \n        // setJson(json);\n        // setTimestamp(new Date());\n      }).catch(ex=>{\n        console.error(\"unable to decode JSON\");\n        // setJson(false);\n      });\n    }).catch(ex=>{\n      console.error(\"fetch error - unable to fetch JSON from %s\", url);\n      // setJson(false);\n    });\n  }\n  \n  useInterval(() => {\n    fetchVehiclesInPublicSpace();\n  }, 30 * 1000);// every 30 seconds\n\n  useEffect(x => {\n    fetchVehiclesInPublicSpace();\n  })\n\n  return (\n    <Router>\n       <div className=\"App\">\n        <Menu />\n\n         <Switch>\n           <Route path=\"/demo\">\n            <Demo />\n           </Route>\n           <Route path=\"/login\">\n              <Login />\n           </Route>\n           <Route path=\"/\">\n            <Map />\n           </Route>\n         </Switch>\n       </div>\n     </Router>\n  );\n}\n\nexport default App;\n","import React, { Component } from 'react';\n// import { bindActionCreators } from 'redux';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { connect } from 'react-redux';\n\nimport moment from 'moment';\nimport thunk from 'redux-thunk';\n\nimport appReducer from './reducers';\nimport App from './App';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n// Get persistentState from localStorage\nconst persistedState = localStorage.getItem('CROWDD_reduxState')\n  ? JSON.parse(localStorage.getItem('CROWDD_reduxState'))\n  : {}\n\nconst store = createStore(\n  appReducer,\n  persistedState,\n  composeEnhancers(applyMiddleware(thunk)),\n);\n\n// Store Redux state into localStorage\nstore.subscribe(() => {\n  const storeState = store.getState();\n  const storeStateToSaveInLocalStorage = {\n    lastUpdate: moment().unix(),\n    authentication: storeState.authentication\n  }\n  localStorage.setItem('CROWDD_reduxState', JSON.stringify(storeStateToSaveInLocalStorage))\n})\n\nclass AppProvider extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <App content={this.props.content} />\n      </Provider>\n    )\n  }\n}\n\nfunction connectWithStore(store, WrappedComponent, ...args) {\n  let ConnectedWrappedComponent = connect(...args)(WrappedComponent)\n  return function (props) {\n    return <ConnectedWrappedComponent {...props} store={store} />\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    // config: getConfig(state),\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    // actions: bindActionCreators(actions, dispatch),\n  }\n}\n\nexport default AppProvider = connectWithStore(\n  store,\n  AppProvider,\n  mapStateToProps,\n  mapDispatchToProps\n)\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppProvider from './AppProvider';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}