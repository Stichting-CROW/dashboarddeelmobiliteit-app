(this["webpackJsonpdashboarddeelmobiliteit-app"]=this["webpackJsonpdashboarddeelmobiliteit-app"]||[]).push([[0],{211:function(e,t,n){},260:function(e,t,n){},268:function(e,t,n){},273:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},417:function(e,t,n){},418:function(e,t,n){},419:function(e,t,n){},420:function(e,t,n){},421:function(e,t,n){},422:function(e,t,n){},441:function(e,t,n){},482:function(e,t,n){},483:function(e,t,n){},484:function(e,t,n){},485:function(e,t,n){},486:function(e,t,n){},487:function(e,t,n){},488:function(e,t,n){},489:function(e,t,n){},490:function(e,t,n){},491:function(e,t,n){},492:function(e,t,n){},493:function(e,t,n){},494:function(e,t,n){},496:function(e,t,n){},497:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(40),c=n.n(i),s=(n(260),n(6)),o=n(67),l=n(68),d=n(100),u=n(107),b=n(28),m=n(5),p=n(91),f=n(16),j=n.n(f),h=n(220);var O=n(76),g={aanbieders:[],gebieden:[],zones:[],vehicle_types:[],metadata_loaded:!1,zones_loaded:!1},v=function(e){for(var t=[],n=Math.trunc(360/(e+1)),a=0;a<e;a++){var r=a*n,i=a%2===0?35:65,c=a%2===1?40:60;t.push("hsla(".concat(r,",").concat(c,"%,").concat(i,"%,").concat(1,")"))}return t};var y={data:[],operatorstats:[]};var x={origins:{},destinations:{},origins_operatorstats:[],destinations_operatorstats:[]};var _={visible:!0,gebied:"",zones:"",datum:(new Date).toISOString(),intervalduur:36e5,aanbiedersexclude:"",parkeerduurexclude:"",voertuigtypesexclude:"",afstandexclude:"",herkomstbestemming:"",ontwikkelingvan:j()().subtract(30,"days").toISOString(),ontwikkelingtot:(new Date).toISOString(),ontwikkelingaggregatie:"day"};var E={user_data:null};var k=n(76),w={data:[],filter:""};var N="displaymode-park",S="displaymode-rentals",T="displaymode-zones",D="displaymode-other",A="parkeerdata-heatmap",C="parkeerdata-clusters",R="parkeerdata-voertuigen",I="verhuurdata-heatmap",L="verhuurdata-clusters",z="verhuurdata-voertuigen",M={zones_visible:!1,displaymode:N,view_park:R,view_rentals:z,extent:[],mapextent:[]},F=n(76);var G=n(120),P={FILTERBAR:window.innerWidth>800,SELECTLAYER:!0,SHOWLOADING:!1};var U={operatorstats_verhuringenchart:[],operatorstats_beschikbarevoertuigenchart:[],operatorstats_parkeerduurchart:[]};var H=Object(p.b)({created:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_CREATED"===t.type?t.payload:e},last_update:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_LAST_UPDATE"===t.type?t.payload:e},metadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AANBIEDERS":var n=e.aanbieders?e.aanbieders:[],a=v(t.payload.length),r={cykl:"#a5e067",flickbike:"#fe431d",mobike:"#ed5144",donkey:"#ed5144",htm:"#db291e",jump:"#fd3e48",gosharing:"#77b136",check:"#8f3af8",felyx:"#064627",lime:"#1bd831",baqme:"#4bdfbb",bird:"#26ccf0",cargoroo:"#ffcb34",hely:"#fd645c",tier:"#0d123f",dott:"#00a8e9"},i=t.payload.map((function(e,t){var n=r[e.system_id]?r[e.system_id]:a[t];return Object.assign(e,{color:n})}));return O(JSON.stringify(n))===O(JSON.stringify(i))?e:Object(s.a)(Object(s.a)({},e),{},{aanbieders:i});case"SET_GEBIEDEN":var c=e.gebieden?e.gebieden:[];return O(JSON.stringify(c))===O(JSON.stringify(t.payload))?e:Object(s.a)(Object(s.a)({},e),{},{gebieden:t.payload});case"SET_ZONES":var o=e.zones?e.zones:[];return O(JSON.stringify(o))===O(JSON.stringify(t.payload))?e:Object(s.a)(Object(s.a)({},e),{},{zones:t.payload});case"CLEAR_ZONES":return Object(s.a)(Object(s.a)({},e),{},{zones:[],zones_loaded:!1});case"SET_VEHICLE_TYPES":var l=e.vehicle_types?e.vehicle_types:[];return JSON.stringify(O(l))===JSON.stringify(O(t.payload))?e:Object(s.a)(Object(s.a)({},e),{},{vehicle_types:t.payload});case"SET_METADATA_LOADED":return Object(s.a)(Object(s.a)({},e),{},{metadata_loaded:t.payload});case"SET_ZONES_LOADED":return Object(s.a)(Object(s.a)({},e),{},{zones_loaded:t.payload});case"LOGIN":case"LOGOUT":return console.log("login/logout - reset metadata"),g;default:return e}},vehicles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VEHICLES":return{data:t.payload,operatorstats:[]};case"SET_VEHICLES_OPERATORSTATS":return Object.assign({},e,{operatorstats:t.payload});case"CLEAR_VEHICLES":return{data:[],operatorstats:[]};case"LOGIN":case"LOGOUT":return y;default:return e}},rentals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_RENTALS_ORIGINS":return Object.assign({},e,{origins:t.payload,origins_operatorstats:[]});case"SET_RENTALS_DESTINATIONS":return Object.assign({},e,{destinations:t.payload,destinations_operatorstats:[]});case"CLEAR_RENTALS_ORIGINS":return Object.assign({},e,{origins:[],origins_operatorstats:[]});case"CLEAR_RENTALS_DESTINATIONS":return Object.assign({},e,{destinations:[],destinations_operatorstats:[]});case"LOGIN":case"LOGOUT":return x;case"SET_RENTALS_ORIGINS_OPERATORSTATS":return Object.assign({},e,{origins_operatorstats:t.payload});case"SET_RENTALS_DESTINATIONS_OPERATORSTATS":return Object.assign({},e,{destinations_operatorstats:t.payload});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER_VISIBLE":return Object(s.a)(Object(s.a)({},e),{},{visible:t.payload});case"SET_FILTER_GEBIED":return e.gebied===t.payload?e:Object(s.a)(Object(s.a)({},e),{},{gebied:t.payload,zones:""});case"SET_FILTER_DATUM":return Object(s.a)(Object(s.a)({},e),{},{datum:t.payload});case"SET_FILTER_INTERVAL_START":return Object(s.a)(Object(s.a)({},e),{},{intervalstart:t.payload});case"SET_FILTER_INTERVAL_END":return Object(s.a)(Object(s.a)({},e),{},{intervalend:t.payload});case"SET_FILTER_INTERVAL_DUUR":return Object(s.a)(Object(s.a)({},e),{},{intervalduur:t.payload});case"SET_FILTER_HERKOMSTBESTEMMING":return Object(s.a)(Object(s.a)({},e),{},{herkomstbestemming:t.payload});case"ADD_TO_FILTER_ZONES":var n=[];if(e.zones)try{n=e.zones.split(",")||[]}catch(m){n=[]}return n.includes(t.payload)||n.push(t.payload),Object(s.a)(Object(s.a)({},e),{},{zones:n.join(",")});case"REMOVE_FROM_FILTER_ZONES":var a=e.zones.split(",")||[];return a=a.filter((function(e){return e.toString()!==t.payload.toString()})),Object(s.a)(Object(s.a)({},e),{},{zones:a.join(",")});case"CLEAR_FILTER_ZONES":return Object(s.a)(Object(s.a)({},e),{},{zones:""});case"ADD_TO_FILTER_MARKERS_EXCLUDE":var r=[];try{if(e.parkeerduurexclude)try{r=e.parkeerduurexclude.split(",")||[]}catch(m){r=[]}r.includes(t.payload)||r.push(t.payload)}catch(m){r=[]}return Object(s.a)(Object(s.a)({},e),{},{parkeerduurexclude:r.join(",")});case"REMOVE_FROM_FILTER_MARKERS_EXCLUDE":var i=[];try{i=(i=e.parkeerduurexclude.split(",")||[]).filter((function(e){return e.toString()!==t.payload.toString()}))}catch(m){i=[]}return Object(s.a)(Object(s.a)({},e),{},{parkeerduurexclude:i.join(",")});case"CLEAR_FILTER_MARKERS_EXCLUDE":return Object(s.a)(Object(s.a)({},e),{},{parkeerduurexclude:""});case"ADD_TO_FILTER_AFSTAND_EXCLUDE":var c=[];try{if(e.afstandexclude)try{c=e.afstandexclude.split(",")||[]}catch(m){c=[]}c.includes(t.payload)||c.push(t.payload)}catch(m){c=[]}return Object(s.a)(Object(s.a)({},e),{},{afstandexclude:c.join(",")});case"REMOVE_FROM_FILTER_AFSTAND_EXCLUDE":var o=[];try{o=(o=e.afstandexclude.split(",")||[]).filter((function(e){return e.toString()!==t.payload.toString()}))}catch(m){o=[]}return Object(s.a)(Object(s.a)({},e),{},{afstandexclude:o.join(",")});case"CLEAR_FILTER_AFSTAND_EXCLUDE":return Object(s.a)(Object(s.a)({},e),{},{afstandexclude:""});case"ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE":var l=[];try{if(e.voertuigtypesexclude)try{l=e.voertuigtypesexclude.split(",")||[]}catch(m){l=[]}l.includes(t.payload)||l.push(t.payload)}catch(m){l=[]}return Object(s.a)(Object(s.a)({},e),{},{voertuigtypesexclude:l.join(",")});case"REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE":var d=[];try{d=(d=e.voertuigtypesexclude.split(",")||[]).filter((function(e){return e.toString()!==t.payload.toString()}))}catch(m){d=[]}return Object(s.a)(Object(s.a)({},e),{},{voertuigtypesexclude:d.join(",")});case"CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE":return Object(s.a)(Object(s.a)({},e),{},{voertuigtypesexclude:""});case"ADD_TO_FILTER_AANBIEDERS_EXCLUDE":var u=[];try{e.aanbiedersexclude&&(u=e.aanbiedersexclude.split(",")||[]),u.includes(t.payload)||u.push(t.payload)}catch(m){u=[]}return Object(s.a)(Object(s.a)({},e),{},{aanbiedersexclude:u.join(",")});case"REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE":var b=[];try{b=(b=e.aanbiedersexclude.split(",")||[]).filter((function(e){return e!==t.payload}))}catch(m){b=[]}return Object(s.a)(Object(s.a)({},e),{},{aanbiedersexclude:b.join(",")});case"CLEAR_FILTER_AANBIEDERS_EXCLUDE":return Object(s.a)(Object(s.a)({},e),{},{aanbiedersexclude:""});case"SET_FILTER_ONTWIKKELING_VANTOT":return Object(s.a)(Object(s.a)({},e),{},{ontwikkelingvan:t.payload.van,ontwikkelingtot:t.payload.tot});case"SET_FILTER_ONTWIKKELING_AGGREGATIE":return Object(s.a)(Object(s.a)({},e),{},{ontwikkelingaggregatie:t.payload});case"LOGIN":case"LOGOUT":case"RESET_FILTER":return _;case"IMPORT_STATE":return Object(s.a)(Object(s.a)({},e),t.payload.filter);default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":var n=t.payload;return{user_data:n};case"CLEAR_USER":return{user_data:null};default:return e}},zones_geodata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ZONES_GEODATA":var n=e.data?e.data:[],a=k(JSON.stringify(n))!==k(JSON.stringify(t.payload.data)),r=e.filter!==t.payload.filter;return a||r?Object(s.a)(Object(s.a)({},e),{},{data:t.payload.data,filter:t.payload.filter}):e;case"LOGIN":case"LOGOUT":return w;default:return e}},layers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LAYER_SET_DISPLAYMODE":return e.displaymode===t.payload?e:Object(s.a)(Object(s.a)({},e),{},{displaymode:t.payload});case"LAYER_SET_VIEW_PARK":return e.view_park===t.payload?e:Object(s.a)(Object(s.a)({},e),{},{view_park:t.payload});case"LAYER_SET_VIEW_RENTALS":return e.view_rentals===t.payload?e:Object(s.a)(Object(s.a)({},e),{},{view_rentals:t.payload});case"LAYER_TOGGLE_ZONES_VISIBLE":return Object(s.a)(Object(s.a)({},e),{},{zones_visible:!e.zones_visible});case"LAYER_SET_ZONES_EXTENT":return F(JSON.stringify(t.payload||[]))!==F(JSON.stringify(e.extent||[]))?Object(s.a)(Object(s.a)({},e),{},{extent:t.payload||[]}):e;case"LAYER_SET_MAP_EXTENT":return F(JSON.stringify(t.payload))!==F(JSON.stringify(e.mapextent||!1))?Object(s.a)(Object(s.a)({},e),{},{mapextent:t.payload}):e;case"LAYER_SET_MAP_ZOOM":return F(JSON.stringify(t.payload))!==F(JSON.stringify(e.zoom||!1))?Object(s.a)(Object(s.a)({},e),{},{zoom:t.payload}):e;case"IMPORT_STATE":return console.log("import layers"),Object(s.a)(Object(s.a)({},e),t.payload.layers);case"LOGIN":case"LOGOUT":return M;default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VISIBILITY":return Object(s.a)(Object(s.a)({},e),{},Object(G.a)({},t.payload.name,t.payload.visibility));case"IMPORT_STATE":return console.log("import ui"),Object(s.a)(Object(s.a)({},e),t.payload.ui);case"SHOW_LOADING":return Object(s.a)(Object(s.a)({},e),{},{showloading:t.payload});case"LOGIN":case"LOGOUT":return P;default:return e}},statsreducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_OPERATORSTATS_VERHURINGENCHART":return Object.assign({},e,{operatorstats_verhuringenchart:t.payload});case"SET_OPERATORSTATS_BESCHIKBAREVOERTUIGENCHART":return Object.assign({},e,{operatorstats_beschikbarevoertuigenchart:t.payload});case"SET_OPERATORSTATS_PARKEERDUURCHART":return Object.assign({},e,{operatorstats_parkeerduurchart:t.payload});case"CLEAR_STATS":case"LOGIN":case"LOGOUT":return U;default:return e}}}),B=n(9),W=n(31),V=(n(268),n(0));function Y(e){var t=e.pathName,n=t===e.path||t===e.href||"/"===t&&"/map/park"===e.path,a=n?e.icon.replace(".svg","-active.svg"):e.icon;return Object(V.jsxs)(V.Fragment,{children:[e.path&&Object(V.jsxs)(b.b,{className:"\n          text-menu\n          text-center\n          ".concat(n?"is-active":"","\n        "),to:e.path,href:e.href,onClick:e.onClick,title:e.title,children:[a?Object(V.jsx)("img",{alt:e.text,src:a}):"",e.text&&Object(V.jsx)("span",{className:"".concat(n||!a?"inline-block":"hidden"," sm:inline-block  ml-2"),children:e.text})]}),!e.path&&Object(V.jsxs)("a",{className:"\n          text-menu\n          text-center\n          inline-block cursor-pointer\n          ".concat(n?"is-active":"","\n        "),href:e.href,onClick:e.onClick,title:e.title,children:[a?Object(V.jsx)("img",{alt:e.text,src:a}):"",e.text&&Object(V.jsx)("span",{className:"".concat(n||!a?"inline-block":"hidden"," sm:inline-block  ml-2"),children:e.text})]})]})}function J(e){var t=Object(a.useState)(!1),n=Object(B.a)(t,2),r=n[0],i=n[1];return Object(V.jsxs)(V.Fragment,{children:[e.path&&Object(V.jsx)(b.b,{className:"text-link",to:e.path,href:e.href,onClick:e.onClick,children:Object(V.jsx)("span",{className:"block",children:r?e.message:e.text})}),!e.path&&Object(V.jsx)("a",{className:"text-link inline-block cursor-pointer",href:e.href,onClick:function(t){console.log("show message"),i(!0),setTimeout((function(){console.log("hide message"),i(!1)}),3e3),e.onClick(t)},children:Object(V.jsx)("span",{className:"block",children:r?e.message:e.text})})]})}var Z=function(e){var t=e.pathName,n=Object(a.useState)(!1),r=Object(B.a)(n,2),i=r[0],c=r[1],s=Object(m.c)(),o=Object(m.d)((function(e){return e.authentication.user_data})),l=Object(m.d)((function(e){return!!e.authentication.user_data})),d=Object(m.d)((function(e){return{filter:e.filter,layers:e.layers,ui:e.ui}})),u=function(){var e=window.location;!function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(n){return console.warn("Copy to clipboard failed.",n),prompt("Copy to clipboard: Ctrl+C, Enter",e)}finally{document.body.removeChild(t)}}}(e.protocol+"//"+e.host+e.pathname+"?view="+encodeURIComponent(JSON.stringify(d))),window.notify("Link gekopieerd. Gebruik de link om direct naar deze weergave van de kaart te verwijzen.")},p="Menu fixed w-full mx-0 bottom-0 bg-white";return p+=" sm:bg-transparent sm:w-full",d&&d.ui&&d.ui.FILTERBAR&&(p+=" filter-open"),Object(V.jsx)("div",{className:p,children:Object(V.jsxs)("div",{className:" Menu-inner px-0 mx-auto bg-white box-border w-full flex flex-col justify-center sm:px-4 sm:shadow-lg sm:m-4 sm:mb-1 sm:rounded-3xl ",children:[Object(V.jsxs)("div",{className:" whitespace-nowrap text-center ",children:[l&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Y,{pathName:t,text:"Aanbod",path:"/map/park",icon:"/images/components/Menu/aanbod.svg"}),Object(V.jsx)(Y,{pathName:t,text:"Verhuringen",path:"/map/rentals",icon:"/images/components/Menu/verhuringen.svg"}),function(){return o&&o.user&&["mail@bartroorda.nl","rinse.gorter@denhaag.nl","otto.vanboggelen@crow.nl","sven.boor@gmail.com"].indexOf(o.user.email)>-1}&&Object(V.jsx)(Y,{pathName:t,text:"Zones",path:"/map/zones",icon:"https://i.imgur.com/GrF8KBA.png"}),Object(V.jsx)(Y,{pathName:t,text:"Ontwikkeling",path:"/stats/overview",icon:"/images/components/Menu/ontwikkeling.svg"}),Object(V.jsx)(Y,{title:"Kopieer link",text:"",icon:"/images/components/Menu/share.svg",onClick:function(e){e.preventDefault(),u()}}),Object(V.jsx)(Y,{pathName:t,path:"/misc",text:"",icon:"/images/components/Menu/settings.svg"})]}),!l&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(b.b,{className:"text-menu",to:"/login",children:"Log in"}),Object(V.jsx)(b.b,{className:"text-menu",to:"/over",children:"Over"}),Object(V.jsx)(b.b,{className:"text-menu",to:"/rondleiding",children:"Rondleiding"})]}),l&&!1]}),i&&Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)("div",{className:" Menu-subMenu absolute ",children:[Object(V.jsx)(J,{text:"Log uit",onClick:function(e){e.preventDefault(),c(!i),function(){try{l&&(s({type:"CLEAR_USER",payload:null}),s({type:"LOGOUT",payload:null}))}catch(e){console.error("Menu.logout - error ",e)}}()}}),Object(V.jsx)(J,{text:"Exporteer aanzicht",message:"Aanzicht gekopieerd",onClick:function(e){u()},children:Object(V.jsx)("span",{children:"Tekst hier"})}),Object(V.jsx)(J,{text:"Feedback \ud83d\udce8",href:"mailto:info@deelfietsdashboard.nl?subject=Feedback Dashboard Deelmobiliteit&body=Ik heb feedback: ",onClick:function(e){c(!i)}})]})})]})})};n(273);function K(e){return Object(V.jsx)("a",{href:"goForIt",className:"MenuSecondaryItem cursor-pointer mx-2",onClick:e.onClick,children:e.text})}var X=function(){var e=Object(m.c)(),t=Object(a.useState)(document.location.pathname),n=Object(B.a)(t,2),r=n[0],i=n[1],c=Object(W.g)();Object(a.useEffect)((function(){i(c?c.pathname:null)}),[c]);var s=function(t,n){e({type:"SET_VISIBILITY",payload:{name:t,visibility:n}})};return Object(V.jsxs)("div",{className:"MenuSecondary block sm:hidden absolute left-0 z-10",children:[Object(V.jsx)(K,{text:"Filters",onClick:function(){s("FILTERBAR",!0)}}),"/stats/overview"!==r&&Object(V.jsx)(K,{text:"Lagen",onClick:function(){s("MenuSecondary.layers",!0)}})]})},q=n(11),$=n.n(q),Q=n(19),ee=n(88),te=n.n(ee),ne=n(121),ae=n.n(ne),re=n(222),ie=n(223),ce=function(e,t){var n=e.filter((function(e){return e.system_id===t}));return n&&n[0]?n[0].color:"#666"},se=function(e){return e?Object.keys(e).filter((function(e,t){return"name"!==e&&e})):[]};j.a.updateLocale("nl",ae.a);var oe={baqme:"https://www.baqme.com/",bird:"https://www.bird.co/",cykl:"https://www.cykl.nl/",check:"https://ridecheck.app/",cargoroo:"https://cargoroo.nl/",deelfietsnederland:"https://deelfietsnederland.nl/",donkey:"https://www.donkey.bike/",felyx:"https://felyx.com/",flickbike:"https://www.flickbike.nl/",gosharing:"https://go-sharing.com/",hely:"https://hely.com/",htm:"https://www.htm.nl/ons-vervoer/htm-fiets",keobike:"https://keobike.nl/",lime:"https://www.li.me/",tier:"https://www.tier.app/",dott:"https://ridedott.com/",uwdeelfiets:"https://www.uwdeelfiets.nl/"},le=new ie.a;window.showConfetti=function(){le.addConfetti(),le.addConfetti({emojis:["\ud83d\udeb2","\ud83d\udeb2","\ud83d\udeb4\u200d\u2640\ufe0f","\ud83d\udef5","\ud83d\udef4","\ud83d\ude97","\ud83d\ude99","\u2728","\u2728"],emojiSize:30,confettiNumber:100})};var de=n(169),ue=n.n(de),be=(n(275),n(224)),me=n.n(be),pe=function(e){return{headers:{authorization:"Bearer ".concat(e),"Content-Type":"application/json",charset:"utf-8"}}},fe=function(){var e=Object(Q.a)($.a.mark((function e(t,n){var a,r,i;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",{});case 2:if(n.municipality){e.next=4;break}return e.abrupt("return",{});case 4:return a="municipality=".concat(n.municipality,"&geography_types=no_parking&geography_types=stop&geography_types=monitoring"),r="https://mds.dashboarddeelmobiliteit.nl/admin/zones?".concat(a),e.next=8,fetch(r,pe(t));case 8:return i=e.sent,e.next=11,i.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),je=function(){var e=Object(Q.a)($.a.mark((function e(t,n){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://mds.dashboarddeelmobiliteit.nl/admin/zone",e.next=3,fetch("https://mds.dashboarddeelmobiliteit.nl/admin/zone",Object.assign({},pe(t),{method:"POST",body:JSON.stringify(n)}));case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(Q.a)($.a.mark((function e(t,n){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://mds.dashboarddeelmobiliteit.nl/admin/zone",e.next=3,fetch("https://mds.dashboarddeelmobiliteit.nl/admin/zone",Object.assign({},pe(t),{method:"PUT",body:JSON.stringify(n)}));case 3:return a=e.sent,e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(Q.a)($.a.mark((function e(t,n){var a,r;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://mds.dashboarddeelmobiliteit.nl/admin/zone/".concat(n),e.next=3,fetch(a,Object.assign({},pe(t),{method:"DELETE"}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=Object(Q.a)($.a.mark((function e(t,n){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CROW_DD){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fe(t,n);case 4:if(a=e.sent,!(Object.keys(a).length<=0)){e.next=7;break}return e.abrupt("return");case 7:Object.keys(a).forEach((function(e){var t=a[e];window.CROW_DD.theDraw.add({type:"FeatureCollection",features:[{type:"Feature",properties:{zone_type:t.geography_type},id:t.zone_id,geometry:t.area.geometry}]})}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(e){if(e){e.on("draw.selectionchange",(function(e){if(e&&(e.features&&1===e.features.length)){var t=e.features[0].id,n=new CustomEvent("setSelectedZone",{detail:t});window.dispatchEvent(n)}}))}},ye=(n(276),["interpolate",["linear"],["zoom"],0,.0025,5,.005,7.5,.02,10,.1,12,.25,15,.3,17,.5,20,1]),xe={type:"symbol",filter:["!",["has","point_count"]],layout:{"icon-image":["concat",["get","system_id"],"-p:",["get","duration_bin"]],"icon-size":["interpolate",["linear"],["zoom"],11,.2,16,.7],"icon-allow-overlap":!0}},_e={id:"vehicles-heatmap",type:"heatmap",source:"vehicles",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,1e-4,10,1],"heatmap-intensity":ye,"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.25,"#ffd837",.5,"#fe862e",.75,"#fd3e48",1,"#9a231f"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,10,10,12,12,20,15,40,20,60,30,100,40,100],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,.8]}},Ee={id:"rentals-origins-heatmap",type:"heatmap",source:"rentals-origins",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,1e-4,10,1],"heatmap-intensity":ye,"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.25,"#ffd837",.5,"#fe862e",.75,"#fd3e48",1,"#9a231f"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,10,10,12,12,20,15,40,20,60,30,100,40,100],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,.8]}},ke={id:"rentals-destinations-heatmap",type:"heatmap",source:"rentals-destinations",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,1e-4,10,1],"heatmap-intensity":ye,"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.25,"#ffd837",.5,"#fe862e",.75,"#fd3e48",1,"#9a231f"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,10,10,12,12,20,15,40,20,60,30,100,40,100],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,.8]}},we={"zones-geodata":{id:"zones-geodata",type:"fill",source:"zones-geodata",paint:{"fill-color":"#d1d1e8","fill-opacity":.5}},"zones-geodata-border":{id:"zones-geodata-border",type:"line",source:"zones-geodata",paint:{"line-color":"#001299","line-opacity":.6,"line-dasharray":[2,2]}},"vehicles-point":{id:"vehicles-point",type:"symbol",source:"vehicles",layout:{"icon-image":["concat",["get","system_id"],"-p:",["get","duration_bin"]],"icon-size":["interpolate",["linear"],["zoom"],11,.2,16,.7],"icon-allow-overlap":!0},minzoom:6},"vehicles-clusters":{id:"vehicles-clusters",type:"circle",source:"vehicles-clusters",filter:["has","point_count"],paint:{"circle-color":"#1FA024","circle-radius":["step",["get","point_count"],20,100,30,750,40]},maxzoom:18},"vehicles-clusters-count":{id:"vehicles-clusters-count",type:"symbol",source:"vehicles-clusters",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","point_count"],16,100,20,750,30]},paint:{"text-color":"#fff"},maxzoom:18},"vehicles-clusters-point":Object.assign({},xe,{id:"vehicles-clusters-point",source:"vehicles-clusters"}),"vehicles-heatmap":_e,"rentals-origins-point":{id:"rentals-origins-point",type:"symbol",source:"rentals-origins",layout:{"icon-image":["concat",["get","system_id"],"-r:",["get","distance_bin"]],"icon-size":["interpolate",["linear"],["zoom"],11,.2,16,.7],"icon-allow-overlap":!0}},"rentals-origins-clusters":{id:"rentals-origins-clusters",type:"circle",source:"rentals-origins-clusters",filter:["has","point_count"],paint:{"circle-color":"#1FA024","circle-radius":["step",["get","point_count"],20,100,30,750,40]},maxzoom:18},"rentals-origins-clusters-count":{id:"rentals-origins-clusters-count",type:"symbol",source:"rentals-origins-clusters",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","point_count"],16,100,20,750,30]},paint:{"text-color":"#fff"},maxzoom:18},"rentals-origins-clusters-point":Object.assign({},xe,{id:"rentals-origins-clusters-point",source:"rentals-origins-clusters",layout:Object.assign({},xe.layout,{"icon-image":["concat",["get","system_id"],"-r:",["get","distance_bin"]]})}),"rentals-origins-heatmap":Ee,"rentals-destinations-point":{id:"rentals-destinations-point",type:"symbol",source:"rentals-destinations",layout:{"icon-image":["concat",["get","system_id"],"-r:",["get","distance_bin"]],"icon-size":["interpolate",["linear"],["zoom"],11,.2,16,.7],"icon-allow-overlap":!0}},"rentals-destinations-clusters":{id:"rentals-destinations-clusters",type:"circle",source:"rentals-destinations-clusters",filter:["has","point_count"],paint:{"circle-color":"#1FA024","circle-radius":["step",["get","point_count"],20,100,30,750,40]},maxzoom:18},"rentals-destinations-clusters-count":{id:"rentals-destinations-clusters-count",type:"symbol",source:"rentals-destinations-clusters",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","point_count"],16,100,20,750,30]},paint:{"text-color":"#fff"},maxzoom:18},"rentals-destinations-clusters-point":Object.assign({},xe,{id:"rentals-destinations-clusters-point",source:"rentals-destinations-clusters",layout:Object.assign({},xe.layout,{"icon-image":["concat",["get","system_id"],"-r:",["get","distance_bin"]]})}),"rentals-destinations-heatmap":ke},Ne={vehicles:{type:"geojson"},"vehicles-clusters":{type:"geojson",cluster:!0,clusterRadius:50},"vehicles-heatmap":{type:"geojson"},"rentals-origins":{type:"geojson"},"rentals-origins-clusters":{type:"geojson",cluster:!0,clusterRadius:50},"rentals-origins-heatmap":{type:"geojson"},"rentals-destinations":{type:"geojson"},"rentals-destinations-clusters":{type:"geojson",cluster:!0,clusterRadius:50},"rentals-destinations-heatmap":{type:"geojson"},"zones-geodata":{type:"geojson"}};function Se(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(Q.a)($.a.mark((function e(t){var n,a,r,i,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0,r=["#1FA024","#48E248","#FFD837","#FD3E48"];case 3:if(!(a<r.length)){e.next=12;break}return i=r[a],e.next=7,Ce(t,i);case 7:c=e.sent,n.push(c);case 9:a++,e.next=3;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(Q.a)($.a.mark((function e(t){var n,a,r,i,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=0,r=["#48E248","#44BD48","#3B7747","#343E47"];case 3:if(!(a<r.length)){e.next=12;break}return i=r[a],e.next=7,Ce(t,i);case 7:c=e.sent,n.push(c);case 9:a++,e.next=3;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return Re.apply(this,arguments)}function Re(){return(Re=Object(Q.a)($.a.mark((function e(t,n){var a,r,i,c,s,o,l,d,u,b,m,p,f,j,h;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://www.w3.org/2000/svg",a=document.createElementNS("http://www.w3.org/2000/svg","svg"),(r=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","12"),r.setAttribute("cy","12"),r.setAttribute("r","12"),r.setAttribute("fill","12"),r.setAttribute("opacity","0.304"),r.setAttribute("fill",n),a.appendChild(r),(i=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform","translate(2 2)"),i.setAttribute("fill",n),i.setAttribute("stroke","#fff"),i.setAttribute("stroke-width","1"),(c=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","10"),c.setAttribute("cy","10"),c.setAttribute("r","10"),c.setAttribute("stroke","none"),(s=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","10"),s.setAttribute("cy","10"),s.setAttribute("r","9.5"),s.setAttribute("fill","none"),i.appendChild(c),i.appendChild(s),a.appendChild(i),(o=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","4.5"),o.setAttribute("cy","4.5"),o.setAttribute("r","4.5"),o.setAttribute("transform","translate(14 1)"),o.setAttribute("fill",t),a.appendChild(o),l={},d={},a.setAttribute("viewBox","0 0 24 24"),l.value=50,d.value=50,u=document.createElement("canvas"),a.setAttribute("width",l.value),a.setAttribute("height",d.value),u.width=l.value,u.height=d.value,b=(new XMLSerializer).serializeToString(a),m=window.URL||window.webkitURL||window,p=new Image,f=new Blob([b],{type:"image/svg+xml"}),j=m.createObjectURL(f),p.src=j,e.next=53,p.decode();case 53:return(h=u.getContext("2d")).drawImage(p,0,0),m.revokeObjectURL(j),e.abrupt("return",new Uint8Array(h.getImageData(0,0,p.width,p.height).data.buffer));case 57:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",REACT_APP_FUSIONAUTH_SERVER:"https://auth.deelfietsdashboard.nl/api",REACT_APP_FUSIONAUTH_APPLICATION_ID:"bf901170-a2db-4f91-8ca7-24921e961193"}).DEBUG&&console.log("Map component");var t=Object(m.d)((function(e){return e.authentication&&e.authentication.user_data?e.authentication.user_data.token:null})),n=Object(m.d)((function(e){return e.filter?e.filter.gebied:null})),r=Object(m.c)(),i=Object(m.d)((function(e){return e.vehicles||null})),c=Object(m.d)((function(e){return e.filter||null})),s=Object(m.d)((function(e){return e.rentals||null})),o=Object(m.d)((function(e){return e.layers||null})),l=Object(m.d)((function(e){return!!e.authentication.user_data})),d=Object(m.d)((function(e){return e.metadata&&e.metadata.aanbieders?e.metadata.aanbieders:[]})),u=Object(m.d)((function(e){return e.layers?e.layers.extent:null})),b=Object(m.d)((function(e){return e&&e.zones_geodata?e.zones_geodata:null})),p=e.mapContainer,f=Object(a.useState)(!1),h=Object(B.a)(f,2),O=h[0],g=h[1],v=Object(a.useState)(o.mapextent&&o.mapextent[0]?(o.mapextent[0]+o.mapextent[2])/2:4.4671854),y=Object(B.a)(v,1)[0],x=Object(a.useState)(o.mapextent&&o.mapextent[1]?(o.mapextent[1]+o.mapextent[3])/2:51.9250836),_=Object(B.a)(x,1)[0],E=Object(a.useState)(o.zoom||15),k=Object(B.a)(E,1)[0],w=Object(a.useState)(!1),N=Object(B.a)(w,2),S=N[0],T=N[1],D=Object(a.useRef)(null),A=Object(a.useCallback)((function(e){var t=e.getBounds(),n=[t._sw.lng,t._sw.lat,t._ne.lng,t._ne.lat];r({type:"LAYER_SET_MAP_EXTENT",payload:n}),r({type:"LAYER_SET_MAP_ZOOM",payload:e.getZoom()})}),[]);return Object(a.useEffect)((function(){!function(){var e;D.current||(D.current=new te.a.Map({container:p.current,style:"mapbox://styles/nine3030/ckv9ni7rj0xwq15qsekqwnlz5",accessToken:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",center:[y,_],zoom:k,maxZoom:19,attributionControl:!1}),(e=D.current).addControl(new te.a.NavigationControl({showCompass:!1}),"bottom-right"),e.addControl(new te.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"bottom-right"),e.dragRotate.disable(),e.touchZoomRotate.disableRotation(),function(e){if(e&&(!window.CROW_DD||!window.CROW_DD.theDraw)){var t=ue.a.modes;t.static=me.a;var n=new ue.a({displayControlsDefault:!1,modes:t});e.addControl(n,"top-left"),window.CROW_DD?window.CROW_DD.theDraw=n:window.CROW_DD={theDraw:n},ve(e)}}(D.current),re.a.init(D.current),D.current.on("error",(function(e){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",REACT_APP_FUSIONAUTH_SERVER:"https://auth.deelfietsdashboard.nl/api",REACT_APP_FUSIONAUTH_APPLICATION_ID:"bf901170-a2db-4f91-8ca7-24921e961193"}).DEBUG&&console.log("An error event occurred.",e),r({type:"SHOW_LOADING",payload:!1})})),D.current.on("idle",(function(e){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",REACT_APP_FUSIONAUTH_SERVER:"https://auth.deelfietsdashboard.nl/api",REACT_APP_FUSIONAUTH_APPLICATION_ID:"bf901170-a2db-4f91-8ca7-24921e961193"}).DEBUG&&console.log("An idle event occurred.",e),r({type:"SHOW_LOADING",payload:!1})})),D.current.on("moveend",(function(){A(D.current)})),D.current.on("zoomend",(function(){A(D.current)})),D.current.on("load",(function(){window.ddMap=D.current,g(!0),Object.keys(Ne).forEach((function(e,t){D.current.U.addGeoJSON(e,null,Ne[e])})),Object.keys(we).forEach((function(e,t){D.current.U.addLayer(we[e])})),T(!0)})),D.current.dragRotate.disable(),D.current.touchZoomRotate.disableRotation())}()}),[y,_,k,p,A]),Object(a.useEffect)((function(e){O&&(o&&"displaymode-zones"===o.displaymode?Object(Q.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge(t,{municipality:n});case 2:case"end":return e.stop()}}),e)})))():window.CROW_DD&&window.CROW_DD.theDraw&&window.CROW_DD.theDraw.deleteAll())}),[O,o.displaymode]),Object(a.useEffect)((function(t){if(S){e.activeSources.forEach((function(e){D.current.U.showSource(e)})),Object.keys(Ne).forEach((function(t,n){e.activeSources.indexOf(t)<=-1&&D.current.U.hideSource(t)}))}}),[S,e.activeSources]),Object(a.useEffect)((function(t){if(S){e.layers.forEach((function(e){D.current.U.show(e)})),Object.keys(we).forEach((function(t,n){e.layers.indexOf(t)<=-1&&D.current.U.hide(t)}))}}),[S,e.layers]),Object(a.useEffect)((function(e){S&&(!i.data||i.data.length<=0||(D.current.U.setData("vehicles",i.data),D.current.U.setData("vehicles-clusters",i.data)))}),[S,i.data]),Object(a.useEffect)((function(e){S&&(!b||b.data.length<=0||D.current.U.setData("zones-geodata",b.data))}),[S,b,b.data]),Object(a.useEffect)((function(e){S&&(!s||!s.origins||Object.keys(s.origins).length<=0||(D.current.U.setData("rentals-origins",s.origins),D.current.U.setData("rentals-origins-clusters",s.origins)))}),[S,s,s.origins]),Object(a.useEffect)((function(e){S&&(!s||!s.destinations||Object.keys(s.destinations).length<=0||(D.current.U.setData("rentals-destinations",s.destinations),D.current.U.setData("rentals-destinations-clusters",s.destinations)))}),[S,s,s.destinations]),Object(a.useEffect)((function(){D.current&&u&&0!==u.length&&(D.current.fitBounds(u),r({type:"LAYER_SET_ZONES_EXTENT",payload:[]}))}),[u]),Object(a.useEffect)((function(){S&&d&&function(e,t,n,a){["vehicles-point","vehicles-clusters-point","rentals-origins-point","rentals-origins-clusters-point","rentals-destinations-point","rentals-destinations-clusters-point"].forEach((function(n){function r(n){for(var r=n.features[0].properties,i=ce(t,r.system_id),c=n.features[0].geometry.coordinates.slice();Math.abs(n.lngLat.lng-c[0])>180;)c[0]+=n.lngLat.lng>c[0]?360:-360;console.log(a),(new te.a.Popup).setLngLat(c).setHTML('\n          <h1 class="mb-2">\n            <span\n              class="rounded-full inline-block w-4 h-4"\n              style="background-color: '.concat(i,';position: relative;top: 2px"\n              onClick="window.showConfetti()"\n              >\n            </span>\n            <span class="Map-popup-title ml-1" style="color: ').concat(i,';">\n              ').concat(r.system_id,'\n            </span>\n          </h1>\n          <div class="Map-popup-body">\n            ').concat(r.in_public_space_since?"<div>\n              Staat hier sinds ".concat(j()(r.in_public_space_since).locale("nl").from(a),"<br />\n              Geparkeerd sinds: ").concat(j()(r.in_public_space_since).format("DD-MM-YYYY HH:mm"),"\n            </div>"):"","\n\n            ").concat(r.distance_in_meters?"<div>\n              Dit voertuig is ".concat(r.distance_in_meters," meter verplaatst<br />\n            </div>"):"","\n\n            ").concat(oe&&oe[r.system_id]?'<div class="mt-2">\n              <a href="'.concat(oe[r.system_id],'" rel="external" target="_blank" class="inline-block py-1 px-2 text-white rounded-md hover:opacity-80" style="background-color: ').concat(i,';">\n                website\n              </a>\n            </div>'):"","\n          </div>\n        ")).addTo(e)}e.off("click",n,r),e.on("click",n,r),e.on("mouseenter",n,(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",n,(function(){e.getCanvas().style.cursor=""}))}))}(D.current,d,0,c.datum)}),[S,d,l,c.datum]),Object(a.useEffect)((function(){var e;S&&(e=D.current,["vehicles-clusters","rentals-origins-clusters","rentals-destinations-clusters"].forEach((function(t){e.on("click",t,(function(n){var a=e.queryRenderedFeatures(n.point,{layers:[t]}),r=a[0].properties.cluster_id;e.getSource(t).getClusterExpansionZoom(r,(function(t,n){t||e.easeTo({center:a[0].geometry.coordinates,zoom:n})}))})),e.on("mouseenter",t,(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",t,(function(){e.getCanvas().style.cursor=""}))})))}),[S]),Object(a.useEffect)((function(){var e=function(){var e=Object(Q.a)($.a.mark((function e(t){var n,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.system_id+("displaymode-rentals"===o.displaymode?"-r":"-p"),!D.current.hasImage(n+":0")){e.next=3;break}return e.abrupt("return");case 3:if("displaymode-rentals"!==o.displaymode){e.next=9;break}return e.next=6,De(t.color);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,Se(t.color);case 11:a=e.sent;case 12:a.forEach((function(e,t){D.current.addImage(n+":"+t,{width:50,height:50,data:e})}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();d.forEach((function(t){e(t)}))}),[d,o.displaymode]),null}j.a.updateLocale("nl",ae.a);n(277);var Le=function(e){var t=Object(m.c)(),n=Object(a.useRef)(null),r=e.name.toUpperCase(),i=Object(m.d)((function(e){return!!e.ui&&e.ui[r]})),c=function(e,n){t({type:"SET_VISIBILITY",payload:{name:e,visibility:n}})},s=(e.options||{}).backgroundColor;return Object(V.jsxs)("div",{className:"\n      SlideBox\n      direction-".concat(e.direction,"\n      relative\n      ").concat(i?"":"is-hidden","\n      z-10\n    "),ref:n,style:e.style||{},children:[Object(V.jsx)("div",{className:" SlideBox-inner h-full ",style:{backgroundColor:s},children:e.children}),Object(V.jsx)("div",{className:"SlideBox-toggle-wrapper z-10 overflow-hidden",children:Object(V.jsx)("div",{className:"SlideBox-toggle",onClick:function(){return i&&c("FILTERBAR_EXTENDED",!1),void c(r,!i)},style:{backgroundColor:s},children:Object(V.jsx)("span",{children:e.options.title||"Lagen"})})})]})};n(278);function ze(e){var t=Object(m.c)(),n=Object(m.d)((function(e){return!!e.filter&&""!==e.filter.gebied})),a=Object(m.d)((function(e){return!!e.layers&&e.layers.zones_visible})),r=Object(m.d)((function(e){return e.layers?e.layers.displaymode:N})),i=Object(m.d)((function(e){return e.layers?e.layers.view_park:R})),c=Object(m.d)((function(e){return e.layers?e.layers.view_rentals:z})),s=Object(m.d)((function(e){return!!e.authentication.user_data}));return r===D?null:Object(V.jsx)(Le,{name:"SelectLayer",direction:"right",options:{title:"Lagen",backgroundColor:"#fff"},style:{position:"absolute",top:"8px",right:0},children:Object(V.jsxs)("div",{className:"SelectLayer pr-1",children:[r===N?Object(V.jsx)("div",{"data-type":"heat-map",className:"layer".concat(i!==A?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:A})},children:Object(V.jsx)("span",{className:"layer-title",children:"Heat map"})}):null,r===N?Object(V.jsx)("div",{"data-type":"pointers",className:"layer".concat(i!==C?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:C})},children:Object(V.jsx)("span",{className:"layer-title",children:"Clusters"})}):null,r===N?Object(V.jsx)("div",{"data-type":"vehicles",className:"layer".concat(i!==R?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:R})},children:Object(V.jsx)("span",{className:"layer-title",children:"Voertuigen"})}):null,r===S?Object(V.jsx)("div",{"data-type":"heat-map",className:"layer".concat(c!==I?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_RENTALS",payload:I})},children:Object(V.jsx)("span",{className:"layer-title",children:"Heat map"})}):null,r===S?Object(V.jsx)("div",{"data-type":"pointers",className:"layer".concat(c!==L?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_RENTALS",payload:L})},children:Object(V.jsx)("span",{className:"layer-title",children:"Clusters"})}):null,r===S?Object(V.jsx)("div",{"data-type":"vehicles",className:"layer".concat(c!==z?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_RENTALS",payload:z})},children:Object(V.jsx)("span",{className:"layer-title",children:"Voertuigen"})}):null,s&&n?Object(V.jsx)("div",{"data-type":"zones",className:"layer".concat(a?"":" layer-inactive"),onClick:function(){t({type:"LAYER_TOGGLE_ZONES_VISIBLE",payload:null})},children:Object(V.jsx)("span",{className:"layer-title",children:"Zones"})}):null]})})}new AbortController;var Me=function(e,t,n,a){var r=e===N,i=e===S,c=e===D;a=a||{includeOperators:!1};var s=[];if(""!==t.zones)s.push("zone_ids="+t.zones);else if(""!==t.gebied){var o=[],l=n.gebieden.find((function(e){return e.gm_code===t.gebied}));void 0!==l&&(o=n.zones.filter((function(e){return e.municipality===l.gm_code&&e.name===l.name}))),1===o.length?s.push("zone_ids="+o[0].zone_id):console.error("zero or multiple multiple zones found for a single municipality (%s)",t.gebied,o)}if(!0===a.includeOperators)if(""!==t.aanbiedersexclude&&void 0!==t.aanbiedersexclude){var d=t.aanbiedersexclude.split(","),u=n.aanbieders.filter((function(e){return!1===d.includes(e.system_id)})).map((function(e){return e.system_id})).join(",");s.push("operators="+u)}else 1===n.aanbieders.length&&s.push("operators="+n.aanbieders[0].system_id);if(1===n.aanbieders.length&&s.push("operators="+n.aanbieders[0].system_id),""!==t.voertuigtypesexclude&&void 0!==t.voertuigtypesexclude){var b=t.voertuigtypesexclude.split(","),m=n.vehicle_types.filter((function(e){return!1===b.includes(e.id)})).map((function(e){return e.id})).join(",");s.push("form_factors="+m)}if(r){var p=(new Date).toISOString().replace(/.\d+Z$/g,"Z");""!==t.datum&&(p=new Date(t.datum).toISOString().replace(/.\d+Z$/g,"Z")),s.push("timestamp="+p)}if(i){var f=(new Date).toISOString().replace(/.\d+Z$/g,"Z"),h=f;t&&""!==t.intervalend&&void 0!==t.intervalend&&(f=j()(t.intervalend).subtract(t.intervalduur/1e3,"seconds").toISOString().replace(/.\d+Z$/g,"Z"),h=j()(t.intervalend).toISOString().replace(/.\d+Z$/g,"Z")),s.push("start_time="+f+"&end_time="+h)}if(c){var O=void 0,g=void 0;t.ontwikkelingvan&&t.ontwikkelingtot&&(O=new Date(t.ontwikkelingvan),g=new Date(j()(t.ontwikkelingtot).add(1,"day"))),O&&g||(O=new Date,g=new Date((new Date).toDateString()),O.setDate(g.getDate()-7));var v=j()(O).format("YYYY-MM-DDTHH:mm:ss")+"Z",y=j()(g).format("YYYY-MM-DDTHH:mm:ss")+"Z";s.push("start_time="+v+"&end_time="+y)}return s};function Fe(e,t){var n=new AbortController,a=n.signal;return{abort:function(){return n.abort()},ready:fetch(e,Object(s.a)(Object(s.a)({},t),{},{signal:a}))}}var Ge=function(){var e=Object(Q.a)($.a.mark((function e(t,n){var a,r,i,c,s;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.deelfietsdashboard.nl/dashboard-api/v2/park_events/stats?x=1",(r=Me(N,n.filter,n.metadata)).length>0&&(a+="&"+r.join("&")),i={headers:{authorization:"Bearer ".concat(t)}},e.next=6,fetch(a,i);case 6:return c=e.sent,e.next=9,c.json();case 9:return s=e.sent,e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Pe(e){var t=e.data;if(!t.stats)return Object(V.jsx)(V.Fragment,{});var n=0;return t.stats.forEach((function(e){n+=e})),Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{className:"py-1 px-2",children:t.name},t.zone_id+"name"),Object(V.jsx)("td",{className:"py-1 px-2",children:n},t.zone_id+"total"),t.stats.map((function(e,t){return Object(V.jsx)("td",{className:"py-1 px-2 text-center",children:e},"p"+t)}))]},t.zone_id)}function Ue(e){var t=Object(m.d)((function(e){return e.layers?e.layers.displaymode:N})),n=Object(m.d)((function(e){return e.authentication&&e.authentication.user_data?e.authentication.user_data.token:null})),r=Object(m.d)((function(e){return e.filter})),i=Object(m.d)((function(e){return e.metadata})),c=Object(a.useState)([]),s=Object(B.a)(c,2),o=s[0],l=s[1];Object(a.useEffect)((function(){function e(){return(e=Object(Q.a)($.a.mark((function e(){var t;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(n,{filter:r,metadata:i});case 2:t=e.sent,l(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!i||!i.zones||i.zones.length<=0||function(){e.apply(this,arguments)}()}),[n,i,i.zones,r,r.zones]);return t===D||t===S?null:!o||!o.park_event_stats||o.park_event_stats.length<=0?Object(V.jsx)(V.Fragment,{}):Object(V.jsx)(Le,{name:"MetaStats",direction:"right",options:{title:"Info",backgroundColor:"#fff"},style:{position:"absolute",top:"125px",right:0},children:Object(V.jsx)("div",{className:"MetaStats px-2 py-2",style:{minWidth:"356px",minHeight:"105px"},children:Object(V.jsxs)("table",{className:"text-sm text-left w-full",children:[Object(V.jsx)("thead",{className:"border-b-2 border-gray-200",children:Object(V.jsxs)("tr",{children:[Object(V.jsx)("th",{className:"py-1 px-2 text-left font-normal",children:"Zone"}),Object(V.jsx)("th",{className:"py-1 px-2 pr-4 text-left font-normal",children:"Totaal"}),[{id:0,color:"#1FA024",fillcolor:"#1FA024",name:"< 1 uur"},{id:1,color:"#48E248",fillcolor:"#48E248",name:"< 24 uur"},{id:2,color:"#FFD837",fillcolor:"#FFD837",name:"< 4 d"},{id:3,color:"#FD3E48",fillcolor:"#FD3E48",name:"> 4 d"}].map((function(e,t){return Object(V.jsx)("th",{className:"py-1 px-2 text-center",children:Object(V.jsx)("div",{className:"w-6 h-6 ",children:Object(V.jsxs)("svg",{viewBox:"0 0 30 30",children:[Object(V.jsx)("circle",{cx:"50%",cy:"50%",r:"40%",fill:e.color}),Object(V.jsx)("circle",{cx:"50%",cy:"50%",r:"34%",fill:e.fillcolor})]})})},"m"+t)}))]})}),Object(V.jsx)("tbody",{children:o.park_event_stats.map((function(e,t){return Object(V.jsx)(Pe,{data:e},"stat"+t)}))})]})})})}n(279);var He=function(e){e.mode;var t=e.mapContainer,n=Object(m.d)((function(e){return!!e.layers&&e.layers.zones_visible})),a=Object(m.d)((function(e){return e.filter})),r=Object(m.d)((function(e){return e.layers?e.layers.displaymode:N})),i=Object(m.d)((function(e){return e.layers?e.layers.view_park:R})),c=Object(m.d)((function(e){return e.layers?e.layers.view_rentals:z})),s=[],o=[];if(n&&s.push("zones-geodata","zones-geodata-border"),r===N&&i)switch(i){case A:s.push("vehicles-heatmap"),o.push("vehicles");break;case C:s.push("vehicles-clusters"),s.push("vehicles-clusters-count"),s.push("vehicles-clusters-point"),o.push("vehicles"),o.push("vehicles-clusters");break;case R:s.push("vehicles-point"),o.push("vehicles")}else if(r===S&&c){var l="bestemming"===a.herkomstbestemming?"destinations":"origins";switch(c){case I:s.push("rentals-".concat(l,"-heatmap")),o.push("rentals-".concat(l));break;case L:s.push("rentals-".concat(l,"-clusters")),s.push("rentals-".concat(l,"-clusters-count")),s.push("rentals-".concat(l,"-clusters-point")),o.push("rentals-".concat(l,"-clusters"));break;case z:s.push("rentals-".concat(l,"-point")),o.push("rentals-".concat(l))}}return Object(V.jsxs)("div",{className:"flex flex-col",children:[Object(V.jsxs)("div",{className:"hidden sm:block",children:[Object(V.jsx)(ze,{}),(r===N||r===S)&&Object(V.jsx)(Ue,{})]}),Object(V.jsx)("div",{className:"flex-1 bg-red-400",children:Object(V.jsx)(Ie,{mapContainer:t,layers:s,activeSources:o})})]})};n(280);function Be(e){var t=Object(m.d)((function(e){return!!e.ui&&e.ui.FILTERBAR}));return Object(V.jsx)("div",{className:"ContentPage relative bg-white h-full pb-20 ".concat(t&&!e.forceFullWidth?"":"full-page"),style:{overflowY:"auto",zIndex:1},children:Object(V.jsx)("div",{className:"ContentPage-inner py-3 sm:py-8 pl-3 pr-3 sm:pl-12 sm:pr-12 pb-20",children:e.children})})}n(281);var We=function(e,t){var n={};return t.forEach((function(e){n[e.system_id]=0})),e.forEach((function(e){Object.keys(e).forEach((function(e){"start_interval"!==e&&(e in n===!1&&(n[e]=0),n[e]++)}))})),n},Ve=n(509),Ye=n(513),Je=n(126),Ze=n(127),Ke=n(109),Xe=n(106),qe=n(236),$e=n(514),Qe=n(245),et=n(515),tt=n(170),nt=n.n(tt),at=function(){var e=Object(Q.a)($.a.mark((function e(t,n,a){var r,i,c,s,o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/".concat(n,"?aggregation_level=").concat(a.aggregationLevel),(i=Me(D,a.filter,a.metadata)).length>0&&(r+="&"+i.join("&")),c={headers:{authorization:"Bearer ".concat(t)}},e.next=6,fetch(r,c);case 6:return s=e.sent,e.next=9,s.json();case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),rt=function(){var e=Object(Q.a)($.a.mark((function e(t,n){var a,r,i,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.deelfietsdashboard.nl/dashboard-api/stats/generate_report?start_time=".concat(n.startDate,"&end_time=").concat(n.endDate,"&gm_code=").concat(n.gm_code),r={headers:{authorization:"Bearer ".concat(t)}},e.next=4,fetch(a,r);case 4:return i=e.sent,e.next=7,i.blob();case 7:c=e.sent,nt()(c,"rapportage_".concat(n.startDate,"-").concat(n.endDate,"_").concat(n.gm_code,".xlsx"));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),it=function(){var e=Object(Q.a)($.a.mark((function e(t,n){var a,r,i,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.deelfietsdashboard.nl/dashboard-api/raw_data?start_time=".concat(n.startDate,"&end_time=").concat(n.endDate),r={headers:{authorization:"Bearer ".concat(t)}},e.next=4,fetch(a,r);case 4:return i=e.sent,e.next=7,i.blob();case 7:c=e.sent,nt()(c,"export_dashboarddeelmobiliteit_".concat(n.startDate,"-").concat(n.endDate,"_").concat(n.gm_code,".zip"));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ct=n(246),st=["start_interval"],ot=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(!t||!t["".concat(e,"_aggregated_stats")]||!t["".concat(e,"_aggregated_stats")].values)return[];var r=function(e){return"day"===e?"DD MMM YYYY":"week"===e?"[w]W, YYYY":"month"===e?"MMM YYYY":void 0};return t["".concat(e,"_aggregated_stats")].values.map((function(e){var t=e.start_interval,i=Object(ct.a)(e,st),c=Object(s.a)(Object(s.a)({},i),{name:j()(t).format(r(n))});if(""!==a){var o=a.split(",");Object.keys(c).forEach((function(e){o.includes(e)&&delete c[e]}))}return c}))},lt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,a=e.payload;return Object(V.jsx)("g",{transform:"translate(".concat(t,",").concat(n,")"),children:Object(V.jsx)("text",{x:0,y:0,dy:16,textAnchor:"middle",fill:"#666",transform:"rotate(0)",fontSize:"0.8em",children:a.value})})}}]),n}(a.PureComponent),dt=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,a=e.payload;return Object(V.jsx)("g",{transform:"translate(".concat(t,",").concat(n,")"),children:Object(V.jsx)("text",{x:-4,y:0,dy:3,textAnchor:"end",fill:"#666",transform:"rotate(0)",fontSize:"0.8em",children:a.value})})}}]),n}(a.PureComponent),ut=(n(282),function(e){var t,n=e.active,a=e.payload,r=e.label;if(n&&a&&a.length){return Object(V.jsxs)("div",{className:"CustomizedTooltip",children:[Object(V.jsx)("div",{className:"my-0",children:Object(V.jsx)("b",{children:"".concat(r)})}),Object(V.jsx)("ul",{className:"my-0 py-0",children:(t=a,Object.keys(t).sort().reverse().map((function(e){return Object(s.a)(Object(s.a)({},t[e]),{},{key:e})}))).map((function(e,t){return Object(V.jsxs)("li",{style:{color:e.fill},children:[e.name,": ",e.value]},"c-"+t)}))}),Object(V.jsxs)("div",{className:"my-0",children:["Totaal: ",function(){var e=0;return a.forEach((function(t){e+=t.value})),e}(),Object(V.jsx)("br",{})]})]})}return null});var bt=function(e){var t=Object(m.c)(),n=Object(m.d)((function(e){return e.authentication.user_data&&e.authentication.user_data.token||null})),r=Object(m.d)((function(e){return e.filter})),i=Object(m.d)((function(e){return e.metadata})),c=Object(a.useState)([]),s=Object(B.a)(c,2),o=s[0],l=s[1];Object(a.useEffect)((function(){function e(){return(e=Object(Q.a)($.a.mark((function e(){var a,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(n,"rentals",{filter:r,metadata:i,aggregationLevel:r.ontwikkelingaggregatie});case 2:a=e.sent,c=We(a.rentals_aggregated_stats.values,i.aanbieders),t({type:"SET_OPERATORSTATS_VERHURINGENCHART",payload:c}),l(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!i||!i.zones||i.zones.length<=0||function(){e.apply(this,arguments)}()}),[r,r.ontwikkelingaggregatie,i,n,t]);var d=ot("rentals",o,r.ontwikkelingaggregatie,r.aanbiedersexclude),u=o?Object.keys(o).length:0;return Object(V.jsx)("div",{style:{width:"100%",height:"400px",overflowX:"hidden",overflowY:"hidden"},children:Object(V.jsx)(et.a,{children:u>12?Object(V.jsxs)(Ve.a,{data:d,margin:{top:10,right:30,left:0,bottom:0},children:[Object(V.jsx)(Ye.a,{strokeDasharray:"3 0",vertical:!1}),Object(V.jsx)(Je.a,{dataKey:"name",tick:Object(V.jsx)(lt,{})}),Object(V.jsx)(Ze.a,{tick:Object(V.jsx)(dt,{})}),Object(V.jsx)(Ke.a,{content:Object(V.jsx)(ut,{})}),Object(V.jsx)(Xe.a,{}),"} />",se(d[0]).map((function(e){var t=ce(i.aanbieders,e);return Object(V.jsx)(qe.a,{stackId:"1",type:"monotone",dataKey:e,stroke:t,fill:t,isAnimationActive:!1},e)}))]}):Object(V.jsxs)($e.a,{data:d,margin:{top:10,right:30,left:0,bottom:0},children:[Object(V.jsx)(Ye.a,{strokeDasharray:"3 0",vertical:!1}),Object(V.jsx)(Je.a,{dataKey:"name",tick:Object(V.jsx)(lt,{})}),Object(V.jsx)(Ze.a,{tick:Object(V.jsx)(dt,{})}),Object(V.jsx)(Ke.a,{content:Object(V.jsx)(ut,{})}),Object(V.jsx)(Xe.a,{}),"} />",se(d[0]).map((function(e){var t=ce(i.aanbieders,e);return Object(V.jsx)(Qe.a,{stackId:"1",type:"monotone",dataKey:e,stroke:t,fill:t,isAnimationActive:!1},e)}))]})})})};var mt=function(e){var t=Object(m.c)(),n=Object(m.d)((function(e){return e.authentication.user_data&&e.authentication.user_data.token||null})),r=Object(m.d)((function(e){return e.filter})),i=Object(m.d)((function(e){return e.metadata})),c=Object(a.useState)([]),s=Object(B.a)(c,2),o=s[0],l=s[1];Object(a.useEffect)((function(){function e(){return(e=Object(Q.a)($.a.mark((function e(){var a,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(n,"available_vehicles",{filter:r,metadata:i,aggregationLevel:r.ontwikkelingaggregatie});case 2:a=e.sent,c=We(a.available_vehicles_aggregated_stats.values,i.aanbieders),t({type:"SET_OPERATORSTATS_BESCHIKBAREVOERTUIGENCHART",payload:c}),l(a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!i||!i.zones||i.zones.length<=0||function(){e.apply(this,arguments)}()}),[r,r.ontwikkelingaggregatie,i,n,t]);var d=ot("available_vehicles",o,r.ontwikkelingaggregatie,r.aanbiedersexclude),u=d?Object.keys(d).length:0;return Object(V.jsx)("div",{style:{width:"100%",height:"400px",overflowX:"hidden",overflowY:"hidden"},children:Object(V.jsx)(et.a,{children:u>12?Object(V.jsxs)(Ve.a,{data:d,margin:{top:10,right:30,left:0,bottom:0},children:[Object(V.jsx)(Ye.a,{strokeDasharray:"3 0",vertical:!1}),Object(V.jsx)(Je.a,{dataKey:"name",tick:Object(V.jsx)(lt,{})}),Object(V.jsx)(Ze.a,{tick:Object(V.jsx)(dt,{})}),Object(V.jsx)(Ke.a,{content:Object(V.jsx)(ut,{})}),Object(V.jsx)(Xe.a,{}),se(d[0]).map((function(e){var t=ce(i.aanbieders,e);return Object(V.jsx)(qe.a,{stackId:"1",type:"monotone",dataKey:e,stroke:t,fill:t,isAnimationActive:!1},e)}))]}):Object(V.jsxs)($e.a,{data:d,margin:{top:10,right:30,left:0,bottom:0},children:[Object(V.jsx)(Ye.a,{strokeDasharray:"3 0",vertical:!1}),Object(V.jsx)(Je.a,{dataKey:"name",tick:Object(V.jsx)(lt,{})}),Object(V.jsx)(Ze.a,{tick:Object(V.jsx)(dt,{})}),Object(V.jsx)(Ke.a,{content:Object(V.jsx)(ut,{})}),Object(V.jsx)(Xe.a,{}),se(d[0]).map((function(e){var t=ce(i.aanbieders,e);return Object(V.jsx)(Qe.a,{stackId:"1",type:"monotone",dataKey:e,stroke:t,fill:t,isAnimationActive:!1},e)}))]})})})};var pt=function(e){var t=Object(m.c)(),n=Object(m.d)((function(e){return e.filter})),a=function(e){t({type:"SET_FILTER_ONTWIKKELING_AGGREGATIE",payload:e})};return Object(V.jsxs)("div",{className:"StatsPage",children:[Object(V.jsxs)("div",{className:"agg-button-container",children:[Object(V.jsx)("div",{className:"agg-button "+("day"===n.ontwikkelingaggregatie?" agg-button-active":""),onClick:function(){a("day")},children:"dag"}),Object(V.jsx)("div",{className:"agg-button "+("week"===n.ontwikkelingaggregatie?" agg-button-active":""),onClick:function(){a("week")},children:"week"}),Object(V.jsx)("div",{className:"agg-button "+("month"===n.ontwikkelingaggregatie?" agg-button-active":""),onClick:function(){a("month")},children:"maand"})]}),Object(V.jsxs)("div",{className:"xl:flex",children:[Object(V.jsxs)("div",{className:"xl:flex-1",children:[Object(V.jsx)("h2",{className:"text-4xl my-2",children:"Verhuringen"}),Object(V.jsx)(bt,{})]}),Object(V.jsxs)("div",{className:"xl:flex-1",children:[Object(V.jsx)("h2",{className:"text-4xl my-2",children:"Beschikbare voertuigen"}),Object(V.jsx)(mt,{})]})]})]})};var ft=function(){return Object(V.jsx)("img",{alt:"Logo CROW",src:"/images/logo-fietsberaad-crow.svg",width:"82"})};function jt(e){return Object(V.jsx)("div",{className:"text-2xl font-bold cursor-pointer",onClick:e.onClick,style:e.style,children:"\xd7"})}var ht=function(){var e=Object(a.useState)(""),t=Object(B.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(""),c=Object(B.a)(i,2),s=c[0],o=c[1],l=Object(a.useState)(!1),d=Object(B.a)(l,2),u=d[0],p=d[1],f=Object(a.useState)(null),j=Object(B.a)(f,2),h=j[0],O=j[1],g=Object(a.useState)(null),v=Object(B.a)(g,2),y=v[0],x=v[1],_=Object(a.useState)(!1),E=Object(B.a)(_,2),k=E[0],w=E[1],N=Object(a.useState)(!1),S=Object(B.a)(N,2),T=S[0],D=S[1],A=Object(m.c)(),C=function(e){if(e.preventDefault(),O(null),n)if(s){var t={loginId:n,password:s,applicationId:"bf901170-a2db-4f91-8ca7-24921e961193"};fetch("https://auth.deelfietsdashboard.nl/api/login",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){A({type:"LOGIN",payload:null}),A({type:"RESET_FILTER",payload:null}),A({type:"SET_USER",payload:e}),w(!0),document.location="/map/park"})).catch((function(e){console.error("Login failed! (%s)",e.message),O("Login mislukt. Heb je het juiste e-mailadres en wachtwoord ingevuld?"),w(!1)}))}else O("Voer alsjeblieft een wachtwoord in");else O("Voer alsjeblieft een e-mailadres in")},R=function(e){e.preventDefault(),O(null);var t={loginId:n};return fetch("https://auth.deelfietsdashboard.nl/api/user/forgot-password",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),x("Als je e-mailadres bij ons bekend is, heb je nu e-mail ontvangen. Hiermee kun je je wachtwoord opnieuw instellen."),!0})).catch((function(e){return console.log(e),x("Als je e-mailadres bij ons bekend is, heb je nu e-mail ontvangen. Hiermee kun je je wachtwoord opnieuw instellen."),!1}))};return k||T?Object(V.jsx)(W.a,{to:"/"}):Object(V.jsx)("div",{className:" px-4 min-h-screen sm:flex sm:justify-center sm:px-0 ",children:Object(V.jsxs)("div",{className:"mx-auto py-8",style:{width:"100%",maxWidth:"416px"},children:[Object(V.jsx)(jt,{onClick:function(){return D(!0)},style:{position:"absolute",right:"30px",top:"18px"}}),Object(V.jsx)(ft,{}),Object(V.jsx)("h2",{className:"mt-4 mb-4 text-4xl font-bold",children:"Dashboard Deelmobiliteit"}),u?Object(V.jsxs)("div",{children:[Object(V.jsx)("p",{style:{maxWidth:"100%",width:"416px"},className:"mb-4",children:"Ben je je wachtwoord vergeten? Vul dan hieronder je mailadres in om een nieuw wachtwoord in te stellen."}),Object(V.jsxs)("p",{style:{maxWidth:"100%",width:"416px"},className:"mb-4",children:["Liever inloggen? Ga dan door naar het ",Object(V.jsx)(b.b,{to:"/login",children:"loginformulier"}),"."]}),Object(V.jsx)("br",{}),Object(V.jsxs)("form",{children:[Object(V.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"E-mailadres"}),Object(V.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"E-mailadres",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value.trim())}}),y&&Object(V.jsx)("div",{className:"mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",children:Object(V.jsx)("span",{className:"block sm:inline",children:y})}),h&&Object(V.jsx)("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:Object(V.jsx)("span",{className:"block sm:inline",children:h})}),Object(V.jsxs)("div",{children:[Object(V.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-theme-blue rounded-lg",onClick:R,children:"Herstel"}),Object(V.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-gray-300 rounded-lg hover:bg-gray-400",onClick:function(){O(null),p(!1)},children:"Annuleer"})]})]})]}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("p",{style:{maxWidth:"100%",width:"416px"},className:"mb-4",children:"Het Dashboard Deelmobiliteit is een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit op de voeten willen volgen."}),Object(V.jsx)("p",{style:{maxWidth:"100%",width:"416px"},className:"mb-4",children:"Hoe lang en waar staan deelvoertuigen ongebruikt in de openbare ruimte? Hoe vaak worden de deelvoertuigen verhuurd? In welke wijken en op welke tijdstippen zijn deelvoertuigen populair?"}),Object(V.jsx)("p",{style:{maxWidth:"100%",width:"416px"},className:"mb-4",children:"Met de informatie uit het Dashboard Deelmobiliteit kunnen overheden hun beleid ontwikkelen, evalueren en bijsturen."}),Object(V.jsxs)("form",{className:"mt-8 mb-4",children:[Object(V.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(V.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value.trim())}}),Object(V.jsx)("label",{className:"mt-4 block",htmlFor:"password",children:"Wachtwoord"}),Object(V.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",type:"password",placeholder:"Wachtwoord",name:"password",required:!0,onChange:function(e){return o(e.target.value)}}),h&&Object(V.jsx)("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:Object(V.jsx)("span",{className:"block sm:inline",children:h})}),Object(V.jsx)("p",{className:"my-4",children:Object(V.jsx)("a",{href:"#recover",onClick:function(){O(null),p(!0)},className:" text-gray-400 underline text-sm ",children:"Wachtwoord vergeten?"})}),Object(V.jsxs)("div",{className:"flex items-baseline mt-4",children:[Object(V.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-theme-blue rounded-lg",onClick:C,children:"Login"}),Object(V.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-gray-300 rounded-lg hover:bg-gray-400",onClick:function(){D(!0)},children:"Annuleer"})]})]})]})]})})},Ot=function(){var e=Object(W.h)().changePasswordCode,t=Object(a.useState)(""),n=Object(B.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(null),s=Object(B.a)(c,2),o=s[0],l=s[1],d=Object(a.useState)(!1),u=Object(B.a)(d,2),m=u[0],p=u[1];return m?Object(V.jsx)(W.a,{to:"/"}):Object(V.jsx)("div",{className:" px-4 min-h-screen sm:flex sm:justify-center sm:px-0 ",children:Object(V.jsxs)("div",{className:"mx-auto py-8",style:{width:"100%",maxWidth:"416px"},children:[Object(V.jsx)(jt,{onClick:function(){return p(!0)},style:{position:"absolute",right:"30px",top:"18px"}}),Object(V.jsx)(ft,{}),Object(V.jsx)("h2",{className:"mt-4 mb-4 text-4xl font-bold",children:"Dashboard Deelmobiliteit"}),Object(V.jsxs)("p",{className:"mb-4",children:["Op deze pagina kun je je wachtwoord wijzigen. Wil je je wachtwoord niet wijzigen, maar inloggen? Ga dan naar het ",Object(V.jsx)(b.b,{to:"/login",children:"inlogformulier"}),"."]}),Object(V.jsx)("p",{className:"mb-4",children:"Vul hieronder je nieuwe wachtwoord in:"}),Object(V.jsxs)("form",{className:"mt-8 mb-4",children:[Object(V.jsx)("label",{className:"mt-4 block",htmlFor:"password",children:"Wachtwoord"}),Object(V.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",type:"password",placeholder:"Wachtwoord",name:"password",required:!0,onChange:function(e){return i(e.target.value)}}),o&&Object(V.jsx)("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:Object(V.jsx)("span",{className:"block sm:inline",children:o})}),Object(V.jsxs)("div",{className:"flex items-baseline mt-4",children:[Object(V.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-theme-blue rounded-lg",onClick:function(t){t.preventDefault(),l(null);var n="https://auth.deelfietsdashboard.nl/api"+"/user/change-password/".concat(e),a={password:r};return fetch(n,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(e){return!0===e.ok?(window.notify("Je nieuwe wachtwoord is ingesteld. Log nu in met je nieuwe wachtwoord"),document.location="/login",!0):(l("Er ging iets fout bij het instellen van je nieuwe wachtwoord. Mogelijk was de link verlopen. In dat geval: klik hieronder op Annuleer en vraag een nieuwe wachtwoordlink aan."),!1)}))},children:"Wachtwoord opslaan"}),Object(V.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-gray-300 rounded-lg hover:bg-gray-400",onClick:function(){p(!0)},children:"Annuleer"})]})]})]})})},gt=function(){var e=Object(Q.a)($.a.mark((function e(t,n,a){var r,i,c,s,o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.user_data&&a){e.next=2;break}return e.abrupt("return");case 2:if(n){e.next=4;break}return e.abrupt("return");case 4:return r=j()(a).format("YYYY-MM-DDTHH:mm:ss[Z]"),i="https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp="+r+"&operators="+n,c={headers:{authorization:"Bearer "+t.user_data.token}},e.next=9,fetch(i,c);case 9:if((s=e.sent).ok){e.next=13;break}return console.error("unable to fetch: %o",s),e.abrupt("return",!1);case 13:return e.next=15,s.json();case 15:return o=e.sent,e.abrupt("return",o.park_events||!1);case 17:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),vt="tier",yt=[],xt=function(e){var t=[];return e.map((function(e){return t.indexOf(e.bike_id)<=-1&&t.push(e.bike_id),e})),t};var _t=function(e){var t=Object(a.useState)({}),n=Object(B.a)(t,2),r=n[0],i=n[1],c=Object(m.d)((function(e){return!!e.authentication&&e.authentication}));return Object(a.useEffect)((function(e){var t=function(){var e=Object(Q.a)($.a.mark((function e(){var t,n,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=j()().toISOString(),[],n=[],a=0;case 3:if(!(a<=40)){e.next=15;break}return t=j()(t).subtract(6,"hours").toISOString(),e.next=7,gt(c,vt,t);case 7:e.sent.map((function(e){return n.push(e),e})),yt[a]=xt(n),i(yt),console.table(yt[a].length,t);case 12:a++,e.next=3;break;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}),[c]),console.log(r),Object(V.jsxs)("div",{className:"mt-12",children:[Object(V.jsx)("h1",{className:"text-2xl my-2",children:"Monitoring"}),Object(V.jsxs)("p",{className:"py-2",children:["Voor ",vt," willen we controleren hoeveel unieke voertuig-IDs er zijn door te de tijd heen."]}),Object(V.jsx)("p",{className:"py-2",children:"Op deze manier kunnen we afleiden of er aan de standaard wordt voldaan. Er moeten statische voertuig-IDs zijn. Als dit niet het geval is, zul je zien dat er na verloop van tijd veel meer voertuig-IDs zijn geregistreerd dan het aantal voertuigen dat de aanbieder heeft. Op die manier weet je dat denog niet voldaan wordt aan de gevraagde datastandaard."}),Object(V.jsx)("p",{className:"py-2",children:"De snapshots zijn steeds gemaakt met 6 uur ertussen."}),Object(V.jsx)("pre",{children:yt?yt.map((function(e,t){return Object(V.jsxs)("div",{children:["Number of UUIDs after ",Object(V.jsxs)("b",{children:[t," snapshots"]}),": ",Object(V.jsx)("b",{children:e.length})]},t)})):""}),Object(V.jsxs)("table",{className:"table-auto bg-white hidden",children:[Object(V.jsx)("thead",{children:Object(V.jsxs)("tr",{children:[Object(V.jsx)("th",{children:"Datum/tijd"}),Object(V.jsx)("th",{children:"Cumulatief aantal voertuig-IDs"})]})}),Object(V.jsx)("tbody",{children:Object(V.jsxs)("tr",{children:[Object(V.jsx)("td",{children:"datumtijd"}),Object(V.jsx)("td",{children:"aantal"})]})})]})]})};n(211),n(417);var Et=function(e){var t=e.closeFunction,n=e.title,a=e.children;return Object(V.jsx)("div",{className:"FilterbarExtended",onClick:function(){return t(!1)},children:Object(V.jsxs)("div",{className:"",onClick:function(e){return e.stopPropagation()},children:[Object(V.jsxs)("div",{className:"flex justify-between",children:[Object(V.jsx)("h1",{className:"title flex flex-col justify-center",children:n||""}),Object(V.jsx)("div",{className:"FilterbarExtended-close-button-wrapper",children:Object(V.jsx)(jt,{onClick:function(){return t(!1)}})})]}),Object(V.jsx)("div",{className:"grid-cols-4",children:a})]})})};n(418);var kt=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.gebieden?e.metadata.gebieden:[]})),n=Object(m.d)((function(e){return e.filter?e.filter.gebied:""})),r=Object(m.d)((function(e){return!!e.ui&&e.ui.FILTERBAR_EXTENDED})),i=Object(a.useState)(""),c=Object(B.a)(i,2),s=c[0],o=c[1],l=function(t){e({type:"SET_FILTER_GEBIED",payload:t})},d=function(e){o(e.target.value)},u=function(e){o("")},b=function(t){e({type:"SET_VISIBILITY",payload:{name:"FILTERBAR_EXTENDED",visibility:t}})},p=t.find((function(e){return e.gm_code===n}))||"";return 1===t.length?Object(V.jsxs)("div",{className:"filter-plaats-container filter-plaats-not-active",children:[Object(V.jsx)("div",{className:"filter-plaats-title",onClick:function(e){b("places")},children:"Plaats"}),Object(V.jsx)("div",{className:"filter-plaats-box-row flex flex-col justify-center",children:Object(V.jsx)("div",{className:"filter-plaats-value ",children:""===p?"Alle plaatsen":p.name})})]}):Object(V.jsxs)("div",{className:"filter-plaats-container",children:[Object(V.jsx)("div",{className:"filter-plaats-title",onClick:function(e){b("places")},children:"Plaats"}),Object(V.jsxs)("div",{className:"filter-plaats-box-row flex flex-col justify-center",children:[Object(V.jsx)("div",{className:"filter-plaats-value ".concat(""===p?"text-black":""),onClick:function(e){b("places")},children:""===p?"Alle plaatsen":p.name}),"places"===r?function(e){var t=e.filter((function(e){return""===s||e.name.toLowerCase().includes(s.toLowerCase())}));return Object(V.jsx)(Et,{title:"Selecteer een plaats",closeFunction:function(){return b(!1)},children:Object(V.jsxs)("div",{className:"filter-form-selectie",children:[Object(V.jsxs)("div",{className:"filter-form-search-container mb-3",children:[Object(V.jsxs)("div",{className:"filter-form-search-container-2",children:[Object(V.jsx)("input",{type:"text",className:"filter-form-search",onChange:d,value:s,autoFocus:!0,placeholder:"zoek"}),Object(V.jsx)("div",{className:"ml-3 flex flex-col justify-center h-full",children:""!==s?Object(V.jsx)("div",{className:"filter-plaats-img-cancel",onClick:u}):Object(V.jsx)("div",{className:"filter-plaats-img-search"})})]}),Object(V.jsx)("div",{children:"\xa0"})]}),Object(V.jsxs)("div",{className:"filter-form-values",children:[""===n?Object(V.jsx)("div",{className:"form-item-selected form-item",onClick:function(e){b(!1)},children:"Alle plaatsen"},"item-alle"):Object(V.jsx)("div",{className:"form-item",onClick:function(e){b(!1),l("")},children:"Alle plaatsen"},"item-alle"),t.map((function(e){return n===e.gm_code?Object(V.jsx)("div",{className:"form-item-selected form-item",onClick:function(e){b(!1),l("")},children:e.name},"item-"+e.gm_code):Object(V.jsx)("div",{className:"form-item",onClick:function(t){b(!1),l(e.gm_code)},children:e.name},"item-"+e.gm_code)}))]})]})})}(t):null,""!==n?Object(V.jsx)("div",{className:"filter-plaats-img-cancel",onClick:function(t){t.preventDefault(),e({type:"SET_FILTER_GEBIED",payload:""})}}):null,Object(V.jsx)("div",{className:"flex flex-col justify-center h-full",children:Object(V.jsx)("div",{className:"filter-plaats-img-search",onClick:function(e){b("places")}})})]})]})},wt=(n(419),n(420),n(421),n(422),n(239)),Nt=n.n(wt),St=n.p+"static/media/calendar.0fe3dc2a.svg";var Tt=function(){var e=Object(m.c)(),t=Object(a.useRef)(null),n=Object(m.d)((function(e){return"displaymode-rentals"===e.layers.displaymode?e.filter&&e.filter.intervalend?e.filter.intervalend:(new Date).toISOString():e.filter&&e.filter.datum?e.filter.datum:(new Date).toISOString()})),r=Object(m.d)((function(e){return e.layers?e.layers.displaymode:null})),i=Object(a.useCallback)((function(n){t&&t.current&&clearTimeout(t.current),t.current=setTimeout((function(t){e("displaymode-rentals"!==r?{type:"SET_FILTER_DATUM",payload:n.toISOString()}:{type:"SET_FILTER_INTERVAL_END",payload:n.toISOString()})}),0)}),[0,r]);return Object(a.useEffect)((function(e){i(new Date(n))}),[n]),Object(V.jsxs)("div",{className:"filter-datum-container",children:[Object(V.jsx)("div",{className:"filter-datum-title",children:"displaymode-rentals"===r?"Eindtijd":"Datum"}),Object(V.jsxs)("div",{className:"filter-datum-box-row",children:[Object(V.jsxs)("div",{className:"filter-datum-box-1",children:[Object(V.jsx)("div",{className:"flex flex-col justify-center",children:Object(V.jsx)("div",{className:"filter-datum-caret",onClick:function(){i(j()(n).subtract(1,"hours"))},children:"\u2039"})}),Object(V.jsx)("div",{className:"filter-datum-dtpicker",children:Object(V.jsx)(Nt.a,{onChange:i,value:new Date(n),clearIcon:null,calendarIcon:Object(V.jsx)("img",{src:St,alt:"Logo"}),format:"y-MM-dd H:mm",disableClock:!0})}),Object(V.jsx)("div",{className:"flex flex-col justify-center",children:Object(V.jsx)("div",{className:"filter-datum-caret",onClick:function(){i(j()(n).add(1,"hours"))},children:"\u203a"})})]}),Object(V.jsx)("div",{className:"filter-datum-box-2",onClick:function(){i(new Date)},title:"Toon huidige datum en tijd",children:Object(V.jsx)("div",{className:"filter-datum-img-now"})})]})]})},Dt=(n(441),n(216),n(128)),At=n.n(Dt),Ct=n(98),Rt=n(99),It=n(502);var Lt=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.filter&&e.filter.ontwikkelingvan?new Date(e.filter.ontwikkelingvan):j()().subtract(30,"days").toDate()})),n=Object(m.d)((function(e){return e.filter&&e.filter.ontwikkelingtot?new Date(e.filter.ontwikkelingtot):new Date})),r=Object(m.d)((function(e){return e.filter&&e.filter.ontwikkelingaggregatie?e.filter.ontwikkelingaggregatie:"day"})),i=Object(a.useState)(t),c=Object(B.a)(i,2),s=c[0],o=c[1],l=Object(a.useState)(n),d=Object(B.a)(l,2),u=d[0],b=d[1],p=Object(a.useState)(!1),f=Object(B.a)(p,2),h=f[0],O=f[1],g=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Date(t.toDateString()),i=new Date(n.toDateString());e({type:"SET_FILTER_ONTWIKKELING_VANTOT",payload:{van:r.toISOString(),tot:i.toISOString()}}),!1!==a&&e({type:"SET_FILTER_ONTWIKKELING_AGGREGATIE",payload:a})},v=function(e){var t=Object(B.a)(e,2),n=t[0],a=t[1];o(n),b(a),null!==a&&(g(n,a),O(!h))},y=function(e){var t=s,n=u;if(e)switch(r){case"week":t=Object(Ct.default)(s,-7);break;case"month":t=Object(Rt.default)(s,-1);break;default:t=Object(Ct.default)(s,-1)}else switch(r){case"week":n=Object(Ct.default)(u,7);break;case"month":n=Object(Rt.default)(u,1);break;default:n=Object(Ct.default)(u,1)}o(t),b(n),g(t,n)},x=function(e){var t,n,a,r=new Date((new Date).toDateString());switch(e){case"laatste7dagen":t=Object(Ct.default)(r,-6),n=r,a="day";break;case"laatste30dagen":t=Object(Ct.default)(r,-30),n=r,a="day";break;case"laatste90dagen":t=Object(Ct.default)(r,-90),n=r,a="day";break;case"laatste12maanden":t=Object(Ct.default)(r,-365),n=r,a="week";break;case"ditjaar":var i=r.getFullYear();t=new Date(i.toString()+"/1/1"),n=r,a="month";break;case"vorigjaar":var c=r.getFullYear()-1;t=new Date(c.toString()+"/1/1"),n=new Date(c.toString()+"/12/31"),a="month";break;default:return}o(t),b(n),g(t,n,a)};return Object(V.jsxs)("div",{className:"filter-datum-van-tot-container",children:[Object(V.jsx)("div",{className:"filter-datum-van-tot-title",children:"Periode"}),Object(V.jsxs)("div",{className:"filter-datum-van-tot-box-row",children:[Object(V.jsx)("div",{className:"flex flex-col justify-center",children:Object(V.jsx)("div",{className:"filter-datum-caret",onClick:function(){y(!0)},children:"\u2039"})}),Object(V.jsxs)("div",{className:"filter-datum-van-tot-input",onClick:function(e){e.preventDefault(),h&&null===u&&(o(t),b(n)),O(!h)},children:[null!==s?Object(It.default)(s,"yyyy-MM-dd"):"","\xa0t/m\xa0",null!==u?Object(It.default)(u,"yyyy-MM-dd"):""," "]}),Object(V.jsx)("div",{className:"flex flex-col justify-center",children:Object(V.jsx)("div",{className:"filter-datum-caret",onClick:function(){y(!1)},children:"\u203a"})})]}),h&&Object(V.jsxs)("div",{className:"filter-datum-van-tot-pickercontainer",children:[Object(V.jsx)(At.a,{className:"filter-datum-van-tot-picker",selected:s,onChange:v,startDate:s,endDate:u,dateFormat:"yyyy-MM-dd",selectsRange:!0,inline:!0},"dp-van-tot"),Object(V.jsxs)("div",{className:"filter-datum-van-tot-picker-options",children:[Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){x("laatste7dagen")},children:"Laatste 7 dagen"},"fdvt-po1"),Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){x("laatste30dagen")},children:"Laatste 30 dagen"},"fdvt-po2"),Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){x("laatste90dagen")},children:"Laatste 90 dagen"},"fdvt-po3"),Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){x("laatste12maanden")},children:"Laatste 12 maanden"},"fdvt-po4"),Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){x("ditjaar")},children:"Dit jaar"},"fdvt-po5"),Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){x("vorigjaar")},children:"Vorig jaar "},"fdvt-po6")]})]})]})},zt=(n(482),36e5);var Mt=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.filter?e.filter.intervalduur:zt})),n=[{label:"1h",anchor:"start",pos:"0%",value:zt},{label:"4h",anchor:"middle",pos:"15%",value:144e5},{label:"8h",anchor:"middle",pos:"26.5%",value:288e5},{label:"12h",anchor:"middle",pos:"39%",value:432e5},{label:"16h",anchor:"middle",pos:"50%",value:576e5},{label:"20h",anchor:"middle",pos:"62%",value:72e6},{label:"24h",anchor:"middle",pos:"73.5%",value:864e5},{label:"2d",anchor:"middle",pos:"85.5%",value:1728e5},{label:"3d",anchor:"middle",pos:"96%",value:2592e5}],a=n.map((function(e,t){return Object(V.jsx)("text",{className:"filter-duur-annotation",x:e.pos,y:"14",textAnchor:e.anchor,children:e.label},"fide-"+t)})),r=n.map((function(e,t){return Object(V.jsx)("rect",{className:"filter-duur-tickmark",x:e.pos,y:"0",width:"1",height:"20"},"fidt-"+t)})),i=n.findIndex((function(e){return e.value===t}));return-1===i&&(i=4),Object(V.jsxs)("div",{className:"filter-duur-container",children:[Object(V.jsx)("div",{className:"filter-datum-title",children:"Periode"}),Object(V.jsxs)("div",{className:"filter-duur-box-row",children:[Object(V.jsx)("input",{className:"filter-duur-range",width:"100%",type:"range",min:"0",max:n.length-1,step:"1",onChange:function(t){e({type:"SET_FILTER_INTERVAL_DUUR",payload:n[t.target.value].value})},value:i}),Object(V.jsx)("svg",{className:"filter-duur-tickmarks",role:"presentation",width:"100%",height:"10",xmlns:"http://www.w3.org/2000/svg",children:r}),Object(V.jsx)("svg",{className:"filter-duur-elements",role:"presentation",width:"100%",height:"14",xmlns:"http://www.w3.org/2000/svg",children:a})]})]})};n(483);var Ft=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.aanbieders?e.metadata.aanbieders:[]})),n=Object(m.d)((function(e){var t=void 0;if(e.layers)switch(e.layers.displaymode){case N:t=!(!e.vehicles||!e.vehicles.operatorstats)&&e.vehicles.operatorstats;break;case S:if(e.filter&&e.rentals){var n="bestemming"===e.filter.herkomstbestemming?"destinations":"origins";t=e.rentals["".concat(n,"_operatorstats")]?e.rentals["".concat(n,"_operatorstats")]:void 0}break;case D:if(e.metadata&&e.filter&&e.statsreducer){var a={};return e.metadata.aanbieders.forEach((function(e){a[e.system_id]=0})),Object.keys(a).forEach((function(t){t in e.statsreducer.operatorstats_verhuringenchart===!0&&(a[t]+=e.statsreducer.operatorstats_verhuringenchart[t]),t in e.statsreducer.operatorstats_beschikbarevoertuigenchart===!0&&(a[t]+=e.statsreducer.operatorstats_verhuringenchart[t])})),a}}return t})),a=Object(m.d)((function(e){return e.filter?e.filter.aanbiedersexclude:[]})),r=function(n){(a||"").split(",").length!==t.length-1&&e({type:"ADD_TO_FILTER_AANBIEDERS_EXCLUDE",payload:n.system_id})};return Object(V.jsxs)("div",{className:"filter-aanbieders-container",children:[Object(V.jsxs)("div",{className:"filter-aanbieders-title-row",children:[Object(V.jsx)("div",{className:"filter-aanbieders-title",children:"Aanbieders"}),""!==a?Object(V.jsx)("div",{className:"filter-aanbieders-reset cursor-pointer",onClick:function(t){e({type:"CLEAR_FILTER_AANBIEDERS_EXCLUDE",payload:""})},children:"reset"}):null]}),Object(V.jsx)("div",{className:"filter-aanbieders-box-row",children:t.map((function(i,c){if(void 0!==n&&(0===n.length||0===n[i.system_id]))return Object(V.jsxs)("div",{className:"filter-aanbieders-item filter-aanbieders-item-not-active",children:[Object(V.jsx)("div",{className:"filter-aanbieders-marker",children:Object(V.jsxs)("svg",{viewBox:"0 0 30 30",children:[Object(V.jsx)("line",{x1:"20%",y1:"20%",x2:"80%",y2:"80%",stroke:"#000000"}),Object(V.jsx)("line",{x1:"20%",y1:"80%",x2:"80%",y2:"20%",stroke:"#000000"})]})}),Object(V.jsx)("div",{className:"filter-aanbieders-itemlabel",children:i.name})]},i.name);var s=!!a&&a.includes(i.system_id),o=s?function(t){t.stopPropagation(),function(t){e({type:"REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE",payload:t.system_id})}(i)}:function(e){var n;e.stopPropagation(),n=i,""===a?t.map((function(e){return e.system_id!==n.system_id&&r(e),e})):r(n)};return Object(V.jsxs)("div",{className:"filter-aanbieders-item ".concat(s?"filter-aanbieders-item-not-active":""),onClick:o,children:[Object(V.jsx)("div",{className:"filter-aanbieders-marker",children:Object(V.jsxs)("svg",{viewBox:"0 0 30 30",children:[Object(V.jsx)("circle",{cx:"50%",cy:"50%",r:"40%",fill:"#000000"}),Object(V.jsx)("circle",{cx:"50%",cy:"50%",r:"35%",fill:"#FFFFFF"}),Object(V.jsx)("circle",{cx:"70%",cy:"25%",r:"25%",fill:i.color.toString()})]})}),Object(V.jsx)("div",{className:"filter-aanbieders-itemlabel",children:i.name})]},i.name)}))})]})};n(484);var Gt=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.zones?e.metadata.zones:[]})),n=Object(m.d)((function(e){return e.filter?e.filter.zones:0})),r=Object(m.d)((function(e){return e.filter?e.filter.gebied:0})),i=Object(m.d)((function(e){return!!e.ui&&e.ui.FILTERBAR_EXTENDED})),c=Object(a.useState)(""),s=Object(B.a)(c,2),o=s[0],l=s[1],d=function(t){e({type:"REMOVE_FROM_FILTER_ZONES",payload:t})},u=function(t){e({type:"SET_VISIBILITY",payload:{name:"FILTERBAR_EXTENDED",visibility:t}})},b=function(e){l(e.target.value)},p=function(e){l("")},f=[{name:"Stadsdelen",zone_type:"residential_area"},{name:"Maatwerkzones",zone_type:"custom"},{name:"Wijken",zone_type:"neighborhood"}],j=function(t,a){var r=a.filter((function(e){return e.zone_type===t.zone_type}));if(0===r.length)return null;var i=r.sort((function(e,t){return e.name.localeCompare(t.name)}));return Object(V.jsxs)("div",{className:"zone-group-container",children:[Object(V.jsx)("span",{className:"zone-group-title",children:t.name},"zgn-"+t.zone_type),Object(V.jsx)("div",{className:"filter-zones-zonelist",children:i.map((function(t){return n.includes(t.zone_id)?Object(V.jsx)("div",{className:" form-item-selected form-item cursor-pointer ",onClick:function(e){e.stopPropagation(),d(t.zone_id)},children:t.name},"item-"+t.zone_id):Object(V.jsx)("div",{className:" form-item cursor-pointer ",onClick:function(n){var a;n.stopPropagation(),a=t.zone_id,e({type:"ADD_TO_FILTER_ZONES",payload:a})},children:t.name},"item-"+t.zone_id)}))},"zgi-"+t.zone_type)]},"zg-"+t.zone_type)},h=[],O="";try{var g=(h=n.split(",")).length;if(g>1)O=g+" zones";else{var v=t.find((function(e){return e.zone_id.toString()===h[0]}));O=v&&v.name||""}}catch(_){O=""}""===O&&(O="Alle Zones");var y=""!==r,x=t.filter((function(e){return h.includes(e.zone_id.toString())}));return y?Object(V.jsxs)("div",{className:"filter-zones-container ".concat(!0===y?"":"filter-zones-item-not-active"),children:[Object(V.jsx)("div",{className:"filter-zones-title",onClick:function(e){y&&u("zones")},children:"Zones"}),Object(V.jsxs)("div",{className:"filter-zones-box-row",children:[Object(V.jsx)("div",{className:"\n            filter-zones-value flex flex-col justify-center cursor-pointer h-full\n            ".concat("Alle Zones"===O?"text-black":"","\n          "),onClick:function(e){y&&u("zones")},children:O}),""!==n?Object(V.jsx)("div",{className:"filter-zones-img-cancel",onClick:function(){e({type:"CLEAR_FILTER_ZONES",payload:null})}}):null,"zones"===i?function(e){var t=e.filter((function(e){return""===o||e.name.toLowerCase().includes(o.toLowerCase())}));return Object(V.jsx)(Et,{title:"Selecteer een zone",closeFunction:function(e){return u(!1)},children:Object(V.jsxs)("div",{className:"filter-form-selectie",children:[Object(V.jsxs)("div",{className:"filter-form-search-container mb-3",children:[Object(V.jsxs)("div",{className:"filter-form-search-container-2",children:[Object(V.jsx)("input",{type:"text",className:"filter-form-search",onChange:b,value:o,autoFocus:!0,placeholder:"zoek"}),Object(V.jsx)("div",{className:"ml-3 flex flex-col justify-center h-full",children:""!==o?Object(V.jsx)("div",{className:"filter-zones-img-cancel cursor-pointer",onClick:p}):Object(V.jsx)("div",{className:"filter-zones-img-search cursor-pointer"})})]}),Object(V.jsx)("div",{children:"\xa0"})]}),Object(V.jsx)("div",{className:"filter-form-values",children:f.map((function(e){return j(e,t)}))})]})})}(t):null,Object(V.jsx)("div",{className:"ml-3 flex flex-col justify-center h-full",children:Object(V.jsx)("div",{className:"filter-zones-img-search cursor-pointer",onClick:function(e){u("zones")}})})]}),Object(V.jsx)("div",{className:"filter-zones-zonelist",children:x.map((function(e){return Object(V.jsxs)("div",{className:"filter-zones-zoneitem",children:[e.name,Object(V.jsx)("div",{className:"filter-zones-img-zoneitem-cancel",onClick:function(t){t.stopPropagation(),d(e.zone_id)},children:"\xd7"})]},e.zone_id)}))})]}):Object(V.jsx)(V.Fragment,{})};n(485);function Pt(){return Ht({label:"Parkeerduur",filtername:"parkeerduurexclude",markers:Object(m.d)((function(e){return[{id:0,color:"#1FA024",fillcolor:"#1FA024",name:"< 1 uur"},{id:1,color:"#48E248",fillcolor:"#48E248",name:"< 24 uur"},{id:2,color:"#FFD837",fillcolor:"#FFD837",name:"< 4 d"},{id:3,color:"#FD3E48",fillcolor:"#FD3E48",name:"> 4 d"}]})),addmarker:"ADD_TO_FILTER_MARKERS_EXCLUDE",removemarker:"REMOVE_FROM_FILTER_MARKERS_EXCLUDE",clearmarkers:"CLEAR_FILTER_MARKERS_EXCLUDE"})}function Ut(){return Ht({label:"Afstand",filtername:"afstandexclude",markers:Object(m.d)((function(e){return[{id:0,color:"#48E248",fillcolor:"#48E248",name:"1km"},{id:1,color:"#44BD48",fillcolor:"#44BD48",name:"2km"},{id:2,color:"#3B7747",fillcolor:"#3B7747",name:"5km"},{id:3,color:"#343E47",fillcolor:"#343E47",name:"> 5km"}]})),addmarker:"ADD_TO_FILTER_AFSTAND_EXCLUDE",removemarker:"REMOVE_FROM_FILTER_AFSTAND_EXCLUDE",clearmarkers:"CLEAR_FILTER_AFSTAND_EXCLUDE"})}function Ht(e){var t=e.label,n=e.filtername,a=e.markers,r=e.addmarker,i=e.removemarker,c=e.clearmarkers,s=Object(m.c)(),o=Object(m.d)((function(e){return e.filter?e.filter[n]:""}))||"",l=function(e){console.log("addtofilter %s -> %s",n,e),s({type:r,payload:e})};return Object(V.jsxs)("div",{className:"filter-markers-container",children:[Object(V.jsxs)("div",{className:"filter-markers-title-row",children:[Object(V.jsx)("div",{className:"filter-markers-title",children:t}),""!==o?Object(V.jsx)("div",{className:"filter-markers-reset cursor-pointer",onClick:function(){console.log("clearfilter %s",n),s({type:c,payload:null})},children:"reset"}):null]}),Object(V.jsx)("div",{className:"filter-markers-box-row",children:a.map((function(e){var t=o.split(",").includes(e.id.toString()),r=t?"filter-markers-item-excluded":"filter-markers-item",c=t?function(t){t.stopPropagation(),function(e){console.log("removefromfilter %s -> %s",n,e),s({type:i,payload:e})}(e.id)}:function(t){var n;t.stopPropagation(),n=e.id,console.log("clickfilter [%s]<",o),""===o?a.map((function(e){return e.id!==n&&l(e.id),e})):l(n)};return Object(V.jsxs)("div",{className:r,children:[Object(V.jsx)("div",{className:"filter-markers-marker",onClick:c,children:Object(V.jsxs)("svg",{viewBox:"0 0 30 30",children:[Object(V.jsx)("circle",{cx:"50%",cy:"50%",r:"40%",fill:e.color}),Object(V.jsx)("circle",{cx:"50%",cy:"50%",r:"34%",fill:e.fillcolor})]})}),Object(V.jsx)("div",{className:"filter-markers-itemlabel",children:e.name})]},e.id)}))})]})}n(486);function Bt(){var e=Object(m.c)(),t=function(t){return function(n){e({type:"SET_FILTER_HERKOMSTBESTEMMING",payload:t})}},n="filter-herkomst-bestemming-button",a="filter-herkomst-bestemming-button";return"bestemming"===Object(m.d)((function(e){var t="herkomst";return e.filter&&(t="bestemming"===e.filter.herkomstbestemming?"bestemming":"herkomst"),t}))?a+=" filter-herkomst-bestemming-button-active":n+=" filter-herkomst-bestemming-button-active",Object(V.jsx)("div",{className:"filter-herkomst-bestemming-container",children:Object(V.jsxs)("div",{className:"filter-herkomst-bestemming-box-row",children:[Object(V.jsx)("div",{className:n,onClick:t("herkomst"),children:"Herkomst"}),Object(V.jsx)("div",{className:a,onClick:t("bestemming"),children:"Bestemming"})]})})}n(487);var Wt=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata.vehicle_types&&e.metadata.vehicle_types||[]})),n=Object(m.d)((function(e){return Array.isArray(e.filter.voertuigtypesexclude)?"":e.filter?e.filter.voertuigtypesexclude:""}))||"",a=function(a){(n||"").split(",").length!==t.length-1&&e({type:"ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE",payload:a})};return Object(V.jsxs)("div",{className:"filter-voertuigtypes-container",children:[Object(V.jsxs)("div",{className:"filter-voertuigtypes-title-row",children:[Object(V.jsx)("div",{className:"filter-voertuigtypes-title",children:"Vervoerstype"}),""!==n?Object(V.jsx)("div",{className:"filter-voertuigtypes-reset cursor-pointer",onClick:function(){e({type:"CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE",payload:null})},children:"reset"}):null]}),Object(V.jsx)("div",{className:"filter-voertuigtypes-box-row",children:t.map((function(r,i){var c=(n||"").split(",").includes(r.id),s=c?function(t){t.stopPropagation(),function(t){e({type:"REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE",payload:t})}(r.id)}:function(e){var i;e.stopPropagation(),i=r.id,""===n?t.map((function(e){return e.id!==i&&a(e.id),e})):a(i)},o="".concat(c?"filter-voertuigtypes-item-excluded":"filter-voertuigtypes-item"),l="";switch(r.id){case"bicycle":l="filter-voertuigtypes-icon-bicycle";break;case"cargo_bicycle":l="filter-voertuigtypes-icon-cargo-bicycle";break;case"moped":l="filter-voertuigtypes-icon-scooter";break;case"car":l="filter-voertuigtypes-icon-car";break;case"unknown":l="filter-voertuigtypes-icon-other"}return Object(V.jsxs)("div",{className:"".concat(o).concat(i===t.length-1?" filter-voertuigtypes-item-last":""),onClick:s,children:[Object(V.jsx)("div",{className:"filter-voertuigtypes-icon ".concat(l),onClick:s}),Object(V.jsx)("div",{className:"filter-voertuigtypes-itemlabel",children:r.name})]},r.id)}))})]})},Vt={white:{backgroundColor:"#fff",borderColor:"#CCCCCC",color:"#343E47"},red:{backgroundColor:"#fff",borderColor:"#CCCCCC",color:"#ff0000"},green:{backgroundColor:"#fff",borderColor:"#CCCCCC",color:"darkgreen"}};var Yt=function(e){var t=e.theme,n=e.children,a=e.onClick;return Object(V.jsx)("div",{className:" rounded-lg inline-block border-solid border-2 px-2 py-2 mr-2 mb-2 text-sm cursor-pointer ",onClick:a,style:Vt[t],children:n})};var Jt=function(e,t){var n=e.type,a=e.name,r=e.defaultValue,i=e.value,c=e.placeholder,s=e.min,o=e.disabled,l=e.id,d=e.autoComplete,u=e.classes,b=e.onChange;return Object(V.jsx)("div",{className:"FormInput",children:Object(V.jsx)("input",{type:n,name:a,autoComplete:d,id:l,value:i,defaultValue:r,onChange:b,placeholder:c,disabled:o,min:s,className:"\n        rounded-lg\n        inline-block\n        border-solid border-2\n        px-2\n        py-2\n        mr-2\n        mb-2\n        text-sm\n        ".concat(u,"\n      "),style:Vt.white})})},Zt=(n(488),n(516));function Kt(e){var t=e.title,n=e.backgroundColor;return Object(V.jsx)("div",{className:" inline-block rounded text-white px-2 py-2 mr-2 mb-2 text-sm ",style:{backgroundColor:n},children:t})}var Xt=function(e){var t=e.zone_id,n=e.name,a=e.geography_type;return Object(V.jsx)(Kt,{title:n,backgroundColor:{monitoring:"#15AEEF",stop:"#FD862E","no-parking":"#FD3E48"}[a]||"#000",children:n},t)};var qt=function(e){var t=e.theme,n=e.children,a=e.onClick,r=e.classes;return Object(V.jsx)("div",{className:"\n        inline-block\n        py-2\n        mb-2\n        text-sm\n        cursor-pointer\n        ".concat(r,"\n      "),onClick:a,style:{color:Vt[t].color},children:n})};function $t(e){var t=e.children,n=e.imageUrl;return Object(V.jsx)("div",{className:" bg-left-center bg-no-repeat pl-16 ",style:{backgroundImage:"url('".concat(n,"')"),backgroundSize:"60px"},children:t})}var Qt=function(e){var t=e.hideLogo,n={geography_type:"monitoring",zone_availability:"auto",published:!0},r=Object(a.useState)("view"),i=Object(B.a)(r,2),c=i[0],s=i[1],o=Object(a.useState)(!1),l=Object(B.a)(o,2),d=l[0],u=l[1],b=Object(a.useState)(0),p=Object(B.a)(b,2),f=p[0],j=p[1],h=Object(a.useState)(null),O=Object(B.a)(h,2),g=O[0],v=O[1],y=Object(a.useState)(null),x=Object(B.a)(y,2),_=x[0],E=x[1],k=Object(a.useState)(n),w=Object(B.a)(k,2),N=w[0],S=w[1],T="mb-2 text-sm",D=Object(m.d)((function(e){return e.filter?e.filter.gebied:null})),A=Object(m.d)((function(e){return e.authentication&&e.authentication.user_data?e.authentication.user_data.token:null}));Object(a.useEffect)((function(){window.ddMap&&(d||(window.ddMap.on("draw.create",(function(e){e.features&&e.features[0]&&v(e.features[0])})),u(!0)))}),[window.ddMap]);var C=function(){var e=Object(Q.a)($.a.mark((function e(){var t,n;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={municipality:D},e.next=3,fe(A,t);case 3:n=e.sent,E(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){C()}),[]),Object(a.useEffect)((function(){if(_){window.addEventListener("setSelectedZone",(function(e){var t=e.detail,a=function(e,t){if(e&&t){var n=e.filter((function(e){return e.zone_id===t}));return n&&n[0]?n[0]:{}}}(_,t);if(a){var r=n;r.zone_id=a.zone_id,r.area=a.area,r.name=a.name,r.municipality=a.municipality,r.geography_type=a.geography_type||n.geography_type,r.geography_id=a.geography_id,r.description=a.description,r.published=a.published||n.published,S(r),s("edit")}}))}}),[_]);var R=function(){window.CROW_DD.theDraw&&(window.CROW_DD.theDraw.changeMode("simple_select",[]),s("view"))},I=function(e){if(e.target&&e.target.name){var t=N;t[e.target.name]=e.target.value,S(t),j(f+1)}},L=function(){var e=Object(Q.a)($.a.mark((function e(){var t,n,a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N.area||!N.drawedArea){e.next=3;break}return notify("Teken eerst een zone voordat je deze opslaat"),e.abrupt("return");case 3:if(!N.geography_id){e.next=11;break}return e.next=6,he(A,Object.assign({},N,{area:g||N.area}));case 6:t=e.sent,S(t),C(),e.next=19;break;case 11:return e.next=13,je(A,Object.assign({},N,{municipality:D,area:g,description:"Zone"}));case 13:if(n=e.sent,C(),n&&n.area){e.next=17;break}return e.abrupt("return");case 17:a={id:n.zone_id,type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:n.area.geometry.coordinates}},window.CROW_DD.theDraw.add(a);case 19:R(),M();case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(Q.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Weet je zeker dat je deze zone wilt verwijderen?")){e.next=2;break}return e.abrupt("return");case 2:if(N&&N.geography_id){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Oe(A,N.geography_id);case 6:C(),window.CROW_DD.theDraw.delete(N.zone_id),R();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){(function(e){var t=[];return e.map((function(e){e.id&&"string"===typeof e.id&&t.push(e)})),t})(window.CROW_DD.theDraw.getAll().features).map((function(e){window.CROW_DD.theDraw.delete(e.id)}))},F=function(){M(),R()},G=!N.geography_id;return Object(V.jsxs)("div",{className:"filter-bar-inner py-2",children:[!t&&Object(V.jsx)(ft,{}),Object(V.jsx)("div",{className:"mt-6",children:Object(V.jsx)(kt,{})}),!D&&Object(V.jsx)("div",{children:"Selecteer een plaats."}),D&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{className:"",children:[Object(V.jsx)("div",{className:T,children:"Zones"}),Object(V.jsx)("div",{children:_?Zt.a(Xt,_):Object(V.jsx)("div",{})})]}),"view"===c&&Object(V.jsxs)("div",{className:"mt-6",children:[Object(V.jsx)("div",{className:T,children:"Nieuwe zone"}),Object(V.jsxs)("div",{children:["view"===c&&Object(V.jsx)(Yt,{theme:"white",onClick:function(){window.CROW_DD.theDraw&&(window.CROW_DD.theDraw.changeMode("draw_polygon"),S(n),s("edit"))},children:"Nieuwe zone aanmaken"}),"edit"===c&&Object(V.jsx)(Yt,{theme:"white",onClick:F,children:"Annuleer"})]})]}),"edit"===c&&Object(V.jsxs)("div",{className:"mt-6",children:[Object(V.jsxs)("div",{className:T,children:["Zone ",G?"toevoegen":"wijzigen"]}),Object(V.jsxs)("div",{className:"flex justify-between",children:[Object(V.jsx)(Yt,{theme:"green",onClick:L,children:"Opslaan"}),Object(V.jsx)(Yt,{theme:"white",onClick:F,children:"Annuleer"})]}),Object(V.jsx)("div",{children:Object(V.jsx)(Jt,{type:"text",placeholder:"Naam van de zone",name:"name",autoComplete:"false",id:"js-FilterbarZones-name-input",value:N.name,onChange:I,classes:"w-full"})}),Object(V.jsx)("div",{className:" mt-0 ",children:Object(V.jsx)("div",{className:" flex rounded-lg bg-white border-solid border border-gray-400 text-sm ",children:Zt.a((function(e){return Object(V.jsx)("div",{className:"\n                  ".concat(N.geography_type===e.name?"Button-orange":"","\n                  cursor-pointer\n                  flex-1\n                  \n                  rounded-lg\n                  text-gray-500\n                  text-center\n                  h-10\n                  flex\n                  flex-col\n                  justify-center\n                "),onClick:function(t){t.preventDefault(),I({target:{name:"geography_type",value:e.name}})},children:e.title},e.name)}),[{name:"monitoring",title:"Analyse"},{name:"parking",title:"Parking"},{name:"no-parking",title:"No parking"}])})}),Object(V.jsx)("div",{className:" py-2 ",children:Object(V.jsx)("div",{className:" flex rounded-lg bg-white border-solid border border-gray-400 text-sm ",children:Zt.a((function(e){return Object(V.jsx)("div",{className:"\n                  ".concat(N.zone_availability===e.name?"Button-blue":"","\n                  cursor-pointer\n                  flex-1\n                  rounded-lg\n                  text-gray-500\n                  text-center\n                  border-gray-500\n                  h-10\n                  flex\n                  flex-col\n                  justify-center\n                "),onClick:function(t){t.preventDefault(),I({target:{name:"zone_availability",value:e.name}})},children:e.title},e.name)}),[{name:"auto",title:"Automatisch"},{name:"open",title:"Open"},{name:"closed",title:"Gesloten"}])})}),Object(V.jsx)("p",{className:"mb-2 text-sm",children:"Limiet per modaliteit:"}),Object(V.jsxs)("div",{className:" rounded-lg bg-white border-solid border border-gray-400 p-4 ",children:[Object(V.jsx)($t,{imageUrl:"https://i.imgur.com/IF05O8u.png",children:Object(V.jsx)(Jt,{type:"number",min:"0",name:"vehicles-limit.bikes",defaultValue:"",onChange:I})}),Object(V.jsx)($t,{imageUrl:"https://i.imgur.com/FdVBJaZ.png",children:Object(V.jsx)(Jt,{type:"number",min:"0",name:"vehicles-limit.cargo",defaultValue:"",onChange:I})}),Object(V.jsx)($t,{imageUrl:"https://i.imgur.com/h264sb2.png",children:Object(V.jsx)(Jt,{type:"number",min:"0",name:"vehicles-limit.moped",defaultValue:"",onChange:I})}),Object(V.jsx)($t,{imageUrl:"https://i.imgur.com/7Y2PYpv.png",children:Object(V.jsx)(Jt,{disabled:!0,type:"number",min:"0",name:"vehicles-limit.moped",defaultValue:"",onChange:I})})]})]}),!G&&"edit"===c&&Object(V.jsx)("div",{className:"my-2 text-center",children:Object(V.jsx)(qt,{theme:"red",onClick:z,classes:"text-xs",children:"Verwijder zone"})})]})]})};var en=function(e){var t=e.displayMode,n=(e.visible,e.hideLogo),a=Object(m.d)((function(e){return!!e.authentication.user_data})),r=Object(m.d)((function(e){return e.filter&&e.filter.datum?e.filter.datum:(new Date).toISOString()})),i=t===N,c=t===S,s=c||i||!a,o=c,l=i,d=c,u=c,b=t===D,p=c||i||!a;return t===T?Object(V.jsx)(Qt,{hideLogo:n}):Object(V.jsxs)("div",{className:"filter-bar-inner py-2",children:[!n&&Object(V.jsx)(ft,{}),a&&s&&Object(V.jsx)(Tt,{}),!a&&s&&Object(V.jsx)("div",{children:Object(V.jsxs)("div",{className:"filter-datum-container",children:[Object(V.jsx)("div",{className:"filter-datum-title",children:"Tijd"}),Object(V.jsx)("div",{className:"filter-datum-box-row",children:j()(r).format("HH:mm")})]})}),a&&o&&Object(V.jsx)(Mt,{}),a&&b&&Object(V.jsx)(Lt,{}),Object(V.jsx)(kt,{}),Object(V.jsx)(Gt,{}),a&&l&&Object(V.jsx)(Pt,{}),a&&d&&Object(V.jsx)(Ut,{}),a&&u&&Object(V.jsx)(Bt,{}),p&&Object(V.jsx)(Wt,{}),Object(V.jsx)(Ft,{})]})};var tn=function(e){e.isVisible;var t=e.displayMode,n=Object(m.d)((function(e){return!!e.ui&&e.ui.FILTERBAR_EXTENDED}));return Object(V.jsx)(Le,{name:"FilterBar",direction:"left",options:{title:"Filters",backgroundColor:"#F6F5F4"},style:{width:n?"648px":"324px",height:"100%",top:0,position:"fixed"},children:Object(V.jsx)("div",{className:"py-2 mx-3 h-full",children:Object(V.jsx)(en,{displayMode:t})})})};n(489);var nn=function(e){return Object(V.jsxs)("div",{className:"\n      MobileSlideBox w-full sm:hidden fixed left-0\n      ".concat(e.isVisible?"is-visible":"","\n      ").concat(e.classes,"\n    "),style:e.style,children:[Object(V.jsxs)("header",{className:"flex justify-between",children:[Object(V.jsx)("h1",{className:"",children:e.title}),Object(V.jsx)(jt,{onClick:e.closeHandler})]}),Object(V.jsx)("div",{className:"w-full",children:e.children})]})};var an=function(e){var t=e.isVisible,n=e.displayMode,a=Object(m.c)();return Object(V.jsx)(nn,{title:"Filters",isVisible:t,closeHandler:function(){a({type:"SET_VISIBILITY",payload:{name:"FILTERBAR",visibility:!1}})},classes:" top-0 overflow-auto ",style:{height:"calc(100vh - 60px)"},children:Object(V.jsx)(en,{hideLogo:!0,displayMode:n})})},rn=n(242),cn=function(){var e=Object(a.useState)(!1),t=Object(B.a)(e,2),n=t[0],r=t[1];return n?Object(V.jsx)(W.a,{to:"/"}):Object(V.jsx)("div",{className:" px-4 min-h-screen sm:flex sm:justify-center sm:px-0 ",children:Object(V.jsxs)("div",{className:"mx-auto py-8",children:[Object(V.jsx)(jt,{onClick:function(){return r(!0)},style:{position:"absolute",right:"30px",top:"18px"}}),Object(V.jsx)(ft,{}),Object(V.jsx)("div",{style:{maxWidth:"100%",width:"616px"},dangerouslySetInnerHTML:{__html:rn.marked.parse('\n# Over het Dashboard Deelmobiliteit\n\n## Algemeen\n\nHet Dashboard Deelmobiliteit is een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit op de voeten willen.\n\nHoe lang en waar staan deelvoertuigen ongebruikt in de openbare ruimte? Hoe vaak worden de deelvoertuigen verhuurd? In welke wijken en op welke tijdstippen zijn deelvoertuigen populair? \n\nMet de informatie uit het Dashboard Deelmobiliteit kunnen overheden hun beleid ontwikkelen, evalueren en bijsturen.\n\n## Hoe werkt het?\n\nHet Dashboard Deelmobiliteit verzamelt elke halve minuut positie van  meer dan 15.000 geparkeerde deelvoertuigen in Nederland (januari 2022).\n\nOp basis van deze informatie genereert het dashboard zogenaamde parkeergebeurtenissen en verhuringen, die opgeslagen worden in een centrale database.\n\nHet dashboard biedt een aantal functionaliteiten (kaarten, grafieken en tabellen) om de database te raadplegen. \n\nVoor analyses waar het dashboard niet in voorziet, kunnen overheden downloads maken van de ruwe data uit het dashboard om maatwerkanalyses te (laten) maken.\n\n## Functionaliteiten\n\nIn overleg met deelnemende overheden zijn de volgende functionaliteiten ontwikkeld:\n\n- Een kaart met het aanbod van deelvoertuigen op een tijdstip naar keuze. Een kleurcode geeft tevens aan hoe lang het voertuig te huur staat.\n- Een kaart met verhuringen van deelvoertuigen gedurende een periode naar keuze. Het betreft zowel de locaties waar verhuringen gestart zijn als be\xebindigd.\n- Grafieken met ontwikkelingen in een periode naar keuze. Het gaat zowel om de ontwikkeling in het aantal deelvoertuigen dat aangeboden wordt als om de ontwikkeling het aantal verhuringen.\n- Standaardrapportages als excel-sheets gedownload kunnen worden.\n\nOverheden hebben alleen toegang tot de informatie over deelvoertuigen in hun eigen bestuursgebied.\n\n## Voordelen voor gemeenten\n\n- sneller toegang tot data\n- minder uitvragen naar aanbieders nodig (1 bron met alle data)\n- geen conversie meer nodig: data van elke aanbieder heeft precies hetzelfde dataformaat\n- ontwikkeling in overleg met de aangesloten gemeentes\n- indien gewenst uit te breiden door gemeentes zelf (open source software)\n\n## Voordelen aanbieders\n\n- minder aanvragen vanuit gemeentes\n- geen nieuwe dataformaten nodig i.v.m. gebruik internationale datastandaarden\n- gemeentes hebben beter inzicht in de stand van zaken\n- aanbieders hebben beter inzicht\n\n## Veel gestelde vragen\n\n### Hoe krijg ik toegang tot het Dashboard?\n\nVia het CROW of via info@deelfietsdashboard.nl kun je een login aanvragen. Afhankelijk van je taak en de afspraken over de data kun je vervolgens toegang krijgen tot de dashboard informatie voor gebieden en/of van aanbieders. Zo kunnen gemeente medewerkers over het algemeen toegang krijgen voor het dashboard in hun gemeente. Aanbieders van deelfietsen kunnen uiteraard toegang krijgen tot alle informatie van hun deelfietsen. Neem voor vragen over de rechten ook contact op met het CROW of info@deelfietsdashboard.nl.\n\n### Welke datastandaarden worden ondersteund?\n\nHoewel het Dashboard Deelmobiliteit verschillende datastandaarden ondersteunt, geven we er de voorkeur aan dat aanbieders hun data aanleveren conform MDS. Dit geeft ook de aanbieders de meeste zekerheid dat de koppeling in de toekomst goed functioneert. Zie de details in deze [specificatie](https://docs.crow.nl/deelfietsdashboard/hr-dataspec/).\n\n### Wat zijn de afspraken over data en financiering?\n\n[Op deze pagina](https://www.fietsberaad.nl/Kennisbank/Afspraken-over-data-en-financiering-van-dashboard) vind je de afspraken over openbaarheid data en de financiering.\n\n### Is de software open source?\n\nJa, de software is open source. Via [GitHub](https://github.com/Stichting-CROW/dashboarddeelmobiliteit-app) en [Gitlab](https://gitlab.com/bikedashboard) kun de laaste versie van de broncode bekijken.\n\nVelen handen maken licht werk. We zijn daarom blij als je wilt helpen. Gemeenten of andere overheden kunnen helpen bij het specificeren van handige overzichten. Deelmobiliteitbedrijven kunnen meebouwen aan open source tools. Ontwikkelaars kunnen bijdragen aan de code. Ontwerpers kunnen de look & feel verbeteren. Mail ons als je wilt weten hoe je mee kunt helpen!\n\nWe nodigen iedereen uit om mee te kijken en mee te ontwikkelen. Bugs en suggesties kunnen direct in de [issue-lijst](https://github.com/Stichting-CROW/dashboarddeelmobiliteit-app/issues) geplaatst worden. Ons mailen op info@deelfietsdashboard.nl kan natuurlijk ook.\n\n## Tot slot\n\nWil je contact opnemen met het team achter het Dashboard Deelmobiliteit, neem dan contact op met <a href="mailto:info@deelfietsdashboard.nl?Subject=Hallo">info@deelfietsdashboard.nl</a>\n          ')}})]})})},sn=n(47),on=n(243),ln=(n(490),Object(sn.a)(Array(13).keys()).slice(1).map((function(e){return"/components/Tour/Openbare_presentatie_dashboard_deelmobiliteit_januari_2022-".concat(e<10?"0":"").concat(e,".png")}))),dn={duration:6e4,transitionDuration:300,pauseOnHover:!0,infinite:!0,arrows:!0,indicators:!0,scale:1.4,onChange:function(e,t){}},un=function(){var e=Object(a.useState)(!1),t=Object(B.a)(e,2),n=t[0],r=t[1],i=Object(a.useRef)(null);Object(a.useEffect)((function(e){var t=function(e){"ArrowLeft"===e.code?i.current.goBack():"ArrowRight"===e.code&&i.current.goNext()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]);return n?Object(V.jsx)(W.a,{to:"/"}):Object(V.jsxs)("div",{className:" min-h-screen flex justify-center px-0 w-full ",children:[Object(V.jsx)(jt,{onClick:function(){return r(!0)},style:{position:"absolute",right:"30px",top:"18px"}}),Object(V.jsxs)("div",{className:"mx-auto py-8 w-full justify-between flex-col flex",children:[Object(V.jsx)(ft,{}),Object(V.jsx)("div",{className:"slide-container flex-1",children:Object(V.jsx)(on.Fade,Object(s.a)(Object(s.a)({ref:i},dn),{},{children:ln.map((function(e,t){return Object(V.jsx)("div",{className:"each-slide",children:Object(V.jsxs)("div",{style:{backgroundImage:"url(".concat(ln[t],")")},children:[10===t&&Object(V.jsx)("span",{className:"each-slide-text",children:Object(V.jsx)("a",{href:"https://docs.crow.nl/deelfietsdashboard/hr-dataspec/",target:"_blank",rel:"noreferrer",children:"Klik hier voor de specs"})}),11===t&&Object(V.jsxs)("span",{className:"each-slide-text",children:[Object(V.jsx)("div",{children:Object(V.jsx)("a",{href:"https://www.fietsberaad.nl/Kennisbank/Afspraken-over-data-en-financiering-van-dashboard",target:"_blank",rel:"noreferrer",children:"Openbaarheid en financiering"})}),Object(V.jsx)("div",{children:Object(V.jsx)("a",{href:"https://github.com/Stichting-CROW/",target:"_blank",rel:"noreferrer",children:"GitHub"})}),Object(V.jsx)("div",{children:Object(V.jsx)("a",{href:"https://gitlab.com/bikedashboard",target:"_blank",rel:"noreferrer",children:"GitLab"})}),Object(V.jsx)("div",{children:Object(V.jsx)("a",{href:"https://github.com/Stichting-CROW/dashboarddeelmobiliteit-app/issues",target:"_blank",rel:"noreferrer",children:"Bugs & Suggesties"})}),Object(V.jsx)("div",{children:Object(V.jsx)("a",{href:"mailto:info@deelfietsdashboard.nl",target:"_blank",rel:"noreferrer",children:"info@deelfietsdashboard.nl"})})]})]})},e)}))}))})]})]})};n(491);function bn(e){return Object(V.jsx)("div",{className:"Overlay relative z-20 w-full h-full lg:w-2/3 bg-white pb-16",children:Object(V.jsx)("div",{className:"Overlay-inner overflow-y-auto h-full",children:e.children})})}var mn=function(e){var t=Object(a.useState)(e.startDate||j()().toDate()),n=Object(B.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)(e.endDate||j()().toDate()),s=Object(B.a)(c,2),o=s[0],l=s[1],d=Object(a.useState)(!1),u=Object(B.a)(d,2),b=u[0],m=u[1],p=function(t){var n=Object(B.a)(t,2),a=n[0],r=n[1];i(a),l(r),e.onChange(t),null!==r&&m(!b)},f=function(e){var t=r,n=o;t=Object(Ct.default)(r,e?-7:7),n=Object(Ct.default)(o,e?-7:7),i(t),l(n)},h=function(e){var t,n,a=new Date((new Date).toDateString());switch(e){case"laatste7dagen":t=Object(Ct.default)(a,-6),n=a;break;case"laatste30dagen":t=Object(Ct.default)(a,-30),n=a;break;case"laatste90dagen":t=Object(Ct.default)(a,-90),n=a;break;case"laatste12maanden":t=Object(Ct.default)(a,-365),n=a;break;case"ditjaar":var r=a.getFullYear();t=new Date(r.toString()+"/1/1"),n=a;break;case"vorigjaar":var i=a.getFullYear()-1;t=new Date(i.toString()+"/1/1"),n=new Date(i.toString()+"/12/31");break;default:return}p([t,n])};return Object(V.jsxs)("div",{className:"filter-datum-van-tot-container",style:{paddingTop:"0.5rem",paddingBottom:"0.5rem"},children:[Object(V.jsx)("div",{className:"filter-datum-van-tot-title",children:e.label}),Object(V.jsxs)("div",{className:"filter-datum-van-tot-box-row",children:[Object(V.jsx)("div",{className:"flex flex-col justify-center",children:Object(V.jsx)("div",{className:"filter-datum-caret",onClick:function(){f(!0)},children:"\u2039"})}),Object(V.jsxs)("div",{className:"filter-datum-van-tot-input",onClick:function(e){e.preventDefault(),m(!b)},children:[null!==r?Object(It.default)(r,"yyyy-MM-dd"):"","\xa0t/m\xa0",null!==o?Object(It.default)(o,"yyyy-MM-dd"):""," "]}),Object(V.jsx)("div",{className:"flex flex-col justify-center",children:Object(V.jsx)("div",{className:"filter-datum-caret",onClick:function(){f(!1)},children:"\u203a"})})]}),b&&Object(V.jsxs)("div",{className:"filter-datum-van-tot-pickercontainer",children:[Object(V.jsx)(At.a,{className:"filter-datum-van-tot-picker",selected:r,onChange:p,startDate:r,endDate:o,dateFormat:"yyyy-MM-dd",selectsRange:!0,inline:!0},"dp-van-tot"),Object(V.jsxs)("div",{className:"filter-datum-van-tot-picker-options",children:[Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){h("laatste7dagen")},children:"Laatste 7 dagen"},"fdvt-po1"),Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){h("laatste30dagen")},children:"Laatste 30 dagen"},"fdvt-po2"),Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){h("laatste90dagen")},children:"Laatste 90 dagen"},"fdvt-po3"),Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){h("laatste12maanden")},children:"Laatste 12 maanden"},"fdvt-po4"),Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){h("ditjaar")},children:"Dit jaar"},"fdvt-po5"),Object(V.jsx)("div",{className:"filter-datum-van-tot-option",onClick:function(){h("vorigjaar")},children:"Vorig jaar "},"fdvt-po6")]})]})]})};n(492);var pn=function(e){var t=e.label,n=e.options,a=e.onChange;return Object(V.jsxs)("div",{className:"FormSelect my-2",children:[Object(V.jsx)("div",{className:"filter-datum-van-tot-title",children:t}),Object(V.jsxs)("select",{onChange:a,children:[Object(V.jsx)("option",{},"0"),n.map((function(e){return Object(V.jsx)("option",{value:e.value,children:e.title},e.value)}))]})]})};function fn(e){var t=e.classes,n=e.href,a=e.onClick,r=e.color,i=e.children;return Object(V.jsx)("button",{className:"\n    px-6 py-2 my-4 rounded-lg\n    transition-all\n    duration-100\n    ".concat("blue"===r?"bg-theme-blue hover:bg-black text-white":"","\n    ").concat("gray"===r?"bg-gray-300 hover:bg-gray-400 text-white":"","\n    ").concat(t,"\n  "),href:n,onClick:a,children:i})}function jn(e){var t=e.title,n=e.children;return Object(V.jsxs)("section",{className:"my-6 py-2 border-t-2 border-solid border-gray-200",style:{maxWidth:"100%",width:"320px"},children:[Object(V.jsx)("h3",{className:"mt-4 mb-4 text-xl font-bold",children:t}),n]})}function hn(e){var t=Object(m.c)(),n=Object(a.useState)(j()(j()().subtract(1,"month")).format("YYYY-MM-DD")),r=Object(B.a)(n,2),i=r[0],c=r[1],s=Object(a.useState)(j()().format("YYYY-MM-DD")),o=Object(B.a)(s,2),l=o[0],d=o[1],u=Object(a.useState)(""),p=Object(B.a)(u,2),f=p[0],h=p[1],O=Object(a.useState)(!1),g=Object(B.a)(O,2),v=g[0],y=g[1],x=Object(a.useState)(!1),_=Object(B.a)(x,2),E=_[0],k=_[1],w=Object(m.d)((function(e){return e.authentication&&e.authentication.user_data?e.authentication.user_data.token:void 0})),N=Object(m.d)((function(e){return!!(e.authentication&&e.authentication.user_data&&e.authentication.user_data.user)&&e.authentication.user_data.user})),S=Object(m.d)((function(e){return e.metadata&&e.metadata.gebieden?e.metadata.gebieden:[]}));Object(a.useEffect)((function(e){if(w){fetch("https://api.deelfietsdashboard.nl/dashboard-api/menu/acl",{headers:{authorization:"Bearer "+w}}).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){var t=!0===e.is_admin,n=!0===e.is_contact_person_municipality;(t||n)&&k(!0)}))}))}}),[w]);var T=function(){var e=Object(Q.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=3;break}return window.notify("Selecteer een startdatum"),e.abrupt("return");case 3:if(l){e.next=6;break}return window.notify("Selecteer een einddatum"),e.abrupt("return");case 6:if(f){e.next=9;break}return window.notify("Selecteer de gemeente"),e.abrupt("return");case 9:return e.next=11,rt(w,{startDate:j()(i).format("YYYY-MM-DD"),endDate:j()(l).format("YYYY-MM-DD"),gm_code:f});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(Q.a)($.a.mark((function e(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(w,{startDate:j()(i).format("YYYY-MM-DD"),endDate:j()(l).format("YYYY-MM-DD")});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(v)return Object(V.jsx)(W.a,{to:"/"});var A=j()(l).diff(i,"days")>30;return Object(V.jsx)("div",{className:" px-4 min-h-screen sm:flex sm:justify-center sm:px-0 ",children:Object(V.jsxs)("div",{className:"mx-auto py-8",children:[Object(V.jsx)(jt,{onClick:function(){return y(!0)},style:{position:"absolute",right:"30px",top:"18px"}}),Object(V.jsx)(ft,{}),Object(V.jsx)("div",{className:" mt-6 pt-10 border-t-2 border-solid border-gray-200 ",children:Object(V.jsxs)("h2",{className:"mt-4 mb-4 text-4xl font-bold",children:["Hallo",Object(V.jsx)("span",{className:"ml-4 inline-block text-gray-300 text-lg",children:N?N.email:""})]})}),Object(V.jsx)("p",{style:{maxWidth:"100%",width:"416px"},className:"mb-4",children:"Je bent lid van het Dashboard Deelmobiliteit, een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit willen volgen."}),"\xbb ",Object(V.jsx)(b.b,{to:"/over",className:" text-gray-400 underline block mb-2 inline-block ",children:"Meer info"}),Object(V.jsx)("br",{}),"\xbb ",Object(V.jsx)(b.b,{to:"/rondleiding",className:" text-gray-400 underline block mb-2 inline-block ",children:"Rondleiding"}),Object(V.jsxs)("div",{className:"flex",children:[Object(V.jsx)(fn,{classes:"mr-2",color:"blue",href:"mailto:info@deelfietsdashboard.nl?subject=Feedback Dashboard Deelmobiliteit&body=Ik heb feedback: ",children:"Zend feedback"}),Object(V.jsx)(fn,{color:"gray",onClick:function(){window.confirm("Wil je uitloggen?")&&(N&&(t({type:"CLEAR_USER",payload:null}),t({type:"LOGOUT",payload:null})),y(!0))},children:"Uitloggen"})]}),Object(V.jsxs)(jn,{title:"Download standaardrapportage",children:[Object(V.jsx)(mn,{label:"Periode",startDate:j()(i).toDate(),endDate:j()(l).toDate(),onChange:function(e){var t=Object(B.a)(e,2),n=t[0],a=t[1];c(n),d(a)}}),Object(V.jsx)(pn,{label:"Plaats",onChange:function(e){h(e.target.value)},options:S.map((function(e){return{value:e.gm_code,title:e.name}}))}),Object(V.jsx)(fn,{classes:"",color:"blue",onClick:function(){return T()},children:"Download rapportage"})]}),E&&Object(V.jsxs)(jn,{title:"Download ruwe data",children:[Object(V.jsx)(mn,{label:"Periode",startDate:j()(i).toDate(),endDate:j()(l).toDate(),onChange:function(e){var t=Object(B.a)(e,2),n=t[0],a=t[1];c(n),d(a)}}),A&&Object(V.jsx)("div",{className:"flex items-center font-medium tracking-wide text-red-500 text-xs mt-1 ml-1",children:Object(V.jsxs)("div",{children:["Het is momenteel niet mogelijk om een langere periode dan 1 maand te downloaden. Neem alsjeblieft contact op met ons via ",Object(V.jsx)("a",{href:"mailto:info@deelfietsdashboard.nl",className:"inline",children:"info@deelfietsdashboard.nl"})," als je een export wilt ontvangen voor een langere periode."]})}),Object(V.jsx)(fn,{classes:"",color:"blue",onClick:function(){return D()},children:"Download ruwe data (.csv)"})]})]})})}n(493);function On(e){var t=Object(m.c)(),n=Object(m.d)((function(e){return!!e.ui&&e.ui["MenuSecondary.layers"]})),a=Object(m.d)((function(e){return!!e.filter&&""!==e.filter.gebied})),r=Object(m.d)((function(e){return!!e.layers&&e.layers.zones_visible})),i=Object(m.d)((function(e){return e.layers?e.layers.displaymode:N})),c=Object(m.d)((function(e){return e.layers?e.layers.view_park:R})),s=Object(m.d)((function(e){return e.layers?e.layers.view_rentals:z})),o=Object(m.d)((function(e){return!!e.authentication.user_data}));return Object(V.jsx)(nn,{title:"Lagen",isVisible:n,closeHandler:function(){t({type:"SET_VISIBILITY",payload:{name:"MenuSecondary.layers",visibility:!1}})},classes:" top-auto z-10 ",children:Object(V.jsxs)("div",{className:"\n        SelectLayerMobile\n        flex justify-between\n      ",children:[i===N?Object(V.jsx)("div",{"data-type":"heat-map",className:"layer".concat(c!==A?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:A})},children:Object(V.jsx)("span",{className:"layer-title",children:"Heat map"})}):null,i===N?Object(V.jsx)("div",{"data-type":"pointers",className:"layer".concat(c!==C?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:C})},children:Object(V.jsx)("span",{className:"layer-title",children:"Clusters"})}):null,i===N?Object(V.jsx)("div",{"data-type":"vehicles",className:"layer".concat(c!==R?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_PARK",payload:R})},children:Object(V.jsx)("span",{className:"layer-title",children:"Voertuigen"})}):null,i===S?Object(V.jsx)("div",{"data-type":"heat-map",className:"layer".concat(s!==I?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_RENTALS",payload:I})},children:Object(V.jsx)("span",{className:"layer-title",children:"Heat map"})}):null,i===S?Object(V.jsx)("div",{"data-type":"pointers",className:"layer".concat(s!==L?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_RENTALS",payload:L})},children:Object(V.jsx)("span",{className:"layer-title",children:"Clusters"})}):null,i===S?Object(V.jsx)("div",{"data-type":"vehicles",className:"layer".concat(s!==z?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_VIEW_RENTALS",payload:z})},children:Object(V.jsx)("span",{className:"layer-title",children:"Voertuigen"})}):null,o&&a?Object(V.jsx)("div",{"data-type":"zones",className:"layer".concat(r?"":" layer-inactive"),onClick:function(){t({type:"LAYER_TOGGLE_ZONES_VISIBLE",payload:null})},children:Object(V.jsx)("span",{className:"layer-title",children:"Zones"})}):null]})})}n(494);var gn,vn,yn=function(){return Object(m.d)((function(e){return e.ui.showloading}))?Object(V.jsx)("img",{className:"loadingindicator",alt:"spinning progress indicator",src:"/images/components/LoadingIndicator/bike_wheel-512.png"}):null},xn=[{value:"cykl",system_id:"cykl",name:"Cykl"},{value:"donkey",system_id:"donkey",name:"Donkey"},{value:"htm",system_id:"htm",name:"HTM"},{value:"gosharing",system_id:"gosharing",name:"GO"},{value:"check",system_id:"check",name:"CHECK"},{value:"felyx",system_id:"felyx",name:"Felyx"},{value:"deelfietsnederland",system_id:"deelfietsnederland",name:"Deelfiets"},{value:"keobike",system_id:"keobike",name:"Keobike"},{value:"lime",system_id:"lime",name:"Lime"},{value:"baqme",system_id:"baqme",name:"BAQME"},{value:"bird",system_id:"bird",name:"Bird"},{value:"cargoroo",system_id:"cargoroo",name:"Cargoroo"},{value:"uwdeelfiets",system_id:"uwdeelfiets",name:"uwdeelfiets"},{value:"hely",system_id:"hely",name:"Hely"},{value:"tier",system_id:"tier",name:"TIER"},{value:"dott",system_id:"dott",name:"Dott"}],_n=[{gm_code:"",name:"Alle plaatsen"},{gm_code:"GM0518",name:"'s-Gravenhage"},{gm_code:"GM0796",name:"'s-Hertogenbosch"},{gm_code:"GM0613",name:"Albrandswaard"},{gm_code:"GM0141",name:"Almelo"},{gm_code:"GM0034",name:"Almere"},{gm_code:"GM0484",name:"Alphen aan den Rijn"},{gm_code:"GM0307",name:"Amersfoort"},{gm_code:"GM0362",name:"Amstelveen"},{gm_code:"GM0363",name:"Amsterdam"},{gm_code:"GM0200",name:"Apeldoorn"},{gm_code:"GM0202",name:"Arnhem"},{gm_code:"GM0106",name:"Assen"},{gm_code:"GM0489",name:"Barendrecht"},{gm_code:"GM0203",name:"Barneveld"},{gm_code:"GM0373",name:"Bergen (NH"},{gm_code:"GM0753",name:"Best"},{gm_code:"GM0375",name:"Beverwijk"},{gm_code:"GM0377",name:"Bloemendaal"},{gm_code:"GM0758",name:"Breda"},{gm_code:"GM0312",name:"Bunnik"},{gm_code:"GM0313",name:"Bunschoten"},{gm_code:"GM0502",name:"Capelle aan den IJssel"},{gm_code:"GM0310",name:"De Bilt"},{gm_code:"GM0736",name:"De Ronde Venen"},{gm_code:"GM0503",name:"Delft"},{gm_code:"GM0150",name:"Deventer"},{gm_code:"GM0384",name:"Diemen"},{gm_code:"GM0505",name:"Dordrecht"},{gm_code:"GM0228",name:"Ede"},{gm_code:"GM0772",name:"Eindhoven"},{gm_code:"GM0153",name:"Enschede"},{gm_code:"GM0232",name:"Epe"},{gm_code:"GM1771",name:"Geldrop-Mierlo"},{gm_code:"GM1942",name:"Gooise Meren"},{gm_code:"GM0014",name:"Groningen"},{gm_code:"GM0392",name:"Haarlem"},{gm_code:"GM0394",name:"Haarlemmermeer"},{gm_code:"GM0243",name:"Harderwijk"},{gm_code:"GM0246",name:"Heerde"},{gm_code:"GM0794",name:"Helmond"},{gm_code:"GM0164",name:"Hengelo"},{gm_code:"GM0798",name:"Hilvarenbeek"},{gm_code:"GM0402",name:"Hilversum"},{gm_code:"GM0353",name:"IJsselstein"},{gm_code:"GM0166",name:"Kampen"},{gm_code:"GM0542",name:"Krimpen aan den IJssel"},{gm_code:"GM1621",name:"Lansingerland"},{gm_code:"GM0080",name:"Leeuwarden"},{gm_code:"GM1916",name:"Leidschendam-Voorburg"},{gm_code:"GM0327",name:"Leusden"},{gm_code:"GM0809",name:"Loon op Zand"},{gm_code:"GM0556",name:"Maassluis"},{gm_code:"GM1842",name:"Midden-Delfland"},{gm_code:"GM1952",name:"Midden-Groningen"},{gm_code:"GM0356",name:"Nieuwegein"},{gm_code:"GM0267",name:"Nijkerk"},{gm_code:"GM0268",name:"Nijmegen"},{gm_code:"GM1930",name:"Nissewaard"},{gm_code:"GM0820",name:"Nuenen, Gerwen en Nederwetten"},{gm_code:"GM0302",name:"Nunspeet"},{gm_code:"GM0826",name:"Oosterhout"},{gm_code:"GM0431",name:"Oostzaan"},{gm_code:"GM1926",name:"Pijnacker-Nootdorp"},{gm_code:"GM0273",name:"Putten"},{gm_code:"GM0597",name:"Ridderkerk"},{gm_code:"GM0603",name:"Rijswijk"},{gm_code:"GM1674",name:"Roosendaal"},{gm_code:"GM0599",name:"Rotterdam"},{gm_code:"GM0606",name:"Schiedam"},{gm_code:"GM0848",name:"Son en Breugel"},{gm_code:"GM0855",name:"Tilburg"},{gm_code:"GM1730",name:"Tynaarlo"},{gm_code:"GM0344",name:"Utrecht"},{gm_code:"GM1581",name:"Utrechtse Heuvelrug"},{gm_code:"GM0861",name:"Veldhoven"},{gm_code:"GM0622",name:"Vlaardingen"},{gm_code:"GM0865",name:"Vught"},{gm_code:"GM0866",name:"Waalre"},{gm_code:"GM0867",name:"Waalwijk"},{gm_code:"GM0289",name:"Wageningen"},{gm_code:"GM0629",name:"Wassenaar"},{gm_code:"GM1960",name:"West Betuwe"},{gm_code:"GM1783",name:"Westland"},{gm_code:"GM0637",name:"Zoetermeer"},{gm_code:"GM0642",name:"Zwijndrecht"},{gm_code:"GM0193",name:"Zwolle"}],En=[{id:"bicycle",name:"Fiets"},{id:"cargo_bicycle",name:"Bakfiets"},{id:"moped",name:"Scooter"},{id:"car",name:"Auto"},{id:"unknown",name:"Onbekend"}],kn=function(e){return!!e.authentication.user_data},wn=function(){var e=Object(Q.a)($.a.mark((function e(t){var n,a,r,i,c,s,o;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==t){e.next=4;break}return console.log("no redux state available yet - skipping zones update"),e.abrupt("return",!1);case 4:if(!1!==(n=t.getState()).metadata.metadata_loaded){e.next=8;break}return console.log("no metadata available yet - skipping zones update"),e.abrupt("return",!1);case 8:if(a="",n){e.next=16;break}return t.dispatch({type:"SET_ZONES",payload:[]}),t.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}}),t.dispatch({type:"SET_ZONES_LOADED",payload:!0}),e.abrupt("return");case 16:if(kn(n)){e.next=34;break}return r=n.filter.gebied,i="https://api.deelfietsdashboard.nl/dashboard-api/public/filters?gm_code=".concat(r),e.next=21,fetch(i);case 21:return c=e.sent,e.next=24,c.json();case 24:if(s=e.sent,console.log("metadataZones 2-2"),console.log("zonesGeoData..",s),""!==n.filter.gebied){e.next=32;break}return t.dispatch({type:"SET_ZONES",payload:[]}),t.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}}),t.dispatch({type:"SET_ZONES_LOADED",payload:!0}),e.abrupt("return");case 32:return s&&s.filter_values&&s.filter_values.zones?(t.dispatch({type:"SET_ZONES",payload:s.filter_values.zones}),t.dispatch({type:"SET_ZONES_LOADED",payload:!0})):(t.dispatch({type:"SET_ZONES",payload:[]}),t.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}}),t.dispatch({type:"SET_ZONES_LOADED",payload:!0})),e.abrupt("return");case 34:if(""!==n.filter.gebied){e.next=41;break}return t.dispatch({type:"SET_ZONES",payload:[]}),t.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}}),t.dispatch({type:"SET_ZONES_LOADED",payload:!0}),e.abrupt("return");case 41:a="https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code="+n.filter.gebied,t.dispatch({type:"SET_ZONES",payload:[]}),t.dispatch({type:"SET_ZONES_LOADED",payload:!1});case 44:o={headers:{authorization:"Bearer "+n.authentication.user_data.token}},t.dispatch({type:"SHOW_LOADING",payload:!0}),fetch(a,o).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){t.dispatch({type:"SET_ZONES",payload:e.zones}),t.dispatch({type:"SET_ZONES_LOADED",payload:!0})}))})).catch((function(e){console.error("unable to decode JSON")})).finally((function(){t.dispatch({type:"SHOW_LOADING",payload:!1})})),e.next=53;break;case 49:e.prev=49,e.t0=e.catch(0),console.error("Unable to update zones",e.t0),t.dispatch({type:"SHOW_LOADING",payload:!1});case 53:case"end":return e.stop()}}),e,null,[[0,49]])})));return function(t){return e.apply(this,arguments)}}(),Nn=null,Sn=function(){var e=Object(Q.a)($.a.mark((function e(){var t,a,r,i,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==gn){e.next=4;break}return Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",REACT_APP_FUSIONAUTH_SERVER:"https://auth.deelfietsdashboard.nl/api",REACT_APP_FUSIONAUTH_APPLICATION_ID:"bf901170-a2db-4f91-8ca7-24921e961193"}).DEBUG&&console.error("no redux state available yet - skipping zones update"),e.abrupt("return",!1);case 4:if(t=gn.getState()){e.next=7;break}return e.abrupt("return");case 7:a=t&&kn(t)&&t.filter&&t.authentication.user_data.token,r="https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space",i={},c=Me(N,t.filter,t.metadata),a?null!==t.filter&&null!==t.authenticationdata&&(r="https://api.deelfietsdashboard.nl/dashboard-api/park_events",c.length>0&&(r+="?"+c.join("&")),i={headers:{authorization:"Bearer "+t.authentication.user_data.token}}):c.length>0&&(r+="?"+c.join("&")),gn.dispatch({type:"SHOW_LOADING",payload:!0}),Nn&&Nn.abort(),(Nn=Fe(r,i)).ready.then((function(e){if(Nn=null,!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){e=kn(t)?e.park_events:e.vehicles_in_public_space;var a={type:"FeatureCollection",features:[]},r={},i={};t.metadata.aanbieders.forEach((function(e){r[e.system_id||e.value]=e.color,i[e.system_id||e.value]=0}));var c=n(76),s=j()(t.filter.datum);e.forEach((function(e){var n,r=kn(t)?e.start_time:e.in_public_space_since,o=s.diff(j()(r),"minutes"),l=(n=o)<=60?0:n<=1440?1:n<=5760?2:3,d={type:"Feature",properties:{id:c(e.location.latitude+e.location.longitude),system_id:e.system_id||e.value,in_public_space_since:r,duration_bin:l},geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude,0]}};i[e.system_id||e.value]+=1;var u=t.filter.aanbiedersexclude.split(",")||[],b=t.filter.parkeerduurexclude.split(",")||[],m=!kn(t)||!b.includes(l.toString());(m=m&&!1===u.includes(e.system_id||e.value))&&a.features.push(d)})),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",REACT_APP_FUSIONAUTH_SERVER:"https://auth.deelfietsdashboard.nl/api",REACT_APP_FUSIONAUTH_APPLICATION_ID:"bf901170-a2db-4f91-8ca7-24921e961193"}).DEBUG&&console.log("geoJson in pollParkingData",a),gn.dispatch({type:"SET_VEHICLES",payload:a}),gn.dispatch({type:"SET_VEHICLES_OPERATORSTATS",payload:i})})).catch((function(e){console.error("unable to decode JSON")})).finally((function(){gn.dispatch({type:"SHOW_LOADING",payload:!1})}))})).catch((function(e){gn.dispatch({type:"SHOW_LOADING",payload:!1}),console.error("fetch error - unable to fetch JSON from %s",r)})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.error("Unable to update zones",e.t0);case 21:return e.prev=21,e.finish(21);case 23:case"end":return e.stop()}}),e,null,[[0,18,21,23]])})));return function(){return e.apply(this,arguments)}}(),Tn=n(76),Dn=void 0,An=function(){Dn?function(){try{if(void 0===Dn)return!1;var e=Dn.getState();if(e.layers.displaymode!==S)return!0;if(!1===e.metadata.zones_loaded)return!1;var t=e.filter.afstandexclude.split(",")||[];if(kn(e)&&e&&e.filter&&e.authentication.user_data.token){var n=function(n){if("destinations"===n||"origins"===n){var a="https://api.deelfietsdashboard.nl/dashboard-api/v2/trips/".concat(n),r={};if(null!==e.filter&&null!==e.authenticationdata){a="https://api.deelfietsdashboard.nl/dashboard-api/v2/trips/".concat(n);var i=Me(S,e.filter,e.metadata);i.length>0&&(a+="?"+i.join("&")),r={headers:{authorization:"Bearer "+e.authentication.user_data.token}}}Dn.dispatch({type:"SHOW_LOADING",payload:!0}),vn&&vn.abort(),(vn=Fe(a,r)).ready.then((function(a){if(vn=null,Dn.dispatch({type:"SHOW_LOADING",payload:!1}),!a.ok)return console.error("unable to fetch: %o",a),!1;a.json().then((function(a){var r=kn?a:[],i={type:"FeatureCollection",features:[]},c={};e.metadata.aanbieders.forEach((function(e){c[e.system_id||e.value]=0}));var s=e.filter.aanbiedersexclude.split(",")||[];r["trip_".concat(n)].forEach((function(e){var n,a=(n=e.distance_in_meters)<=1e3?0:n<=2e3?1:n<=5e3?2:3,r={type:"Feature",properties:{id:Tn(e.location.latitude+e.location.longitude),system_id:e.system_id,arrival_time:e.arrival_time,departure_time:e.departure_time,distance_bin:a,distance_in_meters:e.distance_in_meters},geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude,0]}};c[e.system_id||e.value]+=1;var o=!t.includes(a.toString());(o=o&&!1===s.includes(e.system_id||e.value))&&i.features.push(r)})),Dn.dispatch({type:"SET_RENTALS_".concat(n.toUpperCase()),payload:i}),Dn.dispatch({type:"SET_RENTALS_".concat(n.toUpperCase(),"_OPERATORSTATS"),payload:c})})).catch((function(e){console.error("unable to decode JSON")})).finally((function(){Dn.dispatch({type:"SHOW_LOADING",payload:!1})}))})).catch((function(e){Dn.dispatch({type:"SHOW_LOADING",payload:!1}),console.error("fetch error - unable to fetch JSON from %s",a)}))}else console.error("No valid key given to fetchData")};"bestemming"===e.filter.herkomstbestemming?n("destinations"):n("origins")}else Dn.dispatch({type:"CLEAR_RENTALS_ORIGINS"}),Dn.dispatch({type:"CLEAR_RENTALS_DESTINATIOINS"})}catch(a){console.error("Unable to update zones",a)}}():console.log("No store yet.")};n(496);var Cn=function(){var e=Object(a.useState)(document.location.pathname),t=Object(B.a)(e,2),r=t[0],i=t[1],c=Object(a.useState)(document.location.search),s=Object(B.a)(c,2),o=s[0],l=s[1],d=Object(a.useState)(null),u=Object(B.a)(d,2),b=u[0],p=u[1],f=Object(m.c)(),h=Object(a.useRef)(null),O=Object(W.g)();Object(a.useEffect)((function(){i(O?O.pathname:null),l(O?O.search:null)}),[O]),Object(a.useEffect)((function(){if(null!==o){var e=new URLSearchParams(o).get("view");if(e)try{var t=JSON.parse(decodeURIComponent(e));return f({type:"IMPORT_STATE",payload:t}),void setTimeout((function(){return f({type:"LAYER_SET_ZONES_EXTENT",payload:t.layers.mapextent})}),2500)}catch(a){console.warn("unable to decode application state"),alert("Ongeldige link ingegeven")}}var n;n=r.includes("/map/park")||"/"===r?N:r.includes("/map/rentals")?S:r.includes("/map/zones")?T:D,f({type:"LAYER_SET_DISPLAYMODE",payload:n})}),[r,o]);var g=Object(m.d)((function(e){return!!e.authentication.user_data})),v=Object(m.d)((function(e){return!!e.filter&&e.filter.datum})),y=Object(m.d)((function(e){return!!e.ui&&e.ui["MenuSecondary.layers"]})),x=Object(m.d)((function(e){return!!e.ui&&e.ui.FILTERBAR})),_=Object(m.d)((function(e){return e.filter})),E=Object(m.d)((function(e){return e.layers})),k=Object(m.d)((function(e){return e.layers?e.layers.displaymode:N})),w=Object(m.d)((function(e){return e.metadata}));Object(a.useEffect)((function(){var e=new URLSearchParams(o),t=j()(v).diff(j()(),"minutes")<-10;!e.get("view")&&t&&setTimeout((function(e){var t;t=j()().toDate(),f({type:"SET_FILTER_DATUM",payload:t.toISOString()})}),500)}),[]),Object(a.useEffect)((function(){!function(e){try{if(void 0===e)return!1;var t=e.getState();if(function(e){return!!e.authentication.user_data}(t)){var n={headers:{authorization:"Bearer "+t.authentication.user_data.token}};return e.dispatch({type:"SHOW_LOADING",payload:!0}),fetch("https://api.deelfietsdashboard.nl/dashboard-api/menu/acl",n).then((function(t){if(!t.ok)return console.error("unable to fetch: %o",t),!1;t.json().then((function(t){e.dispatch({type:"SET_GEBIEDEN",payload:t.municipalities}),1===t.municipalities.length&&e.dispatch({type:"SET_FILTER_GEBIED",payload:t.municipalities[0].gm_code}),e.dispatch({type:"SET_AANBIEDERS",payload:t.operators});var n=En;e.dispatch({type:"SET_VEHICLE_TYPES",payload:n}),e.dispatch({type:"SET_METADATA_LOADED",payload:!0})}))})).catch((function(e){console.error("unable to decode JSON")})).finally((function(){e.dispatch({type:"SHOW_LOADING",payload:!1})})),!0}e.dispatch({type:"SET_GEBIEDEN",payload:_n}),e.dispatch({type:"SET_AANBIEDERS",payload:xn});var a=En;e.dispatch({type:"SET_VEHICLE_TYPES",payload:a}),e.dispatch({type:"SET_METADATA_LOADED",payload:!0})}catch(r){return e.dispatch({type:"SHOW_LOADING",payload:!1}),!1}}(Mn)}),[g]),Object(a.useEffect)((function(){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",REACT_APP_FUSIONAUTH_SERVER:"https://auth.deelfietsdashboard.nl/api",REACT_APP_FUSIONAUTH_APPLICATION_ID:"bf901170-a2db-4f91-8ca7-24921e961193"}).DEBUG&&console.log("useEffect zones",_.gebied),w.metadata_loaded&&wn(Mn)}),[g,w.metadata_loaded,_.gebied]),Object(a.useEffect)((function(){Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",REACT_APP_FUSIONAUTH_SERVER:"https://auth.deelfietsdashboard.nl/api",REACT_APP_FUSIONAUTH_APPLICATION_ID:"bf901170-a2db-4f91-8ca7-24921e961193"}).DEBUG&&console.log("useEffect zones geodata"),w.zones_loaded&&function(e){try{if(void 0===e)return!1;var t=e.getState();if(!1===t.metadata.zones_loaded)return!1;var a="";if(kn(t)&&t)if(""===t.filter.gebied)a=t.metadata.zones.filter((function(e){return"municipality"===e.zone_type})).map((function(e){return e.zone_id})).join(",");else if(0===t.filter.zones.length){var r=t.metadata.gebieden.filter((function(e){return e.gm_code===t.filter.gebied})).map((function(e){return e.gm_code}));a=t.metadata.zones.filter((function(e){return"municipality"===e.zone_type&&r.includes(e.municipality)})).map((function(e){return e.zone_id})).join(",")}else a=t.filter.zones;else a="";if(""===a)return void e.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}});e.dispatch({type:"SHOW_LOADING",payload:!0});var i="https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids="+a+"&&include_geojson=true",c={headers:{authorization:"Bearer "+t.authentication.user_data.token}};fetch(i,c).then((function(a){if(!a.ok)return console.error("unable to fetch: %o",a),!1;a.json().then((function(a){var r=n(495),i={type:"FeatureCollection",features:[]},c=void 0;a.zones.forEach((function(e,t){switch(e.geojson.type){case"MultiPolygon":case"Polygon":var n={type:"Feature",geometry:e.geojson};i.features.push(n);var a=r.extent(n);void 0===c?c=a:(c[0]=Math.min(a[0],c[0]),c[1]=Math.min(a[1],c[1]),c[2]=Math.max(a[2],c[2]),c[3]=Math.max(a[3],c[3]));break;default:console.warn("metadataZonesgeodata - don't know how to handle %s",e.type,e)}}));var s={data:i,filter:t.filter.zones,bounds:c};e.dispatch({type:"SET_ZONES_GEODATA",payload:s}),e.dispatch({type:"LAYER_SET_ZONES_EXTENT",payload:c})})).catch((function(e){console.error("unable to decode JSON",e)})).finally((function(){e.dispatch({type:"SHOW_LOADING",payload:!1})}))})).catch((function(e){console.error("unable to fetch zone geodata")}))}catch(s){console.error("Unable to update zones",s)}}(Mn)}),[g,w.zones_loaded,_.gebied,_.zones]),Object(a.useEffect)((function(){"displaymode-park"===k&&(g&&!1===w.zones_loaded||(b&&clearTimeout(b),p(setTimeout((function(e){(gn=Mn)?Sn():console.log("No store yet.")}),250))))}),[g,w.zones_loaded,_]),Object(a.useEffect)((function(){"displaymode-rentals"===k&&(g&&!1===w.zones_loaded||(b&&clearTimeout(b),p(setTimeout((function(e){Dn=Mn,An()}),250))))}),[g,w.zones_loaded,_]);var A=function(){return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(X,{}),Object(V.jsxs)("div",{className:"MobileMenus",children:[Object(V.jsx)("div",{className:"hidden sm:block relative h-full z-10",children:Object(V.jsx)(tn,{isVisible:x,displayMode:k})}),Object(V.jsx)("div",{className:"block sm:hidden relative z-10",children:Object(V.jsx)(an,{isVisible:x,displayMode:k})}),Object(V.jsx)(On,{})]})]})};return Object(V.jsxs)("div",{className:"app ".concat(x||y?"overflow-y-hidden":""),children:[Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",REACT_APP_FUSIONAUTH_SERVER:"https://auth.deelfietsdashboard.nl/api",REACT_APP_FUSIONAUTH_APPLICATION_ID:"bf901170-a2db-4f91-8ca7-24921e961193"}).DEBUG&&Object(V.jsx)("div",{className:"DEBUG fixed bottom-10 right-16 z-100 bg-white opacity-50",style:{zIndex:9999},children:E.displaymode}),Object(V.jsx)(yn,{}),Object(V.jsxs)("div",{className:"gui-layer",children:[Object(V.jsxs)(W.d,{children:[g?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(W.b,{exact:!0,path:"/",children:A()}),Object(V.jsx)(W.b,{exact:!0,path:"/map/park",children:A()}),Object(V.jsx)(W.b,{exact:!0,path:"/map/rentals",children:A()}),Object(V.jsx)(W.b,{exact:!0,path:"/map/zones",children:A()}),Object(V.jsxs)(W.b,{exact:!0,path:"/stats/overview",children:[Object(V.jsx)(Be,{children:Object(V.jsx)(pt,{})}),A()]}),Object(V.jsx)(W.b,{exact:!0,path:"/monitoring",children:Object(V.jsx)(Be,{children:Object(V.jsx)(_t,{})})}),Object(V.jsx)(W.b,{exact:!0,path:"/over",children:Object(V.jsx)(bn,{children:Object(V.jsx)(cn,{})})}),Object(V.jsx)(W.b,{exact:!0,path:"/rondleiding",children:Object(V.jsx)(Be,{forceFullWidth:!0,children:Object(V.jsx)(un,{})})}),Object(V.jsx)(W.b,{exact:!0,path:"/misc",children:Object(V.jsx)(bn,{children:Object(V.jsx)(hn,{})})})]}):null,Object(V.jsx)(W.b,{exact:!0,path:"/over",children:Object(V.jsx)(bn,{children:Object(V.jsx)(cn,{})})}),Object(V.jsx)(W.b,{exact:!0,path:"/rondleiding",children:Object(V.jsx)(Be,{forceFullWidth:!0,children:Object(V.jsx)(un,{})})}),Object(V.jsx)(W.b,{exact:!0,path:"/login",children:Object(V.jsx)(bn,{children:Object(V.jsx)(ht,{})})}),Object(V.jsx)(W.b,{exact:!0,path:"/reset-password/:changePasswordCode",children:Object(V.jsx)(bn,{children:Object(V.jsx)(Ot,{})})}),Object(V.jsx)(W.b,{children:A()})]}),Object(V.jsx)("div",{ref:h,className:"map-layer top-0"},"mapContainer"),Object(V.jsx)(He,{mapContainer:h}),Object(V.jsx)(Z,{pathName:r})]})]})},Rn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.c,In=n(76),Ln=localStorage.getItem("CROWDD_reduxState"),zn=Ln?JSON.parse(Ln):{},Mn=Object(p.d)(H,zn,Rn(Object(p.a)(h.a)));Mn.subscribe((function(){var e=Mn.getState(),t=localStorage.getItem("CROWDD_filterhash")||!1,n=In(JSON.stringify(e.filter));n!==t&&(localStorage.setItem("CROWDD_filterhash",n),Mn.dispatch({type:"CLEAR_VEHICLES",payload:null}),Mn.dispatch({type:"CLEAR_RENTALS_ORIGINS",payload:null}),Mn.dispatch({type:"CLEAR_RENTALS_DESTINATIONS",payload:null}));var a={created:e.created?e.created:j()().unix(),last_update:j()().unix(),authentication:e.authentication,filter:e.filter,layers:e.layers,ui:e.ui};localStorage.setItem("CROWDD_reduxState",JSON.stringify(a))}));var Fn=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(V.jsx)(m.a,{store:Mn,children:Object(V.jsx)(b.a,{children:Object(V.jsx)(Cn,{content:this.props.content})})})}}]),n}(a.Component);var Gn=Fn=function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];var i=m.b.apply(void 0,a)(t);return function(t){return Object(V.jsx)(i,Object(s.a)(Object(s.a)({},t),{},{store:e}))}}(Mn,Fn,(function(e){return{}}),(function(e){return{}})),Pn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,518)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};window.notify=function(e){alert(e)},c.a.render(Object(V.jsx)(r.a.StrictMode,{children:Object(V.jsx)(Gn,{})}),document.getElementById("root")),Pn()}},[[497,1,2]]]);
//# sourceMappingURL=main.1934bd5d.chunk.js.map