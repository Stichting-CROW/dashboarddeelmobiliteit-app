(this["webpackJsonpdashboarddeelmobiliteit-app"]=this["webpackJsonpdashboarddeelmobiliteit-app"]||[]).push([[0],{14:function(e,t,a){},35:function(e,t,a){},44:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(17),o=a.n(r),i=(a(35),a(2)),l=a(24),s=a(25),d=a(30),u=a(29),m=a(3),b=a(13),f=a(16),j=a.n(f),h=a(27),g=a(22),p={aanbieders:[],gebieden:[],zones:[],zones_geodata:[]};var O={data:null};var v={visible:!1,gebied:"",zones:"",datum:(new Date).toISOString(),aanbieders:""};var _={user_data:null};var x=Object(b.b)({metadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AANBIEDERS":var a=e.aanbieders?e.aanbieders:[];return g(a)===g(t.payload)?e:Object(i.a)(Object(i.a)({},e),{},{aanbieders:t.payload});case"SET_GEBIEDEN":var n=e.gebieden?e.gebieden:[];return g(n)===g(t.payload)?e:Object(i.a)(Object(i.a)({},e),{},{gebieden:t.payload});case"SET_ZONES":var c=e.zones?e.zones:[];return g(c)===g(t.payload)?e:(console.log("ACTION: set zones",t.payload),Object(i.a)(Object(i.a)({},e),{},{zones:t.payload}));case"SET_ZONES_GEODATA":var r=e.zones_geodata?e.zones_geodata:[];return g(r)===g(t.payload)?e:Object(i.a)(Object(i.a)({},e),{},{zones_geodata:t.payload});default:return e}},vehicles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VEHICLES":var a=t.payload;return{data:a};case"SET_VEHICLE":var n=t.payload;if(!n.uuid)return{};var c=e.data.filter((function(e){return e.uuid!==n.uuid}));return c.push(n),{data:c};case"CLEAR_VEHICLES":return{data:[]};default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER_VISIBLE":return console.log("reducer filter set filter visible %s",t.payload),Object(i.a)(Object(i.a)({},e),{},{visible:t.payload});case"SET_FILTER_GEBIED":return console.log("reducer filter set gebied to %s",t.payload),Object(i.a)(Object(i.a)({},e),{},{gebied:t.payload,zones:""});case"SET_FILTER_DATUM":return console.log("reducer filter set datum to %s",t.payload),Object(i.a)(Object(i.a)({},e),{},{datum:t.payload});case"ADD_TO_FILTER_ZONES":console.log("add item %s to zones filter %o",t.payload,e);var a=[];if(e.zones)try{a=e.zones.split(",")||[]}catch(o){a=[]}return a.includes(t.payload)||a.push(t.payload),Object(i.a)(Object(i.a)({},e),{},{zones:a.join(",")});case"REMOVE_FROM_FILTER_ZONES":console.log("remove item %s to zones filter",t.payload);var n=e.zones.split(",")||[];return n=n.filter((function(e){return e!==t.payload})),Object(i.a)(Object(i.a)({},e),{},{zones:n.join(",")});case"CLEAR_FILTER_ZONES":return console.log("clear zones filter"),Object(i.a)(Object(i.a)({},e),{},{zones:[]});case"ADD_TO_FILTER_AANBIEDERS":console.log("add item %s to aanbieders filter %o",t.payload,e);var c=[];return e.aanbieders&&(c=e.aanbieders.split(",")||[]),c.includes(t.payload)||c.push(t.payload),Object(i.a)(Object(i.a)({},e),{},{aanbieders:c.join(",")});case"REMOVE_FROM_FILTER_AANBIEDERS":console.log("remove item %s to aanbieders filter",t.payload);var r=e.aanbieders.split(",")||[];return r=r.filter((function(e){return e!==t.payload})),Object(i.a)(Object(i.a)({},e),{},{aanbieders:r.join(",")});case"CLEAR_FILTER_AANBIEDERS":return console.log("clear aanbieders filter"),Object(i.a)(Object(i.a)({},e),{},{aanbieders:[]});default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":var a=t.payload;return{user_data:a};case"CLEAR_USER":return{user_data:null};default:return e}}}),y=a(11),E=a(6),N=(a(44),a(0));function M(e){return Object(N.jsx)("div",Object(i.a)(Object(i.a)({},e),{},{className:"w-16 h-16 flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline",children:Object(N.jsx)("svg",{height:"100%",id:"Layer_1",version:"1.1",viewBox:"0 0 512 512",width:"100%",children:Object(N.jsx)("path",{d:"M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"})})}))}function S(e){return Object(N.jsx)("div",Object(i.a)(Object(i.a)({},e),{},{className:"w-12 h-8 box-border border-2 border-black flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline",children:Object(N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22.13 15.72",children:Object(N.jsx)("path",{d:"M7.16 0a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h2.71a3.7 3.7 0 0 0 7.2 0h10.52a.85.85 0 0 0 0-1.7H10.76A3.7 3.7 0 0 0 7.16 0zm0 5.72a2 2 0 1 1 2-2 2 2 0 0 1-2 2zM15 8.3a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h10.52a3.7 3.7 0 0 0 7.2 0h2.71a.85.85 0 0 0 0-1.7h-2.71A3.7 3.7 0 0 0 15 8.3zm0 5.7a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"})})}))}var G=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return!!e.authentication.user_data})),a=Object(m.d)((function(e){return!!e.filter&&e.filter.visible}));return Object(N.jsx)("div",{className:"box-border p-2 pb-0",children:Object(N.jsxs)("div",{className:"flex bg-white rounded-lg w-full p-4",children:[Object(N.jsx)(y.b,{className:"text-menu",to:"/",children:"Home"}),Object(N.jsx)(y.b,{className:"text-menu",to:"/demo",children:"Demo"}),Object(N.jsx)(y.b,{className:"text-menu",to:"/map/park",children:"Parkeerdata"}),t?Object(N.jsx)("div",{className:"text-menu",children:Object(N.jsx)(S,{onClick:function(t){e({type:"SET_FILTER_VISIBLE",payload:!a})}})}):null,t?Object(N.jsx)(y.b,{className:"text-menu flex-grow text-right",onClick:function(){t&&e({type:"CLEAR_USER",payload:null})},to:"/",children:"Log uit"}):Object(N.jsx)(y.b,{className:"text-menu flex-grow text-right",to:"/login",children:"Log in"})]})})},w=a(5),k=a(21),T=a.n(k),C=(a(50),{"vehicles-heatmap":{id:"vehicles-heatmap",type:"heatmap",source:"vehicles",maxzoom:9,paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}},"vehicles-point":{id:"vehicles-point",type:"circle",source:"vehicles",minzoom:7,paint:{"circle-radius":["interpolate",["linear"],["zoom"],12,1,16,["*",2,["get","amount"]]],"circle-opacity":["interpolate",["linear"],["zoom"],7,0,8,1],"circle-color":["get","color"]}},"vehicles-heatmap-city-level":{id:"vehicles-heatmap-city-level",type:"heatmap",source:"vehicles",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20]}}});function D(e){var t=Object(m.d)((function(e){return e.vehicles?e.vehicles.data:null})),a=e.mapContainer,c=Object(n.useState)(4.4671854),r=Object(w.a)(c,1)[0],o=Object(n.useState)(51.9250836),i=Object(w.a)(o,1)[0],l=Object(n.useState)(15),s=Object(w.a)(l,1)[0],d=Object(n.useState)(0),u=Object(w.a)(d,2),b=u[0],f=u[1],j=Object(n.useRef)(null);return Object(n.useEffect)((function(){j.current||(j.current=new T.a.Map({container:a.current,style:"mapbox://styles/mapbox/streets-v11",accessToken:"pk.eyJ1Ijoic3ZlbjRhbGwiLCJhIjoiY2t2MHR0YnZhMGh3NzJ2cGFuYWI3ZzVnaCJ9.lvPcFN0y5Z25UPt5xB9rFw",center:[r,i],zoom:s}),j.current.addControl(new T.a.NavigationControl,"bottom-right"),j.current.on("load",(function(){f(b+1)})))}),[t,r,i,s,b,a]),Object(n.useEffect)((function(){!function(e){j.current&&j.current.isStyleLoaded()?e&&(j.current.getSource("vehicles")||j.current.addSource("vehicles",{type:"geojson",data:e})):setTimeout((function(){f(b+1)}),250)}(t)}),[t,b]),Object(n.useEffect)((function(){!function(t){j.current&&j.current.isStyleLoaded()?t&&(j.current.getStyle().layers.forEach((function(e){e.id.indexOf("vehicles-")>-1&&j.current.removeLayer(e.id)})),e.layers.forEach((function(t){e.layers.indexOf(t)>=-1&&(j.current.getLayer(t)||j.current.addLayer(C[t]))}))):setTimeout((function(){f(b+1)}),250)}(t)}),[t,b,e.layers]),null}var I=function(e){var t=Object(n.useState)(["vehicles-heatmap","vehicles-point"]),a=Object(w.a)(t,2),c=a[0],r=a[1];return Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsxs)("div",{className:"flex-none",children:["Map type:",Object(N.jsx)("button",{onClick:function(){r(["vehicles-heatmap","vehicles-point"])},children:"Vehicles"})," |",Object(N.jsx)("button",{className:"",onClick:function(){r(["vehicles-heatmap-city-level"])},children:"Heatmap"}),Object(N.jsx)("br",{})]}),Object(N.jsx)("div",{className:"flex-1 bg-red-400",children:Object(N.jsx)(D,{mapContainer:e.mapContainer,layers:c})})]})},L=a.p+"static/media/logo.6ce24c58.svg";var R=function(e,t){var a=Object(n.useRef)();Object(n.useEffect)((function(){a.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t])};a(51);var z=function(){var e="https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space",t=Object(n.useState)(!1),a=Object(w.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(!1),i=Object(w.a)(o,2),l=i[0],s=i[1];return R((function(){fetch(e).then((function(e){e.json().then((function(e){r(e),s(new Date)})).catch((function(e){console.error("unable to decode JSON"),r(!1)}))})).catch((function(t){console.error("fetch error - unable to fetch JSON from %s",e),r(!1)}))}),5e3),Object(N.jsx)("div",{className:"Demo",children:Object(N.jsxs)("header",{className:"Demo-header",children:[Object(N.jsx)("img",{src:L,className:"Demo-logo",alt:"logo"}),Object(N.jsxs)("p",{children:["Got ",Object.keys(c).length," vehicles at ",l?l.toLocaleTimeString():"-/-"]}),Object(N.jsx)("a",{className:"Demo-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},A=function(){var e=Object(n.useState)(""),t=Object(w.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),o=Object(w.a)(r,2),i=o[0],l=o[1],s=Object(n.useState)(!1),d=Object(w.a)(s,2),u=d[0],b=d[1],f=Object(n.useState)(!1),j=Object(w.a)(f,2),h=j[0],g=j[1],p=Object(m.c)(),O=function(e){e.preventDefault();var t={loginId:a,password:i,applicationId:"bf901170-a2db-4f91-8ca7-24921e961193"};fetch("https://auth.deelfietsdashboard.nl/api/login",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){p({type:"SET_USER",payload:e}),g(!0)})).catch((function(e){console.error("Login failed! (%s)",e.message),g(!1)}))},v=function(e){e.preventDefault();var t={loginId:a};return fetch("https://auth.deelfietsdashboard.nl/api/user/forgot-password",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),!0})).catch((function(e){return!1}))};return h?Object(N.jsx)(E.a,{to:"/"}):u?Object(N.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(N.jsxs)("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(N.jsx)("h3",{className:"text-2xl font-bold text-center",children:"Wachtwoord herstellen"}),Object(N.jsxs)("form",{children:[Object(N.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(N.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"Email",name:"emailaddress",required:!0,onChange:function(e){return c(e.target.value)}}),Object(N.jsxs)("div",{className:"flex items-baseline justify-between",children:[Object(N.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:v,children:"Herstel"}),Object(N.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){return b(!1)},children:"Annuleer"})]})]})]})}):Object(N.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(N.jsxs)("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(N.jsx)("h3",{className:"text-2xl font-bold text-center",children:"Login"}),Object(N.jsxs)("form",{children:[Object(N.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(N.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"email",name:"emailaddress",required:!0,onChange:function(e){return c(e.target.value)}}),Object(N.jsx)("label",{className:"block",htmlFor:"password",children:"Wachtwoord"}),Object(N.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",type:"password",placeholder:"Wachtwoord",name:"password",required:!0,onChange:function(e){return l(e.target.value)}}),Object(N.jsxs)("div",{className:"flex items-baseline justify-between",children:[Object(N.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:O,children:"Login"}),Object(N.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){return b(!0)},children:"Wachtwoord vergeten"})]})]})]})})};a(14);var F=function(e){var t=e.closeFunction,a=e.children;return Object(N.jsx)("div",{className:"modalbox-bg",onClick:function(){return t(!1)},children:Object(N.jsxs)("div",{className:"modalbox",onClick:function(e){return e.stopPropagation()},children:[Object(N.jsx)("div",{className:"absolute absolute top-0 right-0",children:Object(N.jsx)(M,{onClick:function(){return t(!1)}})}),Object(N.jsx)("div",{className:"grid-cols-4",children:a})]})})};var B=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.gebieden?e.metadata.gebieden:[]})),a=Object(m.d)((function(e){return e.filter?e.filter.gebied:""})),c=Object(n.useState)(!1),r=Object(w.a)(c,2),o=r[0],i=r[1],l=function(t){e({type:"SET_FILTER_GEBIED",payload:t})},s=t.find((function(e){return e.gm_code===a}))||"";return Object(N.jsxs)("div",{className:"filter-item",onClick:function(e){i(!o)},children:[Object(N.jsx)("div",{className:"filter-title",children:"Gebieden"}),Object(N.jsx)("div",{className:"filter-value",children:s.name}),o?function(e){return Object(N.jsx)(F,{closeFunction:i,children:Object(N.jsxs)("div",{className:"filter-form-selectie",children:[Object(N.jsx)("div",{className:"filter-form-title",children:"Selecteer Gebied"}),Object(N.jsx)("div",{className:"filter-form-values",children:e.map((function(e){return a===e.gm_code?Object(N.jsx)("div",{className:"form-item-selected form-item",onClick:function(t){i(!1),l(e.gm_code)},children:e.name},"item-"+e.gm_code):Object(N.jsx)("div",{className:"form-item",onClick:function(t){i(!1),l(e.gm_code)},children:e.name},"item-"+e.gm_code)}))})]})})}(t):null]})};var H=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.filter?e.filter.datum:(new Date).toISOString()})),a=Object(n.useState)(!1),c=Object(w.a)(a,2),r=c[0],o=c[1],i=function(t){t.preventDefault(),t.target.validity.valid&&(l=new Date(t.target.value).toISOString(),e({type:"SET_FILTER_DATUM",payload:l}))},l=new Date(t).toLocaleString();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"filter-item",onClick:function(e){o(!r)},children:[Object(N.jsx)("div",{className:"filter-title",children:"Datum"}),Object(N.jsx)("div",{className:"filter-value",children:l})]}),r?function(){var e=function(e){var t=new Date(e),a=function(e){return(e<10?"0":"")+e};return t.getFullYear()+"-"+a(t.getMonth()+1)+"-"+a(t.getDate())+"T"+a(t.getHours())+":"+a(t.getMinutes())+":"+a(t.getSeconds())}(t);return Object(N.jsx)(F,{className:"min-width-48",closeFunction:o,children:Object(N.jsxs)("div",{className:"filter-form-selectie",children:[Object(N.jsx)("div",{className:"filter-form-title",children:"Selecteer Datum"}),Object(N.jsxs)("form",{className:"h-12 w-auto flex flex-row border-solid border-4 border-light-blue-500 box-border",children:[Object(N.jsx)("input",{className:"bg-transparent flex-2 flex-grow",type:"datetime-local",value:e,onChange:i}),Object(N.jsx)("div",{className:"flex-2"})]}),Object(N.jsx)("div",{className:"flex-none closebutton text-center mt-4",onClick:function(e){return o(!1)},children:"OK"})]})})}():null]})};var Z=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.aanbieders?e.metadata.aanbieders:[]})),a=Object(m.d)((function(e){return e.filter?e.filter.aanbieders:""})),c=Object(n.useState)(!1),r=Object(w.a)(c,2),o=r[0],i=r[1],l="";try{var s=a.split(",").length;s>1&&s<t.length?l=a.split(",").length+" aanbieders":1===s&&(l=a)}catch(d){l=""}return""===l&&(l="Alle Aanbieders"),Object(N.jsxs)("div",{className:"filter-item",onClick:function(e){i(!o)},children:[Object(N.jsx)("div",{className:"filter-title",children:"Aanbieders"}),Object(N.jsx)("div",{className:"filter-value",children:l}),o?function(t){return Object(N.jsx)(F,{closeFunction:i,children:Object(N.jsxs)("div",{className:"filter-form-selectie",children:[Object(N.jsx)("div",{className:"filter-form-title",children:"Selecteer Aanbieders"}),Object(N.jsx)("div",{className:"filter-form-values",children:t.map((function(t,n){return a.includes(t.system_id)?Object(N.jsx)("div",{className:"form-item-selected form-item",onClick:function(a){var n;a.stopPropagation(),n=t.system_id,e({type:"REMOVE_FROM_FILTER_AANBIEDERS",payload:n})},children:t.name},"item-"+t.system_id):Object(N.jsx)("div",{className:"form-item",onClick:function(a){var n;a.stopPropagation(),n=t.system_id,e({type:"ADD_TO_FILTER_AANBIEDERS",payload:n})},children:t.name},"item-"+t.system_id)}))})]})})}(t):null]})};var J=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.zones?e.metadata.zones:[]})),a=Object(m.d)((function(e){return e.filter?e.filter.zones:0})),c=Object(n.useState)(!1),r=Object(w.a)(c,2),o=r[0],i=r[1],l="";try{var s=a.split(",").length;s>1&&s<t.length?l=a.split(",").length+" zones":1===s&&(l=a)}catch(d){l=""}return""===l&&(l="Alle Zones"),Object(N.jsxs)("div",{className:"filter-item",onClick:function(e){i(!o)},children:[Object(N.jsx)("div",{className:"filter-title",children:"Zones"}),Object(N.jsx)("div",{className:"filter-value",children:l}),o?function(t){return Object(N.jsx)(F,{closeFunction:i,children:Object(N.jsxs)("div",{className:"filter-form-selectie",children:[Object(N.jsx)("div",{className:"filter-form-title",children:"Selecteer Zone"}),Object(N.jsx)("div",{className:"filter-form-values",children:t.map((function(t){return a.includes(t.zone_id)?Object(N.jsx)("div",{className:"form-item-selected form-item",onClick:function(a){var n;a.stopPropagation(),n=t.zone_id,e({type:"REMOVE_FROM_FILTER_ZONES",payload:n})},children:t.name},"item-"+t.zone_id):Object(N.jsx)("div",{className:"form-item",onClick:function(a){var n;a.stopPropagation(),n=t.zone_id,e({type:"ADD_TO_FILTER_ZONES",payload:n})},children:t.name},"item-"+t.zone_id)}))})]})})}(t):null]})};var V=function(){return Object(N.jsx)("div",{className:"box-border p-2 pb-0",children:Object(N.jsxs)("div",{className:"flex bg-gray-400 rounded-lg p-2 w-full grid grid-cols-4 gap-4",children:[Object(N.jsx)(B,{}),Object(N.jsx)(J,{}),Object(N.jsx)(H,{}),Object(N.jsx)(Z,{})]})})},P=[{value:"cykl",name:"Cykl"},{value:"flickbike",name:"Flickbike"},{value:"donkey",name:"Donkey"},{value:"mobike",name:"Mobike"},{value:"htm",name:"HTM"},{value:"gosharing",name:"GO"},{value:"check",name:"CHECK"},{value:"felyx",name:"Felyx"},{value:"deelfietsnederland",name:"Deelfiets"},{value:"keobike",name:"Keobike"},{value:"lime",name:"Lime"},{value:"baqme",name:"BAQME"},{value:"cargoroo",name:"Cargoroo"},{value:"uwdeelfiets",name:"uwdeelfiets"},{value:"hely",name:"Hely"}],U=[{gm_code:"",name:"Alle Gebieden"},{gm_code:"GM0518",name:"'s-Gravenhage"},{gm_code:"GM0796",name:"'s-Hertogenbosch"},{gm_code:"GM0613",name:"Albrandswaard"},{gm_code:"GM0141",name:"Almelo"},{gm_code:"GM0034",name:"Almere"},{gm_code:"GM0484",name:"Alphen aan den Rijn"},{gm_code:"GM0307",name:"Amersfoort"},{gm_code:"GM0362",name:"Amstelveen"},{gm_code:"GM0363",name:"Amsterdam"},{gm_code:"GM0200",name:"Apeldoorn"},{gm_code:"GM0202",name:"Arnhem"},{gm_code:"GM0106",name:"Assen"},{gm_code:"GM0489",name:"Barendrecht"},{gm_code:"GM0203",name:"Barneveld"},{gm_code:"GM0373",name:"Bergen (NH"},{gm_code:"GM0753",name:"Best"},{gm_code:"GM0375",name:"Beverwijk"},{gm_code:"GM0377",name:"Bloemendaal"},{gm_code:"GM0758",name:"Breda"},{gm_code:"GM0312",name:"Bunnik"},{gm_code:"GM0313",name:"Bunschoten"},{gm_code:"GM0502",name:"Capelle aan den IJssel"},{gm_code:"GM0310",name:"De Bilt"},{gm_code:"GM0736",name:"De Ronde Venen"},{gm_code:"GM0503",name:"Delft"},{gm_code:"GM0150",name:"Deventer"},{gm_code:"GM0384",name:"Diemen"},{gm_code:"GM0505",name:"Dordrecht"},{gm_code:"GM0228",name:"Ede"},{gm_code:"GM0772",name:"Eindhoven"},{gm_code:"GM0153",name:"Enschede"},{gm_code:"GM0232",name:"Epe"},{gm_code:"GM1771",name:"Geldrop-Mierlo"},{gm_code:"GM1942",name:"Gooise Meren"},{gm_code:"GM0014",name:"Groningen"},{gm_code:"GM0392",name:"Haarlem"},{gm_code:"GM0394",name:"Haarlemmermeer"},{gm_code:"GM0243",name:"Harderwijk"},{gm_code:"GM0246",name:"Heerde"},{gm_code:"GM0794",name:"Helmond"},{gm_code:"GM0164",name:"Hengelo"},{gm_code:"GM0798",name:"Hilvarenbeek"},{gm_code:"GM0402",name:"Hilversum"},{gm_code:"GM0353",name:"IJsselstein"},{gm_code:"GM0166",name:"Kampen"},{gm_code:"GM0542",name:"Krimpen aan den IJssel"},{gm_code:"GM1621",name:"Lansingerland"},{gm_code:"GM0080",name:"Leeuwarden"},{gm_code:"GM1916",name:"Leidschendam-Voorburg"},{gm_code:"GM0327",name:"Leusden"},{gm_code:"GM0809",name:"Loon op Zand"},{gm_code:"GM0556",name:"Maassluis"},{gm_code:"GM1842",name:"Midden-Delfland"},{gm_code:"GM1952",name:"Midden-Groningen"},{gm_code:"GM0356",name:"Nieuwegein"},{gm_code:"GM0267",name:"Nijkerk"},{gm_code:"GM0268",name:"Nijmegen"},{gm_code:"GM1930",name:"Nissewaard"},{gm_code:"GM0820",name:"Nuenen, Gerwen en Nederwetten"},{gm_code:"GM0302",name:"Nunspeet"},{gm_code:"GM0826",name:"Oosterhout"},{gm_code:"GM0431",name:"Oostzaan"},{gm_code:"GM1926",name:"Pijnacker-Nootdorp"},{gm_code:"GM0273",name:"Putten"},{gm_code:"GM0597",name:"Ridderkerk"},{gm_code:"GM0603",name:"Rijswijk"},{gm_code:"GM1674",name:"Roosendaal"},{gm_code:"GM0599",name:"Rotterdam"},{gm_code:"GM0606",name:"Schiedam"},{gm_code:"GM0848",name:"Son en Breugel"},{gm_code:"GM0855",name:"Tilburg"},{gm_code:"GM1730",name:"Tynaarlo"},{gm_code:"GM0344",name:"Utrecht"},{gm_code:"GM1581",name:"Utrechtse Heuvelrug"},{gm_code:"GM0861",name:"Veldhoven"},{gm_code:"GM0622",name:"Vlaardingen"},{gm_code:"GM0865",name:"Vught"},{gm_code:"GM0866",name:"Waalre"},{gm_code:"GM0867",name:"Waalwijk"},{gm_code:"GM0289",name:"Wageningen"},{gm_code:"GM0629",name:"Wassenaar"},{gm_code:"GM1960",name:"West Betuwe"},{gm_code:"GM1783",name:"Westland"},{gm_code:"GM0637",name:"Zoetermeer"},{gm_code:"GM0642",name:"Zwijndrecht"},{gm_code:"GM0193",name:"Zwolle"}],W=void 0,K=void 0,q=function e(){var t=5e3;try{if(void 0===W)return console.log("no redux state available yet - skipping metadata update"),!1;var a=W.getState();if(function(e){return!!e.authentication.user_data}(a)){var n={headers:{authorization:"Bearer "+a.authentication.user_data.token}};return fetch("https://api.deelfietsdashboard.nl/dashboard-api/menu/acl",n).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){W.dispatch({type:"SET_GEBIEDEN",payload:e.municipalities}),W.dispatch({type:"SET_AANBIEDERS",payload:e.operators})}))})).catch((function(e){console.error("unable to decode JSON")})),!0}W.dispatch({type:"SET_GEBIEDEN",payload:U}),W.dispatch({type:"SET_AANBIEDERS",payload:P})}catch(c){return console.error("Unable to update gebieden",c),t=5e3,!1}finally{K=setTimeout(e,t)}},Y=function(){void 0!==K&&clearTimeout(K),q()};Y();var X=void 0,Q=void 0,$=function e(){var t=5e3;try{if(void 0===X)return console.log("no redux state available yet - skipping metadata update"),!1;var a=X.getState();if(function(e){return!!e.authentication.user_data}(a)&&""!==a.filter.gebied){var n="https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code="+a.filter.gebied,c={headers:{authorization:"Bearer "+a.authentication.user_data.token}};fetch(n,c).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){X.dispatch({type:"SET_ZONES",payload:e.zones})}))})).catch((function(e){console.error("unable to decode JSON")}))}else X.dispatch({type:"SET_ZONES_LIST",payload:[]}),X.dispatch({type:"SET_ZONES_GEODATA",payload:[]})}catch(r){console.error("Unable to update zones",r),t=5e3}finally{Q=setTimeout(e,t)}},ee=function(){void 0!==Q&&clearTimeout(Q),$()};ee();a(52);var te=function(){var e=Object(n.useRef)(null),t=Object(m.c)(),c=Object(m.d)((function(e){return!!e.authentication.user_data})),r=Object(m.d)((function(e){return e.authentication.user_data})),o=Object(m.d)((function(e){return c&&e.filter?e.filter:null})),i=Object(m.d)((function(e){return!!e.filter&&e.filter.visible})),l="https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space",s={};if(null!==o){var d=""!==o.aanbieders?"&operators="+o.aanbieders:"",u=(new Date).toISOString().replace(/.\d+Z$/g,"Z");l="https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp="+u+d,s={headers:{authorization:"Bearer "+r.token}}}var b=function(){fetch(l,s).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){c&&(e=e.park_events);var n={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},r=a(22),o=j()();e.forEach((function(e){var t,a=c?e.start_time:e.in_public_space_since,i=o.diff(j()(a),"minutes"),l=(t=i)<=60?"#38ff71":t<=1440?"#008c28":t<=5760?"#fff700":"#cc0000",s={type:"Feature",properties:{id:r(e.location.latitude+e.location.longitude),system_id:e.system_id,in_public_space_since:a,color:l},geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude,0]}};n.features.push(s)})),t({type:"SET_VEHICLES",payload:n})})).catch((function(e){console.error("unable to decode JSON")}))})).catch((function(e){console.error("fetch error - unable to fetch JSON from %s",l)}))};return Object(n.useEffect)((function(){W=ce,Y()})),Object(n.useEffect)((function(){var e;e=ce,console.log("initUpdateZones"),X=e,ee()})),R((function(){b()}),3e4),Object(n.useEffect)((function(e){b()})),Object(N.jsx)(y.a,{children:Object(N.jsxs)("div",{className:"app",children:[Object(N.jsxs)("div",{className:"gui-layer",children:[Object(N.jsx)(G,{}),c&&i?Object(N.jsx)(V,{}):null,Object(N.jsxs)(E.d,{children:[Object(N.jsx)(E.b,{path:"/demo",children:Object(N.jsx)(z,{})}),Object(N.jsx)(E.b,{path:"/login",children:Object(N.jsx)(A,{})}),Object(N.jsx)(E.b,{path:"/",children:Object(N.jsx)(I,{mapContainer:e})})]})]}),Object(N.jsx)("div",{ref:e,className:"map-layer"})]})})},ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b.c,ne=localStorage.getItem("CROWDD_reduxState")?JSON.parse(localStorage.getItem("CROWDD_reduxState")):{},ce=Object(b.d)(x,ne,ae(Object(b.a)(h.a)));ce.subscribe((function(){var e=ce.getState(),t={lastUpdate:j()().unix(),authentication:e.authentication,filter:e.filter};localStorage.setItem("CROWDD_reduxState",JSON.stringify(t))}));var re=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return Object(N.jsx)(m.a,{store:ce,children:Object(N.jsx)(te,{content:this.props.content})})}}]),a}(n.Component);var oe=re=function(e,t){for(var a=arguments.length,n=new Array(a>2?a-2:0),c=2;c<a;c++)n[c-2]=arguments[c];var r=m.b.apply(void 0,n)(t);return function(t){return Object(N.jsx)(r,Object(i.a)(Object(i.a)({},t),{},{store:e}))}}(ce,re,(function(e){return{}}),(function(e){return{}})),ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,54)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),c(e),r(e),o(e)}))};o.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(oe,{})}),document.getElementById("root")),ie()}},[[53,1,2]]]);
//# sourceMappingURL=main.97dc9fc3.chunk.js.map