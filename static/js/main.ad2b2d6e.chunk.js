(this["webpackJsonpdashboarddeelmobiliteit-app"]=this["webpackJsonpdashboarddeelmobiliteit-app"]||[]).push([[0],{31:function(e,t,a){},53:function(e,t,a){},62:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),o=(a(53),a(4)),l=a(41),s=a(42),d=a(48),u=a(47),m=a(5),f=a(20),b=a(12),j=a.n(b),h=a(44);var p=a(21),v={aanbieders:[],gebieden:[],zones:[],vehicle_types:[]},g=function(e){for(var t=[],a=Math.trunc(360/(e+1)),n=0;n<e;n++){var r=n*a,c=n%2===0?35:65,i=n%2===1?40:60;t.push("hsla(".concat(r,",").concat(i,"%,").concat(c,"%,").concat(1,")"))}return t};var O={data:null};var x={visible:!1,gebied:"",zones:"",datum:(new Date).toISOString(),intervalstart:(new Date).toISOString(),intervalend:(new Date).toISOString(),aanbiedersexclude:"",markersexclude:""};var _={user_data:null};var y=a(21),E={data:[],filter:""};var S=Object(f.b)({last_update:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LAST_UPDATE":return t.payload;default:return e}},metadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AANBIEDERS":var a=e.aanbieders?e.aanbieders:[],n=g(t.payload.length),r=t.payload.map((function(e,t){return Object.assign(e,{color:n[t]})}));return p(a)===p(r)?e:Object(o.a)(Object(o.a)({},e),{},{aanbieders:r});case"SET_GEBIEDEN":var c=e.gebieden?e.gebieden:[];return p(c)===p(t.payload)?e:Object(o.a)(Object(o.a)({},e),{},{gebieden:t.payload});case"SET_ZONES":var i=e.zones?e.zones:[];return p(i)===p(t.payload)?e:Object(o.a)(Object(o.a)({},e),{},{zones:t.payload});case"SET_VEHICLE_TYPES":var l=e.vehicle_types?e.vehicle_types:[];return p(l)===p(t.payload)?e:Object(o.a)(Object(o.a)({},e),{},{vehicle_types:t.payload});default:return e}},vehicles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VEHICLES":var a=t.payload;return{data:a};case"SET_VEHICLE":var n=t.payload;if(!n.uuid)return{};var r=e.data.filter((function(e){return e.uuid!==n.uuid}));return r.push(n),{data:r};case"CLEAR_VEHICLES":return{data:[]};default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER_VISIBLE":return console.log("reducer filter set filter visible %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{visible:t.payload});case"SET_FILTER_GEBIED":return console.log("reducer filter set gebied to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{gebied:t.payload,zones:""});case"SET_FILTER_DATUM":return console.log("reducer filter set datum to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{datum:t.payload});case"SET_FILTER_INTERVAL_START":return console.log("reducer filter set interval start to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{intervalstart:t.payload});case"SET_FILTER_INTERVAL_END":return console.log("reducer filter set interval end to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{intervalend:t.payload});case"ADD_TO_FILTER_ZONES":console.log("add item %s to zones filter %o",t.payload,e);var a=[];if(e.zones)try{a=e.zones.split(",")||[]}catch(s){a=[]}return a.includes(t.payload)||a.push(t.payload),Object(o.a)(Object(o.a)({},e),{},{zones:a.join(",")});case"REMOVE_FROM_FILTER_ZONES":console.log("remove item %o from zones filter",t.payload);var n=e.zones.split(",")||[];return n=n.filter((function(e){return e.toString()!==t.payload.toString()})),Object(o.a)(Object(o.a)({},e),{},{zones:n.join(",")});case"CLEAR_FILTER_ZONES":return console.log("clear zones filter"),Object(o.a)(Object(o.a)({},e),{},{zones:[]});case"ADD_TO_FILTER_MARKERS_EXCLUDE":var r=[];try{if(console.log("add item %s to markersexclude filter %o",t.payload,e),e.markersexclude)try{r=e.markersexclude.split(",")||[]}catch(s){r=[]}r.includes(t.payload)||r.push(t.payload)}catch(s){r=[]}return Object(o.a)(Object(o.a)({},e),{},{markersexclude:r.join(",")});case"REMOVE_FROM_FILTER_MARKERS_EXCLUDE":console.log("remove item %o from markersexclude filter",t.payload);var c=[];try{c=(c=e.markersexclude.split(",")||[]).filter((function(e){return e.toString()!==t.payload.toString()}))}catch(s){c=[]}return Object(o.a)(Object(o.a)({},e),{},{markersexclude:c.join(",")});case"CLEAR_FILTER_MARKERS_EXCLUDE":return console.log("clear markersexclude filter"),Object(o.a)(Object(o.a)({},e),{},{markersexclude:[]});case"ADD_TO_FILTER_AANBIEDERS_EXCLUDE":console.log("add item %s to aanbiedersexclude filter %o",t.payload,e);var i=[];try{e.aanbiedersexclude&&(i=e.aanbiedersexclude.split(",")||[]),i.includes(t.payload)||i.push(t.payload)}catch(s){i=[]}return Object(o.a)(Object(o.a)({},e),{},{aanbiedersexclude:i.join(",")});case"REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE":console.log("remove item %s from aanbiedersexclude filter",t.payload);var l=[];try{l=(l=e.aanbiedersexclude.split(",")||[]).filter((function(e){return e!==t.payload}))}catch(s){l=[]}return Object(o.a)(Object(o.a)({},e),{},{aanbiedersexclude:l.join(",")});case"CLEAR_FILTER_AANBIEDERS_EXCLUDE":return console.log("clear aanbiedersexclude filter"),Object(o.a)(Object(o.a)({},e),{},{aanbiedersexclude:""});default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":var a=t.payload;return{user_data:a};case"CLEAR_USER":return{user_data:null};default:return e}},zones_geodata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ZONES_GEODATA":var a=e.data?e.data:[];return y(a)===y(t.payload.data)&&e.filter===t.payload.filter?e:Object(o.a)(Object(o.a)({},e),{},{data:t.payload.data,filter:t.payload.filter});default:return e}}}),N=a(15),k=a(8),w=a(6),M=(a(62),a(2));function T(e){return Object(M.jsx)("div",Object(o.a)(Object(o.a)({},e),{},{className:"w-16 h-16 flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline",children:Object(M.jsx)("svg",{height:"100%",id:"Layer_1",version:"1.1",viewBox:"0 0 512 512",width:"100%",children:Object(M.jsx)("path",{d:"M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"})})}))}function z(e){return Object(M.jsx)("div",Object(o.a)(Object(o.a)({},e),{},{className:"w-12 h-8 box-border border-2 border-black flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline",children:Object(M.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22.13 15.72",children:Object(M.jsx)("path",{d:"M7.16 0a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h2.71a3.7 3.7 0 0 0 7.2 0h10.52a.85.85 0 0 0 0-1.7H10.76A3.7 3.7 0 0 0 7.16 0zm0 5.72a2 2 0 1 1 2-2 2 2 0 0 1-2 2zM15 8.3a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h10.52a3.7 3.7 0 0 0 7.2 0h2.71a.85.85 0 0 0 0-1.7h-2.71A3.7 3.7 0 0 0 15 8.3zm0 5.7a2 2 0 1 1 2-2 2 2 0 0 1-2 2z"})})}))}var D=function(){var e=Object(n.useState)(document.location.pathname),t=Object(w.a)(e,2),a=t[0],c=t[1],i=Object(m.c)(),o=(j()(j()().format("2021-11-06 06:00")),Object(m.d)((function(e){return!!e.authentication.user_data}))),l=Object(m.d)((function(e){return!!e.filter&&e.filter.visible})),s=Object(k.g)();return r.a.useEffect((function(){c(document.location.pathname)}),[s]),Object(M.jsx)("div",{className:"Menu w-full fixed b-0",children:Object(M.jsxs)("div",{className:"Menu-inner px-4 py-3 flex m-4 mb-1 mx-auto bg-white box-border rounded-3xl w-full shadow-lg",children:[Object(M.jsx)(N.b,{className:"text-menu ".concat("/"===a||"/map/park"===a?"is-active":""),to:"/map/park",children:"Parkeerdata"}),Object(M.jsx)(N.b,{className:"text-menu ".concat("/map/trip"===a?"is-active":""),to:"/map/trip",children:"Tripdata"}),o?Object(M.jsx)("div",{className:"text-menu",children:Object(M.jsx)(z,{onClick:function(e){i({type:"SET_FILTER_VISIBLE",payload:!l})}})}):null,o?Object(M.jsx)(N.b,{className:"text-menu flex-grow text-right",onClick:function(){o&&i({type:"CLEAR_USER",payload:null})},to:"/",children:"Log uit"}):Object(M.jsx)(N.b,{className:"text-menu flex-grow text-right",to:"/login",children:"Log in"}),o&&Object(M.jsx)(N.b,{className:"text-menu ".concat("/monitoring"===a?"is-active":""),to:"/monitoring",children:"Monitor"})]})})},G=a(28),C=a.n(G),L=(a(68),{"vehicles-heatmap":{id:"vehicles-heatmap",type:"heatmap",source:"vehicles",maxzoom:9,paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}},"vehicles-point":{id:"vehicles-point",type:"circle",source:"vehicles",minzoom:7,paint:{"circle-radius":["interpolate",["linear"],["zoom"],12,2,16,["*",2,["get","amount"]]],"circle-opacity":["interpolate",["linear"],["zoom"],7,0,8,1],"circle-color":["get","color"]}},"vehicles-clusters":{id:"vehicles-clusters",type:"circle",source:"vehicles-clusters",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#ffd837",100,"#48e248",750,"#1fa024"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}},"vehicles-clusters-count":{id:"vehicles-clusters-count",type:"symbol",source:"vehicles-clusters",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}},"vehicles-clusters-point":{id:"vehicles-clusters-point",type:"circle",source:"vehicles-clusters",filter:["!",["has","point_count"]],paint:{"circle-color":"#11b4da","circle-radius":4,"circle-stroke-width":1,"circle-stroke-color":"#fff"}},"vehicles-heatmap-city-level":{id:"vehicles-heatmap-city-level",type:"heatmap",source:"vehicles",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,1e-4,10,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,.0025,5,.005,7.5,.01,10,.05,12,.075,15,.1,20,1],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.25,"#ffd837",.5,"#fe862e",.75,"#fd3e48",1,"#9a231f"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,10,10,12,12,20,15,40,20,60,30,100,40,100],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,.8]}},"zones-geodata":{id:"zones-geodata",type:"fill",source:"zones-geodata",paint:{"fill-color":"#1010e0","fill-opacity":.6}}}),I={vehicles:{type:"geojson"},"vehicles-clusters":{type:"geojson",cluster:!0,clusterMaxZoom:14,clusterRadius:50}},R=a(21);function A(e){var t=Object(m.d)((function(e){return e.vehicles||null})),a=Object(m.d)((function(e){return e&&e.zones_geodata?e.zones_geodata:null})),r=e.mapContainer,c=Object(n.useState)(4.4671854),i=Object(w.a)(c,1)[0],o=Object(n.useState)(51.9250836),l=Object(w.a)(o,1)[0],s=Object(n.useState)(15),d=Object(w.a)(s,1)[0],u=Object(n.useState)(0),f=Object(w.a)(u,2),b=f[0],j=f[1],h=Object(n.useState)(""),p=Object(w.a)(h,2),v=p[0],g=p[1],O=Object(n.useState)([]),x=Object(w.a)(O,2),_=x[0],y=x[1],E=Object(n.useRef)(null);Object(n.useEffect)((function(){E.current||(E.current=new C.a.Map({container:r.current,style:"mapbox://styles/nine3030/ckv9ni7rj0xwq15qsekqwnlz5",accessToken:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",center:[i,l],zoom:d}),E.current.addControl(new C.a.NavigationControl({showCompass:!1}),"bottom-right"),E.current.addControl(new C.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"bottom-right"),E.current.on("load",(function(){j(b+1)})),E.current.dragRotate.disable(),E.current.touchZoomRotate.disableRotation())}),[t,a,i,l,d,b,r]);var S=function(e,t){if(E.current&&E.current.isStyleLoaded()){if(t){var a=E.current.getSource(e),n=t.data&&t.data.features?R(t.data.features):R("No data yet");if(a){if(!_||_[e]!==n){var r=_;r[e]=n,y(r),E.current.getSource(e).setData(t.data)}}else if(t){var c=_;c[e]=n,y(c);var i=Object.assign({},{type:"geojson",data:t.data},I[e]?I[e]:{});E.current.addSource(e,i)}}}else setTimeout((function(){j(b+1)}),250)};return Object(n.useEffect)((function(){S("vehicles",t),S("zones-geodata",a),S("vehicles-clusters",t)}),[t?t.data?t.data.features:t.data:t,a,v,b,e.activeSource]),Object(n.useEffect)((function(){!function(t,a){E.current&&E.current.isStyleLoaded()?t&&a&&(E.current.getStyle().layers.forEach((function(e){e.id.indexOf("vehicles-")>-1&&E.current.removeLayer(e.id),e.id.indexOf("zones-geodata")>-1&&(E.current.removeLayer(e.id),g(""))})),e.layers.forEach((function(t){e.layers.indexOf(t)>=-1&&(E.current.getLayer(t)||E.current.addLayer(L[t]))}))):setTimeout((function(){j(b+1)}),250)}(t,a)}),[t,a,b,e.layers]),null}a(69);function F(e){var t=e.setLayers,a=e.setActiveSource;return Object(M.jsx)("div",{className:"SelectLayer absolute right-0",children:Object(M.jsxs)("div",{className:"SelectLayer-inner p-2",children:[Object(M.jsx)("div",{"data-type":"vehicles",className:" layer relative inline-block m-2",onClick:function(){t(["vehicles-point","zones-geodata"]),a("vehicles")},children:Object(M.jsx)("span",{className:" layer-title block absolute bottom-0 left-0 w-full h-6 flex flex-col justify-center ",children:"Vehicles"})}),Object(M.jsx)("div",{"data-type":"heat-map",className:" layer relative inline-block m-2",onClick:function(){t(["vehicles-heatmap-city-level","zones-geodata"]),a("vehicles")},children:Object(M.jsx)("span",{className:" layer-title block absolute bottom-0 left-0 w-full h-6 flex flex-col justify-center ",children:"Heat map"})}),Object(M.jsx)("div",{"data-type":"pointers",className:"layer relative inline-block m-2",onClick:function(){t(["vehicles-clusters","vehicles-clusters-count","vehicles-clusters-point","zones-geodata"]),a("vehicles-clusters")},children:Object(M.jsx)("span",{className:" layer-title block absolute bottom-0 left-0 w-full h-6 flex flex-col justify-center ",children:"Clusters"})})]})})}var B=function(e){var t=Object(n.useState)(["vehicles-heatmap","vehicles-point","zones-geodata"]),a=Object(w.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)("vehicles"),o=Object(w.a)(i,2),l=o[0],s=o[1];return Object(M.jsxs)("div",{className:"flex flex-col",children:[Object(M.jsx)(F,{setLayers:c,setActiveSource:s}),Object(M.jsx)("div",{className:"flex-1 bg-red-400",children:Object(M.jsx)(A,{mapContainer:e.mapContainer,layers:r,activeSource:l})})]})},Z=function(){var e=Object(n.useState)(""),t=Object(w.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),i=Object(w.a)(c,2),o=i[0],l=i[1],s=Object(n.useState)(!1),d=Object(w.a)(s,2),u=d[0],f=d[1],b=Object(n.useState)(null),j=Object(w.a)(b,2),h=j[0],p=j[1],v=Object(n.useState)(!1),g=Object(w.a)(v,2),O=g[0],x=g[1],_=Object(m.c)(),y=function(e){e.preventDefault(),p(null);var t={loginId:a,password:o,applicationId:"bf901170-a2db-4f91-8ca7-24921e961193"};fetch("https://auth.deelfietsdashboard.nl/api/login",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){_({type:"SET_USER",payload:e}),x(!0)})).catch((function(e){console.error("Login failed! (%s)",e.message),p("Login mislukt. Heb je het juiste e-mailadres en wachtwoord ingevuld?"),x(!1)}))},E=function(e){e.preventDefault(),p(null);var t={loginId:a};return fetch("https://auth.deelfietsdashboard.nl/api/user/forgot-password",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),!0})).catch((function(e){return console.log(e),p("Dank voor je verzoek voor een wachtwoord-resetmail. Het opvragen van je wachtwoord werkt nog niet in dit nieuwe Dashboard. Stuur alsjeblieft een mail aan info@deelfietsdashboard.nl met je e-mailadres, dan zorgen wij dat je een wachtwoord-herstel-link ontvangt. Dank!"),!1}))};return O?Object(M.jsx)(k.a,{to:"/"}):u?Object(M.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(M.jsxs)("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(M.jsx)("h3",{className:"text-2xl font-bold text-center",children:"Wachtwoord herstellen"}),Object(M.jsxs)("form",{children:[Object(M.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(M.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"Email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value)}}),h&&Object(M.jsx)("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:Object(M.jsx)("span",{className:"block sm:inline",children:h})}),Object(M.jsxs)("div",{className:"flex items-baseline justify-between",children:[Object(M.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:E,children:"Herstel"}),Object(M.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){p(null),f(!1)},children:"Annuleer"})]})]})]})}):Object(M.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(M.jsxs)("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(M.jsx)("h3",{className:"text-2xl font-bold text-center",children:"Login"}),Object(M.jsxs)("form",{children:[Object(M.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(M.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value)}}),Object(M.jsx)("label",{className:"mt-4 block",htmlFor:"password",children:"Wachtwoord"}),Object(M.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",type:"password",placeholder:"Wachtwoord",name:"password",required:!0,onChange:function(e){return l(e.target.value)}}),h&&Object(M.jsx)("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:Object(M.jsx)("span",{className:"block sm:inline",children:h})}),Object(M.jsxs)("div",{className:"flex items-baseline justify-between",children:[Object(M.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:y,children:"Login"}),Object(M.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){return f(!0)},children:"Wachtwoord vergeten"})]})]})]})})},H=a(16),P=a.n(H),U=a(25),V=function(){var e=Object(U.a)(P.a.mark((function e(t,a,n){var r,c,i,o,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.user_data&&n){e.next=2;break}return e.abrupt("return");case 2:if(a){e.next=4;break}return e.abrupt("return");case 4:return r=j()(n).format("YYYY-MM-DDTHH:mm:ss[Z]"),c="https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp="+r+"&operators="+a,i={headers:{authorization:"Bearer "+t.user_data.token}},e.next=9,fetch(c,i);case 9:if((o=e.sent).ok){e.next=13;break}return console.error("unable to fetch: %o",o),e.abrupt("return",!1);case 13:return e.next=15,o.json();case 15:return l=e.sent,e.abrupt("return",l.park_events||!1);case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),J=[],W=function(e){var t=[];return e.map((function(e){t.indexOf(e.bike_id)<=-1&&t.push(e.bike_id)})),t};var X=function(e){var t=Object(n.useState)([]),a=Object(w.a)(t,2),r=(a[0],a[1]),c=Object(m.d)((function(e){return!!e.authentication&&e.authentication})),i=function(){var e=Object(U.a)(P.a.mark((function e(){var t,a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=j()().toISOString(),[],a=[],n=0;case 3:if(!(n<=20)){e.next=13;break}return t=j()(t).subtract(6,"hours").toISOString(),e.next=7,V(c,"htm",t);case 7:e.sent.map((function(e){a.push(e)})),J[n]=W(a);case 10:n++,e.next=3;break;case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){var e=Object(U.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:a=e.sent,r(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c]),Object(M.jsxs)("div",{className:"mt-12",children:[Object(M.jsx)("h1",{className:"text-2xl my-2",children:"Monitoring"}),Object(M.jsxs)("p",{className:"py-2",children:["Voor ","htm"," willen we controleren hoeveel unieke voertuig-IDs er zijn door te de tijd heen."]}),Object(M.jsx)("p",{className:"py-2",children:"Op deze manier kunnen we afleiden of er aan de standaard wordt voldaan. Er moeten statische voertuig-IDs zijn. Als dit niet het geval is, zul je zien dat er na verloop van tijd veel meer voertuig-IDs zijn geregistreerd dan het aantal voertuigen dat de aanbieder heeft. Op die manier weet je dat denog niet voldaan wordt aan de gevraagde datastandaard."}),Object(M.jsx)("p",{className:"py-2",children:"De snapshots zijn steeds gemaakt met 6 uur ertussen."}),Object(M.jsx)("pre",{children:J?J.map((function(e,t){return Object(M.jsxs)("div",{children:["Number of UUIDs after ",Object(M.jsxs)("b",{children:[t," snapshots"]}),": ",Object(M.jsx)("b",{children:e.length})]},t)})):""}),Object(M.jsxs)("table",{className:"table-auto bg-white hidden",children:[Object(M.jsx)("thead",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{children:"Datum/tijd"}),Object(M.jsx)("th",{children:"Cumulatief aantal voertuig-IDs"})]})}),Object(M.jsx)("tbody",{children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("td",{children:"datumtijd"}),Object(M.jsx)("td",{children:"aantal"})]})})]})]})};a(31);var K=function(e){var t=e.closeFunction,a=e.children;return Object(M.jsx)("div",{className:"modalbox-bg",onClick:function(){return t(!1)},children:Object(M.jsxs)("div",{className:"modalbox",onClick:function(e){return e.stopPropagation()},children:[Object(M.jsx)("div",{className:"absolute absolute top-0 right-0",children:Object(M.jsx)(T,{onClick:function(){return t(!1)}})}),Object(M.jsx)("div",{className:"grid-cols-4",children:a})]})})};a(71);var Y=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.gebieden?e.metadata.gebieden:[]})),a=Object(m.d)((function(e){return e.filter?e.filter.gebied:""})),r=Object(n.useState)(!1),c=Object(w.a)(r,2),i=c[0],o=c[1],l=Object(n.useState)(""),s=Object(w.a)(l,2),d=s[0],u=s[1],f=function(t){e({type:"SET_FILTER_GEBIED",payload:t})},b=function(e){u(e.target.value)},j=function(e){u("")},h=t.find((function(e){return e.gm_code===a}))||"";return Object(M.jsxs)("div",{className:"filter-plaats-container",children:[Object(M.jsx)("div",{className:"filter-plaats-title",onClick:function(e){o(!i)},children:"Plaats"}),Object(M.jsxs)("div",{className:"filter-plaats-box-row",children:[Object(M.jsx)("div",{className:"filter-plaats-value",onClick:function(e){o(!i)},children:""===h?"Alle Gebieden":h.name}),i?function(e){var t=e.filter((function(e){return""===d||e.name.toLowerCase().includes(d.toLowerCase())}));return Object(M.jsx)(K,{closeFunction:o,children:Object(M.jsxs)("div",{className:"filter-form-selectie",children:[Object(M.jsxs)("div",{className:"filter-form-search-container",children:[Object(M.jsx)("div",{className:"filter-form-title",children:"Selecteer Plaats"}),Object(M.jsxs)("div",{className:"filter-form-search-container-2",children:[Object(M.jsx)("input",{type:"text",className:"filter-form-search",onChange:b,value:d,placeholder:"zoek"}),""!==d?Object(M.jsx)("div",{className:"filter-plaats-img-cancel",onClick:j}):Object(M.jsx)("div",{className:"filter-plaats-img-search"})]}),Object(M.jsx)("div",{children:"\xa0"})]}),Object(M.jsxs)("div",{className:"filter-form-values",children:[""===a?Object(M.jsx)("div",{className:"form-item-selected form-item",onClick:function(e){o(!1)},children:"Alle Gebieden"},"item-alle"):Object(M.jsx)("div",{className:"form-item",onClick:function(e){o(!1),f("")},children:"Alle Gebieden"},"item-alle"),t.map((function(e){return a===e.gm_code?Object(M.jsx)("div",{className:"form-item-selected form-item",onClick:function(e){o(!1),f("")},children:e.name},"item-"+e.gm_code):Object(M.jsx)("div",{className:"form-item",onClick:function(t){o(!1),f(e.gm_code)},children:e.name},"item-"+e.gm_code)}))]})]})})}(t):null,""!==a?Object(M.jsx)("div",{className:"filter-plaats-img-cancel",onClick:function(t){t.preventDefault(),e({type:"SET_FILTER_GEBIED",payload:""})}}):null,Object(M.jsx)("div",{className:"filter-plaats-img-search",onClick:function(e){o(!i)}})]})]})},q=(a(72),a(73),a(74),a(75),a(46)),$=a.n(q),Q=a.p+"static/media/calendar.0fe3dc2a.svg";var ee=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.filter?e.filter.datum:(new Date).toISOString()}));return Object(M.jsxs)("div",{className:"filter-datum-container",children:[Object(M.jsx)("div",{className:"filter-datum-title",children:"Datum"}),Object(M.jsxs)("div",{className:"filter-datum-box-row",children:[Object(M.jsxs)("div",{className:"filter-datum-box-1",children:[Object(M.jsx)("div",{className:"filter-datum-caret",children:"\u2039"}),Object(M.jsx)("div",{className:"filter-datum-dtpicker",children:Object(M.jsx)($.a,{onChange:function(t){e({type:"SET_FILTER_DATUM",payload:t.toISOString()})},value:new Date(t),clearIcon:null,calendarIcon:Object(M.jsx)("img",{src:Q,alt:"Logo"}),format:"y-MM-dd H:mm"})}),Object(M.jsx)("div",{className:"filter-datum-caret",children:"\u203a"})]}),Object(M.jsx)("div",{className:"filter-datum-box-2",children:Object(M.jsx)("div",{className:"filter-datum-img-play"})})]})]})};var te=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.filter?e.filter.intervalstart:(new Date).toISOString()})),a=Object(m.d)((function(e){return e.filter?e.filter.intervalend:(new Date).toISOString()})),r=Object(n.useState)(!1),c=Object(w.a)(r,2),i=c[0],o=c[1],l=Object(n.useState)(!1),s=Object(w.a)(l,2),d=s[0],u=s[1],f=function(t){if(t.preventDefault(),t.target.validity.valid){var a=new Date(t.target.value).toISOString();e({type:i?"SET_FILTER_INTERVAL_START":"SET_FILTER_INTERVAL_END",payload:a})}},b=new Date(t).toLocaleString(),j=new Date(a).toLocaleString();return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("div",{className:"filter-item",onClick:function(e){o(!0),u(!0)},children:[Object(M.jsx)("div",{className:"filter-title",children:"Start"}),Object(M.jsx)("div",{className:"filter-value",children:b})]}),Object(M.jsxs)("div",{className:"filter-item",onClick:function(e){o(!1),u(!0)},children:[Object(M.jsx)("div",{className:"filter-title",children:"Eind"}),Object(M.jsx)("div",{className:"filter-value",children:j})]}),d?function(e){var n=function(e){var t=new Date(e),a=function(e){return(e<10?"0":"")+e};return t.getFullYear()+"-"+a(t.getMonth()+1)+"-"+a(t.getDate())+"T"+a(t.getHours())+":"+a(t.getMinutes())+":"+a(t.getSeconds())}(e?t:a);return Object(M.jsx)(K,{className:"min-width-48",closeFunction:u,children:Object(M.jsxs)("div",{className:"filter-form-selectie",children:[Object(M.jsx)("div",{className:"filter-form-title",children:"Selecteer Datum"}),Object(M.jsxs)("form",{className:"h-12 w-auto flex flex-row border-solid border-4 border-light-blue-500 box-border",children:[Object(M.jsx)("input",{className:"bg-transparent flex-2 flex-grow",type:"datetime-local",value:n,onChange:f}),Object(M.jsx)("div",{className:"flex-2"})]},"f-end"),Object(M.jsx)("div",{className:"flex-none closebutton text-center mt-4",onClick:function(e){return u(!1)},children:"OK"})]})})}():null]})};a(94);var ae=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.aanbieders?e.metadata.aanbieders:[]})),a=Object(m.d)((function(e){return e.filter?e.filter.aanbiedersexclude:[]}));return Object(M.jsxs)("div",{className:"filter-aanbieders-container",children:[Object(M.jsxs)("div",{className:"filter-aanbieders-title-row",children:[Object(M.jsx)("div",{className:"filter-aanbieders-title",children:"Aanbieders"}),""!==a?Object(M.jsx)("div",{className:"filter-aanbieders-reset",onClick:function(t){e({type:"CLEAR_FILTER_AANBIEDERS_EXCLUDE",payload:""})},children:"reset"}):null]}),Object(M.jsx)("div",{className:"filter-aanbieders-box-row",children:t.map((function(n,r){var c=a.includes(n.system_id),i=c?function(t){t.stopPropagation(),function(t){e({type:"REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE",payload:t.system_id})}(n)}:function(r){r.stopPropagation(),function(n){a.split(",").length!==t.length-1&&e({type:"ADD_TO_FILTER_AANBIEDERS_EXCLUDE",payload:n.system_id})}(n)};return Object(M.jsxs)("div",{className:"filter-aanbieders-item ".concat(c?" not-active":""),onClick:i,children:[Object(M.jsx)("div",{className:"filter-aanbieders-marker",children:Object(M.jsxs)("svg",{viewBox:"0 0 30 30",children:[Object(M.jsx)("circle",{cx:"50%",cy:"50%",r:"40%",fill:"#000000"}),Object(M.jsx)("circle",{cx:"50%",cy:"50%",r:"35%",fill:"#FFFFFF"}),Object(M.jsx)("circle",{cx:"70%",cy:"25%",r:"25%",fill:n.color.toString()})]})}),Object(M.jsx)("div",{className:"filter-aanbieders-itemlabel",children:n.name})]})}))})]})};a(95);var ne=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.zones?e.metadata.zones:[]})),a=Object(m.d)((function(e){return e.filter?e.filter.zones:0})),r=Object(m.d)((function(e){return e.filter?e.filter.gebied:0})),c=Object(n.useState)(!1),i=Object(w.a)(c,2),o=i[0],l=i[1],s=Object(n.useState)(""),d=Object(w.a)(s,2),u=d[0],f=d[1],b=function(t){e({type:"REMOVE_FROM_FILTER_ZONES",payload:t})},j=function(e){f(e.target.value)},h=function(e){f("")},p=[],v="";try{var g=(p=a.split(",")).length;if(g>1)v=g+" zones";else{var O=t.find((function(e){return e.zone_id.toString()===p[0]}));v=O&&O.name||""}}catch(y){v=""}""===v&&(v="Alle Zones");var x=""!==r&&t.length>0,_=t.filter((function(e){return p.includes(e.zone_id.toString())}));return Object(M.jsxs)("div",{className:"filter-zones-container ".concat(!0===x?"":"not-active"),children:[Object(M.jsx)("div",{className:"filter-zones-title",onClick:function(e){x&&l(!o)},children:"Zones"}),Object(M.jsxs)("div",{className:"filter-zones-box-row",children:[Object(M.jsx)("div",{className:"filter-zones-value",onClick:function(e){x&&l(!o)},children:v}),""!==a?Object(M.jsx)("div",{className:"filter-zones-img-cancel",onClick:function(){e({type:"CLEAR_FILTER_ZONES",payload:null})}}):null,o?function(t){var n=t.filter((function(e){return""===u||e.name.toLowerCase().includes(u.toLowerCase())}));return Object(M.jsx)(K,{closeFunction:l,children:Object(M.jsxs)("div",{className:"filter-form-selectie",children:[Object(M.jsxs)("div",{className:"filter-form-search-container",children:[Object(M.jsx)("div",{className:"filter-form-title",children:"Selecteer Zones"}),Object(M.jsxs)("div",{className:"filter-form-search-container-2",children:[Object(M.jsx)("input",{type:"text",className:"filter-form-search",onChange:j,value:u,placeholder:"zoek"}),""!==u?Object(M.jsx)("div",{className:"filter-zones-img-cancel",onClick:h}):Object(M.jsx)("div",{className:"filter-zones-img-search"})]}),Object(M.jsx)("div",{children:"\xa0"})]}),Object(M.jsx)("div",{className:"filter-form-values",children:n.map((function(t){return a.includes(t.zone_id)?Object(M.jsx)("div",{className:"form-item-selected form-item",onClick:function(e){e.stopPropagation(),b(t.zone_id)},children:t.name},"item-"+t.zone_id):Object(M.jsx)("div",{className:"form-item",onClick:function(a){var n;a.stopPropagation(),n=t.zone_id,e({type:"ADD_TO_FILTER_ZONES",payload:n})},children:t.name},"item-"+t.zone_id)}))})]})})}(t):null,Object(M.jsx)("div",{className:"filter-zones-img-search",onClick:function(e){l(!o)}})]}),Object(M.jsx)("div",{className:"filter-zones-zonelist",children:_.map((function(e){return Object(M.jsxs)("div",{className:"filter-zones-zoneitem",children:[e.name,Object(M.jsx)("div",{className:"filter-zones-img-zoneitem-cancel",onClick:function(t){t.stopPropagation(),b(e.zone_id)}})]})}))})]})};a(96);var re=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return[{id:0,color:"#1FA024",fillcolor:"#1FA024",name:"< 24 uur"},{id:1,color:"#48E248",fillcolor:"#FFFFFF",name:"< 48 uur"},{id:2,color:"#FFD837",fillcolor:"#FFFFFF",name:"< 72 uur"},{id:3,color:"#FE862E",fillcolor:"#FE862E",name:"< 5 d"},{id:4,color:"#FD3E48",fillcolor:"#FD3E48",name:"> 7 d"}]})),a=Object(m.d)((function(e){return e.filter?e.filter.markersexclude:[]}));return Object(M.jsx)("div",{className:"filter-markers-container",children:Object(M.jsx)("div",{className:"filter-markers-box-row",children:t.map((function(t){var n=a.split(",").includes(t.id.toString()),r=n?"filter-markers-item-excluded":"filter-markers-item",c=n?function(a){a.stopPropagation(),function(t){e({type:"REMOVE_FROM_FILTER_MARKERS_EXCLUDE",payload:t})}(t.id)}:function(a){a.stopPropagation(),function(t){e({type:"ADD_TO_FILTER_MARKERS_EXCLUDE",payload:t})}(t.id)};return Object(M.jsxs)("div",{className:r,children:[Object(M.jsx)("div",{className:"filter-markers-marker",onClick:c,children:Object(M.jsxs)("svg",{viewBox:"0 0 30 30",children:[Object(M.jsx)("circle",{cx:"50%",cy:"50%",r:"40%",fill:t.color}),Object(M.jsx)("circle",{cx:"50%",cy:"50%",r:"34%",fill:t.fillcolor})]})}),Object(M.jsx)("div",{className:"filter-markers-itemlabel",children:t.name})]})}))})})};var ce=function(e){var t=e.showinterval,a=void 0!==t&&t,n=e.visible,r=void 0!==n&&n;return Object(M.jsxs)("div",{className:"filter-bar",style:{left:r?"0":"-324px"},children:[a?Object(M.jsx)(te,{}):Object(M.jsx)(ee,{}),Object(M.jsx)(Y,{}),Object(M.jsx)(ne,{}),Object(M.jsx)(re,{}),Object(M.jsx)(ae,{})]})};a(97);var ie=function(){return Object(M.jsxs)("div",{className:"topbar",children:[Object(M.jsx)("div",{className:"topbar-logo"}),Object(M.jsx)("a",{href:"#this",children:"menu"})]})},oe=[{value:"cykl",name:"Cykl"},{value:"flickbike",name:"Flickbike"},{value:"donkey",name:"Donkey"},{value:"mobike",name:"Mobike"},{value:"htm",name:"HTM"},{value:"gosharing",name:"GO"},{value:"check",name:"CHECK"},{value:"felyx",name:"Felyx"},{value:"deelfietsnederland",name:"Deelfiets"},{value:"keobike",name:"Keobike"},{value:"lime",name:"Lime"},{value:"baqme",name:"BAQME"},{value:"cargoroo",name:"Cargoroo"},{value:"uwdeelfiets",name:"uwdeelfiets"},{value:"hely",name:"Hely"}],le=[{gm_code:"",name:"Alle Gebieden"},{gm_code:"GM0518",name:"'s-Gravenhage"},{gm_code:"GM0796",name:"'s-Hertogenbosch"},{gm_code:"GM0613",name:"Albrandswaard"},{gm_code:"GM0141",name:"Almelo"},{gm_code:"GM0034",name:"Almere"},{gm_code:"GM0484",name:"Alphen aan den Rijn"},{gm_code:"GM0307",name:"Amersfoort"},{gm_code:"GM0362",name:"Amstelveen"},{gm_code:"GM0363",name:"Amsterdam"},{gm_code:"GM0200",name:"Apeldoorn"},{gm_code:"GM0202",name:"Arnhem"},{gm_code:"GM0106",name:"Assen"},{gm_code:"GM0489",name:"Barendrecht"},{gm_code:"GM0203",name:"Barneveld"},{gm_code:"GM0373",name:"Bergen (NH"},{gm_code:"GM0753",name:"Best"},{gm_code:"GM0375",name:"Beverwijk"},{gm_code:"GM0377",name:"Bloemendaal"},{gm_code:"GM0758",name:"Breda"},{gm_code:"GM0312",name:"Bunnik"},{gm_code:"GM0313",name:"Bunschoten"},{gm_code:"GM0502",name:"Capelle aan den IJssel"},{gm_code:"GM0310",name:"De Bilt"},{gm_code:"GM0736",name:"De Ronde Venen"},{gm_code:"GM0503",name:"Delft"},{gm_code:"GM0150",name:"Deventer"},{gm_code:"GM0384",name:"Diemen"},{gm_code:"GM0505",name:"Dordrecht"},{gm_code:"GM0228",name:"Ede"},{gm_code:"GM0772",name:"Eindhoven"},{gm_code:"GM0153",name:"Enschede"},{gm_code:"GM0232",name:"Epe"},{gm_code:"GM1771",name:"Geldrop-Mierlo"},{gm_code:"GM1942",name:"Gooise Meren"},{gm_code:"GM0014",name:"Groningen"},{gm_code:"GM0392",name:"Haarlem"},{gm_code:"GM0394",name:"Haarlemmermeer"},{gm_code:"GM0243",name:"Harderwijk"},{gm_code:"GM0246",name:"Heerde"},{gm_code:"GM0794",name:"Helmond"},{gm_code:"GM0164",name:"Hengelo"},{gm_code:"GM0798",name:"Hilvarenbeek"},{gm_code:"GM0402",name:"Hilversum"},{gm_code:"GM0353",name:"IJsselstein"},{gm_code:"GM0166",name:"Kampen"},{gm_code:"GM0542",name:"Krimpen aan den IJssel"},{gm_code:"GM1621",name:"Lansingerland"},{gm_code:"GM0080",name:"Leeuwarden"},{gm_code:"GM1916",name:"Leidschendam-Voorburg"},{gm_code:"GM0327",name:"Leusden"},{gm_code:"GM0809",name:"Loon op Zand"},{gm_code:"GM0556",name:"Maassluis"},{gm_code:"GM1842",name:"Midden-Delfland"},{gm_code:"GM1952",name:"Midden-Groningen"},{gm_code:"GM0356",name:"Nieuwegein"},{gm_code:"GM0267",name:"Nijkerk"},{gm_code:"GM0268",name:"Nijmegen"},{gm_code:"GM1930",name:"Nissewaard"},{gm_code:"GM0820",name:"Nuenen, Gerwen en Nederwetten"},{gm_code:"GM0302",name:"Nunspeet"},{gm_code:"GM0826",name:"Oosterhout"},{gm_code:"GM0431",name:"Oostzaan"},{gm_code:"GM1926",name:"Pijnacker-Nootdorp"},{gm_code:"GM0273",name:"Putten"},{gm_code:"GM0597",name:"Ridderkerk"},{gm_code:"GM0603",name:"Rijswijk"},{gm_code:"GM1674",name:"Roosendaal"},{gm_code:"GM0599",name:"Rotterdam"},{gm_code:"GM0606",name:"Schiedam"},{gm_code:"GM0848",name:"Son en Breugel"},{gm_code:"GM0855",name:"Tilburg"},{gm_code:"GM1730",name:"Tynaarlo"},{gm_code:"GM0344",name:"Utrecht"},{gm_code:"GM1581",name:"Utrechtse Heuvelrug"},{gm_code:"GM0861",name:"Veldhoven"},{gm_code:"GM0622",name:"Vlaardingen"},{gm_code:"GM0865",name:"Vught"},{gm_code:"GM0866",name:"Waalre"},{gm_code:"GM0867",name:"Waalwijk"},{gm_code:"GM0289",name:"Wageningen"},{gm_code:"GM0629",name:"Wassenaar"},{gm_code:"GM1960",name:"West Betuwe"},{gm_code:"GM1783",name:"Westland"},{gm_code:"GM0637",name:"Zoetermeer"},{gm_code:"GM0642",name:"Zwijndrecht"},{gm_code:"GM0193",name:"Zwolle"}],se=[{id:0,name:"Alle voertuigtypes"},{id:1,name:"Onbekend"},{id:2,name:"Fiets"}],de=void 0,ue=void 0,me=function e(){var t=5e3;try{if(void 0===de)return!1;var a=de.getState();if(function(e){return!!e.authentication.user_data}(a)){var n={headers:{authorization:"Bearer "+a.authentication.user_data.token}};return fetch("https://api.deelfietsdashboard.nl/dashboard-api/menu/acl",n).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){de.dispatch({type:"SET_GEBIEDEN",payload:e.municipalities}),de.dispatch({type:"SET_AANBIEDERS",payload:e.operators});var t=se;de.dispatch({type:"SET_VEHICLE_TYPES",payload:t})}))})).catch((function(e){console.error("unable to decode JSON")})),!0}de.dispatch({type:"SET_GEBIEDEN",payload:le}),de.dispatch({type:"SET_AANBIEDERS",payload:oe})}catch(r){return console.error("Unable to update gebieden",r),t=5e3,!1}finally{ue=setTimeout(e,t)}},fe=function(){void 0!==ue&&clearTimeout(ue),me()};fe();var be=void 0,je=void 0,he=function e(){var t=5e3;try{if(void 0===be)return console.log("no redux state available yet - skipping zones geodata update"),!1;var a=be.getState();if(function(e){return!!e.authentication.user_data}(a)&&a&&""!==a.filter.gebied&&0!==a.filter.zones.length){var n="https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids="+a.filter.zones+"&&include_geojson=true",r={headers:{authorization:"Bearer "+a.authentication.user_data.token}};fetch(n,r).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){var t={type:"FeatureCollection",features:[]};e.zones.forEach((function(e){switch(e.geojson.type){case"MultiPolygon":case"Polygon":var a={type:"Feature",geometry:e.geojson};t.features.push(a);break;default:console.log("pollMetadataZonesgeodata - don't know how to handle %s",e.type,e)}}));var n={data:t,filter:a.filter.zones};be.dispatch({type:"SET_ZONES_GEODATA",payload:n})})).catch((function(e){console.error("unable to decode JSON",e)}))})).catch((function(e){console.error("unable to fetch zone geodata")}))}else be.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}})}catch(c){console.error("Unable to update zones",c),t=5e3}finally{je=setTimeout(e,t)}},pe=function(){void 0!==je&&clearTimeout(je),he()},ve=void 0,ge=void 0,Oe=function e(){var t=5e3;try{if(void 0===ve)return!1;var a=ve.getState();if(function(e){return!!e.authentication.user_data}(a)&&a&&""!==a.filter.gebied){var n="https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code="+a.filter.gebied,r={headers:{authorization:"Bearer "+a.authentication.user_data.token}};fetch(n,r).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){ve.dispatch({type:"SET_ZONES",payload:e.zones})}))})).catch((function(e){console.error("unable to decode JSON")}))}else ve.dispatch({type:"SET_ZONES",payload:[]}),ve.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}})}catch(c){console.error("Unable to update zones",c),t=5e3}finally{ge=setTimeout(e,t)}},xe=function(){void 0!==ge&&clearTimeout(ge),Oe()},_e=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];if(""!==t.zones)n.push("zone_ids="+t.zones);else if(""!==t.gebied){var r=[],c=a.gebieden.find((function(e){return e.gm_code===t.gebied}));void 0!==c&&(r=a.zones.filter((function(e){return e.municipality===c.gm_code&&e.name===c.name}))),1===r.length?n.push("zone_ids="+r[0].zone_id):console.error("zero or multiple multiple zones found for a single municipality (%s)",t.gebied)}if(""!==t.aanbiedersexclude){var i=t.aanbiedersexclude.split(","),o=a.aanbieders.filter((function(e){return!1===i.includes(e.system_id)})).map((function(e){return e.system_id})).join(",");n.push("operators="+o)}if(e){var l=(new Date).toISOString().replace(/.\d+Z$/g,"Z");""!==t.datum&&(l=new Date(t.datum).toISOString().replace(/.\d+Z$/g,"Z")),n.push("timestamp="+l)}else{var s=(new Date).toISOString().replace(/.\d+Z$/g,"Z"),d=s,u=function(){return!t||""===t.intervalstart||""===t.intervalend||void 0===t.intervalstart||void 0===t.intervalend};u()||(s=new Date(t.intervalstart).toISOString().replace(/.\d+Z$/g,"Z"),d=new Date(t.intervalend).toISOString().replace(/.\d+Z$/g,"Z")),n.push("start_time="+s+"&end_time="+d)}return n},ye=function(e){return!!e.authentication.user_data},Ee=void 0,Se=void 0,Ne=0,ke=function e(){if((Ne+=1)>1)return console.log("recursive updateparkingdata call (level %s)",Ne),!1;console.log("updateParkingData");var t=5e3;try{if(void 0===Ee)return!1;var n=Ee.getState();if(ye(n)&&n&&n.filter&&n.authentication.user_data.token){var r="https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space",c={};if(null!==n.filter&&null!==n.authenticationdata){r="https://api.deelfietsdashboard.nl/dashboard-api/park_events";var i=_e(!0,n.filter,n.metadata);i.length>0&&(r+="?"+i.join("&")),c={headers:{authorization:"Bearer "+n.authentication.user_data.token}}}fetch(r,c).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){ye&&(e=e.park_events);var t={type:"FeatureCollection",features:[]},n=a(21),r=j()();e.forEach((function(e){var a,c=ye?e.start_time:e.in_public_space_since,i=r.diff(j()(c),"minutes"),o=(a=i)<=60?"#38ff71":a<=1440?"#008c28":a<=5760?"#fff700":"#cc0000",l={type:"Feature",properties:{id:n(e.location.latitude+e.location.longitude),system_id:e.system_id,in_public_space_since:c,color:o},geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude,0]}};t.features.push(l)})),Ee.dispatch({type:"SET_VEHICLES",payload:t})})).catch((function(e){console.error("unable to decode JSON")}))})).catch((function(e){console.error("fetch error - unable to fetch JSON from %s",r)}))}else Ee.dispatch({type:"SET_PARKINGDATA",payload:[]})}catch(o){console.error("Unable to update zones",o),t=5e3}finally{Ne-=1,Se=setTimeout(e,t)}},we=function(){void 0!==Se&&clearTimeout(Se),ke()},Me=void 0,Te=void 0,ze=function e(){var t=5e3;try{if(void 0===Me)return console.log("no redux state available yet - skipping zones update"),!1;var n=Me.getState();if(ye(n)&&n&&n.filter&&n.authentication.user_data.token){var r="https://api.deelfietsdashboard.nl/dashboard-api/public/trips_in_public_space",c={};if(null!==n.filter&&null!==n.authenticationdata){r="https://api.deelfietsdashboard.nl/dashboard-api/trips";var i=_e(!1,n.filter,n.metadata);i.length>0&&(r+="?"+i.join("&")),c={headers:{authorization:"Bearer "+n.authentication.user_data.token}}}fetch(r,c).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){var t=[];ye&&(t=e.trips);var n={type:"FeatureCollection",features:[]},r=a(21);t.forEach((function(e){var t={type:"Feature",properties:{id:r(e.start_location.latitude+e.start_location.longitude),system_id:e.system_id,color:"#38ff71"},geometry:{type:"Point",coordinates:[e.start_location.longitude,e.start_location.latitude,0]}};n.features.push(t);var a={type:"Feature",properties:{id:r(e.end_location.latitude+e.end_location.longitude),system_id:e.system_id,color:"#cc0000"},geometry:{type:"Point",coordinates:[e.end_location.longitude,e.end_location.latitude,0]}};n.features.push(a)})),Me.dispatch({type:"SET_TRIPS",payload:n})})).catch((function(e){console.error("unable to decode JSON")}))})).catch((function(e){console.error("fetch error - unable to fetch JSON from %s",r)}))}else Me.dispatch({type:"SET_TRIPDATA",payload:[]})}catch(o){console.error("Unable to update zones",o),t=5e3}finally{Te=setTimeout(e,t)}},De=function(){void 0!==Te&&clearTimeout(Te),ze()};a(98);var Ge=function(){var e=Object(n.useRef)(null),t=Object(m.d)((function(e){return!!e.authentication.user_data})),a=Object(m.d)((function(e){return!!e.filter&&e.filter.visible})),r=Object(m.d)((function(e){return e.filter}));Object(n.useEffect)((function(){ve=Ie,xe(),function(e){be=e}(Ie),function(e){de=e}(Ie),function(e){Ee=e,we()}(Ie),function(e){Me=e,De()}(Ie),xe(),pe(),fe()})),Object(n.useEffect)((function(){De(),we()}),[r]);var c=function(){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{ref:e,className:"map-layer"}),Object(M.jsx)(ce,{visible:t&&a,showinterval:!1})]})};return Object(M.jsxs)(N.a,{children:[Object(M.jsx)(k.a,{from:"/",exact:!0,to:"/map/park"}),Object(M.jsx)("div",{className:"app",children:Object(M.jsxs)("div",{className:"gui-layer",children:[Object(M.jsxs)(k.d,{children:[Object(M.jsx)(k.b,{path:"/login",children:Object(M.jsx)(Z,{})}),Object(M.jsxs)(k.b,{path:"/map/trip",children:[Object(M.jsx)(B,{mapContainer:e,showParkingData:!1}),c()]}),Object(M.jsxs)(k.b,{path:"/map/park",children:[Object(M.jsx)(B,{mapContainer:e,showParkingData:!0}),c()]}),Object(M.jsx)(k.b,{path:"/monitoring",children:Object(M.jsx)(X,{})})]}),Object(M.jsx)(ie,{}),Object(M.jsx)(D,{})]})})]})},Ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.c,Le=localStorage.getItem("CROWDD_reduxState")?JSON.parse(localStorage.getItem("CROWDD_reduxState")):{},Ie=Object(f.d)(S,Le,Ce(Object(f.a)(h.a)));Ie.subscribe((function(){var e=Ie.getState(),t={last_update:j()().unix(),authentication:e.authentication,filter:e.filter};localStorage.setItem("CROWDD_reduxState",JSON.stringify(t))}));var Re=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return Object(M.jsx)(m.a,{store:Ie,children:Object(M.jsx)(Ge,{content:this.props.content})})}}]),a}(n.Component);var Ae=Re=function(e,t){for(var a=arguments.length,n=new Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];var c=m.b.apply(void 0,n)(t);return function(t){return Object(M.jsx)(c,Object(o.a)(Object(o.a)({},t),{},{store:e}))}}(Ie,Re,(function(e){return{}}),(function(e){return{}})),Fe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,103)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};i.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsx)(Ae,{})}),document.getElementById("root")),Fe()}},[[99,1,2]]]);
//# sourceMappingURL=main.ad2b2d6e.chunk.js.map