(this["webpackJsonpdashboarddeelmobiliteit-app"]=this["webpackJsonpdashboarddeelmobiliteit-app"]||[]).push([[0],{44:function(e,t,n){},51:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(16),a=n.n(o),i=(n(44),n(22)),s=n(32),l=n(33),u=n(39),d=n(38),b=n(9),h=n(11),j=n(35),p=n.n(j),O=n(36),f={data:null};var m=Object(h.b)({vehicles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VEHICLES":var n=t.payload;return{data:n};case"SET_VEHICLE":var c=t.payload;if(!c.uuid)return{};var r=e.data.filter((function(e){return e.uuid!==c.uuid}));return r.push(c),{data:r};case"CLEAR_VEHICLES":return{data:[]};default:return e}}}),g=n(13),v=n(3),x=(n(51),n(1));var S=function(){return Object(x.jsxs)("ul",{className:"flex",children:[Object(x.jsx)("li",{className:"mr-6",children:Object(x.jsx)(g.b,{className:"text-blue-500 hover:text-blue-800",to:"/",children:"Home"})}),Object(x.jsx)("li",{className:"mr-6",children:Object(x.jsx)(g.b,{className:"text-blue-500 hover:text-blue-800",to:"/demo",children:"Demo"})})]})},_=n(8),y=n(21),E=n.n(y);n(74);var C=function(e){var t=Object(b.d)((function(e){return e.vehicles?e.vehicles.data:null})),n=Object(c.useRef)(null),r=Object(c.useRef)(null),o=Object(c.useState)(5.102406),a=Object(_.a)(o,1)[0],i=Object(c.useState)(52.0729252),s=Object(_.a)(i,1)[0],l=Object(c.useState)(14),u=Object(_.a)(l,1)[0];return Object(c.useEffect)((function(){r.current||(r.current=new E.a.Map({container:n.current,style:"mapbox://styles/mapbox/streets-v11",accessToken:"pk.eyJ1Ijoic3ZlbjRhbGwiLCJhIjoiY2t2MHR0YnZhMGh3NzJ2cGFuYWI3ZzVnaCJ9.lvPcFN0y5Z25UPt5xB9rFw",center:[a,s],zoom:u}),r.current.addControl(new E.a.NavigationControl,"top-right"),r.current.on("load",(function(){e(),c()})));var e=function(){r.current&&r.current.isStyleLoaded()&&(t&&(r.current.getSource("vehicles")?console.log("source does exist. setting vehicles",t):(console.log("source does not exist. setting vehicles",t),r.current.addSource("vehicles",{type:"geojson",data:t}))))};e();var c=function(){r.current&&r.current.isStyleLoaded()&&(r.current.getSource("vehicles")&&(r.current.addLayer({id:"vehicles-heatmap",type:"heatmap",source:"vehicles",maxzoom:9,paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}}),r.current.addLayer({id:"vehicles-point",type:"circle",source:"vehicles",minzoom:7,paint:{"circle-opacity":["interpolate",["linear"],["zoom"],7,0,8,1]}})))};c()}),[t]),Object(x.jsx)("div",{className:"Map",children:Object(x.jsx)("div",{ref:n,className:"map"})})},N=n.p+"static/media/logo.6ce24c58.svg";var T=function(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])};n(75);var w=function(){var e="https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space",t=Object(c.useState)(!1),n=Object(_.a)(t,2),r=n[0],o=n[1],a=Object(c.useState)(!1),i=Object(_.a)(a,2),s=i[0],l=i[1];return T((function(){fetch(e).then((function(e){e.json().then((function(e){o(e),l(new Date)})).catch((function(e){console.error("unable to decode JSON"),o(!1)}))})).catch((function(t){console.error("fetch error - unable to fetch JSON from %s",e),o(!1)}))}),5e3),Object(x.jsx)("div",{className:"Demo",children:Object(x.jsxs)("header",{className:"Demo-header",children:[Object(x.jsx)("img",{src:N,className:"Demo-logo",alt:"logo"}),Object(x.jsxs)("p",{children:["Got ",Object.keys(r).length," vehicles at ",s?s.toLocaleTimeString():"-/-"]}),Object(x.jsx)("a",{className:"Demo-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},P=function(){var e=Object(c.useState)(""),t=Object(_.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),a=Object(_.a)(o,2),i=a[0],s=a[1],l=Object(c.useState)(!1),u=Object(_.a)(l,2),d=u[0],b=u[1],h=function(e){e.preventDefault();var t=Object({NODE_ENV:"production",PUBLIC_URL:"/dashboarddeelmobiliteit-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic3ZlbjRhbGwiLCJhIjoiY2t2MHR0YnZhMGh3NzJ2cGFuYWI3ZzVnaCJ9.lvPcFN0y5Z25UPt5xB9rFw"}).REACT_APP_FUSIONAUTH_SERVER+"/login",c={loginId:n,password:i,applicationId:Object({NODE_ENV:"production",PUBLIC_URL:"/dashboarddeelmobiliteit-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic3ZlbjRhbGwiLCJhIjoiY2t2MHR0YnZhMGh3NzJ2cGFuYWI3ZzVnaCJ9.lvPcFN0y5Z25UPt5xB9rFw"}).REACT_APP_FUSIONAUTH_APPLICATION_ID};fetch(t,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),!0})).catch((function(e){return!1}))},j=function(e){e.preventDefault();var t=Object({NODE_ENV:"production",PUBLIC_URL:"/dashboarddeelmobiliteit-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_TOKEN:"pk.eyJ1Ijoic3ZlbjRhbGwiLCJhIjoiY2t2MHR0YnZhMGh3NzJ2cGFuYWI3ZzVnaCJ9.lvPcFN0y5Z25UPt5xB9rFw"}).REACT_APP_FUSIONAUTH_SERVER+"/user/forgot-password",c={loginId:n};return fetch(t,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),!0})).catch((function(e){return!1}))};return d?Object(x.jsx)("div",{class:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(x.jsxs)("div",{class:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(x.jsx)("h3",{class:"text-2xl font-bold text-center",children:"Wachtwoord herstellen"}),Object(x.jsxs)("form",{children:[Object(x.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(x.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"Email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value)}}),Object(x.jsxs)("div",{class:"flex items-baseline justify-between",children:[Object(x.jsx)("button",{class:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:j,children:"Herstel"}),Object(x.jsx)("button",{class:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){return b(!1)},children:"Annuleer"})]})]})]})}):Object(x.jsx)("div",{class:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(x.jsxs)("div",{class:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(x.jsx)("h3",{class:"text-2xl font-bold text-center",children:"Login"}),Object(x.jsxs)("form",{children:[Object(x.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(x.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value)}}),Object(x.jsx)("label",{class:"block",htmlFor:"password",children:"Wachtwoord"}),Object(x.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",type:"password",placeholder:"Wachtwoord",name:"password",required:!0,onChange:function(e){return s(e.target.value)}}),Object(x.jsxs)("div",{class:"flex items-baseline justify-between",children:[Object(x.jsx)("button",{class:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:h,children:"Login"}),Object(x.jsx)("button",{class:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){return b(!0)},children:"Wachtwoord vergeten"})]})]})]})})};n(76);var R=function(){var e="https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space",t=Object(b.c)(),c=function(){fetch(e).then((function(e){e.json().then((function(e){var c={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}},features:[]},r=n(77);e.forEach((function(e){var t={type:"Feature",properties:{id:r(e.location.latitude+e.location.longitude),systemid:e.systemid,in_public_space_since:e.in_public_space_since},geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude,0]}};c.features.push(t)})),t({type:"SET_VEHICLES",payload:c})})).catch((function(e){console.error("unable to decode JSON")}))})).catch((function(t){console.error("fetch error - unable to fetch JSON from %s",e)}))};return T((function(){c()}),3e4),c(),setTimeout((function(){c()}),5e3),Object(x.jsx)(g.a,{children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(S,{}),Object(x.jsxs)(v.c,{children:[Object(x.jsx)(v.a,{path:"/demo",children:Object(x.jsx)(w,{})}),Object(x.jsx)(v.a,{path:"/login",children:Object(x.jsx)(P,{})}),Object(x.jsx)(v.a,{path:"/",children:Object(x.jsx)(C,{})})]})]})})},I=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.c,F=localStorage.getItem("CROWDD_reduxState")?JSON.parse(localStorage.getItem("CROWDD_reduxState")):{},A=Object(h.d)(m,F,I(Object(h.a)(O.a)));A.subscribe((function(){var e=A.getState(),t={lastUpdate:p()().unix(),videos:e.videos,videosFilter:e.videosFilter,settings:e.settings};localStorage.setItem("CROWDD_reduxState",JSON.stringify(t))}));var D=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(x.jsx)(b.a,{store:A,children:Object(x.jsx)(R,{content:this.props.content})})}}]),n}(c.Component);var L=D=function(e,t){for(var n=arguments.length,c=new Array(n>2?n-2:0),r=2;r<n;r++)c[r-2]=arguments[r];var o=b.b.apply(void 0,c)(t);return function(t){return Object(x.jsx)(o,Object(i.a)(Object(i.a)({},t),{},{store:e}))}}(A,D,(function(e){return{}}),(function(e){return{}})),J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};a.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(L,{})}),document.getElementById("root")),J()}},[[80,1,2]]]);
//# sourceMappingURL=main.cd09f9f1.chunk.js.map