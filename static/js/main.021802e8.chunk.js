(this["webpackJsonpdashboarddeelmobiliteit-app"]=this["webpackJsonpdashboarddeelmobiliteit-app"]||[]).push([[0],{127:function(e,t,a){},214:function(e,t,a){},222:function(e,t,a){},227:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){},372:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){},393:function(e,t,a){},394:function(e,t,a){},395:function(e,t,a){},396:function(e,t,a){},398:function(e,t,a){},399:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(46),c=a.n(i),o=(a(214),a(6)),s=a(101),l=a(102),d=a(103),u=a(108),m=a(5),f=a(73),b=a(25),p=a.n(b),j=a(183);var h=a(57),v={aanbieders:[],gebieden:[],zones:[],vehicle_types:[],metadata_loaded:!1,zones_loaded:!1},g=function(e){for(var t=[],a=Math.trunc(360/(e+1)),n=0;n<e;n++){var r=n*a,i=n%2===0?35:65,c=n%2===1?40:60;t.push("hsla(".concat(r,",").concat(c,"%,").concat(i,"%,").concat(1,")"))}return t};var O={data:null};var y={data:null};var x={visible:!0,gebied:"",zones:"",datum:(new Date).toISOString(),intervalstart:(new Date).toISOString(),intervalend:(new Date).toISOString(),aanbiedersexclude:"",markersexclude:"",voertuigtypesexclude:""};var _={user_data:null};var E=a(57),S={data:[],filter:""};var N="parkeerdata-heatmap",k="parkeerdata-clusters",w="parkeerdata-voertuigen",T={zones_visible:!1,displaymode:w,extent:[]},L=a(57);var M=a(100),D={SELECTLAYER:!0};var C=Object(f.b)({last_update:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SET_LAST_UPDATE"===t.type?t.payload:e},metadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AANBIEDERS":var a=e.aanbieders?e.aanbieders:[],n=g(t.payload.length),r={cykl:"#a5e067",flickbike:"#fe431d",mobike:"#ed5144",donkey:"#ed5144",htm:"#db291e",jump:"#fd3e48",gosharing:"#77b136",check:"#8f3af8",felyx:"#064627",lime:"#1bd831",baqme:"#4bdfbb",cargoroo:"#ffcb34",hely:"#fd645c",tier:"#0d123f"},i=t.payload.map((function(e,t){var a=r[e.system_id]?r[e.system_id]:n[t];return Object.assign(e,{color:a})}));return h(JSON.stringify(a))===h(JSON.stringify(i))?e:Object(o.a)(Object(o.a)({},e),{},{aanbieders:i});case"SET_GEBIEDEN":var c=e.gebieden?e.gebieden:[];return h(JSON.stringify(c))===h(JSON.stringify(t.payload))?e:Object(o.a)(Object(o.a)({},e),{},{gebieden:t.payload});case"SET_ZONES":var s=e.zones?e.zones:[];return h(JSON.stringify(s))===h(JSON.stringify(t.payload))?e:Object(o.a)(Object(o.a)({},e),{},{zones:t.payload});case"CLEAR_ZONES":return Object(o.a)(Object(o.a)({},e),{},{zones:[],zones_loaded:!1});case"SET_VEHICLE_TYPES":var l=e.vehicle_types?e.vehicle_types:[];return JSON.stringify(h(l))===JSON.stringify(h(t.payload))?e:Object(o.a)(Object(o.a)({},e),{},{vehicle_types:t.payload});case"SET_METADATA_LOADED":return Object(o.a)(Object(o.a)({},e),{},{metadata_loaded:t.payload});case"SET_ZONES_LOADED":return Object(o.a)(Object(o.a)({},e),{},{zones_loaded:t.payload});default:return e}},vehicles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VEHICLES":var a=t.payload;return{data:a};case"SET_VEHICLE":var n=t.payload;if(!n.uuid)return{};var r=e.data.filter((function(e){return e.uuid!==n.uuid}));return r.push(n),{data:r};case"CLEAR_VEHICLES":return{data:[]};default:return e}},rentals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VERHUURDATA":var a=t.payload;return{data:a};case"CLEAR_VERHUURDATA":return{data:[]};default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER_VISIBLE":return console.log("reducer filter set filter visible %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{visible:t.payload});case"SET_FILTER_GEBIED":return e.gebied===t.payload?e:(console.log("reducer filter set gebied to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{gebied:t.payload,zones:""}));case"SET_FILTER_DATUM":return console.log("reducer filter set datum to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{datum:t.payload});case"SET_FILTER_INTERVAL_START":return console.log("reducer filter set interval start to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{intervalstart:t.payload});case"SET_FILTER_INTERVAL_END":return console.log("reducer filter set interval end to %s",t.payload),Object(o.a)(Object(o.a)({},e),{},{intervalend:t.payload});case"ADD_TO_FILTER_ZONES":console.log("add item %s to zones filter %o",t.payload,e);var a=[];if(e.zones)try{a=e.zones.split(",")||[]}catch(u){a=[]}return a.includes(t.payload)||a.push(t.payload),Object(o.a)(Object(o.a)({},e),{},{zones:a.join(",")});case"REMOVE_FROM_FILTER_ZONES":console.log("remove item %o from zones filter",t.payload);var n=e.zones.split(",")||[];return n=n.filter((function(e){return e.toString()!==t.payload.toString()})),Object(o.a)(Object(o.a)({},e),{},{zones:n.join(",")});case"CLEAR_FILTER_ZONES":return console.log("clear zones filter"),Object(o.a)(Object(o.a)({},e),{},{zones:""});case"ADD_TO_FILTER_MARKERS_EXCLUDE":var r=[];try{if(console.log("add item %s to markersexclude filter %o",t.payload,e),e.markersexclude)try{r=e.markersexclude.split(",")||[]}catch(u){r=[]}r.includes(t.payload)||r.push(t.payload)}catch(u){r=[]}return Object(o.a)(Object(o.a)({},e),{},{markersexclude:r.join(",")});case"REMOVE_FROM_FILTER_MARKERS_EXCLUDE":console.log("remove item %o from markersexclude filter",t.payload);var i=[];try{i=(i=e.markersexclude.split(",")||[]).filter((function(e){return e.toString()!==t.payload.toString()}))}catch(u){i=[]}return Object(o.a)(Object(o.a)({},e),{},{markersexclude:i.join(",")});case"CLEAR_FILTER_MARKERS_EXCLUDE":return console.log("clear markersexclude filter"),Object(o.a)(Object(o.a)({},e),{},{markersexclude:""});case"ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE":var c=[];try{if(console.log("add item %s to voertuigtypesexclude filter %o",t.payload,e),e.voertuigtypesexclude)try{c=e.voertuigtypesexclude.split(",")||[]}catch(u){c=[]}c.includes(t.payload)||c.push(t.payload)}catch(u){c=[]}return Object(o.a)(Object(o.a)({},e),{},{voertuigtypesexclude:c.join(",")});case"REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE":console.log("remove item %o from voertuigtypesexclude filter",t.payload);var s=[];try{s=(s=e.voertuigtypesexclude.split(",")||[]).filter((function(e){return e.toString()!==t.payload.toString()}))}catch(u){s=[]}return Object(o.a)(Object(o.a)({},e),{},{voertuigtypesexclude:s.join(",")});case"CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE":return console.log("clear voertuigtypesexclude filter"),Object(o.a)(Object(o.a)({},e),{},{voertuigtypesexclude:""});case"ADD_TO_FILTER_AANBIEDERS_EXCLUDE":var l=[];try{e.aanbiedersexclude&&(l=e.aanbiedersexclude.split(",")||[]),l.includes(t.payload)||l.push(t.payload)}catch(u){l=[]}return Object(o.a)(Object(o.a)({},e),{},{aanbiedersexclude:l.join(",")});case"REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE":console.log("remove item %s from aanbiedersexclude filter",t.payload);var d=[];try{d=(d=e.aanbiedersexclude.split(",")||[]).filter((function(e){return e!==t.payload}))}catch(u){d=[]}return Object(o.a)(Object(o.a)({},e),{},{aanbiedersexclude:d.join(",")});case"CLEAR_FILTER_AANBIEDERS_EXCLUDE":return console.log("clear aanbiedersexclude filter"),Object(o.a)(Object(o.a)({},e),{},{aanbiedersexclude:""});case"RESET_FILTER":return console.log("reset filter"),x;default:return e}},authentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":var a=t.payload;return{user_data:a};case"CLEAR_USER":return{user_data:null};default:return e}},zones_geodata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;if("SET_ZONES_GEODATA"===t.type){var a=e.data?e.data:[],n=E(JSON.stringify(a))!==E(JSON.stringify(t.payload.data)),r=e.filter!==t.payload.filter;return n||r?Object(o.a)(Object(o.a)({},e),{},{data:t.payload.data,filter:t.payload.filter}):e}return e},layers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LAYER_SET_DISPLAYMODE":return Object(o.a)(Object(o.a)({},e),{},{displaymode:t.payload});case"LAYER_TOGGLE_ZONES_VISIBLE":return Object(o.a)(Object(o.a)({},e),{},{zones_visible:!e.zones_visible});case"LAYER_SET_ZONES_EXTENT":return L(JSON.stringify(t.payload))!==L(JSON.stringify(e.extent||[]))?(console.log("set extent to %o",t.payload),Object(o.a)(Object(o.a)({},e),{},{extent:t.payload})):e;default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;return"SET_VISIBILITY"===t.type?Object(o.a)(Object(o.a)({},e),{},Object(M.a)({},t.payload.name,t.payload.visibility)):e}}),I=a(39),R=a(24),A=a(12),z=(a(222),a(1));function G(e){return Object(z.jsx)("div",Object(o.a)(Object(o.a)({},e),{},{className:"w-16 h-16 flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline",children:Object(z.jsx)("svg",{height:"100%",id:"Layer_1",version:"1.1",viewBox:"0 0 512 512",width:"100%",children:Object(z.jsx)("path",{d:"M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"})})}))}function F(e){var t=Object(n.useState)(document.location.pathname),a=Object(A.a)(t,2),i=a[0],c=a[1],o=i===e.path,s=o?e.icon.replace(".png","-active.png"):e.icon,l=Object(R.g)();return r.a.useEffect((function(){c(document.location.pathname)}),[l]),Object(z.jsxs)(I.b,{className:"\n      text-menu\n      ".concat(o?"is-active":"","\n    "),to:e.path,href:e.href,onClick:e.onClick,children:[s?Object(z.jsx)("img",{src:s}):"",Object(z.jsx)("span",{className:"".concat(o||!s?"inline-block":"hidden"," sm:inline-block  ml-2"),children:e.text})]})}function B(e){return Object(z.jsx)(I.b,{className:"text-link",to:e.path,href:e.href,onClick:e.onClick,children:Object(z.jsx)("span",{className:"block",children:e.text})})}var V=function(){var e=Object(n.useState)(document.location.pathname),t=Object(A.a)(e,2),a=(t[0],t[1],Object(n.useState)(!1)),r=Object(A.a)(a,2),i=r[0],c=r[1],o=Object(m.c)(),s=Object(m.d)((function(e){return!!e.authentication.user_data}));return Object(m.d)((function(e){return!!e.filter&&e.filter.visible})),Object(m.d)((function(e){return e.layers?e.layers.extent:[]})),Object(z.jsx)("div",{className:" Menu fixed w-full mx-0 bottom-0 bg-white sm:bg-transparent sm:bottom-0.5 sm:mx-8 sm:w-auto ",children:Object(z.jsxs)("div",{className:" Menu-inner px-4 mx-auto bg-white box-border w-full flex flex-col justify-center sm:shadow-lg sm:m-4 sm:mb-1 sm:rounded-3xl ",children:[Object(z.jsxs)("div",{className:" whitespace-nowrap ",children:[s&&Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(F,{text:"Aanbod",path:"/map/park",icon:"/images/components/Menu/icon-aanbod.png"}),Object(z.jsx)(F,{text:"Verhuringen",path:"/map/rentals",icon:"/images/components/Menu/icon-verhuringen.png"}),Object(z.jsx)(F,{text:"Ontwikkeling",path:"/stats/overview",icon:"/images/components/Menu/icon-ontwikkeling.png"}),Object(z.jsx)(F,{text:"...",onClick:function(e){e.preventDefault(),c(!i)}})]}),!s&&Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(I.b,{className:"text-menu",to:"/login",children:"Log in"})}),s&&!1]}),i&&Object(z.jsx)(z.Fragment,{children:Object(z.jsxs)("div",{className:" Menu-subMenu absolute ",children:[Object(z.jsx)(B,{text:"Log uit",onClick:function(){s&&o({type:"CLEAR_USER",payload:null})}}),Object(z.jsx)(B,{text:"Feedback \ud83d\udce8",href:"mailto:info@deelfietsdashboard.nl?subject=Feedback Dashboard Deelmobiliteit&body=Ik heb feedback: "})]})})]})})};a(227);function U(e){return Object(z.jsx)("a",{className:"MenuSecondaryItem mx-2",onClick:e.onClick,children:e.text})}var Y=function(){var e=Object(m.c)(),t=function(t,a){e({type:"SET_VISIBILITY",payload:{name:t,visibility:a}})};return Object(z.jsxs)("div",{className:"MenuSecondary block sm:hidden absolute left-0",children:[Object(z.jsx)(U,{text:"Filters",onClick:function(){t("MenuSecondary.filters",!0)}}),Object(z.jsx)(U,{text:"Lagen",onClick:function(){t("MenuSecondary.layers",!0)}})]})},Z=a(20),P=a.n(Z),H=a(30),J=a(87),X=a.n(J),W=a(185),K=a.n(W),q=(a(229),function(e,t){var a=e.filter((function(e){return e.system_id===t}));return a&&a[0]?a[0].color:"#666"}),$={"vehicles-heatmap":{id:"vehicles-heatmap",type:"heatmap",source:"vehicles",maxzoom:9,paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,0,6,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,1,9,3],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(33,102,172,0)",.2,"rgb(103,169,207)",.4,"rgb(209,229,240)",.6,"rgb(253,219,199)",.8,"rgb(239,138,98)",1,"rgb(178,24,43)"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,2,9,20],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,0]}},"vehicles-point":{id:"vehicles-point",type:"symbol",source:"vehicles",layout:{"icon-image":["concat",["get","system_id"],":",["get","duration_bin"]],"icon-size":["interpolate",["linear"],["zoom"],11,.4,16,1],"icon-allow-overlap":!0},minzoom:7},"vehicles-clusters":{id:"vehicles-clusters",type:"circle",source:"vehicles-clusters",filter:["has","point_count"],paint:{"circle-color":"#1FA024","circle-radius":["step",["get","point_count"],20,100,30,750,40]},maxzoom:18},"vehicles-clusters-count":{id:"vehicles-clusters-count",type:"symbol",source:"vehicles-clusters",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","point_count"],16,100,20,750,30]},paint:{"text-color":"#fff"},maxzoom:18},"vehicles-clusters-point":{id:"vehicles-clusters-point",type:"symbol",source:"vehicles",filter:["!",["has","point_count"]],layout:{"icon-image":["concat",["get","system_id"],":",["get","duration_bin"]],"icon-size":1,"icon-allow-overlap":!0},minzoom:18},"vehicles-heatmap-city-level":{id:"vehicles-heatmap-city-level",type:"heatmap",source:"vehicles",paint:{"heatmap-weight":["interpolate",["linear"],["get","mag"],0,1e-4,10,1],"heatmap-intensity":["interpolate",["linear"],["zoom"],0,.0025,5,.005,7.5,.01,10,.05,12,.075,15,.1,20,1],"heatmap-color":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.25,"#ffd837",.5,"#fe862e",.75,"#fd3e48",1,"#9a231f"],"heatmap-radius":["interpolate",["linear"],["zoom"],0,10,10,12,12,20,15,40,20,60,30,100,40,100],"heatmap-opacity":["interpolate",["linear"],["zoom"],7,1,9,.8]}},"rentals-point":{id:"rentals-point",type:"symbol",source:"rentals",layout:{"icon-image":["concat",["get","system_id"],":",["get","duration_bin"]],"icon-size":1,"icon-allow-overlap":!0},minzoom:7},"zones-geodata":{id:"zones-geodata",type:"fill",source:"zones-geodata",paint:{"fill-color":"#1010e0","fill-opacity":.6}}},Q={vehicles:{type:"geojson"},"vehicles-clusters":{type:"geojson",cluster:!0,clusterRadius:50},rentals:{type:"geojson"}},ee='\n    <circle id="Ellipse_129" data-name="Ellipse 129" cx="12" cy="12" r="12" fill="#1fa024" opacity="0.304"></circle>\n    <g id="Ellipse_130" data-name="Ellipse 130" transform="translate(2 2)" fill="#1fa024" stroke="#fff" stroke-width="1">\n        <circle cx="10" cy="10" r="10" stroke="none"></circle>\n        <circle cx="10" cy="10" r="9.5" fill="none"></circle>\n    </g>\n    <circle id="Ellipse_192" data-name="Ellipse 192" cx="4.5" cy="4.5" r="4.5" transform="translate(14 1)" fill="#1f3ff0"></circle>\n';function te(){return(te=Object(H.a)(P.a.mark((function e(t){var a,n,r,i,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=0,r=["#1FA024","#48E248","#FFD837","#FD3E48"];case 3:if(!(n<r.length)){e.next=12;break}return i=r[n],e.next=7,ae(t,i);case 7:c=e.sent,a.push(c);case 9:n++,e.next=3;break;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(H.a)(P.a.mark((function e(t,a){var n,r,i,c,o,s,l,d,u,m,f;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://www.w3.org/2000/svg",(n=document.createElementNS("http://www.w3.org/2000/svg","svg")).innerHTML=ee,i={},c={},(r=n).setAttribute("viewBox","0 0 24 24"),r.getElementById("Ellipse_192").setAttribute("fill",t),r.getElementById("Ellipse_129").setAttribute("fill",a),r.getElementById("Ellipse_130").setAttribute("fill",a),i.value=25,c.value=25,o=document.createElement("canvas"),r.setAttribute("width",i.value),r.setAttribute("height",c.value),o.width=i.value,o.height=c.value,s=(new XMLSerializer).serializeToString(r),l=window.URL||window.webkitURL||window,d=new Image,u=new Blob([s],{type:"image/svg+xml"}),m=l.createObjectURL(u),d.src=m,e.next=28,d.decode();case 28:return(f=o.getContext("2d")).drawImage(d,0,0),l.revokeObjectURL(m),e.abrupt("return",new Uint8Array(f.getImageData(0,0,d.width,d.height).data.buffer));case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=function(e){return te.apply(this,arguments)},ie=a(57);p.a.locale("nl",K.a);function ce(e){console.log("Map component");var t=Object(m.d)((function(e){return e.vehicles||null})),a=Object(m.d)((function(e){return e.rentals||null})),r=(Object(m.d)((function(e){return!!e.authentication.user_data})),Object(m.d)((function(e){return e.layers?e.layers.extent:null}))||[]),i=Object(m.d)((function(e){return e.metadata&&e.metadata.aanbieders?e.metadata.aanbieders:[]})),c=Object(m.d)((function(e){return e&&e.zones_geodata?e.zones_geodata:null})),o=e.mapContainer,s=Object(n.useState)(4.4671854),l=Object(A.a)(s,1)[0],d=Object(n.useState)(51.9250836),u=Object(A.a)(d,1)[0],f=Object(n.useState)(15),b=Object(A.a)(f,1)[0],j=Object(n.useState)(0),h=Object(A.a)(j,2),v=h[0],g=h[1],O=Object(n.useState)(""),y=Object(A.a)(O,2),x=y[0],_=y[1],E=Object(n.useState)([]),S=Object(A.a)(E,2),N=S[0],k=S[1],w=Object(n.useRef)(null);Object(n.useEffect)((function(){w.current||(w.current=new X.a.Map({container:o.current,style:"mapbox://styles/nine3030/ckv9ni7rj0xwq15qsekqwnlz5",accessToken:"pk.eyJ1IjoibmluZTMwMzAiLCJhIjoiY2t2OW1zaTJoMmJnaTJ1czNyMDhhcmFxcSJ9.tHuHTDUPf53RsGBgxZmk2g",center:[l,u],zoom:b,maxZoom:19,attributionControl:!1}),w.current.addControl(new X.a.NavigationControl({showCompass:!1}),"bottom-right"),w.current.addControl(new X.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"bottom-right"),w.current.on("load",(function(){g(v+1),window.ddMap=w.current})),w.current.dragRotate.disable(),w.current.touchZoomRotate.disableRotation())}),[t,c,l,u,b,v,o]);var T=function(e,t){if(w.current&&w.current.isStyleLoaded()){if(t){var a=w.current.getSource(e),n=t.data&&t.data.features?ie(JSON.stringify(t.data.features)):ie("No data yet");if(a){if(!N||N[e]!==n){var r=N;r[e]=n,k(r),w.current.getSource(e).setData(t.data)}}else if(t){var i=N;i[e]=n,k(i);var c=Object.assign({},{type:"geojson",data:t.data},Q[e]?Q[e]:{});w.current.addSource(e,c)}}}else setTimeout((function(){g(v+1)}),250)};return Object(n.useEffect)((function(){T("vehicles",t),T("zones-geodata",c),T("vehicles-clusters",t),T("rentals",a)}),[t?t.data?t.data.features:t.data:t,c,x,v,e.activeSource]),Object(n.useEffect)((function(){w.current&&r&&0!==r.length&&w.current.fitBounds(r)}),[r]),Object(n.useEffect)((function(){!function(t,a){w.current&&w.current.isStyleLoaded()?t&&a&&(w.current.getStyle().layers.forEach((function(e){e.id.indexOf("vehicles-")>-1&&w.current.removeLayer(e.id),e.id.indexOf("zones-geodata")>-1&&(w.current.removeLayer(e.id),_(""))})),e.layers.forEach((function(t){e.layers.indexOf(t)>=-1&&(w.current.getLayer(t)||w.current.addLayer($[t]))}))):setTimeout((function(){g(v+1)}),250)}(t,c),function(e,t,a){["vehicles-point","vehicles-clusters-point"].map((function(a){e.on("click",a,(function(a){for(var n=a.features[0].properties,r=q(t,n.system_id),i=a.features[0].geometry.coordinates.slice();Math.abs(a.lngLat.lng-i[0])>180;)i[0]+=a.lngLat.lng>i[0]?360:-360;(new X.a.Popup).setLngLat(i).setHTML('\n          <h1 class="mb-2">\n            <span\n              class="rounded-full inline-block w-4 h-4"\n              style="background-color: '.concat(r,';position: relative;top: 2px">\n            </span>\n            <span class="Map-popup-title ml-1" style="color: ').concat(r,';">\n              ').concat(n.system_id,'\n            </span>\n          </h1>\n          <div class="Map-popup-body">\n            Staat hier sinds ').concat(p()(n.in_public_space_since).locale("nl").fromNow(),"<br />\n            Geparkeerd sinds: ").concat(p()(n.in_public_space_since).format("DD-MM-YYYY HH:mm"),"\n          </div>\n        ")).addTo(e)})),e.on("mouseenter",a,(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",a,(function(){e.getCanvas().style.cursor=""}))}))}(w.current,i)}),[t,c,v,e.layers]),Object(n.useEffect)((function(){var e=function(){var e=Object(H.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.current.hasImage(t.system_id+":0")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,re(t.color);case 4:e.sent.forEach((function(e,a){w.current.addImage(t.system_id+":"+a,{width:25,height:25,data:e})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();i.forEach((function(t){e(t)}))}),[i]),null}a(230);var oe=function(e){var t=Object(m.c)(),a=Object(n.useRef)(null),r=e.name.toUpperCase(),i=Object(m.d)((function(t){return t.ui?t.ui[r]:e.isVisible})),c=(e.options||{}).backgroundColor;return Object(z.jsxs)("div",{className:"\n      SlideBox\n      direction-".concat(e.direction,"\n      relative\n      ").concat(i?"":"is-hidden","\n      z-10\n    "),ref:a,style:e.style||{},children:[Object(z.jsx)("div",{className:" SlideBox-inner ",style:{backgroundColor:c},children:e.children}),Object(z.jsx)("div",{className:"SlideBox-toggle-wrapper z-10 overflow-hidden",children:Object(z.jsx)("div",{className:"SlideBox-toggle",onClick:function(){t({type:"SET_VISIBILITY",payload:{name:r,visibility:!i}})},style:{backgroundColor:c},children:Object(z.jsx)("span",{children:e.options.title||"Lagen"})})})]})};a(231);function se(e){var t=Object(m.c)(),a=Object(m.d)((function(e){return!!e.filter&&""!==e.filter.gebied})),n=Object(m.d)((function(e){return!!e.layers&&e.layers.zones_visible})),r=Object(m.d)((function(e){return e.layers?e.layers.displaymode:w})),i=Object(m.d)((function(e){return!!e.authentication.user_data}));return Object(z.jsx)(oe,{name:"SelectLayer",direction:"right",options:{title:"Lagen",backgroundColor:"#fff"},style:{position:"absolute",top:"8px",right:0},children:Object(z.jsxs)("div",{className:"SelectLayer pr-1",children:[Object(z.jsx)("div",{"data-type":"heat-map",className:"layer".concat(r!==N?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_DISPLAYMODE",payload:N})},children:Object(z.jsx)("span",{className:"layer-title",children:"Heat map"})}),Object(z.jsx)("div",{"data-type":"pointers",className:"layer".concat(r!==k?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_DISPLAYMODE",payload:k})},children:Object(z.jsx)("span",{className:"layer-title",children:"Clusters"})}),Object(z.jsx)("div",{"data-type":"vehicles",className:"layer".concat(r!==w?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_DISPLAYMODE",payload:w})},children:Object(z.jsx)("span",{className:"layer-title",children:"Voertuigen"})}),i&&a?Object(z.jsx)("div",{"data-type":"zones",className:"layer".concat(n?"":" layer-inactive"),onClick:function(){t({type:"LAYER_TOGGLE_ZONES_VISIBLE",payload:null})},children:Object(z.jsx)("span",{className:"layer-title",children:"Zones"})}):null]})})}a(232);var le=function(e){var t=Object(m.d)((function(e){return!!e.layers&&e.layers.zones_visible})),a=Object(m.d)((function(e){return e.layers?e.layers.displaymode:w})),n=[];t&&n.push("zones-geodata");var r="";switch(a){case N:n.push("vehicles-heatmap-city-level"),r="vehicles";break;case k:n.push("vehicles-clusters"),n.push("vehicles-clusters-count"),n.push("vehicles-clusters-point"),r="vehicles-clusters";break;case w:n.push("vehicles-point"),r="vehicles";break;case"verhuurdata":n.push("rentals-point"),r="rentals"}return Object(z.jsxs)("div",{className:"flex flex-col",children:[Object(z.jsx)("div",{className:"hidden sm:block",children:Object(z.jsx)(se,{layers:n})}),Object(z.jsx)("div",{className:"flex-1 bg-red-400",children:Object(z.jsx)(ce,{mapContainer:e.mapContainer,layers:n,activeSource:r})})]})};a(233);function de(e){var t=Object(m.d)((function(e){return!!e.ui&&e.ui.FILTERBAR}));return Object(z.jsx)("div",{className:"ContentPage ".concat(t?"":"full-page"),style:{overflowY:"auto"},children:Object(z.jsx)("div",{className:"ContentPage-inner py-8 pl-12",children:e.children})})}var ue=a(204),me=a(404),fe=a(405),be=a(409),pe=a(200),je=a(201),he=a(89),ve=a(205),ge=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=[];if(""!==t.zones)n.push("zone_ids="+t.zones);else if(""!==t.gebied){var r=[],i=a.gebieden.find((function(e){return e.gm_code===t.gebied}));void 0!==i&&(r=a.zones.filter((function(e){return e.municipality===i.gm_code&&e.name===i.name}))),1===r.length?n.push("zone_ids="+r[0].zone_id):console.error("zero or multiple multiple zones found for a single municipality (%s)",t.gebied,r)}if(""!==t.aanbiedersexclude&&void 0!==t.aanbiedersexclude){var c=t.aanbiedersexclude.split(","),o=a.aanbieders.filter((function(e){return!1===c.includes(e.system_id)})).map((function(e){return e.system_id})).join(",");n.push("operators="+o)}else 1===a.aanbieders.length&&n.push("operators="+a.aanbieders[0].system_id);if(""!==t.voertuigtypesexclude&&void 0!==t.voertuigtypesexclude){var s=t.voertuigtypesexclude.split(","),l=a.vehicle_types.filter((function(e){return!1===s.includes(e.id)})).map((function(e){return e.id})).join(",");n.push("form_factors="+l)}if(e){var d=(new Date).toISOString().replace(/.\d+Z$/g,"Z");""!==t.datum&&(d=new Date(t.datum).toISOString().replace(/.\d+Z$/g,"Z")),n.push("timestamp="+d)}else{var u=(new Date).toISOString().replace(/.\d+Z$/g,"Z"),m=u,f=function(){return!t||""===t.intervalstart||""===t.intervalend||void 0===t.intervalstart||void 0===t.intervalend};f()||(u=new Date(t.intervalstart).toISOString().replace(/.\d+Z$/g,"Z"),m=new Date(t.intervalend).toISOString().replace(/.\d+Z$/g,"Z")),n.push("start_time="+u+"&end_time="+m)}return n},Oe=function(e){return!!e.authentication.user_data},ye=function(){var e=Object(H.a)(P.a.mark((function e(t,a,n){var r,i,c,o,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/".concat(a,"?start_time=2021-01-01T18:00:00Z&end_time=2021-12-14T18:00:00Z&aggregation_level=").concat(n.aggregationLevel),(i=ge(!0,n.filter,n.metadata)).length>0&&(r+="&"+i.join("&")),console.log("url",r),c={headers:{authorization:"Bearer ".concat(t)}},e.next=7,fetch(r,c);case 7:return o=e.sent,e.next=10,o.json();case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),xe=["start_interval"],_e=function(e,t,a){if(!t||!t["".concat(e,"_aggregated_stats")]||!t["".concat(e,"_aggregated_stats")].values)return[];var n=function(e){return"day"===e?"YYYY-MM-DD":"week"===e?"YYYY-[w]W":"month"===e?"YYYY-MM":void 0};return t["".concat(e,"_aggregated_stats")].values.map((function(e){var t=e.start_interval,r=Object(ue.a)(e,xe);return Object(o.a)(Object(o.a)({},r),{name:p()(t).format(n(a))})}))},Ee=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.x,a=e.y,n=(e.stroke,e.payload);return Object(z.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:Object(z.jsx)("text",{x:0,y:0,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)",children:n.value})})}}]),a}(n.PureComponent),Se=function(e,t){return Object(z.jsx)("div",{style:{width:"100%",height:"400px",overflowX:"auto",overflowY:"hidden"},children:Object(z.jsx)(me.a,{children:Object(z.jsxs)(fe.a,{height:400,data:e,margin:{top:10,right:30,left:0,bottom:0},children:[Object(z.jsx)(be.a,{strokeDasharray:"3 3"}),Object(z.jsx)(pe.a,{dataKey:"name",height:100,tick:Object(z.jsx)(Ee,{})}),Object(z.jsx)(je.a,{}),Object(z.jsx)(he.a,{}),(a=e[0],a?Object.keys(a).filter((function(e,t){return"name"!==e&&e})):[]).map((function(e){var a=q(t,e);return Object(z.jsx)(ve.a,{stackId:"1",type:"monotone",dataKey:e,stroke:a,fill:a,isAnimationActive:!1},e)}))]})})});var a};var Ne=function(e){var t=Object(m.d)((function(e){return e.authentication.user_data.token})),a=Object(m.d)((function(e){return e.filter})),r=Object(m.d)((function(e){return e.metadata})),i=Object(n.useState)([]),c=Object(A.a)(i,2),o=c[0],s=c[1],l=Object(n.useState)([]),d=Object(A.a)(l,2),u=d[0],f=d[1],b=Object(n.useState)("month"),p=Object(A.a)(b,2),j=p[0],h=p[1];return Object(n.useEffect)((function(){function e(){return(e=Object(H.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t,"available_vehicles",{filter:a,metadata:r,aggregationLevel:j});case 2:n=e.sent,s(_e("available_vehicles",n,j));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!r||!r.zones||r.zones.length<=0||function(){e.apply(this,arguments)}()}),[j,a,r,t]),Object(n.useEffect)((function(){function e(){return(e=Object(H.a)(P.a.mark((function e(){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t,"rentals",{filter:a,metadata:r,aggregationLevel:j});case 2:n=e.sent,f(_e("rentals",n,j));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!r||!r.zones||r.zones.length<=0||function(){e.apply(this,arguments)}()}),[j,a,r,t]),Object(z.jsxs)("div",{children:[Object(z.jsx)("button",{className:"mx-2",onClick:function(){h("day")},children:"day"}),Object(z.jsx)("button",{className:"mx-2",onClick:function(){h("week")},children:"week"}),Object(z.jsx)("button",{className:"mx-2",onClick:function(){h("month")},children:"month"}),Object(z.jsx)("h1",{className:"text-4xl my-2",children:"Beschikbare voertuigen"}),Se(o,r.aanbieders),Object(z.jsx)("h1",{className:"text-4xl my-2",children:"Verhuringen"}),Se(u,r.aanbieders)]})},ke=function(){var e=Object(n.useState)(""),t=Object(A.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(""),c=Object(A.a)(i,2),o=c[0],s=c[1],l=Object(n.useState)(!1),d=Object(A.a)(l,2),u=d[0],f=d[1],b=Object(n.useState)(null),p=Object(A.a)(b,2),j=p[0],h=p[1],v=Object(n.useState)(!1),g=Object(A.a)(v,2),O=g[0],y=g[1],x=Object(m.c)(),_=function(e){e.preventDefault(),h(null);var t={loginId:a,password:o,applicationId:"bf901170-a2db-4f91-8ca7-24921e961193"};fetch("https://auth.deelfietsdashboard.nl/api/login",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){x({type:"RESET_FILTER",payload:null}),x({type:"SET_USER",payload:e}),y(!0),document.location="/map/park"})).catch((function(e){console.error("Login failed! (%s)",e.message),h("Login mislukt. Heb je het juiste e-mailadres en wachtwoord ingevuld?"),y(!1)}))},E=function(e){e.preventDefault(),h(null);var t={loginId:a};return fetch("https://auth.deelfietsdashboard.nl/api/user/forgot-password",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),!0})).catch((function(e){return console.log(e),h("Dank voor je verzoek voor een wachtwoord-resetmail. Het opvragen van je wachtwoord werkt nog niet in dit nieuwe Dashboard. Stuur alsjeblieft een mail aan info@deelfietsdashboard.nl met je e-mailadres, dan zorgen wij dat je een wachtwoord-herstel-link ontvangt. Dank!"),!1}))};return O?Object(z.jsx)(R.a,{to:"/"}):u?Object(z.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(z.jsxs)("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(z.jsx)("h3",{className:"text-2xl font-bold text-center",children:"Wachtwoord herstellen"}),Object(z.jsxs)("form",{children:[Object(z.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(z.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"Email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value)}}),j&&Object(z.jsx)("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:Object(z.jsx)("span",{className:"block sm:inline",children:j})}),Object(z.jsxs)("div",{className:"flex items-baseline justify-between",children:[Object(z.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:E,children:"Herstel"}),Object(z.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){h(null),f(!1)},children:"Annuleer"})]})]})]})}):Object(z.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:Object(z.jsxs)("div",{className:"px-8 py-6 mt-4 text-left bg-white shadow-lg",children:[Object(z.jsx)("h3",{className:"text-2xl font-bold text-center",children:"Login"}),Object(z.jsxs)("form",{children:[Object(z.jsx)("label",{className:"block",htmlFor:"emailaddress",children:"Email"}),Object(z.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",autoCapitalize:"off",placeholder:"email",name:"emailaddress",required:!0,onChange:function(e){return r(e.target.value)}}),Object(z.jsx)("label",{className:"mt-4 block",htmlFor:"password",children:"Wachtwoord"}),Object(z.jsx)("input",{className:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600",type:"password",placeholder:"Wachtwoord",name:"password",required:!0,onChange:function(e){return s(e.target.value)}}),j&&Object(z.jsx)("div",{className:"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:Object(z.jsx)("span",{className:"block sm:inline",children:j})}),Object(z.jsxs)("div",{className:"flex items-baseline justify-between",children:[Object(z.jsx)("button",{className:"px-6 py-2 mr-4 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:_,children:"Login"}),Object(z.jsx)("button",{className:"px-6 py-2 mt-4 text-white bg-blue-600 rounded-lg hover:bg-blue-900",onClick:function(){return f(!0)},children:"Wachtwoord vergeten"})]})]})]})})},we=function(){var e=Object(H.a)(P.a.mark((function e(t,a,n){var r,i,c,o,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.user_data&&n){e.next=2;break}return e.abrupt("return");case 2:if(a){e.next=4;break}return e.abrupt("return");case 4:return r=p()(n).format("YYYY-MM-DDTHH:mm:ss[Z]"),i="https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp="+r+"&operators="+a,c={headers:{authorization:"Bearer "+t.user_data.token}},e.next=9,fetch(i,c);case 9:if((o=e.sent).ok){e.next=13;break}return console.error("unable to fetch: %o",o),e.abrupt("return",!1);case 13:return e.next=15,o.json();case 15:return s=e.sent,e.abrupt("return",s.park_events||!1);case 17:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Te=[],Le=function(e){var t=[];return e.map((function(e){return t.indexOf(e.bike_id)<=-1&&t.push(e.bike_id),e})),t};var Me=function(e){var t=Object(m.d)((function(e){return!!e.authentication&&e.authentication}));return Object(n.useEffect)((function(e){var a=function(){var e=Object(H.a)(P.a.mark((function e(){var a,n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=p()().toISOString(),[],n=[],r=0;case 3:if(!(r<=20)){e.next=13;break}return a=p()(a).subtract(6,"hours").toISOString(),e.next=7,we(t,"htm",a);case 7:e.sent.map((function(e){return n.push(e),e})),Te[r]=Le(n);case 10:r++,e.next=3;break;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a()}),[t]),Object(z.jsxs)("div",{className:"mt-12",children:[Object(z.jsx)("h1",{className:"text-2xl my-2",children:"Monitoring"}),Object(z.jsxs)("p",{className:"py-2",children:["Voor ","htm"," willen we controleren hoeveel unieke voertuig-IDs er zijn door te de tijd heen."]}),Object(z.jsx)("p",{className:"py-2",children:"Op deze manier kunnen we afleiden of er aan de standaard wordt voldaan. Er moeten statische voertuig-IDs zijn. Als dit niet het geval is, zul je zien dat er na verloop van tijd veel meer voertuig-IDs zijn geregistreerd dan het aantal voertuigen dat de aanbieder heeft. Op die manier weet je dat denog niet voldaan wordt aan de gevraagde datastandaard."}),Object(z.jsx)("p",{className:"py-2",children:"De snapshots zijn steeds gemaakt met 6 uur ertussen."}),Object(z.jsx)("pre",{children:Te?Te.map((function(e,t){return Object(z.jsxs)("div",{children:["Number of UUIDs after ",Object(z.jsxs)("b",{children:[t," snapshots"]}),": ",Object(z.jsx)("b",{children:e.length})]},t)})):""}),Object(z.jsxs)("table",{className:"table-auto bg-white hidden",children:[Object(z.jsx)("thead",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"Datum/tijd"}),Object(z.jsx)("th",{children:"Cumulatief aantal voertuig-IDs"})]})}),Object(z.jsx)("tbody",{children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:"datumtijd"}),Object(z.jsx)("td",{children:"aantal"})]})})]})]})};a(127);var De=function(e){var t=e.closeFunction,a=e.children;return Object(z.jsx)("div",{className:"modalbox-bg",onClick:function(){return t(!1)},children:Object(z.jsxs)("div",{className:"modalbox",onClick:function(e){return e.stopPropagation()},children:[Object(z.jsx)("div",{className:"absolute absolute top-0 right-0",children:Object(z.jsx)(G,{onClick:function(){return t(!1)}})}),Object(z.jsx)("div",{className:"grid-cols-4",children:a})]})})};a(368);var Ce=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.gebieden?e.metadata.gebieden:[]})),a=Object(m.d)((function(e){return e.filter?e.filter.gebied:""})),r=Object(n.useState)(!1),i=Object(A.a)(r,2),c=i[0],o=i[1],s=Object(n.useState)(""),l=Object(A.a)(s,2),d=l[0],u=l[1],f=function(t){e({type:"SET_FILTER_GEBIED",payload:t})},b=function(e){u(e.target.value)},p=function(e){u("")},j=t.find((function(e){return e.gm_code===a}))||"";return 1===t.length?Object(z.jsxs)("div",{className:"filter-plaats-container filter-plaats-not-active",children:[Object(z.jsx)("div",{className:"filter-plaats-title",onClick:function(e){o(!c)},children:"Plaats"}),Object(z.jsx)("div",{className:"filter-plaats-box-row cursor-pointer flex flex-col justify-center",children:Object(z.jsx)("div",{className:"filter-plaats-value ",children:""===j?"Alle Gebieden":j.name})})]}):Object(z.jsxs)("div",{className:"filter-plaats-container",children:[Object(z.jsx)("div",{className:"filter-plaats-title",onClick:function(e){o(!c)},children:"Plaats"}),Object(z.jsxs)("div",{className:"filter-plaats-box-row cursor-pointer flex flex-col justify-center",children:[Object(z.jsx)("div",{className:"filter-plaats-value",onClick:function(e){o(!c)},children:""===j?"Alle Gebieden":j.name}),c?function(e){var t=e.filter((function(e){return""===d||e.name.toLowerCase().includes(d.toLowerCase())}));return Object(z.jsx)(De,{closeFunction:o,children:Object(z.jsxs)("div",{className:"filter-form-selectie",children:[Object(z.jsxs)("div",{className:"filter-form-search-container mb-3",children:[Object(z.jsx)("div",{className:"filter-form-title",children:"Selecteer Plaats"}),Object(z.jsxs)("div",{className:"filter-form-search-container-2",children:[Object(z.jsx)("input",{type:"text",className:"filter-form-search",onChange:b,value:d,placeholder:"zoek"}),Object(z.jsx)("div",{className:"ml-3 flex flex-col justify-center h-full",children:""!==d?Object(z.jsx)("div",{className:"filter-plaats-img-cancel",onClick:p}):Object(z.jsx)("div",{className:"filter-plaats-img-search"})})]}),Object(z.jsx)("div",{children:"\xa0"})]}),Object(z.jsxs)("div",{className:"filter-form-values",children:[""===a?Object(z.jsx)("div",{className:"form-item-selected form-item",onClick:function(e){o(!1)},children:"Alle Gebieden"},"item-alle"):Object(z.jsx)("div",{className:"form-item",onClick:function(e){o(!1),f("")},children:"Alle Gebieden"},"item-alle"),t.map((function(e){return a===e.gm_code?Object(z.jsx)("div",{className:"form-item-selected form-item",onClick:function(e){o(!1),f("")},children:e.name},"item-"+e.gm_code):Object(z.jsx)("div",{className:"form-item",onClick:function(t){o(!1),f(e.gm_code)},children:e.name},"item-"+e.gm_code)}))]})]})})}(t):null,""!==a?Object(z.jsx)("div",{className:"filter-plaats-img-cancel",onClick:function(t){t.preventDefault(),e({type:"SET_FILTER_GEBIED",payload:""})}}):null,Object(z.jsx)("div",{className:"flex flex-col justify-center h-full",children:Object(z.jsx)("div",{className:"filter-plaats-img-search",onClick:function(e){o(!c)}})})]})]})},Ie=(a(369),a(370),a(371),a(372),a(202)),Re=a.n(Ie),Ae=a.p+"static/media/calendar.0fe3dc2a.svg";var ze=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.filter?e.filter.datum:(new Date).toISOString()})),a=function(t){e({type:"SET_FILTER_DATUM",payload:t.toISOString()})};return Object(z.jsxs)("div",{className:"filter-datum-container",children:[Object(z.jsx)("div",{className:"filter-datum-title",children:"Datum"}),Object(z.jsxs)("div",{className:"filter-datum-box-row",children:[Object(z.jsxs)("div",{className:"filter-datum-box-1",children:[Object(z.jsx)("div",{className:"filter-datum-caret",onClick:function(){a(p()(t).subtract(1,"hours"))},children:"\u2039"}),Object(z.jsx)("div",{className:"filter-datum-dtpicker",children:Object(z.jsx)(Re.a,{onChange:a,value:new Date(t),clearIcon:null,calendarIcon:Object(z.jsx)("img",{src:Ae,alt:"Logo"}),format:"y-MM-dd H:mm"})}),Object(z.jsx)("div",{className:"filter-datum-caret",onClick:function(){a(p()(t).add(1,"hours"))},children:"\u203a"})]}),Object(z.jsx)("div",{className:"filter-datum-box-2",onClick:function(){a(new Date)},title:"Toon huidige datum en tijd",children:Object(z.jsx)("div",{className:"filter-datum-img-play"})})]})]})};var Ge=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.filter?e.filter.intervalstart:(new Date).toISOString()})),a=Object(m.d)((function(e){return e.filter?e.filter.intervalend:(new Date).toISOString()})),r=Object(n.useState)(!1),i=Object(A.a)(r,2),c=i[0],o=i[1],s=Object(n.useState)(!1),l=Object(A.a)(s,2),d=l[0],u=l[1],f=function(t){if(t.preventDefault(),t.target.validity.valid){var a=new Date(t.target.value).toISOString();e({type:c?"SET_FILTER_INTERVAL_START":"SET_FILTER_INTERVAL_END",payload:a})}},b=new Date(t).toLocaleString(),p=new Date(a).toLocaleString();return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("div",{className:"filter-item",onClick:function(e){o(!0),u(!0)},children:[Object(z.jsx)("div",{className:"filter-title",children:"Start"}),Object(z.jsx)("div",{className:"filter-value",children:b})]}),Object(z.jsxs)("div",{className:"filter-item",onClick:function(e){o(!1),u(!0)},children:[Object(z.jsx)("div",{className:"filter-title",children:"Eind"}),Object(z.jsx)("div",{className:"filter-value",children:p})]}),d?function(e){var n=function(e){var t=new Date(e),a=function(e){return(e<10?"0":"")+e};return t.getFullYear()+"-"+a(t.getMonth()+1)+"-"+a(t.getDate())+"T"+a(t.getHours())+":"+a(t.getMinutes())+":"+a(t.getSeconds())}(e?t:a);return Object(z.jsx)(De,{className:"min-width-48",closeFunction:u,children:Object(z.jsxs)("div",{className:"filter-form-selectie",children:[Object(z.jsx)("div",{className:"filter-form-title",children:"Selecteer Datum"}),Object(z.jsxs)("form",{className:"h-12 w-auto flex flex-row border-solid border-4 border-light-blue-500 box-border",children:[Object(z.jsx)("input",{className:"bg-transparent flex-2 flex-grow",type:"datetime-local",value:n,onChange:f}),Object(z.jsx)("div",{className:"flex-2"})]},"f-end"),Object(z.jsx)("div",{className:"flex-none closebutton text-center mt-4",onClick:function(e){return u(!1)},children:"OK"})]})})}():null]})};a(391);var Fe=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.aanbieders?e.metadata.aanbieders:[]})),a=Object(m.d)((function(e){return e.filter?e.filter.aanbiedersexclude:[]})),n=function(n){(a||"").split(",").length!==t.length-1&&e({type:"ADD_TO_FILTER_AANBIEDERS_EXCLUDE",payload:n.system_id})};return Object(z.jsxs)("div",{className:"filter-aanbieders-container",children:[Object(z.jsxs)("div",{className:"filter-aanbieders-title-row",children:[Object(z.jsx)("div",{className:"filter-aanbieders-title",children:"Aanbieders"}),""!==a?Object(z.jsx)("div",{className:"filter-aanbieders-reset cursor-pointer",onClick:function(t){e({type:"CLEAR_FILTER_AANBIEDERS_EXCLUDE",payload:""})},children:"reset"}):null]}),Object(z.jsx)("div",{className:"filter-aanbieders-box-row",children:t.map((function(r,i){var c=a?a.includes(r.system_id):"",o=c?function(t){t.stopPropagation(),function(t){e({type:"REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE",payload:t.system_id})}(r)}:function(e){var i;e.stopPropagation(),i=r,""===a?t.map((function(e){return e.system_id!==i.system_id&&n(e),e})):n(i)};return Object(z.jsxs)("div",{className:"filter-aanbieders-item ".concat(c?" not-active":""),onClick:o,children:[Object(z.jsx)("div",{className:"filter-aanbieders-marker",children:Object(z.jsxs)("svg",{viewBox:"0 0 30 30",children:[Object(z.jsx)("circle",{cx:"50%",cy:"50%",r:"40%",fill:"#000000"}),Object(z.jsx)("circle",{cx:"50%",cy:"50%",r:"35%",fill:"#FFFFFF"}),Object(z.jsx)("circle",{cx:"70%",cy:"25%",r:"25%",fill:r.color.toString()})]})}),Object(z.jsx)("div",{className:"filter-aanbieders-itemlabel",children:r.name})]},r.name)}))})]})};a(392);var Be=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata&&e.metadata.zones?e.metadata.zones:[]})),a=Object(m.d)((function(e){return e.filter?e.filter.zones:0})),r=Object(m.d)((function(e){return e.filter?e.filter.gebied:0})),i=Object(n.useState)(!1),c=Object(A.a)(i,2),o=c[0],s=c[1],l=Object(n.useState)(""),d=Object(A.a)(l,2),u=d[0],f=d[1],b=function(t){e({type:"REMOVE_FROM_FILTER_ZONES",payload:t})},p=function(e){f(e.target.value)},j=function(e){f("")},h=[],v="";try{var g=(h=a.split(",")).length;if(g>1)v=g+" zones";else{var O=t.find((function(e){return e.zone_id.toString()===h[0]}));v=O&&O.name||""}}catch(_){v=""}""===v&&(v="Alle Zones");var y=""!==r,x=t.filter((function(e){return h.includes(e.zone_id.toString())}));return y?Object(z.jsxs)("div",{className:"filter-zones-container ".concat(!0===y?"":"not-active"),children:[Object(z.jsx)("div",{className:"filter-zones-title",onClick:function(e){y&&s(!o)},children:"Zones"}),Object(z.jsxs)("div",{className:"filter-zones-box-row",children:[Object(z.jsx)("div",{className:"filter-zones-value flex flex-col justify-center cursor-pointer h-full",onClick:function(e){y&&s(!o)},children:v}),""!==a?Object(z.jsx)("div",{className:"filter-zones-img-cancel",onClick:function(){e({type:"CLEAR_FILTER_ZONES",payload:null})}}):null,o?function(t){var n=t.filter((function(e){return""===u||e.name.toLowerCase().includes(u.toLowerCase())}));return Object(z.jsx)(De,{closeFunction:s,children:Object(z.jsxs)("div",{className:"filter-form-selectie",children:[Object(z.jsxs)("div",{className:"filter-form-search-container mb-3",children:[Object(z.jsx)("div",{className:"filter-form-title",children:"Selecteer Zones"}),Object(z.jsxs)("div",{className:"filter-form-search-container-2",children:[Object(z.jsx)("input",{type:"text",className:"filter-form-search",onChange:p,value:u,placeholder:"zoek"}),Object(z.jsx)("div",{className:"ml-3 flex flex-col justify-center h-full",children:""!==u?Object(z.jsx)("div",{className:"filter-zones-img-cancel cursor-pointer",onClick:j}):Object(z.jsx)("div",{className:"filter-zones-img-search cursor-pointer"})})]}),Object(z.jsx)("div",{children:"\xa0"})]}),Object(z.jsx)("div",{className:"filter-form-values",children:n.map((function(t){return a.includes(t.zone_id)?Object(z.jsx)("div",{className:" form-item-selected form-item cursor-pointer ",onClick:function(e){e.stopPropagation(),b(t.zone_id)},children:t.name},"item-"+t.zone_id):Object(z.jsx)("div",{className:" form-item cursor-pointer ",onClick:function(a){var n;a.stopPropagation(),n=t.zone_id,e({type:"ADD_TO_FILTER_ZONES",payload:n})},children:t.name},"item-"+t.zone_id)}))})]})})}(t):null,Object(z.jsx)("div",{className:"ml-3 flex flex-col justify-center h-full",children:Object(z.jsx)("div",{className:"filter-zones-img-search cursor-pointer",onClick:function(e){s(!o)}})})]}),Object(z.jsx)("div",{className:"filter-zones-zonelist",children:x.map((function(e){return Object(z.jsxs)("div",{className:"filter-zones-zoneitem",children:[e.name,Object(z.jsx)("div",{className:"filter-zones-img-zoneitem-cancel",onClick:function(t){t.stopPropagation(),b(e.zone_id)},children:"\xd7"})]},e.zone_id)}))})]}):Object(z.jsx)(z.Fragment,{})};a(393);var Ve=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return[{id:0,color:"#1FA024",fillcolor:"#1FA024",name:"< 1 uur"},{id:1,color:"#48E248",fillcolor:"#48E248",name:"< 24 uur"},{id:2,color:"#FFD837",fillcolor:"#FFD837",name:"< 4 d"},{id:3,color:"#FD3E48",fillcolor:"#FD3E48",name:"> 4 d"}]})),a=Object(m.d)((function(e){return e.filter?e.filter.markersexclude:""}))||"",n=function(t){e({type:"ADD_TO_FILTER_MARKERS_EXCLUDE",payload:t})};return Object(z.jsxs)("div",{className:"filter-markers-container",children:[Object(z.jsxs)("div",{className:"filter-markers-title-row",children:[Object(z.jsx)("div",{className:"filter-markers-title",children:"Parkeerduur"}),""!==a?Object(z.jsx)("div",{className:"filter-markers-reset cursor-pointer",onClick:function(){e({type:"CLEAR_FILTER_MARKERS_EXCLUDE",payload:null})},children:"reset"}):null]}),Object(z.jsx)("div",{className:"filter-markers-box-row",children:t.map((function(r){var i=a.split(",").includes(r.id.toString()),c=i?"filter-markers-item-excluded":"filter-markers-item",o=i?function(t){t.stopPropagation(),function(t){e({type:"REMOVE_FROM_FILTER_MARKERS_EXCLUDE",payload:t})}(r.id)}:function(e){var i;e.stopPropagation(),i=r.id,console.log("clickfilter [%s]<",a),""===a?t.map((function(e){return e.id!==i&&n(e.id),e})):n(i)};return Object(z.jsxs)("div",{className:c,children:[Object(z.jsx)("div",{className:"filter-markers-marker",onClick:o,children:Object(z.jsxs)("svg",{viewBox:"0 0 30 30",children:[Object(z.jsx)("circle",{cx:"50%",cy:"50%",r:"40%",fill:r.color}),Object(z.jsx)("circle",{cx:"50%",cy:"50%",r:"34%",fill:r.fillcolor})]})}),Object(z.jsx)("div",{className:"filter-markers-itemlabel",children:r.name})]},r.id)}))})]})};a(394);var Ue=function(){var e=Object(m.c)(),t=Object(m.d)((function(e){return e.metadata.vehicle_types&&e.metadata.vehicle_types||[]})),a=Object(m.d)((function(e){return Array.isArray(e.filter.voertuigtypesexclude)?"":e.filter?e.filter.voertuigtypesexclude:""}))||"",n=function(n){(a||"").split(",").length!==t.length-1&&e({type:"ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE",payload:n})};return Object(z.jsxs)("div",{className:"filter-voertuigtypes-container",children:[Object(z.jsxs)("div",{className:"filter-voertuigtypes-title-row",children:[Object(z.jsx)("div",{className:"filter-voertuigtypes-title",children:"Vervoerstype"}),""!==a?Object(z.jsx)("div",{className:"filter-voertuigtypes-reset cursor-pointer",onClick:function(){e({type:"CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE",payload:null})},children:"reset"}):null]}),Object(z.jsx)("div",{className:"filter-voertuigtypes-box-row",children:t.map((function(r,i){var c=(a||"").split(",").includes(r.id),o=c?function(t){t.stopPropagation(),function(t){console.log("REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE %s",t),e({type:"REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE",payload:t})}(r.id)}:function(e){var i;e.stopPropagation(),i=r.id,console.log("clickfilter [%s]<",a),""===a?t.map((function(e){return e.id!==i&&n(e.id),e})):n(i)},s="".concat(c?"filter-voertuigtypes-item-excluded":"filter-voertuigtypes-item"),l="";switch(r.id){case"bicycle":l="filter-voertuigtypes-icon-bicycle";break;case"cargo_bicycle":l="filter-voertuigtypes-icon-cargo-bicycle";break;case"moped":l="filter-voertuigtypes-icon-scooter";break;case"car":l="filter-voertuigtypes-icon-car";break;case"unknown":l="filter-voertuigtypes-icon-other"}return Object(z.jsxs)("div",{className:"".concat(s).concat(i===t.length-1?" filter-voertuigtypes-item-last":""),onClick:o,children:[Object(z.jsx)("div",{className:"filter-voertuigtypes-icon ".concat(l),onClick:o}),Object(z.jsx)("div",{className:"filter-voertuigtypes-itemlabel",children:r.name})]},r.id)}))})]})};var Ye=function(){return Object(z.jsx)("img",{alt:"Logo CROW",src:"/images/logo-fietsberaad-crow.svg",width:"82",className:"mx-2"})};var Ze=function(e){var t=e.showinterval,a=void 0!==t&&t,n=(e.visible,Object(m.d)((function(e){return!!e.authentication.user_data})));return Object(z.jsxs)("div",{className:"filter-bar-inner py-2",children:[Object(z.jsx)(Ye,{}),n&&Object(z.jsx)("div",{children:a?Object(z.jsx)(Ge,{}):Object(z.jsx)(ze,{})}),n&&Object(z.jsx)(Ce,{}),n&&Object(z.jsx)(Be,{}),n&&Object(z.jsx)(Ve,{}),n&&Object(z.jsx)(Ue,{}),n&&Object(z.jsx)(Fe,{})]})};var Pe=function(e){var t=e.isVisible;return Object(z.jsx)(oe,{name:"FilterBar",direction:"left",options:{title:"Filters",backgroundColor:"#F6F5F4"},style:{width:"324px",height:"100%",top:0,position:"fixed"},isVisible:t,children:Object(z.jsx)(Ze,{})})};a(395);var He=function(e){return Object(z.jsxs)("div",{className:"\n      MobileSlideBox w-full sm:hidden absolute left-0\n      ".concat(e.isVisible?"block":"hidden","\n    "),children:[Object(z.jsxs)("header",{className:"flex justify-between",children:[Object(z.jsx)("h1",{className:"",children:e.title}),Object(z.jsx)("div",{className:"text-2xl font-bold",onClick:e.closeHandler,children:"\xd7"})]}),Object(z.jsx)("div",{className:"w-full",children:e.children})]})};var Je=function(e){var t=Object(m.c)();return Object(z.jsx)(He,{title:"Lagen",isVisible:e.isVisible,closeHandler:function(){t({type:"SET_VISIBILITY",payload:{name:"FilterBar",visibility:!1}})},children:Object(z.jsx)(Ze,{})})};a(396);function Xe(e){var t=Object(m.c)(),a=Object(m.d)((function(e){return!!e.ui&&e.ui["MenuSecondary.layers"]})),n=Object(m.d)((function(e){return!!e.filter&&""!==e.filter.gebied})),r=Object(m.d)((function(e){return!!e.layers&&e.layers.zones_visible})),i=Object(m.d)((function(e){return e.layers?e.layers.displaymode:w})),c=Object(m.d)((function(e){return!!e.authentication.user_data}));return Object(z.jsx)(He,{title:"Lagen",isVisible:a,closeHandler:function(){t({type:"SET_VISIBILITY",payload:{name:"MenuSecondary.layers",visibility:!1}})},children:Object(z.jsxs)("div",{className:"\n        SelectLayerMobile\n        flex justify-between\n      ",children:[Object(z.jsx)("div",{"data-type":"heat-map",className:"layer".concat(i!==N?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_DISPLAYMODE",payload:N})},children:Object(z.jsx)("span",{className:"layer-title",children:"Heat map"})}),Object(z.jsx)("div",{"data-type":"pointers",className:"layer".concat(i!==k?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_DISPLAYMODE",payload:k})},children:Object(z.jsx)("span",{className:"layer-title",children:"Clusters"})}),Object(z.jsx)("div",{"data-type":"vehicles",className:"layer".concat(i!==w?" layer-inactive":""),onClick:function(){t({type:"LAYER_SET_DISPLAYMODE",payload:w})},children:Object(z.jsx)("span",{className:"layer-title",children:"Voertuigen"})}),c&&n?Object(z.jsx)("div",{"data-type":"zones",className:"layer".concat(r?"":" layer-inactive"),onClick:function(){t({type:"LAYER_TOGGLE_ZONES_VISIBLE",payload:null})},children:Object(z.jsx)("span",{className:"layer-title",children:"Zones"})}):null]})})}var We=[{value:"cykl",system_id:"cykl",name:"Cykl"},{value:"flickbike",system_id:"flickbike",name:"Flickbike"},{value:"donkey",system_id:"donkey",name:"Donkey"},{value:"mobike",system_id:"mobike",name:"Mobike"},{value:"htm",system_id:"htm",name:"HTM"},{value:"gosharing",system_id:"gosharing",name:"GO"},{value:"check",system_id:"check",name:"CHECK"},{value:"felyx",system_id:"felyx",name:"Felyx"},{value:"deelfietsnederland",system_id:"deelfietsnederland",name:"Deelfiets"},{value:"keobike",system_id:"keobike",name:"Keobike"},{value:"lime",system_id:"lime",name:"Lime"},{value:"baqme",system_id:"baqme",name:"BAQME"},{value:"cargoroo",system_id:"cargoroo",name:"Cargoroo"},{value:"uwdeelfiets",system_id:"uwdeelfiets",name:"uwdeelfiets"},{value:"hely",system_id:"hely",name:"Hely"}],Ke=[{gm_code:"",name:"Alle Gebieden"},{gm_code:"GM0518",name:"'s-Gravenhage"},{gm_code:"GM0796",name:"'s-Hertogenbosch"},{gm_code:"GM0613",name:"Albrandswaard"},{gm_code:"GM0141",name:"Almelo"},{gm_code:"GM0034",name:"Almere"},{gm_code:"GM0484",name:"Alphen aan den Rijn"},{gm_code:"GM0307",name:"Amersfoort"},{gm_code:"GM0362",name:"Amstelveen"},{gm_code:"GM0363",name:"Amsterdam"},{gm_code:"GM0200",name:"Apeldoorn"},{gm_code:"GM0202",name:"Arnhem"},{gm_code:"GM0106",name:"Assen"},{gm_code:"GM0489",name:"Barendrecht"},{gm_code:"GM0203",name:"Barneveld"},{gm_code:"GM0373",name:"Bergen (NH"},{gm_code:"GM0753",name:"Best"},{gm_code:"GM0375",name:"Beverwijk"},{gm_code:"GM0377",name:"Bloemendaal"},{gm_code:"GM0758",name:"Breda"},{gm_code:"GM0312",name:"Bunnik"},{gm_code:"GM0313",name:"Bunschoten"},{gm_code:"GM0502",name:"Capelle aan den IJssel"},{gm_code:"GM0310",name:"De Bilt"},{gm_code:"GM0736",name:"De Ronde Venen"},{gm_code:"GM0503",name:"Delft"},{gm_code:"GM0150",name:"Deventer"},{gm_code:"GM0384",name:"Diemen"},{gm_code:"GM0505",name:"Dordrecht"},{gm_code:"GM0228",name:"Ede"},{gm_code:"GM0772",name:"Eindhoven"},{gm_code:"GM0153",name:"Enschede"},{gm_code:"GM0232",name:"Epe"},{gm_code:"GM1771",name:"Geldrop-Mierlo"},{gm_code:"GM1942",name:"Gooise Meren"},{gm_code:"GM0014",name:"Groningen"},{gm_code:"GM0392",name:"Haarlem"},{gm_code:"GM0394",name:"Haarlemmermeer"},{gm_code:"GM0243",name:"Harderwijk"},{gm_code:"GM0246",name:"Heerde"},{gm_code:"GM0794",name:"Helmond"},{gm_code:"GM0164",name:"Hengelo"},{gm_code:"GM0798",name:"Hilvarenbeek"},{gm_code:"GM0402",name:"Hilversum"},{gm_code:"GM0353",name:"IJsselstein"},{gm_code:"GM0166",name:"Kampen"},{gm_code:"GM0542",name:"Krimpen aan den IJssel"},{gm_code:"GM1621",name:"Lansingerland"},{gm_code:"GM0080",name:"Leeuwarden"},{gm_code:"GM1916",name:"Leidschendam-Voorburg"},{gm_code:"GM0327",name:"Leusden"},{gm_code:"GM0809",name:"Loon op Zand"},{gm_code:"GM0556",name:"Maassluis"},{gm_code:"GM1842",name:"Midden-Delfland"},{gm_code:"GM1952",name:"Midden-Groningen"},{gm_code:"GM0356",name:"Nieuwegein"},{gm_code:"GM0267",name:"Nijkerk"},{gm_code:"GM0268",name:"Nijmegen"},{gm_code:"GM1930",name:"Nissewaard"},{gm_code:"GM0820",name:"Nuenen, Gerwen en Nederwetten"},{gm_code:"GM0302",name:"Nunspeet"},{gm_code:"GM0826",name:"Oosterhout"},{gm_code:"GM0431",name:"Oostzaan"},{gm_code:"GM1926",name:"Pijnacker-Nootdorp"},{gm_code:"GM0273",name:"Putten"},{gm_code:"GM0597",name:"Ridderkerk"},{gm_code:"GM0603",name:"Rijswijk"},{gm_code:"GM1674",name:"Roosendaal"},{gm_code:"GM0599",name:"Rotterdam"},{gm_code:"GM0606",name:"Schiedam"},{gm_code:"GM0848",name:"Son en Breugel"},{gm_code:"GM0855",name:"Tilburg"},{gm_code:"GM1730",name:"Tynaarlo"},{gm_code:"GM0344",name:"Utrecht"},{gm_code:"GM1581",name:"Utrechtse Heuvelrug"},{gm_code:"GM0861",name:"Veldhoven"},{gm_code:"GM0622",name:"Vlaardingen"},{gm_code:"GM0865",name:"Vught"},{gm_code:"GM0866",name:"Waalre"},{gm_code:"GM0867",name:"Waalwijk"},{gm_code:"GM0289",name:"Wageningen"},{gm_code:"GM0629",name:"Wassenaar"},{gm_code:"GM1960",name:"West Betuwe"},{gm_code:"GM1783",name:"Westland"},{gm_code:"GM0637",name:"Zoetermeer"},{gm_code:"GM0642",name:"Zwijndrecht"},{gm_code:"GM0193",name:"Zwolle"}],qe=[{id:"bicycle",name:"Fiets"},{id:"cargo_bicycle",name:"Bakfiets"},{id:"moped",name:"Scooter"},{id:"car",name:"Auto"},{id:"unknown",name:"Onbekend"}],$e=void 0,Qe=void 0,et=function e(){var t=6e4;try{if(void 0===$e)return!1;var a=$e.getState();if(function(e){return!!e.authentication.user_data}(a)){var n={headers:{authorization:"Bearer "+a.authentication.user_data.token}};return fetch("https://api.deelfietsdashboard.nl/dashboard-api/menu/acl",n).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){$e.dispatch({type:"SET_GEBIEDEN",payload:e.municipalities}),1===e.municipalities.length&&$e.dispatch({type:"SET_FILTER_GEBIED",payload:e.municipalities[0].gm_code}),$e.dispatch({type:"SET_AANBIEDERS",payload:e.operators});var t=qe;$e.dispatch({type:"SET_VEHICLE_TYPES",payload:t}),$e.dispatch({type:"SET_METADATA_LOADED",payload:!0})}))})).catch((function(e){console.error("unable to decode JSON")})),!0}$e.dispatch({type:"SET_GEBIEDEN",payload:Ke}),$e.dispatch({type:"SET_AANBIEDERS",payload:We}),$e.dispatch({type:"SET_METADATA_LOADED",payload:!0})}catch(r){return console.error("Unable to update ACL",r),t=12e4,!1}finally{Qe=setTimeout(e,t)}},tt=function(){void 0!==Qe&&clearTimeout(Qe),et()};tt();var at=void 0,nt=void 0,rt=function e(){var t=6e4;try{if(void 0===at)return!1;var n=at.getState();if(!1===n.metadata.zones_loaded)return t=500,!1;var r="";if(function(e){return!!e.authentication.user_data}(n)&&n)if(""===n.filter.gebied)r=n.metadata.zones.filter((function(e){return"municipality"===e.zone_type})).map((function(e){return e.zone_id})).join(",");else if(0===n.filter.zones.length){var i=n.metadata.gebieden.filter((function(e){return e.gm_code===n.filter.gebied})).map((function(e){return e.gm_code}));r=n.metadata.zones.filter((function(e){return"municipality"===e.zone_type&&i.includes(e.municipality)})).map((function(e){return e.zone_id})).join(",")}else r=n.filter.zones;else r="";if(""===r)return void at.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}});var c="https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids="+r+"&&include_geojson=true",o={headers:{authorization:"Bearer "+n.authentication.user_data.token}};fetch(c,o).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){var t=a(397),r={type:"FeatureCollection",features:[]},i=void 0;e.zones.forEach((function(e,a){switch(e.geojson.type){case"MultiPolygon":case"Polygon":var n={type:"Feature",geometry:e.geojson};r.features.push(n);var c=t.extent(n);void 0===i?i=c:(i[0]=Math.min(c[0],i[0]),i[1]=Math.min(c[1],i[1]),i[2]=Math.max(c[2],i[2]),i[3]=Math.max(c[3],i[3]));break;default:console.warn("pollMetadataZonesgeodata - don't know how to handle %s",e.type,e)}}));var c={data:r,filter:n.filter.zones,bounds:i};at.dispatch({type:"SET_ZONES_GEODATA",payload:c}),at.dispatch({type:"LAYER_SET_ZONES_EXTENT",payload:i})})).catch((function(e){console.error("unable to decode JSON",e)}))})).catch((function(e){console.error("unable to fetch zone geodata")}))}catch(s){console.error("Unable to update zones",s),t=12e4}finally{nt=setTimeout(e,t)}},it=function(){void 0!==nt&&clearTimeout(nt),rt()},ct=void 0,ot=void 0,st=function e(){var t=6e4;try{if(void 0===ct)return!1;var a=ct.getState();if(!1===a.metadata.metadata_loaded)return t=500,!1;var n="";if(!function(e){return!!e.authentication.user_data}(a)||!a)return ct.dispatch({type:"SET_ZONES",payload:[]}),ct.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}}),void ct.dispatch({type:"SET_ZONES_LOADED",payload:!0});if(""===a.filter.gebied)return ct.dispatch({type:"SET_ZONES",payload:[]}),ct.dispatch({type:"SET_ZONES_GEODATA",payload:{data:{type:"FeatureCollection",features:[]},filter:""}}),void ct.dispatch({type:"SET_ZONES_LOADED",payload:!0});n="https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code="+a.filter.gebied;var r={headers:{authorization:"Bearer "+a.authentication.user_data.token}};fetch(n,r).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){ct.dispatch({type:"SET_ZONES",payload:e.zones}),ct.dispatch({type:"SET_ZONES_LOADED",payload:!0})}))})).catch((function(e){console.error("unable to decode JSON")}))}catch(i){console.error("Unable to update zones",i),t=12e4}finally{ot=setTimeout(e,t)}},lt=function(){void 0!==ot&&clearTimeout(ot),st()},dt=void 0,ut=void 0,mt=function e(){var t=6e4;try{if(void 0===dt)return!1;var n=dt.getState();if(!1===n.metadata.zones_loaded)return t=500,!1;var r=Oe(n)&&n&&n.filter&&n.authentication.user_data.token,i="https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space",c={};if(r){if(null!==n.filter&&null!==n.authenticationdata){i="https://api.deelfietsdashboard.nl/dashboard-api/park_events";var o=ge(!0,n.filter,n.metadata);o.length>0&&(i+="?"+o.join("&")),c={headers:{authorization:"Bearer "+n.authentication.user_data.token}}}}else{var s=ge(!0,n.filter,n.metadata);s.length>0&&(i+="?"+s.join("&"))}fetch(i,c).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){Oe(n)&&(e=e.park_events);var t={type:"FeatureCollection",features:[]},r={};n.metadata.aanbieders.forEach((function(e){r[e.system_id||e.value]=e.color}));var i=a(57),c=p()(n.filter.datum),o=n.filter.markersexclude.split(",");e.forEach((function(e){var a,r=Oe(n)?e.start_time:e.in_public_space_since,s=c.diff(p()(r),"minutes"),l=(a=s)<=60?0:a<=1440?1:a<=5760?2:3,d={type:"Feature",properties:{id:i(e.location.latitude+e.location.longitude),system_id:e.system_id||e.value,in_public_space_since:r,duration_bin:l},geometry:{type:"Point",coordinates:[e.location.longitude,e.location.latitude,0]}};!o.includes(l.toString())&&t.features.push(d)})),console.log("geoJson in pollParkingData",t),dt.dispatch({type:"SET_VEHICLES",payload:t})})).catch((function(e){console.error("unable to decode JSON")}))})).catch((function(e){console.error("fetch error - unable to fetch JSON from %s",i)}))}catch(l){console.error("Unable to update zones",l),t=12e4}finally{ut=setTimeout(e,t)}},ft=function(){void 0!==ut&&clearTimeout(ut),mt()},bt=void 0,pt=void 0,jt=function e(){var t=6e4;try{if(void 0===bt)return console.log("no redux state available yet - skipping zones update"),!1;var n=bt.getState();if(Oe(n)&&n&&n.filter&&n.authentication.user_data.token){var r="https://api.deelfietsdashboard.nl/dashboard-api/public/trips_in_public_space",i={};if(null!==n.filter&&null!==n.authenticationdata){r="https://api.deelfietsdashboard.nl/dashboard-api/trips";var c=ge(!1,n.filter,n.metadata);c.length>0&&(r+="?"+c.join("&")),i={headers:{authorization:"Bearer "+n.authentication.user_data.token}}}fetch(r,i).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){var t=[];Oe&&(t=e.trips);var n={type:"FeatureCollection",features:[]},r=a(57);t.forEach((function(e){var t={type:"Feature",properties:{id:r(e.start_location.latitude+e.start_location.longitude),system_id:e.system_id,color:"#38ff71"},geometry:{type:"Point",coordinates:[e.start_location.longitude,e.start_location.latitude,0]}};n.features.push(t);var a={type:"Feature",properties:{id:r(e.end_location.latitude+e.end_location.longitude),system_id:e.system_id,color:"#cc0000"},geometry:{type:"Point",coordinates:[e.end_location.longitude,e.end_location.latitude,0]}};n.features.push(a)})),bt.dispatch({type:"SET_TRIPS",payload:n})})).catch((function(e){console.error("unable to decode JSON")}))})).catch((function(e){console.error("fetch error - unable to fetch JSON from %s",r)}))}else bt.dispatch({type:"SET_TRIPDATA",payload:[]})}catch(o){console.error("Unable to update zones",o),t=12e4}finally{pt=setTimeout(e,t)}},ht=function(){void 0!==pt&&clearTimeout(pt),jt()},vt=void 0,gt=void 0,Ot=function e(){var t=6e4;try{if(void 0===vt)return console.log("no redux state available yet - skipping zones update"),!1;var a=vt.getState();if(Oe(a)&&a&&a.filter&&a.authentication.user_data.token){var n="https://api.deelfietsdashboard.nl/dashboard-api/rentals",r={};if(null!==a.filter&&null!==a.authenticationdata){n="https://api.deelfietsdashboard.nl/dashboard-api/rentals";var i=ge(!0,a.filter,a.metadata);i.length>0&&(n+="?"+i.join("&")),r={headers:{authorization:"Bearer "+a.authentication.user_data.token}}}fetch(n,r).then((function(e){if(!e.ok)return console.error("unable to fetch: %o",e),!1;e.json().then((function(e){console.log("update verhuringen data - response json",e);var t=[];Oe&&(t=e.verhuringen);t.start_rentals.forEach((function(e){})),vt.dispatch({type:"SET_VERHURINGEN",payload:{type:"FeatureCollection",features:[]}})})).catch((function(e){console.error("unable to decode JSON")}))})).catch((function(e){console.error("fetch error - unable to fetch JSON from %s",n)}))}else vt.dispatch({type:"SET_VERHUURDATA",payload:[]})}catch(c){console.error("Unable to update zones",c),t=12e4}finally{gt=setTimeout(e,t)}},yt=function(){void 0!==gt&&clearTimeout(gt),Ot()};a(398);var xt=function(){var e=Object(n.useRef)(null),t=Object(m.d)((function(e){return!!e.authentication.user_data})),a=(Object(m.d)((function(e){return!!e.filter&&e.filter.visible})),Object(m.d)((function(e){return!!e.ui&&e.ui.FilterBar}))),r=Object(m.d)((function(e){return e.filter}));Object(n.useEffect)((function(){ct=kt,lt(),function(e){at=e}(kt),function(e){$e=e}(kt),function(e){dt=e,ft()}(kt),function(e){bt=e,ht()}(kt),function(e){vt=e,yt()}(kt),lt(),it(),tt()})),Object(n.useEffect)((function(){ht(),ft(),yt()}),[r]);var i=function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{className:"hidden sm:block",children:Object(z.jsx)(Pe,{isVisible:t&&a,showinterval:!1})}),Object(z.jsx)("div",{className:"block sm:hidden",children:Object(z.jsx)(Je,{isVisible:t&&a,showinterval:!1})}),Object(z.jsx)(Xe,{})]})},c=function(){return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{ref:e,className:"map-layer"}),Object(z.jsx)(Y,{}),i()]})};return Object(z.jsx)(I.a,{children:Object(z.jsx)("div",{className:"app",children:Object(z.jsxs)("div",{className:"gui-layer",children:[Object(z.jsxs)(R.d,{children:[Object(z.jsxs)(R.b,{exact:!0,path:"/",children:[Object(z.jsx)(le,{mapContainer:e}),c()]}),Object(z.jsx)(R.b,{exact:!0,path:"/login",children:Object(z.jsx)(ke,{})}),Object(z.jsxs)(R.b,{exact:!0,path:"/map/park",children:[Object(z.jsx)(le,{mapContainer:e}),c()]}),Object(z.jsxs)(R.b,{exact:!0,path:"/map/rentals",children:[Object(z.jsx)(le,{mapContainer:e}),c()]}),Object(z.jsxs)(R.b,{exact:!0,path:"/stats/overview",children:[Object(z.jsx)(de,{children:Object(z.jsx)(Ne,{})}),i()]}),Object(z.jsx)(R.b,{exact:!0,path:"/monitoring",children:Object(z.jsx)(Me,{})})]}),Object(z.jsx)(V,{})]})})})},_t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.c,Et=a(57),St=localStorage.getItem("CROWDD_reduxState"),Nt=St?JSON.parse(St):{},kt=Object(f.d)(C,Nt,_t(Object(f.a)(j.a)));kt.subscribe((function(){var e=kt.getState(),t=localStorage.getItem("CROWDD_filterhash")||!1,a=Et(JSON.stringify(e.filter));a!==t&&(localStorage.setItem("CROWDD_filterhash",a),kt.dispatch({type:"CLEAR_ZONES",payload:null}),kt.dispatch({type:"CLEAR_VEHICLES",payload:null}));var n={last_update:p()().unix(),authentication:e.authentication,filter:e.filter,layers:e.layers,ui:e.ui};localStorage.setItem("CROWDD_reduxState",JSON.stringify(n))}));var wt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(z.jsx)(m.a,{store:kt,children:Object(z.jsx)(xt,{content:this.props.content})})}}]),a}(n.Component);var Tt=wt=function(e,t){for(var a=arguments.length,n=new Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];var i=m.b.apply(void 0,n)(t);return function(t){return Object(z.jsx)(i,Object(o.a)(Object(o.a)({},t),{},{store:e}))}}(kt,wt,(function(e){return{}}),(function(e){return{}})),Lt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,411)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),i(e),c(e)}))};c.a.render(Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(Tt,{})}),document.getElementById("root")),Lt()}},[[399,1,2]]]);
//# sourceMappingURL=main.021802e8.chunk.js.map