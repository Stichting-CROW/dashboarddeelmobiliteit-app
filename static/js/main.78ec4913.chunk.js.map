{"version":3,"sources":["reducers/metadata.js","reducers/vehicles.js","reducers/rentals.js","reducers/filter.js","reducers/authentication.js","reducers/zones_geodata.js","reducers/layers.js","reducers/ui.js","reducers/statsreducer.js","reducers/index.js","reducers/last_update.js","components/Menu.jsx","actions/authentication.js","actions/actionTypes.js","components/Menu/MenuSecondary.jsx","helpers/providers.js","components/Map/layers/index.js","components/Map/layers/vehicles-point.js","components/Map/layers/vehicles-clusters.js","components/Map/layers/vehicles-clusters-count.js","components/Map/layers/vehicles-clusters-point.js","components/Map/layers/vehicles-heatmap-city-level.js","components/Map/layers/rentals-origins-point.js","components/Map/layers/rentals-origins-clusters.js","components/Map/layers/rentals-origins-clusters-count.js","components/Map/layers/rentals-origins-clusters-point.js","components/Map/layers/rentals-origins-heatmap-city-level.js","components/Map/layers/rentals-destinations-point.js","components/Map/layers/rentals-destinations-clusters.js","components/Map/layers/rentals-destinations-clusters-count.js","components/Map/layers/rentals-destinations-clusters-point.js","components/Map/layers/rentals-destinations-heatmap-city-level.js","components/Map/layers/zones-geodata.js","components/Map/layers/zones-geodata-border.js","components/Map/sources.js","components/Map/vehicle_marker.js","components/Map/MapComponent.jsx","components/SlideBox/SlideBox.jsx","components/SelectLayer/SelectLayer.jsx","poll-api/pollTools.js","api/parkEventsStats.js","components/MetaStats/MetaStats.jsx","pages/MapPage.jsx","pages/ContentPage.jsx","components/Chart/chartTools.js","api/aggregatedStats.js","helpers/stats.js","components/Chart/CustomizedAxisTick.jsx","components/Chart/CustomizedTooltip.jsx","components/Chart/VerhuringenChart.jsx","components/Chart/BeschikbareVoertuigenChart.jsx","pages/StatsPage.jsx","components/Logo.jsx","components/IconButtons.jsx","pages/Login.jsx","pages/SetPassword.jsx","helpers/parkEvents.js","pages/Monitoring.jsx","components/Filterbar/FilterbarExtended.jsx","components/Filterbar/FilteritemGebieden.jsx","images/calendar.svg","components/Filterbar/FilteritemDatum.jsx","components/Filterbar/FilteritemDatumVanTot.jsx","components/Filterbar/FilteritemDuur.jsx","components/Filterbar/FilteritemAanbieders.jsx","components/Filterbar/FilteritemZones.jsx","components/Filterbar/FilteritemMarkers.jsx","components/Filterbar/FilteritemHerkomstBestemming.jsx","components/Filterbar/FilteritemVoertuigTypes.jsx","components/Filterbar/Filterbar.jsx","components/Filterbar/FilterbarDesktop.jsx","components/SlideBox/MobileSlideBox.jsx","components/Filterbar/FilterbarMobile.jsx","components/About/About.jsx","components/Overlay/Overlay.jsx","components/DateFromTo/DateFromTo.jsx","components/FormSelect/FormSelect.jsx","components/Form/Button.jsx","components/Misc/Misc.jsx","components/SelectLayer/SelectLayerMobile.jsx","components/LoadingIndicator/LoadingIndicator.jsx","poll-api/metadataAccessControlList.js","poll-api/pollParkingData.js","poll-api/pollVerhuringenData.js","App.js","poll-api/metadataZones.js","poll-api/metadataZonesgeodata.js","AppProvider.js","reportWebVitals.js","index.js"],"names":["md5","require","initialState","aanbieders","gebieden","zones","vehicle_types","metadata_loaded","zones_loaded","generateHslaColors","amount","colors","huedelta","Math","trunc","i","hue","lightness","saturation","push","data","operatorstats","origins","destinations","origins_operatorstats","destinations_operatorstats","visible","gebied","datum","Date","toISOString","intervalduur","aanbiedersexclude","parkeerduurexclude","voertuigtypesexclude","afstandexclude","herkomstbestemming","ontwikkelingvan","moment","subtract","ontwikkelingtot","ontwikkelingaggregatie","user_data","filter","DISPLAYMODE_PARK","DISPLAYMODE_RENTALS","DISPLAYMODE_OTHER","DISPLAYMODE_PARKEERDATA_HEATMAP","DISPLAYMODE_PARKEERDATA_CLUSTERS","DISPLAYMODE_PARKEERDATA_VOERTUIGEN","DISPLAYMODE_VERHUURDATA_HEATMAP","DISPLAYMODE_VERHUURDATA_CLUSTERS","DISPLAYMODE_VERHUURDATA_VOERTUIGEN","zones_visible","displaymode","view_park","view_rentals","extent","mapextent","FILTERBAR","window","innerWidth","SELECTLAYER","SHOWLOADING","operatorstats_verhuringenchart","operatorstats_beschikbarevoertuigenchart","operatorstats_parkeerduurchart","combineReducers","last_update","state","action","type","payload","metadata","current","length","providerColors","map","aanbieder","idx","color","system_id","Object","assign","JSON","stringify","console","log","vehicles","rentals","intervalstart","intervalend","split","ex","includes","join","item","toString","van","tot","authentication","user","zones_geodata","currentdata","datachanged","filterchanged","layers","zoom","ui","name","visibility","showloading","statsreducer","MenuItem","props","pathName","isActive","path","href","icon","replace","className","to","onClick","title","alt","text","src","SubMenuItem","useState","showMessage","setShowMessage","message","e","setTimeout","Menu","subMenuIsActive","setSubMenuIsActive","dispatch","useDispatch","isLoggedIn","useSelector","exportState","exportStateToClipboard","l","location","clipboardData","setData","document","queryCommandSupported","textarea","createElement","textContent","style","position","body","appendChild","select","execCommand","warn","prompt","removeChild","copyToClipboard","protocol","host","pathname","encodeURIComponent","notify","menuClassName","preventDefault","error","logOut","MenuSecondaryItem","MenuSecondary","setVisibility","getProviderColor","providers","providerName","found","x","getUniqueProviderNames","object","keys","key","val","paint","layout","sources","getVehicleMarkers","operatorColor","a","markers","durationIndicationColor","styleVehicleMarker","marker","getVehicleMarkers_rentals","svgElement","createElementNS","circle_1","setAttribute","inner_circle","child_circle_1","child_circle_2","small_circle","width","height","value","canvas","XMLSerializer","serializeToString","win","URL","webkitURL","img","Image","blob","Blob","url","createObjectURL","decode","context","getContext","drawImage","revokeObjectURL","Uint8Array","getImageData","buffer","locale","localization","providerWebsiteUrls","MapComponent","stateLayers","mapContainer","lng","lat","counter","setCounter","zonesGeodataHash","setZonesGeodataHash","sourceHash","setSourceHash","useRef","useEffect","maplibregl","Map","container","accessToken","process","center","maxZoom","attributionControl","addControl","NavigationControl","showCompass","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","on","ddMap","registerMapView","currentmap","bounds","getBounds","_sw","_ne","getZoom","dragRotate","disable","touchZoomRotate","disableRotation","initMap","addOrUpdateSource","sourceName","sourceData","isStyleLoaded","doesSourceExist","getSource","hash","features","newSourceHashArray","source","addSource","activeSource","fitBounds","getStyle","forEach","id","indexOf","removeLayer","doesLayerExist","getLayer","doesRelatedSourceExist","addLayer","mapcurrent_exists","undefined","currentMap","layerName","vehicleProperties","properties","providerColor","coordinates","geometry","slice","abs","lngLat","Popup","setLngLat","setHTML","in_public_space_since","fromNow","format","distance_in_meters","addTo","getCanvas","cursor","initPopupLogic","queryRenderedFeatures","point","clusterId","cluster_id","getClusterExpansionZoom","err","easeTo","addProviderImage","baselabel","hasImage","addImage","SlideBox","containerRef","NAME","toUpperCase","isVisible","backgroundColor","options","direction","ref","children","SelectLayer","showZoneOnOff","zonesVisible","displayMode","viewPark","viewRentals","top","right","createFilterparameters","isParkingData","isRentalData","isOntwikkelingData","includeOperators","filterparams","candidates","municipality","find","gm_code","zone","zone_id","filteritems","selectedaanbieders","selectedtypes","vtype","ts","ts1","ts2","add","toDateString","setDate","getDate","getParkEventsStats","token","filterParams","fetchOptions","headers","fetch","response","json","responseJson","StatRow","stats","total","MetaStats","metaStatsData","setMetaStatsData","result","gogogo","park_event_stats","minWidth","minHeight","fillcolor","viewBox","cx","cy","r","fill","mode","showZones","rentalsKey","ContentPage","isFilterBarVisible","overflowY","getOperatorStatsForChart","operators","row","getAggregatedStats","aggregationLevel","downloadReport","startDate","endDate","responseBlob","saveAs","downloadRawData","prepareAggregatedStatsData","values","getDateFormat","start_interval","rest","exclude","CustomizedXAxisTick","this","y","transform","dy","textAnchor","fontSize","PureComponent","CustomizedYAxisTick","CustomizedTooltip","obj","active","label","sort","reverse","res","sumValue","VerhuringenChart","rentalsData","setRentalsData","rentals_aggregated_stats","fetchData","chartdata","numberOfPointsOnXAxis","overflowX","ResponsiveContainer","AreaChart","margin","left","bottom","CartesianGrid","strokeDasharray","vertical","XAxis","dataKey","tick","YAxis","Tooltip","content","Legend","Area","stackId","stroke","isAnimationActive","BarChart","Bar","BeschikbareVoertuigenChart","vehiclesData","setVehiclesData","availableVehicles","available_vehicles_aggregated_stats","StatsPage","setAggregationLevel","newlevel","Logo","IconButtonClose","Login","emailaddress","setEmailaddress","password","setPassword","recoverPassword","setRecoverPassword","errorMessage","setErrorMessage","successMessage","setSuccessMessage","loggedIn","setLoggedIn","doRenderRedirect","setDoRenderRedirect","login","loginId","applicationId","method","then","catch","recover","maxWidth","htmlFor","autoCapitalize","placeholder","required","onChange","target","trim","role","SetPassword","changePasswordCode","useParams","ok","fetchParkEvents","provider","dateTime","formattedDateTime","park_events","numberOfUniqueVehiclesAfterXIterations","getUniqueVehicleIds","dataset","uniqueVehicleIds","bike_id","Monitoring","fetchMultipleMomentsInTime","collectedParkEvents","table","FilterbarExtended","closeFunction","stopPropagation","FilteritemGebieden","filterGebied","filterBarExtendedView","filterSearch","setFilterSearch","setFilterGebied","changeSearchText","clearSearchText","toggleGebieden","filteredGebieden","toLowerCase","autoFocus","renderSelectGebieden","FilterItemDatum","filterDatum","setFilterDatum","newdt","clearIcon","calendarIcon","disableClock","FilterItemDatumVanTot","filterOntwikkelingVan","toDate","filterOntwikkelingTot","filterOntwikkelingAggregatie","setStartDate","setEndDate","isOpen","setIsOpen","updateFilter","start","end","aggregatie","dates","moveFilterDatum","movestart","addDays","addMonths","setView","view","agg","today","tyear","getFullYear","lyear","selected","dateFormat","selectsRange","inline","c1Hour","FilterItemInterval","filterDuration","cAnnotations","anchor","pos","elements","ticks","currentDurationIdx","findIndex","v","min","max","step","xmlns","FilteritemAanbieders","filterAanbiedersExclude","addTofilterAanbiedersExclude","x1","y1","x2","y2","excluded","handler","removeFromfilterAanbiedersExclude","FilteritemZones","filterZones","removeFromFilterZones","toggleZones","zone_groups","zone_type","renderSelectZonesGroup","group","groupZones","sortedZones","b","localeCompare","selectedzones","zonetxt","aantal","thezone","filteredZones","renderSelectZones","FilteritemMarkersParkeerduur","FilteritemMarkers","filtername","addmarker","removemarker","clearmarkers","FilteritemMarkersAfstand","filterMarkersExclude","addToFilterMarkersExclude","removeFromFilterMarkersExclude","FilteritemHerkomstBestemming","setFilterHerkomstBestemming","classNameHerkomst","classNameBestemming","FilteritemVoertuigTypes","voertuigtypes","filterVoertuigTypesExclude","Array","isArray","addToFilterVoertuigTypesExclude","voertuigtype","removeFromFilterVoertuigTypesExclude","baseClassName","extraclass","Filterbar","hideLogo","ispark","isrentals","showdatum","showduur","showparkeerduur","showafstand","showherkomstbestemming","showvantot","showvervoerstype","FilterbarDesktop","isFilterBarExtendedVisible","MobileSlideBox","classes","closeHandler","FilterbarMobile","About","dangerouslySetInnerHTML","__html","marked","parse","Misc","DateFromTo","down","paddingTop","paddingBottom","FormSelect","Button","Section","municipalityCode","setMunicipalityCode","isVerified","setIsVerified","places","acl","isAdmin","is_admin","isContactPerson","is_contact_person_municipality","handleDownloadReportClick","handleDownloadRawDataClick","isDateRangeMoreThanOneMonth","diff","email","confirm","SelectLayerMobile","LoadingIndicator","cPublicAanbieders","cPublicGebieden","cPublicVoertuigTypes","store_parkingdata","forceUpdateParkingData","getState","canfetchdata","authenticationdata","vehicles_in_public_space","geoJson","operatorcolors","o","start_time","duration","duration_bin","feature","latitude","longitude","markerVisible","finally","updateParkingData","store_verhuringendata","forceUpdateVerhuringenData","verhuringen","distance_bin","arrival_time","departure_time","updateVerhuringenData","App","setPathName","search","uriParams","setUriParams","useLocation","URLSearchParams","get","importstate","decodeURIComponent","alert","filterDate","isLayersMobileVisible","params","isFilterDateMoreThan10MinutesAgo","store_accesscontrollist","municipalities","types","initAccessControlList","store","store_zones","url_zones","updateZones","zone_ids","list_g","list_z","url_zonesgeodata","st","geojson","fullextent","zonedata","updateZonesgeodata","renderMobileMenus","renderMapElements","exact","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","theState","localStorage","getItem","persistedState","createStore","appReducer","applyMiddleware","thunk","subscribe","storeState","oldFilterHash","newFilterHash","setItem","storeStateToSaveInLocalStorage","unix","AppProvider","Component","WrappedComponent","args","ConnectedWrappedComponent","connect","connectWithStore","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","msg","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.78ec4913.chunk.js","sourcesContent":["const md5 = require('md5');\n\nconst initialState = {\n  aanbieders: [],\n  gebieden: [],\n  zones: [],\n  vehicle_types: [],\n  metadata_loaded: false,\n  zones_loaded: false\n}\n\n// utility function that creates a color palette\n// background: https://mika-s.github.io/javascript/colors/hsl/2017/12/05/generating-random-colors-in-javascript.html\nconst generateHslaColors = (amount) => {\n  \n  let colors = []\n  let huedelta = Math.trunc(360 / (amount+1))\n  let alpha = 1.0\n\n  for (let i = 0; i < amount; i++) {\n    let hue = i * huedelta\n    let lightness = i % 2 === 0 ? 35 : 65;\n    let saturation = i % 2 === 1 ? 40 : 60;\n    colors.push(`hsla(${hue},${saturation}%,${lightness}%,${alpha})`)\n  }\n\n  return colors\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_AANBIEDERS': {\n      let current = state.aanbieders ? state.aanbieders: [];\n      \n      // add colors (will be supplied by the API later)\n      const colors = generateHslaColors(action.payload.length)\n      const providerColors = {\n        'cykl': '#a5e067',\n        'flickbike': '#fe431d',\n        'mobike': '#ed5144',\n        'donkey': '#ed5144',\n        'htm': '#db291e',\n        'jump': '#fd3e48',\n        'gosharing': '#77b136',\n        'check': '#8f3af8',\n        'felyx': '#064627',\n        'lime': '#1bd831',\n        'baqme': '#4bdfbb',\n        'cargoroo': '#ffcb34',\n        'hely': '#fd645c',\n        'tier': '#0d123f'\n      }\n      const aanbieders = action.payload.map((aanbieder,idx)=>{\n        const color = providerColors[aanbieder.system_id] ? providerColors[aanbieder.system_id] : colors[idx];\n        return Object.assign(aanbieder, {color: color});\n      })\n      \n      if(md5(JSON.stringify(current))===md5(JSON.stringify(aanbieders))) { return state; }\n      \n      return {\n        ...state,\n        aanbieders\n      }\n    }\n    case 'SET_GEBIEDEN': {\n      let current = state.gebieden ? state.gebieden: [];\n    \n      if(md5(JSON.stringify(current))===md5(JSON.stringify(action.payload))) { return state; }\n    \n      return {\n        ...state,\n        gebieden: action.payload,\n      }\n    }\n    \n    case 'SET_ZONES': {\n      let current = state.zones ? state.zones: [];\n    \n      if(md5(JSON.stringify(current))===md5(JSON.stringify(action.payload))) { return state; }\n\n      return {\n          ...state,\n          zones: action.payload,\n      };\n    }\n    \n    case 'CLEAR_ZONES': {\n      return {\n          ...state,\n          zones: [],\n          zones_loaded: false,\n      };\n    }\n\n    case 'SET_VEHICLE_TYPES': {\n      let current = state.vehicle_types ? state.vehicle_types: [];\n    \n      if(JSON.stringify(md5(current))===JSON.stringify(md5(action.payload))) { return state; }\n\n      return {\n          ...state,\n          vehicle_types: action.payload,\n      };\n    }\n\n    case 'SET_METADATA_LOADED': {\n      return {\n          ...state,\n          metadata_loaded: action.payload,\n      };\n    }\n\n    case 'SET_ZONES_LOADED': {\n      return {\n          ...state,\n          zones_loaded: action.payload,\n      };\n    }\n    \n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset metadata')\n      \n      return initialState;\n    }\n\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  data: [],\n  operatorstats: [],\n}\n\nexport default function vehicles(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_VEHICLES': {\n      return {\n        data: action.payload,\n        operatorstats: []\n      }\n    }\n    case 'SET_VEHICLES_OPERATORSTATS': {\n      return Object.assign({}, state, {\n        operatorstats: action.payload\n      })\n    }\n    case 'CLEAR_VEHICLES': {\n      return {\n        data: [],\n        operatorstats: []\n      }\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset vehicles data')\n      \n      return initialState;\n    }\n    \n    default:\n      return state;\n  }\n}\n","const initialState = {\n  origins: {},\n  destinations: {},\n  origins_operatorstats: [],\n  destinations_operatorstats: []\n}\n\nexport default function rentals(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_RENTALS_ORIGINS': {\n      return Object.assign({}, state, {\n        origins: action.payload,\n        origins_operatorstats: []\n      })\n    }\n    case 'SET_RENTALS_DESTINATIONS': {\n      return Object.assign({}, state, {\n        destinations: action.payload,\n        destinations_operatorstats: []\n      })\n    }\n    case 'CLEAR_RENTALS_ORIGINS': {\n      return Object.assign({}, state, {\n        origins: [],\n        origins_operatorstats: []\n      })\n    }\n    case 'CLEAR_RENTALS_DESTINATIONS': {\n      return Object.assign({}, state, {\n        destinations: [],\n        destinations_operatorstats: []\n      })\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset rentals data')\n      \n      return initialState;\n    }\n    case 'SET_RENTALS_ORIGINS_OPERATORSTATS': {\n      return Object.assign({}, state, {\n        origins_operatorstats: action.payload\n      })\n    }\n    case 'SET_RENTALS_DESTINATIONS_OPERATORSTATS': {\n      return Object.assign({}, state, {\n        destinations_operatorstats: action.payload\n      })\n    }\n    default:\n      return state;\n  }\n}\n","import moment from 'moment';\n\nconst initialState = {\n  visible: true,\n  gebied: \"\",\n  zones: \"\",\n  datum: (new Date()).toISOString(),\n  // intervalstart: (new Date()).toISOString(),\n  intervalduur: 60 * 60 * 1000,\n  aanbiedersexclude: \"\",\n  parkeerduurexclude: \"\",\n  voertuigtypesexclude: \"\",\n  afstandexclude: \"\",\n  herkomstbestemming: \"\",\n  ontwikkelingvan: moment().subtract(30, 'days').toISOString(),\n  ontwikkelingtot: (new Date()).toISOString(),\n  ontwikkelingaggregatie: \"day\"\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_FILTER_VISIBLE': {\n      console.log('reducer filter set filter visible %s', action.payload)\n      return {\n          ...state,\n          visible: action.payload\n      };\n    }\n    case 'SET_FILTER_GEBIED': {\n      if(state.gebied===action.payload) {\n        return state;\n      }\n      \n      console.log('reducer filter set gebied to %s', action.payload)\n      return {\n          ...state,\n          gebied: action.payload,\n          zones: \"\"\n      };\n    }\n    case 'SET_FILTER_DATUM': {\n      console.log('reducer filter set datum to %s', action.payload)\n      return {\n          ...state,\n          datum: action.payload\n      };\n    }\n    case 'SET_FILTER_INTERVAL_START': {\n      console.log('reducer filter set interval start to %s', action.payload)\n      return {\n          ...state,\n          intervalstart: action.payload\n      };\n    }\n    case 'SET_FILTER_INTERVAL_END': {\n      return {\n          ...state,\n          intervalend: action.payload\n      };\n    }\n    case 'SET_FILTER_INTERVAL_DUUR': {\n      console.log('reducer filter set interval duration to %s', action.payload)\n      return {\n          ...state,\n          intervalduur: action.payload\n      };\n    }\n    case 'SET_FILTER_HERKOMSTBESTEMMING': {\n      console.log('reducer filter set herkomstbestemming to %s', action.payload)\n      return {\n          ...state,\n          herkomstbestemming: action.payload\n      };\n    }\n    case 'ADD_TO_FILTER_ZONES': {\n      console.log('add item %s to zones filter %o', action.payload, state)\n      let zones = [];\n      if(state.zones) {\n        try {\n          zones = state.zones.split(\",\") || []\n        } catch(ex) {\n          zones = [];\n        }\n      }\n      if(!zones.includes(action.payload)) {\n        zones.push(action.payload);\n      }\n\n      return {\n        ...state,\n        zones: zones.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_ZONES': {\n      console.log('remove item %o from zones filter', action.payload)\n      let zones = state.zones.split(\",\") || [];\n      zones = zones.filter((item) => {return item.toString() !== action.payload.toString() });\n\n      return {\n          ...state,\n          zones: zones.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_ZONES': {\n      console.log('clear zones filter')\n\n      return {\n          ...state,\n          zones: ''\n      };\n    }\n    case 'ADD_TO_FILTER_MARKERS_EXCLUDE': {\n      let parkeerduurexclude = [];\n      try {\n        console.log('add item %s to parkeerduurexclude filter %o', action.payload, state)\n        if(state.parkeerduurexclude) {\n          try {\n            parkeerduurexclude = state.parkeerduurexclude.split(\",\") || []\n          } catch(ex) {\n            parkeerduurexclude = [];\n          }\n        }\n        if(!parkeerduurexclude.includes(action.payload)) {\n          parkeerduurexclude.push(action.payload);\n        }\n      } catch(ex) {\n        parkeerduurexclude = [];\n      }\n\n      return {\n        ...state,\n        parkeerduurexclude: parkeerduurexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_MARKERS_EXCLUDE': {\n      console.log('remove item %o from parkeerduurexclude filter', action.payload)\n      let parkeerduurexclude = [];\n      try {\n        parkeerduurexclude = state.parkeerduurexclude.split(\",\") || [];\n        parkeerduurexclude = parkeerduurexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        parkeerduurexclude = [];\n      }\n\n      return {\n          ...state,\n          parkeerduurexclude: parkeerduurexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_MARKERS_EXCLUDE': {\n      console.log('clear parkeerduurexclude filter')\n\n      return {\n          ...state,\n          parkeerduurexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_AFSTAND_EXCLUDE': {\n      let afstandexclude = [];\n      try {\n        console.log('add item %s to afstandexclude filter %o', action.payload, state)\n        if(state.afstandexclude) {\n          try {\n            afstandexclude = state.afstandexclude.split(\",\") || []\n          } catch(ex) {\n            afstandexclude = [];\n          }\n        }\n        if(!afstandexclude.includes(action.payload)) {\n          afstandexclude.push(action.payload);\n        }\n      } catch(ex) {\n        afstandexclude = [];\n      }\n\n      return {\n        ...state,\n        afstandexclude: afstandexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_AFSTAND_EXCLUDE': {\n      console.log('remove item %o from afstandexclude filter', action.payload)\n      let afstandexclude = [];\n      try {\n        afstandexclude = state.afstandexclude.split(\",\") || [];\n        afstandexclude = afstandexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        afstandexclude = [];\n      }\n\n      return {\n          ...state,\n          afstandexclude: afstandexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_AFSTAND_EXCLUDE': {\n      console.log('clear afstandexclude filter')\n\n      return {\n          ...state,\n          afstandexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      let voertuigtypesexclude = [];\n      try {\n        console.log('add item %s to voertuigtypesexclude filter %o', action.payload, state)\n        if(state.voertuigtypesexclude) {\n          try {\n            voertuigtypesexclude = state.voertuigtypesexclude.split(\",\") || []\n          } catch(ex) {\n            voertuigtypesexclude = [];\n          }\n        }\n        if(!voertuigtypesexclude.includes(action.payload)) {\n          voertuigtypesexclude.push(action.payload);\n        }\n      } catch(ex) {\n        voertuigtypesexclude = [];\n      }\n\n      return {\n        ...state,\n        voertuigtypesexclude: voertuigtypesexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      console.log('remove item %o from voertuigtypesexclude filter', action.payload)\n      let voertuigtypesexclude = [];\n      try {\n        voertuigtypesexclude = state.voertuigtypesexclude.split(\",\") || [];\n        voertuigtypesexclude = voertuigtypesexclude.filter((item) => {return item.toString() !== action.payload.toString() });\n      } catch(ex) {\n        voertuigtypesexclude = [];\n      }\n\n      return {\n          ...state,\n          voertuigtypesexclude: voertuigtypesexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE': {\n      console.log('clear voertuigtypesexclude filter')\n\n      return {\n          ...state,\n          voertuigtypesexclude: ''\n      };\n    }\n    case 'ADD_TO_FILTER_AANBIEDERS_EXCLUDE': {\n      // console.log('add item %s to aanbiedersexclude filter %o', action.payload, state)\n      let aanbiedersexclude = [];\n      try {\n        if(state.aanbiedersexclude) {\n          aanbiedersexclude = state.aanbiedersexclude.split(\",\") || []\n        }\n        if(!aanbiedersexclude.includes(action.payload)) {\n          aanbiedersexclude.push(action.payload);\n        }\n      } catch(ex) {\n        aanbiedersexclude = [];\n      }\n    \n      return {\n          ...state,\n          aanbiedersexclude: aanbiedersexclude.join(\",\")\n      };\n    }\n    case 'REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE': {\n      console.log('remove item %s from aanbiedersexclude filter', action.payload)\n      let aanbiedersexclude = [];\n      try {\n        aanbiedersexclude = state.aanbiedersexclude.split(\",\") || [];\n        aanbiedersexclude = aanbiedersexclude.filter((item) => { return item !== action.payload });\n      } catch(ex) {\n        aanbiedersexclude = [];\n      }\n    \n      return {\n          ...state,\n          aanbiedersexclude: aanbiedersexclude.join(\",\")\n      };\n    }\n    case 'CLEAR_FILTER_AANBIEDERS_EXCLUDE': {\n      console.log('clear aanbiedersexclude filter')\n    \n      return {\n          ...state,\n          aanbiedersexclude: ''\n      };\n    }\n    case 'SET_FILTER_ONTWIKKELING_VANTOT': {\n      console.log('reducer filter set datum ontwikkeling van %s to %s', action.payload.van, action.payload.tot)\n      return {\n          ...state,\n          ontwikkelingvan: action.payload.van,\n          ontwikkelingtot: action.payload.tot\n      };\n    }\n    case 'SET_FILTER_ONTWIKKELING_AGGREGATIE': {\n      console.log('reducer filter set aggregatie ontwikkeling %s', action.payload)\n      return {\n          ...state,\n          ontwikkelingaggregatie: action.payload\n      };\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset filter')\n      \n      return initialState;\n    }\n    case 'RESET_FILTER': {\n      console.log('reset filter')\n      \n      return initialState;\n    }\n    case 'IMPORT_STATE': {\n      console.log('import filter', action.payload.filter)\n      \n      \n      \n      return {\n        ...state,\n        ...action.payload.filter\n      }\n    }\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  user_data: null\n}\n  \nexport default function vehicles(state = initialState, action) {\n    switch(action.type) {\n        case 'SET_USER': {\n            const user = action.payload\n            return {\n                user_data: user\n            }\n        }\n        case 'CLEAR_USER': {\n            return { user_data: null }\n        }\n        default:\n            return state;\n    }\n}","const md5 = require('md5');\n\nconst initialState = {\n  data: [],\n  filter: \"\"\n}\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_ZONES_GEODATA': {\n      let currentdata = state.data ? state.data: [];\n\n      let datachanged = md5(JSON.stringify(currentdata))!==md5(JSON.stringify(action.payload.data))\n      let filterchanged = state.filter!==action.payload.filter;\n\n      // if(datachanged) { console.log('SET_ZONES_GEODATA - data changed')}\n      // if(filterchanged) { console.log('SET_ZONES_GEODATA - filter changed')}\n      \n      if(!datachanged&&!filterchanged) {\n        // console.log('SET_ZONES_GEODATA - no changes')\n        return state;\n      }\n      \n      // console.log('SET_ZONES_GEODATA - changes: data %s / filter %s', datachanged, filterchanged)\n      return {\n          ...state,\n          data: action.payload.data,\n          filter: action.payload.filter\n      };\n    }\n\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset rentals data')\n      \n      return initialState;\n    }\n\n    default:\n      return state;\n  }\n}\n","\nexport const DISPLAYMODE_PARK = 'displaymode-park';\nexport const DISPLAYMODE_RENTALS = 'displaymode-rentals';\nexport const DISPLAYMODE_OTHER = 'displaymode-other';\n\nexport const DISPLAYMODE_PARKEERDATA_HEATMAP = 'parkeerdata-heatmap';\nexport const DISPLAYMODE_PARKEERDATA_CLUSTERS = 'parkeerdata-clusters';\nexport const DISPLAYMODE_PARKEERDATA_VOERTUIGEN = 'parkeerdata-voertuigen';\nexport const DISPLAYMODE_VERHUURDATA_HEATMAP = 'verhuurdata-heatmap';\nexport const DISPLAYMODE_VERHUURDATA_CLUSTERS = 'verhuurdata-clusters';\nexport const DISPLAYMODE_VERHUURDATA_VOERTUIGEN = 'verhuurdata-voertuigen';\n\nexport const DATASOURCE_VOERTUIGEN = 'vehicles';\nexport const DATASOURCE_VERHUUR = 'rentals';\n\nconst initialState = {\n  zones_visible: false,\n  displaymode: DISPLAYMODE_PARK,\n  view_park: DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  view_rentals: DISPLAYMODE_VERHUURDATA_VOERTUIGEN,\n  extent: [],\n  mapextent: [],\n}\n\nconst md5 = require('md5');\n\nexport default function filter(state = initialState, action) {\n  switch(action.type) {\n    case 'LAYER_SET_DISPLAYMODE': {\n      if(state.displaymode===action.payload) { return state }\n      \n      // console.log('reducer layer set view_park %s', action.payload)\n      return {\n          ...state,\n          displaymode: action.payload\n      };\n    }\n    case 'LAYER_SET_VIEW_PARK': {\n      if(state.view_park===action.payload) { return state }\n\n      // console.log('reducer layer set view_park %s', action.payload)\n      return {\n          ...state,\n          view_park: action.payload\n      };\n    }\n    case 'LAYER_SET_VIEW_RENTALS': {\n      if(state.view_rentals===action.payload) { return state }\n\n      // console.log('reducer layer set view_rentals %s', action.payload)\n      return {\n          ...state,\n          view_rentals: action.payload\n      };\n    }\n    case 'LAYER_TOGGLE_ZONES_VISIBLE': {\n      // console.log('reducer layer set zones visible %s', !state.zones_visible)\n      return {\n          ...state,\n          zones_visible: !state.zones_visible\n      };\n    }\n    case 'LAYER_SET_ZONES_EXTENT': {\n      if(md5(JSON.stringify(action.payload||[]))!==md5(JSON.stringify(state.extent||[]))) {\n        // console.log(\"set extent to %o\", action.payload)\n        return {\n            ...state,\n            extent: action.payload||[]\n        };\n      } else {\n        // console.log(\"set extent - not changed\")\n        return state;\n      }\n    }\n    case 'LAYER_SET_MAP_EXTENT': {\n      if(md5(JSON.stringify(action.payload))!==md5(JSON.stringify(state.mapextent||false))) {\n        // console.log(\"set extent to %o\", action.payload)\n        return {\n            ...state,\n            mapextent: action.payload\n        };\n      } else {\n        // console.log(\"set extent - not changed\")\n        return state;\n      }\n    }\n    case 'LAYER_SET_MAP_ZOOM': {\n      if(md5(JSON.stringify(action.payload))!==md5(JSON.stringify(state.zoom||false))) {\n        // console.log(\"set zoom to %o\", action.payload)\n        return {\n            ...state,\n            zoom: action.payload\n        };\n      } else {\n        // console.log(\"set zoom - not changed\")\n        return state;\n      }\n    }\n    case 'IMPORT_STATE': {\n      console.log('import layers')\n      \n      return {\n        ...state,\n        ...action.payload.layers\n      }\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset layer info')\n      \n      return initialState;\n    }\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  FILTERBAR: window.innerWidth > 800 ? true : false,\n  SELECTLAYER: true,\n  SHOWLOADING: false\n}\n\nexport default function ui(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_VISIBILITY': {\n      return {\n        ...state,\n        [action.payload.name]: action.payload.visibility\n      };\n    }\n    case 'IMPORT_STATE': {\n      console.log('import ui')\n      \n      return {\n        ...state,\n        ...action.payload.ui\n      }\n    }\n    case 'SHOW_LOADING': {\n      // console.log(\"set show loading %s\",action.payload)\n      return {\n        ...state,\n        showloading: action.payload\n      };\n    }\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('login/logout - reset ui data')\n      \n      return initialState;\n    }\n    default:\n      return state;\n  }\n}\n","const initialState = {\n  operatorstats_verhuringenchart: [],\n  operatorstats_beschikbarevoertuigenchart: [],\n  operatorstats_parkeerduurchart: [],\n}\n\nexport default function statsreducer(state = initialState, action) {\n  switch(action.type) {\n    case 'SET_OPERATORSTATS_VERHURINGENCHART': {\n      return Object.assign({}, state, {\n        operatorstats_verhuringenchart: action.payload\n      })\n    }\n    case 'SET_OPERATORSTATS_BESCHIKBAREVOERTUIGENCHART': {\n      return Object.assign({}, state, {\n        operatorstats_beschikbarevoertuigenchart: action.payload\n      })\n    }\n    case 'SET_OPERATORSTATS_PARKEERDUURCHART': {\n      return Object.assign({}, state, {\n        operatorstats_parkeerduurchart: action.payload\n      })\n    }\n    case 'CLEAR_STATS':\n    case 'LOGIN':\n    case 'LOGOUT': {\n      console.log('clear stats state data')\n      \n      return initialState;\n    }\n    \n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport last_update from './last_update';\nimport metadata from './metadata';\nimport vehicles from './vehicles';\nimport rentals from './rentals';\nimport filter from './filter';\nimport authentication from './authentication';\nimport zones_geodata from './zones_geodata';\nimport layers from './layers';\nimport ui from './ui';\nimport statsreducer from './statsreducer';\n\nexport default combineReducers({\n  last_update,\n  metadata,\n  vehicles,\n  rentals,\n  filter,\n  authentication,\n  zones_geodata,\n  layers,\n  ui,\n  statsreducer\n})","export default function lastUpdate(state = false, action) {\n  switch(action.type) {\n    case 'SET_LAST_UPDATE': {\n      return action.payload;\n    }\n\n    default:\n      return state;\n  }\n}\n","\nimport React, { useState } from 'react';\n// import moment from 'moment';\nimport { Link } from \"react-router-dom\";\n\nimport './Menu.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { clearUser } from '../actions/authentication.js';\n\n// Copies a string to the clipboard. Must be called from within an\n// event handler such as click. May return false if it failed, but\n// this is not always possible. Browser support for Chrome 43+,\n// Firefox 42+, Safari 10+, Edge and Internet Explorer 10+.\n// Internet Explorer: The clipboard feature may be disabled by\n// an administrator. By default a prompt is shown the first\n// time the clipboard is used (per session).\n//\n// https://stackoverflow.com/a/33928558\nfunction copyToClipboard(text) {\n    if (window.clipboardData && window.clipboardData.setData) {\n        // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n        return window.clipboardData.setData(\"Text\", text);\n\n    }\n    else if (document.queryCommandSupported && document.queryCommandSupported(\"copy\")) {\n        var textarea = document.createElement(\"textarea\");\n        textarea.textContent = text;\n        textarea.style.position = \"fixed\";  // Prevent scrolling to bottom of page in Microsoft Edge.\n        document.body.appendChild(textarea);\n        textarea.select();\n        try {\n            return document.execCommand(\"copy\");  // Security exception may be thrown by some browsers.\n        }\n        catch (ex) {\n            console.warn(\"Copy to clipboard failed.\", ex);\n            return prompt(\"Copy to clipboard: Ctrl+C, Enter\", text);\n        }\n        finally {\n            document.body.removeChild(textarea);\n        }\n    }\n}\n\nfunction MenuItem(props) {\n\n  const pathName = props.pathName;\n  const isActive = pathName === props.path || pathName === props.href || (pathName === '/' && props.path === '/map/park');\n  const icon = (isActive ? props.icon.replace('.svg', '-active.svg') : props.icon);\n\n  return (\n    <>\n      {props.path && <Link className={`\n          text-menu\n          text-center\n          ${isActive ? 'is-active' : ''}\n        `}\n        to={props.path}\n        href={props.href}\n        onClick={props.onClick}\n        title={props.title}\n        >\n        {icon ? <img alt={props.text} src={icon} /> : ''}\n        {props.text && <span className={`${(isActive || ! icon) ? 'inline-block' : 'hidden'} sm:inline-block  ml-2`}>\n          {props.text}\n        </span>}\n      </Link>}\n\n      {! props.path && <a className={`\n          text-menu\n          text-center\n          inline-block cursor-pointer\n          ${isActive ? 'is-active' : ''}\n        `}\n        href={props.href}\n        onClick={props.onClick}\n        title={props.title}\n        >\n        {icon ? <img alt={props.text} src={icon} /> : ''}\n        {props.text && <span className={`${(isActive || ! icon) ? 'inline-block' : 'hidden'} sm:inline-block  ml-2`}>\n          {props.text}\n        </span>}\n      </a>}\n    </>\n  )\n}\n\nfunction SubMenuItem(props) {\n  const [showMessage, setShowMessage] = useState(false)\n  \n  const onClick = (e) => {\n    console.log('show message')\n    setShowMessage(true);\n    \n    setTimeout(() => { console.log('hide message'); setShowMessage(false) }, 3000);\n    \n    props.onClick(e);\n  }\n  \n  return <>\n    {props.path && <Link className={`text-link`}\n      to={props.path}\n      href={props.href}\n      onClick={props.onClick}\n      >\n      <span className={`block`}>\n        {showMessage ? props.message : props.text}\n      </span>\n    </Link>}\n\n    {! props.path && <a className={`text-link inline-block cursor-pointer`}\n      href={props.href}\n      onClick={onClick}\n      >\n      <span className={`block`}>\n        {showMessage ? props.message : props.text}\n      </span>\n    </a>}\n  </>\n}\n\nfunction Menu({pathName}) {\n  const [subMenuIsActive, setSubMenuIsActive] = useState(false);\n\n  const dispatch = useDispatch();\n  // let dateToShow = moment(moment().format('2021-11-06 06:00'));\n  \n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  const exportState = useSelector(state => {\n    return { filter: state.filter, layers: state.layers, ui:state.ui };\n  });\n  \n  const logOut = () => {\n    try {\n      if (isLoggedIn) {\n        dispatch( clearUser() );\n        dispatch( { type: \"LOGOUT\", payload: null });\n      }\n    } catch(ex) {\n      console.error(\"Menu.logout - error \", ex);\n    }\n  }\n  \n  const exportStateToClipboard = () => {\n    // creates a url that recreates the exact view\n    const l = window.location;\n    const base = l.protocol + \"//\" + l.host + l.pathname;\n    const params = encodeURIComponent(JSON.stringify(exportState));\n    const url = base + \"?view=\" + params;\n\n    copyToClipboard(url);\n    // navigator.clipboard.writeText(url);\n    window.notify('Link gekopieerd. Gebruik de link om direct naar deze weergave van de kaart te verwijzen.')\n  }\n  \n  let menuClassName = \"Menu fixed w-full mx-0 bottom-0 bg-white\";\n  menuClassName += \" sm:bg-transparent sm:w-full\";\n  if(exportState && exportState.ui && exportState.ui.FILTERBAR) {\n    menuClassName += ' filter-open';\n  }\n  \n  return (\n    <div className={menuClassName}>\n      <div className=\"\n        Menu-inner\n        px-0\n        mx-auto\n        bg-white\n        box-border\n        w-full\n        flex\n        flex-col\n        justify-center\n        sm:px-4\n        sm:shadow-lg\n        sm:m-4\n        sm:mb-1\n        sm:rounded-3xl\n      \">\n\n        <div className=\"\n          whitespace-nowrap\n          text-center\n        \">\n\n          {isLoggedIn && <>\n            <MenuItem\n              pathName={pathName}\n              text={'Aanbod'}\n              path={'/map/park'}\n              icon={'/images/components/Menu/aanbod.svg'}\n            />\n\n            <MenuItem\n              pathName={pathName}\n              text={'Verhuringen'}\n              path={'/map/rentals'}\n              icon={'/images/components/Menu/verhuringen.svg'}\n            />\n\n            <MenuItem\n              pathName={pathName}\n              text={'Ontwikkeling'}\n              path={'/stats/overview'}\n              icon={'/images/components/Menu/ontwikkeling.svg'}\n            />\n\n            <MenuItem\n              title=\"Kopieer link\"\n              text={''}\n              icon={'/images/components/Menu/share.svg'}\n              onClick={(e) => {\n                e.preventDefault();\n                exportStateToClipboard();\n              }}\n            />\n\n            <MenuItem\n              pathName={pathName}\n              path={'/misc'}\n              text={''}\n              icon={'/images/components/Menu/settings.svg'}\n            />\n\n          </>}\n          \n          {! isLoggedIn && <>\n            <Link className=\"text-menu\" to=\"/login\">\n              Log in\n            </Link>\n            <Link className=\"text-menu\" to=\"/over\">\n              Over\n            </Link>\n          </>}\n\n          {isLoggedIn && false && <Link className={`\n            text-menu\n            ${pathName === '/monitoring' ? 'is-active' : ''}\n          `} to=\"/monitoring\">\n            Monitor\n          </Link>}\n\n          {/*\n          <Link to=\"/\" className={`text-menu ${pathName === '' ? 'is-active' : ''}`} onClick={(e) => {\n            e.preventDefault();\n            dispatch({\n              type: 'SET_FILTER_DATUM',\n              payload: dateToShow.toISOString()\n            })\n            clearInterval(TO_interval);\n            TO_interval = setInterval(x => {\n              dateToShow.add(30, 'minutes');\n              dispatch({\n                type: 'SET_FILTER_DATUM',\n                payload: dateToShow.toISOString()\n              })\n            }, 1200);\n            // Stop after 10 minutes\n            setTimeout(x => {\n              clearInterval(TO_interval);\n            }, 60 * 1000 * 10);\n          }}>\n            \n          </Link>\n          */}\n\n        </div>\n\n        {subMenuIsActive && <>\n          <div className=\"\n            Menu-subMenu\n            absolute\n          \">\n            <SubMenuItem\n              text={'Log uit'}\n              onClick={(e) => {\n                e.preventDefault();\n                setSubMenuIsActive(! subMenuIsActive)\n                logOut();\n              }}\n            />\n            <SubMenuItem\n              text={'Exporteer aanzicht'}\n              message={'Aanzicht gekopieerd'}\n              onClick={(e) => {\n                exportStateToClipboard();\n              }}\n            >\n              <span>Tekst hier</span>\n            </SubMenuItem>\n            <SubMenuItem\n              text={'Feedback '}\n              href=\"mailto:info@deelfietsdashboard.nl?subject=Feedback Dashboard Deelmobiliteit&body=Ik heb feedback: \"\n              onClick={(e) => {\n                setSubMenuIsActive(! subMenuIsActive);\n              }}\n            />\n          </div>\n        </>}\n\n      </div>\n    </div>\n  )\n\n  // <nav class=\"flex items-center justify-around flex-wrap bg-teal-500 p-6\">\n  // </nav>\n}\n\nexport default Menu;\n\n","import { SET_USER, CLEAR_USER } from \"./actionTypes\";\n\nexport const setUser = (user) => ({\n  type: SET_USER,\n  payload: user\n})\n\nexport const clearUser = () => ({\n  type: CLEAR_USER,\n  payload: null\n})\n","// vehicles\nexport const SET_VEHICLES = 'SET_VEHICLES';\nexport const SET_VEHICLE = 'SET_VEHICLE';\nexport const CLEAR_VEHICLES = 'CLEAR_VEHICLES';\n\n// authentication\nexport const SET_USER = 'SET_USER';\nexport const CLEAR_USER = 'CLEAR_USER';\n","import { useDispatch } from 'react-redux';\n\nimport './MenuSecondaryItem.css';\n// import { IconButtonFilter } from './IconButtons.jsx';\n// import { clearUser } from '../actions/authentication';\n\nfunction MenuSecondaryItem(props) {\n  return (\n    <a\n      href=\"#\"\n      className=\"MenuSecondaryItem cursor-pointer mx-2\"\n      onClick={props.onClick}\n    >\n      {props.text}\n    </a>\n  )\n}\n\nfunction MenuSecondary() {\n  const dispatch = useDispatch()\n\n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  return (\n    <div className=\"MenuSecondary block sm:hidden absolute left-0\">\n      <MenuSecondaryItem\n        text=\"Filters\"\n        onClick={() => {\n          setVisibility('FILTERBAR', true)\n        }}\n      />\n      <MenuSecondaryItem\n        text=\"Lagen\"\n        onClick={() => {\n          setVisibility('MenuSecondary.layers', true)\n        }}\n      />\n      {/*\n      <MenuSecondaryItem\n        text=\"Info\"\n        onClick={() => {\n          setVisibility('METASTATS', true)\n        }}\n      />\n    */}\n    </div>\n  )\n}\n\nexport default MenuSecondary;\n\n","\nexport const getProviderColor = (providers, providerName) => {\n  const found = providers.filter(x => {\n    return x.system_id === providerName;\n  });\n  return found && found[0] ? found[0].color : '#666';\n}\n\nexport const getUniqueProviderNames = (object) => {\n  if(! object) return [];\n  return Object.keys(object).filter((key, val) => {\n    return key !== 'name' ? key : false;\n  })\n}\n","import vehiclesPoint from './vehicles-point.js';\nimport vehiclesHeatmapCityLevel from './vehicles-heatmap-city-level.js';\nimport vehiclesClusters from './vehicles-clusters.js';\nimport vehiclesClustersCount from './vehicles-clusters-count.js';\nimport vehiclesClustersPoint from './vehicles-clusters-point.js';\n\nimport rentalsOriginsPoint from './rentals-origins-point.js';\nimport rentalsOriginsHeatmapCityLevel from './rentals-origins-heatmap-city-level.js';\nimport rentalsOriginsClusters from './rentals-origins-clusters.js';\nimport rentalsOriginsClustersCount from './rentals-origins-clusters-count.js';\nimport rentalsOriginsClustersPoint from './rentals-origins-clusters-point.js';\n\nimport rentalsDestinationsPoint from './rentals-destinations-point.js';\nimport rentalsDestinationsHeatmapCityLevel from './rentals-destinations-heatmap-city-level.js';\nimport rentalsDestinationsClusters from './rentals-destinations-clusters.js';\nimport rentalsDestinationsClustersCount from './rentals-destinations-clusters-count.js';\nimport rentalsDestinationsClustersPoint from './rentals-destinations-clusters-point.js';\n\nimport zonesGeodata from './zones-geodata.js';\nimport zonesGeodataBorder from './zones-geodata-border.js';\n\nexport const layers = {\n  'vehicles-point': vehiclesPoint,\n  'vehicles-clusters': vehiclesClusters,\n  'vehicles-clusters-count': vehiclesClustersCount,\n  'vehicles-clusters-point': vehiclesClustersPoint,\n  'vehicles-heatmap-city-level': vehiclesHeatmapCityLevel,\n\n  'rentals-origins-point': rentalsOriginsPoint,\n  'rentals-origins-clusters': rentalsOriginsClusters,\n  'rentals-origins-clusters-count': rentalsOriginsClustersCount,\n  'rentals-origins-clusters-point': rentalsOriginsClustersPoint,\n  'rentals-origins-heatmap-city-level': rentalsOriginsHeatmapCityLevel,\n\n  'rentals-destinations-point': rentalsDestinationsPoint,\n  'rentals-destinations-clusters': rentalsDestinationsClusters,\n  'rentals-destinations-clusters-count': rentalsDestinationsClustersCount,\n  'rentals-destinations-clusters-point': rentalsDestinationsClustersPoint,\n  'rentals-destinations-heatmap-city-level': rentalsDestinationsHeatmapCityLevel,\n\n  'zones-geodata': zonesGeodata,\n  'zones-geodata-border': zonesGeodataBorder,\n}\n","const layer = {\n  'id': 'vehicles-point',\n  'type': 'symbol',\n  'source': 'vehicles',\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], '-p:', ['get', 'duration_bin']],\n    // 'icon-size': 0.4,\n    'icon-size': [\n      'interpolate',\n        ['linear'],\n        ['zoom'],\n        11,\n        0.1,\n        16,\n        0.5\n      ],\n    'icon-allow-overlap': true,\n  },\n  'minzoom': 7,\n  // 'paint': {\n  // // Size circle radius by earthquake magnitude and zoom level\n  // 'circle-radius': [\n  //   'interpolate', ['linear'], ['zoom'],\n  //   12, 2,\n  //   16, ['*', 2, ['get', 'amount']]\n  // ],\n  // Color circle by earthquake magnitude\n  // 'circle-color': [\n  //   'interpolate',\n  //   ['linear'],\n  //   ['get', 'mag'],\n  //   1,\n  //   'rgba(33,102,172,0)',\n  //   2,\n  //   'rgb(103,169,207)',\n  //   3,\n  //   'rgb(209,229,240)',\n  //   4,\n  //   'rgb(253,219,199)',\n  //   5,\n  //   'rgb(239,138,98)',\n  //   6,\n  //   'rgb(178,24,43)'\n  // ],\n  // 'circle-stroke-color': 'white',\n  // 'circle-stroke-width': 1,\n  // Transition from heatmap to circle layer by zoom level\n    // 'circle-opacity': [\n    //   'interpolate',\n    //   ['linear'],\n    //   ['zoom'],\n    //   7,\n    //   0,\n    //   8,\n    //   1\n    // ],\n    // 'circle-color': ['get', 'color']\n  //}\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'vehicles-clusters',\n  'type': 'circle',\n  'source': 'vehicles-clusters',\n  filter: ['has', 'point_count'],\n  paint: {\n    // Use step expressions (https://maplibre.org/maplibre-gl-js-docs/style-spec/#expressions-step)\n    // with three steps to implement three types of circles:\n    //   * Blue, 20px circles when point count is less than 100\n    //   * Yellow, 30px circles when point count is between 100 and 750\n    //   * Pink, 40px circles when point count is greater than or equal to 750\n    'circle-color': '#1FA024',\n    'circle-radius': [\n      'step',\n      ['get', 'point_count'],\n      20, 100,\n      30, 750,\n      40\n    ]\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'vehicles-clusters-count',\n  'type': 'symbol',\n  'source': 'vehicles-clusters',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': [\n      'step',\n      ['get', 'point_count'],\n      16, 100,\n      20, 750,\n      30\n    ]\n\n  },\n  paint: {\n    'text-color': '#fff',\n    // 'text-halo-color': '#fff',\n    // 'text-halo-width': 2\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'vehicles-clusters-point',\n  'type': 'symbol',\n  'source': 'vehicles',\n  filter: ['!', ['has', 'point_count']],\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], ':', ['get', 'duration_bin']],\n    'icon-size': 1,\n    'icon-allow-overlap': true,\n  },\n  'minzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'vehicles-heatmap-city-level',\n  'type': 'heatmap',\n  'source': 'vehicles',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0, 0.0001,\n      10, 1\n    ],\n\n    'heatmap-intensity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 0.0025,\n      5, 0.005,\n      7.5, 0.02,\n      10, 0.1,\n      12, 0.25,/* city level */\n      15, 0.3,\n      17, 0.5,\n      20, 1,\n    ],\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0, 'rgba(0, 0, 255, 0)',\n      0.25, '#ffd837',\n      0.5, '#fe862e',\n      0.75, '#fd3e48',\n      1, '#9a231f'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    // Groter = grotere radius = duidelijker waar het druk is\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 10,\n      10, 12,\n      12, 20,\n      15, 40,\n      20, 60,\n      30, 100,\n      40, 100\n    ],\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7, 1,\n      9, 0.8\n    ]\n  }\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-origins-point',\n  'type': 'symbol',\n  'source': 'rentals-origins',\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], '-r:', ['get', 'distance_bin']],\n    // 'icon-size': 0.4,\n    'icon-size': [\n      'interpolate',\n        ['linear'],\n        ['zoom'],\n        11,\n        0.1,\n        16,\n        0.5\n      ],\n    'icon-allow-overlap': true,\n  },\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-origins-clusters',\n  'type': 'circle',\n  'source': 'rentals-origins-clusters',\n  filter: ['has', 'point_count'],\n  paint: {\n    // Use step expressions (https://maplibre.org/maplibre-gl-js-docs/style-spec/#expressions-step)\n    // with three steps to implement three types of circles:\n    //   * Blue, 20px circles when point count is less than 100\n    //   * Yellow, 30px circles when point count is between 100 and 750\n    //   * Pink, 40px circles when point count is greater than or equal to 750\n    'circle-color': '#1FA024',\n    'circle-radius': [\n      'step',\n      ['get', 'point_count'],\n      20, 100,\n      30, 750,\n      40\n    ]\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-origins-clusters-count',\n  'type': 'symbol',\n  'source': 'rentals-origins-clusters',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': [\n      'step',\n      ['get', 'point_count'],\n      16, 100,\n      20, 750,\n      30\n    ]\n\n  },\n  paint: {\n    'text-color': '#fff',\n    // 'text-halo-color': '#fff',\n    // 'text-halo-width': 2\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-origins-clusters-point',\n  'type': 'symbol',\n  'source': 'rentals-origins',\n  filter: ['!', ['has', 'point_count']],\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], ':', ['get', 'distance_bin']],\n    'icon-size': 1,\n    'icon-allow-overlap': true,\n  },\n  'minzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-origins-heatmap-city-level',\n  'type': 'heatmap',\n  'source': 'rentals-origins',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0, 0.0001,\n      10, 1\n    ],\n\n    'heatmap-intensity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 0.0025,\n      5, 0.005,\n      7.5, 0.01,\n      10, 0.05,\n      12, 0.075,/* city level */\n      15, 0.1,\n      20, 1,\n    ],\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0, 'rgba(0, 0, 255, 0)',\n      0.25, '#ffd837',\n      0.5, '#fe862e',\n      0.75, '#fd3e48',\n      1, '#9a231f'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    // Groter = grotere radius = duidelijker waar het druk is\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 10,\n      10, 12,\n      12, 20,\n      15, 40,\n      20, 60,\n      30, 100,\n      40, 100\n    ],\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7, 1,\n      9, 0.8\n    ]\n  }\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-destinations-point',\n  'type': 'symbol',\n  'source': 'rentals-destinations',\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], '-r:', ['get', 'distance_bin']],\n    // 'icon-size': 0.4,\n    'icon-size': [\n      'interpolate',\n        ['linear'],\n        ['zoom'],\n        11,\n        0.4,\n        16,\n        1.0\n      ],\n    'icon-allow-overlap': true,\n  },\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-destinations-clusters',\n  'type': 'circle',\n  'source': 'rentals-destinations-clusters',\n  filter: ['has', 'point_count'],\n  paint: {\n    // Use step expressions (https://maplibre.org/maplibre-gl-js-docs/style-spec/#expressions-step)\n    // with three steps to implement three types of circles:\n    //   * Blue, 20px circles when point count is less than 100\n    //   * Yellow, 30px circles when point count is between 100 and 750\n    //   * Pink, 40px circles when point count is greater than or equal to 750\n    'circle-color': '#1FA024',\n    'circle-radius': [\n      'step',\n      ['get', 'point_count'],\n      20, 100,\n      30, 750,\n      40\n    ]\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","// Example code: https://maplibre.org/maplibre-gl-js-docs/example/cluster/\nconst layer = {\n  'id': 'rentals-destinations-clusters-count',\n  'type': 'symbol',\n  'source': 'rentals-destinations-clusters',\n  filter: ['has', 'point_count'],\n  layout: {\n    'text-field': '{point_count_abbreviated}',\n    'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n    'text-size': [\n      'step',\n      ['get', 'point_count'],\n      16, 100,\n      20, 750,\n      30\n    ]\n\n  },\n  paint: {\n    'text-color': '#fff',\n    // 'text-halo-color': '#fff',\n    // 'text-halo-width': 2\n  },\n  'maxzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-destinations-clusters-point',\n  'type': 'symbol',\n  'source': 'rentals-destinations',\n  filter: ['!', ['has', 'point_count']],\n  'layout': {\n    'icon-image': [\"concat\", ['get', 'system_id'], ':', ['get', 'distance_bin']],\n    'icon-size': 1,\n    'icon-allow-overlap': true,\n  },\n  'minzoom': 18\n}\n\nexport default layer;\n","const layer = {\n  'id': 'rentals-destinations-heatmap-city-level',\n  'type': 'heatmap',\n  'source': 'rentals-destinations',\n  'paint': {\n    // Increase the heatmap weight based on frequency and property magnitude\n    'heatmap-weight': [\n      'interpolate',\n      ['linear'],\n      ['get', 'mag'],\n      0, 0.0001,\n      10, 1\n    ],\n\n    'heatmap-intensity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 0.0025,\n      5, 0.005,\n      7.5, 0.01,\n      10, 0.05,\n      12, 0.075,/* city level */\n      15, 0.1,\n      20, 1,\n    ],\n\n    // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n    // Begin color ramp at 0-stop with a 0-transparancy color\n    // to create a blur-like effect.\n    'heatmap-color': [\n      'interpolate',\n      ['linear'],\n      ['heatmap-density'],\n      0, 'rgba(0, 0, 255, 0)',\n      0.25, '#ffd837',\n      0.5, '#fe862e',\n      0.75, '#fd3e48',\n      1, '#9a231f'\n    ],\n\n    // Adjust the heatmap radius by zoom level\n    // Groter = grotere radius = duidelijker waar het druk is\n    'heatmap-radius': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      0, 10,\n      10, 12,\n      12, 20,\n      15, 40,\n      20, 60,\n      30, 100,\n      40, 100\n    ],\n    'heatmap-opacity': [\n      'interpolate',\n      ['linear'],\n      ['zoom'],\n      7, 1,\n      9, 0.8\n    ]\n  }\n}\n\nexport default layer;\n","const layer = {\n  'id': 'zones-geodata',\n  'type': 'fill',\n  'source': 'zones-geodata',\n  'paint': {\n    'fill-color': '#d1d1e8',\n    'fill-opacity': 0.5\n  },\n}\n\n// 'filter': ['==', '$type', 'MultiPolygon'],\n// 'minzoom': 1,\n\nexport default layer;","const layer = {\n  'id': 'zones-geodata-border',\n  'type': 'line',\n  'source': 'zones-geodata',\n  'paint': {\n    'line-color': '#001299',\n    'line-opacity': 0.6,\n    'line-dasharray': [2, 2],\n  },\n}\n\nexport default layer;","export const sources = {\n  'vehicles': {\n    'type': 'geojson',\n  },\n  'vehicles-clusters': {\n    'type': 'geojson',\n    'cluster': true,\n    'clusterRadius': 50 // Radius of each cluster when clustering points (defaults to 50)\n  },\n\n  'rentals-origins': {\n    'type': 'geojson',\n  },\n  'rentals-origins-clusters': {\n    'type': 'geojson',\n    'cluster': true,\n    'clusterRadius': 50 // Radius of each cluster when clustering points (defaults to 50)\n  },\n\n  'rentals-destinations': {\n    'type': 'geojson',\n  },\n  'rentals-destinations-clusters': {\n    'type': 'geojson',\n    'cluster': true,\n    'clusterRadius': 50 // Radius of each cluster when clustering points (defaults to 50)\n  },\n}\n","// The original SVG that is used to make the programatic one\n// const initialMarker2 = `\n// <div id=\"test\">\n//     <circle id=\"Ellipse_129\" data-name=\"Ellipse 129\" cx=\"12\" cy=\"12\" r=\"12\" fill=\"#1fa024\" opacity=\"0.304\"></circle>\n//     <g id=\"Ellipse_130\" data-name=\"Ellipse 130\" transform=\"translate(2 2)\" fill=\"#1fa024\" stroke=\"#fff\" stroke-width=\"1\">\n//         <circle cx=\"10\" cy=\"10\" r=\"10\" stroke=\"none\"></circle>\n//         <circle cx=\"10\" cy=\"10\" r=\"9.5\" fill=\"none\"></circle>\n//     </g>\n//     <circle id=\"Ellipse_192\" data-name=\"Ellipse 192\" cx=\"4.5\" cy=\"4.5\" r=\"4.5\" transform=\"translate(14 1)\" fill=\"#1f3ff0\"></circle>\n// </div>\n//     `;\n\nasync function getVehicleMarkers(operatorColor) {\n    var gradients = ['#1FA024', '#48E248', '#FFD837', '#FD3E48'];\n    var markers = [];\n    for (const durationIndicationColor of gradients) {\n        var marker = await styleVehicleMarker(operatorColor, durationIndicationColor);\n        markers.push(marker);\n    }\n    return markers;\n}\n\nasync function getVehicleMarkers_rentals(operatorColor) {\n    var gradients = ['#48E248', '#44BD48', '#3B7747', '#343E47'];\n    var markers = [];\n    for (const durationIndicationColor of gradients) {\n        var marker = await styleVehicleMarker(operatorColor, durationIndicationColor);\n        markers.push(marker);\n    }\n    return markers;\n}\n\nasync function styleVehicleMarker(operatorColor, durationIndicationColor) {\n    var xmlns = \"http://www.w3.org/2000/svg\";\n    var svgElement = document.createElementNS(xmlns, \"svg\");\n    \n    // outer transparant circle\n    var circle_1 = document.createElementNS(\"http://www.w3.org/2000/svg\", 'circle');\n    circle_1.setAttribute(\"cx\",\"12\");\n    circle_1.setAttribute(\"cy\",\"12\");\n    circle_1.setAttribute(\"r\",\"12\");\n    circle_1.setAttribute(\"fill\",\"12\");\n    circle_1.setAttribute(\"opacity\",\"0.304\");\n    circle_1.setAttribute(\"fill\", durationIndicationColor);\n    svgElement.appendChild(circle_1);\n\n    // inner non transparant circle\n    var inner_circle = document.createElementNS(\"http://www.w3.org/2000/svg\", 'g');\n    inner_circle.setAttribute(\"transform\",\"translate(2 2)\");\n    inner_circle.setAttribute(\"fill\",durationIndicationColor);\n    inner_circle.setAttribute(\"stroke\",\"#fff\");\n    inner_circle.setAttribute(\"stroke-width\",\"1\");\n\n    var child_circle_1 = document.createElementNS(\"http://www.w3.org/2000/svg\", 'circle');\n    child_circle_1.setAttribute(\"cx\",\"10\");\n    child_circle_1.setAttribute(\"cy\",\"10\");\n    child_circle_1.setAttribute(\"r\",\"10\");\n    child_circle_1.setAttribute(\"stroke\",\"none\");\n\n    var  child_circle_2 = document.createElementNS(\"http://www.w3.org/2000/svg\", 'circle');\n    child_circle_2.setAttribute(\"cx\",\"10\");\n    child_circle_2.setAttribute(\"cy\",\"10\");\n    child_circle_2.setAttribute(\"r\",\"9.5\");\n    child_circle_2.setAttribute(\"fill\",\"none\");\n    inner_circle.appendChild(child_circle_1);\n    inner_circle.appendChild(child_circle_2);\n    svgElement.appendChild(inner_circle);\n\n    // indicator right top\n    var small_circle = document.createElementNS(\"http://www.w3.org/2000/svg\", 'circle');\n    small_circle.setAttribute(\"cx\",\"4.5\");\n    small_circle.setAttribute(\"cy\",\"4.5\");\n    small_circle.setAttribute(\"r\",\"4.5\");\n    small_circle.setAttribute(\"transform\",\"translate(14 1)\");\n    small_circle.setAttribute(\"fill\", operatorColor);\n    svgElement.appendChild(small_circle);\n\n    var width = {};\n    var height = {};\n \n    // console.log(svg.firstChild.tagName);\n    svgElement.setAttribute(\"viewBox\", \"0 0 24 24\");\n\n    width.value = 50;\n    height.value = 50;\n    \n    var canvas = document.createElement('canvas');\n    svgElement.setAttribute('width', width.value);\n    svgElement.setAttribute('height', height.value);\n    canvas.width = width.value;\n    canvas.height = height.value;\n    var data = new XMLSerializer().serializeToString(svgElement);\n    var win = window.URL || window.webkitURL || window;\n    var img = new Image();\n    var blob = new Blob([data], { type: 'image/svg+xml' });\n\n    var url = win.createObjectURL(blob);\n    img.src = url;\n    await img.decode();\n    var context = canvas.getContext('2d');\n    context.drawImage(img, 0, 0);\n    win.revokeObjectURL(url);\n \n    return new Uint8Array(context.getImageData(0, 0, img.width, img.height).data.buffer);\n}\n\nexport {\n    getVehicleMarkers,\n    getVehicleMarkers_rentals\n}\n","import { useRef, useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport maplibregl from 'maplibre-gl';\nimport moment from 'moment';\n// import 'moment/min/moment-with-locales'\nimport localization from 'moment/locale/nl'\n\nimport './MapComponent.css';\n\nimport {getProviderColor} from '../../helpers/providers.js';\n\nimport {layers} from './layers';\nimport {sources} from './sources.js';\nimport {getVehicleMarkers, getVehicleMarkers_rentals} from './../Map/vehicle_marker.js';\n\nconst md5 = require('md5');\n\n// Set language for momentJS\nmoment.locale('nl', localization);\n\nconst providerWebsiteUrls = {\n  'check': 'https://ridecheck.app/',\n  'felyx': 'https://felyx.com/',\n  'gosharing': 'https://go-sharing.com/',\n  'baqme': 'https://www.baqme.com/',\n  'donkey': 'https://www.donkey.bike/'\n}\n\nconst initClusters = (currentMap) => {\n  ['vehicles-clusters', 'rentals-origins-clusters', 'rentals-destinations-clusters'].forEach(x => {\n    currentMap.on('click', x, function (e) {\n      var features = currentMap.queryRenderedFeatures(e.point, {\n        layers: [x]\n      });\n      var clusterId = features[0].properties.cluster_id;\n      currentMap.getSource(x).getClusterExpansionZoom(\n        clusterId,\n        function (err, zoom) {\n          if (err) return;\n          currentMap.easeTo({\n            center: features[0].geometry.coordinates,\n            zoom: zoom\n          });\n        }\n      );\n    });\n    currentMap.on('mouseenter', x, function () {\n      currentMap.getCanvas().style.cursor = 'pointer';\n    });\n    currentMap.on('mouseleave', x, function () {\n      currentMap.getCanvas().style.cursor = '';\n    });\n  })\n}\n\nconst initPopupLogic = (currentMap, providers, isLoggedIn) => {\n  // Docs: https://maplibre.org/maplibre-gl-js-docs/example/popup-on-click/\n  const layerNamesToApplyPopupLogicTo = [\n    'vehicles-point',\n    'vehicles-clusters-point',\n    'rentals-origins-point',\n    'rentals-origins-clusters-point',\n    'rentals-destinations-point',\n    'rentals-destinations-clusters-point',\n  ];\n\n  layerNamesToApplyPopupLogicTo.forEach((layerName) => {\n    // When a click event occurs on a feature in the places layer, open a popup at the\n    // location of the feature, with description HTML from its properties.\n    currentMap.on('click', layerName, function (e) {\n      const vehicleProperties = e.features[0].properties;\n      const providerColor = getProviderColor(providers, vehicleProperties.system_id)\n\n      var coordinates = e.features[0].geometry.coordinates.slice();\n      // var description = e.features[0].properties.description;\n       \n      // Ensure that if the map is zoomed out such that multiple\n      // copies of the feature are visible, the popup appears\n      // over the copy being pointed to.\n      while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n        coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n      }\n\n      new maplibregl.Popup()\n        .setLngLat(coordinates)\n        .setHTML(`\n          <h1 class=\"mb-2\">\n            <span\n              class=\"rounded-full inline-block w-4 h-4\"\n              style=\"background-color: ${providerColor};position: relative;top: 2px\">\n            </span>\n            <span class=\"Map-popup-title ml-1\" style=\"color: ${providerColor};\">\n              ${vehicleProperties.system_id}\n            </span>\n          </h1>\n          <div class=\"Map-popup-body\">\n            ${vehicleProperties.in_public_space_since ? `<div>\n              Staat hier sinds ${moment(vehicleProperties.in_public_space_since).locale('nl').fromNow()}<br />\n              Geparkeerd sinds: ${moment(vehicleProperties.in_public_space_since).format('DD-MM-YYYY HH:mm')}\n            </div>` : ''}\n\n            ${vehicleProperties.distance_in_meters ? `<div>\n              Dit voertuig is ${vehicleProperties.distance_in_meters} meter verplaatst<br />\n            </div>` : ''}\n\n            ${providerWebsiteUrls && providerWebsiteUrls[vehicleProperties.system_id] ? `<div class=\"mt-2\">\n              <a href=\"${providerWebsiteUrls[vehicleProperties.system_id]}\" rel=\"external\" target=\"_blank\" class=\"inline-block py-1 px-2 text-white rounded-md hover:opacity-80\" style=\"background-color: ${providerColor};\">\n                website\n              </a>\n            </div>` : ''}\n          </div>\n        `)\n        .addTo(currentMap);\n    });\n    // Change the cursor to a pointer when the mouse is over the places layer.\n    currentMap.on('mouseenter', layerName, function () {\n      currentMap.getCanvas().style.cursor = 'pointer';\n    });\n     \n    // Change it back to a pointer when it leaves.\n    currentMap.on('mouseleave', layerName, function () {\n      currentMap.getCanvas().style.cursor = '';\n    });\n  })\n   \n}\n\nfunction MapComponent(props) {\n  const dispatch = useDispatch()\n  // console.log('Map component')\n\n  // Get vehicles from store\n  const vehicles = useSelector(state => {\n    return state.vehicles || null;\n  });\n\n  const rentals = useSelector(state => {\n    return state.rentals || null;\n  });\n\n  const stateLayers = useSelector(state => {\n    return state.layers || null;\n  });\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n\n  // Get extent (map boundaries) from store\n  const extent = useSelector(state => {\n    return state.layers ? state.layers.extent : null;\n  }) || [];\n\n  const providers = useSelector(state => {\n    return (state.metadata && state.metadata.aanbieders) ? state.metadata.aanbieders : [];\n  });\n\n  const zones_geodata = useSelector(state => {\n    if(!state||!state.zones_geodata) {\n      return null;\n    }\n\n    return state.zones_geodata;\n  });\n  \n  const mapContainer = props.mapContainer;\n  const [lng] = useState((stateLayers.mapextent && stateLayers.mapextent[0]) ? (stateLayers.mapextent[0] + stateLayers.mapextent[2]) / 2 : 4.4671854);\n  const [lat] = useState((stateLayers.mapextent && stateLayers.mapextent[1]) ? (stateLayers.mapextent[1] + stateLayers.mapextent[3]) / 2 : 51.9250836);\n  const [zoom] = useState(stateLayers.zoom || 15);\n  const [counter, setCounter] = useState(0);\n  const [zonesGeodataHash, setZonesGeodataHash] = useState(\"\");\n  const [sourceHash, setSourceHash] = useState([]);\n  let map = useRef(null);\n\n  // Init MapLibre map\n  // Docs: https://maptiler.zendesk.com/hc/en-us/articles/4405444890897-Display-MapLibre-GL-JS-map-using-React-JS\n  useEffect(() => {\n    const initMap = () => {\n      const style = 'mapbox://styles/nine3030/ckv9ni7rj0xwq15qsekqwnlz5';//TODO: Move to CROW\n      // const style = 'mapbox://styles/mapbox/streets-v11';\n      if (map.current) return;\n      \n      map.current = new maplibregl.Map({\n        container: mapContainer.current,\n        style,\n        accessToken: process.env.REACT_APP_MAPBOX_TOKEN,\n        center: [lng, lat],\n        zoom: zoom,\n        maxZoom: 19,\n        attributionControl: false// Hide info icon\n      });\n\n      // Add controls\n      map.current.addControl(new maplibregl.NavigationControl({\n        showCompass: false\n      }), 'bottom-right');\n\n      // Add 'current location' button\n      map.current.addControl(\n        new maplibregl.GeolocateControl({\n          positionOptions: {\n            enableHighAccuracy: true\n          },\n          trackUserLocation: true\n      }), 'bottom-right');\n  \n      // Do a state update if map is loaded\n      map.current.on('load', function() {\n        setCounter(counter + 1)\n        window.ddMap = map.current;\n      });\n      \n      // map.current.on('data', function(e) {\n      //   console.log('A data event occurred.',e);\n      //   // We do not show loading, because this event happens on zoom and map navigate\n      //   dispatch({type: 'SHOW_LOADING', payload: true});\n      // });\n\n      // map.current.on('sourcedataloading', function(e) {\n      //   console.log('A sourcedataloading event occurred.',e);\n      //   // We do not show loading, because this event happens on zoom and map navigate\n      //   dispatch({type: 'SHOW_LOADING', payload: true});\n      // });\n\n      // map.current.on('sourcedata', function(e) {\n      //   console.log('A sourcedata event occurred.',e);\n      // });\n\n      map.current.on('error', function(e) {\n        // console.log('An error event occurred.',e);\n        dispatch({type: 'SHOW_LOADING', payload: false});\n      });\n      map.current.on('idle', function(e) {\n        // console.log('An idle event occurred.',e);\n        dispatch({type: 'SHOW_LOADING', payload: false});\n      });\n\n      const registerMapView = (currentmap) => {\n        const bounds = currentmap.getBounds();\n        const payload = [\n          bounds._sw.lng,\n          bounds._sw.lat,\n          bounds._ne.lng,\n          bounds._ne.lat\n        ]\n        \n        dispatch({ type: 'LAYER_SET_MAP_EXTENT', payload: payload })\n        dispatch({ type: 'LAYER_SET_MAP_ZOOM', payload: currentmap.getZoom() })\n      }\n      \n      map.current.on('moveend', function() {\n        registerMapView(map.current);\n      })\n      \n      map.current.on('zoomend', function() {\n        registerMapView(map.current);\n      })\n      \n      // Disable rotating\n      map.current.dragRotate.disable();\n      map.current.touchZoomRotate.disableRotation();\n    }\n    initMap();\n  }, [vehicles, zones_geodata, lng, lat, zoom, counter, mapContainer, dispatch])\n\n  const addOrUpdateSource = (sourceName, sourceData) => {\n\n    // If map is not loaded: refresh state after .25 seconds\n    if (! map.current || ! map.current.isStyleLoaded()) {\n      setTimeout(() => {\n        setCounter(counter + 1)\n      }, 250)\n      return;\n    }\n\n    // If no source data is given -> stop\n    if (! sourceData) {\n      return;\n    }\n\n    // Check if source exists\n    const doesSourceExist = map.current.getSource(sourceName);\n    // Get md5 hash of the data\n    let hash = sourceData && sourceData.features ? md5(JSON.stringify(sourceData.features)) : md5('No data yet');\n    // If source does exist: update data\n    if(doesSourceExist) {\n      if(! sourceHash || sourceHash[sourceName] !== hash) {\n        // Set hash\n        let newSourceHashArray = sourceHash;\n        newSourceHashArray[sourceName] = hash;\n        setSourceHash(newSourceHashArray);\n        // Update data\n        map.current.getSource(sourceName).setData(sourceData);\n      }\n    }\n\n    // If source does not exist: add source\n    else {\n      if(sourceData) {\n        // Set hash\n        let newSourceHashArray = sourceHash;\n        newSourceHashArray[sourceName] = hash;\n        setSourceHash(newSourceHashArray);\n\n        // Set data\n        let source = Object.assign({}, {\n          'type': 'geojson',\n          'data': sourceData,\n        }, sources[sourceName] ? sources[sourceName] : {});\n        map.current.addSource(sourceName, source);\n      }\n    }\n  }\n\n  useEffect(() => {\n    // Add zones\n    if(zones_geodata && zones_geodata.data) {\n      addOrUpdateSource('zones-geodata', zones_geodata.data);\n    }\n\n    // Add park events\n    if(vehicles && vehicles.data) {\n      addOrUpdateSource('vehicles', vehicles.data);\n      addOrUpdateSource('vehicles-clusters', vehicles.data);\n    }\n\n    // Add rentals\n    if(rentals.origins && rentals.origins.type) {\n      addOrUpdateSource('rentals-origins', rentals.origins);\n      addOrUpdateSource('rentals-origins-clusters', rentals.origins);\n    }\n    if(rentals.destinations && rentals.destinations.type) {\n      addOrUpdateSource('rentals-destinations', rentals.destinations);\n      addOrUpdateSource('rentals-destinations-clusters', rentals.destinations);\n    }\n\n    // eslint-disable-next-line\n  }, [\n    // eslint-disable-next-line\n    vehicles ? (vehicles.data ? vehicles.data.features : vehicles.data) : vehicles,\n    rentals.origins ? rentals.origins.features : rentals.origins,\n    rentals.destinations,\n    zones_geodata,\n    zonesGeodataHash,\n    counter,\n    props.activeSource\n  ])\n\n  // If area selection (place/zone) changes, navigate to area\n  useEffect(() => {\n    if(! map.current) return;\n    if(! extent || extent.length === 0) {\n      return;\n    }\n    \n    map.current.fitBounds(extent);\n    \n    // reset extent action\n    dispatch({ type: 'LAYER_SET_ZONES_EXTENT', payload: [] });\n  }, [ extent, dispatch ])\n  \n  // Add layers\n  useEffect(() => {\n    const addLayers = () => {\n      if (! map.current || ! map.current.isStyleLoaded()) {\n        setTimeout(() => {\n          setCounter(counter + 1)\n        }, 250)\n        return;\n      }\n\n      // Remove 'old' layers\n      const allLayers = map.current.getStyle().layers;\n      allLayers.forEach(x => {\n        // Check if this is one of our layers\n        if(x.id.indexOf('vehicles-') > -1) {\n          // If so, remove\n          map.current.removeLayer(x.id)\n        }\n        if(x.id.indexOf('rentals-') > -1) {\n          // If so, remove\n          map.current.removeLayer(x.id)\n        }\n        if(x.id.indexOf('zones-geodata') > -1) {\n          // If so, remove\n          map.current.removeLayer(x.id)\n          setZonesGeodataHash(\"\");\n        }\n      })\n      // Add selected layers to the map\n      props.layers.forEach(x => {\n        if(props.layers.indexOf(x) >= -1) {\n          const doesLayerExist = map.current.getLayer(x);\n          const doesRelatedSourceExist = map.current.getSource(layers[x].source);\n          if(! doesLayerExist && doesRelatedSourceExist) {\n            map.current.addLayer(layers[x]);\n          }\n        }\n      })\n    }\n    addLayers();\n  }, [vehicles, rentals.origins, rentals.destinations, zones_geodata, counter, props.layers, isLoggedIn, providers]);\n\n  const mapcurrent_exists = map.current!==undefined;\n  useEffect(() => {\n    if(! map.current) return;\n    if(! providers) return;\n    initPopupLogic(map.current, providers, isLoggedIn)\n  }, [mapcurrent_exists, providers, isLoggedIn])\n\n  // Init clusters click handler\n  useEffect(() => {\n    if(! map.current) return;\n    initClusters(map.current)\n  }, [mapcurrent_exists])\n\n  useEffect(() => {\n    const addProviderImage = async(aanbieder) => {\n      let baselabel = aanbieder.system_id + (stateLayers.displaymode === 'displaymode-rentals' ? '-r' : '-p')\n      if (map.current.hasImage(baselabel + ':0')) {\n        // console.log(\"provider image for %s already exists\", baselabel);\n        return;\n      }\n      // TODO\n      var value;\n      if(stateLayers.displaymode === 'displaymode-rentals') {\n        value = await getVehicleMarkers_rentals(aanbieder.color);\n      } else {\n        value = await getVehicleMarkers(aanbieder.color);\n      }\n      value.forEach((img, idx) => {\n        map.current.addImage(baselabel + `:` + idx, { width: 50, height: 50, data: img});\n      });\n    };\n    providers.forEach(aanbieder => {\n      addProviderImage(aanbieder);\n    });\n  }, [providers, stateLayers.displaymode]);\n\n  return null;\n}\n\nexport {\n  MapComponent\n};\n","import React, {\n  useRef,\n  // useState\n} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport './SlideBox.css';\n\nfunction SlideBox(props) {\n  const dispatch = useDispatch();\n  const containerRef = useRef(null);\n  const NAME = props.name.toUpperCase();\n\n  const isVisible = useSelector(state => {\n    return state.ui ? state.ui[NAME] : false;\n  });\n\n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  // Show/hide slidebox on toggle click\n  const toggleSlideBox = () => {\n    // If filterbar was visible, hide extended filterbar\n    if(isVisible) {\n      setVisibility('FILTERBAR_EXTENDED', false);\n    }\n    // Now toggle slidebox\n    setVisibility(NAME, ! isVisible)\n  };\n\n  const {backgroundColor} = props.options || {};\n\n  return <div className={`\n      SlideBox\n      direction-${props.direction}\n      relative\n      ${isVisible ? '' : 'is-hidden'}\n      z-10\n    `} ref={containerRef} style={props.style || {}}>\n    <div className=\"\n      SlideBox-inner\n      h-full\n    \" style={{backgroundColor: backgroundColor}}>\n      {props.children}\n    </div>\n    <div\n      className=\"SlideBox-toggle-wrapper z-10 overflow-hidden\"\n      >\n      <div\n        className=\"SlideBox-toggle\"\n        onClick={() => toggleSlideBox()}\n        style={{backgroundColor: backgroundColor}}\n        >\n        <span>\n          {props.options.title || 'Lagen'}\n        </span>\n      </div>\n    </div>\n  </div>\n}\n\nexport default SlideBox;\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport SlideBox from '../SlideBox/SlideBox.jsx';\n\nimport './SelectLayer.css';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER,\n  DISPLAYMODE_PARKEERDATA_HEATMAP,\n  DISPLAYMODE_PARKEERDATA_CLUSTERS,\n  DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  DISPLAYMODE_VERHUURDATA_HEATMAP,\n  DISPLAYMODE_VERHUURDATA_CLUSTERS,\n  DISPLAYMODE_VERHUURDATA_VOERTUIGEN\n} from '../../reducers/layers.js';\n\nfunction SelectLayer(props) {\n  // const {setLayers, setActiveSource} = props;\n  const dispatch = useDispatch()\n  \n  const showZoneOnOff = useSelector(state => {\n    return state.filter ? state.filter.gebied!=='' : false;\n  });\n\n  const zonesVisible = useSelector(state => {\n    return state.layers ? state.layers.zones_visible : false;\n  });\n  \n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  const viewPark = useSelector(state => {\n    return state.layers ? state.layers.view_park : DISPLAYMODE_PARKEERDATA_VOERTUIGEN;\n  });\n\n  const viewRentals = useSelector(state => {\n    return state.layers ? state.layers.view_rentals : DISPLAYMODE_VERHUURDATA_VOERTUIGEN;\n  });\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  if(displayMode===DISPLAYMODE_OTHER||\n     (false && displayMode===DISPLAYMODE_RENTALS && showZoneOnOff===false)) {\n       return null; // no layer selection\n  }\n  \n  return (\n    <SlideBox name=\"SelectLayer\" direction=\"right\" options={{\n      title: 'Lagen',\n      backgroundColor: '#fff',\n    }} style={{\n      position: 'absolute',\n      top: '8px',\n      right: 0\n    }}>\n      <div className=\"SelectLayer pr-1\">\n        { displayMode===DISPLAYMODE_PARK ?\n            <div data-type=\"heat-map\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_HEATMAP ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_HEATMAP }) }}>\n              <span className=\"layer-title\">\n                Heat map\n              </span>\n            </div>: null }\n\n        { displayMode===DISPLAYMODE_PARK ?\n            <div data-type=\"pointers\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_CLUSTERS ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_CLUSTERS }) }}>\n              <span className=\"layer-title\">\n                Clusters\n              </span>\n            </div> : null }\n\n        { displayMode===DISPLAYMODE_PARK ?\n          <div data-type=\"vehicles\"  className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_VOERTUIGEN }) }}>\n            <span className=\"layer-title\">\n              Voertuigen\n            </span>\n          </div> : null }\n\n        { displayMode===DISPLAYMODE_RENTALS ?\n            <div data-type=\"heat-map\" className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_HEATMAP ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_HEATMAP }) }}>\n              <span className=\"layer-title\">\n                Heat map\n              </span>\n            </div>: null }\n\n        { displayMode===DISPLAYMODE_RENTALS ?\n            <div data-type=\"pointers\" className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_CLUSTERS ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_CLUSTERS }) }}>\n              <span className=\"layer-title\">\n                Clusters\n              </span>\n            </div> : null }\n\n        { displayMode===DISPLAYMODE_RENTALS ?\n          <div data-type=\"vehicles\"  className={`layer${viewRentals!==DISPLAYMODE_VERHUURDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n            onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_VOERTUIGEN }) }}>\n            <span className=\"layer-title\">\n              Voertuigen\n            </span>\n          </div> : null }\n\n        { isLoggedIn && showZoneOnOff ?\n          <div data-type=\"zones\" className={`layer${!zonesVisible ? ' layer-inactive':''}`} onClick={() => {\n              dispatch({ type: 'LAYER_TOGGLE_ZONES_VISIBLE', payload: null })\n          }}>\n            <span className=\"layer-title\">\n              Zones\n            </span>\n          </div> : null\n        }\n      </div>\n    </SlideBox>\n  )\n}\n\nexport {\n  SelectLayer\n}","import moment from 'moment';\nimport {\n    DISPLAYMODE_PARK,\n    DISPLAYMODE_RENTALS,\n    DISPLAYMODE_OTHER,\n  } from '../reducers/layers.js';\n\n\nexport const createFilterparameters = (displayMode, filter, metadata, options) => {\n  const isParkingData=displayMode===DISPLAYMODE_PARK;\n  const isRentalData=displayMode===DISPLAYMODE_RENTALS;\n  const isOntwikkelingData=displayMode===DISPLAYMODE_OTHER;\n  \n  options = options || {\n    includeOperators: false\n  }\n\n  // add zones\n  let filterparams = [];\n  if(filter.zones!==\"\") {\n    filterparams.push(\"zone_ids=\"+filter.zones);\n  } else if(filter.gebied!==\"\") {\n    // create zone filter\n    let candidates = [];\n    let municipality = metadata.gebieden.find(gebied=>gebied.gm_code===filter.gebied);\n    if(undefined!==municipality) {\n      candidates = metadata.zones.filter(zone => {\n        return zone.municipality===municipality.gm_code&&zone.name===municipality.name\n      });\n    } else {\n    }\n    if(candidates.length===1) {\n      filterparams.push(\"zone_ids=\"+candidates[0].zone_id);\n    } else {\n      console.error(\"zero or multiple multiple zones found for a single municipality (%s)\", filter.gebied, candidates);\n    }\n  }\n\n  if(options.includeOperators === true) {\n    // Add provider filter\n    if(filter.aanbiedersexclude!==\"\" && filter.aanbiedersexclude!==undefined) {\n      let filteritems = filter.aanbiedersexclude.split(\",\");\n      let selectedaanbieders = metadata.aanbieders\n        .filter(aanbieder=>(filteritems.includes(aanbieder.system_id)===false))\n        .map(aanbieder=>aanbieder.system_id).join(\",\");\n  \n      filterparams.push(\"operators=\" + selectedaanbieders);\n    } else if (metadata.aanbieders.length===1) {\n      filterparams.push(\"operators=\" + metadata.aanbieders[0].system_id);\n    }\n  } else {\n    // filtering is done client side\n  }\n  \n  // only apply here if there is one aanbieder set\n  if (metadata.aanbieders.length===1) {\n    filterparams.push(\"operators=\" + metadata.aanbieders[0].system_id);\n  }\n  \n  // Add vehicle type filter\n  // form_factors=[cargo_bicycle,moped,bicycle,car,other]\n  if(filter.voertuigtypesexclude!=='' && filter.voertuigtypesexclude!==undefined) {\n    let filteritems = filter.voertuigtypesexclude.split(\",\");\n    let selectedtypes = metadata.vehicle_types\n      .filter(vtype=>(filteritems.includes(vtype.id)===false))\n      .map(vtype=>vtype.id).join(\",\");\n\n    filterparams.push(\"form_factors=\" + selectedtypes);\n  }\n  \n  // Add date (start and/or end)\n  if(isParkingData) {\n    let ts = new Date().toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    if(filter.datum!==\"\") {\n      ts = new Date(filter.datum).toISOString().replace(/.\\d+Z$/g, \"Z\");\n    }\n    filterparams.push(\"timestamp=\"+ts)\n  }\n  \n  if(isRentalData) {\n    let ts1 = new Date().toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    let ts2 = ts1;\n    // filter.intervalstart = moment().subtract(filter.intervalduur / 1000, 'seconds').toISOString();\n    // filter.intervalend = moment().toISOString();\n    const isInvalid = () => {\n      return ! filter\n          // || filter.intervalstart === \"\"\n          || filter.intervalend === \"\"\n          // || filter.intervalstart === undefined\n          || filter.intervalend === undefined;\n    }\n    if(! isInvalid()) {\n      ts1 = moment(filter.intervalend).subtract(filter.intervalduur / 1000, 'seconds').toISOString().replace(/.\\d+Z$/g, \"Z\");\n      ts2 = moment(filter.intervalend).toISOString().replace(/.\\d+Z$/g, \"Z\");\n    }\n    filterparams.push(\"start_time=\" + ts1 + \"&end_time=\" + ts2)\n  }\n  \n  if(isOntwikkelingData) {\n    let van = undefined;\n    let tot = undefined;\n    if(filter.ontwikkelingvan && filter.ontwikkelingtot) {\n      van = new Date(filter.ontwikkelingvan);\n      tot = new Date(moment(filter.ontwikkelingtot).add(1, 'day'));\n    }\n    \n    if(!van||!tot) {\n      van = new Date();\n      // take now, strip hours, add 24 h\n      tot = new Date((new Date()).toDateString()) ;\n      van.setDate(tot.getDate()-7); // go back 1 week\n    }\n    \n    // toISOString(true) keeps local timezone://momentjs.com/docs/#/displaying/as-iso-string/\n    // Date format to create: 2020-12-31T23:00:00Z\n    // let ts1 = van.toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    // let ts2 = tot.toISOString().replace(/.\\d+Z$/g, \"Z\"); // use current time without decimals\n    let ts1 = moment(van).format('YYYY-MM-DDTHH:mm:ss') + 'Z'; // use current time without decimals\n    let ts2 = moment(tot).format('YYYY-MM-DDTHH:mm:ss') + 'Z'; // use current time without decimals\n    filterparams.push(\"start_time=\" + ts1 + \"&end_time=\" + ts2)\n  }\n  \n  return filterparams;\n}\n\nexport const isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nexport const convertDurationToBin = (duration) => {\n  if (duration <= 60) {\n    return 0;\n  }\n  if (duration <= 24 * 60) {\n    return 1;\n  }\n  if (duration <= 24 * 60 * 4) {\n    return 2;\n  }\n  return 3;\n}\n\nexport const convertDistanceToBin = (distance_in_meters) => {\n  if (distance_in_meters <= 1000) {\n    return 0;\n  }\n  if (distance_in_meters <= 2000) {\n    return 1;\n  }\n  if (distance_in_meters <= 5000) {\n    return 2;\n  }\n  return 3;\n}\n\n","import { createFilterparameters } from '../poll-api/pollTools.js';\nimport { DISPLAYMODE_OTHER, DISPLAYMODE_PARK } from '../reducers/layers.js';\nimport saveAs from 'file-saver';\n\nexport const getParkEventsStats = async (token, options) => {\n  // Example URL: `https://api.deelfietsdashboard.nl/dashboard-api/v2/park_events/stats?timestamp=2022-01-19T23:00:00Z&operators=cykl,flickbike,donkey,mobike,htm,gosharing,check,felyx,deelfietsnederland,keobike,lime,baqme,cargoroo,uwdeelfiets,hely,tier&zone_ids=34234`;\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/v2/park_events/stats?x=1`;\n\n  let filterParams = createFilterparameters(DISPLAYMODE_PARK, options.filter, options.metadata);\n  if(filterParams.length>0) url += \"&\" + filterParams.join(\"&\");\n  console.log('url', url)\n\n  let fetchOptions = {\n    headers: {\n      \"authorization\": `Bearer ${token}`\n    }\n  }\n  \n  const response = await fetch(url, fetchOptions);\n  const responseJson = await response.json();\n\n  return responseJson;\n}\n","import React, {useEffect, useState} from 'react';\nimport { useSelector } from 'react-redux';\nimport SlideBox from '../SlideBox/SlideBox.jsx';\n\nimport {getParkEventsStats} from '../../api/parkEventsStats.js';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER,\n  // DISPLAYMODE_PARKEERDATA_HEATMAP,\n  // DISPLAYMODE_PARKEERDATA_CLUSTERS,\n  // DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  // DISPLAYMODE_VERHUURDATA_HEATMAP,\n  // DISPLAYMODE_VERHUURDATA_CLUSTERS,\n  // DISPLAYMODE_VERHUURDATA_VOERTUIGEN\n} from '../../reducers/layers.js';\n\n// import './MetaStats.css';\n\nfunction StatRow({data}) {\n  if(! data.stats) return <></>\n\n  let total = 0;\n  data.stats.forEach(x => {\n    total += x\n  })\n\n  return <tr key={data.zone_id}>\n    <td key={data.zone_id+'name'} className=\"py-1 px-2\">{data.name}</td>\n    <td key={data.zone_id+'total'} className=\"py-1 px-2\">{total}</td>\n    {data.stats.map((x,i) => {\n      return <td key={'p'+i} className=\"py-1 px-2 text-center\">{x}</td>\n    })}\n  </tr>\n}\n\nfunction MetaStats(props) {\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  // const {setLayers, setActiveSource} = props;\n  // const dispatch = useDispatch()\n\n  // const isLoggedIn = useSelector(state => {\n  //   return state.authentication.user_data ? true : false;\n  // });\n\n  const token = useSelector(state => {\n    if(state.authentication && state.authentication.user_data) {\n      return state.authentication.user_data.token;\n    }\n    return null;\n  });\n  const filter = useSelector(state => state.filter)\n  const metadata = useSelector(state => state.metadata)\n\n  const [metaStatsData, setMetaStatsData] = useState([])\n\n  useEffect(() => {\n    // Do not get meta stats until you have 'zones'\n    if(! metadata || ! metadata.zones || metadata.zones.length <= 0) return;\n    async function gogogo() {\n      const result = await getParkEventsStats(token, {\n        filter: filter,\n        metadata: metadata\n      });\n      setMetaStatsData(result);\n    }\n    gogogo();\n  }, [filter, metadata, token]);\n    \n  const markers = [\n    { id: 0, color: '#1FA024', fillcolor: '#1FA024', name: '< 1 uur'},\n    { id: 1, color: '#48E248', fillcolor: '#48E248', name: '< 24 uur'},\n    { id: 2, color: '#FFD837', fillcolor: '#FFD837', name: '< 4 d'},\n    { id: 3, color: '#FD3E48', fillcolor: '#FD3E48', name: '> 4 d'}\n  ];\n\n  if(displayMode===DISPLAYMODE_OTHER || displayMode===DISPLAYMODE_RENTALS) {\n    return null; // no meta stats\n  }\n\n  if(! metaStatsData || ! metaStatsData.park_event_stats || metaStatsData.park_event_stats.length <= 0) {\n    return <></>\n  }\n\n  return (\n    <SlideBox name=\"MetaStats\" direction=\"right\" options={{\n      title: 'Info',\n      backgroundColor: '#fff',\n    }} style={{\n      position: 'absolute',\n      top: '125px',\n      right: 0\n    }}>\n      <div className=\"MetaStats px-2 py-2\" style={{minWidth: '356px', minHeight: '105px'}}>\n        <table className=\"text-sm text-left w-full\">\n          <thead className=\"border-b-2 border-gray-200\">\n            <tr>\n              <th className=\"py-1 px-2 text-left font-normal\">Zone</th>\n              <th className=\"py-1 px-2 pr-4 text-left font-normal\">Totaal</th>\n              {markers.map((marker,i) => {\n                return <th key={'m'+i} className=\"py-1 px-2 text-center\">\n                  <div className=\"w-6 h-6 \">\n                    <svg viewBox='0 0 30 30' >\n                      <circle cx={'50%'} cy={'50%'} r={'40%'} fill={marker.color} />\n                      <circle cx={'50%'} cy={'50%'} r={'34%'} fill={marker.fillcolor} />\n                    </svg>\n                  </div>\n                </th>\n              })}\n            </tr>\n          </thead>\n          <tbody>\n            {metaStatsData.park_event_stats.map((x, i) => {\n              return <StatRow key={'stat'+i} data={x} />\n            })}\n          </tbody>\n        </table>\n      </div>\n    </SlideBox>\n  )\n}\n\nexport {\n  MetaStats\n}","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport {MapComponent} from '../components/Map/MapComponent.jsx';\nimport {SelectLayer} from '../components/SelectLayer/SelectLayer.jsx';\nimport {MetaStats} from '../components/MetaStats/MetaStats.jsx';\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_PARKEERDATA_HEATMAP,\n  DISPLAYMODE_PARKEERDATA_CLUSTERS,\n  DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  DISPLAYMODE_VERHUURDATA_HEATMAP,\n  DISPLAYMODE_VERHUURDATA_CLUSTERS,\n  DISPLAYMODE_VERHUURDATA_VOERTUIGEN,\n} from '../reducers/layers.js';\n\nimport './MapPage.css';\n\nfunction Map({mode, mapContainer}) {\n  const showZones = useSelector(state => {\n    return state.layers ? state.layers.zones_visible : false;\n  });\n\n  const filter = useSelector(state => {\n    return state.filter;\n  });\n\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  const viewPark = useSelector(state => {\n    return state.layers ? state.layers.view_park : DISPLAYMODE_PARKEERDATA_VOERTUIGEN;\n  });\n\n  const viewRentals = useSelector(state => {\n    return state.layers ? state.layers.view_rentals : DISPLAYMODE_VERHUURDATA_VOERTUIGEN;\n  });\n  \n  let layers = [];\n  if(showZones) { layers.push('zones-geodata', 'zones-geodata-border') }\n  \n  let activeSource = '';\n  // console.log(\"Mappage got displaymode\", displayMode);\n  \n  if(displayMode===DISPLAYMODE_PARK) {\n    switch(viewPark) {\n      case DISPLAYMODE_PARKEERDATA_HEATMAP:\n        layers.push('vehicles-heatmap-city-level');\n        activeSource = 'vehicles';\n        break;\n      case DISPLAYMODE_PARKEERDATA_CLUSTERS:\n        layers.push('vehicles-clusters');\n        layers.push('vehicles-clusters-count');\n        layers.push('vehicles-clusters-point');\n        activeSource = 'vehicles-clusters';\n        break;\n      case DISPLAYMODE_PARKEERDATA_VOERTUIGEN:\n        layers.push('vehicles-point');\n        activeSource = 'vehicles';\n        break;\n      default:\n    }\n  } else if(displayMode===DISPLAYMODE_RENTALS) {\n    const rentalsKey = (filter.herkomstbestemming === 'bestemming' ? 'destinations' : 'origins');\n    switch(viewRentals) {\n      case DISPLAYMODE_VERHUURDATA_HEATMAP:\n        layers.push(`rentals-${rentalsKey}-heatmap-city-level`);\n        activeSource = `rentals-${rentalsKey}`;\n        break;\n      case DISPLAYMODE_VERHUURDATA_CLUSTERS:\n        layers.push(`rentals-${rentalsKey}-clusters`);\n        layers.push(`rentals-${rentalsKey}-clusters-count`);\n        layers.push(`rentals-${rentalsKey}-clusters-point`);\n        activeSource = `rentals-${rentalsKey}-clusters`;\n        break;\n      case DISPLAYMODE_VERHUURDATA_VOERTUIGEN:\n        layers.push(`rentals-${rentalsKey}-point`);\n        activeSource = `rentals-${rentalsKey}`;\n        break;\n      default:\n    }\n  }\n  // console.log('layers', layers)\n  // console.log('activeSource', activeSource)\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"hidden sm:block\">\n        <SelectLayer />\n        <MetaStats />\n      </div>\n      <div className=\"flex-1 bg-red-400\">\n        <MapComponent\n          mapContainer={mapContainer}\n          layers={layers}\n          activeSource={activeSource}\n        />\n      </div>\n  </div>);\n}\n\nexport default Map;\n","import './ContentPage.css'\nimport { useSelector } from 'react-redux';\n\nexport default function ContentPage(props) {\n  const isFilterBarVisible = useSelector(state => {\n    return state.ui ? state.ui.FILTERBAR : false;\n  });\n\n  return (\n    <div\n      className={`ContentPage h-full pb-20 ${isFilterBarVisible ? '' : 'full-page'}`}\n      style={{\n        overflowY: 'auto',\n      }}\n    >\n      <div className=\"ContentPage-inner py-8 pl-12\">\n        {props.children}\n      </div>\n    </div>\n  );\n}\n","export const getOperatorStatsForChart = (data, aanbieders) => {\n  let operators = {};\n  aanbieders.forEach(a=>{ operators[a.system_id]=0 })\n  data.forEach(row=> {\n    Object.keys(row).forEach(key=>{\n      if(key!=='start_interval') {\n        if(key in operators === false) { operators[key]=0; }\n        operators[key]++;\n      }\n    })\n  });\n  \n  return operators;\n}\n\n","import { createFilterparameters } from '../poll-api/pollTools.js';\nimport { DISPLAYMODE_OTHER } from '../reducers/layers.js';\nimport saveAs from 'file-saver';\n\nexport const getAggregatedStats = async (token, key, options) => {\n  // Example URL: `https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/${key}?start_time=${options.startTime}&end_time=${options.endTime}&operators=${options.operators}&zone_ids=${options.zoneIds}&aggregation_level=${options.aggregationLevel}`;\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/${key}?aggregation_level=${options.aggregationLevel}`;\n\n  let filterParams = createFilterparameters(DISPLAYMODE_OTHER, options.filter, options.metadata);\n  if(filterParams.length>0) url += \"&\" + filterParams.join(\"&\");\n  console.log('url', url)\n\n  let fetchOptions = {\n    headers: {\n      \"authorization\": `Bearer ${token}`\n    }\n  }\n  \n  const response = await fetch(url, fetchOptions);\n  const responseJson = await response.json();\n\n  return responseJson;\n}\n\nexport const getAggregatedParkingDuration = async (token, key, options) => {\n  // Example URL: `https://api.deelfietsdashboard.nl/dashboard-api/stats/available_bikes?start_time=2021-12-27T14:00:00Z&end_time=2022-01-10T14:00:00Z&operators=deelfietsnederland`;\n  // let url = `https://api.deelfietsdashboard.nl/dashboard-api/aggregated_stats/${key}?aggregation_level=${options.aggregationLevel}`;\n\n  // let filterParams = createFilterparameters(DISPLAYMODE_OTHER, options.filter, options.metadata);\n  // if(filterParams.length>0) url += \"&\" + filterParams.join(\"&\");\n  // console.log('url', url)\n\n  // let fetchOptions = {\n  //   headers: {\n  //     \"authorization\": `Bearer ${token}`\n  //   }\n  // }\n  \n  // const response = await fetch(url, fetchOptions);\n  // const responseJson = await response.json();\n\n  // return responseJson;\n}\n\nexport const downloadReport = async (token, options) => {\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/stats/generate_report?start_time=${options.startDate}&end_time=${options.endDate}&gm_code=${options.gm_code}`;\n\n  let fetchOptions = {\n    headers: {\n      \"authorization\": `Bearer ${token}`\n    }\n  }\n  \n  const response = await fetch(url, fetchOptions);\n  const responseBlob = await response.blob();\n\n  saveAs(responseBlob, `rapportage_${options.startDate}-${options.endDate}_${options.gm_code}.xlsx`)\n}\n\nexport const downloadRawData = async (token, options) => {\n  let url = `https://api.deelfietsdashboard.nl/dashboard-api/raw_data?start_time=${options.startDate}&end_time=${options.endDate}`;\n\n  let fetchOptions = {\n    headers: {\n      \"authorization\": `Bearer ${token}`\n    }\n  }\n  \n  const response = await fetch(url, fetchOptions);\n  const responseBlob = await response.blob();\n\n  saveAs(responseBlob, `export_dashboarddeelmobiliteit_${options.startDate}-${options.endDate}_${options.gm_code}.zip`)\n}\n\n","import moment from 'moment';\n\nconst prepareAggregatedStatsData = (key, data, aggregationLevel, aanbiedersexclude='') => {\n  if(! data || ! data[`${key}_aggregated_stats`] || ! data[`${key}_aggregated_stats`].values) {\n    return [];\n  }\n  const getDateFormat = (aggregationLevel) => {\n    if(aggregationLevel === 'day') {\n      return 'DD MMM YYYY';\n    }\n    else if(aggregationLevel === 'week') {\n      return '[w]W, YYYY';\n    }\n    else if(aggregationLevel === 'month') {\n      return 'MMM YYYY';\n    }\n  }\n  return data[`${key}_aggregated_stats`].values.map(x => {\n    const { start_interval, ...rest } = x;\n    let item = {...rest, ...{ name: moment(start_interval).format(getDateFormat(aggregationLevel)) }}// https://dmitripavlutin.com/remove-object-property-javascript/#2-object-destructuring-with-rest-syntax\n    if(aanbiedersexclude!=='') {\n      const exclude = aanbiedersexclude.split(',')\n      Object.keys(item).forEach(key=>{if(exclude.includes(key)) {delete item[key]}});\n    }\n    return item;\n  });\n}\n\nexport {\n  prepareAggregatedStatsData\n}\n","import {PureComponent } from 'react';\n\nclass CustomizedXAxisTick extends PureComponent {\n  render() {\n    const { x, y, payload } = this.props;\n\n    return (\n      <g transform={`translate(${x},${y})`}>\n        <text x={0} y={0} dy={16} textAnchor=\"middle\" fill=\"#666\" transform=\"rotate(0)\" fontSize=\"0.8em\">\n          {payload.value}\n        </text>\n      </g>\n    );\n  }\n}\n\nclass CustomizedYAxisTick extends PureComponent {\n  render() {\n    const { x, y, payload } = this.props;\n\n    return (\n      <g transform={`translate(${x},${y})`}>\n        <text x={-4} y={0} dy={3} textAnchor=\"end\" fill=\"#666\" transform=\"rotate(0)\" fontSize=\"0.8em\">\n          {payload.value}\n        </text>\n      </g>\n    );\n  }\n}\n\nexport {\n  CustomizedXAxisTick,\n  CustomizedYAxisTick\n}\n","// import {PureComponent } from 'react';\n\nimport './CustomizedTooltip.css';\n\nconst CustomizedTooltip = ({ active, payload, label }) => {\n  if (active && payload && payload.length) {\n\n    const arrayReverseObj = obj => Object.keys(obj).sort().reverse().map(key=> ({ ...obj[key], key }) );\n\n    const sumValue = () => {\n      let res = 0;\n      payload.forEach(x => {\n        res += x.value;\n      })\n      return res;\n    }\n\n    return (\n      <div className=\"CustomizedTooltip\">\n        <div className=\"my-0\">\n          <b>{`${label}`}</b>\n        </div>\n        <ul className=\"my-0 py-0\">\n          {arrayReverseObj(payload).map((x,i) => {\n            return <li key={'c-'+i} style={{color: x.fill}}>\n              {x.name}: {x.value}\n            </li>\n          })}\n        </ul>\n        <div className=\"my-0\">\n          Totaal: {sumValue()}<br />\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport {\n  CustomizedTooltip\n}\n","import React, {useEffect, useState } from 'react';\n\nimport { getOperatorStatsForChart } from './chartTools.js';\n\nimport {\n  useDispatch,\n  useSelector\n} from 'react-redux';\n\n// import moment from 'moment';\n\nimport {\n  AreaChart,\n  // LineChart,\n  Area,\n  BarChart,\n  Bar,\n  // Line,\n  XAxis,\n  Legend,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\n\nimport {getAggregatedStats} from '../../api/aggregatedStats';\nimport {\n  getProviderColor,\n  getUniqueProviderNames\n} from '../../helpers/providers.js';\nimport {prepareAggregatedStatsData} from '../../helpers/stats.js';\n\nimport {CustomizedXAxisTick, CustomizedYAxisTick} from '../Chart/CustomizedAxisTick.jsx';\nimport {CustomizedTooltip} from '../Chart/CustomizedTooltip.jsx';\n\nfunction VerhuringenChart(props) {\n  const dispatch = useDispatch()\n\n  const token = useSelector(state => (state.authentication.user_data && state.authentication.user_data.token)||null)\n  const filter = useSelector(state => state.filter)\n  const metadata = useSelector(state => state.metadata)\n\n  const [rentalsData, setRentalsData] = useState([])\n\n  useEffect(() => {\n    // Do not reload chart until you have 'zones'\n    if(! metadata || ! metadata.zones || metadata.zones.length <= 0) return;\n    async function fetchData() {\n      const rentals = await getAggregatedStats(token, 'rentals', {\n        filter: filter,\n        metadata: metadata,\n        aggregationLevel: filter.ontwikkelingaggregatie\n      });\n\n      let operators = getOperatorStatsForChart(rentals.rentals_aggregated_stats.values, metadata.aanbieders)\n      dispatch({type: 'SET_OPERATORSTATS_VERHURINGENCHART', payload: operators });\n\n      setRentalsData(rentals);\n    }\n    fetchData();\n  }, [filter, filter.ontwikkelingaggregatie, metadata, token, dispatch]);\n  \n  const chartdata = prepareAggregatedStatsData('rentals', rentalsData, filter.ontwikkelingaggregatie, filter.aanbiedersexclude);\n  \n  // console.log('numberOfPointsOnXAxis', numberOfPointsOnXAxis)\n  const numberOfPointsOnXAxis = rentalsData ? Object.keys(rentalsData).length : 0;\n\n  const renderChart = () => {\n    if(numberOfPointsOnXAxis > 12) {\n      return <AreaChart\n        data={chartdata}\n        margin={{\n          top: 10,\n          right: 30,\n          left: 0,\n          bottom: 0,\n        }}\n      >\n        <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n        <XAxis dataKey=\"name\" tick={<CustomizedXAxisTick />} />\n        <YAxis tick={<CustomizedYAxisTick />} />\n        <Tooltip content={<CustomizedTooltip />} />\n        <Legend />} />\n        {getUniqueProviderNames(chartdata[0]).map(x => {\n          const providerColor = getProviderColor(metadata.aanbieders, x)\n          return (\n            <Area\n              key={x}\n              stackId=\"1\"\n              type=\"monotone\"\n              dataKey={x}\n              stroke={providerColor}\n              fill={providerColor}\n              isAnimationActive={false}\n            />\n          )\n        })}\n      </AreaChart>\n    }\n\n    return <BarChart\n      data={chartdata}\n      margin={{\n        top: 10,\n        right: 30,\n        left: 0,\n        bottom: 0,\n      }}\n    >\n      <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n      <XAxis dataKey=\"name\" tick={<CustomizedXAxisTick />} />\n      <YAxis tick={<CustomizedYAxisTick />} />\n      <Tooltip content={<CustomizedTooltip />} />\n      <Legend />} />\n      {getUniqueProviderNames(chartdata[0]).map(x => {\n        const providerColor = getProviderColor(metadata.aanbieders, x)\n        return (\n          <Bar\n            key={x}\n            stackId=\"1\"\n            type=\"monotone\"\n            dataKey={x}\n            stroke={providerColor}\n            fill={providerColor}\n            isAnimationActive={false}\n          />\n        )\n      })}\n    </BarChart>\n  }\n\n  return (\n    <div style={{ width: '100%', height: '400px', overflowX: 'hidden', overflowY: 'hidden' }}>\n      <ResponsiveContainer>\n        {renderChart()}\n      </ResponsiveContainer>\n    </div>\n  )\n}\n\nexport default VerhuringenChart;\n","import React, {useEffect, useState } from 'react';\n\nimport { getOperatorStatsForChart } from './chartTools.js';\n\nimport {\n  useDispatch,\n  useSelector\n} from 'react-redux';\n\n// import moment from 'moment';\n\nimport {\n  AreaChart,\n  // LineChart,\n  Area,\n  BarChart,\n  Bar,\n  // Line,\n  XAxis,\n  Legend,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer\n} from 'recharts';\n\nimport {getAggregatedStats} from '../../api/aggregatedStats';\nimport {\n  getProviderColor,\n  getUniqueProviderNames\n} from '../../helpers/providers.js';\nimport {prepareAggregatedStatsData} from '../../helpers/stats.js';\n\nimport {CustomizedXAxisTick, CustomizedYAxisTick} from '../Chart/CustomizedAxisTick.jsx';\nimport {CustomizedTooltip} from '../Chart/CustomizedTooltip.jsx';\n\nfunction BeschikbareVoertuigenChart(props) {\n  const dispatch = useDispatch()\n\n  const token = useSelector(state => (state.authentication.user_data && state.authentication.user_data.token)||null)\n  const filter = useSelector(state => state.filter)\n  const metadata = useSelector(state => state.metadata)\n\n  const [vehiclesData, setVehiclesData] = useState([])\n\n  useEffect(() => {\n    // Do not reload chart until you have 'zones'\n    if(! metadata || ! metadata.zones || metadata.zones.length <= 0) return;\n    async function fetchData() {\n      const availableVehicles = await getAggregatedStats(token, 'available_vehicles', {\n        filter: filter,\n        metadata: metadata,\n        aggregationLevel: filter.ontwikkelingaggregatie\n      });\n      \n      let operators = getOperatorStatsForChart(availableVehicles.available_vehicles_aggregated_stats.values, metadata.aanbieders)\n      dispatch({type: 'SET_OPERATORSTATS_BESCHIKBAREVOERTUIGENCHART', payload: operators });\n      \n      setVehiclesData(availableVehicles);\n    }\n    fetchData();\n  }, [filter, filter.ontwikkelingaggregatie, metadata, token, dispatch]);\n  \n  const chartdata = prepareAggregatedStatsData('available_vehicles', vehiclesData, filter.ontwikkelingaggregatie, filter.aanbiedersexclude)\n\n  const numberOfPointsOnXAxis = chartdata ? Object.keys(chartdata).length : 0;\n\n  const renderChart = () => {\n    if(numberOfPointsOnXAxis > 12) {\n      return <AreaChart\n        data={chartdata}\n        margin={{\n          top: 10,\n          right: 30,\n          left: 0,\n          bottom: 0,\n        }}\n      >\n        <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n        <XAxis dataKey=\"name\" tick={<CustomizedXAxisTick />} />\n        <YAxis tick={<CustomizedYAxisTick />} />\n        <Tooltip content={<CustomizedTooltip />} />\n        <Legend />\n        {getUniqueProviderNames(chartdata[0]).map(x => {\n          const providerColor = getProviderColor(metadata.aanbieders, x)\n          return (\n            <Area\n              key={x}\n              stackId=\"1\"\n              type=\"monotone\"\n              dataKey={x}\n              stroke={providerColor}\n              fill={providerColor}\n              isAnimationActive={false}\n            />\n          )\n        })}\n      </AreaChart>\n    }\n\n    return <BarChart\n      data={chartdata}\n      margin={{\n        top: 10,\n        right: 30,\n        left: 0,\n        bottom: 0,\n      }}\n    >\n      <CartesianGrid strokeDasharray=\"3 0\" vertical={false} />\n      <XAxis dataKey=\"name\" tick={<CustomizedXAxisTick />} />\n      <YAxis tick={<CustomizedYAxisTick />} />\n      <Tooltip content={<CustomizedTooltip />} />\n      <Legend />\n      {getUniqueProviderNames(chartdata[0]).map(x => {\n        const providerColor = getProviderColor(metadata.aanbieders, x)\n        return (\n          <Bar\n            key={x}\n            stackId=\"1\"\n            type=\"monotone\"\n            dataKey={x}\n            stroke={providerColor}\n            fill={providerColor}\n            isAnimationActive={false}\n          />\n        )\n      })}\n    </BarChart>\n  }\n\n  return (\n    <div style={{ width: '100%', height: '400px', overflowX: 'hidden', overflowY: 'hidden' }}>\n      <ResponsiveContainer>\n        {renderChart()}\n      </ResponsiveContainer>\n    </div>\n  )\n}\n\nexport default BeschikbareVoertuigenChart;\n","import React from 'react'; // , {useEffect, useState }\nimport './StatsPage.css'\n\nimport {\n  useDispatch,\n  useSelector\n} from 'react-redux';\n\nimport VerhuringenChart from '../components/Chart/VerhuringenChart.jsx';\nimport BeschikbareVoertuigenChart from '../components/Chart/BeschikbareVoertuigenChart.jsx';\n\nfunction StatsPage(props) {\n  const dispatch = useDispatch()\n\n  const filter = useSelector(state => state.filter)\n\n  const setAggregationLevel = (newlevel) => {\n    dispatch({\n      type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE',\n      payload: newlevel\n    })\n  }\n\n  return (\n    <div className=\"StatsPage\">\n\n      <div className={\"agg-button-container\"}>\n        <div className={\"agg-button \" + (filter.ontwikkelingaggregatie==='day' ? \" agg-button-active\":\"\")} onClick={() => { setAggregationLevel('day') }}>\n          dag\n        </div>\n        <div className={\"agg-button \" + (filter.ontwikkelingaggregatie==='week' ? \" agg-button-active\":\"\")} onClick={() => { setAggregationLevel('week') }}>\n          week\n        </div>\n        <div className={\"agg-button \" + (filter.ontwikkelingaggregatie==='month' ? \" agg-button-active\":\"\")} onClick={() => { setAggregationLevel('month') }}>\n          maand\n        </div>\n      </div>\n\n      <div className=\"xl:flex\">\n        <div className=\"xl:flex-1\">\n          <h2 className=\"text-4xl my-2\">Verhuringen</h2>\n          <VerhuringenChart />\n        </div>\n        <div className=\"xl:flex-1\">\n          <h2 className=\"text-4xl my-2\">Beschikbare voertuigen</h2>\n          <BeschikbareVoertuigenChart />\n        </div>\n      </div>\n\n    </div>\n  )\n}\n\nexport default StatsPage;\n","function Logo() {\n  return (\n    <img alt=\"Logo CROW\" src=\"/images/logo-fietsberaad-crow.svg\" width=\"82\" />\n  )\n}\n\nexport default Logo;\n","import React from 'react';\n\nexport function IconButtonClose(props) {\n  return (\n    <div className=\"text-2xl font-bold cursor-pointer\" onClick={props.onClick}\n      style={props.style}\n      ></div>\n  )\n}\n\nexport function IconButtonFilter(props) {\n  return (\n    <div\n      {...props}\n      className=\"w-12 h-8 box-border border-2 border-black flex items-center justify-center p-3 rounded-full disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:shadow-outline\"\n    >\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 22.13 15.72\">\n        <path d=\"M7.16 0a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h2.71a3.7 3.7 0 0 0 7.2 0h10.52a.85.85 0 0 0 0-1.7H10.76A3.7 3.7 0 0 0 7.16 0zm0 5.72a2 2 0 1 1 2-2 2 2 0 0 1-2 2zM15 8.3a3.7 3.7 0 0 0-3.6 2.86H.85a.85.85 0 0 0 0 1.7h10.52a3.7 3.7 0 0 0 7.2 0h2.71a.85.85 0 0 0 0-1.7h-2.71A3.7 3.7 0 0 0 15 8.3zm0 5.7a2 2 0 1 1 2-2 2 2 0 0 1-2 2z\"></path>\n      </svg>\n    </div>);\n}\n","import React, { useState } from 'react';\nimport { setUser } from '../actions/authentication';\nimport { useDispatch } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nimport Logo from '../components/Logo.jsx';\nimport { IconButtonClose } from '../components/IconButtons.jsx';\n\nconst Login = () => {\n  const [emailaddress, setEmailaddress] = useState('');\n  const [password, setPassword] = useState('');\n  const [recoverPassword, setRecoverPassword] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [doRenderRedirect, setDoRenderRedirect] = useState(false);\n  const dispatch = useDispatch();\n\n  const login = e => {\n    \n    e.preventDefault();\n\n    // Clear error message\n    setErrorMessage(null);\n\n    // Basic validation\n    if(! emailaddress) {\n      setErrorMessage('Voer alsjeblieft een e-mailadres in');\n      return;\n    }\n\n    if(! password) {\n      setErrorMessage('Voer alsjeblieft een wachtwoord in');\n      return;\n    }\n\n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + \"/login\";\n    var data = {\n      loginId: emailaddress,\n      password: password,\n      applicationId: process.env.REACT_APP_FUSIONAUTH_APPLICATION_ID\n    };\n    \n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        dispatch( { type: 'LOGIN', payload: null } );\n        dispatch( { type: 'RESET_FILTER', payload: null } );\n        dispatch( setUser(response) );\n        setLoggedIn(true);\n        document.location = '/map/park';\n      }).catch(error => {\n        console.error(\"Login failed! (%s)\", error.message);\n        setErrorMessage('Login mislukt. Heb je het juiste e-mailadres en wachtwoord ingevuld?');\n        setLoggedIn(false);\n    });\n  };\n  \n  const recover = e => {\n    e.preventDefault();\n\n    // Clear error message\n    setErrorMessage(null);\n\n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + \"/user/forgot-password\"\n    var data = {\n      loginId: emailaddress,\n    };\n\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(response => {\n        console.log(response);\n        setSuccessMessage('Als je e-mailadres bij ons bekend is, heb je nu e-mail ontvangen. Hiermee kun je je wachtwoord opnieuw instellen.');\n        return true;\n      }).catch(error => {\n        console.log(error)\n        setSuccessMessage('Als je e-mailadres bij ons bekend is, heb je nu e-mail ontvangen. Hiermee kun je je wachtwoord opnieuw instellen.');\n        return false;\n      });\n  };\n\n  const renderLogin = () => {\n    return (\n      <>\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Het Dashboard Deelmobiliteit is een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit op de voeten willen volgen.\n        </p>\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Hoe lang en waar staan deelvoertuigen ongebruikt in de openbare ruimte? Hoe vaak worden de deelvoertuigen verhuurd? In welke wijken en op welke tijdstippen zijn deelvoertuigen populair?\n        </p>\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Met de informatie uit het Dashboard Deelmobiliteit kunnen overheden hun beleid ontwikkelen, evalueren en bijsturen.\n        </p>\n\n        <form className=\"mt-8 mb-4\">\n          <label className=\"block\" htmlFor=\"emailaddress\">Email</label>\n          <input\n            className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n            autoCapitalize=\"off\"\n            placeholder=\"email\"\n            name=\"emailaddress\"\n            required\n            onChange={e => setEmailaddress(e.target.value.trim())}\n          />\n\n          <label className=\"mt-4 block\" htmlFor=\"password\">Wachtwoord</label>\n          <input\n            className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n            type=\"password\"\n            placeholder=\"Wachtwoord\"\n            name=\"password\"\n            required\n            onChange={e => setPassword(e.target.value)}\n          />\n\n          {errorMessage && <div className=\"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n            <span className=\"block sm:inline\">{errorMessage}</span>\n          </div>}\n\n          <p className=\"my-4\">\n            <a href=\"#\" onClick={() => {\n              setErrorMessage(null)\n              setRecoverPassword(true)\n            }} className=\"\n              text-gray-400\n              underline\n              text-sm\n            \">\n              Wachtwoord vergeten?\n            </a>\n          </p>\n\n          <div className=\"flex items-baseline mt-4\">\n              <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-theme-blue rounded-lg\" onClick={login}>\n                Login\n              </button>\n              <button className=\"px-6 py-2 mt-4 text-white bg-gray-300 rounded-lg hover:bg-gray-400\" onClick={() => {\n                setDoRenderRedirect(true)\n              }}>\n                Annuleer\n              </button>\n          </div>\n      </form>\n      </>\n    )\n  }\n  \n  const renderRecoverPassword = () => {\n    return (\n      <div>\n\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Ben je je wachtwoord vergeten? Vul dan hieronder je mailadres in om een nieuw wachtwoord in te stellen.\n        </p>\n\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Liever inloggen? Ga dan door naar het <Link to=\"/login\">loginformulier</Link>.\n        </p>\n\n        <br />\n\n        <form>\n          <label className=\"block\" htmlFor=\"emailaddress\">E-mailadres</label>\n          <input\n            className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n            autoCapitalize=\"off\"\n            placeholder=\"E-mailadres\"\n            name=\"emailaddress\"\n            required\n            onChange={e => setEmailaddress(e.target.value.trim())}\n          />\n             \n          {successMessage && <div className=\"mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative\" role=\"info\">\n            <span className=\"block sm:inline\">{successMessage}</span>\n          </div>}\n\n          {errorMessage && <div className=\"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n            <span className=\"block sm:inline\">{errorMessage}</span>\n          </div>}\n\n          <div>\n            <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-theme-blue rounded-lg\" onClick={recover}>\n              Herstel\n            </button>\n            <button className=\"px-6 py-2 mt-4 text-white bg-gray-300 rounded-lg hover:bg-gray-400\" onClick={() => {\n              setErrorMessage(null);\n              setRecoverPassword(false);\n            }}>\n              Annuleer\n            </button>\n          </div>\n        </form>\n      </div>\n    )\n  }\n  const renderRedirect = () => {\n    return (\n      <Redirect to=\"/\" />\n    );\n  }\n \n  if (loggedIn || doRenderRedirect) {\n    return renderRedirect();\n  }\n\n  return (\n    <div className=\"\n      px-4\n      min-h-screen\n      sm:flex sm:justify-center\n      sm:px-0\n    \">\n      <div className=\"mx-auto py-8\" style={{\n        width: '100%',\n        maxWidth: '416px'\n      }}>\n\n        <IconButtonClose\n          onClick={() => setDoRenderRedirect(true)}\n          style={{position: 'absolute', right: '30px', top: '18px'}}\n        />\n\n        <Logo />\n\n        <h2 className=\"mt-4 mb-4 text-4xl font-bold\">\n          Dashboard Deelmobiliteit\n        </h2>\n\n        {recoverPassword ? renderRecoverPassword() : renderLogin()}\n\n      </div>\n    </div>\n  )\n};\n\nexport default Login;","import React, { useState } from 'react';\nimport { setUser } from '../actions/authentication';\nimport { useDispatch } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\nimport { useParams } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nimport Logo from '../components/Logo.jsx';\nimport { IconButtonClose } from '../components/IconButtons.jsx';\n\nconst SetPassword = () => {\n  const { changePasswordCode } = useParams();\n\n  const [emailaddress, setEmailaddress] = useState('');\n  const [password, setPassword] = useState('');\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [newPassword, setNewPassword] = useState(null);\n  // const [loggedIn, setLoggedIn] = useState(false);\n  const [doRenderRedirect, setDoRenderRedirect] = useState(false);\n  const dispatch = useDispatch();\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    // Clear error message\n    setErrorMessage(null);\n\n    const url = process.env.REACT_APP_FUSIONAUTH_SERVER + `/user/change-password/${changePasswordCode}`\n    var data = {\n      password: password,\n    };\n\n    return fetch(url, {\n      method: 'POST',\n      body: JSON.stringify(data),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    .then(res => {\n      if(res.ok === true) {\n        window.notify('Je nieuwe wachtwoord is ingesteld. Log nu in met je nieuwe wachtwoord')\n        document.location = '/login'\n        return true;\n      } else {\n        setErrorMessage('Er ging iets fout bij het instellen van je nieuwe wachtwoord. Mogelijk was de link verlopen. In dat geval: klik hieronder op Annuleer en vraag een nieuwe wachtwoordlink aan.');\n        return false;\n      }\n    })\n  }\n\n  const renderRedirect = () => {\n    return (\n      <Redirect to=\"/\" />\n    );\n  }\n \n  if (doRenderRedirect) {\n    return renderRedirect();\n  }\n\n  return (\n    <div className=\"\n      px-4\n      min-h-screen\n      sm:flex sm:justify-center\n      sm:px-0\n    \">\n      <div className=\"mx-auto py-8\" style={{\n        width: '100%',\n        maxWidth: '416px'\n      }}>\n\n        <IconButtonClose\n          onClick={() => setDoRenderRedirect(true)}\n          style={{position: 'absolute', right: '30px', top: '18px'}}\n        />\n\n        <Logo />\n\n        <h2 className=\"mt-4 mb-4 text-4xl font-bold\">\n          Dashboard Deelmobiliteit\n        </h2>\n\n        <p className=\"mb-4\">\n          Op deze pagina kun je je wachtwoord wijzigen. Wil je je wachtwoord niet wijzigen, maar inloggen? Ga dan naar het <Link to=\"/login\">inlogformulier</Link>.\n        </p>\n\n        <p className=\"mb-4\">\n          Vul hieronder je nieuwe wachtwoord in:\n        </p>\n\n        <form className=\"mt-8 mb-4\">\n          <label className=\"mt-4 block\" htmlFor=\"password\">Wachtwoord</label>\n          <input\n            className=\"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-600\"\n            type=\"password\"\n            placeholder=\"Wachtwoord\"\n            name=\"password\"\n            required\n            onChange={e => setPassword(e.target.value)}\n          />\n        \n          {errorMessage && <div className=\"mt-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n            <span className=\"block sm:inline\">{errorMessage}</span>\n          </div>}\n\n          <div className=\"flex items-baseline mt-4\">\n              <button className=\"px-6 py-2 mr-4 mt-4 text-white bg-theme-blue rounded-lg\" onClick={handleSubmit}>\n                Wachtwoord opslaan\n              </button>\n              <button className=\"px-6 py-2 mt-4 text-white bg-gray-300 rounded-lg hover:bg-gray-400\" onClick={() => {\n                setDoRenderRedirect(true)\n              }}>\n                Annuleer\n              </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n\n};\n\nexport default SetPassword;","import moment from 'moment';\n\nexport const fetchParkEvents = async (authentication, provider, dateTime) => {\n  if(! authentication || ! authentication.user_data || ! dateTime) {\n    return;\n  }\n  if(! provider) {\n    return;\n  }\n\n  const formattedDateTime = moment(dateTime).format('YYYY-MM-DDTHH:mm:ss[Z]');\n  let url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events?timestamp=\"+formattedDateTime+\"&operators=\"+provider;\n  let options = { headers : { \"authorization\": \"Bearer \" + authentication.user_data.token }}\n\n  const response = await fetch(url, options);\n\n  if(! response.ok) {\n    console.error(\"unable to fetch: %o\", response);\n    return false;\n  }\n\n  const json = await response.json();\n\n  return json.park_events || false;\n}","import React, {useEffect, useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport moment from 'moment';\n\nimport {fetchParkEvents} from '../helpers/parkEvents.js';\n\nconst numberOfSnapshots = 40;\nconst provider = 'tier';\nlet numberOfUniqueVehiclesAfterXIterations = [];\n\nconst getUniqueVehicleIds = (dataset) => {\n  let uniqueVehicleIds = [];\n  dataset.map(x => {\n    if(uniqueVehicleIds.indexOf(x.bike_id) <= -1) {\n      uniqueVehicleIds.push(x.bike_id);\n    }\n    return x;\n  });\n  return uniqueVehicleIds;\n}\n\nfunction Monitoring(props) {\n\n  const [vehiclesData, setVehiclesData] = useState({});\n\n  // Get state.authentication\n  const authentication = useSelector(state => {\n    return state.authentication ? state.authentication : false;\n  });\n\n  // On load, get parking data of different moments in time\n  useEffect((x) => {\n    // Function that gets parking data for a specific provider, for a specific date/time\n    const fetchMultipleMomentsInTime = async () => {\n      let dateTime = moment().toISOString(), parkEvents = [];\n      // Get 4*5=20 snapshots (= 5 days) of parking data\n      let collectedParkEvents = [];\n      for(let i = 0; i <= numberOfSnapshots; i++) {\n        dateTime = moment(dateTime).subtract(6, 'hours').toISOString();\n        // Get park events for date time\n        parkEvents = await fetchParkEvents(authentication, provider, dateTime);\n        // Add park events to existing allParkEvents array\n        parkEvents.map(x => {\n          collectedParkEvents.push(x);\n          return x;\n        });\n        // Get cumulative unique vehicle IDs\n        numberOfUniqueVehiclesAfterXIterations[i] = getUniqueVehicleIds(collectedParkEvents);\n        setVehiclesData(numberOfUniqueVehiclesAfterXIterations);\n        console.table(numberOfUniqueVehiclesAfterXIterations[i].length, dateTime)\n      }\n      return collectedParkEvents;\n    }\n\n    fetchMultipleMomentsInTime();\n  }, [authentication]);\n\n  console.log(vehiclesData)\n\n  return (\n    <div className=\"mt-12\">\n      <h1 className=\"text-2xl my-2\">\n        Monitoring\n      </h1>\n\n      <p className=\"py-2\">\n        Voor {provider} willen we controleren hoeveel unieke voertuig-IDs er zijn door te de tijd heen.\n      </p>\n\n      <p className=\"py-2\">\n        Op deze manier kunnen we afleiden of er aan de standaard wordt voldaan. Er moeten statische voertuig-IDs zijn. Als dit niet het geval is, zul je zien dat er na verloop van tijd veel meer voertuig-IDs zijn geregistreerd dan het aantal voertuigen dat de aanbieder heeft. Op die manier weet je dat denog niet voldaan wordt aan de gevraagde datastandaard.\n      </p>\n\n      <p className=\"py-2\">\n        De snapshots zijn steeds gemaakt met 6 uur ertussen.\n      </p>\n\n      <pre>\n        {numberOfUniqueVehiclesAfterXIterations ? numberOfUniqueVehiclesAfterXIterations.map((val, key) => {\n          return <div key={key}>Number of UUIDs after <b>{key} snapshots</b>: <b>{val.length}</b></div>\n        }) : ''}\n      </pre>\n\n      <table className=\"table-auto bg-white hidden\">\n        <thead>\n          <tr>\n            <th>Datum/tijd</th>\n            <th>Cumulatief aantal voertuig-IDs</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr>\n            <td>datumtijd</td>\n            <td>aantal</td>\n          </tr>\n        </tbody>\n      </table>\n\n    </div>\n  );\n  \n  \n}\n\nexport default Monitoring;\n","import { IconButtonClose } from '../IconButtons.jsx';\n\nimport './css/FilterbarExtended.css';\n\nfunction FilterbarExtended({closeFunction, title, children}) {\n  return (\n    <div className=\"FilterbarExtended\" onClick={() => closeFunction(false)}>\n      <div className=\"\" onClick={e => e.stopPropagation()}>\n        <div className=\"flex justify-between\">\n          <h1 className=\"title flex flex-col justify-center\">\n            {title||''}\n          </h1>\n          <div className=\"FilterbarExtended-close-button-wrapper\">\n            <IconButtonClose onClick={() => closeFunction(false)} />\n          </div>\n        </div>\n        <div className=\"grid-cols-4\" >\n          { children }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FilterbarExtended;\n","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport FilterbarExtended from './FilterbarExtended.jsx';\nimport './css/FilteritemGebieden.css';\n\nfunction FilteritemGebieden() {\n  const dispatch = useDispatch()\n\n  const gebieden = useSelector(state => {\n    return (state.metadata && state.metadata.gebieden) ? state.metadata.gebieden : [];\n  });\n  \n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : \"\";\n  });\n\n  const filterBarExtendedView = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR_EXTENDED'] : false;\n  });\n\n  let [filterSearch, setFilterSearch] = useState(\"\");\n  \n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  const unselectGebied = e => {\n    e.preventDefault();\n    \n    dispatch({\n      type: 'SET_FILTER_GEBIED',\n      payload: \"\"\n    })\n  }\n  \n  const setFilterGebied = (gebied) => {\n    dispatch({\n      type: 'SET_FILTER_GEBIED',\n      payload: gebied\n    })\n  }\n  \n  const changeSearchText = e => { setFilterSearch(e.target.value) }\n\n  const clearSearchText = e => { setFilterSearch(\"\") }\n  \n  const toggleGebieden = (val) => {\n    setVisibility('FILTERBAR_EXTENDED', val)\n  }\n\n  const renderSelectGebieden = (gebieden) => {\n    const filteredGebieden = gebieden.filter(gebied=>{\n      return filterSearch===''|| gebied.name.toLowerCase().includes(filterSearch.toLowerCase())\n    })\n    return (\n      <FilterbarExtended\n        title=\"Selecteer een gebied\"\n        closeFunction={() => toggleGebieden(false)}\n        >\n        <div className=\"filter-form-selectie\">\n          <div className=\"filter-form-search-container mb-3\">\n            <div className=\"filter-form-search-container-2\">\n            <input type=\"text\"\n              className=\"filter-form-search\"\n              onChange={changeSearchText}\n              value={filterSearch}\n              autoFocus={true}\n              placeholder={\"zoek\"}/>\n            <div className=\"ml-3 flex flex-col justify-center h-full\">\n              { filterSearch !== \"\" ?\n                <div className=\"filter-plaats-img-cancel\" onClick={clearSearchText} />\n                :\n                <div className=\"filter-plaats-img-search\" />\n              }\n            </div>\n            </div>\n            <div>&nbsp;</div>\n          </div>\n          <div className=\"filter-form-values\">\n            { filterGebied === \"\"?\n                <div key={'item-alle'} className=\"form-item-selected form-item\" onClick={e=>{toggleGebieden(false)}}>\n                  Alle Gebieden\n                </div>\n                :\n                <div key={'item-alle'} className=\"form-item\" onClick={e=>{toggleGebieden(false);setFilterGebied(\"\")}}>\n                  Alle Gebieden\n                </div>\n            }\n            { filteredGebieden.map(a=>{\n                if(filterGebied === a.gm_code) {\n                  return (<div key={'item-'+a.gm_code} className=\"form-item-selected form-item\" onClick={e=>{toggleGebieden(false);setFilterGebied(\"\")}}>{a.name}</div>)\n                } else {\n                  return (<div key={'item-'+a.gm_code} className=\"form-item\" onClick={e=>{toggleGebieden(false);setFilterGebied(a.gm_code);}}>{a.name}</div>)\n                }\n              })\n            }\n          </div>\n        </div>\n      </FilterbarExtended>\n    )\n  }\n  \n  let value = gebieden.find(item=>item.gm_code===filterGebied) || \"\";\n  if(gebieden.length===1) {\n    return (\n      <div className=\"filter-plaats-container filter-plaats-not-active\">\n        <div className=\"filter-plaats-title\" onClick={e=>{toggleGebieden('places')}}>Plaats</div>\n        <div className=\"filter-plaats-box-row flex flex-col justify-center\">\n          <div className=\"filter-plaats-value \" >{value===\"\"?\"Alle Gebieden\":value.name}</div>\n        </div>\n      </div>\n    )\n  }\n  \n  return (\n    <div className=\"filter-plaats-container\">\n      <div className=\"filter-plaats-title\" onClick={e=>{toggleGebieden('places')}}>Plaats</div>\n      <div className=\"filter-plaats-box-row flex flex-col justify-center\">\n        <div className={`filter-plaats-value ${value === \"\" ? 'text-black' : ''}`} onClick={e=>{toggleGebieden('places')}}>\n          {value === \"\" ? \"Alle Gebieden\" : value.name}\n        </div>\n        { filterBarExtendedView === 'places' ? renderSelectGebieden(gebieden) : null }\n        {  filterGebied!==\"\" ?\n              <div className=\"filter-plaats-img-cancel\" onClick={unselectGebied} />\n            :\n              null\n        }\n        <div className=\"flex flex-col justify-center h-full\">\n          <div className=\"filter-plaats-img-search\" onClick={e=>{toggleGebieden('places')}} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemGebieden;\n","export default __webpack_public_path__ + \"static/media/calendar.0fe3dc2a.svg\";","import { useEffect } from 'react';\nimport './css/FilteritemDatum.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\nimport './css/FilteritemDatum-Timepicker.css';\nimport './css/FilteritemDatum-Calendar.css';\nimport './css/FilteritemDatum-Clock.css';\n\n// using https://github.com/wojtekmaj/react-datetime-picker with custom styling\nimport DateTimePicker from 'react-datetime-picker/dist/entry.nostyle'; //\nimport calendarIcon from '../../images/calendar.svg';\n\nfunction FilterItemDatum() {\n  const dispatch = useDispatch()\n\n  const filterDatum = useSelector(state => {\n    if(state.layers.displaymode === 'displaymode-rentals') {\n      return state.filter && state.filter.intervalend ? state.filter.intervalend : new Date().toISOString();\n    } else {\n      return state.filter && state.filter.datum ? state.filter.datum : new Date().toISOString();\n    }\n  });\n\n  // On Component load: set filter datum if filterdatum is undefined\n  useEffect(x => {\n    setFilterDatum(new Date(filterDatum));\n  }, [])\n\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : null;\n  });\n\n  const setFilterDatum = newdt => {\n    if(displayMode === 'displaymode-rentals') {\n      dispatch({\n        type: 'SET_FILTER_INTERVAL_END',\n        payload: newdt.toISOString()\n      })\n      return;\n    }\n    dispatch({\n      type: 'SET_FILTER_DATUM',\n      payload: newdt.toISOString()\n    })\n  }\n\n  return (\n    <div className=\"filter-datum-container\">\n      <div className=\"filter-datum-title\">\n        {displayMode === 'displaymode-rentals' ? 'Eindtijd' : 'Datum'}\n      </div>\n      <div className=\"filter-datum-box-row\">\n        <div className=\"filter-datum-box-1\">\n          <div className=\"flex flex-col justify-center\"><div\n            className=\"filter-datum-caret\"\n            onClick={() => {\n              setFilterDatum(\n                moment(filterDatum).subtract(1, 'hours')\n              )\n            }}>\n            &lsaquo;\n          </div></div>\n          <div className=\"filter-datum-dtpicker\">\n            <DateTimePicker\n              onChange={setFilterDatum}\n              value={new Date(filterDatum)}\n              clearIcon={null}\n              calendarIcon={<img src={calendarIcon} alt=\"Logo\" />}\n              format={\"y-MM-dd H:mm\"}\n              disableClock={true}\n            />\n          </div>\n          <div className=\"flex flex-col justify-center\"><div\n            className=\"filter-datum-caret\"\n            onClick={() => {\n              setFilterDatum(\n                moment(filterDatum).add(1, 'hours')\n              )\n            }}\n            >&rsaquo;</div></div>\n        </div>\n        <div className=\"filter-datum-box-2\" onClick={() => {\n          setFilterDatum(new Date())\n        }} title=\"Toon huidige datum en tijd\">\n          <div className=\"filter-datum-img-now\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default FilterItemDatum;\n","import { useState } from 'react';\nimport './css/FilteritemDatumVanTot.css';\nimport { useDispatch, useSelector } from 'react-redux';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport DatePicker from 'react-datepicker';\nimport { format, addDays, addMonths } from 'date-fns';\nimport moment from 'moment';\n\nfunction FilterItemDatumVanTot() {\n  const dispatch = useDispatch()\n\n  const filterOntwikkelingVan = useSelector(state => {\n    return state.filter && state.filter.ontwikkelingvan ? new Date(state.filter.ontwikkelingvan) : moment().subtract(30, 'days').toDate();\n  });\n  \n  const filterOntwikkelingTot = useSelector(state => {\n    return state.filter && state.filter.ontwikkelingtot ? new Date(state.filter.ontwikkelingtot) : new Date();\n  });\n\n  const filterOntwikkelingAggregatie = useSelector(state => {\n    return state.filter && state.filter.ontwikkelingaggregatie ? state.filter.ontwikkelingaggregatie : 'day';\n  });\n\n  const [startDate, setStartDate] = useState(filterOntwikkelingVan);\n  const [endDate, setEndDate] = useState(filterOntwikkelingTot);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const updateFilter = (start, end, aggregatie=false) => {\n    // strip hours\n    const van = new Date(start.toDateString());\n\n    // strip hours, add 24 h\n    let tot = new Date(end.toDateString());\n    // tot.setDate(tot.getDate() + 1);\n    dispatch({\n      type: 'SET_FILTER_ONTWIKKELING_VANTOT',\n      payload: { van: van.toISOString(), tot: tot.toISOString() }\n    })\n    \n    if(aggregatie!==false) {\n      dispatch({\n        type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE',\n        payload: aggregatie\n      })\n    }\n  }\n  const onChange = (dates) => {\n    const [start, end] = dates;\n    setStartDate(start);\n    setEndDate(end);\n    \n    if(null!==end) {\n      updateFilter(start, end);\n      setIsOpen(!isOpen);\n    }\n  };\n  \n  const handleClick = (e) => {\n    e.preventDefault();\n    \n    if(isOpen && endDate===null) {\n      setStartDate(filterOntwikkelingVan)\n      setEndDate(filterOntwikkelingTot)\n    }\n    \n    setIsOpen(!isOpen);\n  };\n  \n  const moveFilterDatum = (movestart) => {\n    let start = startDate;\n    let end = endDate;\n    if(movestart) {\n      switch(filterOntwikkelingAggregatie) {\n        case 'week':\n          start = addDays(startDate, -7);\n          break;\n        case 'month':\n          start = addMonths(startDate, -1);\n          break;\n        case 'day':\n        default:\n          start = addDays(startDate, -1);\n          break;\n      }\n    } else {\n      switch(filterOntwikkelingAggregatie) {\n        case 'week':\n          end = addDays(endDate, 7);\n          break;\n        case 'month':\n          end = addMonths(endDate, 1);\n          break;\n        case 'day':\n        default:\n          end = addDays(endDate, 1);\n          break;\n      }\n    }\n    \n    setStartDate(start)\n    setEndDate(end)\n    \n    updateFilter(start, end);\n  }\n  \n  \n  const setView = (view) => {\n    // strip hours\n    const today = new Date((new Date()).toDateString());\n\n    let start;\n    let end;\n    let agg;\n    switch(view) {\n      case 'laatste7dagen':\n        start = addDays(today,-6);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste30dagen':\n        start = addDays(today,-30);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste90dagen':\n        start = addDays(today,-90);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste12maanden':\n        start = addDays(today,-365);\n        end = today;\n        agg='week';\n        break;\n      case 'ditjaar':\n        let tyear= today.getFullYear();\n        start = new Date(tyear.toString() + '/1/1');\n        end = today;\n        agg='month';\n        break;\n      case 'vorigjaar':\n        let lyear= today.getFullYear()-1;\n        start = new Date(lyear.toString() + '/1/1');\n        end = new Date(lyear.toString() + '/12/31');\n        agg='month';\n        break;\n      default:\n        return; // do nothing\n    }\n    \n    setStartDate(start)\n    setEndDate(end)\n    \n    updateFilter(start, end, agg);\n  }\n\n  const renderPickerInline = () => {\n    return (\n      <div className=\"filter-datum-van-tot-pickercontainer\">\n        <DatePicker\n          key=\"dp-van-tot\"\n          className=\"filter-datum-van-tot-picker\"\n          selected={startDate}\n          onChange={onChange}\n          startDate={startDate}\n          endDate={endDate}\n          dateFormat=\"yyyy-MM-dd\"\n          selectsRange\n          inline\n        />\n        <div className=\"filter-datum-van-tot-picker-options\">\n          <div key=\"fdvt-po1\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste7dagen')}}>Laatste 7 dagen</div>\n          <div key=\"fdvt-po2\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste30dagen')}}>Laatste 30 dagen</div>\n          <div key=\"fdvt-po3\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste90dagen')}}>Laatste 90 dagen</div>\n          <div key=\"fdvt-po4\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste12maanden')}}>Laatste 12 maanden</div>\n          <div key=\"fdvt-po5\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('ditjaar')}}>Dit jaar</div>\n          <div key=\"fdvt-po6\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('vorigjaar')}}>Vorig jaar </div>\n        </div>\n      </div>\n    )\n  }\n    \n  return (\n    <div className=\"filter-datum-van-tot-container\">\n      <div className=\"filter-datum-van-tot-title\">Periode</div>\n      <div className=\"filter-datum-van-tot-box-row\">\n        <div className=\"flex flex-col justify-center\"><div\n          className=\"filter-datum-caret\"\n          onClick={() => {moveFilterDatum(true)}}>\n          &lsaquo;\n        </div></div>\n        <div className=\"filter-datum-van-tot-input\"\n          onClick={handleClick}\n          >\n          {startDate!==null?format(startDate, \"yyyy-MM-dd\"):\"\"}\n          &nbsp;t/m&nbsp;\n          {endDate!==null?format(endDate, \"yyyy-MM-dd\"):\"\"} </div>\n        <div className=\"flex flex-col justify-center\"><div\n          className=\"filter-datum-caret\"\n          onClick={() => {moveFilterDatum(false)}}\n          >\n          &rsaquo;\n        </div></div>\n      </div>\n      { isOpen && renderPickerInline() }\n    </div>\n  )\n}\n\nexport default FilterItemDatumVanTot;\n","import './css/Filterbar.css';\nimport './css/FilteritemDuur.css';\nimport { useDispatch, useSelector } from 'react-redux';\n\nconst c1Hour = 60 * 60 * 1000;\n\nfunction FilterItemInterval() {\n  const dispatch = useDispatch()\n  \n  const filterDuration = useSelector(state => {\n    return state.filter ? state.filter.intervalduur : c1Hour;\n  });\n  \n  const cAnnotations = [\n    { label:'1h', anchor: 'start', pos: '0%', value: c1Hour },\n    { label:'4h', anchor: 'middle', pos: '15%', value: c1Hour * 4},\n    { label:'8h', anchor: 'middle', pos: '26.5%', value: c1Hour * 8},\n    { label:'12h', anchor: 'middle', pos: '39%', value: c1Hour * 12},\n    { label:'16h', anchor: 'middle', pos: '50%', value: c1Hour * 16},\n    { label:'20h', anchor: 'middle', pos: '62%', value: c1Hour * 20},\n    { label:'24h', anchor: 'middle', pos: '73.5%', value: c1Hour * 24},\n    { label:'2d', anchor: 'middle', pos: '85.5%', value: c1Hour * 24 * 2},\n    { label:'3d', anchor: 'middle', pos: '96%', value: c1Hour * 24 * 3}\n  ];\n  let elements = cAnnotations.map(\n    (e,i) => (<text key={'fide-'+i} className=\"filter-duur-annotation\" x={e.pos} y=\"14\" textAnchor={e.anchor}>{e.label}</text>)\n  );\n  \n  let ticks = cAnnotations.map(\n    (e,i) => (<rect key={'fidt-'+i} className=\"filter-duur-tickmark\" x={e.pos} y=\"0\" width=\"1\" height=\"20\"></rect>)\n  );\n  \n  const handleSetDuration = e => {\n    dispatch({\n      type: 'SET_FILTER_INTERVAL_DUUR',\n      payload: cAnnotations[e.target.value].value\n    })\n  }\n  \n  let currentDurationIdx = cAnnotations.findIndex(v=>(v.value===filterDuration));\n  if(currentDurationIdx===-1) { currentDurationIdx = 4 }\n  \n  return (\n    <div className=\"filter-duur-container\">\n      <div className=\"filter-datum-title\">\n        Periode\n      </div>\n      <div className=\"filter-duur-box-row\">\n        <input className=\"filter-duur-range\" width=\"100%\" type=\"range\" min=\"0\" max={cAnnotations.length-1} step=\"1\" onChange={handleSetDuration} value={currentDurationIdx}/>\n        <svg className=\"filter-duur-tickmarks\" role=\"presentation\" width=\"100%\" height=\"10\" xmlns=\"http://www.w3.org/2000/svg\">\n          { ticks }\n        </svg>\n        <svg className=\"filter-duur-elements\" role=\"presentation\" width=\"100%\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n          { elements }\n        </svg>\n      </div>\n    </div>\n  )\n}\n\nexport default FilterItemInterval;\n","import { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemAanbieders.css';\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER,\n} from '../../reducers/layers.js';\n\nfunction FilteritemAanbieders() {\n  const dispatch = useDispatch()\n  \n  const aanbieders = useSelector(state => {\n    return (state.metadata && state.metadata.aanbieders) ? state.metadata.aanbieders : [];\n  });\n  \n  const operatorstats = useSelector(state => {\n    let stats = undefined;\n    \n    if(state.layers) {\n      switch(state.layers.displaymode) {\n        case DISPLAYMODE_PARK:\n          stats = (state.vehicles&& state.vehicles.operatorstats) ? state.vehicles.operatorstats : false;\n          break;\n        case DISPLAYMODE_RENTALS:\n          if(state.filter && state.rentals) {\n            const key = (state.filter.herkomstbestemming === 'bestemming' ? 'destinations' : 'origins');\n            stats = state.rentals[`${key}_operatorstats`] ? state.rentals[`${key}_operatorstats`] : undefined;\n          }\n          break;\n        case DISPLAYMODE_OTHER:\n          if(state.metadata && state.filter && state.statsreducer) {\n            // calculate total stats (operator can appear in any of the charts)\n            let stats = {};\n            state.metadata.aanbieders.forEach(a=>{ stats[a.system_id] = 0 });\n            Object.keys(stats).forEach(key=>{\n              if(key in state.statsreducer.operatorstats_verhuringenchart === true) {\n                stats[key]+=state.statsreducer.operatorstats_verhuringenchart[key];\n              }\n              if(key in state.statsreducer.operatorstats_beschikbarevoertuigenchart === true) {\n                stats[key]+=state.statsreducer.operatorstats_verhuringenchart[key];\n              }\n            })\n            \n            return stats;\n          }\n          break;\n        default:\n          ;\n      }\n    }\n    \n    return stats;\n  });\n\n  const filterAanbiedersExclude = useSelector(state => {\n    return state.filter ? state.filter.aanbiedersexclude : [];\n  });\n  \n  const addTofilterAanbiedersExclude = (aanbieder) => {\n    const nexcluded = (filterAanbiedersExclude || '').split(\",\").length;\n    if(nexcluded===aanbieders.length-1) {\n      // console.log(\"needs at least one provider\")\n      return;\n    }\n\n    dispatch({ type: 'ADD_TO_FILTER_AANBIEDERS_EXCLUDE', payload: aanbieder.system_id })\n  }\n  \n  const removeFromfilterAanbiedersExclude = (aanbieder) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_AANBIEDERS_EXCLUDE', payload: aanbieder.system_id })\n  }\n  \n  const clearFilterAanbiedersExclude = e => {\n    dispatch({ type: 'CLEAR_FILTER_AANBIEDERS_EXCLUDE', payload: '' })\n  }\n\n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = provider => {\n    // If no filters were set, only show this provider and hide all others\n    if(filterAanbiedersExclude===\"\") {\n      // Disable all but the selected provider\n      aanbieders.map(x => {\n        if(x.system_id !== provider.system_id) {\n          addTofilterAanbiedersExclude(x)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addTofilterAanbiedersExclude(provider)\n    }\n    \n  }\n\n  // console.log(\"aanbieders map operatorstats: \", operatorstats)\n\n  return (\n    <div className=\"filter-aanbieders-container\">\n      <div className=\"filter-aanbieders-title-row\">\n        <div className=\"filter-aanbieders-title\">Aanbieders</div>\n        { filterAanbiedersExclude!==''\n            ?\n            <div className=\"filter-aanbieders-reset cursor-pointer\" onClick={clearFilterAanbiedersExclude}>\n              reset\n            </div>\n            :\n            null\n        }\n      </div>\n      <div className=\"filter-aanbieders-box-row\">\n        {\n          aanbieders.map((aanbieder, idx) => {\n            if(operatorstats!==undefined) {\n              const notavailable = (operatorstats.length===0 || operatorstats[aanbieder.system_id]===0);\n              if(notavailable) {\n                return (\n                  <div\n                    className={`filter-aanbieders-item filter-aanbieders-item-not-active`}\n                    key={aanbieder.name} >\n                    <div className=\"filter-aanbieders-marker\">\n                      <svg viewBox='0 0 30 30' >\n                        <line x1={'20%'} y1={'20%'} x2={'80%'} y2={'80%'} stroke=\"#000000\" />\n                        <line x1={'20%'} y1={'80%'} x2={'80%'} y2={'20%'} stroke=\"#000000\" />\n                      </svg>\n                    </div>\n                    <div className=\"filter-aanbieders-itemlabel\">\n                      { aanbieder.name }\n                    </div>\n                  </div>\n                )\n              }\n            }\n            \n            let excluded = filterAanbiedersExclude ? filterAanbiedersExclude.includes(aanbieder.system_id) : false;\n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromfilterAanbiedersExclude(aanbieder)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(aanbieder); };\n                \n            return (\n              <div\n                className={`filter-aanbieders-item ${excluded ? 'filter-aanbieders-item-not-active' : ''}`}\n                onClick={handler}\n                key={aanbieder.name}\n                >\n                <div className=\"filter-aanbieders-marker\">\n                  <svg viewBox='0 0 30 30' >\n                    <circle cx={'50%'} cy={'50%'} r={'40%'} fill={\"#000000\"} />\n                    <circle cx={'50%'} cy={'50%'} r={'35%'} fill={\"#FFFFFF\"} />\n                    <circle cx={'70%'} cy={'25%'} r={'25%'} fill={aanbieder.color.toString()} />\n                  </svg>\n                </div>\n                <div className=\"filter-aanbieders-itemlabel\">\n                  { aanbieder.name }\n                </div>\n              </div>\n            )\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemAanbieders;\n","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport FilterbarExtended from './FilterbarExtended.jsx';\nimport './css/FilteritemZones.css';\n\nfunction FilteritemZones() {\n  const dispatch = useDispatch()\n  \n  const zones = useSelector(state => {\n    return (state.metadata && state.metadata.zones) ? state.metadata.zones : [];\n  });\n  \n  const filterZones = useSelector(state => {\n    return state.filter ? state.filter.zones : 0;\n  });\n  \n  const filterGebied = useSelector(state => {\n    return state.filter ? state.filter.gebied : 0;\n  });\n  \n  const filterBarExtendedView = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR_EXTENDED'] : false;\n  });\n\n  let [filterSearch, setFilterSearch] = useState(\"\");\n  \n  const addToFilterZones = (zone) => {\n    dispatch({ type: 'ADD_TO_FILTER_ZONES', payload: zone })\n  }\n  \n  const removeFromFilterZones = (zone) => {\n    dispatch({ type: 'REMOVE_FROM_FILTER_ZONES', payload: zone })\n  }\n  \n  const clearFilterZones = () => {\n    dispatch({ type: 'CLEAR_FILTER_ZONES', payload: null })\n  }\n\n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n\n  const toggleZones = (val) => {\n    setVisibility('FILTERBAR_EXTENDED', val)\n  }\n  \n  const changeSearchText = e => { setFilterSearch(e.target.value) }\n\n  const clearSearchText = e => { setFilterSearch(\"\") }\n  \n  const zone_groups = [\n    {name: 'Stadsdelen', zone_type: 'residential_area'},\n    {name: 'Maatwerkzones', zone_type: 'custom'},\n    {name: 'Wijken', zone_type: 'neighborhood'},\n    // {name: 'Anders', zone_type: 'municipality'},\n  ];\n  \n  const renderSelectZonesGroup = (group, zones) => {\n    const groupZones = zones.filter(zone=>zone.zone_type===group.zone_type);\n    \n    if(groupZones.length===0) { return null }\n    \n    const sortedZones = groupZones.sort((a,b)=>a.name.localeCompare(b.name));\n    \n    return (\n      <div key={'zg-'+group.zone_type} className=\"zone-group-container\">\n        <span key={'zgn-'+group.zone_type} className=\"zone-group-title\">{group.name}</span>\n        <div key={'zgi-'+group.zone_type} className=\"filter-zones-zonelist\">\n        { sortedZones.map(a=>{\n            let isSelected = filterZones.includes(a.zone_id);\n            if(isSelected) {\n              return (<div key={'item-'+a.zone_id} className=\"\n                form-item-selected\n                form-item\n                cursor-pointer\n              \" onClick={e=>{ e.stopPropagation(); removeFromFilterZones(a.zone_id)}}>{a.name}</div>)\n            } else {\n              return (<div key={'item-'+a.zone_id} className=\"\n                form-item\n                cursor-pointer\n              \" onClick={e=>{ e.stopPropagation(); addToFilterZones(a.zone_id)}}>{a.name}</div>)\n            }\n          })\n        }\n        </div>\n      </div>\n    )\n  }\n\n  const renderSelectZones = (zones) => {\n    const filteredZones = zones.filter(zone=>{\n      return filterSearch===''|| zone.name.toLowerCase().includes(filterSearch.toLowerCase())\n    })\n    \n    return (\n      <FilterbarExtended\n        title=\"Selecteer een zone\"\n        closeFunction={(val) => toggleZones(false)}\n      >\n        <div className=\"filter-form-selectie\">\n            <div className=\"filter-form-search-container mb-3\">\n              <div className=\"filter-form-search-container-2\">\n              <input type=\"text\"\n                className=\"filter-form-search\"\n                onChange={changeSearchText}\n                value={filterSearch}\n                autoFocus={true}\n                placeholder={\"zoek\"}/>\n              <div className=\"ml-3 flex flex-col justify-center h-full\">\n                { filterSearch!==\"\" ?\n                  <div className=\"filter-zones-img-cancel cursor-pointer\" onClick={clearSearchText} />\n                  :\n                  <div className=\"filter-zones-img-search cursor-pointer\" />\n                }\n              </div>\n            </div>\n            <div>&nbsp;</div>\n          </div>\n          <div className=\"filter-form-values\">\n            { zone_groups.map(group=>{\n                return renderSelectZonesGroup(group, filteredZones);\n              })}\n          </div>\n        </div>\n      </FilterbarExtended>)\n  }\n  \n  let selectedzones = [];\n  let zonetxt = \"\"\n  try {\n    selectedzones = filterZones.split(',')\n    let aantal = selectedzones.length;\n    if(aantal>1) {\n      zonetxt = aantal + \" zones\";\n    } else {\n      let thezone = zones.find(zone=>(zone.zone_id.toString()===selectedzones[0]));\n      zonetxt = (thezone && thezone.name) || '';\n    }\n  } catch(ex) {\n    zonetxt = \"\";\n  }\n  \n  if(zonetxt===\"\") { zonetxt = \"Alle Zones\" }\n  \n  let isActive = filterGebied !== '';\n  \n  const filteredZones = zones.filter(zone=>{\n    return selectedzones.includes(zone.zone_id.toString())\n  })\n\n  if(! isActive) {\n    return <></>\n  }\n\n  return (\n    <div className={`filter-zones-container ${isActive===true ? '':'filter-zones-item-not-active'}`}>\n      <div className=\"filter-zones-title\" onClick={e=>{isActive && toggleZones('zones')}}>Zones</div>\n      <div className=\"filter-zones-box-row\">\n        <div\n          className={`\n            filter-zones-value flex flex-col justify-center cursor-pointer h-full\n            ${zonetxt === \"Alle Zones\" ? 'text-black' : ''}\n          `}\n          onClick={e=>{isActive && toggleZones('zones')}}\n          >\n          {zonetxt}\n        </div>\n        {  filterZones!==\"\" ?\n              <div className=\"filter-zones-img-cancel\" onClick={clearFilterZones}></div>\n            :\n              null\n        }\n        { filterBarExtendedView === 'zones' ? renderSelectZones(zones) : null }\n        <div className=\"ml-3 flex flex-col justify-center h-full\">\n          <div className=\"filter-zones-img-search cursor-pointer\" onClick={e=>{toggleZones('zones')}} />\n        </div>\n      </div>\n      <div className=\"filter-zones-zonelist\">\n      {\n        filteredZones.map(zone => {\n          return (\n            <div className=\"filter-zones-zoneitem\" key={zone.zone_id}>\n              { zone.name}\n              <div className=\"filter-zones-img-zoneitem-cancel\" onClick={e=>{ e.stopPropagation(); removeFromFilterZones(zone.zone_id)}}></div>\n            </div>\n          )\n        })\n      }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemZones;","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemMarkers.css';\n\nexport function FilteritemMarkersParkeerduur() {\n  const markers = useSelector(state => {\n    return [\n      { id: 0, color: '#1FA024', fillcolor: '#1FA024', name: '< 1 uur'},\n      { id: 1, color: '#48E248', fillcolor: '#48E248', name: '< 24 uur'},\n      { id: 2, color: '#FFD837', fillcolor: '#FFD837', name: '< 4 d'},\n      { id: 3, color: '#FD3E48', fillcolor: '#FD3E48', name: '> 4 d'}\n    ];\n  });\n  \n  return FilteritemMarkers({\n    label: 'Parkeerduur',\n    filtername: 'parkeerduurexclude',\n    markers,\n    addmarker: 'ADD_TO_FILTER_MARKERS_EXCLUDE',\n    removemarker: 'REMOVE_FROM_FILTER_MARKERS_EXCLUDE',\n    clearmarkers: 'CLEAR_FILTER_MARKERS_EXCLUDE'\n  });\n}\n\nexport function FilteritemMarkersAfstand() {\n  const markers = useSelector(state => {\n    return [\n      { id: 0, color: '#48E248', fillcolor: '#48E248', name: '1km'},\n      { id: 1, color: '#44BD48', fillcolor: '#44BD48', name: '2km'},\n      { id: 2, color: '#3B7747', fillcolor: '#3B7747', name: '5km'},\n      { id: 3, color: '#343E47', fillcolor: '#343E47', name: '> 5km'}\n    ];\n  });\n  \n  return FilteritemMarkers({\n    label: 'Afstand',\n    filtername: 'afstandexclude',\n    markers,\n    addmarker: 'ADD_TO_FILTER_AFSTAND_EXCLUDE',\n    removemarker: 'REMOVE_FROM_FILTER_AFSTAND_EXCLUDE',\n    clearmarkers: 'CLEAR_FILTER_AFSTAND_EXCLUDE'\n  });\n}\n\nfunction FilteritemMarkers({label, filtername, markers, addmarker, removemarker, clearmarkers}) {\n  const dispatch = useDispatch()\n\n  const filterMarkersExclude = useSelector(state => {\n    return state.filter ? state.filter[filtername] : '';\n  }) || '';\n  \n  const addToFilterMarkersExclude = (marker) => {\n    console.log(\"addtofilter %s -> %s\", filtername, marker)\n    dispatch({ type: addmarker, payload: marker })\n  }\n  \n  const removeFromFilterMarkersExclude = (marker) => {\n    console.log(\"removefromfilter %s -> %s\", filtername, marker)\n    dispatch({ type: removemarker, payload: marker })\n  }\n  \n  const clearFilterMarkersExclude = () => {\n    console.log(\"clearfilter %s\", filtername)\n    dispatch({ type: clearmarkers, payload: null })\n  }\n  \n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = id => {\n    console.log(\"clickfilter [%s]<\", filterMarkersExclude);\n    // If no filters were set, only show this provider and hide all others\n    if(filterMarkersExclude===\"\") {\n      // Disable all but the selected provider\n      markers.map(x => {\n        if(x.id !== id) {\n          addToFilterMarkersExclude(x.id)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addToFilterMarkersExclude(id)\n    }\n  }\n  \n  \n  return (\n    <div className=\"filter-markers-container\">\n    <div className=\"filter-markers-title-row\">\n      <div className=\"filter-markers-title\">{label}</div>\n      { filterMarkersExclude!==''?\n          <div className=\"filter-markers-reset cursor-pointer\" onClick={clearFilterMarkersExclude}>\n            reset\n          </div>\n          :\n          null\n      }\n    </div>\n      <div className=\"filter-markers-box-row\">\n        {\n          markers.map(marker => {\n            let excluded = filterMarkersExclude.split(\",\").includes(marker.id.toString());\n            \n            let className = excluded ? \"filter-markers-item-excluded\": \"filter-markers-item\";\n            \n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromFilterMarkersExclude(marker.id)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(marker.id)};\n                \n            return (\n              <div className={className} key={marker.id}>\n                <div className=\"filter-markers-marker\" onClick={handler}>\n                  <svg viewBox='0 0 30 30' >\n                    <circle cx={'50%'} cy={'50%'} r={'40%'} fill={marker.color} />\n                    <circle cx={'50%'} cy={'50%'} r={'34%'} fill={marker.fillcolor} />\n                  </svg>\n                </div>\n                <div className=\"filter-markers-itemlabel\">\n                  { marker.name }\n                </div>\n              </div>)\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemHerkomstBestemming.css';\n\nexport default function FilteritemHerkomstBestemming() {\n  const dispatch = useDispatch()\n\n  const filterHerkomstBestemming = useSelector(state => {\n    let value = 'herkomst';\n    if(state.filter) {\n      value=state.filter.herkomstbestemming==='bestemming' ? 'bestemming':'herkomst';\n    }\n    return value;\n  });\n  \n  const setFilterHerkomstBestemming = (value) => e => {\n    dispatch({ type: 'SET_FILTER_HERKOMSTBESTEMMING', payload: value })\n  }\n  \n  let classNameHerkomst = 'filter-herkomst-bestemming-button'\n  let classNameBestemming = 'filter-herkomst-bestemming-button'\n  if(filterHerkomstBestemming==='bestemming') {\n    classNameBestemming+=' filter-herkomst-bestemming-button-active'\n  } else {\n    classNameHerkomst+=' filter-herkomst-bestemming-button-active'\n  }\n  \n  return (\n    <div className=\"filter-herkomst-bestemming-container\">\n      <div className=\"filter-herkomst-bestemming-box-row\">\n        <div className={classNameHerkomst} onClick={setFilterHerkomstBestemming('herkomst')}>Herkomst</div>\n        <div className={classNameBestemming} onClick={setFilterHerkomstBestemming('bestemming')}>Bestemming</div>\n      </div>\n    </div>\n  )\n}","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './css/FilteritemVoertuigTypes.css';\n\nfunction FilteritemVoertuigTypes() {\n  const dispatch = useDispatch()\n\n  const voertuigtypes = useSelector(state => {\n    return state.metadata.vehicle_types ? state.metadata.vehicle_types || [] : [];\n  });\n  \n  const filterVoertuigTypesExclude = useSelector(state => {\n    if(Array.isArray(state.filter.voertuigtypesexclude)) {\n      return '';\n    }\n    \n    return state.filter ? state.filter.voertuigtypesexclude : '';\n  }) || '';\n  \n  const addToFilterVoertuigTypesExclude = (voertuigtype) => {\n    const nexcluded = (filterVoertuigTypesExclude || '').split(\",\").length;\n    if(nexcluded===voertuigtypes.length-1) {\n      // console.log(\"needs at least one provider\")\n      return;\n    }\n\n    dispatch({ type: 'ADD_TO_FILTER_VOERTUIGTYPES_EXCLUDE', payload: voertuigtype })\n  }\n  \n  const removeFromFilterVoertuigTypesExclude = (voertuigtype) => {\n    console.log('REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE %s', voertuigtype)\n    dispatch({ type: 'REMOVE_FROM_FILTER_VOERTUIGTYPES_EXCLUDE', payload: voertuigtype })\n  }\n  \n  const clearFilterVoertuigTypesExclude = () => {\n    dispatch({ type: 'CLEAR_FILTER_VOERTUIGTYPES_EXCLUDE', payload: null })\n  }\n  \n  // Function that gets executed if user clicks a provider filter\n  const clickFilter = type => {\n    console.log(\"clickfilter [%s]<\", filterVoertuigTypesExclude);\n    // If no filters were set, only show this provider and hide all others\n    if(filterVoertuigTypesExclude===\"\") {\n      // Disable all but the selected provider\n      voertuigtypes.map(x => {\n        if(x.id !== type) {\n          addToFilterVoertuigTypesExclude(x.id)\n        }\n        return x;\n      })\n    }\n\n    // If provider was disabled, re-enable provider\n    else {\n      addToFilterVoertuigTypesExclude(type)\n    }\n  }\n  \n  return (\n    <div className=\"filter-voertuigtypes-container\">\n      <div className=\"filter-voertuigtypes-title-row\">\n        <div className=\"filter-voertuigtypes-title\">Vervoerstype</div>\n        { filterVoertuigTypesExclude!==''?\n            <div className=\"filter-voertuigtypes-reset cursor-pointer\" onClick={clearFilterVoertuigTypesExclude}>\n              reset\n            </div>\n            :\n            null\n        }\n      </div>\n      <div className=\"filter-voertuigtypes-box-row\">\n        {\n          voertuigtypes.map((voertuigtype,idx) => {\n            let excluded = (filterVoertuigTypesExclude ? filterVoertuigTypesExclude: '').split(\",\").includes(voertuigtype.id);\n            let handler = excluded ?\n                e=>{ e.stopPropagation(); removeFromFilterVoertuigTypesExclude(voertuigtype.id)}\n              :\n                e=>{ e.stopPropagation(); clickFilter(voertuigtype.id)};\n              \n            let baseClassName = `${excluded ? \"filter-voertuigtypes-item-excluded\": \"filter-voertuigtypes-item\"}`;\n            let extraclass = \"\";\n            switch(voertuigtype.id) {\n              case \"bicycle\": extraclass = \"filter-voertuigtypes-icon-bicycle\"; break;\n              case \"cargo_bicycle\": extraclass = \"filter-voertuigtypes-icon-cargo-bicycle\"; break;\n              case \"moped\": extraclass = \"filter-voertuigtypes-icon-scooter\"; break;\n              case \"car\": extraclass = \"filter-voertuigtypes-icon-car\"; break;\n              case \"unknown\" : extraclass = \"filter-voertuigtypes-icon-other\"; break;\n              default:\n                break;\n            }\n                \n            return (\n              <div className={`${baseClassName}${idx===voertuigtypes.length-1?' filter-voertuigtypes-item-last':''}`} key={voertuigtype.id} onClick={handler}>\n                <div className={`filter-voertuigtypes-icon ${extraclass}`} onClick={handler} />\n                <div className=\"filter-voertuigtypes-itemlabel\">\n                  { voertuigtype.name }\n                </div>\n              </div>)\n          })\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default FilteritemVoertuigTypes;","import './css/Filterbar.css';\nimport {useSelector} from 'react-redux';\nimport FilteritemGebieden from './FilteritemGebieden.jsx';\nimport FilteritemDatum from './FilteritemDatum.jsx';\nimport FilteritemDatumVanTot from './FilteritemDatumVanTot.jsx';\nimport FilteritemDuur from './FilteritemDuur.jsx';\nimport FilteritemAanbieders from './FilteritemAanbieders.jsx';\nimport FilteritemZones from './FilteritemZones.jsx';\nimport {\n  FilteritemMarkersAfstand,\n  FilteritemMarkersParkeerduur\n} from './FilteritemMarkers.jsx';\nimport FilteritemHerkomstBestemming from './FilteritemHerkomstBestemming';\nimport FilteritemVoertuigTypes from './FilteritemVoertuigTypes.jsx';\nimport Logo from '../Logo.jsx';\nimport moment from 'moment';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER\n} from '../../reducers/layers.js';\n\nfunction Filterbar({\n    displayMode,\n    visible,\n    hideLogo}) {\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n\n  const filterDatum = useSelector(state => {\n    return state.filter && state.filter.datum ? state.filter.datum : new Date().toISOString();\n  });\n\n  const ispark=displayMode===DISPLAYMODE_PARK;\n  const isrentals=displayMode===DISPLAYMODE_RENTALS;\n  const isontwikkeling=displayMode===DISPLAYMODE_OTHER;\n  \n  const showdatum=isrentals||ispark||!isLoggedIn;\n  const showduur=isrentals;\n  const showparkeerduur=ispark;\n  const showafstand=isrentals;\n  const showherkomstbestemming=isrentals;\n  const showvantot=isontwikkeling;\n  const showvervoerstype=isrentals||ispark||!isLoggedIn;\n  \n  return (\n    <div className=\"filter-bar-inner py-2\">\n\n      {! hideLogo && <Logo />}\n      \n      { isLoggedIn && showdatum && <FilteritemDatum /> }\n      \n      { ! isLoggedIn && showdatum && <div>\n        <div className=\"filter-datum-container\">\n          <div className=\"filter-datum-title\">\n            Tijd\n          </div>\n          <div className=\"filter-datum-box-row\">\n            {moment(filterDatum).format('HH:mm')}\n          </div>\n        </div>\n      </div> }\n\n      { isLoggedIn && showduur && <FilteritemDuur /> }\n\n      { isLoggedIn && showvantot && <FilteritemDatumVanTot /> }\n\n      {<FilteritemGebieden />}\n\n      {<FilteritemZones />}\n\n      {isLoggedIn && showparkeerduur && <FilteritemMarkersParkeerduur />}\n\n      {isLoggedIn && showafstand && <FilteritemMarkersAfstand />}\n\n      {isLoggedIn && showherkomstbestemming && <FilteritemHerkomstBestemming />}\n\n      {showvervoerstype && <FilteritemVoertuigTypes />}\n\n      {<FilteritemAanbieders />}\n\n    </div>\n  )\n}\n\nexport default Filterbar;\n","import React from 'react';\nimport {\n  useSelector\n} from 'react-redux';\nimport SlideBox from '../SlideBox/SlideBox.jsx';\nimport Filterbar from '../Filterbar/Filterbar.jsx';\n\n// import './FilterbarDesktop.css';\n\nfunction FilterbarDesktop({isVisible, displayMode}) {\n\n  const isFilterBarExtendedVisible = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR_EXTENDED'] : false;\n  });\n\n  return (\n    <SlideBox name=\"FilterBar\" direction=\"left\" options={{\n      title: 'Filters',\n      backgroundColor: '#F6F5F4',\n    }} style={{\n      width: (isFilterBarExtendedVisible ? '648px' : '324px'),\n      height: '100%',\n      top: 0,\n      position: 'fixed'\n    }}\n    >\n      <div className=\"py-2 mx-3 h-full\">\n        <Filterbar displayMode={displayMode} />\n      </div>\n    </SlideBox>\n  )\n}\n\nexport default FilterbarDesktop\n","import {\n  // useDispatch,\n  // useSelector\n} from 'react-redux';\n\nimport './MobileSlideBox.css';\nimport { IconButtonClose } from '../IconButtons.jsx';\n\nfunction MobileSlideBox(props) {\n  return (\n    <div className={`\n      MobileSlideBox w-full sm:hidden absolute left-0\n      ${props.isVisible ? 'is-visible' : ''}\n      ${props.classes}\n    `} style={props.style}>\n\n      <header className=\"flex justify-between\">\n        <h1 className=\"\">{props.title}</h1>\n        <IconButtonClose onClick={props.closeHandler} />\n      </header>\n\n      <div className=\"w-full\">\n        {props.children}\n      </div>\n\n    </div>\n  )\n}\n\nexport default MobileSlideBox;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport MobileSlideBox from '../SlideBox/MobileSlideBox.jsx';\nimport Filterbar from '../Filterbar/Filterbar.jsx';\n\n// import './FilterbarMobile.css';\n\nfunction FilterbarMobile({isVisible, displayMode}) {\n  const dispatch = useDispatch()\n\n  const setVisibility = () => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: 'FILTERBAR',\n        visibility: false\n      }\n    })\n  };\n\n  return (\n    <MobileSlideBox\n      title=\"Filters\"\n      isVisible={isVisible}\n      closeHandler={() => {\n        setVisibility();\n      }}\n      classes=\"\n        top-0 overflow-auto\n      \"\n    >\n      <Filterbar hideLogo={true} displayMode={displayMode} />\n    </MobileSlideBox>\n  )\n}\n\nexport default FilterbarMobile;\n","import React, {useState} from 'react'\nimport {marked} from 'marked'\nimport { Redirect } from \"react-router-dom\";\n\nimport Logo from '../Logo.jsx';\nimport { IconButtonClose } from '../IconButtons.jsx';\n\nconst About = () => {\n  const [doRenderRedirect, setDoRenderRedirect] = useState(false);\n\n  const renderRedirect = () => {\n    return (\n      <Redirect to=\"/\" />\n    );\n  }\n \n  if (doRenderRedirect) {\n    return renderRedirect();\n  }\n\n  return (\n    <div className=\"\n      px-4\n      min-h-screen\n      sm:flex sm:justify-center\n      sm:px-0\n    \">\n      <div className=\"mx-auto py-8\">\n\n        <IconButtonClose\n          onClick={() => setDoRenderRedirect(true)}\n          style={{position: 'absolute', right: '30px', top: '18px'}}\n        />\n\n        <Logo />\n\n        <div\n          style={{\n            maxWidth: '100%',\n            width: '616px'\n          }}\n          dangerouslySetInnerHTML={{ __html: marked.parse(`\n# Over het Dashboard Deelmobiliteit\n\n## Algemeen\n\nHet Dashboard Deelmobiliteit is een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit op de voeten willen.\n\nHoe lang en waar staan deelvoertuigen ongebruikt in de openbare ruimte? Hoe vaak worden de deelvoertuigen verhuurd? In welke wijken en op welke tijdstippen zijn deelvoertuigen populair? \n\nMet de informatie uit het Dashboard Deelmobiliteit kunnen overheden hun beleid ontwikkelen, evalueren en bijsturen.\n\n## Hoe werkt het?\n\nHet Dashboard Deelmobiliteit verzamelt elke halve minuut positie van  meer dan 15.000 geparkeerde deelvoertuigen in Nederland (januari 2022).\n\nOp basis van deze informatie genereert het dashboard zogenaamde parkeergebeurtenissen en verhuringen, die opgeslagen worden in een centrale database.\n\nHet dashboard biedt een aantal functionaliteiten (kaarten, grafieken en tabellen) om de database te raadplegen. \n\nVoor analyses waar het dashboard niet in voorziet, kunnen overheden downloads maken van de ruwe data uit het dashboard om maatwerkanalyses te (laten) maken.\n\n## Functionaliteiten\n\nIn overleg met deelnemende overheden zijn de volgende functionaliteiten ontwikkeld:\n\n- Een kaart met het aanbod van deelvoertuigen op een tijdstip naar keuze. Een kleurcode geeft tevens aan hoe lang het voertuig te huur staat.\n- Een kaart met verhuringen van deelvoertuigen gedurende een periode naar keuze. Het betreft zowel de locaties waar verhuringen gestart zijn als beindigd.\n- Grafieken met ontwikkelingen in een periode naar keuze. Het gaat zowel om de ontwikkeling in het aantal deelvoertuigen dat aangeboden wordt als om de ontwikkeling het aantal verhuringen.\n- Standaardrapportages als excel-sheets gedownload kunnen worden.\n\nOverheden hebben alleen toegang tot de informatie over deelvoertuigen in hun eigen bestuursgebied.\n\n## Voordelen voor gemeenten\n\n- sneller toegang tot data\n- minder uitvragen naar aanbieders nodig (1 bron met alle data)\n- geen conversie meer nodig: data van elke aanbieder heeft precies hetzelfde dataformaat\n- ontwikkeling in overleg met de aangesloten gemeentes\n- indien gewenst uit te breiden door gemeentes zelf (open source software)\n\n## Voordelen aanbieders\n\n- minder aanvragen vanuit gemeentes\n- geen nieuwe dataformaten nodig i.v.m. gebruik internationale datastandaarden\n- gemeentes hebben beter inzicht in de stand van zaken\n\n## Veel gestelde vragen\n\n### Hoe krijg ik toegang tot het Dashboard?\n\nVia het CROW of via info@deelfietsdashboard.nl kun je een login aanvragen. Afhankelijk van je taak en de afspraken over de data kun je vervolgens toegang krijgen tot de dashboard informatie voor gebieden en/of van aanbieders. Zo kunnen gemeente medewerkers over het algemeen toegang krijgen voor het dashboard in hun gemeente. Aanbieders van deelfietsen kunnen uiteraard toegang krijgen tot alle infromatie van hun deelfietsen. Neem voor vragen over de rechten ook contact op met het CROW of info@deelfietsdashboard.nl.\n\n### Welke datastandaarden worden ondersteund\n\nHet Dashboard Deelmobiliteit ondersteunt MDS, GBFS en TOMP. er worden specifieke voorwaarden gesteld aan de feed om bruikbaar in het dashboard te zijn. Zie de details in deze [specificatie](https://docs.crow.nl/deelfietsdashboard/hr-dataspec/).\n\n### Is de software open source?\n\nJa, de software is open source. Via [GitHub](https://github.com/Stichting-CROW/dashboarddeelmobiliteit-app) en [Gitlab](https://gitlab.com/bikedashboard) kun de laaste versie van de broncode bekijken.\n\nVelen handen maken licht werk. We zijn daarom blij als je wilt helpen. Gemeenten of andere overheden kunnen helpen bij het specificeren van handige overzichten. Deelmobiliteitbedrijven kunnen meebouwen aan open source tools. Ontwikkelaars kunnen bijdragen aan de code. Ontwerpers kunnen de look & feel verbeteren. Mail ons als je wilt weten hoe je mee kunt helpen!\n\nWe nodigen iedereen uit om mee te kijken en mee te ontwikkelen. Bugs en suggesties kunnen direct in de [issue-lijst](https://github.com/Stichting-CROW/dashboarddeelmobiliteit-app/issues) geplaatst worden. Ons mailen op info@deelfietsdashboard.nl kan natuurlijk ook.\n\n## Tot slot\n\nWil je contact opnemen met het team achter het Dashboard Deelmobiliteit, neem dan contact op met <a href=\"mailto:info@deelfietsdashboard.nl?Subject=Hallo\">info@deelfietsdashboard.nl</a>\n          `)}}\n        />\n      </div>\n    </div>\n  )\n\n}\n\nexport default About;","import './Overlay.css'\n// import { useSelector } from 'react-redux';\n\nexport default function Misc(props) {\n  return (\n    <div className={`Overlay relative z-10 w-full h-full lg:w-2/3 bg-white`}>\n      <div className=\"Overlay-inner overflow-y-auto h-full\">\n        {props.children}\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport DatePicker from 'react-datepicker';\nimport { format, addDays, addMonths }  from 'date-fns';\nimport moment from 'moment';\n\n// import './css/FilteritemDatumVanTot.css';\n\nfunction DateFromTo(props) {\n  const dispatch = useDispatch()\n\n  const [startDate, setStartDate] = useState(props.startDate || moment().toDate());\n  const [endDate, setEndDate] = useState(props.endDate || moment().toDate());\n\n  const [isOpen, setIsOpen] = useState(false);\n\n  // const updateFilter = (start, end, aggregatie=false) => {\n  //   // strip hours\n  //   const van = new Date(start.toDateString());\n\n  //   // strip hours, add 24 h\n  //   let tot = new Date(end.toDateString()) ;\n  //   // tot.setDate(tot.getDate() + 1);\n  //   dispatch({\n  //     type: 'SET_FILTER_ONTWIKKELING_VANTOT',\n  //     payload: { van: van.toISOString(), tot: tot.toISOString() }\n  //   })\n    \n  //   if(aggregatie!==false) {\n  //     dispatch({\n  //       type: 'SET_FILTER_ONTWIKKELING_AGGREGATIE',\n  //       payload: aggregatie\n  //     })\n  //   }\n  // }\n\n  const onChange = (dates) => {\n    const [start, end] = dates;\n\n    setStartDate(start);\n    setEndDate(end);\n    \n    props.onChange(dates)\n\n    if(null!==end) {\n      setIsOpen(!isOpen);\n    }\n  };\n  \n  const handleClick = (e) => {\n    e.preventDefault();\n    \n    if(isOpen && endDate===null) {\n      // setStartDate()\n      // setEndDate()\n    }\n    \n    setIsOpen(!isOpen);\n  };\n  \n  const moveFilterDatum = (down) => {\n    let filterOntwikkelingAggregatie = 'week';\n\n    let start = startDate;\n    let end = endDate;\n    switch(filterOntwikkelingAggregatie) {\n      case 'week':\n        start = addDays(startDate, down?-7:7);\n        end = addDays(endDate, down?-7:7);\n        break;\n      case 'month':\n        start = addMonths(startDate, down?-1:1);\n        end = addMonths(endDate, down?-1:1);\n        break;\n      case 'day':\n      default:\n        start = addDays(startDate, down?-1:1);\n        end = addDays(endDate, down?-1:1);\n        break;\n    }\n  \n    setStartDate(start)\n    setEndDate(end)\n  }\n\n  const setView = (view) => {\n    // strip hours\n    const today = new Date((new Date()).toDateString());\n\n    let start;\n    let end;\n    let agg;\n    switch(view) {\n      case 'laatste7dagen':\n        start = addDays(today,-6);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste30dagen':\n        start = addDays(today,-30);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste90dagen':\n        start = addDays(today,-90);\n        end = today;\n        agg='day';\n        break;\n      case 'laatste12maanden':\n        start = addDays(today,-365);\n        end = today;\n        agg='week';\n        break;\n      case 'ditjaar':\n        let tyear= today.getFullYear();\n        start = new Date(tyear.toString() + '/1/1');\n        end = today;\n        agg='month';\n        break;\n      case 'vorigjaar':\n        let lyear= today.getFullYear()-1;\n        start = new Date(lyear.toString() + '/1/1');\n        end = new Date(lyear.toString() + '/12/31');\n        agg='month';\n        break;\n      default:\n        return; // do nothing\n    }\n    \n    onChange([start, end])\n  }\n\n  const renderPickerInline = () => {\n    return (\n      <div className=\"filter-datum-van-tot-pickercontainer\">\n        <DatePicker\n          key=\"dp-van-tot\"\n          className=\"filter-datum-van-tot-picker\"\n          selected={startDate}\n          onChange={onChange}\n          startDate={startDate}\n          endDate={endDate}\n          dateFormat=\"yyyy-MM-dd\"\n          selectsRange\n          inline\n        />\n        <div className=\"filter-datum-van-tot-picker-options\">\n          <div key=\"fdvt-po1\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste7dagen')}}>Laatste 7 dagen</div>\n          <div key=\"fdvt-po2\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste30dagen')}}>Laatste 30 dagen</div>\n          <div key=\"fdvt-po3\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste90dagen')}}>Laatste 90 dagen</div>\n          <div key=\"fdvt-po4\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('laatste12maanden')}}>Laatste 12 maanden</div>\n          <div key=\"fdvt-po5\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('ditjaar')}}>Dit jaar</div>\n          <div key=\"fdvt-po6\" className=\"filter-datum-van-tot-option\" onClick={() => { setView('vorigjaar')}}>Vorig jaar </div>\n        </div>\n      </div>\n    )\n  }\n    \n  return (\n    <div className=\"filter-datum-van-tot-container\" style={{paddingTop: '0.5rem', paddingBottom: '0.5rem'}}>\n      <div className=\"filter-datum-van-tot-title\">\n        {props.label}\n      </div>\n      <div className=\"filter-datum-van-tot-box-row\">\n        <div className=\"flex flex-col justify-center\"><div\n          className=\"filter-datum-caret\"\n          onClick={() => {moveFilterDatum(true)}}>\n          &lsaquo;\n        </div></div>\n        <div className=\"filter-datum-van-tot-input\"\n          onClick={handleClick}\n          >\n          {startDate!==null?format(startDate, \"yyyy-MM-dd\"):\"\"}\n          &nbsp;t/m&nbsp;\n          {endDate!==null?format(endDate, \"yyyy-MM-dd\"):\"\"} </div>\n        <div className=\"flex flex-col justify-center\"><div\n          className=\"filter-datum-caret\"\n          onClick={() => {moveFilterDatum(false)}}\n          >\n          &rsaquo;\n        </div></div>\n      </div>\n      { isOpen && renderPickerInline() }\n    </div>\n  )\n}\n\nexport default DateFromTo;\n","import './FormSelect.css';\n\nfunction FormSelect({label, options, onChange}) {\n  return <div className=\"FormSelect my-2\">\n    <div className=\"filter-datum-van-tot-title\">\n      {label}\n    </div>\n    <select onChange={onChange}>\n      <option key=\"0\"></option>\n      {options.map(x => {\n        return <option key={x.value} value={x.value}>\n          {x.title}\n        </option>\n      })}\n    </select>\n  </div>\n}\n\nexport default FormSelect;\n","export default function Button({\n  classes,\n  href,\n  onClick,\n  color,\n  children,\n}) {\n  return <button className={`\n    px-6 py-2 my-4 rounded-lg\n    transition-all\n    duration-100\n    ${color === 'blue' ? 'bg-theme-blue hover:bg-black text-white' : ''}\n    ${color === 'gray' ? 'bg-gray-300 hover:bg-gray-400 text-white' : ''}\n    ${classes}\n  `}\n  href={href}\n  onClick={onClick}\n  >\n    {children}\n  </button>\n}\n","// import './ContentPage.css'\nimport React, { useState, useEffect } from 'react';\n\n// import { setUser } from '../../actions/authentication';\nimport { clearUser } from '../../actions/authentication.js';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Redirect } from \"react-router-dom\";\nimport moment from \"moment\";\nimport { Link } from \"react-router-dom\";\n\nimport {downloadReport, downloadRawData} from '../../api/aggregatedStats';\n\nimport Logo from '../Logo.jsx';\nimport { IconButtonClose } from '../IconButtons.jsx';\nimport DateFromTo from '../DateFromTo/DateFromTo.jsx';\nimport FormSelect from '../FormSelect/FormSelect.jsx';\nimport Button from '../Form/Button.jsx';\n\nfunction Section({title, children}) {\n  return <section className=\"my-6 py-2 border-t-2 border-solid border-gray-200\" style={{\n    maxWidth: '100%',\n    width: '320px',\n  }}>\n    <h3 className=\"mt-4 mb-4 text-xl font-bold\">\n      {title}\n    </h3>\n    {children}\n  </section>\n}\n\nexport default function Misc(props) {\n  const dispatch = useDispatch();\n\n  const [startDate, setStartDate] = useState(moment(moment().subtract(1, 'month')).format('YYYY-MM-DD'));\n  const [endDate, setEndDate] = useState(moment().format('YYYY-MM-DD'));\n  const [municipalityCode, setMunicipalityCode] = useState('');\n  const [doRenderRedirect, setDoRenderRedirect] = useState(false);\n  const [isVerified, setIsVerified] = useState(false);\n\n  const token = useSelector(state => {\n    if(state.authentication && state.authentication.user_data) {\n      return state.authentication.user_data.token\n    } else {\n      return undefined;\n    }\n  })\n\n  const user = useSelector(state => {\n    if(state.authentication && state.authentication.user_data && state.authentication.user_data.user) {\n      return state.authentication.user_data.user\n    } else {\n      return false;\n    }\n  });\n\n  const places = useSelector(state => {\n    return (state.metadata && state.metadata.gebieden) ? state.metadata.gebieden : [];\n  });\n\n  useEffect(x => {\n    if(! token) return;\n\n    let url = \"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\";\n    let options = { headers : { \"authorization\": \"Bearer \" + token }}\n    \n    fetch(url, options).then((response) => {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n      response.json().then((acl) => {\n        const isAdmin = acl.is_admin === true;\n        const isContactPerson = acl.is_contact_person_municipality === true;\n\n        if(isAdmin || isContactPerson) {\n          setIsVerified(true);\n        }\n      });\n    });\n  }, [token])\n\n  const logOut = () => {\n    if (user) {\n      dispatch( clearUser() );\n      dispatch( { type: \"LOGOUT\", payload: null });\n    }\n    setDoRenderRedirect(true);\n  }\n\n  const renderRedirect = () => {\n    return (\n      <Redirect to=\"/\" />\n    );\n  }\n \n  const handleDownloadReportClick = async () => {\n    if(! startDate) {\n      window.notify('Selecteer een startdatum');\n      return;\n    }\n    if(! endDate) {\n      window.notify('Selecteer een einddatum');\n      return;\n    }\n    if(! municipalityCode) {\n      window.notify('Selecteer de gemeente');\n      return;\n    }\n    await downloadReport(token, {\n      startDate: moment(startDate).format('YYYY-MM-DD'),\n      endDate: moment(endDate).format('YYYY-MM-DD'),\n      gm_code: municipalityCode\n    });\n  }\n\n  const handleDownloadRawDataClick = async () => {\n    await downloadRawData(token, {\n      startDate: moment(startDate).format('YYYY-MM-DD'),\n      endDate: moment(endDate).format('YYYY-MM-DD')\n    });\n  }\n\n  if (doRenderRedirect) {\n    return renderRedirect();\n  }\n\n  const isDateRangeMoreThanOneMonth = moment(endDate).diff(startDate, 'days') > 30;\n\n  return (\n    <div className=\"\n      px-4\n      min-h-screen\n      sm:flex sm:justify-center\n      sm:px-0\n    \">\n      <div className=\"mx-auto py-8\">\n\n        <IconButtonClose\n          onClick={() => setDoRenderRedirect(true)}\n          style={{position: 'absolute', right: '30px', top: '18px'}}\n        />\n\n        <Logo />\n\n        <div className=\"\n          mt-6 pt-10\n          border-t-2 border-solid border-gray-200\n        \">\n\n          <h2 className=\"mt-4 mb-4 text-4xl font-bold\">\n            Hallo\n            <span className=\"ml-4 inline-block text-gray-300 text-lg\">\n              {user ? user.email : ''}\n            </span>\n          </h2>\n\n        </div>\n\n        <p style={{\n          maxWidth: '100%',\n          width: '416px'\n        }} className=\"mb-4\">\n          Je bent lid van het Dashboard Deelmobiliteit, een webtool van en voor overheden die de ontwikkelingen rond deelmobiliteit willen volgen.\n        </p>\n\n        &raquo; <Link to=\"/over\" className=\"\n          text-gray-400\n          underline\n          block\n          mb-2\n          inline-block\n        \">\n          Meer info\n        </Link>\n\n        <div className=\"flex\">\n          <Button classes=\"mr-2\" color=\"blue\" href=\"mailto:info@deelfietsdashboard.nl?subject=Feedback Dashboard Deelmobiliteit&body=Ik heb feedback: \">\n            Zend feedback\n          </Button>\n          <Button color=\"gray\" onClick={() => {\n            if(window.confirm('Wil je uitloggen?')) {\n              logOut();\n            }\n          }}>\n            Uitloggen\n          </Button>\n        </div>\n\n        <Section title=\"Download standaardrapportage\">\n          <DateFromTo\n            label=\"Periode\"\n            startDate={moment(startDate).toDate()}\n            endDate={moment(endDate).toDate()}\n            onChange={(dates) => {\n              const [start, end] = dates;\n              setStartDate(start);\n              setEndDate(end);\n            }}\n          />\n          <FormSelect\n            label=\"Plaats\"\n            onChange={(e) => {\n              setMunicipalityCode(e.target.value)\n            }}\n            options={places.map(x => {\n              return {\n                value: x.gm_code,\n                title: x.name\n              }\n            })}\n          />\n          <Button classes=\"\" color=\"blue\" onClick={() => handleDownloadReportClick()}>\n            Download rapportage\n          </Button>\n        </Section>\n\n        {isVerified && <Section title=\"Download ruwe data\">\n          <DateFromTo\n            label=\"Periode\"\n            startDate={moment(startDate).toDate()}\n            endDate={moment(endDate).toDate()}\n            onChange={(dates) => {\n              const [start, end] = dates;\n              setStartDate(start);\n              setEndDate(end);\n            }}\n          />\n\n          {isDateRangeMoreThanOneMonth && <div className=\"flex items-center font-medium tracking-wide text-red-500 text-xs mt-1 ml-1\">\n            <div>\n              Het is momenteel niet mogelijk om een langere periode dan 1 maand te downloaden. Neem alsjeblieft contact op met ons via <a href=\"mailto:info@deelfietsdashboard.nl\" className=\"inline\">info@deelfietsdashboard.nl</a> als je een export wilt ontvangen voor een langere periode.\n            </div>\n          </div>}\n\n          <Button classes=\"\" color=\"blue\" onClick={() => handleDownloadRawDataClick()}>\n            Download ruwe data (.csv)\n          </Button>\n        </Section>}\n\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport MobileSlideBox from '../SlideBox/MobileSlideBox.jsx';\n\nimport './SelectLayerMobile.css';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  // DISPLAYMODE_OTHER,\n  DISPLAYMODE_PARKEERDATA_HEATMAP,\n  DISPLAYMODE_PARKEERDATA_CLUSTERS,\n  DISPLAYMODE_PARKEERDATA_VOERTUIGEN,\n  DISPLAYMODE_VERHUURDATA_HEATMAP,\n  DISPLAYMODE_VERHUURDATA_CLUSTERS,\n  DISPLAYMODE_VERHUURDATA_VOERTUIGEN\n} from '../../reducers/layers.js';\n\nfunction SelectLayerMobile(props) {\n  const dispatch = useDispatch()\n\n  const isVisible = useSelector(state => {\n    return state.ui ? state.ui['MenuSecondary.layers'] : false;\n  });\n\n  const showZoneOnOff = useSelector(state => {\n    return state.filter ? state.filter.gebied!=='' : false;\n  });\n\n  const zonesVisible = useSelector(state => {\n    return state.layers ? state.layers.zones_visible : false;\n  });\n  \n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n\n  const viewPark = useSelector(state => {\n    return state.layers ? state.layers.view_park : DISPLAYMODE_PARKEERDATA_VOERTUIGEN;\n  });\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  // console.log(\"MOBILE selection\", displayMode)\n  \n  const setVisibility = (name, visibility) => {\n    dispatch({\n      type: `SET_VISIBILITY`,\n      payload: {\n        name: name,\n        visibility: visibility\n      }\n    })\n  }\n  \n  return (\n    <MobileSlideBox\n      title=\"Lagen\"\n      isVisible={isVisible}\n      closeHandler={() => {\n        setVisibility('MenuSecondary.layers', false);\n      }}\n      classes=\"\n        top-auto\n      \"\n    >\n      <div className={`\n        SelectLayerMobile\n        flex justify-between\n      `}>\n      { displayMode===DISPLAYMODE_PARK ?\n            <div data-type=\"heat-map\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_HEATMAP ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_HEATMAP }) }}>\n              <span className=\"layer-title\">\n                Heat map\n              </span>\n            </div> : null }\n\n      { displayMode===DISPLAYMODE_PARK ?\n        <div data-type=\"pointers\" className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_CLUSTERS ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_CLUSTERS }) }}>\n          <span className=\"layer-title\">\n            Clusters\n          </span>\n          </div> : null }\n\n      { displayMode===DISPLAYMODE_PARK ?\n        <div data-type=\"vehicles\"  className={`layer${viewPark!==DISPLAYMODE_PARKEERDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_PARK', payload: DISPLAYMODE_PARKEERDATA_VOERTUIGEN }) }}>\n          <span className=\"layer-title\">\n            Voertuigen\n          </span>\n          </div> : null }\n\n      { displayMode===DISPLAYMODE_RENTALS ?\n            <div data-type=\"heat-map\" className={`layer${viewPark!==DISPLAYMODE_VERHUURDATA_HEATMAP ? ' layer-inactive':''}`}\n              onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_HEATMAP }) }}>\n              <span className=\"layer-title\">\n                Heat map\n              </span>\n            </div> : null }\n\n      { displayMode===DISPLAYMODE_RENTALS ?\n        <div data-type=\"pointers\" className={`layer${viewPark!==DISPLAYMODE_VERHUURDATA_CLUSTERS ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_CLUSTERS }) }}>\n          <span className=\"layer-title\">\n            Clusters\n          </span>\n          </div> : null }\n\n      { displayMode===DISPLAYMODE_RENTALS ?\n        <div data-type=\"vehicles\"  className={`layer${viewPark!==DISPLAYMODE_VERHUURDATA_VOERTUIGEN ? ' layer-inactive':''}`}\n          onClick={() => { dispatch({ type: 'LAYER_SET_VIEW_RENTALS', payload: DISPLAYMODE_VERHUURDATA_VOERTUIGEN }) }}>\n          <span className=\"layer-title\">\n            Voertuigen\n          </span>\n          </div> : null }\n\n      { isLoggedIn && showZoneOnOff ?\n          <div data-type=\"zones\" className={`layer${!zonesVisible ? ' layer-inactive':''}`} onClick={() => {\n              dispatch({ type: 'LAYER_TOGGLE_ZONES_VISIBLE', payload: null })\n          }}>\n            <span className=\"layer-title\">\n              Zones\n            </span>\n          </div> : null\n        }\n      </div>\n    </MobileSlideBox>\n  )\n}\n\nexport {\n  SelectLayerMobile\n}","import { useSelector } from 'react-redux';\n\nimport './LoadingIndicator.css';\n\nconst LoadingIndicator = () => {\n  \n  const show = useSelector(state => state.ui.showloading)\n  \n  if(show) {\n    return (\n      <img className=\"loadingindicator\" alt=\"spinning progress indicator\" src=\"/images/components/LoadingIndicator/bike_wheel-512.png\"/>\n    )\n  } else {\n    return null;\n  }\n}\n\nexport default LoadingIndicator;","const cPublicAanbieders = [\n    { value:\"cykl\", system_id:\"cykl\", name:\"Cykl\" },\n    // { value:\"flickbike\", system_id:\"flickbike\", name:\"Flickbike\" },\n    { value:\"donkey\", system_id:\"donkey\", name:\"Donkey\" },\n    // { value:\"mobike\", system_id:\"mobike\", name:\"Mobike\" },\n    { value:\"htm\", system_id:\"htm\", name:\"HTM\" },\n    { value:\"gosharing\", system_id:\"gosharing\", name:\"GO\" },\n    { value:\"check\", system_id:\"check\", name:\"CHECK\" },\n    { value:\"felyx\", system_id:\"felyx\", name:\"Felyx\" },\n    { value:\"deelfietsnederland\", system_id:\"deelfietsnederland\", name:\"Deelfiets\" },\n    { value:\"keobike\", system_id:\"keobike\", name:\"Keobike\" },\n    { value:\"lime\", system_id:\"lime\", name:\"Lime\" },\n    { value:\"baqme\", system_id:\"baqme\", name:\"BAQME\" },\n    { value:\"cargoroo\", system_id:\"cargoroo\", name:\"Cargoroo\" },\n    { value:\"uwdeelfiets\", system_id:\"uwdeelfiets\", name:\"uwdeelfiets\" },\n    { value:\"hely\", system_id:\"hely\", name:\"Hely\" },\n    { value:\"tier\", system_id:\"tier\", name:\"TIER\" }\n  ];\n  \nconst cPublicGebieden = [\n  { gm_code:\"\", name:\"Alle Gebieden\" }, { gm_code:\"GM0518\", name:\"'s-Gravenhage\" }, { gm_code:\"GM0796\", name:\"'s-Hertogenbosch\" }, { gm_code:\"GM0613\", name:\"Albrandswaard\" }, { gm_code:\"GM0141\", name:\"Almelo\" }, { gm_code:\"GM0034\", name:\"Almere\" }, { gm_code:\"GM0484\", name:\"Alphen aan den Rijn\" }, { gm_code:\"GM0307\", name:\"Amersfoort\" }, { gm_code:\"GM0362\", name:\"Amstelveen\" }, { gm_code:\"GM0363\", name:\"Amsterdam\" }, { gm_code:\"GM0200\", name:\"Apeldoorn\" }, { gm_code:\"GM0202\", name:\"Arnhem\" }, { gm_code:\"GM0106\", name:\"Assen\" }, { gm_code:\"GM0489\", name:\"Barendrecht\" }, { gm_code:\"GM0203\", name:\"Barneveld\" }, { gm_code:\"GM0373\", name:\"Bergen (NH\" }, { gm_code:\"GM0753\", name:\"Best\" }, { gm_code:\"GM0375\", name:\"Beverwijk\" }, { gm_code:\"GM0377\", name:\"Bloemendaal\" }, { gm_code:\"GM0758\", name:\"Breda\" }, { gm_code:\"GM0312\", name:\"Bunnik\" }, { gm_code:\"GM0313\", name:\"Bunschoten\" }, { gm_code:\"GM0502\", name:\"Capelle aan den IJssel\" }, { gm_code:\"GM0310\", name:\"De Bilt\" }, { gm_code:\"GM0736\", name:\"De Ronde Venen\" }, { gm_code:\"GM0503\", name:\"Delft\" }, { gm_code:\"GM0150\", name:\"Deventer\" }, { gm_code:\"GM0384\", name:\"Diemen\" }, { gm_code:\"GM0505\", name:\"Dordrecht\" }, { gm_code:\"GM0228\", name:\"Ede\" }, { gm_code:\"GM0772\", name:\"Eindhoven\" }, { gm_code:\"GM0153\", name:\"Enschede\" }, { gm_code:\"GM0232\", name:\"Epe\" }, { gm_code:\"GM1771\", name:\"Geldrop-Mierlo\" }, { gm_code:\"GM1942\", name:\"Gooise Meren\" }, { gm_code:\"GM0014\", name:\"Groningen\" }, { gm_code:\"GM0392\", name:\"Haarlem\" }, { gm_code:\"GM0394\", name:\"Haarlemmermeer\" }, { gm_code:\"GM0243\", name:\"Harderwijk\" }, { gm_code:\"GM0246\", name:\"Heerde\" }, { gm_code:\"GM0794\", name:\"Helmond\" }, { gm_code:\"GM0164\", name:\"Hengelo\" }, { gm_code:\"GM0798\", name:\"Hilvarenbeek\" }, { gm_code:\"GM0402\", name:\"Hilversum\" }, { gm_code:\"GM0353\", name:\"IJsselstein\" }, { gm_code:\"GM0166\", name:\"Kampen\" }, { gm_code:\"GM0542\", name:\"Krimpen aan den IJssel\" }, { gm_code:\"GM1621\", name:\"Lansingerland\" }, { gm_code:\"GM0080\", name:\"Leeuwarden\" }, { gm_code:\"GM1916\", name:\"Leidschendam-Voorburg\" }, { gm_code:\"GM0327\", name:\"Leusden\" }, { gm_code:\"GM0809\", name:\"Loon op Zand\" }, { gm_code:\"GM0556\", name:\"Maassluis\" }, { gm_code:\"GM1842\", name:\"Midden-Delfland\" }, { gm_code:\"GM1952\", name:\"Midden-Groningen\" }, { gm_code:\"GM0356\", name:\"Nieuwegein\" }, { gm_code:\"GM0267\", name:\"Nijkerk\" }, { gm_code:\"GM0268\", name:\"Nijmegen\" }, { gm_code:\"GM1930\", name:\"Nissewaard\" }, { gm_code:\"GM0820\", name:\"Nuenen, Gerwen en Nederwetten\" }, { gm_code:\"GM0302\", name:\"Nunspeet\" }, { gm_code:\"GM0826\", name:\"Oosterhout\" }, { gm_code:\"GM0431\", name:\"Oostzaan\" }, { gm_code:\"GM1926\", name:\"Pijnacker-Nootdorp\" }, { gm_code:\"GM0273\", name:\"Putten\" }, { gm_code:\"GM0597\", name:\"Ridderkerk\" }, { gm_code:\"GM0603\", name:\"Rijswijk\" }, { gm_code:\"GM1674\", name:\"Roosendaal\" }, { gm_code:\"GM0599\", name:\"Rotterdam\" }, { gm_code:\"GM0606\", name:\"Schiedam\" }, { gm_code:\"GM0848\", name:\"Son en Breugel\" }, { gm_code:\"GM0855\", name:\"Tilburg\" }, { gm_code:\"GM1730\", name:\"Tynaarlo\" }, { gm_code:\"GM0344\", name:\"Utrecht\" }, { gm_code:\"GM1581\", name:\"Utrechtse Heuvelrug\" }, { gm_code:\"GM0861\", name:\"Veldhoven\" }, { gm_code:\"GM0622\", name:\"Vlaardingen\" }, { gm_code:\"GM0865\", name:\"Vught\" }, { gm_code:\"GM0866\", name:\"Waalre\" }, { gm_code:\"GM0867\", name:\"Waalwijk\" }, { gm_code:\"GM0289\", name:\"Wageningen\" }, { gm_code:\"GM0629\", name:\"Wassenaar\" }, { gm_code:\"GM1960\", name:\"West Betuwe\" }, { gm_code:\"GM1783\", name:\"Westland\" }, { gm_code:\"GM0637\", name:\"Zoetermeer\" }, { gm_code:\"GM0642\", name:\"Zwijndrecht\" }, { gm_code:\"GM0193\", name:\"Zwolle\" }\n]\n\n// id should correspond to the api filter values\nconst cPublicVoertuigTypes = [\n    { id: 'bicycle', name: 'Fiets'},\n    { id: 'cargo_bicycle', name: 'Bakfiets'},\n    { id: 'moped', name: 'Scooter'},\n    { id: 'car', name: 'Auto'},\n    { id: 'unknown', name: 'Onbekend'},\n]\n\n// var store_accesscontrollist = undefined;\n//\nconst isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nexport const initAccessControlList = (store_accesscontrollist)  => {\n  try {\n    if(undefined===store_accesscontrollist) {\n      // console.log(\"no redux state available yet - skipping metadata update\");\n      return false;\n    }\n    \n    const state = store_accesscontrollist.getState();\n    if(!isLoggedIn(state)) {\n      // console.log(\"initialize ACL Data (not logged in)\")\n      // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n      store_accesscontrollist.dispatch({ type: 'SET_GEBIEDEN', payload: cPublicGebieden});\n      \n      // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n      store_accesscontrollist.dispatch({ type: 'SET_AANBIEDERS', payload: cPublicAanbieders});\n\n      let types = cPublicVoertuigTypes; // TODO: get from ACL once implemented\n      store_accesscontrollist.dispatch({ type: 'SET_VEHICLE_TYPES', payload: types});\n\n      store_accesscontrollist.dispatch({ type: 'SET_METADATA_LOADED', payload: true});\n    } else {\n      console.log(\"initialize ACL Data (logged in)\")\n      let url=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\";\n      let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      \n      store_accesscontrollist.dispatch({type: 'SHOW_LOADING', payload: true});\n      \n      fetch(url, options).then((response) => {\n        if(!response.ok) {\n          console.error(\"unable to fetch: %o\", response);\n          return false\n        }\n\n        response.json()\n          .then((metadata) => {\n            // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n            // console.log(\"dispatch gebieden \", metadata.municipalities);\n            store_accesscontrollist.dispatch({ type: 'SET_GEBIEDEN', payload: metadata.municipalities});\n            if(metadata.municipalities.length===1) {\n              store_accesscontrollist.dispatch({ type: 'SET_FILTER_GEBIED', payload: metadata.municipalities[0].gm_code});\n            }\n            \n            // items -> {\"name\": \"Cykl\",\"system_id\": \"cykl\"}\n            store_accesscontrollist.dispatch({ type: 'SET_AANBIEDERS', payload: metadata.operators});\n\n            // items -> {\"id\": 1, \"name\": \"asdfasdfadfa\" }\n            let types = cPublicVoertuigTypes; // TODO: get from ACL once implemented\n            store_accesscontrollist.dispatch({ type: 'SET_VEHICLE_TYPES', payload: types});\n            \n            store_accesscontrollist.dispatch({ type: 'SET_METADATA_LOADED', payload: true});\n          })\n        }).catch(ex=>{\n          console.error(\"unable to decode JSON\");\n        }).finally(()=>{\n          store_accesscontrollist.dispatch({type: 'SHOW_LOADING', payload: false});\n        })\n        return true;\n      }\n  } catch(ex) {\n    console.error(\"Unable to update ACL\", ex)\n    store_accesscontrollist.dispatch({type: 'SHOW_LOADING', payload: false});\n    return false;\n  }\n}","import moment from 'moment';\nimport { createFilterparameters, isLoggedIn, convertDurationToBin } from './pollTools.js';\nimport { DISPLAYMODE_PARK } from '../reducers/layers.js';\n\nvar store_parkingdata = undefined;\n\nvar timerid_parkingdata = undefined;\n\nconst updateParkingData = ()  => {\n  // let delay = cPollDelayParkingData;\n  try {\n    if(undefined===store_parkingdata) {\n      console.error(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n    \n    // Wait for zone data\n    const state = store_parkingdata.getState();\n    if(state.metadata.zones_loaded===false) {\n      // console.info(\"no zone metadata available yet - skipping parking data update\");\n      return false;\n    }\n    \n    if(state.layers.displaymode!==DISPLAYMODE_PARK) {\n      // console.info('not viewing park data - skip update');\n      return true;\n    }\n    \n    const canfetchdata = isLoggedIn(state)&&state&&state.filter&&state.authentication.user_data.token;\n    let url = \"https://api.deelfietsdashboard.nl/dashboard-api/public/vehicles_in_public_space\";\n    let options = {};\n    if(!canfetchdata) {\n      let filterparams = createFilterparameters(DISPLAYMODE_PARK, state.filter, state.metadata);\n      if(filterparams.length>0) {\n        url += \"?\" + filterparams.join(\"&\");\n      }\n    } else {\n      if(null!==state.filter&&null!==state.authenticationdata) {\n        url = \"https://api.deelfietsdashboard.nl/dashboard-api/park_events\";\n        let filterparams = createFilterparameters(DISPLAYMODE_PARK, state.filter, state.metadata);\n        if(filterparams.length>0) {\n          url += \"?\" + filterparams.join(\"&\");\n        }\n        options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n      }\n    }\n    \n    store_parkingdata.dispatch({type: 'SHOW_LOADING', payload: true});\n\n    fetch(url, options).then(function(response) {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n      \n      response.json().then(function(vehicles) {\n        if(isLoggedIn(state)) {\n          vehicles = vehicles.park_events\n        } else {\n          vehicles = vehicles.vehicles_in_public_space\n        }\n        let geoJson = {\n           \"type\":\"FeatureCollection\",\n           \"features\":[]\n        }\n        \n        let operatorcolors = {};\n        let operatorstats = {}\n        state.metadata.aanbieders.forEach(o => {\n          operatorcolors[o.system_id || o.value]=o.color;\n          operatorstats[o.system_id || o.value]=0;\n        });\n        \n        let aanbiedersexclude = state.filter.aanbiedersexclude.split(\",\") || []\n    \n        const md5 = require('md5');\n        var start_time = moment(state.filter.datum);\n        \n        let parkeerduurexclude = state.filter.parkeerduurexclude.split(\",\") || [];\n\n        vehicles.forEach(v => {\n          let in_public_space_since = isLoggedIn(state) ? v.start_time : v.in_public_space_since;\n    \n          var minutes = start_time.diff(moment(in_public_space_since), 'minutes');\n          const duration_bin = convertDurationToBin(minutes);\n          \n          let feature = {\n             \"type\":\"Feature\",\n             \"properties\":{\n                \"id\":md5(v.location.latitude+v.location.longitude),\n                \"system_id\": v.system_id || v.value,// v.value is used in the public map\n                \"in_public_space_since\": in_public_space_since,\n                \"duration_bin\": duration_bin,\n             },\n             \"geometry\":{\n                \"type\":\"Point\",\n                \"coordinates\":[\n                   v.location.longitude,\n                   v.location.latitude,\n                   0.0\n                ]\n             }\n          }\n\n          operatorstats[v.system_id || v.value]+=1;\n\n          let markerVisible = ! isLoggedIn(state) || !parkeerduurexclude.includes(duration_bin.toString());\n          markerVisible = markerVisible && (aanbiedersexclude.includes(v.system_id || v.value) === false)\n          if(markerVisible) {\n            geoJson.features.push(feature);\n          }\n        })\n        // console.log('geoJson in pollParkingData', geoJson)\n    \n        store_parkingdata.dispatch({\n          type: 'SET_VEHICLES',\n          payload: geoJson\n        })\n\n        store_parkingdata.dispatch({\n          type: 'SET_VEHICLES_OPERATORSTATS',\n          payload: operatorstats\n        })\n      }).catch(ex=>{\n        console.error(\"unable to decode JSON\");\n      }).finally(()=>{\n        store_parkingdata.dispatch({type: 'SHOW_LOADING', payload: false});\n      })\n    }).catch(ex=>{\n      store_parkingdata.dispatch({type: 'SHOW_LOADING', payload: false});\n      console.error(\"fetch error - unable to fetch JSON from %s\", url);\n    });\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n    // delay = cPollDelayParkingData * cPollDelayErrorMultiplyer;\n  } finally {\n    // timerid_parkingdata = setTimeout(updateParkingData, delay);\n  }\n}\n\nexport const forceUpdateParkingData = () => {\n  if(! store_parkingdata) { console.log('No store yet.'); return; }\n  if(undefined!==timerid_parkingdata) { clearTimeout(timerid_parkingdata); }\n  updateParkingData();\n}\n\nexport const initUpdateParkingData = (_store) => {\n  store_parkingdata = _store;\n  forceUpdateParkingData();\n}\n","// import moment from 'moment';\nimport { createFilterparameters, isLoggedIn, convertDistanceToBin } from './pollTools.js';\nimport { DISPLAYMODE_RENTALS } from '../reducers/layers.js';\nconst md5 = require('md5');\n\nvar store_verhuringendata = undefined;\nvar timerid_verhuringendata = undefined;\n\n// Function that gets trip data and saves it into store_verhuringendata\nconst updateVerhuringenData = ()  => {\n  try {\n    if(undefined===store_verhuringendata) {\n      // console.error(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n\n    // Wait for zone data\n    const state = store_verhuringendata.getState();\n    if(state.layers.displaymode!==DISPLAYMODE_RENTALS) {\n      // console.log(`not viewing rentals data (viewing ${state.layers.displaymode}, need ${DISPLAYMODE_RENTALS}) - skip update`);\n      return true;\n    }\n\n    if(state.metadata.zones_loaded===false) {\n      // console.log(\"no zone metadata available yet - skipping rentals data update\");\n      return false;\n    }\n\n    let afstandexclude = state.filter.afstandexclude.split(\",\") || [];\n    const canfetchdata = isLoggedIn(state)&&state&&state.filter&&state.authentication.user_data.token;\n\n    if(!canfetchdata) {\n      store_verhuringendata.dispatch({ type: 'CLEAR_RENTALS_ORIGINS'});\n      store_verhuringendata.dispatch({ type: 'CLEAR_RENTALS_DESTINATIOINS'});\n    } else {\n      const fetchData = (key) => {\n        if(key !== 'destinations' && key !== 'origins') {\n          console.error('No valid key given to fetchData');\n          return;\n        }\n        let url = `https://api.deelfietsdashboard.nl/dashboard-api/v2/trips/${key}`;\n        let options = {};\n        if(null!==state.filter&&null!==state.authenticationdata) {\n          url = `https://api.deelfietsdashboard.nl/dashboard-api/v2/trips/${key}`;\n          let filterparams = createFilterparameters(DISPLAYMODE_RENTALS, state.filter, state.metadata);\n          if(filterparams.length>0) {\n            url += \"?\" + filterparams.join(\"&\");\n          }\n          options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n        }\n        \n        store_verhuringendata.dispatch({type: 'SHOW_LOADING', payload: true});\n        \n        fetch(url, options).then(function(response) {\n          store_verhuringendata.dispatch({type: 'SHOW_LOADING', payload: false});\n\n          if(!response.ok) {\n            console.error(\"unable to fetch: %o\", response);\n            return false\n          }\n\n          response.json().then(function(data) {\n            let verhuringen = isLoggedIn ? data : [];\n\n            let geoJson = {\n              \"type\":\"FeatureCollection\",\n              \"features\":[]\n            }\n            \n            let operatorstats = {}\n            state.metadata.aanbieders.forEach(o => {\n              operatorstats[o.system_id || o.value]=0;\n            });\n\n            let aanbiedersexclude = state.filter.aanbiedersexclude.split(\",\") || []\n\n            // Map data\n            verhuringen[`trip_${key}`].forEach(v => {\n              const distance_bin = convertDistanceToBin(v.distance_in_meters);\n\n              let feature = {\n               \"type\":\"Feature\",\n               \"properties\":{\n                  \"id\": md5(v.location.latitude+v.location.longitude),\n                  \"system_id\": v.system_id,\n                  \"arrival_time\": v.arrival_time,\n                  \"departure_time\": v.departure_time,\n                  \"distance_bin\": distance_bin,\n                  \"distance_in_meters\": v.distance_in_meters,\n                  // \"duration_bin\": 0,\n                  // \"color\": \"#38ff71\" // color\n               },\n               \"geometry\":{\n                  \"type\":\"Point\",\n                  \"coordinates\": [\n                     v.location.longitude,\n                     v.location.latitude,\n                     0.0\n                  ]\n                }\n              }\n\n              operatorstats[v.system_id || v.value]+=1;\n\n              let markerVisible = !afstandexclude.includes(distance_bin.toString());\n              markerVisible = markerVisible && (aanbiedersexclude.includes(v.system_id || v.value) === false)\n              if(markerVisible) {\n                geoJson.features.push(feature);\n              }\n\n            })\n\n            store_verhuringendata.dispatch({\n              type: `SET_RENTALS_${key.toUpperCase()}`,\n              payload: geoJson\n            })\n            \n            // console.log(`SET_RENTALS_${key.toUpperCase()}_OPERATORSTATS`, JSON.stringify(operatorstats));\n            store_verhuringendata.dispatch({\n              type: `SET_RENTALS_${key.toUpperCase()}_OPERATORSTATS`,\n              payload: operatorstats\n            })\n          }).catch(ex=>{\n            console.error(\"unable to decode JSON\");\n            // setJson(false);\n          }).finally(()=>{\n            store_verhuringendata.dispatch({type: 'SHOW_LOADING', payload: false});\n          })\n          \n        }).catch(ex=>{\n          store_verhuringendata.dispatch({type: 'SHOW_LOADING', payload: false});\n          console.error(\"fetch error - unable to fetch JSON from %s\", url);\n          // setJson(false);\n        });\n      }\n\n      if(state.filter.herkomstbestemming === 'bestemming') {\n        fetchData('destinations');\n      } else {\n        fetchData('origins');\n      }\n    }\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n  } finally {\n    // store_verhuringendata.dispatch({type: 'SHOW_LOADING', payload: false});\n  }\n}\n\nexport const forceUpdateVerhuringenData = () => {\n  if(! store_verhuringendata) { console.log('No store yet.'); return; }\n  if(undefined!==timerid_verhuringendata) { clearTimeout(timerid_verhuringendata); }\n  updateVerhuringenData();\n}\n\nexport const initUpdateVerhuringenData = (_store) => {\n  store_verhuringendata = _store;\n  forceUpdateVerhuringenData();\n}\n","import { useEffect, useRef, useState } from 'react';\nimport {\n Switch,\n Route,\n useLocation,\n} from \"react-router-dom\";\nimport moment from 'moment';\nimport { store } from './AppProvider.js';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport Menu from './components/Menu.jsx';\nimport MenuSecondary from './components/Menu/MenuSecondary.jsx';\nimport MapPage from './pages/MapPage.jsx';\nimport ContentPage from './pages/ContentPage.jsx';\nimport StatsPage from './pages/StatsPage.jsx';\nimport Login from './pages/Login.jsx';\nimport SetPassword from './pages/SetPassword.jsx';\nimport Monitoring from './pages/Monitoring.jsx';\nimport FilterbarDesktop from './components/Filterbar/FilterbarDesktop.jsx';\nimport FilterbarMobile from './components/Filterbar/FilterbarMobile.jsx';\nimport About from './components/About/About.jsx';\nimport Overlay from './components/Overlay/Overlay.jsx';\nimport Misc from './components/Misc/Misc.jsx';\nimport {SelectLayerMobile} from './components/SelectLayer/SelectLayerMobile.jsx';\nimport LoadingIndicator from './components/LoadingIndicator/LoadingIndicator.jsx';\n\nimport { initAccessControlList } from './poll-api/metadataAccessControlList.js';\nimport { updateZones } from './poll-api/metadataZones.js';\nimport { updateZonesgeodata } from './poll-api/metadataZonesgeodata.js';\n\nimport { initUpdateParkingData } from './poll-api/pollParkingData.js';\nimport {\n  initUpdateVerhuringenData\n} from './poll-api/pollVerhuringenData.js';\n\nimport {\n  DISPLAYMODE_PARK,\n  DISPLAYMODE_RENTALS,\n  DISPLAYMODE_OTHER,\n} from './reducers/layers.js';\n\nimport './App.css';\n\nfunction App() {\n  const [pathName, setPathName] = useState(document.location.pathname);\n  const [uriParams, setUriParams] = useState(document.location.search);\n  \n  const dispatch = useDispatch()\n  \n  const mapContainer = useRef(null);\n\n  let location = useLocation();\n  useEffect(() => {\n    setPathName(location ? location.pathname : null);\n    setUriParams(location ? location.search : null);\n  }, [location]);\n  \n  useEffect(() => {\n    if(uriParams!==null) {\n      let params = new URLSearchParams(uriParams);\n      let view = params.get('view')\n      if(view) {\n        try {\n          // console.log(decodeURIComponent(view));\n          const importstate = JSON.parse(decodeURIComponent(view));\n          // force update to map extent\n          // importstate.layers.extent = importstate.layers.mapextent;\n          dispatch({type: 'IMPORT_STATE', payload: importstate });\n          \n          setTimeout(() => dispatch({type: 'LAYER_SET_ZONES_EXTENT', payload: importstate.layers.mapextent}), 2500);\n          return;\n        } catch(ex) {\n          console.warn(\"unable to decode application state\")\n          alert(\"Ongeldige link ingegeven\");\n        }\n        // continue\n      }\n    }\n    \n    let payload;\n    if(pathName.includes(\"/map/park\")||pathName==='/') {\n      payload=DISPLAYMODE_PARK;\n    } else if(pathName.includes(\"/map/rentals\")) {\n      payload=DISPLAYMODE_RENTALS;\n    } else {\n      payload=DISPLAYMODE_OTHER;\n    }\n    dispatch({type: 'LAYER_SET_DISPLAYMODE', payload});\n\n  }, [pathName, uriParams, dispatch]);\n\n  const isLoggedIn = useSelector(state => {\n    return state.authentication.user_data ? true : false;\n  });\n  \n  const filterDate = useSelector(state => {\n    return state.filter ? state.filter.datum : false;\n  });\n\n  const isLayersMobileVisible = useSelector(state => {\n    return state.ui ? state.ui['MenuSecondary.layers'] : false;\n  });\n\n  const isFilterBarVisible = useSelector(state => {\n    return state.ui ? state.ui['FILTERBAR'] : false;\n  });\n\n  const filter = useSelector(state => {\n    return state.filter;\n  });\n  \n  const layers = useSelector(state => {\n    return state.layers;\n  });\n\n  const displayMode = useSelector(state => {\n    return state.layers ? state.layers.displaymode : DISPLAYMODE_PARK;\n  });\n  \n  const metadata = useSelector(state => {\n    return state.metadata;\n  });\n\n  // Set date to current date/time on load\n  useEffect(() => {\n    const setFilterDatum = newdt => {\n      dispatch({\n        type: 'SET_FILTER_DATUM',\n        payload: newdt.toISOString()\n      })\n    }\n\n    // On load, set datetime to NOW\n    // - Don't do this if datetime < 10 ago\n    // - Don't do this if this is a shared link (we'll then keep the shared datetime)\n    const params = new URLSearchParams(uriParams);\n    const isFilterDateMoreThan10MinutesAgo = moment(filterDate).diff(moment(), 'minutes') < -10;\n    const isSharedLink = params.get('view');// Check if this is a shared link\n    if(! isSharedLink && isFilterDateMoreThan10MinutesAgo) {\n      setFilterDatum(moment().toDate())\n    }\n  }, [dispatch]);\n\n  /*\n  To load data using the API we use the scripts in the poll-api folder.\n  We need zones to be able to fetch parking & trips data.\n\n  First, on app load, we load user information.\n  Then, we load the zones.\n  As soon as the zones are loaded, we load the parking data and rentals data.\n  We reload the parking data and rentals data if the filters or the URL change.\n  */\n\n  // On app start: get user data\n  useEffect(() => {\n    initAccessControlList(store);\n  }, [isLoggedIn]);\n  \n  useEffect(() => {\n    // console.log('useEffect zones', filter.gebied)\n    updateZones(store);\n  }, [isLoggedIn, metadata.metadata_loaded, filter.gebied])\n\n  useEffect(() => {\n    // console.log('useEffect zones geodata')\n    updateZonesgeodata(store);\n  }, [\n    isLoggedIn,\n    filter.gebied,\n    metadata.zones_loaded,\n    filter.zones\n  ])\n\n  // On app start, if zones are loaded or pathName/filter is changed: reload data\n  useEffect(() => {\n    initUpdateParkingData(store);\n  }, [\n    isLoggedIn,\n    metadata.zones_loaded,\n    pathName,\n    filter,\n    layers.displaymode,\n    layers.zones_visible\n  ]);\n\n  useEffect(() => {\n    initUpdateVerhuringenData(store);\n  }, [\n    isLoggedIn,\n    metadata.zones_loaded,\n    pathName,\n    filter,\n    layers.displaymode,\n    layers.zones_visible\n  ]);\n\n  // Mobile menu: Filters / Layers\n  const renderMobileMenus = () => {\n    return <div>\n      <div className=\"hidden sm:block h-full\">\n        <FilterbarDesktop isVisible={isFilterBarVisible} displayMode={displayMode} />\n      </div>\n      <div className=\"block sm:hidden\">\n        <FilterbarMobile isVisible={isFilterBarVisible} displayMode={displayMode} />\n      </div>\n      <SelectLayerMobile />\n    </div>\n  }\n\n  const renderMapElements = () => {\n    return <>\n      <div key=\"mapContainer\" ref={mapContainer} className=\"map-layer top-0\"></div>\n      <MenuSecondary />\n      {renderMobileMenus()}\n    </>\n  }\n\n  return (\n    <div className={`app ${(isFilterBarVisible || isLayersMobileVisible) ? 'overflow-y-hidden' : ''}`}>\n        <LoadingIndicator  />\n        <div className=\"gui-layer\">\n        <Switch>\n          { isLoggedIn ?\n            <>\n              <Route exact path=\"/\">\n                <MapPage mapContainer={mapContainer} />\n                {renderMapElements()}\n              </Route>\n              <Route exact path=\"/map/park\">\n                <MapPage mapContainer={mapContainer} />\n                {renderMapElements()}\n              </Route>\n              <Route exact path=\"/map/rentals\">\n                <MapPage mapContainer={mapContainer} />\n                {renderMapElements()}\n              </Route>\n              <Route exact path=\"/stats/overview\">\n                <ContentPage>\n                  <StatsPage />\n                </ContentPage>\n                {renderMobileMenus()}\n              </Route>\n              <Route exact path=\"/monitoring\">\n                <Monitoring />\n              </Route>\n              <Route exact path=\"/misc\">\n                <Overlay>\n                  <MapPage mapContainer={mapContainer} />\n                  <Misc />\n                </Overlay>\n                <div key=\"mapContainer\" ref={mapContainer} className=\"map-layer top-0\"></div>\n              </Route>\n            </>\n            :\n            null\n          }\n\n          <Route exact path=\"/over\">\n            <Overlay>\n              <MapPage mapContainer={mapContainer} />\n              <About />\n            </Overlay>\n            <div key=\"mapContainer\" ref={mapContainer} className=\"map-layer top-0\"></div>\n          </Route>\n\n          <Route exact path=\"/login\">\n            <Overlay>\n              <MapPage mapContainer={mapContainer} />\n              <Login />\n            </Overlay>\n            <div key=\"mapContainer\" ref={mapContainer} className=\"map-layer top-0\"></div>\n          </Route>\n\n          <Route exact path=\"/reset-password/:changePasswordCode\">\n            <Overlay>\n              <MapPage mapContainer={mapContainer} />\n              <SetPassword />\n            </Overlay>\n            <div key=\"mapContainer\" ref={mapContainer} className=\"map-layer top-0\"></div>\n          </Route>\n\n          <Route>\n            <MapPage mapContainer={mapContainer} />\n            {renderMapElements()}\n          </Route>\n\n        </Switch>\n\n        <Menu pathName={pathName} />\n\n       </div>\n     </div>\n  );\n}\n\nexport default App;\n","import { getEmptyZonesGeodataPayload } from './metadataZonesgeodata';\n\nconst isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nexport const updateZones = (store_zones)  => {\n  try {\n    if(undefined===store_zones) {\n      console.log(\"no redux state available yet - skipping zones update\");\n      return false;\n    }\n    \n    const state = store_zones.getState();\n    if(state.metadata.metadata_loaded===false) {\n      console.log(\"no metadata available yet - skipping zones update\");\n      return false;\n    }\n    \n    let url_zones=\"\";\n    if(!isLoggedIn(state)||!state) { // ||state.filter.gebied===\"\"\n      store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n      store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n      \n      return;\n    } if(state.filter.gebied===\"\") {\n\n      store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n      store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n\n      return;\n      \n      // later: show outlines for all municipalities\n      // url_zones=\"https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_type=municipality\";\n    } else {\n      // https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=GM0518\n      url_zones=\"https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=\"+state.filter.gebied;\n\n      store_zones.dispatch({ type: 'SET_ZONES', payload: []});\n      store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: false});\n    }\n\n    // let url_geodata=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\"\n    // https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=34217&include_geojson=true\n    let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n    \n    store_zones.dispatch({type: 'SHOW_LOADING', payload: true});\n\n    fetch(url_zones, options).then((response) => {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n\n      response.json()\n        .then((metadata) => {\n          // items: { \"municipality\": \"GM0785\", \"name\": \"Goirle\", \"owner\": null, \"zone_id\": 34278, \"zone_type\": \"municipality\"}\n          store_zones.dispatch({ type: 'SET_ZONES', payload: metadata.zones});\n          store_zones.dispatch({ type: 'SET_ZONES_LOADED', payload: true});\n        })\n      }).catch(ex=>{\n        console.error(\"unable to decode JSON\");\n      }).finally(()=>{\n        store_zones.dispatch({type: 'SHOW_LOADING', payload: false});\n      })\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n    store_zones.dispatch({type: 'SHOW_LOADING', payload: false});\n  }\n}\n","const isLoggedIn = (state) => {\n  return state.authentication.user_data ? true : false;\n};\n\nexport const getEmptyZonesGeodataPayload = () => {\n  return  {\n    \"data\": {\n      \"type\":\"FeatureCollection\",\n      \"features\":[]\n    },\n    \"filter\": \"\"\n  }\n}\n\nexport const updateZonesgeodata = (store)  => {\n  try {\n    if(undefined===store) {\n      // console.log(\"no redux state available yet - skipping zones geodata update\");\n      return false;\n    }\n    \n    const state = store.getState();\n    if(state.metadata.zones_loaded===false) {\n      console.log(\"no zone metadata available yet - skipping zones geodata update\");\n      return false;\n    }\n\n    let zone_ids=\"\";\n    if(!isLoggedIn(state)||!state) {\n      // no filter data available\n      zone_ids = \"\";\n    } else if (state.filter.gebied===\"\") {\n      // get bounds of all municipalities\n      console.log(\"set empty zones payload (gebied leeg)\")\n      zone_ids = state.metadata.zones.filter(zone=>(zone.zone_type===\"municipality\")).map(zone=>zone.zone_id).join(\",\");\n    } else if (state.filter.zones.length===0) {\n      // get bounds of single municipality zone\n      let list_g = state.metadata.gebieden.filter(gebied=>gebied.gm_code===state.filter.gebied).map(gebied=>gebied.gm_code);\n      let list_z = state.metadata.zones.filter(zone=>(zone.zone_type===\"municipality\"&&list_g.includes(zone.municipality)));\n      console.log(\"set empty zones payload (zones length 0)\", list_g, list_z)\n      zone_ids = list_z.map(zone=>zone.zone_id).join(\",\");\n    } else {\n      console.log(\"set empty zones payload (selected zones\")\n      // get bounds of all selected zones\n      zone_ids = state.filter.zones; // use selected zones\n    }\n\n    if(zone_ids===\"\") {\n      store.dispatch({ type: 'SET_ZONES_GEODATA', payload: getEmptyZonesGeodataPayload()});\n      return;\n    }\n    \n    store.dispatch({type: 'SHOW_LOADING', payload: true});\n\n    // https://api.deelfietsdashboard.nl/dashboard-api/zones?gm_code=GM0518\n    let url_zonesgeodata = \"https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=\"+zone_ids+\"&&include_geojson=true\";\n    // let url_geodata=\"https://api.deelfietsdashboard.nl/dashboard-api/menu/acl\"\n    // https://api.deelfietsdashboard.nl/dashboard-api/zones?zone_ids=34217&include_geojson=true\n    let options = { headers : { \"authorization\": \"Bearer \" + state.authentication.user_data.token }}\n    fetch(url_zonesgeodata, options).then((response) => {\n      if(!response.ok) {\n        console.error(\"unable to fetch: %o\", response);\n        return false\n      }\n    \n      response.json()\n        .then((metadata) => {\n          console.log(\"got zones geodata for \", state.filter.zones||'all zones')\n          const st = require('geojson-bounds');\n          \n          // convert to standard geojson here\n          let geojson = {\n             \"type\":\"FeatureCollection\",\n             \"features\":[]\n          }\n          \n          let fullextent = undefined;\n\n          metadata.zones.forEach((zonedata, idx) => {\n            switch(zonedata.geojson.type) {\n              case \"MultiPolygon\":\n              case \"Polygon\":\n                let feature = {\n                   \"type\":\"Feature\",\n                   \"geometry\": zonedata.geojson\n                }\n                geojson.features.push(feature);\n                \n                let extent = st.extent(feature)\n                if(undefined===fullextent) {\n                  fullextent=extent;\n                } else {\n                  fullextent[0]=Math.min(extent[0],fullextent[0]);\n                  fullextent[1]=Math.min(extent[1],fullextent[1]);\n                  fullextent[2]=Math.max(extent[2],fullextent[2]);\n                  fullextent[3]=Math.max(extent[3],fullextent[3]);\n                }\n\n                break;\n              default:\n                console.warn(\"metadataZonesgeodata - don't know how to handle %s\", zonedata.type, zonedata);\n                break\n            }\n          })\n          \n          let payload = { data: geojson, filter: state.filter.zones, bounds: fullextent};\n          store.dispatch({ type: 'SET_ZONES_GEODATA', payload});\n          store.dispatch({ type: 'LAYER_SET_ZONES_EXTENT', payload: fullextent })\n        })\n        .catch(ex=>{ console.error(\"unable to decode JSON\", ex); })\n        .finally(()=>{ store.dispatch({type: 'SHOW_LOADING', payload: false});\n      })\n        \n      }).catch(ex=>{ console.error(\"unable to fetch zone geodata\"); });\n  } catch(ex) {\n    console.error(\"Unable to update zones\", ex)\n  }\n}","import React, { Component } from 'react';\nimport {\n BrowserRouter as Router,\n} from \"react-router-dom\";\n// import { bindActionCreators } from 'redux';\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport { connect } from 'react-redux';\n\nimport moment from 'moment';\nimport thunk from 'redux-thunk';\n\nimport appReducer from './reducers';\nimport App from './App';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst md5 = require('md5');\n\n// Get persistentState from localStorage\nconst theState = localStorage.getItem('CROWDD_reduxState')\nconst persistedState = theState ? JSON.parse(theState) : {};\n\nexport const store = createStore(\n  appReducer,\n  persistedState,\n  composeEnhancers(applyMiddleware(thunk)),\n);\n\n// Store Redux state into localStorage\nstore.subscribe(() => {\n  const storeState = store.getState();\n\n  const oldFilterHash = localStorage.getItem('CROWDD_filterhash') || false;\n  const newFilterHash = md5(JSON.stringify(storeState.filter))\n  if(newFilterHash!==oldFilterHash) {\n    // console.log(\"filter changed - invalidate data and zones here!\");\n    localStorage.setItem('CROWDD_filterhash', newFilterHash)\n    \n    // store.dispatch({ type: 'CLEAR_ZONES', payload: null});\n    store.dispatch({ type: 'CLEAR_VEHICLES', payload: null});\n    store.dispatch({ type: 'CLEAR_RENTALS_ORIGINS', payload: null});\n    store.dispatch({ type: 'CLEAR_RENTALS_DESTINATIONS', payload: null});\n  }\n  \n  const storeStateToSaveInLocalStorage = {\n    last_update: moment().unix(),\n    authentication: storeState.authentication,\n    filter: storeState.filter,\n    layers: storeState.layers,\n    ui: storeState.ui\n  }\n  localStorage.setItem('CROWDD_reduxState', JSON.stringify(storeStateToSaveInLocalStorage))\n})\n\nclass AppProvider extends Component {\n  render() {\n    return (\n      <Provider store={store}>\n        <Router>\n        <App content={this.props.content} />\n        </Router>\n      </Provider>\n    )\n  }\n}\n\nfunction connectWithStore(store, WrappedComponent, ...args) {\n  let ConnectedWrappedComponent = connect(...args)(WrappedComponent)\n  return function (props) {\n    return <ConnectedWrappedComponent {...props} store={store} />\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    // config: getConfig(state),\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    // actions: bindActionCreators(actions, dispatch),\n  }\n}\n\nexport default AppProvider = connectWithStore(\n  store,\n  AppProvider,\n  mapStateToProps,\n  mapDispatchToProps\n)\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppProvider from './AppProvider';\nimport reportWebVitals from './reportWebVitals';\n\nwindow.notify = (msg) => {\n  alert(msg);\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppProvider />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}